"use strict";(self.webpackChunkvelzon=self.webpackChunkvelzon||[]).push([[791],{84205:(Oe,se,d)=>{d.d(se,{t:()=>T});var g=d(67569),c=d(45312),m=d(54438),B=d(21626);let T=(()=>{class J extends g.d{constructor(Ce){super(Ce,c.c.apiUrl+"ClientGroup/")}static{this.\u0275fac=function(p){return new(p||J)(m.KVO(B.Qq))}}static{this.\u0275prov=m.jDH({token:J,factory:J.\u0275fac,providedIn:"root"})}}return J})()},70072:(Oe,se,d)=>{d.d(se,{A:()=>J});var g=d(84412),c=d(67569),m=d(45312),B=d(54438),T=d(21626);let J=(()=>{class ie extends c.d{constructor(p){super(p,m.c.apiUrl+"OfferOrder/"),this.checkValidationSource=new g.t(!0),this.checkValidation=this.checkValidationSource.asObservable(),this.GetOrderCountSource=new g.t(!0),this.GetOrderCount=this.GetOrderCountSource.asObservable(),this.removeServiceQ=new g.t(0),this.removeService=this.removeServiceQ.asObservable(),this.removeServiceOfferQ=new g.t(0),this.removeServiceOffer=this.removeServiceOfferQ.asObservable(),this.discountTypes=[{id:1,name:"Cost"},{id:2,name:"Precentage"}],this.salesOrderForm={itemsOffers:[],id:null,clientLocationId:0,clientVisitDate:new Date,clientId:0,notes:"",items:[],discountAmount:0,discountAmountAdd:0,total:0,agent:{},orderLocations:{},discountType:1,discountTypeAdd:1,isPrecentage:!0,isPrecentageAdd:!1,totalAddDiscountType:0,totalAddDiscount:0,serviceCategoryCode:0,isCustomerDataValid:!1},this.requesturl=m.c.apiUrl+"salesRequest/"}getLookups(){return this.http.get(this.baseUrl+"Lookups")}changStatus(p){return this.http.put(this.baseUrl+"ChangeStatus/",p)}UpdateQuantity(p){return this.http.put(this.baseUrl+"UpdateQuantity",p)}updateTruck(p){return this.http.put(this.baseUrl+"updateTruck",p)}GetTrucks(p){return this.http.post(this.baseUrl+"GetTrucks/",p)}CancelOfferOrder(p){return this.http.post(this.baseUrl+"CancelOfferOrder",p)}GetOfferOrderCount(){return this.http.get(this.baseUrl+"OfferOrderCount")}GetOfferOrderStoreCount(){return this.http.get(this.baseUrl+"GetOfferOrderStoreCount")}GetAssignSalesOrder(){return this.http.get(this.baseUrl+"GetAssignSalesOrder")}GetOrderDetail(p){return this.http.get(this.baseUrl+"GetOrderDetail/"+p)}RequestChangeQuantity(p){return this.http.post(this.baseUrl+"RequestChangeQuantity/",p)}GetOrderStore(p){return this.http.post(this.baseUrl+"GetOrderStore/",p)}PrintSalesOrder(p){return this.http.get(this.baseUrl+"PrintSalesOrder/"+p,{responseType:"blob"})}PrintStoreReport(p){return this.http.get(this.baseUrl+"PrintStoreReport/"+p,{responseType:"blob"})}registerRequestSales(p){return this.http.post(this.requesturl+"register",p)}static{this.\u0275fac=function(j){return new(j||ie)(B.KVO(T.Qq))}}static{this.\u0275prov=B.jDH({token:ie,factory:ie.\u0275fac,providedIn:"root"})}}return ie})()},32791:(Oe,se,d)=>{d.r(se),d.d(se,{CrmModule:()=>ws});var g=d(60177),c=d(89417),m=d(69005),B=d(91022),T=d(72510),J=d(63789),ie=d(98982),Ce=d.n(ie),p=d(56977),j=d(37021),M=d(35335),y=d(45236),I=d(70980),G=d(75622),u=d(36158),e=d(54438),f=d(51188),_=d(8147),pe=d(67569),W=d(45312),ge=d(21626);let mt=(()=>{class o extends pe.d{constructor(t){super(t,W.c.apiUrl+"ClientReviewActionDoing/")}static{this.\u0275fac=function(i){return new(i||o)(e.KVO(ge.Qq))}}static{this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var F=d(3888),b=d(1530),O=d(91426),D=d(40724),P=d(15084),V=d(88148),L=d(91580),x=d(29935),U=d(94575),C=d(45286),N=d(5779),K=d(41631);const pt=()=>["crmSetting.register"],gt=()=>["crmSetting.edit"],_t=()=>["crmSetting.delete"];function ut(o,s){1&o&&(e.j41(0,"tr",25)(1,"th",26),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",27),e.nrm(4,"i",28),e.EFF(5," general.table.nameAr "),e.k0s(),e.j41(6,"th",29),e.nrm(7,"i",28),e.EFF(8," general.table.nameEn "),e.k0s(),e.j41(9,"th",30),e.nrm(10,"i",28),e.EFF(11," general.table.isActive "),e.k0s(),e.nrm(12,"th",31),e.k0s())}function ht(o,s){1&o&&e.nrm(0,"span",38)}function ft(o,s){1&o&&e.nrm(0,"span",39)}function bt(o,s){if(1&o&&(e.nrm(0,"i",40),e.EFF(1),e.nI1(2,"date"),e.nrm(3,"br")(4,"i",41),e.EFF(5),e.nI1(6,"date"),e.nrm(7,"br")(8,"i",42),e.EFF(9)),2&o){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.i5U(2,3,t.createdDate,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",e.i5U(6,6,t.updatedDate,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",t.creatorName," ")}}function Ct(o,s){if(1&o){const t=e.RV6();e.j41(0,"button",43),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,a=e.XpG(),l=e.sdS(24);return e.Njj(a.EditModel(n.id,l))}),e.nrm(1,"i",44),e.k0s()}}function vt(o,s){if(1&o){const t=e.RV6();e.j41(0,"button",45),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,a=e.XpG(),l=e.sdS(26);return e.Njj(a.openModal(n.id,l))}),e.nrm(1,"i",46),e.k0s()}}function Rt(o,s){if(1&o&&(e.j41(0,"tr",32)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.DNE(8,ht,1,0,"span",33)(9,ft,1,0,"span",34),e.k0s(),e.j41(10,"td"),e.DNE(11,bt,10,9,"ng-template",null,3,e.C5r),e.nrm(13,"i",35),e.DNE(14,Ct,2,0,"button",36)(15,vt,2,0,"button",37),e.k0s()()),2&o){const t=s.$implicit,i=s.rowIndex,n=e.sdS(12);e.R7$(2),e.JRh(i+1),e.R7$(2),e.JRh(t.nameAr),e.R7$(2),e.JRh(t.nameEn),e.R7$(2),e.Y8G("ngIf",t.isActive),e.R7$(),e.Y8G("ngIf",!t.isActive),e.R7$(4),e.Y8G("ngbTooltip",n),e.R7$(),e.Y8G("hasPermission",e.lJ4(8,gt)),e.R7$(),e.Y8G("hasPermission",e.lJ4(9,_t))}}function jt(o,s){1&o&&(e.j41(0,"div",47),e.EFF(1," general.table.noData"),e.k0s())}function It(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",48)(1,"div",49),e.nrm(2,"ngb-pagination-info",50),e.j41(3,"table-length",51),e.bIt("lengthChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",52)(5,"ngb-pagination",53),e.bIt("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.pagination.pageNumber,n)||(a.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&o){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function yt(o,s){1&o&&(e.j41(0,"span",78),e.EFF(1,"general.action.register "),e.k0s())}function Ft(o,s){1&o&&(e.j41(0,"span",78),e.EFF(1,"general.action.edit "),e.k0s())}function Mt(o,s){1&o&&(e.j41(0,"div",79),e.EFF(1," general.message.filedIdRequired"),e.k0s())}function St(o,s){1&o&&(e.j41(0,"div",79),e.EFF(1," general.message.filedIdRequired"),e.k0s())}function Tt(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",54)(1,"div",55)(2,"h4",56),e.DNE(3,yt,2,0,"span",57)(4,Ft,2,0,"span",57),e.j41(5,"span",58),e.EFF(6),e.k0s()(),e.j41(7,"button",59),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss("Cross click"))}),e.k0s()(),e.j41(8,"div",60),e.nrm(9,"ngx-ui-loader",61),e.j41(10,"form",62,4),e.bIt("submit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.OnSubmit())}),e.j41(12,"div",63)(13,"label",64),e.EFF(14,"general.table.nameAr"),e.k0s(),e.j41(15,"input",65,5),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.nameAr,n)||(a.form.nameAr=n),e.Njj(n)}),e.k0s(),e.DNE(17,Mt,2,0,"div",66),e.k0s(),e.j41(18,"div",63)(19,"label",67),e.EFF(20,"general.table.nameEn"),e.k0s(),e.j41(21,"input",68,6),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.nameEn,n)||(a.form.nameEn=n),e.Njj(n)}),e.k0s(),e.DNE(23,St,2,0,"div",66),e.k0s(),e.j41(24,"div",63)(25,"label",69),e.EFF(26,"general.table.notes"),e.k0s(),e.j41(27,"input",70,7),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.notes,n)||(a.form.notes=n),e.Njj(n)}),e.k0s()(),e.j41(29,"div",71)(30,"label",72),e.EFF(31,"general.table.isActive"),e.k0s(),e.j41(32,"p-inputSwitch",73),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.isActive,n)||(a.form.isActive=n),e.Njj(n)}),e.k0s()(),e.j41(33,"div",74)(34,"button",75),e.nrm(35,"i",76)(36,"span",77),e.k0s()()()()()}if(2&o){const t=e.sdS(11),i=e.sdS(16),n=e.sdS(22),a=e.XpG();e.R7$(3),e.Y8G("ngIf",!a.isEditForm),e.R7$(),e.Y8G("ngIf",a.isEditForm),e.R7$(2),e.JRh(a.titleOperation),e.R7$(3),e.Y8G("hasProgressBar",!1)("fgsType",a.loaderOperationShap)("loaderId",a.operationLoader),e.R7$(6),e.R50("ngModel",a.form.nameAr),e.R7$(2),e.Y8G("ngIf",i.invalid&&i.touched),e.R7$(4),e.R50("ngModel",a.form.nameEn),e.R7$(2),e.Y8G("ngIf",n.invalid&&n.touched),e.R7$(4),e.R50("ngModel",a.form.notes),e.R7$(5),e.R50("ngModel",a.form.isActive),e.R7$(2),e.Y8G("disabled",!t.valid)}}function kt(o,s){if(1&o){const t=e.RV6();e.j41(0,"delete-modal",80),e.bIt("deleteConfirm",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.DeleteConfirm())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}}let Be=(()=>{class o extends G.w{constructor(t,i,n,a,l,r,h,v,R){super(t,i,h,n,a,l,r),this.baseService=n,this.excelService=R,this.title="crm.clientReviewActionDoing.title",this.titleOperation="crm.clientReviewActionDoing.titleOperation",this.keySelected="",this.assignUsers=[],this.times=[],this.employees=[],this.searchForm={},this.isResolveList=!0,this.countLoad=2,this.configRoute()}onUpdateIsActive(t){this.baseService.updateActive(t).pipe((0,p.Q)(this.notifier)).subscribe(i=>{i?this.alertService.success():this.alertService.error("general.message."+i)},i=>{this.alertService.error()})}ngOnInitMore(){}mapForm(t){return{...t}}mapRegisterForm(t){let i={...t};return i.id=0,i}OnSearch(t){this.ngxLoader.startLoader(u.a7),this.loadentities()}onSearch(){this.ngxLoader.startLoader(u.a7),this.loadentities()}configRoute(){}mapExcel(){let t=[];return this.entities?.forEach(i=>{t.push({nameAr:i.nameAr,nameEn:i.nameEn,isActive:this.getTranslationText("general.table.active"),notes:i.notes})}),t}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,this.getTranslationText(this.title),[])}editEntity(){let t=this.mapForm(this.form);this.baseService.editPut(t.id,t).pipe((0,j.O)(),(0,M.c)(this.mainDelay),(0,y.Z)(),(0,p.Q)(this.notifier),(0,I.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(i=>{i.success?this.submitFunished():this.alertService.error("general.message."+i.message)},i=>{this.alertService.error("general.message."+i)})}static{this.\u0275fac=function(i){return new(i||o)(e.rXU(f.nX),e.rXU(_.c$),e.rXU(mt),e.rXU(F.u),e.rXU(g.vh),e.rXU(b.eD),e.rXU(m.Bq),e.rXU(e.gRc),e.rXU(O.V))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["clientReviewActionDoing"]],features:[e.Vt3],decls:27,vars:18,consts:[["tableMaster",""],["operation",""],["deleteModal",""],["tooltipContent",""],["formEntity","ngForm"],["nameAr","ngModel"],["nameEn","ngModel"],["notes","ngModel"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],[3,"reset","search","exportXlsx","addNew","addPermission","totalItems","title"],["control",""],[1,"col-md-3","mb-2"],[1,"search-box"],["type","search","id","filterValue1","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["type","search","id","filterValue2","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["translate","",2,"width",".5%"],["pSortableColumn","nameAr","translate","",2,"width","10%"],[1,"ri-expand-up-down-line"],["pSortableColumn","nameEn","translate","",2,"width","10%"],["pSortableColumn","isActive","translate","",2,"width","8%"],["translate","",2,"width","10%"],[1,"fs-5"],["class","badge bg-success-subtle text-success p-2","translate","general.table.active",4,"ngIf"],["class","badge bg-danger-subtle text-danger p-2","translate","general.table.noActive",4,"ngIf"],["tooltipPosition","top",1,"mdi","mdi-cog-outline","text-muted","fs-16","align-middle","me-1",3,"ngbTooltip"],["class","btn btn-sm btn-soft-info edit-list mx-2",3,"click",4,"hasPermission"],["class","btn btn-sm btn-soft-danger remove-list",3,"click",4,"hasPermission"],["translate","general.table.active",1,"badge","bg-success-subtle","text-success","p-2"],["translate","general.table.noActive",1,"badge","bg-danger-subtle","text-danger","p-2"],[1,"ri-history-fill","text-warning"],[1,"ri-history-fill","text-danger"],[1,"ri-user-location-fill","text-primary"],[1,"btn","btn-sm","btn-soft-info","edit-list","mx-2",3,"click"],[1,"ri-pencil-fill","align-bottom","mx-1"],[1,"btn","btn-sm","btn-soft-danger","remove-list",3,"click"],[1,"ri-delete-bin-5-fill","align-bottom"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["class","fw-bold fs-4","translate","",4,"ngIf"],["translate",""],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"hasProgressBar","fgsType","loaderId"],[3,"submit"],[1,"mb-3"],["for","nameAr","translate","",1,"required","fw-bold","form-label"],["InputTirmFilter","","name","nameAr","type","text","id","nameAr","required","",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],["for","nameEn","translate","",1,"required","fw-bold","form-label"],["InputTirmFilter","","name","nameEn","type","text","id","nameEn","required","",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["for","notes","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","notes","type","text","id","notes",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,"col-12","form-check"],["for","isActive","translate","",1,"fw-bold","form-label","w-100"],["name","isActive","inputId","isActive",3,"ngModelChange","ngModel"],[1,"text-center"],["type","submit","type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],["translate","",1,"fw-bold","fs-4"],["translate","",1,"text-danger","text-center"],[3,"deleteConfirm","dismiss"]],template:function(i,n){if(1&i){const a=e.RV6();e.j41(0,"div",8)(1,"div",9)(2,"div",10)(3,"base-filter",11),e.bIt("reset",function(){return e.eBV(a),e.Njj(n.onReset())})("search",function(){return e.eBV(a),e.Njj(n.onSearch())})("exportXlsx",function(){return e.eBV(a),e.Njj(n.onExportXlsx())})("addNew",function(){e.eBV(a);const r=e.sdS(24);return e.Njj(n.openModalTitle(r,"md"))}),e.qex(4,12),e.j41(5,"div",13)(6,"div",14)(7,"input",15),e.nI1(8,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.nameEn,r)||(n.pagination.nameEn=r),e.Njj(r)}),e.k0s(),e.nrm(9,"i",16),e.k0s()(),e.j41(10,"div",13)(11,"div",14)(12,"input",17),e.nI1(13,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.nameAr,r)||(n.pagination.nameAr=r),e.Njj(r)}),e.k0s(),e.nrm(14,"i",16),e.k0s()(),e.bVm(),e.k0s(),e.j41(15,"div",18)(16,"div",19)(17,"p-table",20,0),e.bIt("onLazyLoad",function(r){return e.eBV(a),e.Njj(n.tableChange(r))})("selectionChange",function(r){return e.eBV(a),e.Njj(n.onSelectionChange(r))}),e.DNE(19,ut,13,0,"ng-template",21)(20,Rt,16,10,"ng-template",22),e.k0s()(),e.DNE(21,jt,2,0,"div",23)(22,It,6,8,"div",24),e.k0s()()()(),e.DNE(23,Tt,37,13,"ng-template",null,1,e.C5r)(25,kt,1,0,"ng-template",null,2,e.C5r)}2&i&&(e.R7$(3),e.Y8G("addPermission",e.lJ4(17,pt))("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(4),e.FS9("placeholder",e.bMT(8,13,"general.table.nameEn")),e.R50("ngModel",n.pagination.nameEn),e.R7$(5),e.FS9("placeholder",e.bMT(13,15,"general.table.nameAr")),e.R50("ngModel",n.pagination.nameAr),e.R7$(5),e.Y8G("value",n.entities)("rows",n.pagination.pageSize)("lazy",!0)("totalRecords",n.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",n.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems>0))},dependencies:[g.bT,c.qT,c.me,c.BC,c.cb,c.YS,c.vS,c.cV,m.s5,D.b,P.w,V.p,L.g,x.m,U.p,_.Mm,C.XI,N.Ei,C.Tg,K.HW,b.Cv,m.md,g.vh,_.D9],encapsulation:2})}}return o})(),ve=(()=>{class o extends pe.d{constructor(t){super(t,W.c.apiUrl+"Leads/")}GetLeadsLookUps(){return this.http.get(this.baseUrl+"LeadsLookUp")}static{this.\u0275fac=function(i){return new(i||o)(e.KVO(ge.Qq))}}static{this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var wt=d(54384),H=d(26364);function xt(o,s){1&o&&(e.j41(0,"tr",25)(1,"th",26),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",27),e.nrm(4,"i",28),e.EFF(5," general.table.name "),e.k0s(),e.j41(6,"th",29),e.nrm(7,"i",28),e.EFF(8," crm.leads.mobile "),e.k0s(),e.j41(9,"th",30),e.nrm(10,"i",28),e.EFF(11," crm.leads.cityName "),e.k0s(),e.j41(12,"th",31),e.nrm(13,"i",28),e.EFF(14," crm.leads.channelName "),e.k0s(),e.j41(15,"th",32),e.nrm(16,"i",28),e.EFF(17," crm.leads.leadType "),e.k0s(),e.j41(18,"th",33),e.nrm(19,"i",28),e.EFF(20," crm.leads.vIPNumber "),e.k0s(),e.j41(21,"th",34),e.nrm(22,"i",28),e.EFF(23," crm.leads.discuontPercentage "),e.k0s(),e.nrm(24,"th",35),e.k0s())}function Nt(o,s){if(1&o&&(e.nrm(0,"i",49),e.EFF(1),e.nI1(2,"date"),e.nrm(3,"br")(4,"i",50),e.EFF(5),e.nI1(6,"date"),e.nrm(7,"br")(8,"i",51),e.EFF(9)),2&o){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.i5U(2,3,t.creationTime,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",e.i5U(6,6,t.lastModificationTime,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",t.creatorName," ")}}function Gt(o,s){if(1&o){const t=e.RV6();e.j41(0,"tr",36)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.k0s(),e.j41(11,"td"),e.EFF(12),e.nI1(13,"translate"),e.k0s(),e.j41(14,"td"),e.EFF(15),e.k0s(),e.j41(16,"td"),e.EFF(17),e.k0s(),e.j41(18,"td"),e.DNE(19,Nt,10,9,"ng-template",null,2,e.C5r),e.j41(21,"div",37)(22,"div",38)(23,"button",39),e.nrm(24,"i",40),e.k0s(),e.j41(25,"ul",41)(26,"li",42),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.goLeadEdit(n.id))}),e.j41(27,"span",43),e.nrm(28,"i",44)(29,"span",45),e.k0s()(),e.j41(30,"li",42),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),l=e.sdS(38);return e.Njj(a.openModal(n.id,l))}),e.j41(31,"a",46),e.nrm(32,"i",47)(33,"span",48),e.k0s()()()()()()()}if(2&o){const t=s.$implicit,i=s.rowIndex;e.R7$(2),e.JRh(i+1),e.R7$(2),e.JRh(t.name),e.R7$(2),e.JRh(t.mobile),e.R7$(2),e.JRh(t.cityName),e.R7$(2),e.JRh(t.channelName),e.R7$(2),e.JRh(e.bMT(13,8,"crm.leads."+t.leadsTypeName)),e.R7$(3),e.JRh(t.vipNumber),e.R7$(2),e.JRh(t.discuontPercentage)}}function Et(o,s){1&o&&(e.j41(0,"div",52),e.EFF(1," general.table.noData "),e.k0s())}function Dt(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",53)(1,"div",54),e.nrm(2,"ngb-pagination-info",55),e.j41(3,"table-length",56),e.bIt("lengthChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",57)(5,"ngb-pagination",58),e.bIt("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.pagination.pageNumber,n)||(a.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&o){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function Vt(o,s){if(1&o){const t=e.RV6();e.j41(0,"delete-modal",59),e.bIt("deleteConfirm",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.DeleteConfirm())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}}let Lt=(()=>{class o extends G.w{constructor(t,i,n,a,l,r,h,v,R,S){super(t,i,h,l,n,a,r),this.baseService=l,this.service=v,this.excelService=R,this.router=S,this.title="crm.leads.title",this.submitted=!1,this.cities=[],this.channels=[],this.leadTypes=[],this.isResolveList=!0,this.configRoute(),this.GetAgentLookUps()}configRoute(){this.routerActive.data.pipe((0,p.Q)(this.notifier)).subscribe(t=>{this.entities=t.data.data,this.pagination.totalItems=t.data.totalItems},()=>{this.alertService.error()})}onSearch(){this.ngxLoader.startLoader(this.searchLoader),this.loadentities()}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,"Service Type",[])}mapExcel(){let t=[];return this.entities?.forEach(i=>{t.push({name:i.name,mobile:i.mobile,cityName:i.cityName,channelName:i.channelName,leadType:i.leadTypeName,isActive:this.getTranslationText("general.table.active")})}),t}GetAgentLookUps(){this.baseService.GetLeadsLookUps().subscribe(t=>{this.channels=t.data.channels,this.cities=t.data.cityNames,this.leadTypes=[],t.data.leadTypes.forEach(n=>{n.name=this.getTranslationText("crm.leads."+n.name),this.leadTypes.push(n)}),console.log(this.leadTypes)},t=>{console.log(t)})}goLeadCreate(){this.router.navigateByUrl("/crm/leads/register")}goLeadEdit(t){this.router.navigateByUrl("/crm/leads/edit",{state:{id:t}})}static{this.\u0275fac=function(i){return new(i||o)(e.rXU(f.nX),e.rXU(_.c$),e.rXU(F.u),e.rXU(g.vh),e.rXU(ve),e.rXU(b.eD),e.rXU(m.Bq),e.rXU(wt.m),e.rXU(O.V),e.rXU(f.Ix))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-leads"]],features:[e.Vt3],decls:39,vars:41,consts:[["tableMaster",""],["deleteModal",""],["tooltipContent",""],[3,"title","breadcrumbItems"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],[3,"reset","search","exportXlsx","addNew","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","search","id","filterValue","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["InputTirmFilter","","type","search","id","mobile","name","mobile",1,"form-control",3,"ngModelChange","placeholder","ngModel"],["name","userType","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","placeholder","ngModel"],["name","channelCode","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","placeholder","ngModel"],["name","Status","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","placeholder","ngModel"],[1,"card-body"],[3,"hasProgressBar","fgsType","loaderId"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["translate","",2,"width",".5%"],["pSortableColumn","name","translate","",2,"width","10%"],[1,"ri-expand-up-down-line"],["pSortableColumn","mobile","translate","",2,"width","10%"],["pSortableColumn","cityId","translate","",2,"width","10%"],["pSortableColumn","channelId","translate","",2,"width","10%"],["pSortableColumn","leadsTypes","translate","",2,"width","10%"],["pSortableColumn","vIPNumber","translate","",2,"width","8%"],["pSortableColumn","discuontPercentage","translate","",2,"width","5%"],["translate","",2,"width","10%"],[1,"fs-5"],[1,"d-inline"],[1,"dropdown-custom"],["type","button",1,"btn","dropbtn","btn-soft-secondary","btn-sm","dropdown-custom","arrow-none"],[1,"ri-more-fill"],[1,"dropdown-menu","dropdown-menu-end","dropdown-content",2,"left","0"],[3,"click"],[1,"dropdown-item"],[1,"ri-pencil-fill","align-bottom","me-2","text-muted"],["translate","general.action.edit"],["href","javascript:void(0);",1,"dropdown-item"],[1,"ri-delete-bin-fill","align-bottom","me-2","text-muted"],["translate","general.action.delete"],[1,"ri-history-fill","text-warning"],[1,"ri-history-fill","text-danger"],[1,"ri-user-location-fill","text-primary"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[3,"deleteConfirm","dismiss"]],template:function(i,n){if(1&i){const a=e.RV6();e.nrm(0,"app-breadcrumbs",3),e.nI1(1,"translate"),e.j41(2,"div",4)(3,"div",5)(4,"div",6)(5,"base-filter",7),e.bIt("reset",function(){return e.eBV(a),e.Njj(n.onReset())})("search",function(){return e.eBV(a),e.Njj(n.onSearch())})("exportXlsx",function(){return e.eBV(a),e.Njj(n.onExportXlsx())})("addNew",function(){return e.eBV(a),e.Njj(n.goLeadCreate())}),e.qex(6,8),e.j41(7,"div",9)(8,"div",10)(9,"input",11),e.nI1(10,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.filterValue,r)||(n.pagination.filterValue=r),e.Njj(r)}),e.k0s(),e.nrm(11,"i",12),e.k0s()(),e.j41(12,"div",9)(13,"div",10)(14,"input",13),e.nI1(15,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.mobile,r)||(n.pagination.mobile=r),e.Njj(r)}),e.k0s()()(),e.j41(16,"div",9)(17,"div",10)(18,"ng-select",14),e.nI1(19,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.cityId,r)||(n.pagination.cityId=r),e.Njj(r)}),e.k0s()()(),e.j41(20,"div",9)(21,"div",10)(22,"ng-select",15),e.nI1(23,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.channelId,r)||(n.pagination.channelId=r),e.Njj(r)}),e.k0s()()(),e.j41(24,"div",9)(25,"div",10)(26,"ng-select",16),e.nI1(27,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.leadsTypes,r)||(n.pagination.leadsTypes=r),e.Njj(r)}),e.k0s()()(),e.bVm(),e.k0s(),e.j41(28,"div",17),e.nrm(29,"ngx-ui-loader",18),e.j41(30,"div",19)(31,"p-table",20,0),e.bIt("onLazyLoad",function(r){return e.eBV(a),e.Njj(n.tableChange(r))})("selectionChange",function(r){return e.eBV(a),e.Njj(n.onSelectionChange(r))}),e.DNE(33,xt,25,0,"ng-template",21)(34,Gt,34,10,"ng-template",22),e.k0s()(),e.DNE(35,Et,2,0,"div",23)(36,Dt,6,8,"div",24),e.k0s()()()(),e.DNE(37,Vt,1,0,"ng-template",null,1,e.C5r)}2&i&&(e.FS9("title",e.bMT(1,29,n.title)),e.Y8G("breadcrumbItems",n.breadCrumbItems),e.R7$(5),e.Y8G("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(4),e.FS9("placeholder",e.bMT(10,31,"task.tasklist.subject")),e.R50("ngModel",n.pagination.filterValue),e.R7$(5),e.FS9("placeholder",e.bMT(15,33,"crm.leads.mobile")),e.R50("ngModel",n.pagination.mobile),e.R7$(4),e.FS9("placeholder",e.bMT(19,35,"crm.leads.cityName")),e.Y8G("items",n.cities)("multiple",!1),e.R50("ngModel",n.pagination.cityId),e.R7$(4),e.FS9("placeholder",e.bMT(23,37,"crm.leads.channelName")),e.Y8G("items",n.channels)("multiple",!1),e.R50("ngModel",n.pagination.channelId),e.R7$(4),e.FS9("placeholder",e.bMT(27,39,"crm.leads.leadType")),e.Y8G("items",n.leadTypes)("multiple",!1),e.R50("ngModel",n.pagination.leadsTypes),e.R7$(3),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderSearchShap)("loaderId",n.searchLoader),e.R7$(2),e.Y8G("value",n.entities)("rows",n.pagination.pageSize)("lazy",!0)("totalRecords",n.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",n.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems>0))},dependencies:[g.bT,c.me,c.BC,c.vS,m.s5,H.m,D.b,P.w,V.p,L.g,x.m,_.Mm,C.XI,N.Ei,C.Tg,b.Cv,T.vr,g.vh,_.D9],encapsulation:2})}}return o})();var q=d(99437),ce=d(18810),_e=d(33826),ue=d(62984),he=d(12260),Se=d(16229),Te=d(12822),ae=d(10426),de=d(50204),fe=d(14221),ke=d(461),Re=d(54420);let Pe=(()=>{class o extends ke.h{pathId;ngOnInit(){this.pathId="url(#"+(0,Re._Y)()+")"}static \u0275fac=(()=>{let t;return function(n){return(t||(t=e.xGo(o)))(n||o)}})();static \u0275cmp=e.VBU({type:o,selectors:[["BanIcon"]],standalone:!0,features:[e.Vt3,e.aNF],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M7 0C5.61553 0 4.26215 0.410543 3.11101 1.17971C1.95987 1.94888 1.06266 3.04213 0.532846 4.32122C0.00303296 5.6003 -0.13559 7.00776 0.134506 8.36563C0.404603 9.7235 1.07129 10.9708 2.05026 11.9497C3.02922 12.9287 4.2765 13.5954 5.63437 13.8655C6.99224 14.1356 8.3997 13.997 9.67879 13.4672C10.9579 12.9373 12.0511 12.0401 12.8203 10.889C13.5895 9.73785 14 8.38447 14 7C14 5.14348 13.2625 3.36301 11.9497 2.05025C10.637 0.737498 8.85652 0 7 0ZM1.16667 7C1.16549 5.65478 1.63303 4.35118 2.48889 3.31333L10.6867 11.5111C9.83309 12.2112 8.79816 12.6544 7.70243 12.789C6.60669 12.9236 5.49527 12.744 4.49764 12.2713C3.50001 11.7986 2.65724 11.0521 2.06751 10.1188C1.47778 9.18558 1.16537 8.10397 1.16667 7ZM11.5111 10.6867L3.31334 2.48889C4.43144 1.57388 5.84966 1.10701 7.29265 1.1789C8.73565 1.2508 10.1004 1.85633 11.1221 2.87795C12.1437 3.89956 12.7492 5.26435 12.8211 6.70735C12.893 8.15034 12.4261 9.56856 11.5111 10.6867Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(i,n){1&i&&(e.qSk(),e.j41(0,"svg",0)(1,"g"),e.nrm(2,"path",1),e.k0s(),e.j41(3,"defs")(4,"clipPath",2),e.nrm(5,"rect",3),e.k0s()()()),2&i&&(e.HbH(n.getClassNames()),e.BMQ("aria-label",n.ariaLabel)("aria-hidden",n.ariaHidden)("role",n.role),e.R7$(),e.BMQ("clip-path",n.pathId),e.R7$(3),e.Y8G("id",n.pathId))},encapsulation:2})}return o})(),Ae=(()=>{class o extends ke.h{pathId;ngOnInit(){this.pathId="url(#"+(0,Re._Y)()+")"}static \u0275fac=(()=>{let t;return function(n){return(t||(t=e.xGo(o)))(n||o)}})();static \u0275cmp=e.VBU({type:o,selectors:[["StarIcon"]],standalone:!0,features:[e.Vt3,e.aNF],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M10.9741 13.6721C10.8806 13.6719 10.7886 13.6483 10.7066 13.6033L7.00002 11.6545L3.29345 13.6033C3.19926 13.6539 3.09281 13.6771 2.98612 13.6703C2.87943 13.6636 2.77676 13.6271 2.6897 13.5651C2.60277 13.5014 2.53529 13.4147 2.4948 13.3148C2.45431 13.215 2.44241 13.1058 2.46042 12.9995L3.17881 8.87264L0.167699 5.95324C0.0922333 5.8777 0.039368 5.78258 0.0150625 5.67861C-0.00924303 5.57463 -0.00402231 5.46594 0.030136 5.36477C0.0621323 5.26323 0.122141 5.17278 0.203259 5.10383C0.284377 5.03488 0.383311 4.99023 0.488681 4.97501L4.63087 4.37126L6.48797 0.618832C6.54083 0.530159 6.61581 0.456732 6.70556 0.405741C6.79532 0.35475 6.89678 0.327942 7.00002 0.327942C7.10325 0.327942 7.20471 0.35475 7.29447 0.405741C7.38422 0.456732 7.4592 0.530159 7.51206 0.618832L9.36916 4.37126L13.5114 4.97501C13.6167 4.99023 13.7157 5.03488 13.7968 5.10383C13.8779 5.17278 13.9379 5.26323 13.9699 5.36477C14.0041 5.46594 14.0093 5.57463 13.985 5.67861C13.9607 5.78258 13.9078 5.8777 13.8323 5.95324L10.8212 8.87264L11.532 12.9995C11.55 13.1058 11.5381 13.215 11.4976 13.3148C11.4571 13.4147 11.3896 13.5014 11.3027 13.5651C11.2059 13.632 11.0917 13.6692 10.9741 13.6721ZM7.00002 10.4393C7.09251 10.4404 7.18371 10.4613 7.2675 10.5005L10.2098 12.029L9.65193 8.75036C9.6368 8.6584 9.64343 8.56418 9.6713 8.47526C9.69918 8.38633 9.74751 8.30518 9.81242 8.23832L12.1969 5.94559L8.90298 5.45648C8.81188 5.44198 8.72555 5.406 8.65113 5.35152C8.57671 5.29703 8.51633 5.2256 8.475 5.14314L7.00002 2.1626L5.52503 5.15078C5.4837 5.23324 5.42332 5.30467 5.3489 5.35916C5.27448 5.41365 5.18815 5.44963 5.09705 5.46412L1.80318 5.94559L4.18761 8.23832C4.25252 8.30518 4.30085 8.38633 4.32873 8.47526C4.3566 8.56418 4.36323 8.6584 4.3481 8.75036L3.7902 12.0519L6.73253 10.5234C6.81451 10.4762 6.9058 10.4475 7.00002 10.4393Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(i,n){1&i&&(e.qSk(),e.j41(0,"svg",0)(1,"g"),e.nrm(2,"path",1),e.k0s(),e.j41(3,"defs")(4,"clipPath",2),e.nrm(5,"rect",3),e.k0s()()()),2&i&&(e.HbH(n.getClassNames()),e.BMQ("aria-label",n.ariaLabel)("aria-hidden",n.ariaHidden)("role",n.role),e.R7$(),e.BMQ("clip-path",n.pathId),e.R7$(3),e.Y8G("id",n.pathId))},encapsulation:2})}return o})(),$e=(()=>{class o extends ke.h{pathId;ngOnInit(){this.pathId="url(#"+(0,Re._Y)()+")"}static \u0275fac=(()=>{let t;return function(n){return(t||(t=e.xGo(o)))(n||o)}})();static \u0275cmp=e.VBU({type:o,selectors:[["StarFillIcon"]],standalone:!0,features:[e.Vt3,e.aNF],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M13.9718 5.36453C13.9398 5.26298 13.8798 5.17252 13.7986 5.10356C13.7175 5.0346 13.6186 4.98994 13.5132 4.97472L9.37043 4.37088L7.51307 0.617955C7.46021 0.529271 7.38522 0.455834 7.29545 0.404836C7.20568 0.353838 7.1042 0.327026 7.00096 0.327026C6.89771 0.327026 6.79624 0.353838 6.70647 0.404836C6.6167 0.455834 6.54171 0.529271 6.48885 0.617955L4.63149 4.37088L0.488746 4.97472C0.383363 4.98994 0.284416 5.0346 0.203286 5.10356C0.122157 5.17252 0.0621407 5.26298 0.03014 5.36453C-0.00402286 5.46571 -0.00924428 5.57442 0.0150645 5.67841C0.0393733 5.7824 0.0922457 5.87753 0.167722 5.95308L3.17924 8.87287L2.4684 13.0003C2.45038 13.1066 2.46229 13.2158 2.50278 13.3157C2.54328 13.4156 2.61077 13.5022 2.6977 13.5659C2.78477 13.628 2.88746 13.6644 2.99416 13.6712C3.10087 13.678 3.20733 13.6547 3.30153 13.6042L7.00096 11.6551L10.708 13.6042C10.79 13.6491 10.882 13.6728 10.9755 13.673C11.0958 13.6716 11.2129 13.6343 11.3119 13.5659C11.3988 13.5022 11.4663 13.4156 11.5068 13.3157C11.5473 13.2158 11.5592 13.1066 11.5412 13.0003L10.8227 8.87287L13.8266 5.95308C13.9033 5.87835 13.9577 5.7836 13.9833 5.67957C14.009 5.57554 14.005 5.4664 13.9718 5.36453Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(i,n){1&i&&(e.qSk(),e.j41(0,"svg",0)(1,"g"),e.nrm(2,"path",1),e.k0s(),e.j41(3,"defs")(4,"clipPath",2),e.nrm(5,"rect",3),e.k0s()()()),2&i&&(e.HbH(n.getClassNames()),e.BMQ("aria-label",n.ariaLabel)("aria-hidden",n.ariaHidden)("role",n.role),e.R7$(),e.BMQ("clip-path",n.pathId),e.R7$(3),e.Y8G("id",n.pathId))},encapsulation:2})}return o})();var Ye=d(81455),Ue=d(41880);const Xt=(o,s)=>({"p-readonly":o,"p-disabled":s}),Ot=o=>({"p-focus":o}),Bt=(o,s)=>({"p-rating-item-active":o,"p-focus":s});function Pt(o,s){if(1&o&&e.nrm(0,"span",10),2&o){const t=e.XpG(3);e.Y8G("ngClass",t.iconCancelClass)("ngStyle",t.iconCancelStyle)}}function At(o,s){if(1&o&&e.nrm(0,"BanIcon",11),2&o){const t=e.XpG(3);e.Y8G("styleClass","p-rating-icon p-rating-cancel")("ngStyle",t.iconCancelStyle),e.BMQ("data-pc-section","cancelIcon")}}function $t(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",5),e.bIt("click",function(n){e.eBV(t);const a=e.XpG(2);return e.Njj(a.onOptionClick(n,0))}),e.j41(1,"span",6)(2,"input",7),e.bIt("focus",function(n){e.eBV(t);const a=e.XpG(2);return e.Njj(a.onInputFocus(n,0))})("blur",function(n){e.eBV(t);const a=e.XpG(2);return e.Njj(a.onInputBlur(n))})("change",function(n){e.eBV(t);const a=e.XpG(2);return e.Njj(a.onChange(n,0))}),e.k0s()(),e.DNE(3,Pt,1,2,"span",8)(4,At,1,3,"BanIcon",9),e.k0s()}if(2&o){const t=e.XpG(2);e.Y8G("ngClass",e.eq3(11,Ot,0===t.focusedOptionIndex()&&t.isFocusVisibleItem)),e.BMQ("data-pc-section","cancelItem"),e.R7$(),e.BMQ("data-p-hidden-accessible",!0),e.R7$(),e.Y8G("name",t.name)("checked",0===t.value)("disabled",t.disabled)("readonly",t.readonly)("autofocus",t.autofocus),e.BMQ("aria-label",t.cancelAriaLabel()),e.R7$(),e.Y8G("ngIf",t.iconCancelClass),e.R7$(),e.Y8G("ngIf",!t.iconCancelClass)}}function Yt(o,s){if(1&o&&e.nrm(0,"span",16),2&o){const t=e.XpG(4);e.Y8G("ngStyle",t.iconOffStyle)("ngClass",t.iconOffClass),e.BMQ("data-pc-section","offIcon")}}function Ut(o,s){if(1&o&&e.nrm(0,"StarIcon",17),2&o){const t=e.XpG(4);e.Y8G("ngStyle",t.iconOffStyle)("styleClass","p-rating-icon"),e.BMQ("data-pc-section","offIcon")}}function Ht(o,s){if(1&o&&(e.qex(0),e.DNE(1,Yt,1,3,"span",14)(2,Ut,1,3,"StarIcon",15),e.bVm()),2&o){const t=e.XpG(3);e.R7$(),e.Y8G("ngIf",t.iconOffClass),e.R7$(),e.Y8G("ngIf",!t.iconOffClass)}}function zt(o,s){if(1&o&&e.nrm(0,"span",19),2&o){const t=e.XpG(4);e.Y8G("ngStyle",t.iconOnStyle)("ngClass",t.iconOnClass),e.BMQ("data-pc-section","onIcon")}}function Qt(o,s){if(1&o&&e.nrm(0,"StarFillIcon",17),2&o){const t=e.XpG(4);e.Y8G("ngStyle",t.iconOnStyle)("styleClass","p-rating-icon p-rating-icon-active"),e.BMQ("data-pc-section","onIcon")}}function qt(o,s){if(1&o&&(e.qex(0),e.DNE(1,zt,1,3,"span",18)(2,Qt,1,3,"StarFillIcon",15),e.bVm()),2&o){const t=e.XpG(3);e.R7$(),e.Y8G("ngIf",t.iconOnClass),e.R7$(),e.Y8G("ngIf",!t.iconOnClass)}}function Jt(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",12),e.bIt("click",function(n){const a=e.eBV(t).$implicit,l=e.XpG(2);return e.Njj(l.onOptionClick(n,a+1))}),e.j41(1,"span",6)(2,"input",7),e.bIt("focus",function(n){const a=e.eBV(t).$implicit,l=e.XpG(2);return e.Njj(l.onInputFocus(n,a+1))})("blur",function(n){e.eBV(t);const a=e.XpG(2);return e.Njj(a.onInputBlur(n))})("change",function(n){const a=e.eBV(t).$implicit,l=e.XpG(2);return e.Njj(l.onChange(n,a+1))}),e.k0s()(),e.DNE(3,Ht,3,2,"ng-container",13)(4,qt,3,2,"ng-container",13),e.k0s()}if(2&o){const t=s.$implicit,i=s.index,n=e.XpG(2);e.Y8G("ngClass",e.l_i(10,Bt,t+1<=n.value,t+1===n.focusedOptionIndex()&&n.isFocusVisibleItem)),e.R7$(),e.BMQ("data-p-hidden-accessible",!0),e.R7$(),e.Y8G("name",n.name)("checked",0===n.value)("disabled",n.disabled)("readonly",n.readonly)("autofocus",n.autofocus),e.BMQ("aria-label",n.starAriaLabel(t+1)),e.R7$(),e.Y8G("ngIf",!n.value||i>=n.value),e.R7$(),e.Y8G("ngIf",n.value&&i<n.value)}}function Wt(o,s){if(1&o&&(e.qex(0),e.DNE(1,$t,5,13,"div",3)(2,Jt,5,13,"ng-template",4),e.bVm()),2&o){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.cancel),e.R7$(),e.Y8G("ngForOf",t.starsArray)}}function Kt(o,s){1&o&&e.eu8(0)}function Zt(o,s){if(1&o){const t=e.RV6();e.j41(0,"span",22),e.bIt("click",function(n){e.eBV(t);const a=e.XpG(2);return e.Njj(a.onOptionClick(n,0))}),e.DNE(1,Kt,1,0,"ng-container",23),e.k0s()}if(2&o){const t=e.XpG(2);e.Y8G("ngStyle",t.iconCancelStyle),e.BMQ("data-pc-section","cancelIcon"),e.R7$(),e.Y8G("ngTemplateOutlet",t.cancelIconTemplate)}}function en(o,s){1&o&&e.eu8(0)}function tn(o,s){if(1&o){const t=e.RV6();e.j41(0,"span",24),e.bIt("click",function(n){const a=e.eBV(t).$implicit,l=e.XpG(2);return e.Njj(l.onOptionClick(n,a+1))}),e.DNE(1,en,1,0,"ng-container",23),e.k0s()}if(2&o){const t=s.index,i=e.XpG(2);e.BMQ("data-pc-section","onIcon"),e.R7$(),e.Y8G("ngTemplateOutlet",i.getIconTemplate(t))}}function nn(o,s){if(1&o&&e.DNE(0,Zt,2,3,"span",20)(1,tn,2,2,"span",21),2&o){const t=e.XpG();e.Y8G("ngIf",t.cancel),e.R7$(),e.Y8G("ngForOf",t.starsArray)}}const an={provide:c.kq,useExisting:(0,e.Rfq)(()=>je),multi:!0};let je=(()=>{class o{cd;config;disabled;readonly;stars=5;cancel=!0;iconOnClass;iconOnStyle;iconOffClass;iconOffStyle;iconCancelClass;iconCancelStyle;autofocus;onRate=new e.bkB;onCancel=new e.bkB;onFocus=new e.bkB;onBlur=new e.bkB;templates;onIconTemplate;offIconTemplate;cancelIconTemplate;value;onModelChange=()=>{};onModelTouched=()=>{};starsArray;isFocusVisibleItem=!0;focusedOptionIndex=(0,e.vPA)(-1);name;constructor(t,i){this.cd=t,this.config=i}ngOnInit(){this.name=this.name||(0,Re._Y)(),this.starsArray=[];for(let t=0;t<this.stars;t++)this.starsArray[t]=t}ngAfterContentInit(){this.templates.forEach(t=>{switch(t.getType()){case"onicon":this.onIconTemplate=t.template;break;case"officon":this.offIconTemplate=t.template;break;case"cancelicon":this.cancelIconTemplate=t.template}})}onOptionClick(t,i){if(!this.readonly&&!this.disabled){this.onOptionSelect(t,i),this.isFocusVisibleItem=!1;const n=Ye.D.getFirstFocusableElement(t.currentTarget,"");n&&Ye.D.focus(n)}}onOptionSelect(t,i){this.focusedOptionIndex.set(i),this.updateModel(t,i||null)}onChange(t,i){this.onOptionSelect(t,i),this.isFocusVisibleItem=!0}onInputBlur(t){this.focusedOptionIndex.set(-1),this.onBlur.emit(t)}onInputFocus(t,i){this.focusedOptionIndex.set(i),this.onFocus.emit(t)}updateModel(t,i){this.value=i,this.onModelChange(this.value),this.onModelTouched(),i?this.onRate.emit({originalEvent:t,value:i}):this.onCancel.emit()}cancelAriaLabel(){return this.config.translation.clear}starAriaLabel(t){return 1===t?this.config.translation.aria.star:this.config.translation.aria.stars.replace(/{star}/g,t)}getIconTemplate(t){return!this.value||t>=this.value?this.offIconTemplate:this.onIconTemplate}writeValue(t){this.value=t,this.cd.detectChanges()}registerOnChange(t){this.onModelChange=t}registerOnTouched(t){this.onModelTouched=t}setDisabledState(t){this.disabled=t,this.cd.markForCheck()}get isCustomIcon(){return this.templates&&this.templates.length>0}static \u0275fac=function(i){return new(i||o)(e.rXU(e.gRc),e.rXU(N.r1))};static \u0275cmp=e.VBU({type:o,selectors:[["p-rating"]],contentQueries:function(i,n,a){if(1&i&&e.wni(a,N.Ei,4),2&i){let l;e.mGM(l=e.lsd())&&(n.templates=l)}},hostAttrs:[1,"p-element"],inputs:{disabled:[2,"disabled","disabled",e.L39],readonly:[2,"readonly","readonly",e.L39],stars:[2,"stars","stars",e.Udg],cancel:[2,"cancel","cancel",e.L39],iconOnClass:"iconOnClass",iconOnStyle:"iconOnStyle",iconOffClass:"iconOffClass",iconOffStyle:"iconOffStyle",iconCancelClass:"iconCancelClass",iconCancelStyle:"iconCancelStyle",autofocus:[2,"autofocus","autofocus",e.L39]},outputs:{onRate:"onRate",onCancel:"onCancel",onFocus:"onFocus",onBlur:"onBlur"},features:[e.Jv_([an]),e.GFd],decls:4,vars:8,consts:[["customTemplate",""],[1,"p-rating",3,"ngClass"],[4,"ngIf","ngIfElse"],["class","p-rating-item p-rating-cancel-item",3,"ngClass","click",4,"ngIf"],["ngFor","",3,"ngForOf"],[1,"p-rating-item","p-rating-cancel-item",3,"click","ngClass"],[1,"p-hidden-accessible"],["type","radio","value","0","pAutoFocus","",3,"focus","blur","change","name","checked","disabled","readonly","autofocus"],["class","p-rating-icon p-rating-cancel",3,"ngClass","ngStyle",4,"ngIf"],[3,"styleClass","ngStyle",4,"ngIf"],[1,"p-rating-icon","p-rating-cancel",3,"ngClass","ngStyle"],[3,"styleClass","ngStyle"],[1,"p-rating-item",3,"click","ngClass"],[4,"ngIf"],["class","p-rating-icon",3,"ngStyle","ngClass",4,"ngIf"],[3,"ngStyle","styleClass",4,"ngIf"],[1,"p-rating-icon",3,"ngStyle","ngClass"],[3,"ngStyle","styleClass"],["class","p-rating-icon p-rating-icon-active",3,"ngStyle","ngClass",4,"ngIf"],[1,"p-rating-icon","p-rating-icon-active",3,"ngStyle","ngClass"],["class","p-rating-icon p-rating-cancel",3,"ngStyle","click",4,"ngIf"],["class","p-rating-icon",3,"click",4,"ngFor","ngForOf"],[1,"p-rating-icon","p-rating-cancel",3,"click","ngStyle"],[4,"ngTemplateOutlet"],[1,"p-rating-icon",3,"click"]],template:function(i,n){if(1&i&&(e.j41(0,"div",1),e.DNE(1,Wt,3,2,"ng-container",2)(2,nn,2,2,"ng-template",null,0,e.C5r),e.k0s()),2&i){const a=e.sdS(3);e.Y8G("ngClass",e.l_i(5,Xt,n.readonly,n.disabled)),e.BMQ("data-pc-name","rating")("data-pc-section","root"),e.R7$(),e.Y8G("ngIf",!n.isCustomIcon)("ngIfElse",a)}},dependencies:()=>[g.YU,g.Sq,g.bT,g.T3,g.B3,Ue.q,$e,Ae,Pe],styles:["@layer primeng{.p-rating{display:inline-flex;position:relative;align-items:center}.p-rating-icon{cursor:pointer}.p-rating.p-rating-readonly .p-rating-icon{cursor:default}}\n"],encapsulation:2,changeDetection:0})}return o})(),on=(()=>{class o{static \u0275fac=function(i){return new(i||o)};static \u0275mod=e.$C({type:o});static \u0275inj=e.G2t({imports:[g.MD,Ue.u,$e,Ae,Pe,N.Gg]})}return o})();const He=()=>["serviceAfterSale.register"];function rn(o,s){1&o&&(e.j41(0,"tr",34)(1,"th",35),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",36),e.nrm(4,"i",37),e.EFF(5," orderManagement.order.orderCode "),e.k0s(),e.j41(6,"th",38),e.nrm(7,"i",37),e.EFF(8," orderManagement.order.creation "),e.k0s(),e.j41(9,"th",39),e.nrm(10,"i",37),e.EFF(11," orderManagement.order.cityName "),e.k0s(),e.j41(12,"th",40),e.nrm(13,"i",37),e.EFF(14," orderManagement.order.agentName "),e.k0s(),e.j41(15,"th",41),e.nrm(16,"i",37),e.EFF(17," orderManagement.order.services "),e.k0s(),e.j41(18,"th",42),e.nrm(19,"i",37),e.EFF(20," orderManagement.order.finishDate "),e.k0s(),e.j41(21,"th",43),e.EFF(22," orderManagement.order.finishUser "),e.k0s(),e.nrm(23,"th",44),e.k0s())}function ln(o,s){if(1&o&&(e.qex(0),e.j41(1,"span",54),e.EFF(2),e.k0s(),e.bVm()),2&o){const t=s.$implicit;e.R7$(2),e.JRh(t)}}function sn(o,s){if(1&o){const t=e.RV6();e.j41(0,"button",55),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,a=e.XpG(),l=e.sdS(54);return e.Njj(a.openModalTitleS(n,l,"lg"))}),e.nrm(1,"i",56)(2,"span",57),e.k0s()}}function cn(o,s){if(1&o){const t=e.RV6();e.j41(0,"button",58),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,a=e.XpG(),l=e.sdS(58);return e.Njj(a.openModal(n.orderCode,l,"md"))}),e.nrm(1,"i",59)(2,"span",60),e.k0s()}}function dn(o,s){if(1&o){const t=e.RV6();e.j41(0,"tr",45)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td",46),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),l=e.sdS(56);return e.Njj(a.openModalClient(n.orderCode,l,"xxl"))}),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.nI1(7,"date"),e.j41(8,"span",47),e.EFF(9),e.k0s()(),e.j41(10,"td"),e.EFF(11),e.k0s(),e.j41(12,"td")(13,"span",48),e.EFF(14),e.k0s(),e.nrm(15,"br"),e.j41(16,"span",49),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.copytext(n.mobile))}),e.EFF(17),e.nrm(18,"i",50),e.k0s()(),e.j41(19,"td"),e.DNE(20,ln,3,1,"ng-container",51),e.k0s(),e.j41(21,"td"),e.EFF(22),e.nI1(23,"date"),e.k0s(),e.j41(24,"td"),e.EFF(25),e.k0s(),e.j41(26,"td"),e.DNE(27,sn,3,0,"button",52)(28,cn,3,0,"button",53),e.k0s()()}if(2&o){const t=s.$implicit,i=s.rowIndex,n=e.XpG();e.R7$(2),e.JRh(i+1),e.R7$(2),e.SpI("#SO#",t.orderCode,""),e.R7$(2),e.SpI("",e.i5U(7,12,t.createdDate,"yyyy-MM-dd")," "),e.R7$(3),e.SpI("",t.creationUser," "),e.R7$(2),e.JRh(t.cityName),e.R7$(3),e.SpI("",t.agentName," "),e.R7$(3),e.SpI("",t.mobile," "),e.R7$(3),e.Y8G("ngForOf",n.getServices(t.servicesName)),e.R7$(2),e.SpI(" ",e.i5U(23,15,t.finishDate,"yyyy-MM-dd"),""),e.R7$(3),e.SpI(" ",t.finishUser,""),e.R7$(2),e.Y8G("hasPermission",e.lJ4(18,He)),e.R7$(),e.Y8G("hasPermission",e.lJ4(19,He))}}function mn(o,s){1&o&&(e.j41(0,"div",61),e.EFF(1," general.table.noData"),e.k0s())}function pn(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",62)(1,"div",63),e.nrm(2,"ngb-pagination-info",64),e.j41(3,"table-length",65),e.bIt("lengthChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",66)(5,"ngb-pagination",67),e.bIt("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.pagination.pageNumber,n)||(a.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&o){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function gn(o,s){if(1&o){const t=e.RV6();e.j41(0,"delete-modal",68),e.bIt("deleteConfirm",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.DeleteConfirm())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}}function _n(o,s){if(1&o&&e.nrm(0,"client-profile-main",69),2&o){const t=e.XpG();e.Y8G("clientIdInput",t.clientSelected)}}function un(o,s){if(1&o){const t=e.RV6();e.qex(0),e.j41(1,"input",92),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG().$implicit,l=e.XpG(2);return e.DH7(l.form.clientReviewAnswers[a.id],n)||(l.form.clientReviewAnswers[a.id]=n),e.Njj(n)}),e.k0s(),e.bVm()}if(2&o){const t=e.XpG().$implicit,i=e.XpG(2);e.R7$(),e.FS9("name","answer_"+t.id),e.R50("ngModel",i.form.clientReviewAnswers[t.id])}}function hn(o,s){if(1&o){const t=e.RV6();e.qex(0),e.j41(1,"p-rating",93),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG().$implicit,l=e.XpG(2);return e.DH7(l.form.clientReviewAnswers[a.id],n)||(l.form.clientReviewAnswers[a.id]=n),e.Njj(n)}),e.k0s(),e.bVm()}if(2&o){const t=e.XpG().$implicit,i=e.XpG(2);e.R7$(),e.FS9("name","answer_"+t.id),e.R50("ngModel",i.form.clientReviewAnswers[t.id]),e.Y8G("stars",i.getLength(t.items))("cancel",!1)("disabled",!1)("readonly",!1)}}function fn(o,s){if(1&o){const t=e.RV6();e.qex(0),e.j41(1,"div",94)(2,"input",95),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG(2).$implicit,l=e.XpG(2);return e.DH7(l.form.clientReviewAnswers[a.id],n)||(l.form.clientReviewAnswers[a.id]=n),e.Njj(n)}),e.k0s(),e.j41(3,"label",96),e.EFF(4),e.k0s()(),e.bVm()}if(2&o){const t=s.$implicit,i=e.XpG(2).$implicit,n=e.XpG(2);e.R7$(2),e.Mz_("name","Q_",i.id,""),e.Mz_("id","Q_",t.id,""),e.Y8G("value",t.id),e.R50("ngModel",n.form.clientReviewAnswers[i.id]),e.R7$(),e.FS9("for",t.id),e.R7$(),e.JRh(t.name)}}function bn(o,s){if(1&o&&(e.qex(0),e.DNE(1,fn,5,8,"ng-container",51),e.bVm()),2&o){const t=e.XpG().$implicit;e.R7$(),e.Y8G("ngForOf",t.radioItem)}}function Cn(o,s){if(1&o&&(e.qex(0),e.j41(1,"div",80)(2,"label",90),e.EFF(3),e.k0s(),e.DNE(4,un,2,2,"ng-container",91)(5,hn,2,6,"ng-container",91)(6,bn,2,1,"ng-container",91),e.k0s(),e.bVm()),2&o){const t=s.$implicit;e.R7$(3),e.JRh(t.name),e.R7$(),e.Y8G("ngIf","text"===t.answerType),e.R7$(),e.Y8G("ngIf","star"===t.answerType),e.R7$(),e.Y8G("ngIf","radio"===t.answerType)}}function vn(o,s){1&o&&(e.j41(0,"div",97),e.EFF(1," general.message.filedIdRequired"),e.k0s())}function Rn(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",70)(1,"div",71)(2,"h4",72)(3,"span",73),e.EFF(4),e.k0s(),e.j41(5,"span",74),e.EFF(6),e.k0s(),e.j41(7,"span",75),e.EFF(8),e.k0s()(),e.j41(9,"button",76),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss("Cross click"))}),e.k0s()(),e.j41(10,"div",77),e.nrm(11,"ngx-ui-loader",27),e.j41(12,"form",78,6),e.bIt("ngSubmit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.OnSubmit())}),e.j41(14,"div",9)(15,"div",79),e.DNE(16,Cn,7,4,"ng-container",51),e.j41(17,"div",80)(18,"label",81),e.EFF(19,"crm.clientReview.clientPrice"),e.k0s(),e.j41(20,"input",82,7),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.clientPrice,n)||(a.form.clientPrice=n),e.Njj(n)}),e.k0s()(),e.j41(22,"div",80)(23,"label",83),e.EFF(24,"crm.clientReview.note"),e.k0s(),e.j41(25,"input",84,7),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.notes,n)||(a.form.notes=n),e.Njj(n)}),e.k0s(),e.DNE(27,vn,2,0,"div",85),e.k0s()()(),e.j41(28,"div",86)(29,"button",87),e.nrm(30,"i",88)(31,"span",89),e.k0s()()()()()}if(2&o){const t=e.sdS(13),i=e.sdS(21),n=e.XpG();e.R7$(4),e.JRh(n.titleOperation),e.R7$(2),e.JRh(n.form.agentName),e.R7$(2),e.JRh(n.form.orderId),e.R7$(3),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderOperationShap)("loaderId",n.operationLoader),e.R7$(5),e.Y8G("ngForOf",n.questions),e.R7$(4),e.R50("ngModel",n.form.clientPrice),e.R7$(5),e.R50("ngModel",n.form.notes),e.R7$(2),e.Y8G("ngIf",i.invalid&&i.touched),e.R7$(2),e.Y8G("disabled",!t.valid)}}function jn(o,s){if(1&o&&e.nrm(0,"order-operation",98),2&o){const t=e.XpG();e.Y8G("isOrderEdit",!1)("isInner",!0)("orderCode",t.clientSelected)}}function In(o,s){if(1&o){const t=e.RV6();e.j41(0,"form",78,6),e.bIt("ngSubmit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.reviewNoAnswer())}),e.nrm(2,"ngx-ui-loader",27),e.j41(3,"div",99)(4,"div",100)(5,"button",101),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(6,"div",77)(7,"div",102),e.nrm(8,"lord-icon",103),e.j41(9,"div",104),e.nrm(10,"h4",105)(11,"p",106),e.k0s()(),e.j41(12,"div",107),e.nrm(13,"button",108),e.j41(14,"button",109),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()()()()()}if(2&o){const t=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",t.loaderOperationShap)("loaderId",t.deleteLoader)}}let yn=(()=>{class o extends G.w{constructor(t,i,n,a,l,r,h,v,R,S,E,$,k,Y){super(t,i,h,n,a,l,r),this.baseService=n,this.authDaamService=v,this.cityService=R,this.districtService=S,this.channelService=E,this.excelService=$,this.clientReviewService=k,this.router=Y,this.title="crm.serviceAfterSale.title",this.titleOperation="crm.serviceAfterSale.addReview",this.searchForm={},this.clientSelected=0,this.cities=[],this.districts=[],this.channels=[],this.questions=[],this.clients=[],this.types=[],this.radioItem=[],this.isResolveList=!0,this.configRoute(),this.GetCities(),this.GetChannels(),this.clientReviewLookUp()}openModalTitleS(t,i,n="md"){this.form={clientId:t.agentCode,orderId:t.orderCode,agentName:t.agentName,clientReviewAnswers:[]},this.modalService.open(i,{centered:!0,size:n})}clientReviewLookUp(){this.clientReviewService.ClientReviewLookUp().subscribe(t=>{this.clients=t.data.clients,this.types=t.data.types,this.questions=this.updateScore(t.data.questions)},t=>{console.log(t)})}GetCities(){this.cityService.getDropDown().subscribe(t=>{this.cities=t.data},t=>{console.log(t)})}GetDistricts(t){this.districtService.getByCityId(t).subscribe(i=>{this.districts=i.data},i=>{console.log(i)})}GetChannels(){this.channelService.getDropDown().subscribe(t=>{this.channels=t.data},t=>{console.log(t)})}ngOnInitMore(){}mapForm(t){let i={...t},n=[];return n=Object.entries(i.clientReviewAnswers).map(([a,l])=>({reviewQuestionId:Number(a),ClientReviewId:i.id,value:""+l})),i.clientReviewAnswers=n,i}onUpdateIsActive(t){this.baseService.updateActive(t).pipe((0,p.Q)(this.notifier)).subscribe(i=>{i?this.alertService.success():this.alertService.error("general.message."+i)},i=>{this.alertService.error()})}mapRegisterForm(t){let i={...t},n=[];return n=Object.entries(i.clientReviewAnswers).map(([a,l])=>({reviewQuestionId:Number(a),ClientReviewId:i.id,value:""+l})),i.clientReviewAnswers=n,i.isCalc=!0,i}OnSearch(t){this.ngxLoader.startLoader(u.a7),this.loadentities()}onSearch(){this.ngxLoader.startLoader(u.a7);var t=this.searchForm.dates;t+void 0&&"to"in t?(this.pagination.visitDateFrom=this.datePipe.transform(t.from,"yyyy-MM-ddT00:00:00.000"),this.pagination.visitDateTo=this.datePipe.transform(t.to,"yyyy-MM-ddT23:59:59.999"),this.loadentities()):(this.pagination.visitDateFrom=null,this.pagination.visitDateTo=null),(t=this.searchForm.finishedDates)+void 0&&"to"in t?(this.pagination.finishedDateFrom=this.datePipe.transform(t.from,"yyyy-MM-ddT00:00:00.000"),this.pagination.finishedDateTo=this.datePipe.transform(t.to,"yyyy-MM-ddT23:59:59.999"),this.loadentities()):(this.pagination.finishedDateFrom=null,this.pagination.finishedDateTo=null),this.loadentities()}configRoute(){this.routerActive.data.pipe((0,p.Q)(this.notifier)).subscribe(t=>{this.entities=t.data.data,this.pagination.totalItems=t.data.totalItems},()=>{this.alertService.error()})}mapExcel(){let t=[];return this.entities.forEach(i=>{t.push({orderCode:i.orderCode,visitDate:i.visitDate,notes:i.notes,createdDate:i.createdDate,assignDate:i.assignDate,finishDate:i.finishDate,districtName:i.districtName,cityName:i.cityName,agentName:i.agentName,mobile:i.mobile,email:i.email,creationUser:i.creationUser,channelName:i.channelName,teamNames:i.teamNames,services:i.services,workTimes:i.workTimes,paymentTypeName:i.paymentTypeName,finishUser:i.finishUser,isCancel:i.isCancel,isReopen:i.isReopen,isFree:i.isFree,isFinish:i.isFinish})}),t}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,"User",[])}goRegister(){this.router.navigateByUrl("/managment/order/new")}goEdit(t){this.router.navigateByUrl("/managment/order/new")}getStatus(t){return t.isCancel?"bg-warning-subtle text-warning":t.isFinish?"bg-success-subtle text-success":t.isUrgent?"bg-danger-subtle text-danger":t.isReopen||t.isFree?"bg-warning-subtle text-warning":"bg-success-subtle text-success"}getTrnslate(t){return t.isCancel?"orderManagement.order.cancel":t.isFinish?"orderManagement.order.finish":t.isUrgent?"bg-danger-subtle text-danger":t.isReopen?"orderManagement.order.reopen":t.isFree?"orderManagement.order.free":"orderManagement.order.finished"}loadentities(){this.countLoad=this.countLoad+1,(!this.isResolveList||1!==this.countLoad)&&(this.ngxLoader.startLoader(u.a7),this.pagination.filterForLastTwoDays=!0,this.baseService.getAfterSale(this.pagination).pipe((0,p.Q)(this.notifier)).subscribe(t=>{this.ngxLoader.stopLoader(u.a7),this.entities=t.data,this.pagination.totalItems=t.totalItems,this.LoadSuccess()},t=>{this.ngxLoader.stopLoader(u.a7),this.alertService.error(t)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[])}openModalClient(t,i,n="xl"){this.clientSelected=t,this.modalService.open(i,{centered:!0,size:n})}oncityChange(t){this.GetDistricts(t.code)}onReset(){this.form={},this.searchForm={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems}}registerEntity(){let t=this.mapRegisterForm(this.form);this.clientReviewService.register(t).pipe((0,j.O)(),(0,M.c)(this.mainDelay),(0,y.Z)(),(0,p.Q)(this.notifier),(0,I.j)(()=>this.ngxLoader.stopLoader(this.operationLoader)),(0,q.W)(i=>(0,ce.$)(i))).subscribe(i=>{i.success?this.submitFunished():this.alertService.error("general.message."+i.message)},i=>{this.alertService.error("general.message."+i)})}getLength(t){return null!=t&&""!==t?t.split(",").length:0}getServices(t){return t.split("#")}getTimes(t){return t.split(",")}getItems(t){if(""!=t)return t.split(",")}updateScore(t){return t.forEach(i=>{let n=[];if(null!=i.items){let a=i.items.split(",").map(r=>r.trim()).reverse(),l=i.score.split(",").map(r=>Number(r.trim()));n=a.map((r,h)=>({id:l[h],name:r}))}i.radioItem=n}),t}reviewNoAnswer(){this.ngxLoader.startLoader(u.Fq);let t=this.selectedRow.map(i=>i.id)[0];this.baseService.SaveNoAnswer(t).pipe((0,j.O)(),(0,M.c)(this.mainDelay),(0,y.Z)(),(0,p.Q)(this.notifier),(0,I.j)(()=>this.ngxLoader.stopLoader(u.Fq))).subscribe(i=>{i.success?(this.alertService.success(),this.loadentities(),this.modalService.dismissAll(),this.resetSelected()):this.alertService.error("general.message."+i)},()=>{this.alertService.error()})}copytext(t){navigator.clipboard.writeText(t),this.alertService.info(t)}static{this.\u0275fac=function(i){return new(i||o)(e.rXU(f.nX),e.rXU(_.c$),e.rXU(_e.Q),e.rXU(F.u),e.rXU(g.vh),e.rXU(b.eD),e.rXU(m.Bq),e.rXU(ue.J),e.rXU(he.h),e.rXU(Se.m),e.rXU(Te.l),e.rXU(O.V),e.rXU(ae.Z),e.rXU(f.Ix))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-serviceAfterSale"]],features:[e.Vt3],decls:59,vars:58,consts:[["tableMaster",""],["deleteModal",""],["clientProfile",""],["operation",""],["orderModel",""],["reviewNoAnswerModel",""],["formEntity","ngForm"],["notes","ngModel"],[3,"title","breadcrumbItems"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],[3,"reset","search","exportXlsx","addNew","showAdd","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","number","id","filterValue","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["InputTirmFilter","","type","search","id","agentName","name","agentName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["InputTirmFilter","","type","tel","id","filterValue","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["name","name","bindValue","code","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],["name","name","bindValue","code","bindLabel","name",3,"change","ngModelChange","placeholder","items","multiple","ngModel"],["name","employeeCode","bindValue","id","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],[1,"col-12","col-md-4","mb-2"],["type","text","mwlFlatpickr","","id","dates","name","dates","mode","range",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],["type","text","mwlFlatpickr","","id","finishedDates","name","finishedDates","mode","range",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"card-body"],[3,"hasProgressBar","fgsType","loaderId"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["translate","",2,"width",".5%"],["pSortableColumn","orderCode","translate","",2,"width","6%"],[1,"ri-expand-up-down-line"],["pSortableColumn","createdDate","translate","",2,"width","15%"],["pSortableColumn","cityName","translate","",2,"width","8%"],["pSortableColumn","agentName","translate","",2,"width","15%"],["pSortableColumn","servicesName","translate","",2,"width","10%"],["pSortableColumn","finishDate","translate","",2,"width","8%"],["translate","",2,"width","8%"],["translate","",2,"width","20%"],[1,"fs-5"],[3,"click"],[1,"badge","bg-success-subtle","text-success"],[1,"badge","bg-primary-subtle","text-primary","my-1"],[1,"cursor-pointer","badge","bg-danger-subtle","text-danger","fs-6",3,"click"],[1,"ri-clipboard-line"],[4,"ngFor","ngForOf"],["type","button","class","btn btn-sm  btn-primary mx-1   btn-label waves-effect waves-light rounded-pill",3,"click",4,"hasPermission"],["type","button","class","btn btn-sm  btn-danger   btn-label waves-effect waves-light rounded-pill",3,"click",4,"hasPermission"],[1,"badge","bg-primary-subtle","text-primary","mx-1"],["type","button",1,"btn","btn-sm","btn-primary","mx-1","btn-label","waves-effect","waves-light","rounded-pill",3,"click"],[1,"ri-phone-line","label-icon","align-middle","rounded-pill","fs-16"],["translate","crm.serviceAfterSale.review"],["type","button",1,"btn","btn-sm","btn-danger","btn-label","waves-effect","waves-light","rounded-pill",3,"click"],[1,"ri-close-circle-fill","label-icon","align-middle","rounded-pill","fs-16"],["translate","crm.serviceAfterSale.noAnswer"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[3,"deleteConfirm","dismiss"],[3,"clientIdInput"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["translate",""],[1,"badge","bg-success-subtle","text-success","mx-2"],[1,"badge","bg-danger-subtle","text-danger"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"ngSubmit"],[1,"col-12"],[1,"mb-3"],["for","clientPrice","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","clientPrice","type","text","id","clientPrice",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["for","notes","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","notes","type","text","id","notes",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],[1,"text-center"],["type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],[1,"fw-bold","form-label","w-100"],[4,"ngIf"],["type","text",1,"form-control","fs-6",3,"ngModelChange","name","ngModel"],[3,"ngModelChange","name","ngModel","stars","cancel","disabled","readonly"],[1,"form-check","form-check-inline"],["type","radio",1,"form-check-input",3,"ngModelChange","name","id","value","ngModel"],[1,"form-check-label",3,"for"],["translate","",1,"text-danger","text-center"],[3,"isOrderEdit","isInner","orderCode"],[1,"modal-content"],[1,"modal-header"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","btn-close",1,"btn-close",3,"click"],[1,"mt-2","text-center"],["src","https://cdn.lordicon.com/gsqxdxog.json","trigger","loop","colors","primary:#f7b84b,secondary:#f06548",2,"width","100px","height","100px"],[1,"mt-4","pt-2","fs-15","mx-4","mx-sm-5"],["translate","crm.serviceAfterSale.noReview"],[1,"text-muted","mx-4","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","submit","id","delete","translate","general.action.save",1,"btn","w-sm","btn-danger"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light",3,"click"]],template:function(i,n){if(1&i){const a=e.RV6();e.nrm(0,"app-breadcrumbs",8),e.nI1(1,"translate"),e.j41(2,"div",9)(3,"div",10)(4,"div",11)(5,"base-filter",12),e.bIt("reset",function(){return e.eBV(a),e.Njj(n.onReset())})("search",function(){return e.eBV(a),e.Njj(n.onSearch())})("exportXlsx",function(){return e.eBV(a),e.Njj(n.onExportXlsx())})("addNew",function(){return e.eBV(a),e.Njj(n.goRegister())}),e.qex(6,13),e.j41(7,"div",14)(8,"div",15)(9,"input",16),e.nI1(10,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.orderCode,r)||(n.pagination.orderCode=r),e.Njj(r)}),e.k0s(),e.nrm(11,"i",17),e.k0s()(),e.j41(12,"div",14)(13,"div",15)(14,"input",18),e.nI1(15,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.agentName,r)||(n.pagination.agentName=r),e.Njj(r)}),e.k0s(),e.nrm(16,"i",17),e.k0s()(),e.j41(17,"div",14)(18,"div",15)(19,"input",19),e.nI1(20,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.mobile,r)||(n.pagination.mobile=r),e.Njj(r)}),e.k0s(),e.nrm(21,"i",17),e.k0s()(),e.j41(22,"div",14)(23,"div",15)(24,"ng-select",20),e.nI1(25,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.channelCode,r)||(n.pagination.channelCode=r),e.Njj(r)}),e.k0s()()(),e.j41(26,"div",14)(27,"div",15)(28,"ng-select",21),e.nI1(29,"translate"),e.bIt("change",function(r){return e.eBV(a),e.Njj(n.oncityChange(r))}),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.cityCode,r)||(n.pagination.cityCode=r),e.Njj(r)}),e.k0s()()(),e.j41(30,"div",14)(31,"div",15)(32,"ng-select",22),e.nI1(33,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.districtName,r)||(n.pagination.districtName=r),e.Njj(r)}),e.k0s()()(),e.j41(34,"div",23)(35,"input",24),e.nI1(36,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.searchForm.dates,r)||(n.searchForm.dates=r),e.Njj(r)}),e.k0s()(),e.j41(37,"div",23)(38,"input",25),e.nI1(39,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.searchForm.finishedDates,r)||(n.searchForm.finishedDates=r),e.Njj(r)}),e.k0s()(),e.bVm(),e.k0s(),e.j41(40,"div",26),e.nrm(41,"ngx-ui-loader",27),e.j41(42,"div",28)(43,"p-table",29,0),e.bIt("onLazyLoad",function(r){return e.eBV(a),e.Njj(n.tableChange(r))})("selectionChange",function(r){return e.eBV(a),e.Njj(n.onSelectionChange(r))}),e.DNE(45,rn,24,0,"ng-template",30)(46,dn,29,20,"ng-template",31),e.k0s()(),e.DNE(47,mn,2,0,"div",32)(48,pn,6,8,"div",33),e.k0s()()()(),e.DNE(49,gn,1,0,"ng-template",null,1,e.C5r)(51,_n,1,1,"ng-template",null,2,e.C5r)(53,Rn,32,11,"ng-template",null,3,e.C5r)(55,jn,1,3,"ng-template",null,4,e.C5r)(57,In,15,3,"ng-template",null,5,e.C5r)}2&i&&(e.FS9("title",e.bMT(1,40,n.title)),e.Y8G("breadcrumbItems",n.breadCrumbItems),e.R7$(5),e.Y8G("showAdd",!1)("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(4),e.FS9("placeholder",e.bMT(10,42,"orderManagement.order.orderCode")),e.R50("ngModel",n.pagination.orderCode),e.R7$(5),e.FS9("placeholder",e.bMT(15,44,"orderManagement.order.agentName")),e.R50("ngModel",n.pagination.agentName),e.R7$(5),e.FS9("placeholder",e.bMT(20,46,"orderManagement.order.mobile")),e.R50("ngModel",n.pagination.mobile),e.R7$(5),e.FS9("placeholder",e.bMT(25,48,"orderManagement.order.channelName")),e.Y8G("items",n.channels)("multiple",!1),e.R50("ngModel",n.pagination.channelCode),e.R7$(4),e.FS9("placeholder",e.bMT(29,50,"orderManagement.order.cityName")),e.Y8G("items",n.cities)("multiple",!1),e.R50("ngModel",n.pagination.cityCode),e.R7$(4),e.FS9("placeholder",e.bMT(33,52,"orderManagement.order.districtName")),e.Y8G("items",n.districts)("multiple",!1),e.R50("ngModel",n.pagination.districtName),e.R7$(3),e.FS9("placeholder",e.bMT(36,54,"orderManagement.order.visitDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.dates),e.R7$(3),e.FS9("placeholder",e.bMT(39,56,"orderManagement.order.finishedDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.finishedDates),e.R7$(3),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderSearchShap)("loaderId",n.searchLoader),e.R7$(2),e.Y8G("value",n.entities)("rows",n.pagination.pageSize)("lazy",!0)("totalRecords",n.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",n.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems>0))},dependencies:[g.Sq,g.bT,c.qT,c.me,c.Q0,c.Fm,c.BC,c.cb,c.vS,c.cV,m.s5,B.kL,H.m,D.b,de.L,P.w,V.p,L.g,fe.t,x.m,U.p,_.Mm,C.XI,N.Ei,C.Tg,b.Cv,T.vr,je,g.vh,_.D9],encapsulation:2})}}return o})();var Ie=d(70053),ze=d(98993);const Fn=()=>["clientReview.register"],Mn=()=>["clientReview.edit"],Sn=o=>({required:o});function Tn(o,s){1&o&&(e.j41(0,"tr",33)(1,"th",34),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",35),e.nrm(4,"i",36),e.EFF(5," crm.clientReview.clientName "),e.k0s(),e.j41(6,"th",37),e.nrm(7,"i",36),e.EFF(8," crm.clientReview.orderId "),e.k0s(),e.j41(9,"th",38),e.EFF(10," crm.clientReview.mobile "),e.k0s(),e.j41(11,"th",39),e.EFF(12," general.table.creator "),e.k0s(),e.j41(13,"th",40),e.EFF(14," crm.clientReview.questionName "),e.k0s(),e.j41(15,"th",41),e.nrm(16,"i",36),e.EFF(17," crm.clientReview.endStatusName "),e.k0s(),e.j41(18,"th",42),e.EFF(19," crm.clientReview.actionDoing "),e.k0s(),e.nrm(20,"th",43),e.k0s())}function kn(o,s){if(1&o&&e.EFF(0),2&o){const t=e.XpG().$implicit;e.SpI(" ",t.nameAr," ")}}function wn(o,s){1&o&&e.nrm(0,"i",56)}function xn(o,s){1&o&&e.nrm(0,"i",57)}function Nn(o,s){if(1&o&&e.EFF(0),2&o){const t=e.XpG().$implicit;e.SpI(" ",t.clientReviewActionDoingName," ")}}function Gn(o,s){if(1&o&&(e.nrm(0,"i",58),e.EFF(1),e.nI1(2,"date"),e.nrm(3,"br")(4,"i",59),e.EFF(5),e.nI1(6,"date"),e.nrm(7,"br")(8,"i",60),e.EFF(9),e.nrm(10,"br")(11,"i",60),e.EFF(12)),2&o){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.i5U(2,4,t.creationTime,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",e.i5U(6,7,t.lastModificationTime,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",t.creatorName,""),e.R7$(3),e.SpI(" ",t.lastModificationName," ")}}function En(o,s){if(1&o){const t=e.RV6();e.j41(0,"button",61),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,a=e.XpG(),l=e.sdS(31);return e.Njj(a.EditModel(n,l,"lg"))}),e.nrm(1,"i",62)(2,"span",63),e.k0s()}}function Dn(o,s){if(1&o){const t=e.RV6();e.j41(0,"tr",44)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td",45),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),l=e.sdS(37);return e.Njj(a.openModalClient(n.clientId,l))}),e.EFF(4),e.k0s(),e.j41(5,"td",45),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),l=e.sdS(39);return e.Njj(a.openModalClient(n.orderId,l,"xxl"))}),e.EFF(6),e.j41(7,"span",46),e.EFF(8),e.k0s()(),e.j41(9,"td"),e.EFF(10),e.k0s(),e.j41(11,"td"),e.EFF(12),e.nI1(13,"date"),e.j41(14,"span",47),e.EFF(15),e.k0s()(),e.DNE(16,kn,1,1,"ng-template",null,6,e.C5r),e.j41(18,"td")(19,"span",48),e.EFF(20),e.nI1(21,"truncate"),e.k0s()(),e.j41(22,"td")(23,"span",49),e.EFF(24),e.nI1(25,"truncate"),e.k0s(),e.DNE(26,wn,1,0,"i",50)(27,xn,1,0,"i",51),e.j41(28,"span",49),e.EFF(29),e.nI1(30,"truncate"),e.k0s()(),e.DNE(31,Nn,1,1,"ng-template",null,7,e.C5r),e.j41(33,"td")(34,"span",48),e.EFF(35),e.nI1(36,"truncate"),e.k0s()(),e.j41(37,"td"),e.DNE(38,Gn,13,10,"ng-template",null,8,e.C5r),e.j41(40,"span",52)(41,"div",53),e.nrm(42,"i",54),e.DNE(43,En,3,0,"button",55),e.k0s()()()()}if(2&o){const t=s.$implicit,i=s.rowIndex,n=e.sdS(17),a=e.sdS(32),l=e.sdS(39),r=e.XpG();e.R7$(2),e.JRh(i+1),e.R7$(2),e.JRh(t.clientName),e.R7$(2),e.SpI("#SO#",t.orderId," , "),e.R7$(2),e.JRh(t.teamName),e.R7$(2),e.JRh(t.mobile),e.R7$(2),e.SpI("",e.i5U(13,21,t.creationTime,"HH:mm yyyy-MM-dd ")," "),e.R7$(3),e.SpI("",t.creatorName," "),e.R7$(4),e.Y8G("ngbTooltip",n),e.R7$(),e.JRh(e.i5U(21,24,t.nameAr,50)),e.R7$(3),e.xc7("background-color",t.startStatusColor),e.R7$(),e.JRh(e.i5U(25,27,t.startStatusName,50)),e.R7$(2),e.Y8G("ngIf","ar"!=r.lang),e.R7$(),e.Y8G("ngIf","ar"==r.lang),e.R7$(),e.xc7("background-color",t.endStatusColor),e.R7$(),e.JRh(e.i5U(30,30,t.endStatusName,50)),e.R7$(5),e.Y8G("ngbTooltip",a),e.R7$(),e.JRh(e.i5U(36,33,t.clientReviewActionDoingName,20)),e.R7$(7),e.Y8G("ngbTooltip",l),e.R7$(),e.Y8G("hasPermission",e.lJ4(36,Mn))}}function Vn(o,s){1&o&&(e.j41(0,"div",64),e.EFF(1," general.table.noData "),e.k0s())}function Ln(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",65)(1,"div",66),e.nrm(2,"ngb-pagination-info",67),e.j41(3,"table-length",68),e.bIt("lengthChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",69)(5,"ngb-pagination",70),e.bIt("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.pagination.pageNumber,n)||(a.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&o){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function Xn(o,s){if(1&o){const t=e.RV6();e.qex(0),e.j41(1,"textarea",97),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG(2);return e.DH7(a.form.value,n)||(a.form.value=n),e.Njj(n)}),e.k0s(),e.bVm()}if(2&o){const t=e.XpG(2);e.R7$(),e.FS9("name","answer_"+t.form.reviewQuestionId),e.R50("ngModel",t.form.value),e.Y8G("required",t.form.isRequired)}}function On(o,s){if(1&o){const t=e.RV6();e.qex(0),e.j41(1,"p-rating",98),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG(2);return e.DH7(a.form.value,n)||(a.form.value=n),e.Njj(n)}),e.k0s(),e.bVm()}if(2&o){const t=e.XpG(2);e.R7$(),e.FS9("name","answer_"+t.form.reviewQuestionId),e.Y8G("required",t.form.isRequired),e.R50("ngModel",t.form.value),e.Y8G("stars",t.getLength(t.form.items))("cancel",!1)("disabled",!1)("readonly",!1)}}function Bn(o,s){if(1&o){const t=e.RV6();e.qex(0),e.j41(1,"div",100)(2,"input",101),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG(3);return e.DH7(a.form.value,n)||(a.form.value=n),e.Njj(n)}),e.k0s(),e.j41(3,"label",102),e.EFF(4),e.k0s()(),e.bVm()}if(2&o){const t=s.$implicit,i=e.XpG(3);e.R7$(2),e.FS9("name",i.form.reviewQuestionId),e.FS9("id",t.id),e.Y8G("value",t.id),e.R50("ngModel",i.form.value),e.R7$(),e.FS9("for",t.id),e.R7$(),e.JRh(t.name)}}function Pn(o,s){if(1&o&&(e.qex(0),e.DNE(1,Bn,5,6,"ng-container",99),e.bVm()),2&o){const t=e.XpG(2);e.R7$(),e.Y8G("ngForOf",t.radioItem)}}function An(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",71)(1,"div",72)(2,"h4",73)(3,"span",74),e.EFF(4),e.k0s(),e.j41(5,"span",75),e.EFF(6),e.k0s(),e.j41(7,"span",76),e.EFF(8),e.k0s(),e.j41(9,"span",77),e.EFF(10),e.k0s(),e.nrm(11,"i",78),e.j41(12,"span",79),e.EFF(13),e.k0s()(),e.j41(14,"button",80),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss("Cross click"))}),e.k0s()(),e.j41(15,"div",81),e.nrm(16,"ngx-ui-loader",26),e.j41(17,"form",82,9),e.bIt("ngSubmit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.OnSubmit())}),e.j41(19,"div",12)(20,"div",83)(21,"div",84)(22,"label",85),e.EFF(23),e.k0s(),e.DNE(24,Xn,2,3,"ng-container",86)(25,On,2,7,"ng-container",86)(26,Pn,2,1,"ng-container",86),e.k0s(),e.j41(27,"div",84)(28,"label",87),e.EFF(29,"crm.clientReview.endStatusName"),e.k0s(),e.j41(30,"ng-select",88),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.endStatusId,n)||(a.form.endStatusId=n),e.Njj(n)}),e.k0s()(),e.j41(31,"div",84)(32,"label",89),e.EFF(33,"crm.clientReview.actionDoing"),e.k0s(),e.j41(34,"ng-select",90),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.clientReviewActionDoingId,n)||(a.form.clientReviewActionDoingId=n),e.Njj(n)}),e.k0s()(),e.j41(35,"div",84)(36,"label",91),e.EFF(37,"crm.clientReview.note"),e.k0s(),e.j41(38,"textarea",92,10),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.notes,n)||(a.form.notes=n),e.Njj(n)}),e.k0s()()()(),e.j41(40,"div",93)(41,"button",94),e.nrm(42,"i",95)(43,"span",96),e.k0s()()()()()}if(2&o){const t=e.sdS(18),i=e.XpG();e.R7$(4),e.JRh(i.titleOperation),e.R7$(2),e.JRh(i.form.clientName),e.R7$(2),e.SpI("#SO#",i.form.orderId,""),e.R7$(),e.xc7("background-color",i.form.startStatusColor),e.R7$(),e.JRh(i.form.startStatusName),e.R7$(2),e.xc7("background-color",i.form.endStatusColor),e.R7$(),e.JRh(i.form.endStatusName),e.R7$(3),e.Y8G("hasProgressBar",!1)("fgsType",i.loaderOperationShap)("loaderId",i.operationLoader),e.R7$(6),e.Y8G("ngClass",e.eq3(26,Sn,i.form.isRequired)),e.R7$(),e.JRh(i.form.questionName),e.R7$(),e.Y8G("ngIf","text"===i.form.questionType),e.R7$(),e.Y8G("ngIf","star"===i.form.questionType),e.R7$(),e.Y8G("ngIf","radio"===i.form.questionType),e.R7$(4),e.Y8G("clearable",!1)("items",i.types)("multiple",!1),e.R50("ngModel",i.form.endStatusId),e.R7$(4),e.Y8G("items",i.actionDoing)("multiple",!1),e.R50("ngModel",i.form.clientReviewActionDoingId),e.R7$(4),e.R50("ngModel",i.form.notes),e.R7$(3),e.Y8G("disabled",!t.valid)}}function $n(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",71)(1,"div",72)(2,"h4",73)(3,"span",103),e.EFF(4,"crm.clientReview.doAction "),e.k0s()(),e.j41(5,"button",80),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss("Cross click"))}),e.k0s()(),e.j41(6,"div",81),e.nrm(7,"ngx-ui-loader",26),e.j41(8,"form",82,9),e.bIt("ngSubmit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.onUpdateReviewQuestion())}),e.j41(10,"div",12)(11,"div",84)(12,"label",87),e.EFF(13,"crm.clientReview.endStatusName"),e.k0s(),e.j41(14,"ng-select",104),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.endStatusId,n)||(a.form.endStatusId=n),e.Njj(n)}),e.k0s()(),e.j41(15,"div",84)(16,"label",89),e.EFF(17,"crm.clientReview.actionDoing"),e.k0s(),e.j41(18,"ng-select",90),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.clientReviewActionDoingId,n)||(a.form.clientReviewActionDoingId=n),e.Njj(n)}),e.k0s()(),e.j41(19,"div",84)(20,"label",105),e.EFF(21,"crm.clientReview.note"),e.k0s(),e.j41(22,"textarea",106),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.note,n)||(a.form.note=n),e.Njj(n)}),e.k0s()()(),e.j41(23,"div",93)(24,"button",94),e.nrm(25,"i",95)(26,"span",96),e.k0s()()()()()}if(2&o){const t=e.sdS(9),i=e.XpG();e.R7$(7),e.Y8G("hasProgressBar",!1)("fgsType",i.loaderOperationShap)("loaderId",i.operationLoader),e.R7$(7),e.Y8G("items",i.types)("multiple",!1),e.R50("ngModel",i.form.endStatusId),e.R7$(4),e.Y8G("items",i.actionDoing)("multiple",!1),e.R50("ngModel",i.form.clientReviewActionDoingId),e.R7$(4),e.R50("ngModel",i.form.note),e.R7$(2),e.Y8G("disabled",!t.valid)}}function Yn(o,s){if(1&o){const t=e.RV6();e.j41(0,"delete-modal",107),e.bIt("deleteConfirm",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.DeleteConfirm())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}}function Un(o,s){if(1&o&&e.nrm(0,"client-profile-main",108),2&o){const t=e.XpG();e.Y8G("clientIdInput",t.clientSelected)}}function Hn(o,s){if(1&o&&e.nrm(0,"order-operation",109),2&o){const t=e.XpG();e.Y8G("isOrderEdit",!1)("isInner",!0)("orderCode",t.clientSelected)}}let zn=(()=>{class o extends G.w{constructor(t,i,n,a,l,r,h,v,R){super(t,i,h,n,a,l,r),this.baseService=n,this.excelService=v,this.teamService=R,this.title="crm.clientReview.title",this.titleOperation="crm.clientReview.titleOperation",this.keySelected="",this.assignUsers=[],this.times=[],this.types=[],this.actionDoing=[],this.isResolveList=!0,this.clientSelected=0,this.questions=[],this.clients=[],this.searchForm={dates:{from:null,to:null}},this.items=[],this.scores=[],this.radioItem=[],this.teams=[],this.configRoute(),this.getTeam()}getTeam(){this.teamService.getDropDown().subscribe(t=>{this.teams=t.data})}ngOnInitMore(){this.clientReviewLookUp(),this.breadCrumbItems=[{label:"layout.sidebar.crm"},{label:this.title,active:!0}]}openModalTitle(t,i="md"){this.isEditForm=!1,this.form={clientReviewAnswers:[]},this.modalService.open(t,{centered:!0,size:i})}openModal(t,i,n="md"){this.isEditForm=!1,this.form={clientReviewAnswers:[]},this.selectedRow=[{id:t}],this.modalService.open(i,{centered:!0,size:n})}mapForm(t){let i={};return i.id=t.id,i.clientReviewActionDoingId=t.clientReviewActionDoingId,i.endStatusId=t.endStatusId,i.note=t.note,i.value=t.value.toString(),i}onUpdateIsActive(t){this.baseService.updateActive(t).pipe((0,p.Q)(this.notifier)).subscribe(i=>{i?this.alertService.success():this.alertService.error("general.message."+i)},i=>{this.alertService.error()})}mapRegisterForm(t){let i={};return i.id=t.id,i.reviewQuestionId=t.reviewQuestionId,i.clientReviewActionDoingId=t.clientReviewActionDoingId,i.endStatusId=t.endStatusId,i.note=t.note,i}clientReviewLookUp(){this.baseService.ClientReviewLookUp().subscribe(t=>{this.clients=t.data.clients,this.types=t.data.types,this.actionDoing=t.data.actionDoing,this.questions=t.data.questions},t=>{console.log(t)})}configRoute(){this.routerActive.data.pipe((0,p.Q)(this.notifier)).subscribe(t=>{this.entities=t.data.data,this.pagination.totalItems=t.data.totalItems},()=>{this.alertService.error()})}mapExcel(){let t=[];return this.entities?.forEach(i=>{t.push({Client:i.clientName,Mobile:i.mobile,OrderId:i.orderId,Question:i.nameAr,IntailStatus:i.startStatusName,FinalStatus:i.endStatusColor,note:i.note})}),t}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,this.getTranslationText(this.title),[])}onSearch(){this.ngxLoader.startLoader(this.searchLoader),this.filter(),this.loadentities()}EditModel(t,i,n="md"){this.isEditForm=!0,this.baseService.getById(t.id).pipe((0,p.Q)(this.notifier)).subscribe(a=>{if(a.success){let l=a.data;this.questions=this.questions.filter(r=>r.id==l.reviewQuestionId),null!=l.items&&(this.items=l.items.split(",").map(r=>r.trim()).reverse(),this.scores=l.score.split(","),this.radioItem=this.items.map((r,h)=>({id:this.scores[h],name:r}))),this.form=l}else this.alertService.error("general.message."+a.message);this.modalService.open(i,{centered:!0,size:n})},a=>{this.alertService.error()})}ChangeStatusModel(t,i,n="md"){this.form={},this.form.id=t.id,this.form.clientReviewActionDoingId=t.clientReviewActionDoingId,this.form.notes=t.notes,this.form.endStatusId=t.endStatusId,this.modalService.open(i,{centered:!0,size:n})}filter(){var t=this.searchForm.dates;t+void 0&&"to"in t?(this.pagination.dateFrom=this.datePipe.transform(t.from,"yyyy-MM-ddT00:00:00.000"),this.pagination.dateTo=this.datePipe.transform(t.to,"yyyy-MM-ddT23:59:59.999")):(this.pagination.dateFrom=null,this.pagination.dateTo=null),this.pagination.teamId=this.searchForm.teamId}onReset(){this.form={},this.searchForm={dates:{from:null,to:null}},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems}}onUpdateReviewQuestion(){this.baseService.UpdateReviewQuestion(this.form).pipe((0,j.O)(),(0,M.c)(this.mainDelay),(0,y.Z)(),(0,p.Q)(this.notifier),(0,I.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(t=>{t.success?this.submitFunished():this.alertService.error("general.message."+t.message)},t=>{this.alertService.error("general.message."+t)})}getLength(t){if(null!=t&&""!==t)return t.split(",").length}editEntity(){let t=this.mapForm(this.form);this.baseService.ClientReviewQuestionEdit(t).pipe((0,j.O)(),(0,M.c)(this.mainDelay),(0,y.Z)(),(0,p.Q)(this.notifier),(0,I.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(i=>{i.success?this.submitFunished():this.alertService.error("general.message."+i.message)},i=>{this.alertService.error("general.message."+i)})}openModalClient(t,i,n="xl"){this.clientSelected=t,this.modalService.open(i,{centered:!0,size:n})}getItems(t){if(""!=t)return t.split(",")}static{this.\u0275fac=function(i){return new(i||o)(e.rXU(f.nX),e.rXU(_.c$),e.rXU(ae.Z),e.rXU(F.u),e.rXU(g.vh),e.rXU(b.eD),e.rXU(m.Bq),e.rXU(O.V),e.rXU(Ie.n))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-clientReview"]],features:[e.Vt3],decls:40,vars:38,consts:[["tableMaster",""],["operation",""],["changeStatus",""],["deleteModal",""],["clientProfile",""],["orderModel",""],["nameAr",""],["clientReviewActionDoingName",""],["tooltipContent",""],["formEntity","ngForm"],["notes","ngModel"],[3,"title","breadcrumbItems"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],[3,"reset","search","exportXlsx","addNew","showAdd","addPermission","totalItems","title"],["control",""],[1,"col-md-2","mb-2"],[1,"search-box"],["type","search","id","filterValue","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["type","search","id","orderId","name","orderId",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"col-12","col-md-3","mb-2"],["name","name","bindValue","id","id","startStatusId","name","startStatusId","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],["name","endStatusId","name","name","bindValue","id","id","endStatusId","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],[1,"card-body"],[3,"hasProgressBar","fgsType","loaderId"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["translate","",2,"width",".5%"],["pSortableColumn","clientId","translate","",2,"width","10%"],[1,"ri-expand-up-down-line"],["pSortableColumn","orderId","translate","",2,"width","15%"],["translate","",2,"width","8%"],["translate","",2,"width","12%"],["translate","",2,"width","15%"],["pSortableColumn","endStatusId","translate","",2,"width","20%"],["translate","",2,"width","5%"],["translate","",2,"width","23%"],[1,"fs-5"],[3,"click"],[1,"bg-primary-subtle","text-primary"],[1,"badge","bg-success-subtle","text-success"],["tooltipPosition","top",3,"ngbTooltip"],[1,"badge","color-crm"],["class","ri-arrow-right-circle-line text-danger mx-1",4,"ngIf"],["class","ri-arrow-left-circle-line text-danger mx-1",4,"ngIf"],[1,"d-inline"],["ngbDropdown","",1,"dropdown"],["tooltipPosition","top",1,"mdi","mdi-cog-outline","d-inline","text-muted","fs-16","align-middle","me-1",3,"ngbTooltip"],["type","button","class","btn btn-sm  btn-primary   btn-label waves-effect waves-light rounded-pill",3,"click",4,"hasPermission"],[1,"ri-arrow-right-circle-line","text-danger","mx-1"],[1,"ri-arrow-left-circle-line","text-danger","mx-1"],[1,"ri-history-fill","text-warning"],[1,"ri-history-fill","text-danger"],[1,"ri-user-location-fill","text-primary"],["type","button",1,"btn","btn-sm","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"click"],[1,"ri-eye-line","label-icon","align-middle","rounded-pill","fs-16"],["translate","general.action.view"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["translate",""],[1,"badge","bg-success-subtle","text-success","mx-2"],[1,"badge","bg-danger-subtle","text-danger","mx-2"],[1,"badge","mx-1","badge","color-crm"],[1,"ri-arrow-right-circle-line","text-danger","mx-2"],[1,"badge","badge","color-crm"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"ngSubmit"],[1,"col-12"],[1,"mb-3"],[1,"fw-bold","form-label","w-100",3,"ngClass"],[4,"ngIf"],["translate","",1,"required","fw-bold","form-label","w-100"],["name","clientReviewFinalResultId","bindValue","id","bindLabel","name",3,"ngModelChange","clearable","items","multiple","ngModel"],["translate","",1,"fw-bold","form-label","w-100"],["name","clientReviewActionDoingId","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","ngModel"],["for","notes","translate","",1,"fw-bold","form-label"],["rows","1","InputTirmFilter","","name","notes","type","text","id","notes",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,"text-center"],["type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],["rows","1","type","text",1,"form-control","fs-6",3,"ngModelChange","name","ngModel","required"],[3,"ngModelChange","required","name","ngModel","stars","cancel","disabled","readonly"],[4,"ngFor","ngForOf"],[1,"form-check","form-check-inline"],["type","radio",1,"form-check-input",3,"ngModelChange","name","id","value","ngModel"],[1,"form-check-label",3,"for"],["translate","",1,"fw-bold","fs-4"],["name","clientReviewFinalResultId","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","ngModel"],["for","note","translate","",1,"fw-bold","form-label"],["rows","2","InputTirmFilter","","name","note","type","text","id","note",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[3,"deleteConfirm","dismiss"],[3,"clientIdInput"],[3,"isOrderEdit","isInner","orderCode"]],template:function(i,n){if(1&i){const a=e.RV6();e.nrm(0,"app-breadcrumbs",11),e.nI1(1,"translate"),e.j41(2,"div",12)(3,"div",13)(4,"div",14)(5,"base-filter",15),e.bIt("reset",function(){return e.eBV(a),e.Njj(n.onReset())})("search",function(){return e.eBV(a),e.Njj(n.onSearch())})("exportXlsx",function(){return e.eBV(a),e.Njj(n.onExportXlsx())})("addNew",function(){e.eBV(a);const r=e.sdS(31);return e.Njj(n.openModalTitle(r,"xl"))}),e.qex(6,16),e.j41(7,"div",17)(8,"div",18)(9,"input",19),e.nI1(10,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.filterValue,r)||(n.pagination.filterValue=r),e.Njj(r)}),e.k0s(),e.nrm(11,"i",20),e.k0s()(),e.j41(12,"div",17)(13,"input",21),e.nI1(14,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.orderId,r)||(n.pagination.orderId=r),e.Njj(r)}),e.k0s()(),e.j41(15,"div",22)(16,"ng-select",23),e.nI1(17,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.startStatusId,r)||(n.pagination.startStatusId=r),e.Njj(r)}),e.k0s()(),e.j41(18,"div",22)(19,"ng-select",24),e.nI1(20,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.endStatusId,r)||(n.pagination.endStatusId=r),e.Njj(r)}),e.k0s()(),e.bVm(),e.k0s(),e.j41(21,"div",25),e.nrm(22,"ngx-ui-loader",26),e.j41(23,"div",27)(24,"p-table",28,0),e.bIt("onLazyLoad",function(r){return e.eBV(a),e.Njj(n.tableChange(r))})("selectionChange",function(r){return e.eBV(a),e.Njj(n.onSelectionChange(r))}),e.DNE(26,Tn,21,0,"ng-template",29)(27,Dn,44,37,"ng-template",30),e.k0s()(),e.DNE(28,Vn,2,0,"div",31)(29,Ln,6,8,"div",32),e.k0s()()()(),e.DNE(30,An,44,28,"ng-template",null,1,e.C5r)(32,$n,27,11,"ng-template",null,2,e.C5r)(34,Yn,1,0,"ng-template",null,3,e.C5r)(36,Un,1,1,"ng-template",null,4,e.C5r)(38,Hn,1,3,"ng-template",null,5,e.C5r)}2&i&&(e.FS9("title",e.bMT(1,27,n.title)),e.Y8G("breadcrumbItems",n.breadCrumbItems),e.R7$(5),e.Y8G("showAdd",!1)("addPermission",e.lJ4(37,Fn))("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(4),e.FS9("placeholder",e.bMT(10,29,"task.tasklist.subject")),e.R50("ngModel",n.pagination.filterValue),e.R7$(4),e.FS9("placeholder",e.bMT(14,31,"crm.clientReview.orderId")),e.R50("ngModel",n.pagination.orderId),e.R7$(3),e.FS9("placeholder",e.bMT(17,33,"crm.clientReview.startStatusName")),e.Y8G("items",n.types)("multiple",!1),e.R50("ngModel",n.pagination.startStatusId),e.R7$(3),e.FS9("placeholder",e.bMT(20,35,"crm.clientReview.endStatusName")),e.Y8G("items",n.types)("multiple",!1),e.R50("ngModel",n.pagination.endStatusId),e.R7$(3),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderSearchShap)("loaderId",n.searchLoader),e.R7$(2),e.Y8G("value",n.entities)("rows",n.pagination.pageSize)("lazy",!0)("totalRecords",n.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",n.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems>0))},dependencies:[g.YU,g.Sq,g.bT,c.qT,c.me,c.Fm,c.BC,c.cb,c.YS,c.vS,c.cV,m.tg,m.s5,H.m,D.b,de.L,P.w,V.p,L.g,fe.t,x.m,U.p,_.Mm,C.XI,N.Ei,C.Tg,b.Cv,m.md,T.vr,je,g.vh,ze.H,_.D9],encapsulation:2})}}return o})(),Qn=(()=>{class o extends pe.d{constructor(t){super(t,W.c.apiUrl+"ReviewQuestion/")}static{this.\u0275fac=function(i){return new(i||o)(e.KVO(ge.Qq))}}static{this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})(),qn=(()=>{class o extends pe.d{constructor(t){super(t,W.c.apiUrl+"ReviewAnswer/")}GetAnswerTypes(){return this.http.get(this.baseUrl+"GetAnswerTypes")}static{this.\u0275fac=function(i){return new(i||o)(e.KVO(ge.Qq))}}static{this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();const Jn=()=>["crmSetting.register"],Wn=()=>["crmSetting.edit"],Kn=()=>["crmSetting.delete"];function Zn(o,s){1&o&&(e.j41(0,"tr",30)(1,"th",31),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",32),e.nrm(4,"i",33),e.EFF(5," general.table.nameEn "),e.k0s(),e.j41(6,"th",34),e.nrm(7,"i",33),e.EFF(8," general.table.nameAr "),e.k0s(),e.j41(9,"th",35),e.nrm(10,"i",33),e.EFF(11," crm.reviewQuestion.answerType "),e.k0s(),e.j41(12,"th",36),e.nrm(13,"i",33),e.EFF(14," general.table.isActive "),e.k0s(),e.nrm(15,"th",37),e.k0s())}function ei(o,s){1&o&&e.nrm(0,"span",44)}function ti(o,s){1&o&&e.nrm(0,"span",45)}function ni(o,s){if(1&o&&(e.nrm(0,"i",46),e.EFF(1),e.nI1(2,"date"),e.nrm(3,"br")(4,"i",47),e.EFF(5),e.nI1(6,"date"),e.nrm(7,"br")(8,"i",48),e.EFF(9)),2&o){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.i5U(2,3,t.createdDate,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",e.i5U(6,6,t.updatedDate,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",t.creatorName," ")}}function ii(o,s){if(1&o){const t=e.RV6();e.j41(0,"button",49),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,a=e.XpG(),l=e.sdS(24);return e.Njj(a.EditModel(n.id,l))}),e.nrm(1,"i",50),e.k0s()}}function ai(o,s){if(1&o){const t=e.RV6();e.j41(0,"button",51),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,a=e.XpG(),l=e.sdS(26);return e.Njj(a.openModal(n.id,l))}),e.nrm(1,"i",52),e.k0s()}}function oi(o,s){if(1&o&&(e.j41(0,"tr",38)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.nI1(9,"translate"),e.k0s(),e.j41(10,"td"),e.DNE(11,ei,1,0,"span",39)(12,ti,1,0,"span",40),e.k0s(),e.j41(13,"td"),e.DNE(14,ni,10,9,"ng-template",null,3,e.C5r),e.nrm(16,"i",41),e.DNE(17,ii,2,0,"button",42)(18,ai,2,0,"button",43),e.k0s()()),2&o){const t=s.$implicit,i=s.rowIndex,n=e.sdS(15);e.R7$(2),e.JRh(i+1),e.R7$(2),e.JRh(t.nameAr),e.R7$(2),e.JRh(t.nameEn),e.R7$(2),e.JRh(e.bMT(9,9,"crm.reviewAnswer."+t.answerTypeName)),e.R7$(3),e.Y8G("ngIf",t.isActive),e.R7$(),e.Y8G("ngIf",!t.isActive),e.R7$(4),e.Y8G("ngbTooltip",n),e.R7$(),e.Y8G("hasPermission",e.lJ4(11,Wn)),e.R7$(),e.Y8G("hasPermission",e.lJ4(12,Kn))}}function ri(o,s){1&o&&(e.j41(0,"div",53),e.EFF(1," general.table.noData"),e.k0s())}function li(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",54)(1,"div",55),e.nrm(2,"ngb-pagination-info",56),e.j41(3,"table-length",57),e.bIt("lengthChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",58)(5,"ngb-pagination",59),e.bIt("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.pagination.pageNumber,n)||(a.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&o){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function si(o,s){1&o&&(e.j41(0,"span",101),e.EFF(1,"general.action.register "),e.k0s())}function ci(o,s){1&o&&(e.j41(0,"span",101),e.EFF(1,"general.action.edit "),e.k0s())}function di(o,s){1&o&&(e.j41(0,"div",102),e.EFF(1," general.message.filedIdRequired"),e.k0s())}function mi(o,s){1&o&&(e.j41(0,"div",102),e.EFF(1," general.message.filedIdRequired"),e.k0s())}function pi(o,s){1&o&&(e.j41(0,"div",102),e.EFF(1," general.message.filedIdRequired"),e.k0s())}function gi(o,s){1&o&&(e.j41(0,"div",102),e.EFF(1," general.message.filedIdRequired"),e.k0s())}function _i(o,s){1&o&&(e.j41(0,"div",102),e.EFF(1," general.message.filedIdRequired"),e.k0s())}function ui(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",69)(1,"label",103),e.EFF(2,"crm.reviewQuestion.point"),e.k0s(),e.j41(3,"input",104,12),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG(2);return e.DH7(a.form.point,n)||(a.form.point=n),e.Njj(n)}),e.k0s(),e.DNE(5,_i,2,0,"div",72),e.k0s()}if(2&o){const t=e.sdS(4),i=e.XpG(2);e.R7$(3),e.R50("ngModel",i.form.point),e.R7$(2),e.Y8G("ngIf",t.invalid&&t.touched)}}function hi(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",60)(1,"div",61)(2,"h4",62),e.DNE(3,si,2,0,"span",63)(4,ci,2,0,"span",63),e.j41(5,"span",64),e.EFF(6),e.k0s()(),e.j41(7,"button",65),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss("Cross click"))}),e.k0s()(),e.j41(8,"div",66),e.nrm(9,"ngx-ui-loader",67),e.j41(10,"form",68,4),e.bIt("submit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.OnSubmit())}),e.j41(12,"div",13)(13,"div",69)(14,"label",70),e.EFF(15,"general.table.nameAr"),e.k0s(),e.j41(16,"input",71,5),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.nameAr,n)||(a.form.nameAr=n),e.Njj(n)}),e.k0s(),e.DNE(18,di,2,0,"div",72),e.k0s(),e.j41(19,"div",69)(20,"label",73),e.EFF(21,"general.table.nameEn"),e.k0s(),e.j41(22,"input",74,6),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.nameEn,n)||(a.form.nameEn=n),e.Njj(n)}),e.k0s(),e.DNE(24,mi,2,0,"div",72),e.k0s(),e.j41(25,"div",75)(26,"label",76),e.EFF(27,"crm.reviewAnswer.answerType"),e.k0s(),e.j41(28,"ng-select",77,7),e.bIt("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.onAnswerType(n))}),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.answerType,n)||(a.form.answerType=n),e.Njj(n)}),e.k0s(),e.DNE(30,pi,2,0,"div",72),e.k0s(),e.j41(31,"div",78)(32,"label",79),e.EFF(33,"crm.reviewQuestion.isRequired"),e.k0s(),e.j41(34,"p-inputSwitch",80),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.isRequired,n)||(a.form.isRequired=n),e.Njj(n)}),e.k0s()(),e.j41(35,"div",78)(36,"label",81),e.EFF(37,"crm.reviewQuestion.sort"),e.k0s(),e.j41(38,"input",82,8),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.sort,n)||(a.form.sort=n),e.Njj(n)}),e.k0s(),e.DNE(40,gi,2,0,"div",72),e.k0s(),e.j41(41,"div",69)(42,"label",83),e.EFF(43,"crm.reviewQuestion.items"),e.k0s(),e.j41(44,"input",84,9),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.items,n)||(a.form.items=n),e.Njj(n)}),e.k0s()(),e.j41(46,"div",69)(47,"label",85),e.EFF(48,"crm.reviewQuestion.score"),e.k0s(),e.j41(49,"input",86,10),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.score,n)||(a.form.score=n),e.Njj(n)}),e.k0s()(),e.DNE(51,ui,6,2,"div",87),e.j41(52,"div",69)(53,"label",88),e.EFF(54,"general.table.notes"),e.k0s(),e.j41(55,"input",89,11),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.notes,n)||(a.form.notes=n),e.Njj(n)}),e.k0s()(),e.j41(57,"div",90)(58,"label",91),e.EFF(59,"general.table.isActive"),e.k0s(),e.j41(60,"p-inputSwitch",92),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.isActive,n)||(a.form.isActive=n),e.Njj(n)}),e.k0s()(),e.j41(61,"div",90)(62,"label",93),e.EFF(63,"crm.reviewQuestion.isSendClient"),e.k0s(),e.j41(64,"p-inputSwitch",94),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.isSendClient,n)||(a.form.isSendClient=n),e.Njj(n)}),e.k0s()(),e.j41(65,"div",90)(66,"label",95),e.EFF(67,"crm.reviewQuestion.isSeeMobileApp"),e.k0s(),e.j41(68,"p-inputSwitch",96),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.isSeeMobileApp,n)||(a.form.isSeeMobileApp=n),e.Njj(n)}),e.k0s()()(),e.j41(69,"div",97)(70,"button",98),e.nrm(71,"i",99)(72,"span",100),e.k0s()()()()()}if(2&o){const t=e.sdS(11),i=e.sdS(17),n=e.sdS(23),a=e.sdS(29),l=e.sdS(39),r=e.XpG();e.R7$(3),e.Y8G("ngIf",!r.isEditForm),e.R7$(),e.Y8G("ngIf",r.isEditForm),e.R7$(2),e.JRh(r.titleOperation),e.R7$(3),e.Y8G("hasProgressBar",!1)("fgsType",r.loaderOperationShap)("loaderId",r.operationLoader),e.R7$(7),e.R50("ngModel",r.form.nameAr),e.R7$(2),e.Y8G("ngIf",i.invalid&&i.touched),e.R7$(4),e.R50("ngModel",r.form.nameEn),e.R7$(2),e.Y8G("ngIf",n.invalid&&n.touched),e.R7$(4),e.Y8G("items",r.answerTypes)("multiple",!1),e.R50("ngModel",r.form.answerType),e.R7$(2),e.Y8G("ngIf",a.invalid&&a.touched),e.R7$(4),e.R50("ngModel",r.form.isRequired),e.R7$(4),e.R50("ngModel",r.form.sort),e.R7$(2),e.Y8G("ngIf",l.invalid&&l.touched),e.R7$(4),e.R50("ngModel",r.form.items),e.R7$(5),e.R50("ngModel",r.form.score),e.R7$(2),e.Y8G("ngIf",!1),e.R7$(4),e.R50("ngModel",r.form.notes),e.R7$(5),e.R50("ngModel",r.form.isActive),e.R7$(4),e.R50("ngModel",r.form.isSendClient),e.R7$(4),e.R50("ngModel",r.form.isSeeMobileApp),e.R7$(2),e.Y8G("disabled",!t.valid)}}function fi(o,s){if(1&o){const t=e.RV6();e.j41(0,"delete-modal",105),e.bIt("deleteConfirm",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.DeleteConfirm())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}}let Qe=(()=>{class o extends G.w{constructor(t,i,n,a,l,r,h,v,R,S){super(t,i,v,n,l,r,h),this.baseService=n,this.reviewAnswerService=a,this.excelService=S,this.title="crm.reviewQuestion.title",this.titleOperation="crm.reviewQuestion.titleOperation",this.keySelected="",this.assignUsers=[],this.times=[],this.employees=[],this.searchForm={},this.isResolveList=!0,this.countLoad=2,this.answerTypes=[],this.showMulti=!1,this.configRoute(),this.getTypes()}getTypes(){this.reviewAnswerService.GetAnswerTypes().subscribe(t=>{this.answerTypes=t.data})}onUpdateIsActive(t){this.baseService.updateActive(t).pipe((0,p.Q)(this.notifier)).subscribe(i=>{i?this.alertService.success():this.alertService.error("general.message."+i)},i=>{this.alertService.error()})}ngOnInitMore(){}mapForm(t){return{...t}}mapRegisterForm(t){let i={...t};return i.id=0,i}OnSearch(t){this.ngxLoader.startLoader(u.a7),this.loadentities()}onSearch(){this.ngxLoader.startLoader(u.a7),this.loadentities()}configRoute(){}mapExcel(){let t=[];return this.entities?.forEach(i=>{t.push({nameAr:i.nameAr,nameEn:i.nameEn,isActive:this.getTranslationText("general.table.active"),notes:i.notes})}),t}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,this.getTranslationText(this.title),[])}editEntity(){let t=this.mapForm(this.form);this.baseService.editPut(t.id,t).pipe((0,j.O)(),(0,M.c)(this.mainDelay),(0,y.Z)(),(0,p.Q)(this.notifier),(0,I.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(i=>{i.success?this.submitFunished():this.alertService.error("general.message."+i.message)},i=>{this.alertService.error("general.message."+i)})}EditModel(t,i,n="md"){this.isEditForm=!0,this.baseService.getById(t).pipe((0,p.Q)(this.notifier)).subscribe(a=>{if(a.success){let l=a.data;this.onAnswerType(l.answerType),this.form=l}else this.alertService.error("general.message."+a.message);this.modalService.open(i,{centered:!0,size:n})},a=>{this.alertService.error()})}onAnswerType(t){this.showMulti=1==t}static{this.\u0275fac=function(i){return new(i||o)(e.rXU(f.nX),e.rXU(_.c$),e.rXU(Qn),e.rXU(qn),e.rXU(F.u),e.rXU(g.vh),e.rXU(b.eD),e.rXU(m.Bq),e.rXU(e.gRc),e.rXU(O.V))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["reviewQuestion"]],features:[e.Vt3],decls:27,vars:18,consts:[["tableMaster",""],["operation",""],["deleteModal",""],["tooltipContent",""],["formEntity","ngForm"],["nameAr","ngModel"],["nameEn","ngModel"],["answerType","ngModel"],["sort","ngModel"],["items","ngModel"],["score","ngModel"],["notes","ngModel"],["point","ngModel"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],[3,"reset","search","exportXlsx","addNew","addPermission","totalItems","title"],["control",""],[1,"col-md-3","mb-2"],[1,"search-box"],["type","search","id","filterValue1","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["type","search","id","filterValue2","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["translate","",2,"width",".5%"],["pSortableColumn","nameEn","translate","",2,"width","30%"],[1,"ri-expand-up-down-line"],["pSortableColumn","nameAr","translate","",2,"width","30%"],["pSortableColumn","answerType","translate","",2,"width","10%"],["pSortableColumn","isActive","translate","",2,"width","8%"],["translate","",2,"width","10%"],[1,"fs-5"],["class","badge bg-success-subtle text-success p-2","translate","general.table.active",4,"ngIf"],["class","badge bg-danger-subtle text-danger p-2","translate","general.table.noActive",4,"ngIf"],["tooltipPosition","top",1,"mdi","mdi-cog-outline","text-muted","fs-16","align-middle","me-1",3,"ngbTooltip"],["class","btn btn-sm btn-soft-info edit-list mx-2",3,"click",4,"hasPermission"],["class","btn btn-sm btn-soft-danger remove-list",3,"click",4,"hasPermission"],["translate","general.table.active",1,"badge","bg-success-subtle","text-success","p-2"],["translate","general.table.noActive",1,"badge","bg-danger-subtle","text-danger","p-2"],[1,"ri-history-fill","text-warning"],[1,"ri-history-fill","text-danger"],[1,"ri-user-location-fill","text-primary"],[1,"btn","btn-sm","btn-soft-info","edit-list","mx-2",3,"click"],[1,"ri-pencil-fill","align-bottom","mx-1"],[1,"btn","btn-sm","btn-soft-danger","remove-list",3,"click"],[1,"ri-delete-bin-5-fill","align-bottom"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["class","fw-bold fs-4","translate","",4,"ngIf"],["translate",""],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"hasProgressBar","fgsType","loaderId"],[3,"submit"],[1,"col-12"],["for","nameAr","translate","",1,"required","fw-bold","form-label"],["InputTirmFilter","","name","nameAr","type","text","id","nameAr","required","",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],["for","nameEn","translate","",1,"required","fw-bold","form-label"],["InputTirmFilter","","name","nameEn","type","text","id","nameEn","required","",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,"col-12","col-md-6","my-1"],["translate","",1,"required","fw-bold","form-label","w-100"],["name","answerType","bindValue","id","bindLabel","name","required","",3,"ngModelChange","items","multiple","ngModel"],[1,"col-12","col-md-3","my-1"],["for","isRequired","translate","",1,"fw-bold","form-label","w-100"],["name","isRequired","inputId","isRequired",3,"ngModelChange","ngModel"],["for","sort","translate","",1,"required","fw-bold","form-label"],["InputTirmFilter","","name","sort","type","text","id","sort","required","",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["for","items","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","items","type","text","id","items",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["for","score","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","score","type","text","id","score",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","col-12",4,"ngIf"],["for","notes","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","notes","type","text","id","notes",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,"col-12","col-md-4","my-1"],["for","isActive","translate","",1,"fw-bold","form-label","w-100"],["name","isActive","inputId","isActive",3,"ngModelChange","ngModel"],["for","isSendClient","translate","",1,"fw-bold","form-label","w-100"],["name","isSendClient","inputId","isSendClient",3,"ngModelChange","ngModel"],["for","isSeeMobileApp","translate","",1,"fw-bold","form-label","w-100"],["name","isSeeMobileApp","inputId","isSeeMobileApp",3,"ngModelChange","ngModel"],[1,"text-center"],["type","submit","type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],["translate","",1,"fw-bold","fs-4"],["translate","",1,"text-danger","text-center"],["for","point","translate","",1,"required","fw-bold","form-label"],["InputTirmFilter","","name","point","type","number","id","point","required","",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[3,"deleteConfirm","dismiss"]],template:function(i,n){if(1&i){const a=e.RV6();e.j41(0,"div",13)(1,"div",14)(2,"div",15)(3,"base-filter",16),e.bIt("reset",function(){return e.eBV(a),e.Njj(n.onReset())})("search",function(){return e.eBV(a),e.Njj(n.onSearch())})("exportXlsx",function(){return e.eBV(a),e.Njj(n.onExportXlsx())})("addNew",function(){e.eBV(a);const r=e.sdS(24);return e.Njj(n.openModalTitle(r,"md"))}),e.qex(4,17),e.j41(5,"div",18)(6,"div",19)(7,"input",20),e.nI1(8,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.nameEn,r)||(n.pagination.nameEn=r),e.Njj(r)}),e.k0s(),e.nrm(9,"i",21),e.k0s()(),e.j41(10,"div",18)(11,"div",19)(12,"input",22),e.nI1(13,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.nameAr,r)||(n.pagination.nameAr=r),e.Njj(r)}),e.k0s(),e.nrm(14,"i",21),e.k0s()(),e.bVm(),e.k0s(),e.j41(15,"div",23)(16,"div",24)(17,"p-table",25,0),e.bIt("onLazyLoad",function(r){return e.eBV(a),e.Njj(n.tableChange(r))})("selectionChange",function(r){return e.eBV(a),e.Njj(n.onSelectionChange(r))}),e.DNE(19,Zn,16,0,"ng-template",26)(20,oi,19,13,"ng-template",27),e.k0s()(),e.DNE(21,ri,2,0,"div",28)(22,li,6,8,"div",29),e.k0s()()()(),e.DNE(23,hi,73,25,"ng-template",null,1,e.C5r)(25,fi,1,0,"ng-template",null,2,e.C5r)}2&i&&(e.R7$(3),e.Y8G("addPermission",e.lJ4(17,Jn))("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(4),e.FS9("placeholder",e.bMT(8,13,"general.table.nameEn")),e.R50("ngModel",n.pagination.nameEn),e.R7$(5),e.FS9("placeholder",e.bMT(13,15,"general.table.nameAr")),e.R50("ngModel",n.pagination.nameAr),e.R7$(5),e.Y8G("value",n.entities)("rows",n.pagination.pageSize)("lazy",!0)("totalRecords",n.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",n.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems>0))},dependencies:[g.bT,c.qT,c.me,c.Q0,c.BC,c.cb,c.YS,c.vS,c.cV,m.s5,D.b,P.w,V.p,L.g,x.m,U.p,_.Mm,C.XI,N.Ei,C.Tg,K.HW,b.Cv,m.md,T.vr,g.vh,_.D9],encapsulation:2})}}return o})();var we=d(4626),qe=d(28203);const bi=()=>[],Ci=()=>["clientReview.edit"],vi=o=>({required:o});function Ri(o,s){1&o&&(e.j41(0,"tr",52)(1,"th",53),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",54),e.nrm(4,"i",55),e.EFF(5," crm.clientReview.clientName "),e.k0s(),e.j41(6,"th",56),e.nrm(7,"i",55),e.EFF(8," crm.clientReview.mobile "),e.k0s(),e.j41(9,"th",57),e.nrm(10,"i",55),e.EFF(11," crm.clientReview.orderId "),e.k0s(),e.j41(12,"th",58),e.nrm(13,"i",55),e.EFF(14," crm.clientReview.questionName "),e.k0s(),e.j41(15,"th",59),e.nrm(16,"i",55),e.EFF(17," crm.clientReview.endStatusName "),e.k0s(),e.j41(18,"th",60),e.nrm(19,"i",55),e.EFF(20," crm.clientReview.actionDoing "),e.k0s(),e.nrm(21,"th",61),e.k0s())}function ji(o,s){if(1&o&&e.EFF(0),2&o){const t=e.XpG().$implicit;e.SpI(" ",t.nameAr," ")}}function Ii(o,s){1&o&&e.nrm(0,"i",73)}function yi(o,s){1&o&&e.nrm(0,"i",74)}function Fi(o,s){if(1&o&&e.EFF(0),2&o){const t=e.XpG().$implicit;e.SpI(" ",t.clientReviewActionDoingName," ")}}function Mi(o,s){if(1&o&&(e.nrm(0,"i",75),e.EFF(1),e.nI1(2,"date"),e.nrm(3,"br")(4,"i",76),e.EFF(5),e.nI1(6,"date"),e.nrm(7,"br")(8,"i",77),e.EFF(9),e.nrm(10,"br")(11,"i",77),e.EFF(12)),2&o){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.i5U(2,4,t.creationTime,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",e.i5U(6,7,t.lastModificationTime,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",t.creatorName,""),e.R7$(3),e.SpI(" ",t.lastModificationName," ")}}function Si(o,s){if(1&o){const t=e.RV6();e.j41(0,"button",78),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,a=e.XpG(),l=e.sdS(69);return e.Njj(a.EditModel(n,l,"lg"))}),e.nrm(1,"i",79)(2,"span",80),e.k0s()}}function Ti(o,s){if(1&o){const t=e.RV6();e.j41(0,"tr",62)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td",63),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),l=e.sdS(71);return e.Njj(a.openModalClient(n.agentCode,l))}),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td",63),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),l=e.sdS(73);return e.Njj(a.openModalClient(n.orderId,l,"xxl"))}),e.EFF(8),e.j41(9,"span",64),e.EFF(10),e.k0s()(),e.DNE(11,ji,1,1,"ng-template",null,4,e.C5r),e.j41(13,"td")(14,"span",65),e.EFF(15),e.nI1(16,"truncate"),e.k0s()(),e.j41(17,"td")(18,"span",66),e.EFF(19),e.nI1(20,"truncate"),e.k0s(),e.DNE(21,Ii,1,0,"i",67)(22,yi,1,0,"i",68),e.j41(23,"span",66),e.EFF(24),e.nI1(25,"truncate"),e.k0s()(),e.DNE(26,Fi,1,1,"ng-template",null,5,e.C5r),e.j41(28,"td")(29,"span",65),e.EFF(30),e.nI1(31,"truncate"),e.k0s()(),e.j41(32,"td"),e.DNE(33,Mi,13,10,"ng-template",null,6,e.C5r),e.j41(35,"span",69)(36,"div",70),e.nrm(37,"i",71),e.DNE(38,Si,3,0,"button",72),e.k0s()()()()}if(2&o){const t=s.$implicit,i=s.rowIndex,n=e.sdS(12),a=e.sdS(27),l=e.sdS(34),r=e.XpG();e.R7$(2),e.JRh(i+1),e.R7$(2),e.JRh(t.clientName),e.R7$(2),e.JRh(t.mobile),e.R7$(2),e.SpI("#SO#",t.orderId," , "),e.R7$(2),e.JRh(t.teamName),e.R7$(4),e.Y8G("ngbTooltip",n),e.R7$(),e.JRh(e.i5U(16,19,t.nameAr,50)),e.R7$(3),e.xc7("background-color",t.startStatusColor),e.R7$(),e.JRh(e.i5U(20,22,t.startStatusName,50)),e.R7$(2),e.Y8G("ngIf","ar"!=r.lang),e.R7$(),e.Y8G("ngIf","ar"==r.lang),e.R7$(),e.xc7("background-color",t.endStatusColor),e.R7$(),e.JRh(e.i5U(25,25,t.endStatusName,50)),e.R7$(5),e.Y8G("ngbTooltip",a),e.R7$(),e.JRh(e.i5U(31,28,t.clientReviewActionDoingName,20)),e.R7$(7),e.Y8G("ngbTooltip",l),e.R7$(),e.Y8G("hasPermission",e.lJ4(31,Ci))}}function ki(o,s){1&o&&(e.j41(0,"div",81),e.EFF(1," general.table.noData"),e.k0s())}function wi(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",82)(1,"div",83),e.nrm(2,"ngb-pagination-info",84),e.j41(3,"table-length",85),e.bIt("lengthChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",86)(5,"ngb-pagination",87),e.bIt("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.pagination.pageNumber,n)||(a.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&o){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function xi(o,s){if(1&o){const t=e.RV6();e.qex(0),e.j41(1,"textarea",112),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG(2);return e.DH7(a.form.value,n)||(a.form.value=n),e.Njj(n)}),e.k0s(),e.bVm()}if(2&o){const t=e.XpG(2);e.R7$(),e.FS9("name","answer_"+t.form.reviewQuestionId),e.R50("ngModel",t.form.value),e.Y8G("required",t.form.isRequired)}}function Ni(o,s){if(1&o){const t=e.RV6();e.qex(0),e.j41(1,"p-rating",113),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG(2);return e.DH7(a.form.value,n)||(a.form.value=n),e.Njj(n)}),e.k0s(),e.bVm()}if(2&o){const t=e.XpG(2);e.R7$(),e.FS9("name","answer_"+t.form.reviewQuestionId),e.Y8G("required",t.form.isRequired),e.R50("ngModel",t.form.value),e.Y8G("stars",t.getLength(t.form.items))("cancel",!1)("disabled",!1)("readonly",!1)}}function Gi(o,s){if(1&o){const t=e.RV6();e.qex(0),e.j41(1,"div",115)(2,"input",116),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG(3);return e.DH7(a.form.value,n)||(a.form.value=n),e.Njj(n)}),e.k0s(),e.j41(3,"label",117),e.EFF(4),e.k0s()(),e.bVm()}if(2&o){const t=s.$implicit,i=e.XpG(3);e.R7$(2),e.FS9("name",i.form.reviewQuestionId),e.FS9("id",t.id),e.Y8G("value",t.id),e.R50("ngModel",i.form.value),e.R7$(),e.FS9("for",t.id),e.R7$(),e.JRh(t.name)}}function Ei(o,s){if(1&o&&(e.qex(0),e.DNE(1,Gi,5,6,"ng-container",114),e.bVm()),2&o){const t=e.XpG(2);e.R7$(),e.Y8G("ngForOf",t.radioItem)}}function Di(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",88)(1,"div",89)(2,"h4",26)(3,"span",90),e.EFF(4),e.k0s(),e.j41(5,"span",91),e.EFF(6),e.k0s(),e.j41(7,"span",92),e.EFF(8),e.k0s(),e.j41(9,"span",93),e.EFF(10),e.k0s(),e.nrm(11,"i",94),e.j41(12,"span",95),e.EFF(13),e.k0s()(),e.j41(14,"button",96),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss("Cross click"))}),e.k0s()(),e.j41(15,"div",97),e.nrm(16,"ngx-ui-loader",45),e.j41(17,"form",98,7),e.bIt("ngSubmit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.OnSubmit())}),e.j41(19,"div",23)(20,"div",24)(21,"div",99)(22,"label",100),e.EFF(23),e.k0s(),e.DNE(24,xi,2,3,"ng-container",101)(25,Ni,2,7,"ng-container",101)(26,Ei,2,1,"ng-container",101),e.k0s(),e.j41(27,"div",99)(28,"label",102),e.EFF(29,"crm.clientReview.endStatusName"),e.k0s(),e.j41(30,"ng-select",103),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.endStatusId,n)||(a.form.endStatusId=n),e.Njj(n)}),e.k0s()(),e.j41(31,"div",99)(32,"label",104),e.EFF(33,"crm.clientReview.actionDoing"),e.k0s(),e.j41(34,"ng-select",105),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.clientReviewActionDoingId,n)||(a.form.clientReviewActionDoingId=n),e.Njj(n)}),e.k0s()(),e.j41(35,"div",99)(36,"label",106),e.EFF(37,"crm.clientReview.note"),e.k0s(),e.j41(38,"textarea",107,8),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.notes,n)||(a.form.notes=n),e.Njj(n)}),e.k0s()()()(),e.j41(40,"div",108)(41,"button",109),e.nrm(42,"i",110)(43,"span",111),e.k0s()()()()()}if(2&o){const t=e.sdS(18),i=e.XpG();e.R7$(4),e.JRh(i.titleOperation),e.R7$(2),e.JRh(i.form.clientName),e.R7$(2),e.SpI("#SO#",i.form.orderId,""),e.R7$(),e.xc7("background-color",i.form.startStatusColor),e.R7$(),e.JRh(i.form.startStatusName),e.R7$(2),e.xc7("background-color",i.form.endStatusColor),e.R7$(),e.JRh(i.form.endStatusName),e.R7$(3),e.Y8G("hasProgressBar",!1)("fgsType",i.loaderOperationShap)("loaderId",i.operationLoader),e.R7$(6),e.Y8G("ngClass",e.eq3(26,vi,i.form.isRequired)),e.R7$(),e.JRh(i.form.questionName),e.R7$(),e.Y8G("ngIf","text"===i.form.questionType),e.R7$(),e.Y8G("ngIf","star"===i.form.questionType),e.R7$(),e.Y8G("ngIf","radio"===i.form.questionType),e.R7$(4),e.Y8G("clearable",!1)("items",i.types)("multiple",!1),e.R50("ngModel",i.form.endStatusId),e.R7$(4),e.Y8G("items",i.actionDoing)("multiple",!1),e.R50("ngModel",i.form.clientReviewActionDoingId),e.R7$(4),e.R50("ngModel",i.form.notes),e.R7$(3),e.Y8G("disabled",!t.valid)}}function Vi(o,s){1&o&&e.nrm(0,"client-profile-main")}function Li(o,s){if(1&o&&e.nrm(0,"order-operation",118),2&o){const t=e.XpG();e.Y8G("isOrderEdit",!1)("isInner",!0)("orderCode",t.clientSelected)}}let Xi=(()=>{class o extends G.w{constructor(t,i,n,a,l,r,h,v,R){super(t,i,h,n,a,l,r),this.baseService=n,this.excelService=v,this.teamService=R,this.title="crm.reviewstatistics.title",this.teams=[],this.cities=[],this.searchForm={dates:{from:null,to:null}},this.titleOperation="crm.clientReview.titleOperation",this.keySelected="",this.assignUsers=[],this.times=[],this.isResolveList=!0,this.clientSelected=0,this.questions=[],this.clients=[],this.names=[],this.counts=[],this.types=[],this.typesF=[],this.namesQuestion=[],this.countQuestion=[],this.actionDoing=[],this.items=[],this.scores=[],this.radioItem=[],this.configRoute(),this.setCurrentMonthRange(),this.getTeam()}getTeam(){this.teamService.getDropDown().subscribe(t=>{this.teams=t.data})}configRoute(){this.routerActive.data.pipe((0,p.Q)(this.notifier)).subscribe(t=>{this.names=t.data.data.names,this.counts=t.data.data.count,this.typesF=t.data.data.types,this.namesQuestion=t.data.data.namesQuestion,this.countQuestion=t.data.data.countQuestion,this.onSearch()},()=>{this.alertService.error()})}setCurrentMonthRange(){const t=new Date,i=new Date(t.getFullYear(),t.getMonth(),1),n=new Date(t.getFullYear(),t.getMonth()+1,0);this.searchForm.dates={from:i,to:n}}ngOnInitMore(){this.clientReviewLookUp(),this._columnWithDataChart('["--vz-success"]'),this._patternedDonutChart('["--vz-primary", "--vz-success", "--vz-warning", "--vz-danger", "--vz-info"]')}clientReviewLookUp(){this.baseService.ClientReviewLookUp().subscribe(t=>{this.clients=t.data.clients,this.types=t.data.types,this.actionDoing=t.data.actionDoing,this.questions=t.data.questions},t=>{console.log(t)})}_columnWithDataChart(t){t=this.getChartColorsArray(t),this.columnWithDataChart={series:[{name:"review",data:this.counts}],chart:{height:350,type:"bar",events:{dataPointSelection:(i,n,a)=>{const r=a.w.config.xaxis.categories[a.dataPointIndex];this.pagination.endStatusId=this.typesF.find(h=>h.nameAr==r||h.nameEn==r)?.id,this.onSearch()}},toolbar:{show:!0}},plotOptions:{bar:{dataLabels:{position:"top"}}},dataLabels:{enabled:!0,formatter:function(i){return i},offsetY:-20,style:{fontSize:"12px",colors:["#adb5bd"]}},colors:t,grid:{borderColor:"#f1f1f1"},xaxis:{categories:this.names,position:"top",labels:{rotate:-90},axisBorder:{show:!0},axisTicks:{show:!0},crosshairs:{fill:{type:"gradient",gradient:{colorFrom:"#D8E3F0",colorTo:"#BED1E6",stops:[0,100],opacityFrom:.4,opacityTo:.5}}},tooltip:{enabled:!0,offsetY:-35}},fill:{gradient:{shade:"light",type:"horizontal",shadeIntensity:.25,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[50,0,100,100]}},yaxis:{axisBorder:{show:!0},axisTicks:{show:!0},labels:{show:!0,formatter:function(i){return i}}},title:{floating:!0,offsetY:320,align:"center",style:{color:"#444",fontWeight:500}}}}getChartColorsArray(t){return(t=JSON.parse(t)).map(function(i){var n=i.replace(" ","");if(-1===n.indexOf(",")){var a=getComputedStyle(document.documentElement).getPropertyValue(n);return a?a=a.replace(" ",""):n}var l=i.split(",");if(2==l.length){var r=getComputedStyle(document.documentElement).getPropertyValue(l[0]);return"rgba("+r+","+l[1]+")"}return n})}openModalClient(t,i,n="xl"){this.clientSelected=t,this.modalService.open(i,{centered:!0,size:n})}onSearch(){this.ngxLoader.startLoader(this.searchLoader),this.filter(),this.loadentities()}onChartDateChange(){this.filter(),this.loadentities(),this.baseService.ClientReviewChartCount(this.pagination).pipe((0,p.Q)(this.notifier)).subscribe(t=>{this.names=[...t.data.names],this.counts=[...t.data.count],this.typesF=[...t.data.types]}),this.columnWithDataChart.series=[{name:"review",data:this.counts}],this.columnWithDataChart.xaxis={...this.columnWithDataChart.xaxis,categories:this.names}}filter(){var t=this.searchForm.dates;t+void 0&&"to"in t?(this.pagination.dateFrom=this.datePipe.transform(t.from,"yyyy-MM-ddT00:00:00.000"),this.pagination.dateTo=this.datePipe.transform(t.to,"yyyy-MM-ddT23:59:59.999")):(this.pagination.dateFrom=null,this.pagination.dateTo=null),this.pagination.teamId=this.searchForm.teamId,this.pagination.questionId=this.searchForm.questionId}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,this.getTranslationText(this.title),[])}mapExcel(){let t=[];return this.entities?.forEach(i=>{t.push({nameAr:i.nameAr,nameEn:i.nameEn,isActive:this.getTranslationText("general.table.active"),notes:i.notes})}),t}openModalTitleS(t,i,n="md"){this.form={clientId:t.agentCode,orderId:t.orderCode,agentName:t.agentName,clientReviewAnswers:[]},this.modalService.open(i,{centered:!0,size:n})}EditModel(t,i,n="md"){this.isEditForm=!0,this.baseService.getById(t.id).pipe((0,p.Q)(this.notifier)).subscribe(a=>{if(a.success){let l=a.data;this.questions=this.questions.filter(r=>r.id==l.reviewQuestionId),null!=l.items&&(this.items=l.items.split(",").map(r=>r.trim()).reverse(),this.scores=l.score.split(","),this.radioItem=this.items.map((r,h)=>({id:this.scores[h],name:r}))),this.form=l}else this.alertService.error("general.message."+a.message);this.modalService.open(i,{centered:!0,size:n})},a=>{this.alertService.error()})}chartDateChange(){}loadentities(){this.countLoad=this.countLoad+1,(!this.isResolveList||1!==this.countLoad)&&(this.ngxLoader.startLoader(this.searchLoader),this.pagination.GetQuestions=!1,this.baseService.get(this.pagination).pipe((0,p.Q)(this.notifier)).subscribe(t=>{this.ngxLoader.stopLoader(this.searchLoader),this.entities=t.data,this.pagination.totalItems=t.totalItems,this.LoadSuccess()},t=>{this.ngxLoader.stopLoader(this.searchLoader),this.alertService.error(t)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[])}getCountReview(){this.ngxLoader.startLoader(this.searchLoader),this.filter(),this.pagination.GetQuestions=!1,this.baseService.ClientReviewChartCount(this.pagination).pipe((0,p.Q)(this.notifier)).subscribe(t=>{this.ngxLoader.stopLoader(this.searchLoader),this.names=t.data.names,this.counts=t.data.count,this._columnWithDataChart('["--vz-success"]')},t=>{this.ngxLoader.stopLoader(this.searchLoader),this.alertService.error(t)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[]}_patternedDonutChart(t){t=this.getChartColorsArray(t),this.patternedDonutChart={series:this.countQuestion,chart:{height:350,type:"donut",dropShadow:{enabled:!0,color:"#111",top:-1,left:3,blur:3,opacity:.2}},stroke:{width:0},plotOptions:{pie:{donut:{labels:{show:!0,total:{showAlways:!0,show:!0}}}}},labels:this.namesQuestion,dataLabels:{dropShadow:{blur:3,opacity:.8}},fill:{type:"pattern",opacity:1,pattern:{style:["verticalLines","squares","horizontalLines","circles","slantedLines"]}},states:{hover:{}},theme:{palette:"palette2"},title:{style:{fontWeight:500}},legend:{position:"bottom"},colors:t}}getLength(t){if(null!=t&&""!==t)return t.split(",").length}mapForm(t){let i={};return i.id=t.id,i.clientReviewActionDoingId=t.clientReviewActionDoingId,i.endStatusId=t.endStatusId,i.note=t.note,i.value=t.value.toString(),i}editEntity(){let t=this.mapForm(this.form);this.baseService.ClientReviewQuestionEdit(t).pipe((0,j.O)(),(0,M.c)(this.mainDelay),(0,y.Z)(),(0,p.Q)(this.notifier),(0,I.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(i=>{i.success?this.submitFunished():this.alertService.error("general.message."+i.message)},i=>{this.alertService.error("general.message."+i)})}static{this.\u0275fac=function(i){return new(i||o)(e.rXU(f.nX),e.rXU(_.c$),e.rXU(ae.Z),e.rXU(F.u),e.rXU(g.vh),e.rXU(b.eD),e.rXU(m.Bq),e.rXU(O.V),e.rXU(Ie.n))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-reviewstatistics"]],features:[e.Vt3],decls:74,vars:92,consts:[["tableMaster",""],["operation",""],["clientProfile",""],["orderModel",""],["nameAr",""],["clientReviewActionDoingName",""],["tooltipContent",""],["formEntity","ngForm"],["notes","ngModel"],[3,"title","breadcrumbItems"],[1,"card"],[1,"card-body"],[1,"row","g-3"],[1,"col-12","col-md-4"],["type","text","mwlFlatpickr","","id","dates","name","dates","mode","range",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"col-12","col-md-3","mb-2"],["name","teamId","name","name","bindValue","code","id","teamId","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],["name","questionId","name","name","bindValue","id","id","questionId","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],[1,"col-md-auto","ms-auto"],[1,"d-flex","hastck","gap-2","flex-wrap"],[1,"btn","btn-success",3,"click"],[1,"ri-add-fill","align-bottom","me-1"],["translate","general.action.search"],[1,"row"],[1,"col-12"],[1,"card-header"],[1,"card-title","mb-0"],["dir","ltr",3,"series","chart","dataLabels","plotOptions","yaxis","xaxis","fill","title","colors"],[1,"d-none","col-12","col-md-6"],["translate","crm.reviewstatistics.qestionCount",1,"card-title","mb-0"],["dir","ltr",3,"series","chart","stroke","plotOptions","labels","dataLabels","fill","states","theme","title","legend","colors"],[1,"col-lg-12"],[1,"card","grid"],[3,"reset","search","exportXlsx","addNew","showAdd","addPermission","totalItems","title"],["control",""],[1,"col-md-2","mb-2"],[1,"search-box"],["type","search","id","filterValue","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["type","search","id","orderId","name","orderId",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"col-12","col-md-2"],[1,"col-12","col-md-2","mb-2"],["name","name","bindValue","id","id","startStatusId","name","startStatusId","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],["name","endStatusId","name","name","bindValue","id","id","endStatusId","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],[1,"col-12","col-md-4","mb-2"],[3,"hasProgressBar","fgsType","loaderId"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["translate","",2,"width",".5%"],["pSortableColumn","clientName","translate","",2,"width","10%"],[1,"ri-expand-up-down-line"],["pSortableColumn","mobile","translate","",2,"width","10%"],["pSortableColumn","orderId","translate","",2,"width","10%"],["pSortableColumn","name","translate","",2,"width","30%"],["pSortableColumn","endStatusId","translate","",2,"width","20%"],["pSortableColumn","clientReviewActionDoingId","translate","",2,"width","10%"],["translate","",2,"width","20%"],[1,"fs-5"],[3,"click"],[1,"bg-primary-subtle","text-primary"],["tooltipPosition","top",3,"ngbTooltip"],[1,"badge","color-crm"],["class","ri-arrow-right-circle-line text-danger mx-1",4,"ngIf"],["class","ri-arrow-left-circle-line text-danger mx-1",4,"ngIf"],[1,"d-inline"],["ngbDropdown","",1,"dropdown"],["tooltipPosition","top",1,"mdi","mdi-cog-outline","d-inline","text-muted","fs-16","align-middle","me-1",3,"ngbTooltip"],["type","button","class","btn btn-sm  btn-primary   btn-label waves-effect waves-light rounded-pill",3,"click",4,"hasPermission"],[1,"ri-arrow-right-circle-line","text-danger","mx-1"],[1,"ri-arrow-left-circle-line","text-danger","mx-1"],[1,"ri-history-fill","text-warning"],[1,"ri-history-fill","text-danger"],[1,"ri-user-location-fill","text-primary"],["type","button",1,"btn","btn-sm","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"click"],[1,"ri-eye-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.view"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],["translate",""],[1,"badge","bg-success-subtle","text-success","mx-2"],[1,"badge","bg-danger-subtle","text-danger","mx-2"],[1,"badge","mx-1","badge","color-crm"],[1,"ri-arrow-right-circle-line","text-danger","mx-2"],[1,"badge","badge","color-crm"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"ngSubmit"],[1,"mb-3"],[1,"fw-bold","form-label","w-100",3,"ngClass"],[4,"ngIf"],["translate","",1,"required","fw-bold","form-label","w-100"],["name","clientReviewFinalResultId","bindValue","id","bindLabel","name",3,"ngModelChange","clearable","items","multiple","ngModel"],["translate","",1,"fw-bold","form-label","w-100"],["name","clientReviewActionDoingId","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","ngModel"],["for","notes","translate","",1,"fw-bold","form-label"],["rows","1","InputTirmFilter","","name","notes","type","text","id","notes",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,"text-center"],["type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],["rows","1","type","text",1,"form-control","fs-6",3,"ngModelChange","name","ngModel","required"],[3,"ngModelChange","required","name","ngModel","stars","cancel","disabled","readonly"],[4,"ngFor","ngForOf"],[1,"form-check","form-check-inline"],["type","radio",1,"form-check-input",3,"ngModelChange","name","id","value","ngModel"],[1,"form-check-label",3,"for"],[3,"isOrderEdit","isInner","orderCode"]],template:function(i,n){if(1&i){const a=e.RV6();e.nrm(0,"app-breadcrumbs",9),e.nI1(1,"translate"),e.j41(2,"div",10)(3,"div",11)(4,"div",12)(5,"div",13)(6,"input",14),e.nI1(7,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.searchForm.dates,r)||(n.searchForm.dates=r),e.Njj(r)}),e.k0s()(),e.j41(8,"div",15)(9,"ng-select",16),e.nI1(10,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.searchForm.teamId,r)||(n.searchForm.teamId=r),e.Njj(r)}),e.k0s()(),e.j41(11,"div",15)(12,"ng-select",17),e.nI1(13,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.searchForm.questionId,r)||(n.searchForm.questionId=r),e.Njj(r)}),e.k0s()(),e.j41(14,"div",18)(15,"div",19)(16,"button",20),e.bIt("click",function(){return e.eBV(a),e.Njj(n.onChartDateChange())}),e.nrm(17,"i",21)(18,"span",22),e.k0s()()()()()(),e.j41(19,"div",23)(20,"div",24)(21,"div",10)(22,"div",25)(23,"h4",26),e.EFF(24),e.nI1(25,"translate"),e.k0s()(),e.j41(26,"div",11),e.nrm(27,"apx-chart",27),e.k0s()()(),e.j41(28,"div",28)(29,"div",10)(30,"div",25),e.nrm(31,"h4",29),e.k0s(),e.j41(32,"div",11),e.nrm(33,"apx-chart",30),e.k0s()()()(),e.j41(34,"div",23)(35,"div",31)(36,"div",32)(37,"base-filter",33),e.bIt("reset",function(){return e.eBV(a),e.Njj(n.onReset())})("search",function(){return e.eBV(a),e.Njj(n.onSearch())})("exportXlsx",function(){return e.eBV(a),e.Njj(n.onExportXlsx())})("addNew",function(){e.eBV(a);const r=e.sdS(69);return e.Njj(n.openModalTitle(r,"xl"))}),e.qex(38,34),e.j41(39,"div",35)(40,"div",36)(41,"input",37),e.nI1(42,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.filterValue,r)||(n.pagination.filterValue=r),e.Njj(r)}),e.k0s(),e.nrm(43,"i",38),e.k0s()(),e.j41(44,"div",35)(45,"input",39),e.nI1(46,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.orderId,r)||(n.pagination.orderId=r),e.Njj(r)}),e.k0s()(),e.j41(47,"div",40)(48,"input",14),e.nI1(49,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.searchForm.dates,r)||(n.searchForm.dates=r),e.Njj(r)}),e.k0s()(),e.j41(50,"div",41)(51,"ng-select",42),e.nI1(52,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.startStatusId,r)||(n.pagination.startStatusId=r),e.Njj(r)}),e.k0s()(),e.j41(53,"div",41)(54,"ng-select",43),e.nI1(55,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.endStatusId,r)||(n.pagination.endStatusId=r),e.Njj(r)}),e.k0s()(),e.j41(56,"div",44)(57,"ng-select",16),e.nI1(58,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.searchForm.teamId,r)||(n.searchForm.teamId=r),e.Njj(r)}),e.k0s()(),e.bVm(),e.k0s(),e.j41(59,"div",11),e.nrm(60,"ngx-ui-loader",45),e.j41(61,"div",46)(62,"p-table",47,0),e.bIt("onLazyLoad",function(r){return e.eBV(a),e.Njj(n.tableChange(r))})("selectionChange",function(r){return e.eBV(a),e.Njj(n.onSelectionChange(r))}),e.DNE(64,Ri,22,0,"ng-template",48)(65,Ti,39,32,"ng-template",49),e.k0s()(),e.DNE(66,ki,2,0,"div",50)(67,wi,6,8,"div",51),e.k0s()()()(),e.DNE(68,Di,44,28,"ng-template",null,1,e.C5r)(70,Vi,1,0,"ng-template",null,2,e.C5r)(72,Li,1,3,"ng-template",null,3,e.C5r)}2&i&&(e.FS9("title",e.bMT(1,69,n.title)),e.Y8G("breadcrumbItems",n.breadCrumbItems),e.R7$(6),e.FS9("placeholder",e.bMT(7,71,"statistics.orderReview.dateReview")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.dates),e.R7$(3),e.FS9("placeholder",e.bMT(10,73,"crm.clientReviewPrice.team")),e.Y8G("items",n.teams)("multiple",!1),e.R50("ngModel",n.searchForm.teamId),e.R7$(3),e.FS9("placeholder",e.bMT(13,75,"crm.reviewstatistics.question")),e.Y8G("items",n.questions)("multiple",!1),e.R50("ngModel",n.searchForm.questionId),e.R7$(12),e.JRh(e.bMT(25,77,n.title)),e.R7$(3),e.Y8G("series",n.columnWithDataChart.series)("chart",n.columnWithDataChart.chart)("dataLabels",n.columnWithDataChart.dataLabels)("plotOptions",n.columnWithDataChart.plotOptions)("yaxis",n.columnWithDataChart.yaxis)("xaxis",n.columnWithDataChart.xaxis)("fill",n.columnWithDataChart.fill)("title",n.columnWithDataChart.title)("colors",n.columnWithDataChart.colors),e.R7$(6),e.Y8G("series",n.patternedDonutChart.series)("chart",n.patternedDonutChart.chart)("stroke",n.patternedDonutChart.stroke)("plotOptions",n.patternedDonutChart.plotOptions)("labels",n.patternedDonutChart.labels)("dataLabels",n.patternedDonutChart.dataLabels)("fill",n.patternedDonutChart.fill)("states",n.patternedDonutChart.states)("theme",n.patternedDonutChart.theme)("title",n.patternedDonutChart.title)("legend",n.patternedDonutChart.legend)("colors",n.patternedDonutChart.colors),e.R7$(4),e.Y8G("showAdd",!1)("addPermission",e.lJ4(91,bi))("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(4),e.FS9("placeholder",e.bMT(42,79,"task.tasklist.subject")),e.R50("ngModel",n.pagination.filterValue),e.R7$(4),e.FS9("placeholder",e.bMT(46,81,"crm.clientReview.orderId")),e.R50("ngModel",n.pagination.orderId),e.R7$(3),e.FS9("placeholder",e.bMT(49,83,"statistics.orderReview.dateReview")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.dates),e.R7$(3),e.FS9("placeholder",e.bMT(52,85,"crm.clientReview.startStatusName")),e.Y8G("items",n.types)("multiple",!1),e.R50("ngModel",n.pagination.startStatusId),e.R7$(3),e.FS9("placeholder",e.bMT(55,87,"crm.clientReview.endStatusName")),e.Y8G("items",n.types)("multiple",!1),e.R50("ngModel",n.pagination.endStatusId),e.R7$(3),e.FS9("placeholder",e.bMT(58,89,"crm.clientReviewPrice.team")),e.Y8G("items",n.teams)("multiple",!1),e.R50("ngModel",n.searchForm.teamId),e.R7$(3),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderSearchShap)("loaderId",n.searchLoader),e.R7$(2),e.Y8G("value",n.entities)("rows",n.pagination.pageSize)("lazy",!0)("totalRecords",n.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",n.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems>0))},dependencies:[g.YU,g.Sq,g.bT,c.qT,c.me,c.Fm,c.BC,c.cb,c.YS,c.vS,c.cV,m.tg,m.s5,B.kL,H.m,D.b,de.L,V.p,L.g,fe.t,x.m,U.p,_.Mm,C.XI,N.Ei,C.Tg,b.Cv,m.md,we.Q,qe.ig,T.vr,je,g.vh,ze.H,_.D9],encapsulation:2})}}return o})(),Oi=(()=>{class o extends pe.d{constructor(t){super(t,W.c.apiUrl+"ClientReviewFinalResult/")}static{this.\u0275fac=function(i){return new(i||o)(e.KVO(ge.Qq))}}static{this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();const Bi=()=>["crmSetting.register"],Pi=()=>["crmSetting.edit"],Ai=()=>["crmSetting.delete"];function $i(o,s){1&o&&(e.j41(0,"tr",28)(1,"th",29),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",30),e.nrm(4,"i",31),e.EFF(5," general.table.nameAr "),e.k0s(),e.j41(6,"th",32),e.nrm(7,"i",31),e.EFF(8," general.table.nameEn "),e.k0s(),e.j41(9,"th",33),e.nrm(10,"i",31),e.EFF(11," crm.clientReviewFinalResult.scoreFrom "),e.k0s(),e.j41(12,"th",33),e.nrm(13,"i",31),e.EFF(14," crm.clientReviewFinalResult.scoreTo "),e.k0s(),e.j41(15,"th",34),e.nrm(16,"i",31),e.EFF(17," general.table.isActive "),e.k0s(),e.nrm(18,"th",35),e.k0s())}function Yi(o,s){1&o&&e.nrm(0,"span",42)}function Ui(o,s){1&o&&e.nrm(0,"span",43)}function Hi(o,s){if(1&o&&(e.nrm(0,"i",44),e.EFF(1),e.nI1(2,"date"),e.nrm(3,"br")(4,"i",45),e.EFF(5),e.nI1(6,"date"),e.nrm(7,"br")(8,"i",46),e.EFF(9)),2&o){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.i5U(2,3,t.createdDate,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",e.i5U(6,6,t.updatedDate,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",t.creatorName," ")}}function zi(o,s){if(1&o){const t=e.RV6();e.j41(0,"button",47),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,a=e.XpG(),l=e.sdS(24);return e.Njj(a.EditModel(n.id,l))}),e.nrm(1,"i",48),e.k0s()}}function Qi(o,s){if(1&o){const t=e.RV6();e.j41(0,"button",49),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,a=e.XpG(),l=e.sdS(26);return e.Njj(a.openModal(n.id,l))}),e.nrm(1,"i",50),e.k0s()}}function qi(o,s){if(1&o&&(e.j41(0,"tr",36)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.k0s(),e.j41(11,"td"),e.DNE(12,Yi,1,0,"span",37)(13,Ui,1,0,"span",38),e.k0s(),e.j41(14,"td"),e.DNE(15,Hi,10,9,"ng-template",null,3,e.C5r),e.nrm(17,"i",39),e.DNE(18,zi,2,0,"button",40)(19,Qi,2,0,"button",41),e.k0s()()),2&o){const t=s.$implicit,i=s.rowIndex,n=e.sdS(16);e.R7$(2),e.JRh(i+1),e.R7$(2),e.JRh(t.nameAr),e.R7$(2),e.JRh(t.nameEn),e.R7$(2),e.JRh(t.scoreFrom),e.R7$(2),e.JRh(t.scoreTo),e.R7$(2),e.Y8G("ngIf",t.isActive),e.R7$(),e.Y8G("ngIf",!t.isActive),e.R7$(4),e.Y8G("ngbTooltip",n),e.R7$(),e.Y8G("hasPermission",e.lJ4(10,Pi)),e.R7$(),e.Y8G("hasPermission",e.lJ4(11,Ai))}}function Ji(o,s){1&o&&(e.j41(0,"div",51),e.EFF(1," general.table.noData"),e.k0s())}function Wi(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",52)(1,"div",53),e.nrm(2,"ngb-pagination-info",54),e.j41(3,"table-length",55),e.bIt("lengthChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",56)(5,"ngb-pagination",57),e.bIt("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.pagination.pageNumber,n)||(a.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&o){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function Ki(o,s){1&o&&(e.j41(0,"span",89),e.EFF(1,"general.action.register "),e.k0s())}function Zi(o,s){1&o&&(e.j41(0,"span",89),e.EFF(1,"general.action.edit "),e.k0s())}function ea(o,s){1&o&&(e.j41(0,"div",90),e.EFF(1," general.message.filedIdRequired"),e.k0s())}function ta(o,s){1&o&&(e.j41(0,"div",90),e.EFF(1," general.message.filedIdRequired"),e.k0s())}function na(o,s){1&o&&(e.j41(0,"div",90),e.EFF(1," general.message.filedIdRequired"),e.k0s())}function ia(o,s){1&o&&(e.j41(0,"div",90),e.EFF(1," general.message.filedIdRequired"),e.k0s())}function aa(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",58)(1,"div",59)(2,"h4",60),e.DNE(3,Ki,2,0,"span",61)(4,Zi,2,0,"span",61),e.j41(5,"span",62),e.EFF(6),e.k0s()(),e.j41(7,"button",63),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss("Cross click"))}),e.k0s()(),e.j41(8,"div",64),e.nrm(9,"ngx-ui-loader",65),e.j41(10,"form",66,4),e.bIt("submit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.OnSubmit())}),e.j41(12,"div",11)(13,"div",67)(14,"label",68),e.EFF(15,"general.table.nameAr"),e.k0s(),e.j41(16,"input",69,5),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.nameAr,n)||(a.form.nameAr=n),e.Njj(n)}),e.k0s(),e.DNE(18,ea,2,0,"div",70),e.k0s(),e.j41(19,"div",67)(20,"label",71),e.EFF(21,"general.table.nameEn"),e.k0s(),e.j41(22,"input",72,6),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.nameEn,n)||(a.form.nameEn=n),e.Njj(n)}),e.k0s(),e.DNE(24,ta,2,0,"div",70),e.k0s(),e.j41(25,"div",73)(26,"label",74),e.EFF(27,"crm.clientReviewFinalResult.scoreFrom"),e.k0s(),e.j41(28,"input",75,7),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.scoreFrom,n)||(a.form.scoreFrom=n),e.Njj(n)}),e.k0s(),e.DNE(30,na,2,0,"div",70),e.k0s(),e.j41(31,"div",73)(32,"label",76),e.EFF(33,"crm.clientReviewFinalResult.scoreTo"),e.k0s(),e.j41(34,"input",77,8),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.scoreTo,n)||(a.form.scoreTo=n),e.Njj(n)}),e.k0s(),e.DNE(36,ia,2,0,"div",70),e.k0s(),e.j41(37,"div",67)(38,"label",78),e.EFF(39,"crm.clientReviewFinalResult.color"),e.k0s(),e.j41(40,"input",79,9),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.color,n)||(a.form.color=n),e.Njj(n)}),e.k0s()(),e.j41(42,"div",67)(43,"label",80),e.EFF(44,"general.table.notes"),e.k0s(),e.j41(45,"input",81,10),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.notes,n)||(a.form.notes=n),e.Njj(n)}),e.k0s()()(),e.j41(47,"div",82)(48,"label",83),e.EFF(49,"general.table.isActive"),e.k0s(),e.j41(50,"p-inputSwitch",84),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.isActive,n)||(a.form.isActive=n),e.Njj(n)}),e.k0s()(),e.j41(51,"div",85)(52,"button",86),e.nrm(53,"i",87)(54,"span",88),e.k0s()()()()()}if(2&o){const t=e.sdS(11),i=e.sdS(17),n=e.sdS(23),a=e.sdS(29),l=e.sdS(35),r=e.XpG();e.R7$(3),e.Y8G("ngIf",!r.isEditForm),e.R7$(),e.Y8G("ngIf",r.isEditForm),e.R7$(2),e.JRh(r.titleOperation),e.R7$(3),e.Y8G("hasProgressBar",!1)("fgsType",r.loaderOperationShap)("loaderId",r.operationLoader),e.R7$(7),e.R50("ngModel",r.form.nameAr),e.R7$(2),e.Y8G("ngIf",i.invalid&&i.touched),e.R7$(4),e.R50("ngModel",r.form.nameEn),e.R7$(2),e.Y8G("ngIf",n.invalid&&n.touched),e.R7$(4),e.R50("ngModel",r.form.scoreFrom),e.R7$(2),e.Y8G("ngIf",a.invalid&&a.touched),e.R7$(4),e.R50("ngModel",r.form.scoreTo),e.R7$(2),e.Y8G("ngIf",l.invalid&&l.touched),e.R7$(4),e.R50("ngModel",r.form.color),e.R7$(5),e.R50("ngModel",r.form.notes),e.R7$(5),e.R50("ngModel",r.form.isActive),e.R7$(2),e.Y8G("disabled",!t.valid)}}function oa(o,s){if(1&o){const t=e.RV6();e.j41(0,"delete-modal",91),e.bIt("deleteConfirm",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.DeleteConfirm())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}}let Je=(()=>{class o extends G.w{constructor(t,i,n,a,l,r,h,v,R){super(t,i,h,n,a,l,r),this.baseService=n,this.excelService=R,this.title="crm.clientReviewFinalResult.title",this.titleOperation="crm.clientReviewFinalResult.titleOperation",this.keySelected="",this.assignUsers=[],this.times=[],this.employees=[],this.searchForm={},this.isResolveList=!0,this.countLoad=2,this.configRoute()}onUpdateIsActive(t){this.baseService.updateActive(t).pipe((0,p.Q)(this.notifier)).subscribe(i=>{i?this.alertService.success():this.alertService.error("general.message."+i)},i=>{this.alertService.error()})}ngOnInitMore(){}mapForm(t){return{...t}}mapRegisterForm(t){let i={...t};return i.id=0,i}OnSearch(t){this.ngxLoader.startLoader(u.a7),this.loadentities()}onSearch(){this.ngxLoader.startLoader(u.a7),this.loadentities()}configRoute(){}mapExcel(){let t=[];return this.entities?.forEach(i=>{t.push({nameAr:i.nameAr,nameEn:i.nameEn,isActive:this.getTranslationText("general.table.active"),notes:i.notes})}),t}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,this.getTranslationText(this.title),[])}editEntity(){let t=this.mapForm(this.form);this.baseService.editPut(t.id,t).pipe((0,j.O)(),(0,M.c)(this.mainDelay),(0,y.Z)(),(0,p.Q)(this.notifier),(0,I.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(i=>{i.success?this.submitFunished():this.alertService.error("general.message."+i.message)},i=>{this.alertService.error("general.message."+i)})}static{this.\u0275fac=function(i){return new(i||o)(e.rXU(f.nX),e.rXU(_.c$),e.rXU(Oi),e.rXU(F.u),e.rXU(g.vh),e.rXU(b.eD),e.rXU(m.Bq),e.rXU(e.gRc),e.rXU(O.V))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["clientReviewFinalResult"]],features:[e.Vt3],decls:27,vars:18,consts:[["tableMaster",""],["operation",""],["deleteModal",""],["tooltipContent",""],["formEntity","ngForm"],["nameAr","ngModel"],["nameEn","ngModel"],["scoreFrom","ngModel"],["scoreTo","ngModel"],["color","ngModel"],["notes","ngModel"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],[3,"reset","search","exportXlsx","addNew","addPermission","totalItems","title"],["control",""],[1,"col-md-3","mb-2"],[1,"search-box"],["type","search","id","filterValue1","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["type","search","id","filterValue2","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["translate","",2,"width",".5%"],["pSortableColumn","nameAr","translate","",2,"width","10%"],[1,"ri-expand-up-down-line"],["pSortableColumn","nameEn","translate","",2,"width","10%"],["pSortableColumn","scoreFrom","translate","",2,"width","5%"],["pSortableColumn","isActive","translate","",2,"width","8%"],["translate","",2,"width","10%"],[1,"fs-5"],["class","badge bg-success-subtle text-success p-2","translate","general.table.active",4,"ngIf"],["class","badge bg-danger-subtle text-danger p-2","translate","general.table.noActive",4,"ngIf"],["tooltipPosition","top",1,"mdi","mdi-cog-outline","text-muted","fs-16","align-middle","me-1",3,"ngbTooltip"],["class","btn btn-sm btn-soft-info edit-list mx-2",3,"click",4,"hasPermission"],["class","btn btn-sm btn-soft-danger remove-list",3,"click",4,"hasPermission"],["translate","general.table.active",1,"badge","bg-success-subtle","text-success","p-2"],["translate","general.table.noActive",1,"badge","bg-danger-subtle","text-danger","p-2"],[1,"ri-history-fill","text-warning"],[1,"ri-history-fill","text-danger"],[1,"ri-user-location-fill","text-primary"],[1,"btn","btn-sm","btn-soft-info","edit-list","mx-2",3,"click"],[1,"ri-pencil-fill","align-bottom","mx-1"],[1,"btn","btn-sm","btn-soft-danger","remove-list",3,"click"],[1,"ri-delete-bin-5-fill","align-bottom"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["class","fw-bold fs-4","translate","",4,"ngIf"],["translate",""],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"hasProgressBar","fgsType","loaderId"],[3,"submit"],[1,"col-12"],["for","nameAr","translate","",1,"required","fw-bold","form-label"],["InputTirmFilter","","name","nameAr","type","text","id","nameAr","required","",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],["for","nameEn","translate","",1,"required","fw-bold","form-label"],["InputTirmFilter","","name","nameEn","type","text","id","nameEn","required","",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,"col-12","col-md-6"],["for","scoreFrom","translate","",1,"required","fw-bold","form-label"],["InputTirmFilter","","name","scoreFrom","type","number","id","scoreFrom","required","",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["for","scoreTo","translate","",1,"required","fw-bold","form-label"],["InputTirmFilter","","name","scoreTo","type","number","id","scoreTo","required","",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["for","color","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","color","type","color","id","color",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["for","notes","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","notes","type","text","id","notes",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,"col-12","form-check"],["for","isActive","translate","",1,"fw-bold","form-label","w-100"],["name","isActive","inputId","isActive",3,"ngModelChange","ngModel"],[1,"text-center"],["type","submit","type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],["translate","",1,"fw-bold","fs-4"],["translate","",1,"text-danger","text-center"],[3,"deleteConfirm","dismiss"]],template:function(i,n){if(1&i){const a=e.RV6();e.j41(0,"div",11)(1,"div",12)(2,"div",13)(3,"base-filter",14),e.bIt("reset",function(){return e.eBV(a),e.Njj(n.onReset())})("search",function(){return e.eBV(a),e.Njj(n.onSearch())})("exportXlsx",function(){return e.eBV(a),e.Njj(n.onExportXlsx())})("addNew",function(){e.eBV(a);const r=e.sdS(24);return e.Njj(n.openModalTitle(r,"md"))}),e.qex(4,15),e.j41(5,"div",16)(6,"div",17)(7,"input",18),e.nI1(8,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.nameEn,r)||(n.pagination.nameEn=r),e.Njj(r)}),e.k0s(),e.nrm(9,"i",19),e.k0s()(),e.j41(10,"div",16)(11,"div",17)(12,"input",20),e.nI1(13,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.nameAr,r)||(n.pagination.nameAr=r),e.Njj(r)}),e.k0s(),e.nrm(14,"i",19),e.k0s()(),e.bVm(),e.k0s(),e.j41(15,"div",21)(16,"div",22)(17,"p-table",23,0),e.bIt("onLazyLoad",function(r){return e.eBV(a),e.Njj(n.tableChange(r))})("selectionChange",function(r){return e.eBV(a),e.Njj(n.onSelectionChange(r))}),e.DNE(19,$i,19,0,"ng-template",24)(20,qi,20,12,"ng-template",25),e.k0s()(),e.DNE(21,Ji,2,0,"div",26)(22,Wi,6,8,"div",27),e.k0s()()()(),e.DNE(23,aa,55,18,"ng-template",null,1,e.C5r)(25,oa,1,0,"ng-template",null,2,e.C5r)}2&i&&(e.R7$(3),e.Y8G("addPermission",e.lJ4(17,Bi))("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(4),e.FS9("placeholder",e.bMT(8,13,"general.table.nameEn")),e.R50("ngModel",n.pagination.nameEn),e.R7$(5),e.FS9("placeholder",e.bMT(13,15,"general.table.nameAr")),e.R50("ngModel",n.pagination.nameAr),e.R7$(5),e.Y8G("value",n.entities)("rows",n.pagination.pageSize)("lazy",!0)("totalRecords",n.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",n.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems>0))},dependencies:[g.bT,c.qT,c.me,c.Q0,c.BC,c.cb,c.YS,c.vS,c.cV,m.s5,D.b,P.w,V.p,L.g,x.m,U.p,_.Mm,C.XI,N.Ei,C.Tg,K.HW,b.Cv,m.md,g.vh,_.D9],encapsulation:2})}}return o})();var xe=d(84205);function ra(o,s){1&o&&(e.j41(0,"tr",25)(1,"th",26),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",27),e.nrm(4,"i",28),e.EFF(5," general.table.nameAr "),e.k0s(),e.j41(6,"th",29),e.nrm(7,"i",28),e.EFF(8," general.table.nameEn "),e.k0s(),e.j41(9,"th",30),e.nrm(10,"i",28),e.EFF(11," crm.clientGroups.clientLimitDefault "),e.k0s(),e.j41(12,"th",31),e.nrm(13,"i",28),e.EFF(14," general.table.isActive "),e.k0s(),e.nrm(15,"th",32),e.k0s())}function la(o,s){1&o&&e.nrm(0,"span",41)}function sa(o,s){1&o&&e.nrm(0,"span",42)}function ca(o,s){if(1&o&&(e.nrm(0,"i",43),e.EFF(1),e.nI1(2,"date"),e.nrm(3,"br")(4,"i",44),e.EFF(5),e.nI1(6,"date"),e.nrm(7,"br")(8,"i",45),e.EFF(9)),2&o){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.i5U(2,3,t.createdDate,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",e.i5U(6,6,t.updatedDate,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",t.creatorName," ")}}function da(o,s){if(1&o){const t=e.RV6();e.j41(0,"tr",33)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.DNE(10,la,1,0,"span",34)(11,sa,1,0,"span",35),e.k0s(),e.j41(12,"td"),e.DNE(13,ca,10,9,"ng-template",null,3,e.C5r),e.nrm(15,"i",36),e.j41(16,"button",37),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),l=e.sdS(24);return e.Njj(a.EditModel(n,l))}),e.nrm(17,"i",38),e.k0s(),e.j41(18,"button",39),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),l=e.sdS(26);return e.Njj(a.openModal(n.id,l))}),e.nrm(19,"i",40),e.k0s()()()}if(2&o){const t=s.$implicit,i=s.rowIndex,n=e.sdS(14);e.R7$(2),e.JRh(i+1),e.R7$(2),e.JRh(t.nameAr),e.R7$(2),e.JRh(t.nameEn),e.R7$(2),e.JRh(t.clientLimitDefault),e.R7$(2),e.Y8G("ngIf",t.isActive),e.R7$(),e.Y8G("ngIf",!t.isActive),e.R7$(4),e.Y8G("ngbTooltip",n)}}function ma(o,s){1&o&&(e.j41(0,"div",46),e.EFF(1," general.table.noData"),e.k0s())}function pa(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",47)(1,"div",48),e.nrm(2,"ngb-pagination-info",49),e.j41(3,"table-length",50),e.bIt("lengthChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",51)(5,"ngb-pagination",52),e.bIt("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.pagination.pageNumber,n)||(a.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&o){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function ga(o,s){1&o&&(e.j41(0,"span",77),e.EFF(1,"general.action.register "),e.k0s())}function _a(o,s){1&o&&(e.j41(0,"span",77),e.EFF(1,"general.action.edit "),e.k0s())}function ua(o,s){1&o&&(e.j41(0,"div",78),e.EFF(1," general.message.filedIdRequired"),e.k0s())}function ha(o,s){1&o&&(e.j41(0,"div",78),e.EFF(1," general.message.filedIdRequired"),e.k0s())}function fa(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",53)(1,"div",54)(2,"h4",55),e.DNE(3,ga,2,0,"span",56)(4,_a,2,0,"span",56),e.j41(5,"span",57),e.EFF(6),e.k0s()(),e.j41(7,"button",58),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss("Cross click"))}),e.k0s()(),e.j41(8,"div",59),e.nrm(9,"ngx-ui-loader",60),e.j41(10,"form",61,4),e.bIt("submit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.OnSubmit())}),e.j41(12,"div",62)(13,"label",63),e.EFF(14,"general.table.nameAr"),e.k0s(),e.j41(15,"input",64,5),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.nameAr,n)||(a.form.nameAr=n),e.Njj(n)}),e.k0s(),e.DNE(17,ua,2,0,"div",65),e.k0s(),e.j41(18,"div",62)(19,"label",66),e.EFF(20,"general.table.nameEn"),e.k0s(),e.j41(21,"input",67,6),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.nameEn,n)||(a.form.nameEn=n),e.Njj(n)}),e.k0s(),e.DNE(23,ha,2,0,"div",65),e.k0s(),e.j41(24,"div",62)(25,"label",68),e.EFF(26,"crm.clientGroups.clientLimitDefault"),e.k0s(),e.j41(27,"input",69,7),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.clientLimitDefault,n)||(a.form.clientLimitDefault=n),e.Njj(n)}),e.k0s()(),e.j41(29,"div",70)(30,"label",71),e.EFF(31,"general.table.isActive"),e.k0s(),e.j41(32,"p-inputSwitch",72),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.isActive,n)||(a.form.isActive=n),e.Njj(n)}),e.k0s()(),e.j41(33,"div",73)(34,"button",74),e.nrm(35,"i",75)(36,"span",76),e.k0s()()()()()}if(2&o){const t=e.sdS(11),i=e.sdS(16),n=e.sdS(22),a=e.XpG();e.R7$(3),e.Y8G("ngIf",!a.isEditForm),e.R7$(),e.Y8G("ngIf",a.isEditForm),e.R7$(2),e.JRh(a.titleOperation),e.R7$(3),e.Y8G("hasProgressBar",!1)("fgsType",a.loaderOperationShap)("loaderId",a.operationLoader),e.R7$(6),e.R50("ngModel",a.form.nameAr),e.R7$(2),e.Y8G("ngIf",i.invalid&&i.touched),e.R7$(4),e.R50("ngModel",a.form.nameEn),e.R7$(2),e.Y8G("ngIf",n.invalid&&n.touched),e.R7$(4),e.R50("ngModel",a.form.clientLimitDefault),e.R7$(5),e.R50("ngModel",a.form.isActive),e.R7$(2),e.Y8G("disabled",!t.valid)}}function ba(o,s){if(1&o){const t=e.RV6();e.j41(0,"delete-modal",79),e.bIt("deleteConfirm",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.DeleteConfirmSoft())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}}let Ca=(()=>{class o extends G.w{constructor(t,i,n,a,l,r,h,v,R){super(t,i,h,n,a,l,r),this.baseService=n,this.excelService=R,this.title="crm.clientGroups.title",this.titleOperation="crm.clientGroups.titleOperation",this.keySelected="",this.assignUsers=[],this.times=[],this.employees=[],this.searchForm={},this.isResolveList=!0,this.countLoad=2,this.configRoute()}onUpdateIsActive(t){this.baseService.updateActive(t).pipe((0,p.Q)(this.notifier)).subscribe(i=>{i?this.alertService.success():this.alertService.error("general.message."+i)},i=>{this.alertService.error()})}ngOnInitMore(){}mapForm(t){return{...t}}mapRegisterForm(t){let i={...t};return i.id=0,i}OnSearch(t){this.ngxLoader.startLoader(u.a7),this.loadentities()}onSearch(){this.ngxLoader.startLoader(u.a7),this.loadentities()}configRoute(){}EditModel(t,i,n="md"){this.isEditForm=!0,this.form=t,this.modalService.open(i,{centered:!0,size:n})}mapExcel(){let t=[];return this.entities?.forEach(i=>{t.push({nameAr:i.nameAr,nameEn:i.nameEn,isActive:this.getTranslationText("general.table.active"),notes:i.notes})}),t}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,this.getTranslationText(this.title),[])}editEntity(){let t=this.mapForm(this.form);this.baseService.editPut(t.id,t).pipe((0,j.O)(),(0,M.c)(this.mainDelay),(0,y.Z)(),(0,p.Q)(this.notifier),(0,I.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(i=>{i.success?this.submitFunished():this.alertService.error("general.message."+i.message)},i=>{this.alertService.error("general.message."+i)})}static{this.\u0275fac=function(i){return new(i||o)(e.rXU(f.nX),e.rXU(_.c$),e.rXU(xe.t),e.rXU(F.u),e.rXU(g.vh),e.rXU(b.eD),e.rXU(m.Bq),e.rXU(e.gRc),e.rXU(O.V))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-client-groups"]],features:[e.Vt3],decls:27,vars:16,consts:[["tableMaster",""],["operation",""],["deleteModal",""],["tooltipContent",""],["formEntity","ngForm"],["nameAr","ngModel"],["nameEn","ngModel"],["clientLimitDefault","ngModel"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],[3,"reset","search","exportXlsx","addNew","totalItems","title"],["control",""],[1,"col-md-3","mb-2"],[1,"search-box"],["type","search","id","filterValue1","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["type","search","id","filterValue2","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["translate","",2,"width",".5%"],["pSortableColumn","nameAr","translate","",2,"width","10%"],[1,"ri-expand-up-down-line"],["pSortableColumn","nameEn","translate","",2,"width","10%"],["pSortableColumn","clientLimitDefault","translate","",2,"width","10%"],["pSortableColumn","isActive","translate","",2,"width","8%"],["translate","",2,"width","10%"],[1,"fs-5"],["class","badge bg-success-subtle text-success p-2","translate","general.table.active",4,"ngIf"],["class","badge bg-danger-subtle text-danger p-2","translate","general.table.noActive",4,"ngIf"],["tooltipPosition","top",1,"mdi","mdi-cog-outline","text-muted","fs-16","align-middle","me-1",3,"ngbTooltip"],[1,"btn","btn-sm","btn-soft-info","edit-list","mx-2",3,"click"],[1,"ri-pencil-fill","align-bottom","mx-1"],[1,"btn","btn-sm","btn-soft-danger","remove-list",3,"click"],[1,"ri-delete-bin-5-fill","align-bottom"],["translate","general.table.active",1,"badge","bg-success-subtle","text-success","p-2"],["translate","general.table.noActive",1,"badge","bg-danger-subtle","text-danger","p-2"],[1,"ri-history-fill","text-warning"],[1,"ri-history-fill","text-danger"],[1,"ri-user-location-fill","text-primary"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["class","fw-bold fs-4","translate","",4,"ngIf"],["translate",""],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"hasProgressBar","fgsType","loaderId"],[3,"submit"],[1,"mb-3"],["for","nameAr","translate","",1,"required","fw-bold","form-label"],["InputTirmFilter","","name","nameAr","type","text","id","nameAr","required","",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],["for","nameEn","translate","",1,"required","fw-bold","form-label"],["InputTirmFilter","","name","nameEn","type","text","id","nameEn","required","",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["for","clientLimitDefault","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","clientLimitDefault","type","number","id","clientLimitDefault",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,"col-12","form-check"],["for","isActive","translate","",1,"fw-bold","form-label","w-100"],["name","isActive","inputId","isActive",3,"ngModelChange","ngModel"],[1,"text-center"],["type","submit","type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],["translate","",1,"fw-bold","fs-4"],["translate","",1,"text-danger","text-center"],[3,"deleteConfirm","dismiss"]],template:function(i,n){if(1&i){const a=e.RV6();e.j41(0,"div",8)(1,"div",9)(2,"div",10)(3,"base-filter",11),e.bIt("reset",function(){return e.eBV(a),e.Njj(n.onReset())})("search",function(){return e.eBV(a),e.Njj(n.onSearch())})("exportXlsx",function(){return e.eBV(a),e.Njj(n.onExportXlsx())})("addNew",function(){e.eBV(a);const r=e.sdS(24);return e.Njj(n.openModalTitle(r,"md"))}),e.qex(4,12),e.j41(5,"div",13)(6,"div",14)(7,"input",15),e.nI1(8,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.nameEn,r)||(n.pagination.nameEn=r),e.Njj(r)}),e.k0s(),e.nrm(9,"i",16),e.k0s()(),e.j41(10,"div",13)(11,"div",14)(12,"input",17),e.nI1(13,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.nameAr,r)||(n.pagination.nameAr=r),e.Njj(r)}),e.k0s(),e.nrm(14,"i",16),e.k0s()(),e.bVm(),e.k0s(),e.j41(15,"div",18)(16,"div",19)(17,"p-table",20,0),e.bIt("onLazyLoad",function(r){return e.eBV(a),e.Njj(n.tableChange(r))})("selectionChange",function(r){return e.eBV(a),e.Njj(n.onSelectionChange(r))}),e.DNE(19,ra,16,0,"ng-template",21)(20,da,20,7,"ng-template",22),e.k0s()(),e.DNE(21,ma,2,0,"div",23)(22,pa,6,8,"div",24),e.k0s()()()(),e.DNE(23,fa,37,13,"ng-template",null,1,e.C5r)(25,ba,1,0,"ng-template",null,2,e.C5r)}2&i&&(e.R7$(3),e.Y8G("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(4),e.FS9("placeholder",e.bMT(8,12,"general.table.nameEn")),e.R50("ngModel",n.pagination.nameEn),e.R7$(5),e.FS9("placeholder",e.bMT(13,14,"general.table.nameAr")),e.R50("ngModel",n.pagination.nameAr),e.R7$(5),e.Y8G("value",n.entities)("rows",n.pagination.pageSize)("lazy",!0)("totalRecords",n.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",n.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems>0))},dependencies:[g.bT,c.qT,c.me,c.Q0,c.BC,c.cb,c.YS,c.vS,c.cV,m.s5,D.b,P.w,V.p,L.g,x.m,_.Mm,C.XI,N.Ei,C.Tg,K.HW,b.Cv,m.md,g.vh,_.D9],encapsulation:2})}}return o})();function va(o,s){1&o&&e.nrm(0,"reviewQuestion")}function Ra(o,s){1&o&&e.nrm(0,"clientReviewFinalResult")}function ja(o,s){1&o&&e.nrm(0,"clientReviewActionDoing")}function Ia(o,s){1&o&&e.nrm(0,"app-client-groups")}let ya=(()=>{class o{constructor(){this.title="crm.crmSetting.title"}ngOnInit(){this.breadCrumbItems=[]}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["crm-setting"]],decls:33,vars:10,consts:[["Arrow","ngbNav"],[3,"title","breadcrumbItems"],[1,"col-12"],[1,"card"],[1,"card-body"],["ngbNav","",1,"nav","nav-pills","arrow-navtabs","nav-success","bg-light","mb-3",3,"activeId"],[3,"ngbNavItem"],["ngbNavLink",""],[1,"d-block","d-sm-none"],[1,"mdi","mdi-home-variant"],["translate","crm.reviewQuestion.title",1,"d-sm-block"],["ngbNavContent",""],[1,"mdi","mdi-account"],["translate","crm.clientReviewFinalResult.title",1,"d-sm-block"],["translate","crm.clientReviewActionDoing.title",1,"d-sm-block"],["translate","crm.clientGroups.title",1,"d-sm-block"],[1,"tab-content","text-muted"],[3,"ngbNavOutlet"]],template:function(i,n){if(1&i&&(e.nrm(0,"app-breadcrumbs",1),e.nI1(1,"translate"),e.j41(2,"div",2)(3,"div",3)(4,"div",4)(5,"ul",5,0)(7,"li",6)(8,"a",7)(9,"span",8),e.nrm(10,"i",9),e.k0s(),e.nrm(11,"span",10),e.k0s(),e.DNE(12,va,1,0,"ng-template",11),e.k0s(),e.j41(13,"li",6)(14,"a",7)(15,"span",8),e.nrm(16,"i",12),e.k0s(),e.nrm(17,"span",13),e.k0s(),e.DNE(18,Ra,1,0,"ng-template",11),e.k0s(),e.j41(19,"li",6)(20,"a",7)(21,"span",8),e.nrm(22,"i",12),e.k0s(),e.nrm(23,"span",14),e.k0s(),e.DNE(24,ja,1,0,"ng-template",11),e.k0s(),e.j41(25,"li",6)(26,"a",7)(27,"span",8),e.nrm(28,"i",12),e.k0s(),e.nrm(29,"span",15),e.k0s(),e.DNE(30,Ia,1,0,"ng-template",11),e.k0s()(),e.j41(31,"div",16),e.nrm(32,"div",17),e.k0s()()()()),2&i){const a=e.sdS(6);e.FS9("title",e.bMT(1,8,n.title)),e.Y8G("breadcrumbItems",n.breadCrumbItems),e.R7$(5),e.Y8G("activeId",1),e.R7$(2),e.Y8G("ngbNavItem",1),e.R7$(6),e.Y8G("ngbNavItem",2),e.R7$(6),e.Y8G("ngbNavItem",3),e.R7$(6),e.Y8G("ngbNavItem",4),e.R7$(7),e.Y8G("ngbNavOutlet",a)}},dependencies:[m.Um,m.X9,m.sy,m.Gx,m.Ri,m.WA,m.m_,H.m,_.Mm,Be,Qe,Je,Ca,_.D9],encapsulation:2})}}return o})();var oe=d(56131);let Fa=(()=>{class o extends oe.E{constructor(t,i,n){super(t,i,n)}static{this.\u0275fac=function(i){return new(i||o)(e.KVO(f.Ix),e.KVO(ae.Z),e.KVO(F.u))}}static{this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var ye=d(21413),z=d(75922);function Ma(o,s){1&o&&(e.j41(0,"div",43),e.EFF(1," general.message.filedIdRequired"),e.k0s())}function Sa(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",23)(1,"div",24)(2,"label",25),e.EFF(3,"client.client.name"),e.k0s(),e.j41(4,"input",26,2),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.agentName,n)||(a.form.agentName=n),e.Njj(n)}),e.k0s(),e.DNE(6,Ma,2,0,"div",27),e.k0s(),e.j41(7,"div",24)(8,"label",28),e.EFF(9,"client.client.mobile"),e.k0s(),e.j41(10,"input",29,3),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.mobile,n)||(a.form.mobile=n),e.Njj(n)}),e.k0s()(),e.j41(12,"div",24)(13,"label",30),e.EFF(14,"client.client.email"),e.k0s(),e.j41(15,"input",31,4),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.email,n)||(a.form.email=n),e.Njj(n)}),e.k0s()(),e.j41(17,"div",24)(18,"label",32),e.EFF(19,"client.client.status"),e.k0s(),e.j41(20,"ng-select",33),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.agentAddStatusCode,n)||(a.form.agentAddStatusCode=n),e.Njj(n)}),e.k0s()(),e.j41(21,"div",24)(22,"label",32),e.EFF(23,"client.client.cityName"),e.k0s(),e.j41(24,"ng-select",34),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.cityCode,n)||(a.form.cityCode=n),e.Njj(n)}),e.k0s()(),e.j41(25,"div",24)(26,"label",32),e.EFF(27,"client.client.channelName"),e.k0s(),e.j41(28,"ng-select",35),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.channelCode,n)||(a.form.channelCode=n),e.Njj(n)}),e.k0s()(),e.j41(29,"div",24)(30,"label",36),e.EFF(31,"client.client.clientGroup"),e.k0s(),e.j41(32,"ng-select",37),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.clientGroupId,n)||(a.form.clientGroupId=n),e.Njj(n)}),e.k0s()(),e.j41(33,"div",24)(34,"label",38),e.EFF(35,"client.client.note"),e.k0s(),e.j41(36,"input",39,5),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.notes,n)||(a.form.notes=n),e.Njj(n)}),e.k0s()(),e.j41(38,"div",40)(39,"label",41),e.EFF(40,"general.table.isActive"),e.k0s(),e.j41(41,"p-inputSwitch",42),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.isActive,n)||(a.form.isActive=n),e.Njj(n)}),e.k0s()()()}if(2&o){const t=e.sdS(5),i=e.XpG();e.R7$(4),e.R50("ngModel",i.form.agentName),e.R7$(2),e.Y8G("ngIf",t.invalid&&t.touched),e.R7$(4),e.R50("ngModel",i.form.mobile),e.R7$(5),e.R50("ngModel",i.form.email),e.R7$(5),e.Y8G("items",i.status)("multiple",!1),e.R50("ngModel",i.form.agentAddStatusCode),e.R7$(4),e.Y8G("items",i.cities)("multiple",!1),e.R50("ngModel",i.form.cityCode),e.R7$(4),e.Y8G("items",i.channels)("multiple",!1),e.R50("ngModel",i.form.channelCode),e.R7$(4),e.Y8G("items",i.groups)("multiple",!1),e.R50("ngModel",i.form.clientGroupId),e.R7$(4),e.R50("ngModel",i.form.notes),e.R7$(5),e.R50("ngModel",i.form.isActive)}}let We=(()=>{class o{constructor(t,i,n,a,l,r,h,v,R){this.routerActive=t,this.translateService=i,this.baseService=n,this.clientGroupService=a,this.alertService=l,this.datePipe=r,this.modalService=h,this.ngxLoader=v,this.router=R,this.editEmployee="client.client.editClient",this.addEmployee="client.client.addClient",this.titleOperation="client.client.titleOperation",this.keySelected="",this.assignUsers=[],this.times=[],this.shifts=[],this.searchForm="",this.jobTypes=[],this.weekDays=[],this.breadCrumbItems=[],this.form={clientContacts:[],agentCode:0},this.lang=this.translateService.currentLang,this.idForm=0,this.isResolveList=!0,this.employeeGroups=[],this.notifier=new ye.B,this.mainDelay=100,this.loaderSearchShap=u.cX,this.loaderOperationShap=u.$$,this.operationLoader=u.ZW,this.isEditForm=!1,this.channels=[],this.cities=[],this.status=[],this.groups=[],this.clientTypes=[{id:0,name:"Individual"},{id:1,name:"Company"}]}ngOnDestroy(){this.notifier.next(),this.notifier.complete()}ngOnInit(){this.GetAgentLookUps(),this.ClientGroupDropDown(),this.configRoute(),this.breadCrumbItems=[{label:"layout.sidebar.client"},{label:"client.client.title",active:!0,url:"crm/client-list"},{label:this.isEditForm?"general.action.edit":"general.action.register",active:!0}],this.clientTypes.forEach(t=>{t.name=this.getTranslationText("client.client."+t.name)})}configRoute(){this.routerActive.data.pipe((0,p.Q)(this.notifier)).subscribe(t=>{let i=t.data.data;i&&(this.isEditForm=!0,this.form=i)},()=>{this.alertService.error()})}GetAgentLookUps(){this.baseService.GetAgentLookUps().subscribe(t=>{this.channels=t.data.channels,this.cities=t.data.cities,this.status=t.data.status},t=>{console.log(t)})}ClientGroupDropDown(){this.clientGroupService.getDropDown().subscribe(t=>{this.groups=t.data},t=>{console.log(t)})}OnSubmit(){this.ngxLoader.startLoader(this.operationLoader),!0===this.isEditForm?this.editEntity():this.registerEntity()}mapForm(t){let i={...t};return i.id=i.agentCode,i.clientType=0,i}mapRegisterForm(t){let i={...t};return i.agentCode=0,i.clientType=0,i}registerEntity(){this.ngxLoader.startLoader(u.ZW);let t=this.mapRegisterForm(this.form);this.baseService.register(t).pipe((0,j.O)(),(0,M.c)(this.mainDelay),(0,y.Z)(),(0,p.Q)(this.notifier),(0,I.j)(()=>this.ngxLoader.stopLoader(u.ZW)),(0,q.W)(i=>(0,ce.$)(i))).subscribe(i=>{i.success?(this.alertService.success(),this.router.navigateByUrl("/crm/client-list")):this.alertService.error("general.message."+i.message)},i=>{this.alertService.error("general.message."+i)})}editEntity(){this.ngxLoader.startLoader(u.ZW);let t=this.mapForm(this.form);this.baseService.editPut(t.id,t).pipe((0,j.O)(),(0,M.c)(this.mainDelay),(0,y.Z)(),(0,p.Q)(this.notifier),(0,I.j)(()=>this.ngxLoader.stopLoader(u.ZW))).subscribe(i=>{i.success?this.alertService.success():this.alertService.error("general.message."+i.message)},i=>{this.alertService.error("general.message."+i)})}getTranslationText(t){let i="";return this.translateService.get(t).pipe((0,p.Q)(this.notifier)).subscribe(n=>{i=n}),i}removeItem(t){this.form.clientContacts.splice(t,1)}addItem(){this.form.clientContacts.push({id:0,clientId:this.form.agentCode??0,name:"",title:"",email:"",phone:""})}static{this.\u0275fac=function(i){return new(i||o)(e.rXU(f.nX),e.rXU(_.c$),e.rXU(z.X),e.rXU(xe.t),e.rXU(F.u),e.rXU(g.vh),e.rXU(m.Bq),e.rXU(b.eD),e.rXU(f.Ix))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-client-operation"]],decls:20,vars:10,consts:[["formEntity","ngForm"],["ModifierCustom","ngbNav"],["agentName","ngModel"],["mobile","ngModel"],["email","ngModel"],["notes","ngModel"],[3,"title","breadcrumbItems"],[1,"col-12"],[1,"card"],[3,"hasProgressBar","fgsType","loaderId"],[3,"ngSubmit"],[1,"card-body"],["ngbNav","",1,"nav","nav-pills","nav-customs","nav-danger","mb-3",3,"activeId"],[3,"ngbNavItem"],["ngbNavLink","","translate","hr.employee.basicInfo",1,"nav-link"],["ngbNavContent",""],[1,"tab-content","text-muted"],[3,"ngbNavOutlet"],[1,"card-footer"],[1,"text-center"],["type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],[1,"row"],[1,"col-12","col-md-6","mb-2"],["for","name","translate","",1,"required","fw-bold","form-label"],["InputTirmFilter","","name","agentName","type","text","id","agentName","required","",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],["for","mobile","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","mobile","type","number","id","mobile",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["for","email","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","email","type","email","id","email",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["translate","",1,"required","fw-bold","form-label","w-100"],["name","agentAddStatusCode","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","ngModel"],["name","cityCode","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","ngModel"],["name","channelCode","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","ngModel"],["translate","",1,"fw-bold","form-label","w-100"],["name","clientGroupId","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","ngModel"],["for","notes","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","notes","type","text","id","notes",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,"col-12","col-md-6","form-check","mb-2"],["for","isActive","translate","",1,"fw-bold","form-label","w-100"],["name","isActive","inputId","isActive",3,"ngModelChange","ngModel"],["translate","",1,"text-danger","text-center"]],template:function(i,n){if(1&i){const a=e.RV6();e.nrm(0,"app-breadcrumbs",6),e.nI1(1,"translate"),e.j41(2,"div",7)(3,"div",8),e.nrm(4,"ngx-ui-loader",9),e.j41(5,"form",10,0),e.bIt("ngSubmit",function(){return e.eBV(a),e.Njj(n.OnSubmit())}),e.j41(7,"div",11)(8,"ul",12,1)(10,"li",13),e.nrm(11,"a",14),e.DNE(12,Sa,42,18,"ng-template",15),e.k0s()(),e.j41(13,"div",16),e.nrm(14,"div",17),e.k0s()(),e.j41(15,"div",18)(16,"div",19)(17,"button",20),e.nrm(18,"i",21)(19,"span",22),e.k0s()()()()()()}if(2&i){const a=e.sdS(9);e.FS9("title",0==n.isEditForm?n.addEmployee:e.bMT(1,8,n.editEmployee)),e.Y8G("breadcrumbItems",n.breadCrumbItems),e.R7$(4),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderOperationShap)("loaderId",n.operationLoader),e.R7$(4),e.Y8G("activeId",1),e.R7$(2),e.Y8G("ngbNavItem",1),e.R7$(4),e.Y8G("ngbNavOutlet",a)}},dependencies:[g.bT,c.qT,c.me,c.Q0,c.BC,c.cb,c.YS,c.vS,c.cV,m.Um,m.X9,m.sy,m.Gx,m.Ri,m.WA,m.m_,H.m,x.m,_.Mm,K.HW,b.Cv,T.vr,_.D9],encapsulation:2})}}return o})();var re=d(7673);let Ke=(()=>{class o{constructor(t,i,n){this.router=t,this.clientService=i,this.alertService=n}resolve(t,i){const a=this.router.getCurrentNavigation()?.extras?.state?.id;return""===a?(this.alertService.error(),this.router.navigateByUrl("/items"),(0,re.of)(null)):this.clientService.GetForEditById(a)}static{this.\u0275fac=function(i){return new(i||o)(e.KVO(f.Ix),e.KVO(z.X),e.KVO(F.u))}}static{this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();function Ta(o,s){1&o&&(e.j41(0,"div",44),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function ka(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",27)(1,"div",28)(2,"label",29),e.EFF(3,"crm.leads.name"),e.k0s(),e.j41(4,"input",30,2),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.name,n)||(a.form.name=n),e.Njj(n)}),e.k0s(),e.DNE(6,Ta,2,0,"div",31),e.k0s(),e.j41(7,"div",28)(8,"label",32),e.EFF(9,"crm.leads.mobile"),e.k0s(),e.j41(10,"input",33,3),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.mobile,n)||(a.form.mobile=n),e.Njj(n)}),e.k0s()(),e.j41(12,"div",28)(13,"label",34),e.EFF(14,"crm.leads.email"),e.k0s(),e.j41(15,"input",35,4),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.email,n)||(a.form.email=n),e.Njj(n)}),e.k0s()(),e.j41(17,"div",28)(18,"label",36),e.EFF(19,"crm.leads.leadType"),e.k0s(),e.j41(20,"ng-select",37),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.leadsTypes,n)||(a.form.leadsTypes=n),e.Njj(n)}),e.k0s()(),e.j41(21,"div",28)(22,"label",36),e.EFF(23,"crm.leads.cityName"),e.k0s(),e.j41(24,"ng-select",38),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.cityId,n)||(a.form.cityId=n),e.Njj(n)}),e.k0s()(),e.j41(25,"div",28)(26,"label",36),e.EFF(27,"crm.leads.channelName"),e.k0s(),e.j41(28,"ng-select",39),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.channelId,n)||(a.form.channelId=n),e.Njj(n)}),e.k0s()(),e.j41(29,"div",28)(30,"label",40),e.EFF(31,"crm.leads.vIPNumber"),e.k0s(),e.j41(32,"input",41,5),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.vipNumber,n)||(a.form.vipNumber=n),e.Njj(n)}),e.k0s()(),e.j41(34,"div",28)(35,"label",42),e.EFF(36,"crm.leads.discuontPercentage"),e.k0s(),e.j41(37,"input",43,6),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.discuontPercentage,n)||(a.form.discuontPercentage=n),e.Njj(n)}),e.k0s()()()}if(2&o){const t=e.sdS(5),i=e.XpG();e.R7$(4),e.R50("ngModel",i.form.name),e.R7$(2),e.Y8G("ngIf",t.invalid&&t.touched),e.R7$(4),e.R50("ngModel",i.form.mobile),e.R7$(5),e.R50("ngModel",i.form.email),e.R7$(5),e.Y8G("items",i.leadTypes)("multiple",!1),e.R50("ngModel",i.form.leadsTypes),e.R7$(4),e.Y8G("items",i.cities)("multiple",!1),e.R50("ngModel",i.form.cityId),e.R7$(4),e.Y8G("items",i.channels)("multiple",!1),e.R50("ngModel",i.form.channelId),e.R7$(4),e.R50("ngModel",i.form.vipNumber),e.R7$(5),e.R50("ngModel",i.form.discuontPercentage)}}let Ze=(()=>{class o{constructor(t,i,n,a,l,r,h,v){this.routerActive=t,this.translateService=i,this.baseService=n,this.alertService=a,this.datePipe=l,this.modalService=r,this.ngxLoader=h,this.router=v,this.editLeads="crm.leads.editLeads",this.addLeads="crm.leads.addLeads",this.titleOperation="crm.client.titleOperation",this.keySelected="",this.assignUsers=[],this.times=[],this.shifts=[],this.searchForm="",this.jobTypes=[],this.weekDays=[],this.breadCrumbItems=[],this.form={},this.idForm=0,this.isResolveList=!0,this.employeeGroups=[],this.notifier=new ye.B,this.mainDelay=100,this.loaderSearchShap=u.cX,this.loaderOperationShap=u.$$,this.operationLoader=u.ZW,this.isEditForm=!1,this.channels=[],this.cities=[],this.leadTypes=[]}ngOnDestroy(){this.notifier.next(),this.notifier.complete()}ngOnInit(){this.GetAgentLookUps(),this.configRoute(),this.breadCrumbItems=[{label:"layout.sidebar.leads"},{label:"crm.leads.title",active:!0,url:"crm/leads"},{label:this.isEditForm?"general.action.edit":"general.action.register",active:!0}]}configRoute(){this.routerActive.data.pipe((0,p.Q)(this.notifier)).subscribe(t=>{let i=t.data.data;i&&(this.isEditForm=!0,this.form=i,"Proposed"==i.leadsTypes?this.form.leadsTypes=1:"Inquiry"==i.leadsTypes&&(this.form.leadsTypes=2))},()=>{this.alertService.error()})}GetAgentLookUps(){this.baseService.GetLeadsLookUps().subscribe(t=>{this.channels=t.data.channels,this.cities=t.data.cityNames,this.leadTypes=t.data.leadTypes},t=>{console.log(t)})}OnSubmit(){this.ngxLoader.startLoader(this.operationLoader),!0===this.isEditForm?this.editEntity():this.registerEntity()}mapRegisterForm(t){let i={...t};return i.id=0,i}registerEntity(){this.ngxLoader.startLoader(u.ZW);let t=this.mapRegisterForm(this.form);this.baseService.register(t).pipe((0,j.O)(),(0,M.c)(this.mainDelay),(0,y.Z)(),(0,p.Q)(this.notifier),(0,I.j)(()=>this.ngxLoader.stopLoader(u.ZW)),(0,q.W)(i=>(0,ce.$)(i))).subscribe(i=>{i.success?(this.alertService.success(),this.router.navigateByUrl("/crm/leads")):this.alertService.error("general.message."+i.message)},i=>{this.alertService.error("general.message."+i)})}editEntity(){this.baseService.editPut(this.form.id,this.form).pipe((0,j.O)(),(0,M.c)(this.mainDelay),(0,y.Z)(),(0,p.Q)(this.notifier),(0,I.j)(()=>this.ngxLoader.stopLoader(u.ZW))).subscribe(t=>{t.success?this.alertService.success():this.alertService.error("general.message."+t.message)},t=>{this.alertService.error("general.message."+t)})}getTranslationText(t){let i="";return this.translateService.get(t).pipe((0,p.Q)(this.notifier)).subscribe(n=>{i=n}),i}onBack(){this.router.navigateByUrl("/crm/leads")}static{this.\u0275fac=function(i){return new(i||o)(e.rXU(f.nX),e.rXU(_.c$),e.rXU(ve),e.rXU(F.u),e.rXU(g.vh),e.rXU(m.Bq),e.rXU(b.eD),e.rXU(f.Ix))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-leads-operation"]],decls:23,vars:10,consts:[["formEntity","ngForm"],["ModifierCustom","ngbNav"],["name","ngModel"],["mobile","ngModel"],["email","ngModel"],["vipNumber","ngModel"],["discuontPercentage","ngModel"],[3,"title","breadcrumbItems"],[1,"col-12"],[1,"card"],[3,"hasProgressBar","fgsType","loaderId"],[3,"ngSubmit"],[1,"card-body"],["ngbNav","",1,"nav","nav-pills","nav-customs","nav-danger","mb-3",3,"activeId"],[3,"ngbNavItem"],["ngbNavLink","","translate","hr.employee.basicInfo",1,"nav-link"],["ngbNavContent",""],[1,"tab-content","text-muted"],[3,"ngbNavOutlet"],[1,"card-footer"],[1,"text-center"],["type","button",1,"mx-2","btn","btn-danger","btn-label","waves-effect","waves-light","rounded-pill",3,"click"],[1,"ri-arrow-left-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.back"],["type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],[1,"row"],[1,"col-12","col-md-6","mb-3"],["for","name","translate","",1,"required","fw-bold","form-label"],["InputTirmFilter","","name","name","type","text","id","name","required","",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],["for","mobile","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","mobile","type","text","id","mobile",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["for","email","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","email","type","text","id","email",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["translate","",1,"required","fw-bold","form-label","w-100"],["name","leadTypesId","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","ngModel"],["name","cityId","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","ngModel"],["name","channelId","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","ngModel"],["for","vipNumber","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","vipNumber","type","text","id","vipNumber",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["for","discuontPercentage","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","discuontPercentage","type","text","id","discuontPercentage",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["translate","",1,"text-danger","text-center"]],template:function(i,n){if(1&i){const a=e.RV6();e.nrm(0,"app-breadcrumbs",7),e.nI1(1,"translate"),e.j41(2,"div",8)(3,"div",9),e.nrm(4,"ngx-ui-loader",10),e.j41(5,"form",11,0),e.bIt("ngSubmit",function(){return e.eBV(a),e.Njj(n.OnSubmit())}),e.j41(7,"div",12)(8,"ul",13,1)(10,"li",14),e.nrm(11,"a",15),e.DNE(12,ka,39,15,"ng-template",16),e.k0s()(),e.j41(13,"div",17),e.nrm(14,"div",18),e.k0s()(),e.j41(15,"div",19)(16,"div",20)(17,"button",21),e.bIt("click",function(){return e.eBV(a),e.Njj(n.onBack())}),e.nrm(18,"i",22)(19,"span",23),e.k0s(),e.j41(20,"button",24),e.nrm(21,"i",25)(22,"span",26),e.k0s()()()()()()}if(2&i){const a=e.sdS(9);e.FS9("title",0==n.isEditForm?n.addLeads:e.bMT(1,8,n.editLeads)),e.Y8G("breadcrumbItems",n.breadCrumbItems),e.R7$(4),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderOperationShap)("loaderId",n.operationLoader),e.R7$(4),e.Y8G("activeId",1),e.R7$(2),e.Y8G("ngbNavItem",1),e.R7$(4),e.Y8G("ngbNavOutlet",a)}},dependencies:[g.bT,c.qT,c.me,c.BC,c.cb,c.YS,c.vS,c.cV,m.Um,m.X9,m.sy,m.Gx,m.Ri,m.WA,m.m_,H.m,x.m,_.Mm,b.Cv,T.vr,_.D9],encapsulation:2})}}return o})(),wa=(()=>{class o{constructor(t,i,n){this.router=t,this.clientService=i,this.alertService=n}resolve(t,i){const a=this.router.getCurrentNavigation()?.extras?.state?.id;return""===a?(this.alertService.error(),this.router.navigateByUrl("/clients"),(0,re.of)(null)):this.clientService.getById(a)}static{this.\u0275fac=function(i){return new(i||o)(e.KVO(f.Ix),e.KVO(ve),e.KVO(F.u))}}static{this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})(),xa=(()=>{class o extends oe.E{constructor(t,i,n){super(t,i,n)}static{this.\u0275fac=function(i){return new(i||o)(e.KVO(f.Ix),e.KVO(ve),e.KVO(F.u))}}static{this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})(),Na=(()=>{class o extends oe.E{constructor(t,i,n,a){super(t,n,a),this.datePipe=i,this.baseService=n}resolve(t,i){return this.setCurrentMonthRange(),this.baseService.ClientReviewChartCount(this.pagination).pipe((0,q.W)(n=>(this.router.navigate([""]),this.alertService.error(n),(0,re.of)(null))))}setCurrentMonthRange(){const t=new Date,i=new Date(t.getFullYear(),t.getMonth(),1),n=new Date(t.getFullYear(),t.getMonth()+1,0);this.pagination.dateFrom=this.datePipe.transform(i,"yyyy-MM-ddT00:00:00.000"),this.pagination.dateTo=this.datePipe.transform(n,"yyyy-MM-ddT23:59:59.9999")}static{this.\u0275fac=function(i){return new(i||o)(e.KVO(f.Ix),e.KVO(g.vh),e.KVO(ae.Z),e.KVO(F.u))}}static{this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var Fe=d(53928),et=d(70255);const tt=(o,s)=>({" bg-success-subtle text-success":o," bg-danger-subtle text-danger":s}),Ga=(o,s)=>({"btn-success":o,"btn-danger":s}),Ea=(o,s)=>({"ri-checkbox-circle-fill":o,"ri-close-circle-line":s});function Da(o,s){1&o&&(e.j41(0,"tr",53)(1,"th",54),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",55),e.nrm(4,"i",56),e.EFF(5," crm.clientReview.clientName "),e.k0s(),e.j41(6,"th",57),e.EFF(7," crm.clientReview.mobile "),e.k0s(),e.j41(8,"th",58),e.EFF(9," general.table.creator "),e.k0s(),e.j41(10,"th",59),e.nrm(11,"i",56),e.EFF(12," crm.clientReview.orderId "),e.k0s(),e.j41(13,"th",60),e.nrm(14,"i",56),e.EFF(15," crm.clientReview.orderPrice "),e.k0s(),e.j41(16,"th",61),e.nrm(17,"i",56),e.EFF(18," crm.clientReview.clientPrice "),e.k0s(),e.j41(19,"th",62),e.nrm(20,"i",56),e.EFF(21," general.table.creationTime "),e.k0s(),e.j41(22,"th",63),e.nrm(23,"i",56),e.EFF(24," statistics.orderReview.visitDate "),e.k0s(),e.nrm(25,"th",64),e.k0s())}function Va(o,s){if(1&o&&(e.nrm(0,"i",74),e.EFF(1),e.nI1(2,"date"),e.nrm(3,"br")(4,"i",75),e.EFF(5),e.nI1(6,"date"),e.nrm(7,"br")(8,"i",76),e.EFF(9),e.nrm(10,"br")(11,"i",76),e.EFF(12)),2&o){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.i5U(2,4,t.creationTime,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",e.i5U(6,7,t.lastModificationTime,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",t.creatorName,""),e.R7$(3),e.SpI(" ",t.lastModificationName," ")}}function La(o,s){if(1&o){const t=e.RV6();e.j41(0,"tr",65)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td",66),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),l=e.sdS(109);return e.Njj(a.openModalClient(n.agentCode,l))}),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td",66),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),l=e.sdS(111);return e.Njj(a.openModalClient(n.orderId,l,"xxl"))}),e.EFF(10),e.j41(11,"span",67),e.EFF(12),e.k0s()(),e.j41(13,"td")(14,"span",68),e.EFF(15),e.k0s()(),e.j41(16,"td")(17,"span",68),e.EFF(18),e.k0s()(),e.j41(19,"td"),e.EFF(20),e.nI1(21,"date"),e.k0s(),e.j41(22,"td"),e.EFF(23),e.nI1(24,"date"),e.k0s(),e.DNE(25,Va,13,10,"ng-template",null,5,e.C5r),e.j41(27,"td",69),e.nrm(28,"i",70),e.j41(29,"button",71),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),l=e.sdS(105);return e.Njj(a.openModalTitleS(n,l,"lg"))}),e.nrm(30,"i",72)(31,"span",73),e.k0s()()()}if(2&o){const t=s.$implicit,i=s.rowIndex,n=e.sdS(26),a=e.XpG();e.R7$(2),e.JRh(i+1),e.R7$(2),e.JRh(t.clientName),e.R7$(2),e.SpI(" ",t.mobile,""),e.R7$(2),e.JRh(t.creatorName),e.R7$(2),e.SpI("#SO#",t.orderId," , "),e.R7$(2),e.JRh(t.teamName),e.R7$(2),e.Y8G("ngClass",e.l_i(21,tt,a.checkPriceMatch(t.orderPrice,t.clientPrice),!a.checkPriceMatch(t.orderPrice,t.clientPrice))),e.R7$(),e.JRh(t.orderPrice),e.R7$(2),e.Y8G("ngClass",e.l_i(24,tt,a.checkPriceMatch(t.orderPrice,t.clientPrice),!a.checkPriceMatch(t.orderPrice,t.clientPrice))),e.R7$(),e.JRh(t.clientPrice),e.R7$(2),e.SpI("",e.i5U(21,15,t.creationTime,"yyyy-MM-dd HH:mm")," "),e.R7$(3),e.SpI(" ",e.i5U(24,18,t.visitDate,"yyyy-MM-dd")," "),e.R7$(5),e.Y8G("ngbTooltip",n),e.R7$(),e.Y8G("ngClass",e.l_i(27,Ga,t.isReview,!t.isReview)),e.R7$(),e.Y8G("ngClass",e.l_i(30,Ea,t.isReview,!t.isReview))}}function Xa(o,s){1&o&&(e.j41(0,"div",77),e.EFF(1," general.table.noData "),e.k0s())}function Oa(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",78)(1,"div",79),e.nrm(2,"ngb-pagination-info",80),e.j41(3,"table-length",81),e.bIt("lengthChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",82)(5,"ngb-pagination",83),e.bIt("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.pagination.pageNumber,n)||(a.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&o){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function Ba(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",84)(1,"div",85)(2,"h4",86)(3,"span",87),e.EFF(4,"crm.clientReviewPrice.actionMismatch "),e.k0s()(),e.j41(5,"button",88),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss("Cross click"))}),e.k0s()(),e.j41(6,"div",89),e.nrm(7,"ngx-ui-loader",46),e.j41(8,"form",90,6),e.bIt("ngSubmit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.onUpdateReviewQuestion())}),e.j41(10,"div",8)(11,"div",91)(12,"label",92),e.EFF(13,"crm.clientReviewPrice.actionMismatch"),e.k0s(),e.j41(14,"textarea",93),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.actionMismatch,n)||(a.form.actionMismatch=n),e.Njj(n)}),e.k0s()()(),e.j41(15,"div",69)(16,"button",94),e.nrm(17,"i",95)(18,"span",96),e.k0s()()()()()}if(2&o){const t=e.sdS(9),i=e.XpG();e.R7$(7),e.Y8G("hasProgressBar",!1)("fgsType",i.loaderOperationShap)("loaderId",i.operationLoader),e.R7$(7),e.R50("ngModel",i.form.actionMismatch),e.R7$(2),e.Y8G("disabled",!t.valid)}}function Pa(o,s){if(1&o){const t=e.RV6();e.j41(0,"delete-modal",97),e.bIt("deleteConfirm",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.DeleteConfirm())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}}function Aa(o,s){1&o&&e.nrm(0,"client-profile-main")}function $a(o,s){if(1&o&&e.nrm(0,"order-operation",98),2&o){const t=e.XpG();e.Y8G("isOrderEdit",!1)("isInner",!0)("orderCode",t.clientSelected)}}let Ya=(()=>{class o extends G.w{constructor(t,i,n,a,l,r,h,v,R,S){super(t,i,R,n,l,r,h),this.baseService=n,this.teamService=a,this.employeeService=v,this.excelService=S,this.title="crm.clientReviewPrice.title",this.titleOperation="crm.clientReviewPrice.titleOperation",this.keySelected="",this.assignUsers=[],this.times=[],this.types=[],this.actionDoing=[],this.priceStatus=[{id:1,name:this.getTranslationText("crm.clientReviewPrice.match")},{id:2,name:this.getTranslationText("crm.clientReviewPrice.notMatch")}],this.reviewStatus=[{id:1,name:this.getTranslationText("crm.clientReviewPrice.review")},{id:2,name:this.getTranslationText("crm.clientReviewPrice.notReview")}],this.isResolveList=!0,this.clientSelected=0,this.questions=[],this.clients=[],this.searchForm={dates:{from:null,to:null},visitDates:{from:null,to:null},priceStatus:2},this.num=0,this.option={startVal:this.num,useEasing:!0,duration:2,decimalPlaces:0},this.indexColor=0,this.clientReview={total:0,match:0,matchPrecentage:0,notMatchPrecentage:0,notMatch:0,review:0,notReview:0,reviewPrecentage:0,notReviewPrecentage:0},this.teams=[],this.employees=[],this.configRoute(),this.clientReviewPriceCount(),this.getTeam(),this.getEmployees()}getEmployees(){this.employeeService.GetAllByType(7).subscribe(t=>{this.employees=t.data})}getTeam(){this.teamService.getDropDown().subscribe(t=>{this.teams=t.data})}ngOnInitMore(){this._ApplyjobChart('["--vz-primary", "--vz-secondary", "--vz-success", "--vz-info", "--vz-warning", "--vz-danger", "--vz-body-color", "--vz-primary", "--vz-success", "--vz-secondary"]'),this.clientReviewLookUp(),this.breadCrumbItems=[{label:"layout.sidebar.crm"},{label:this.title,active:!0}]}clientReviewPriceCount(){this.baseService.clientReviewPriceCount().subscribe(t=>{this.clientReview=t.data,this._ApplyjobChart('["--vz-primary", "--vz-secondary", "--vz-success", "--vz-info", "--vz-warning", "--vz-danger", "--vz-body-color", "--vz-primary", "--vz-success", "--vz-secondary"]')},t=>{console.log(t)})}_ApplyjobChart(t){this.numberMatch=this.applayChart(70,[this.clientReview.matchPrecentage],'["--vz-success"]'),this.numberNotMatch=this.applayChart(70,[this.clientReview.notMatchPrecentage],'["--vz-danger"]'),this.reviewNotMatch=this.applayChart(70,[this.clientReview.notReviewPrecentage],'["--vz-danger"]'),this.reviewMatch=this.applayChart(70,[this.clientReview.reviewPrecentage],'["--vz-success"]')}applayChart(t,i,n){return{series:i,chart:{type:"radialBar",width:100,sparkline:{enabled:!0}},dataLabels:{enabled:!1},plotOptions:{radialBar:{hollow:{margin:0,size:t+"%"},track:{margin:1},dataLabels:{show:!0,name:{show:!1},value:{show:!0,fontSize:"16px",fontWeight:600,offsetY:8}}}},colors:n=this.getChartColorsArray(n)}}getChartColorsArray(t){return(t=JSON.parse(t)).map(function(i){var n=i.replace(" ","");if(-1===n.indexOf(",")){var a=getComputedStyle(document.documentElement).getPropertyValue(n);return a?a=a.replace(" ",""):n}var l=i.split(",");if(2==l.length){var r=getComputedStyle(document.documentElement).getPropertyValue(l[0]);return"rgba("+r+","+l[1]+")"}return n})}openModalTitle(t,i="md"){this.isEditForm=!1,this.form={clientReviewAnswers:[]},this.modalService.open(t,{centered:!0,size:i})}openModal(t,i,n="md"){this.isEditForm=!1,this.form={clientReviewAnswers:[]},this.selectedRow=[{id:t}],this.modalService.open(i,{centered:!0,size:n})}mapForm(t){let i={};return i.id=t.id,i.clientReviewActionDoingId=t.clientReviewActionDoingId,i.endStatusId=t.endStatusId,i.note=t.note,i.value=t.value.toString(),i}onUpdateIsActive(t){this.baseService.updateActive(t).pipe((0,p.Q)(this.notifier)).subscribe(i=>{i?this.alertService.success():this.alertService.error("general.message."+i)},i=>{this.alertService.error()})}mapRegisterForm(t){let i={};return i.id=t.id,i.reviewQuestionId=t.reviewQuestionId,i.clientReviewActionDoingId=t.clientReviewActionDoingId,i.endStatusId=t.endStatusId,i.note=t.note,i}clientReviewLookUp(){this.baseService.ClientReviewLookUp().subscribe(t=>{this.clients=t.data.clients,this.types=t.data.types,this.actionDoing=t.data.actionDoing,this.questions=t.data.questions},t=>{console.log(t)})}configRoute(){this.routerActive.data.pipe((0,p.Q)(this.notifier)).subscribe(t=>{this.entities=t.data.data,this.pagination.totalItems=t.data.totalItems},()=>{this.alertService.error()})}mapExcel(){let t=[];return this.entities?.forEach(i=>{t.push({Client:i.clientName,Mobile:i.mobile,OrderId:i.orderId,OrderPrice:i.orderPrice,ClientPrice:i.clientPrice,note:i.note})}),t}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,this.getTranslationText(this.title),[])}onSearch(){this.ngxLoader.startLoader(this.searchLoader),this.filter(),this.loadentities()}openModalClient(t,i,n="xl"){this.clientSelected=t,this.modalService.open(i,{centered:!0,size:n})}EditModel(t,i,n="md"){this.isEditForm=!0,this.baseService.getById(t.id).pipe((0,p.Q)(this.notifier)).subscribe(a=>{if(a.success){let l=a.data;this.questions=this.questions.filter(r=>r.id==l.reviewQuestionId),this.form=l}else this.alertService.error("general.message."+a.message);this.modalService.open(i,{centered:!0,size:n})},a=>{this.alertService.error()})}ChangeStatusModel(t,i,n="md"){this.form={},this.form.id=t.id,this.form.clientReviewActionDoingId=t.clientReviewActionDoingId,this.form.notes=t.notes,this.form.endStatusId=t.endStatusId,this.modalService.open(i,{centered:!0,size:n})}filter(){let t=this.searchForm.dates,i=this.searchForm.visitDates;t+void 0&&"to"in t?(this.pagination.dateFrom=this.datePipe.transform(t.from,"yyyy-MM-ddT00:00:00.000"),this.pagination.dateTo=this.datePipe.transform(t.to,"yyyy-MM-ddT23:59:59.999")):(this.pagination.dateFrom=null,this.pagination.dateTo=null),i+void 0&&"to"in i?(this.pagination.visitDateFrom=this.datePipe.transform(i.from,"yyyy-MM-ddT00:00:00.000"),this.pagination.visitDateTo=this.datePipe.transform(i.to,"yyyy-MM-ddT23:59:59.999")):(this.pagination.visitDateFrom=null,this.pagination.visitDateTo=null),(""!=this.searchForm.priceStatus||null!=this.searchForm.priceStatus||null!=this.searchForm.priceStatus)&&(this.pagination.priceStatus=Number.parseInt(this.searchForm.priceStatus)),(""!=this.searchForm.reviewStatus||null!=this.searchForm.reviewStatus||null!=this.searchForm.reviewStatus)&&(this.pagination.reviewStatus=Number.parseInt(this.searchForm.reviewStatus)),this.pagination.teamId=this.searchForm.teamId}onReset(){this.form={},this.searchForm={dates:{from:null,to:null},visitDates:{from:null,to:null}},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems}}onUpdateReviewQuestion(){this.ngxLoader.start(this.operationLoader),this.baseService.ClientReviewActionMisMatchEdit(this.form).pipe((0,j.O)(),(0,M.c)(this.mainDelay),(0,y.Z)(),(0,p.Q)(this.notifier),(0,I.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(t=>{t.success?(this.clientReviewPriceCount(),this.submitFunished()):this.alertService.error("general.message."+t.message)},t=>{this.alertService.error("general.message."+t)})}getLength(t){if(null!=t&&""!==t)return t.split(",").length}editEntity(){let t=this.mapForm(this.form);this.baseService.ClientReviewQuestionEdit(t).pipe((0,j.O)(),(0,M.c)(this.mainDelay),(0,y.Z)(),(0,p.Q)(this.notifier),(0,I.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(i=>{i.success?this.submitFunished():this.alertService.error("general.message."+i.message)},i=>{this.alertService.error("general.message."+i)})}loadentities(){this.countLoad=this.countLoad+1,(!this.isResolveList||1!==this.countLoad)&&(this.ngxLoader.startLoader(this.searchLoader),this.baseService.GetClientReviewPrice(this.pagination).pipe((0,p.Q)(this.notifier)).subscribe(t=>{this.ngxLoader.stopLoader(this.searchLoader),this.entities=t.data,this.pagination.totalItems=t.totalItems,this.LoadSuccess()},t=>{this.ngxLoader.stopLoader(this.searchLoader),this.alertService.error(t)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[])}openModalTitleS(t,i,n="md"){this.form={id:t.id,actionMismatch:t.actionMismatch},this.modalService.open(i,{centered:!0,size:n})}onMatchPrice(t){this.searchForm.priceStatus=t,this.searchForm.reviewStatus=null,this.onSearch()}onReviewStatus(t){this.searchForm.reviewStatus=t,this.searchForm.priceStatus=null,this.onSearch()}checkPriceMatch(t,i){return Math.abs(t-i)<=1}static{this.\u0275fac=function(i){return new(i||o)(e.rXU(f.nX),e.rXU(_.c$),e.rXU(ae.Z),e.rXU(Ie.n),e.rXU(F.u),e.rXU(g.vh),e.rXU(b.eD),e.rXU(Fe.O),e.rXU(m.Bq),e.rXU(O.V))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-clientReviewPrice"]],features:[e.Vt3],decls:112,vars:82,consts:[["tableMaster",""],["operation",""],["deleteModal",""],["clientProfile",""],["orderModel",""],["tooltipContent",""],["formEntity","ngForm"],[3,"title","breadcrumbItems"],[1,"row"],[1,"col-12","col-md-3","cursor-pointer",3,"click"],[1,"card","card-animate","overflow-hidden"],[1,"position-absolute","start-0",2,"z-index","0"],["version","1.2","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 200 120","width","200","height","120"],["id","Shape 8","d","m189.5-25.8c0 0 20.1 46.2-26.7 71.4 0 0-60 15.4-62.3 65.3-2.2 49.8-50.6 59.3-57.8 61.5-7.2 2.3-60.8 0-60.8 0l-11.9-199.4z",1,"s0"],[1,"card-body",2,"z-index","1"],[1,"d-flex","align-items-center"],[1,"flex-grow-1","overflow-hidden"],["translate","crm.clientReviewPrice.match",1,"text-uppercase","fw-medium","text-muted","text-truncate","mb-3"],[1,"fs-22","fw-semibold","ff-secondary","mb-0"],[1,"counter-value",3,"countUp","options"],[1,"flex-shrink-0"],["id","numberMatch","dir","ltr",1,"apex-charts"],[3,"series","chart","plotOptions","labels","colors"],["translate","crm.clientReviewPrice.numberNotMatch",1,"text-uppercase","fw-medium","text-muted","text-truncate","mb-3"],["id","numberNotMatch","dir","ltr",1,"apex-charts"],["translate","crm.clientReviewPrice.notReview",1,"text-uppercase","fw-medium","text-muted","text-truncate","mb-3"],["id","reviewNotMatch","dir","ltr",1,"apex-charts"],["translate","crm.clientReviewPrice.review",1,"text-uppercase","fw-medium","text-muted","text-truncate","mb-3"],["id","reviewMatch","dir","ltr",1,"apex-charts"],[1,"col-lg-12"],[1,"card","grid"],[3,"reset","search","exportXlsx","showAdd","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["type","search","id","filterValue","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["type","search","id","orderId","name","orderId",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"col-12","col-md-3","mb-2"],["type","text","mwlFlatpickr","","id","dates","name","dates","mode","range",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],["type","text","mwlFlatpickr","","id","visitDates","name","dates","mode","range",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],["name","priceStatus","name","name","bindValue","id","id","priceStatus","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],["name","reviewStatus","name","name","bindValue","id","id","reviewStatus","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],[1,"col-12","col-md-4","mb-2"],["name","teamId","name","name","bindValue","code","id","teamId","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],[1,"card-body"],[3,"hasProgressBar","fgsType","loaderId"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["translate","",2,"width",".5%"],["pSortableColumn","clientId","translate","",2,"width","10%"],[1,"ri-expand-up-down-line"],["translate","",2,"width","12%"],["translate","",2,"width","6%"],["pSortableColumn","orderId","translate","",2,"width","15%"],["pSortableColumn","orderPrice","translate","",2,"width","10%"],["pSortableColumn","clientPrice","translate","",2,"width","10%"],["pSortableColumn","creationTime","translate","",2,"width","12%"],["pSortableColumn","visitDate","translate","",2,"width","10%"],["translate","",2,"width","25%"],[1,"fs-5"],[3,"click"],[1,"bg-primary-subtle","text-primary"],[1,"badge","mx-2",3,"ngClass"],[1,"text-center"],["tooltipPosition","top",1,"mdi","mdi-cog-outline","d-inline","text-muted","fs-16","align-middle","me-1",3,"ngbTooltip"],["type","button",1,"btn","btn-sm","btn-label","waves-effect","waves-light","rounded-pill",3,"click","ngClass"],[1,"label-icon","align-middle","rounded-pill","fs-16","me-2",3,"ngClass"],["translate","crm.clientReview.review"],[1,"ri-history-fill","text-warning"],[1,"ri-history-fill","text-danger"],[1,"ri-user-location-fill","text-primary"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["translate","",1,"fw-bold","fs-4"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"ngSubmit"],[1,"mb-3"],["for","actionMismatch","translate","",1,"fw-bold","form-label"],["rows","2","InputTirmFilter","","name","actionMismatch","type","text","id","actionMismatch",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],[3,"deleteConfirm","dismiss"],[3,"isOrderEdit","isInner","orderCode"]],template:function(i,n){if(1&i){const a=e.RV6();e.nrm(0,"app-breadcrumbs",7),e.nI1(1,"translate"),e.j41(2,"div",8)(3,"div",9),e.bIt("click",function(){return e.eBV(a),e.Njj(n.onMatchPrice(1))}),e.j41(4,"div",10)(5,"div",11),e.qSk(),e.j41(6,"svg",12)(7,"style"),e.EFF(8," .s0 { opacity: .05; fill: var(--vz-success) } "),e.k0s(),e.nrm(9,"path",13),e.k0s()(),e.joV(),e.j41(10,"div",14)(11,"div",15)(12,"div",16),e.nrm(13,"p",17),e.j41(14,"h4",18),e.nrm(15,"span",19),e.k0s()(),e.j41(16,"div",20)(17,"div",21),e.nrm(18,"apx-chart",22),e.k0s()()()()()(),e.j41(19,"div",9),e.bIt("click",function(){return e.eBV(a),e.Njj(n.onMatchPrice(2))}),e.j41(20,"div",10)(21,"div",11),e.qSk(),e.j41(22,"svg",12)(23,"style"),e.EFF(24," .s0 { opacity: .05; fill: var(--vz-danger) } "),e.k0s(),e.nrm(25,"path",13),e.k0s()(),e.joV(),e.j41(26,"div",14)(27,"div",15)(28,"div",16),e.nrm(29,"p",23),e.j41(30,"h4",18),e.nrm(31,"span",19),e.k0s()(),e.j41(32,"div",20)(33,"div",24),e.nrm(34,"apx-chart",22),e.k0s()()()()()(),e.j41(35,"div",9),e.bIt("click",function(){return e.eBV(a),e.Njj(n.onReviewStatus(2))}),e.j41(36,"div",10)(37,"div",11),e.qSk(),e.j41(38,"svg",12)(39,"style"),e.EFF(40," .s0 { opacity: .05; fill: var(--vz-danger) } "),e.k0s(),e.nrm(41,"path",13),e.k0s()(),e.joV(),e.j41(42,"div",14)(43,"div",15)(44,"div",16),e.nrm(45,"p",25),e.j41(46,"h4",18),e.nrm(47,"span",19),e.k0s()(),e.j41(48,"div",20)(49,"div",26),e.nrm(50,"apx-chart",22),e.k0s()()()()()(),e.j41(51,"div",9),e.bIt("click",function(){return e.eBV(a),e.Njj(n.onReviewStatus(1))}),e.j41(52,"div",10)(53,"div",11),e.qSk(),e.j41(54,"svg",12)(55,"style"),e.EFF(56," .s0 { opacity: .05; fill: var(--vz-success) } "),e.k0s(),e.nrm(57,"path",13),e.k0s()(),e.joV(),e.j41(58,"div",14)(59,"div",15)(60,"div",16),e.nrm(61,"p",27),e.j41(62,"h4",18),e.nrm(63,"span",19),e.k0s()(),e.j41(64,"div",20)(65,"div",28),e.nrm(66,"apx-chart",22),e.k0s()()()()()()(),e.j41(67,"div",8)(68,"div",29)(69,"div",30)(70,"base-filter",31),e.bIt("reset",function(){return e.eBV(a),e.Njj(n.onReset())})("search",function(){return e.eBV(a),e.Njj(n.onSearch())})("exportXlsx",function(){return e.eBV(a),e.Njj(n.onExportXlsx())}),e.qex(71,32),e.j41(72,"div",33)(73,"div",34)(74,"input",35),e.nI1(75,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.filterValue,r)||(n.pagination.filterValue=r),e.Njj(r)}),e.k0s(),e.nrm(76,"i",36),e.k0s()(),e.j41(77,"div",33)(78,"input",37),e.nI1(79,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.orderId,r)||(n.pagination.orderId=r),e.Njj(r)}),e.k0s()(),e.j41(80,"div",38)(81,"input",39),e.nI1(82,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.searchForm.dates,r)||(n.searchForm.dates=r),e.Njj(r)}),e.k0s()(),e.j41(83,"div",38)(84,"input",40),e.nI1(85,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.searchForm.visitDates,r)||(n.searchForm.visitDates=r),e.Njj(r)}),e.k0s()(),e.j41(86,"div",33)(87,"ng-select",41),e.nI1(88,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.searchForm.priceStatus,r)||(n.searchForm.priceStatus=r),e.Njj(r)}),e.k0s()(),e.j41(89,"div",33)(90,"ng-select",42),e.nI1(91,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.searchForm.reviewStatus,r)||(n.searchForm.reviewStatus=r),e.Njj(r)}),e.k0s()(),e.j41(92,"div",43)(93,"ng-select",44),e.nI1(94,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.searchForm.teamId,r)||(n.searchForm.teamId=r),e.Njj(r)}),e.k0s()(),e.bVm(),e.k0s(),e.j41(95,"div",45),e.nrm(96,"ngx-ui-loader",46),e.j41(97,"div",47)(98,"p-table",48,0),e.bIt("onLazyLoad",function(r){return e.eBV(a),e.Njj(n.tableChange(r))})("selectionChange",function(r){return e.eBV(a),e.Njj(n.onSelectionChange(r))}),e.DNE(100,Da,26,0,"ng-template",49)(101,La,32,33,"ng-template",50),e.k0s()(),e.DNE(102,Xa,2,0,"div",51)(103,Oa,6,8,"div",52),e.k0s()()()(),e.DNE(104,Ba,19,5,"ng-template",null,1,e.C5r)(106,Pa,1,0,"ng-template",null,2,e.C5r)(108,Aa,1,0,"ng-template",null,3,e.C5r)(110,$a,1,3,"ng-template",null,4,e.C5r)}2&i&&(e.FS9("title",e.bMT(1,66,n.title)),e.Y8G("breadcrumbItems",n.breadCrumbItems),e.R7$(15),e.Y8G("countUp",n.clientReview.match)("options",n.option),e.R7$(3),e.Y8G("series",n.numberMatch.series)("chart",n.numberMatch.chart)("plotOptions",n.numberMatch.plotOptions)("labels",n.numberMatch.labels)("colors",n.numberMatch.colors),e.R7$(13),e.Y8G("countUp",n.clientReview.notMatch)("options",n.option),e.R7$(3),e.Y8G("series",n.numberNotMatch.series)("chart",n.numberNotMatch.chart)("plotOptions",n.numberNotMatch.plotOptions)("labels",n.numberNotMatch.labels)("colors",n.numberNotMatch.colors),e.R7$(13),e.Y8G("countUp",n.clientReview.notReview)("options",n.option),e.R7$(3),e.Y8G("series",n.reviewNotMatch.series)("chart",n.reviewNotMatch.chart)("plotOptions",n.reviewNotMatch.plotOptions)("labels",n.reviewNotMatch.labels)("colors",n.reviewNotMatch.colors),e.R7$(13),e.Y8G("countUp",n.clientReview.review)("options",n.option),e.R7$(3),e.Y8G("series",n.reviewMatch.series)("chart",n.reviewMatch.chart)("plotOptions",n.reviewMatch.plotOptions)("labels",n.reviewMatch.labels)("colors",n.reviewMatch.colors),e.R7$(4),e.Y8G("showAdd",!1)("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(4),e.FS9("placeholder",e.bMT(75,68,"task.tasklist.subject")),e.R50("ngModel",n.pagination.filterValue),e.R7$(4),e.FS9("placeholder",e.bMT(79,70,"crm.clientReview.orderId")),e.R50("ngModel",n.pagination.orderId),e.R7$(3),e.FS9("placeholder",e.bMT(82,72,"statistics.orderReview.dateReview")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.dates),e.R7$(3),e.FS9("placeholder",e.bMT(85,74,"statistics.orderReview.visitDateFromTo")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.visitDates),e.R7$(3),e.FS9("placeholder",e.bMT(88,76,"crm.clientReviewPrice.matchPrice")),e.Y8G("items",n.priceStatus)("multiple",!1),e.R50("ngModel",n.searchForm.priceStatus),e.R7$(3),e.FS9("placeholder",e.bMT(91,78,"crm.clientReviewPrice.reviewStatus")),e.Y8G("items",n.reviewStatus)("multiple",!1),e.R50("ngModel",n.searchForm.reviewStatus),e.R7$(3),e.FS9("placeholder",e.bMT(94,80,"crm.clientReviewPrice.team")),e.Y8G("items",n.teams)("multiple",!1),e.R50("ngModel",n.searchForm.teamId),e.R7$(3),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderSearchShap)("loaderId",n.searchLoader),e.R7$(2),e.Y8G("value",n.entities)("rows",n.pagination.pageSize)("lazy",!0)("totalRecords",n.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",n.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems>0))},dependencies:[g.YU,g.bT,c.qT,c.me,c.BC,c.cb,c.vS,c.cV,m.s5,B.kL,et.G,H.m,D.b,de.L,P.w,V.p,L.g,fe.t,x.m,_.Mm,C.XI,N.Ei,C.Tg,b.Cv,m.md,we.Q,qe.ig,T.vr,g.vh,_.D9],encapsulation:2})}}return o})(),Ua=(()=>{class o extends oe.E{constructor(t,i,n){super(t,i,n),this.baseService=i,this.pagination={pageNumber:1,pageSize:10,priceStatus:2}}resolve(t,i){return this.baseService.GetClientReviewPrice(this.pagination).pipe((0,q.W)(n=>(this.router.navigate([""]),this.alertService.error(n),(0,re.of)(null))))}static{this.\u0275fac=function(i){return new(i||o)(e.KVO(f.Ix),e.KVO(ae.Z),e.KVO(F.u))}}static{this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})(),Ha=(()=>{class o extends oe.E{constructor(t,i,n){super(t,i,n),this.baseService=i}resolve(t,i){return this.pagination={pageNumber:1,pageSize:10,filterForLastTwoDays:!0},this.baseService.getAfterSale(this.pagination).pipe((0,q.W)(n=>(this.router.navigate([""]),this.alertService.error(n),(0,re.of)(null))))}static{this.\u0275fac=function(i){return new(i||o)(e.KVO(f.Ix),e.KVO(_e.Q),e.KVO(F.u))}}static{this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})(),za=(()=>{class o{constructor(){this.title="client.client.profile"}ngOnInit(){}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["client-profile"]],decls:3,vars:4,consts:[[3,"title","breadcrumbItems"]],template:function(i,n){1&i&&(e.nrm(0,"app-breadcrumbs",0),e.nI1(1,"translate"),e.nrm(2,"client-profile-main")),2&i&&(e.FS9("title",e.bMT(1,2,n.title)),e.Y8G("breadcrumbItems",n.breadCrumbItems))},dependencies:[H.m,fe.t,_.D9],encapsulation:2})}}return o})();var nt=d(90094);function Qa(o,s){1&o&&(e.j41(0,"tr",25)(1,"th",26),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",27),e.nrm(4,"i",28),e.EFF(5," general.table.name "),e.k0s(),e.j41(6,"th",29),e.nrm(7,"i",28),e.EFF(8," client.client.mobile "),e.k0s(),e.j41(9,"th",30),e.nrm(10,"i",28),e.EFF(11," client.client.cityName "),e.k0s(),e.j41(12,"th",31),e.nrm(13,"i",28),e.EFF(14," client.client.channelName "),e.k0s(),e.j41(15,"th",32),e.nrm(16,"i",28),e.EFF(17," general.table.isActive "),e.k0s(),e.nrm(18,"th",33),e.k0s())}function qa(o,s){1&o&&e.nrm(0,"span",51)}function Ja(o,s){1&o&&e.nrm(0,"span",52)}function Wa(o,s){if(1&o&&(e.nrm(0,"i",53),e.EFF(1),e.nI1(2,"date"),e.nrm(3,"br")(4,"i",54),e.EFF(5),e.nI1(6,"date"),e.nrm(7,"br")(8,"i",55),e.EFF(9)),2&o){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.i5U(2,3,t.createdDate,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",e.i5U(6,6,t.updatedDate,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",t.creatorName," ")}}function Ka(o,s){if(1&o){const t=e.RV6();e.j41(0,"tr",34)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.k0s(),e.j41(11,"td"),e.DNE(12,qa,1,0,"span",35)(13,Ja,1,0,"span",36),e.k0s(),e.j41(14,"td"),e.DNE(15,Wa,10,9,"ng-template",null,2,e.C5r),e.j41(17,"span",37)(18,"div",38)(19,"button",39),e.nrm(20,"i",40),e.k0s(),e.j41(21,"ul",41)(22,"li",42),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.goClientEdit(n.agentCode))}),e.j41(23,"span",43),e.nrm(24,"i",44)(25,"span",45),e.k0s()(),e.j41(26,"li",42),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.goClientProfile(n.agentCode))}),e.j41(27,"span",43),e.nrm(28,"i",46)(29,"span",47),e.k0s()(),e.j41(30,"li",42),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),l=e.sdS(38);return e.Njj(a.openModal(n.userCode,l))}),e.j41(31,"a",48),e.nrm(32,"i",49)(33,"span",50),e.k0s()()()()()()()}if(2&o){const t=s.$implicit,i=s.rowIndex;e.R7$(2),e.JRh(i+1),e.R7$(2),e.JRh(t.agentName),e.R7$(2),e.JRh(t.mobile),e.R7$(2),e.JRh(t.cityName),e.R7$(2),e.JRh(t.channelName),e.R7$(2),e.Y8G("ngIf",t.isActive),e.R7$(),e.Y8G("ngIf",!t.isActive)}}function Za(o,s){1&o&&(e.j41(0,"div",56),e.EFF(1," general.table.noData "),e.k0s())}function eo(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",57)(1,"div",58),e.nrm(2,"ngb-pagination-info",59),e.j41(3,"table-length",60),e.bIt("lengthChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",61)(5,"ngb-pagination",62),e.bIt("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.pagination.pageNumber,n)||(a.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&o){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function to(o,s){if(1&o){const t=e.RV6();e.j41(0,"delete-modal",63),e.bIt("deleteConfirm",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.DeleteConfirm())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}}let no=(()=>{class o extends G.w{constructor(t,i,n,a,l,r,h,v,R,S,E){super(i,n,v,a,l,r,h),this.router=t,this.baseService=a,this.excelService=S,this.encrptAervice=E,this.title="client.client.title",this.titleOperation="client.client.titleOperation",this.keySelected="",this.assignUsers=[],this.times=[],this.employees=[],this.searchForm={},this.cities={},this.channels={},this.status={},this.clientType={individualCount:0,companyCount:0},this.num=0,this.option={startVal:this.num,useEasing:!0,duration:2,decimalPlaces:0},this.isResolveList=!0,this.configRoute(),this.GetAgentLookUps()}onUpdateIsActive(t){this.baseService.updateActive(t).pipe((0,p.Q)(this.notifier)).subscribe(i=>{i?this.alertService.success():this.alertService.error("general.message."+i)},i=>{this.alertService.error()})}ngOnInitMore(){}mapForm(t){let i={...t};return i.id=i.workTimeCode,i}mapRegisterForm(t){let i={...t};return i.workTimeCode=0,i}OnSearch(t){this.ngxLoader.startLoader(u.a7),this.loadentities()}onSearch(){this.ngxLoader.startLoader(u.a7),this.loadentities()}configRoute(){this.routerActive.data.pipe((0,p.Q)(this.notifier)).subscribe(t=>{this.entities=t.data.data,this.pagination.totalItems=t.data.totalItems},()=>{this.alertService.error()})}mapExcel(){let t=[];return this.entities?.forEach(i=>{t.push({name:i.agentName,mobile:i.mobile,cityName:i.cityName,channelName:i.channelName,isActive:this.getTranslationText("general.table.active")})}),t}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,"Service Type",[])}EditModel(t,i,n="md"){this.isEditForm=!0,this.form={workTimeCode:t.workTimeCode,workTime:t.workTime,notes:t.notes,isActive:t.isActive},this.modalService.open(i,{centered:!0,size:n})}editEntity(){let t=this.mapForm(this.form);this.baseService.editPut(t.id,t).pipe((0,j.O)(),(0,M.c)(this.mainDelay),(0,y.Z)(),(0,p.Q)(this.notifier),(0,I.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(i=>{i.success?this.submitFunished():this.alertService.error("general.message."+i.message)},i=>{this.alertService.error("general.message."+i)})}GetAgentLookUps(){this.baseService.GetAgentLookUps().subscribe(t=>{this.channels=t.data.channels,this.cities=t.data.cities,this.status=t.data.status},t=>{console.log(t)})}GetAgentTypeCount(){this.baseService.GetAgentTypeCount().subscribe(t=>{this.clientType.individualCount=t.data.countIndividual,this.clientType.companyCount=t.data.countCompany},t=>{console.log(t)})}goClientRegister(){this.router.navigateByUrl("/crm/client-list/register")}goClientEdit(t){this.router.navigateByUrl("/crm/client-list/edit",{state:{id:t}})}goClientProfile(t){this.router.navigateByUrl("/crm/client-list/profile",{state:{id:t}});let i=this.encrptAervice.encode(t.toString());this.router.navigateByUrl("/crm/client-list/profile/"+i,{state:{id:t}})}applayChart(t,i,n){return{series:i,chart:{type:"radialBar",width:100,sparkline:{enabled:!0}},dataLabels:{enabled:!1},plotOptions:{radialBar:{hollow:{margin:0,size:t+"%"},track:{margin:1},dataLabels:{show:!0,name:{show:!1},value:{show:!0,fontSize:"16px",fontWeight:600,offsetY:8}}}},colors:n=this.getChartColorsArray(n)}}getChartColorsArray(t){return(t=JSON.parse(t)).map(function(i){var n=i.replace(" ","");if(-1===n.indexOf(",")){var a=getComputedStyle(document.documentElement).getPropertyValue(n);return a?a=a.replace(" ",""):n}var l=i.split(",");if(2==l.length){var r=getComputedStyle(document.documentElement).getPropertyValue(l[0]);return"rgba("+r+","+l[1]+")"}return n})}onTypeSelect(t){this.pagination.clientType=t,this.loadentities()}loadentities(){this.countLoad=this.countLoad+1,(!this.isResolveList||1!==this.countLoad)&&(this.pagination.clientType=0,this.baseService.get(this.pagination).pipe((0,p.Q)(this.notifier)).subscribe(t=>{this.ngxLoader.stopLoader(u.a7),this.entities=t.data,this.pagination.totalItems=t.totalItems,this.LoadSuccess()},t=>{this.ngxLoader.stopLoader(u.a7),this.alertService.error(t)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[])}static{this.\u0275fac=function(i){return new(i||o)(e.rXU(f.Ix),e.rXU(f.nX),e.rXU(_.c$),e.rXU(z.X),e.rXU(F.u),e.rXU(g.vh),e.rXU(b.eD),e.rXU(m.Bq),e.rXU(e.gRc),e.rXU(O.V),e.rXU(nt._))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-client"]],features:[e.Vt3],decls:39,vars:41,consts:[["tableMaster",""],["deleteModal",""],["tooltipContent",""],[3,"title","breadcrumbItems"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],[3,"reset","search","exportXlsx","addNew","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","search","id","filterValue","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["InputTirmFilter","","type","search","id","mobile","name","mobile",1,"form-control",3,"ngModelChange","placeholder","ngModel"],["name","userType","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","placeholder","ngModel"],["name","channelCode","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","placeholder","ngModel"],["name","active","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","placeholder","ngModel"],[1,"card-body"],[3,"hasProgressBar","fgsType","loaderId"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["translate","",2,"width",".5%"],["pSortableColumn","agentName","translate","",2,"width","10%"],[1,"ri-expand-up-down-line"],["pSortableColumn","mobile","translate","",2,"width","10%"],["pSortableColumn","cityCode","translate","",2,"width","10%"],["pSortableColumn","channelCode","translate","",2,"width","10%"],["pSortableColumn","isActive","translate","",2,"width","8%"],["translate","",2,"width","10%"],[1,"fs-5"],["class","badge bg-success-subtle text-success p-2","translate","general.table.active",4,"ngIf"],["class","badge bg-danger-subtle text-danger p-2","translate","general.table.noActive",4,"ngIf"],[1,"d-inline"],[1,"dropdown-custom"],["type","button",1,"btn","dropbtn","btn-soft-secondary","btn-sm","dropdown-custom","arrow-none"],[1,"ri-more-fill"],[1,"dropdown-menu","dropdown-menu-end","dropdown-content"],[3,"click"],[1,"dropdown-item"],[1,"ri-pencil-fill","align-bottom","me-2","text-muted"],["translate","general.action.edit"],[1,"ri-user-location-fill","align-bottom","me-2","text-muted"],["translate","client.client.profile"],["href","javascript:void(0);",1,"dropdown-item"],[1,"ri-delete-bin-fill","align-bottom","me-2","text-muted"],["translate","general.action.delete"],["translate","general.table.active",1,"badge","bg-success-subtle","text-success","p-2"],["translate","general.table.noActive",1,"badge","bg-danger-subtle","text-danger","p-2"],[1,"ri-history-fill","text-warning"],[1,"ri-history-fill","text-danger"],[1,"ri-user-location-fill","text-primary"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[3,"deleteConfirm","dismiss"]],template:function(i,n){if(1&i){const a=e.RV6();e.nrm(0,"app-breadcrumbs",3),e.nI1(1,"translate"),e.j41(2,"div",4)(3,"div",5)(4,"div",6)(5,"base-filter",7),e.bIt("reset",function(){return e.eBV(a),e.Njj(n.onReset())})("search",function(){return e.eBV(a),e.Njj(n.onSearch())})("exportXlsx",function(){return e.eBV(a),e.Njj(n.onExportXlsx())})("addNew",function(){return e.eBV(a),e.Njj(n.goClientRegister())}),e.qex(6,8),e.j41(7,"div",9)(8,"div",10)(9,"input",11),e.nI1(10,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.filterValue,r)||(n.pagination.filterValue=r),e.Njj(r)}),e.k0s(),e.nrm(11,"i",12),e.k0s()(),e.j41(12,"div",9)(13,"div",10)(14,"input",13),e.nI1(15,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.mobile,r)||(n.pagination.mobile=r),e.Njj(r)}),e.k0s()()(),e.j41(16,"div",9)(17,"div",10)(18,"ng-select",14),e.nI1(19,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.CityCode,r)||(n.pagination.CityCode=r),e.Njj(r)}),e.k0s()()(),e.j41(20,"div",9)(21,"div",10)(22,"ng-select",15),e.nI1(23,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.channelCode,r)||(n.pagination.channelCode=r),e.Njj(r)}),e.k0s()()(),e.j41(24,"div",9)(25,"div",10)(26,"ng-select",16),e.nI1(27,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.active,r)||(n.pagination.active=r),e.Njj(r)}),e.k0s()()(),e.bVm(),e.k0s(),e.j41(28,"div",17),e.nrm(29,"ngx-ui-loader",18),e.j41(30,"div",19)(31,"p-table",20,0),e.bIt("onLazyLoad",function(r){return e.eBV(a),e.Njj(n.tableChange(r))})("selectionChange",function(r){return e.eBV(a),e.Njj(n.onSelectionChange(r))}),e.DNE(33,Qa,19,0,"ng-template",21)(34,Ka,34,7,"ng-template",22),e.k0s()(),e.DNE(35,Za,2,0,"div",23)(36,eo,6,8,"div",24),e.k0s()()()(),e.DNE(37,to,1,0,"ng-template",null,1,e.C5r)}2&i&&(e.FS9("title",e.bMT(1,29,n.title)),e.Y8G("breadcrumbItems",n.breadCrumbItems),e.R7$(5),e.Y8G("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(4),e.FS9("placeholder",e.bMT(10,31,"task.tasklist.subject")),e.R50("ngModel",n.pagination.filterValue),e.R7$(5),e.FS9("placeholder",e.bMT(15,33,"client.client.mobile")),e.R50("ngModel",n.pagination.mobile),e.R7$(4),e.FS9("placeholder",e.bMT(19,35,"client.client.cityName")),e.Y8G("items",n.cities)("multiple",!1),e.R50("ngModel",n.pagination.CityCode),e.R7$(4),e.FS9("placeholder",e.bMT(23,37,"client.client.channelName")),e.Y8G("items",n.channels)("multiple",!1),e.R50("ngModel",n.pagination.channelCode),e.R7$(4),e.FS9("placeholder",e.bMT(27,39,"general.table.isActive")),e.Y8G("items",n.activeList)("multiple",!1),e.R50("ngModel",n.pagination.active),e.R7$(3),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderSearchShap)("loaderId",n.searchLoader),e.R7$(2),e.Y8G("value",n.entities)("rows",n.pagination.pageSize)("lazy",!0)("totalRecords",n.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",n.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems>0))},dependencies:[g.bT,c.me,c.BC,c.vS,m.s5,H.m,D.b,P.w,V.p,L.g,x.m,_.Mm,C.XI,N.Ei,C.Tg,b.Cv,T.vr,g.vh,_.D9],encapsulation:2})}}return o})(),io=(()=>{class o extends oe.E{constructor(t,i,n){super(t,i,n),this.pagination={pageNumber:1,pageSize:10,clientType:0}}static{this.\u0275fac=function(i){return new(i||o)(e.KVO(f.Ix),e.KVO(z.X),e.KVO(F.u))}}static{this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var w=d(56701),Ne=d(50949),it=d(96402),at=d(71100),Ge=d(65430),Ee=d(38542);const ao=()=>["pending.orderNew"],oo=()=>["pending.addToLead"],ro=()=>["pending.evaluation"];function lo(o,s){1&o&&(e.j41(0,"tr",35)(1,"th",36),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",37),e.nrm(4,"i",38),e.EFF(5," orderManagement.order.orderCode "),e.k0s(),e.j41(6,"th",39),e.nrm(7,"i",38),e.EFF(8," orderManagement.order.createdDate "),e.k0s(),e.j41(9,"th",40),e.nrm(10,"i",38),e.EFF(11," orderManagement.order.agentName "),e.k0s(),e.j41(12,"th",41),e.nrm(13,"i",38),e.EFF(14," orderManagement.order.mobile "),e.k0s(),e.j41(15,"th",42),e.nrm(16,"i",38),e.EFF(17," orderManagement.order.cityName "),e.k0s(),e.nrm(18,"th",43),e.k0s())}function so(o,s){if(1&o&&(e.nrm(0,"i",58),e.EFF(1),e.nI1(2,"date"),e.nrm(3,"br")(4,"i",59)),2&o){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.i5U(2,1,t.createdDate,"yyyy-MM-dd HH:mm:ss")," ")}}function co(o,s){if(1&o){const t=e.RV6();e.j41(0,"li",45),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,a=e.XpG(),l=e.sdS(41);return e.Njj(a.openOrderModal(n,l,"xxl"))}),e.j41(1,"a",60),e.nrm(2,"i",61)(3,"span",62),e.k0s()()}}function mo(o,s){if(1&o){const t=e.RV6();e.j41(0,"li",45),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,a=e.XpG(),l=e.sdS(43);return e.Njj(a.openLeadModal(n,l))}),e.j41(1,"a",63),e.nrm(2,"i",64)(3,"span",65),e.k0s()()}}function po(o,s){if(1&o){const t=e.RV6();e.j41(0,"li",45),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,a=e.XpG(),l=e.sdS(39);return e.Njj(a.openEvaluationModal(n,n.mobile,l,"lg"))}),e.j41(1,"a",60),e.nrm(2,"i",66)(3,"span",67),e.k0s()()}}function go(o,s){if(1&o){const t=e.RV6();e.j41(0,"tr",44)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td",45),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.goEdit(n.pendingCode))}),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.nI1(7,"date"),e.k0s(),e.j41(8,"td"),e.EFF(9),e.k0s(),e.j41(10,"td")(11,"span",46),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.copytext(n.mobile))}),e.EFF(12),e.nrm(13,"i",47),e.k0s()(),e.j41(14,"td"),e.EFF(15),e.k0s(),e.j41(16,"td"),e.DNE(17,so,5,4,"ng-template",null,5,e.C5r),e.j41(19,"div",48),e.nrm(20,"i",49),e.j41(21,"button",50),e.nI1(22,"translate"),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),l=e.sdS(37);return e.Njj(a.openModal(n.pendingCode,l))}),e.nrm(23,"i",51)(24,"span",52),e.k0s(),e.j41(25,"div",53)(26,"button",54),e.nrm(27,"i",55),e.k0s(),e.j41(28,"ul",56),e.DNE(29,co,4,0,"li",57)(30,mo,4,0,"li",57)(31,po,4,0,"li",57),e.k0s()()()()()}if(2&o){const t=s.$implicit,i=s.rowIndex,n=e.sdS(18);e.R7$(2),e.JRh(i+1),e.R7$(2),e.SpI("#SO# ",t.pendingCode,""),e.R7$(2),e.JRh(e.i5U(7,11,t.createdDate,"yyyy-MM-dd HH:mm")),e.R7$(3),e.JRh(t.name),e.R7$(3),e.SpI("",t.mobile," "),e.R7$(3),e.JRh(t.cityName),e.R7$(5),e.Y8G("ngbTooltip",n),e.R7$(),e.FS9("pTooltip",e.bMT(22,14,"general.actions")),e.R7$(8),e.Y8G("hasPermission",e.lJ4(16,ao)),e.R7$(),e.Y8G("hasPermission",e.lJ4(17,oo)),e.R7$(),e.Y8G("hasPermission",e.lJ4(18,ro))}}function _o(o,s){1&o&&(e.j41(0,"div",68),e.EFF(1," general.table.noData "),e.k0s())}function uo(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",69)(1,"div",70),e.nrm(2,"ngb-pagination-info",71),e.j41(3,"table-length",72),e.bIt("lengthChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",73)(5,"ngb-pagination",74),e.bIt("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.pagination.pageNumber,n)||(a.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&o){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function ho(o,s){if(1&o){const t=e.RV6();e.j41(0,"form",75,6),e.bIt("ngSubmit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.reCallOrder())}),e.nrm(2,"ngx-ui-loader",76),e.j41(3,"div",77)(4,"div",78)(5,"button",79),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(6,"div",80)(7,"div",81),e.nrm(8,"lord-icon",82),e.j41(9,"div",83),e.nrm(10,"h3",84)(11,"p",85),e.k0s()(),e.j41(12,"div",86),e.nrm(13,"button",87),e.j41(14,"button",88),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()()()()()}if(2&o){const t=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",t.loaderOperationShap)("loaderId",t.deleteLoader)}}function fo(o,s){if(1&o){const t=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td")(8,"button",117),e.bIt("click",function(){const n=e.eBV(t).index,a=e.XpG(2);return e.Njj(a.deleteService(n))}),e.nrm(9,"i",118),e.k0s()()()}if(2&o){const t=s.$implicit;e.R7$(2),e.JRh(t.service),e.R7$(2),e.JRh(t.price),e.R7$(2),e.JRh(t.notes)}}function bo(o,s){1&o&&(e.j41(0,"tr")(1,"td",119),e.EFF(2),e.nI1(3,"translate"),e.k0s()()),2&o&&(e.R7$(2),e.JRh(e.bMT(3,1,"orderManagement.order.noData")))}function Co(o,s){if(1&o){const t=e.RV6();e.j41(0,"form",null,6),e.nrm(2,"ngx-ui-loader",76),e.j41(3,"div",77)(4,"div",78)(5,"button",79),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(6,"div",80)(7,"div",89)(8,"div",13)(9,"div",90)(10,"label",91),e.EFF(11,"orderManagement.order.cityName"),e.k0s(),e.j41(12,"ng-select",92,7),e.bIt("change",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.getDistricts(n.code))}),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.evaluationForm.cityCode,n)||(a.evaluationForm.cityCode=n),e.Njj(n)}),e.k0s()(),e.j41(14,"div",90)(15,"label",91),e.EFF(16,"orderManagement.order.districtName"),e.k0s(),e.j41(17,"ng-select",93,8),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.evaluationForm.districtCode,n)||(a.evaluationForm.districtCode=n),e.Njj(n)}),e.k0s()(),e.j41(19,"div",90)(20,"label",94),e.EFF(21,"orderManagement.order.date"),e.k0s(),e.j41(22,"div",95)(23,"input",96,9),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.evaluationForm.visitDate,n)||(a.evaluationForm.visitDate=n),e.Njj(n)}),e.k0s()()()(),e.j41(25,"div",97)(26,"div",98)(27,"label",91),e.EFF(28,"orderManagement.order.services"),e.k0s()(),e.j41(29,"div",90)(30,"ng-select",99,10),e.nI1(32,"translate"),e.bIt("change",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.setService(n))}),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.evaluationForm.serviceCode,n)||(a.evaluationForm.serviceCode=n),e.Njj(n)}),e.k0s()(),e.j41(33,"div",90)(34,"div",95)(35,"input",100,11),e.nI1(37,"translate"),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.evaluationForm.note,n)||(a.evaluationForm.note=n),e.Njj(n)}),e.k0s()()(),e.j41(38,"div",98)(39,"button",101),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.addService())}),e.nrm(40,"i",102),e.k0s()(),e.j41(41,"div",103)(42,"table",104)(43,"thead")(44,"tr")(45,"th",105),e.EFF(46," orderManagement.order.service "),e.k0s(),e.j41(47,"th",105),e.EFF(48," orderManagement.order.price "),e.k0s(),e.j41(49,"th",105),e.EFF(50," orderManagement.order.notes "),e.k0s(),e.j41(51,"th",105),e.EFF(52," orderManagement.order.actions "),e.k0s()()(),e.j41(53,"tbody"),e.DNE(54,fo,10,3,"tr",106)(55,bo,4,3,"tr",107),e.k0s()()()(),e.j41(56,"div",108)(57,"div",109)(58,"label",110),e.EFF(59),e.nI1(60,"translate"),e.k0s(),e.j41(61,"p-checkbox",111),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.evaluationForm.isUrgent,n)||(a.evaluationForm.isUrgent=n),e.Njj(n)}),e.k0s()(),e.j41(62,"div",112)(63,"label",113),e.EFF(64,"orderManagement.order.notes"),e.k0s(),e.j41(65,"textarea",114,12),e.nI1(67,"translate"),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.evaluationForm.notes,n)||(a.evaluationForm.notes=n),e.Njj(n)}),e.EFF(68,"                            "),e.k0s()()(),e.j41(69,"div",115)(70,"button",116),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.submitEvaluation())}),e.k0s(),e.j41(71,"button",88),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()()()()()()}if(2&o){const t=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",t.loaderOperationShap)("loaderId",t.deleteLoader),e.R7$(10),e.Y8G("items",t.cities)("multiple",!1),e.R50("ngModel",t.evaluationForm.cityCode),e.R7$(5),e.Y8G("items",t.districts)("multiple",!1),e.R50("ngModel",t.evaluationForm.districtCode),e.R7$(6),e.R50("ngModel",t.evaluationForm.visitDate),e.R7$(7),e.FS9("placeholder",e.bMT(32,23,"orderManagement.order.services")),e.Y8G("items",t.services)("multiple",!1),e.R50("ngModel",t.evaluationForm.serviceCode),e.R7$(5),e.FS9("placeholder",e.bMT(37,25,"orderManagement.order.notes")),e.R50("ngModel",t.evaluationForm.note),e.R7$(19),e.Y8G("ngForOf",t.evaluationForm.evaluationServices),e.R7$(),e.Y8G("ngIf",!t.evaluationForm.evaluationServices.length),e.R7$(4),e.SpI(" ",e.bMT(60,27,"orderManagement.order.isUrgent")," "),e.R7$(2),e.R50("ngModel",t.evaluationForm.isUrgent),e.Y8G("binary",!0),e.R7$(4),e.FS9("placeholder",e.bMT(67,29,"orderManagement.order.notes")),e.R50("ngModel",t.evaluationForm.notes)}}function vo(o,s){if(1&o&&e.nrm(0,"order-operation",120),2&o){const t=e.XpG();e.Y8G("pendingCode",t.orderOpen.pendingCode)("agentName",t.orderOpen.agentName)("cityCode",t.orderOpen.cityId)("isOrderEdit",!0)("isInner",!1)("mobile",t.orderOpen.mobile)}}function Ro(o,s){if(1&o){const t=e.RV6();e.j41(0,"form",75,6),e.bIt("ngSubmit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.goLead())}),e.nrm(2,"ngx-ui-loader",76),e.j41(3,"div",77)(4,"div",78)(5,"button",79),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(6,"div",80)(7,"div",81),e.nrm(8,"lord-icon",82),e.j41(9,"div",83)(10,"h4"),e.EFF(11),e.nI1(12,"translate"),e.k0s(),e.nrm(13,"p",85),e.k0s()(),e.j41(14,"div",86),e.nrm(15,"button",87),e.j41(16,"button",88),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()()()()()}if(2&o){const t=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",t.loaderOperationShap)("loaderId","leadLoader"),e.R7$(9),e.SpI(" ",e.bMT(12,4,"orderManagement.order.sureGoLead")," ")}}let jo=(()=>{class o extends G.w{constructor(t,i,n,a,l,r,h,v,R,S,E,$,k,Y,Q,Z,A){super(t,i,R,n,r,h,v),this.baseService=n,this._clientService=a,this.orderPendingService=l,this.authDaamService=S,this.excelService=E,this.cityService=$,this.districtService=k,this._servicesService=Y,this._evaluationService=Q,this.channelService=Z,this.router=A,this.title="orderManagement.order.titlePending",this.titleOperation="orderManagement.order.titleOperation",this.keySelected="",this.assignUsers=[],this.times=[],this.employees=[],this.searchForm={},this.evaluationForm={evaluationServices:[],isUrgent:!1},this.isResolveList=!0,this.employeeGroups=[],this.activeindex="1",this.active=1,this.formPassword={},this.roles=[],this.userTypes=[],this.actives=[{id:!0,name:"active"},{id:!1,name:"noActive"}],this.countLoad=2,this.orderSelected=0,this.cities=[],this.districts=[],this.channels=[],this.services=[],this.isShowMenu=!1,this.orderOpen={},this.pendingCount={},this.GetPenddingCount=new e.bkB,this.setDates=(X,ne,le)=>{if(X?.from||X?.to){const Xe=X.to||X.from;this.pagination[ne]=this.datePipe.transform(X.from||X.to,"yyyy-MM-ddT00:00:00"),this.pagination[le]=this.datePipe.transform(Xe,"yyyy-MM-ddT23:59:59.999")}else this.pagination[ne]=null,this.pagination[le]=null},this.GetCities(),this.GetChannels(),this.GetServicesDropDown()}GetCities(){this.cityService.getDropDown().subscribe(t=>{this.cities=t.data},t=>{console.log(t)})}GetDistricts(t){this.districtService.getByCityId(t).subscribe(i=>{this.districts=i.data},i=>{console.log(i)})}getDistricts(t){this.evaluationForm.districtCode=null,this.baseService.districtsByCity(t).subscribe(i=>{this.districts=i.data},i=>{console.log(i)})}GetChannels(){this.channelService.getDropDown().subscribe(t=>{this.channels=t.data},t=>{console.log(t)})}GetByMobile(t){this._clientService.GetByMobile(t).subscribe(i=>{this.clientMobileInf=i.data,this.evaluationForm.cityCode=i.cityCode,this.evaluationForm.districtCode=i.channelCode,this.alertService.info(i.data?"orderManagement.order.clientExist":"orderManagement.order.clientNotExist")},i=>{console.log(i)})}GetServicesDropDown(){this._servicesService.getDropDown().subscribe(t=>{this.services=t.data},t=>{console.log(t)})}ngOnInitMore(){}mapForm(t){return{...t}}mapRegisterForm(t){let i={...t};return i.employeeCode=0,i}onSearch(){let t={...this.searchForm};this.ngxLoader.startLoader(u.a7),this.setDates(t.dates,"visitDateFrom","visitDateTo"),this.setDates(t.creationDates,"createdDateFrom","createdDateTo"),this.loadentities()}loadentities(){this.countLoad=this.countLoad+1,(!this.isResolveList||1!==this.countLoad)&&(this.ngxLoader.startLoader(u.a7),this.orderPendingService.GetAllPendingOrder(this.pagination).pipe((0,p.Q)(this.notifier)).subscribe(t=>{this.ngxLoader.stopLoader(u.a7),this.entities=t.data,this.pagination.totalItems=t.totalItems,this.LoadSuccess()},t=>{this.ngxLoader.stopLoader(u.a7),this.alertService.error(t)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[])}mapExcel(){let t=[];return this.entities.forEach(i=>{t.push({"Order Code":i.pendingCode,"Created Date":i.createdDate,"Agent Name":i.agentName,Mobile:i.mobile,"City Name":i.cityName})}),t}reCallOrder(){this.ngxLoader.startLoader(u.Fq),this.baseService.UpdateCallCounter(this.orderSelected).pipe((0,j.O)(),(0,M.c)(this.mainDelay),(0,y.Z)(),(0,p.Q)(this.notifier),(0,I.j)(()=>this.ngxLoader.stopLoader(u.Fq))).subscribe({next:t=>{this.modalService.dismissAll(),this.loadentities(),this.GetPenddingCount.next(!0),this.alertService.success()}})}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,this.translateService.instant(this.title),[])}goEdit(t){this.router.navigateByUrl("/managment/order/new")}getStatus(t){return t.isCancel?"bg-warning-subtle text-warning":t.isFinish?"bg-success-subtle text-success":t.isUrgent?"bg-danger-subtle text-danger":t.isReopen||t.isFree?"bg-warning-subtle text-warning":"bg-success-subtle text-success"}openModal(t,i,n="md"){this.orderSelected=t,this.evaluationForm.pendingCode=t,this.modalService.open(i,{centered:!0,size:n})}oncityChange(t){this.GetDistricts(t.code)}onMenuShow(){this.isShowMenu=!this.isShowMenu}copytext(t){navigator.clipboard.writeText(t),this.alertService.info(t)}setService(t){console.log(t),this.evaluationForm.service=t.name,this.evaluationForm.price=t.price}addService(){this.evaluationForm.evaluationServices.push({service:this.evaluationForm.service,serviceCode:this.evaluationForm.serviceCode,price:this.evaluationForm.price,notes:this.evaluationForm.note})}deleteService(t){console.log(t),this.evaluationForm.evaluationServices.splice(t,1)}submitEvaluation(){this._evaluationService.register(this.evaluationForm).subscribe(t=>{t.success?(this.GetPenddingCount.next(!0),this.modalService.dismissAll(),this.loadentities(),this.alertService.success()):this.alertService.error(t.message)},t=>{console.log(t)})}openEvaluationModal(t,i,n,a="md"){this._clientService.GetByMobile(i).subscribe(l=>{this.orderSelected=t.pendingCode,this.evaluationForm.pendingCode=t.pendingCode,this.modalService.open(n,{centered:!0,size:a}),this.clientMobileInf=t.data,this.evaluationForm.cityCode=t.cityCode,this.evaluationForm.agentName=t.name,this.evaluationForm.mobile=t.mobile,this.evaluationForm.agentCode=0,this.evaluationForm.districtCode=l.channelCode,l.data?(this.evaluationForm.agentCode=l.agentCode,this.alertService.info("orderManagement.order.clientExist")):this.alertService.info("orderManagement.order.clientNotExist")},l=>{console.log(l)})}openOrderModal(t,i,n="md"){this.orderOpen.mobile=t.mobile,this.orderOpen.cityId=t.cityCode,this.orderOpen.agentName=t.name,this.orderOpen.pendingCode=t.pendingCode,this.modalService.open(i,{centered:!0,size:n})}openLeadModal(t,i,n="md"){this.orderSelected=t.pendingCode,this.modalService.open(i,{centered:!0,size:n})}goLead(){this.ngxLoader.startLoader("leadLoader"),this.baseService.GoLead(this.orderSelected).pipe((0,p.Q)(this.notifier),(0,I.j)(()=>this.ngxLoader.stopLoader("leadLoader"))).subscribe(t=>{t.success?(this.loadentities(),this.GetPenddingCount.next(!0),this.modalService.dismissAll()):this.alertService.error()},t=>{this.alertService.error()})}onReset(){this.form={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems},this.searchForm={},this.loadentities()}static{this.\u0275fac=function(i){return new(i||o)(e.rXU(f.nX),e.rXU(_.c$),e.rXU(_e.Q),e.rXU(z.X),e.rXU(Ne.H),e.rXU(F.u),e.rXU(g.vh),e.rXU(b.eD),e.rXU(m.Bq),e.rXU(ue.J),e.rXU(O.V),e.rXU(he.h),e.rXU(Se.m),e.rXU(it.N),e.rXU(at.W),e.rXU(Te.l),e.rXU(f.Ix))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-pending-order"]],outputs:{GetPenddingCount:"GetPenddingCount"},features:[e.Vt3],decls:44,vars:34,consts:[["tableMaster",""],["recallModal",""],["evaluateModal",""],["orderModel",""],["goLeadModal",""],["tooltipContent",""],["formEntity","ngForm"],["cityCode","ngModel"],["districtCode","ngModel"],["visitDate","ngModel"],["serviceCode","ngModel"],["note","ngModel"],["notes","ngModel"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],["overlayColor","rgba(255,255,255,0.05)","fgsColor","rgba(255,255,255,0)",3,"loaderId"],[3,"reset","search","exportXlsx","showAdd","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","search","id","filterValue","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["InputTirmFilter","","type","search","id","agentName","name","agentName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["InputTirmFilter","","type","tel","id","filterValue","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["name","name","bindValue","code","bindLabel","name",3,"change","ngModelChange","placeholder","items","multiple","ngModel"],[1,"col-12","col-md-4","mb-2"],["type","text","mwlFlatpickr","","id","isDate","mode","range",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["translate","",2,"width",".5%"],["pSortableColumn","pendingCode","translate","",2,"width","6%"],[1,"ri-expand-up-down-line"],["pSortableColumn","createdDate","translate","",2,"width","12%"],["pSortableColumn","name","translate","",2,"width","5%"],["pSortableColumn","mobile","translate","",2,"width","10%"],["pSortableColumn","cityCode","translate","",2,"width","8%"],["translate","",2,"width","10%"],[1,"fs-5"],[3,"click"],[1,"cursor-pointer","badge","bg-danger-subtle","text-danger","fs-6",3,"click"],[1,"ri-clipboard-line"],[1,"d-flex"],["tooltipPosition","top",1,"ri-history-fill","d-inline","text-primary","fs-16","align-middle","me-1",3,"ngbTooltip"],["tooltipPosition","top","type","button",1,"btn","btn-sm","btn-primary","btn-label","waves-effect","waves-light","rounded-pill","me-1",3,"click","pTooltip"],[1,"ri-phone-fill","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","orderManagement.order.call"],[1,"dropdown-custom"],["type","button",1,"btn","dropbtn","btn-soft-secondary","btn-sm","dropdown-custom","arrow-none"],[1,"ri-more-fill"],[1,"dropdown-menu","dropdown-menu-end","dropdown-content",2,"left","0"],[3,"click",4,"hasPermission"],[1,"ri-history-fill","text-warning"],[1,"ri-user-location-fill","text-primary"],["href","javascript:void(0);",1,"dropdown-item"],[1,"ri-add-circle-fill","align-bottom","me-2","text-muted"],["translate","orderManagement.order.newOrder"],["href","javascript:void(0);","data-bs-toggle","modal","data-bs-target","#removeItemModal",1,"dropdown-item"],[1,"ri-questionnaire-line","align-bottom","me-2","text-muted"],["translate","orderManagement.order.addToLead"],[1,"ri-shake-hands-fill","align-bottom","me-2","text-muted"],["translate","orderManagement.order.evaluate"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[3,"ngSubmit"],[3,"hasProgressBar","fgsType","loaderId"],[1,"modal-content"],[1,"modal-header"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","btn-close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mt-2","text-center"],["src","https://cdn.lordicon.com/gdfrsvpt.json","stroke","bold","state","hover-oscillate","trigger","loop","colors","primary:#f7b84b,secondary:#f06548",2,"width","130px","height","130px"],[1,"pt-2","fs-15","mx-4","mx-sm-5"],["translate","orderManagement.order.AreYouSureMessage"],[1,"text-muted","mx-4","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","submit","id","save","translate","general.action.save",1,"btn","w-sm","btn-danger"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light",3,"click"],[1,"mx-4"],[1,"col-12","col-md-4","mb-3"],["translate","",1,"fw-bold","form-label","w-100"],["name","cityCode","bindValue","code","bindLabel","name",3,"change","ngModelChange","items","multiple","ngModel"],["name","districtCode","bindValue","code","bindLabel","name",3,"ngModelChange","items","multiple","ngModel"],["for","visitDate","translate","",1,"fw-bold","form-label"],[1,"input-group"],["InputTirmFilter","","name","mobile","type","date","id","visitDate",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,"mt-4","row",2,"border-top","1px solid rgba(128,128,128,0.29)"],[1,"col-md-2","mb-3"],["name","serviceCode","bindValue","code","bindLabel","name",3,"change","ngModelChange","items","multiple","placeholder","ngModel"],["InputTirmFilter","","name","note","type","text","id","notes",1,"form-control","fs-6",3,"ngModelChange","placeholder","ngModel"],[1,"btn","btn-success","py-1","px-2",3,"click"],[1,"ri-add-fill",2,"font-size","1.2rem"],[1,"col-12","text-center","mt-4"],[1,"table","table-bordered"],["translate",""],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"mt-4","pt-3","row",2,"border-top","1px solid rgba(128,128,128,0.29)"],[1,"col-md-12","mb-3","d-flex"],[1,"fw-bold","form-label","w-25"],["name","isUrgent",3,"ngModelChange","ngModel","binary"],[1,"col-12","col-md-12","mb-3","d-flex"],["translate","",1,"fw-bold","form-label","w-25"],["InputTirmFilter","","name","note","rows","3",1,"form-control","fs-6","w-75",3,"ngModelChange","placeholder","ngModel"],[1,"d-flex","gap-2","justify-content-end","mt-4","mb-2"],["type","submit","id","save","translate","general.action.save",1,"btn","w-sm","btn-danger",3,"click"],[1,"btn","btn-danger","py-1","px-2",3,"click"],[1,"ri-delete-bin-3-fill",2,"font-size","1.2rem"],["colspan","4"],[3,"pendingCode","agentName","cityCode","isOrderEdit","isInner","mobile"]],template:function(i,n){if(1&i){const a=e.RV6();e.j41(0,"div",13)(1,"div",14)(2,"div",15),e.nrm(3,"ngx-ui-loader",16),e.j41(4,"base-filter",17),e.bIt("reset",function(){return e.eBV(a),e.Njj(n.onReset())})("search",function(){return e.eBV(a),e.Njj(n.onSearch())})("exportXlsx",function(){return e.eBV(a),e.Njj(n.onExportXlsx())}),e.qex(5,18),e.j41(6,"div",19)(7,"div",20)(8,"input",21),e.nI1(9,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.pendingCode,r)||(n.pagination.pendingCode=r),e.Njj(r)}),e.k0s(),e.nrm(10,"i",22),e.k0s()(),e.j41(11,"div",19)(12,"div",20)(13,"input",23),e.nI1(14,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.agentName,r)||(n.pagination.agentName=r),e.Njj(r)}),e.k0s(),e.nrm(15,"i",22),e.k0s()(),e.j41(16,"div",19)(17,"div",20)(18,"input",24),e.nI1(19,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.mobile,r)||(n.pagination.mobile=r),e.Njj(r)}),e.k0s(),e.nrm(20,"i",22),e.k0s()(),e.j41(21,"div",19)(22,"div",20)(23,"ng-select",25),e.nI1(24,"translate"),e.bIt("change",function(r){return e.eBV(a),e.Njj(n.oncityChange(r))}),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.cityCode,r)||(n.pagination.cityCode=r),e.Njj(r)}),e.k0s()()(),e.j41(25,"div",26)(26,"input",27),e.nI1(27,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.searchForm.creationDates,r)||(n.searchForm.creationDates=r),e.Njj(r)}),e.k0s()(),e.bVm(),e.k0s(),e.j41(28,"div",28)(29,"div",29)(30,"p-table",30,0),e.bIt("onLazyLoad",function(r){return e.eBV(a),e.Njj(n.tableChange(r))})("selectionChange",function(r){return e.eBV(a),e.Njj(n.onSelectionChange(r))}),e.DNE(32,lo,19,0,"ng-template",31)(33,go,32,19,"ng-template",32),e.k0s()(),e.DNE(34,_o,2,0,"div",33)(35,uo,6,8,"div",34),e.k0s()()()(),e.DNE(36,ho,15,3,"ng-template",null,1,e.C5r)(38,Co,72,31,"ng-template",null,2,e.C5r)(40,vo,1,6,"ng-template",null,3,e.C5r)(42,Ro,17,6,"ng-template",null,4,e.C5r)}2&i&&(e.R7$(3),e.Y8G("loaderId","searchLoader"),e.R7$(),e.Y8G("showAdd",!1)("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(4),e.FS9("placeholder",e.bMT(9,24,"orderManagement.order.orderCode")),e.R50("ngModel",n.pagination.pendingCode),e.R7$(5),e.FS9("placeholder",e.bMT(14,26,"orderManagement.order.agentName")),e.R50("ngModel",n.pagination.agentName),e.R7$(5),e.FS9("placeholder",e.bMT(19,28,"orderManagement.order.mobile")),e.R50("ngModel",n.pagination.mobile),e.R7$(5),e.FS9("placeholder",e.bMT(24,30,"orderManagement.order.cityName")),e.Y8G("items",n.cities)("multiple",!1),e.R50("ngModel",n.pagination.cityCode),e.R7$(3),e.FS9("placeholder",e.bMT(27,32,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.creationDates),e.R7$(4),e.Y8G("value",n.entities)("rows",n.pagination.pageSize)("lazy",!0)("totalRecords",n.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",n.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems>0))},dependencies:[g.Sq,g.bT,c.qT,c.me,c.BC,c.cb,c.vS,c.cV,m.s5,B.kL,D.b,de.L,V.p,L.g,x.m,U.p,_.Mm,C.XI,N.Ei,C.Tg,Ge.Sc,b.Cv,m.md,T.vr,Ee.m,g.vh,_.D9],encapsulation:2})}}return o})();const Io=(o,s,t)=>({"btn-success ":o,"btn-primary ":s,"btn-danger ":t}),yo=()=>["pending.addToLead"],Fo=()=>["recall.evaluation"],Mo=()=>["recall.orderNew"];function So(o,s){1&o&&(e.j41(0,"tr",36)(1,"th",37),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",38),e.nrm(4,"i",39),e.EFF(5," orderManagement.order.orderCode "),e.k0s(),e.j41(6,"th",40),e.EFF(7," orderManagement.order.lastCallDate "),e.k0s(),e.j41(8,"th",41),e.nrm(9,"i",39),e.EFF(10," orderManagement.order.agentName "),e.k0s(),e.j41(11,"th",42),e.nrm(12,"i",39),e.EFF(13," orderManagement.order.mobile "),e.k0s(),e.j41(14,"th",43),e.nrm(15,"i",39),e.EFF(16," orderManagement.order.cityName "),e.k0s(),e.j41(17,"th",44),e.nrm(18,"i",39),e.EFF(19," orderManagement.order.callCounter "),e.k0s(),e.nrm(20,"th",45),e.k0s())}function To(o,s){if(1&o){const t=e.RV6();e.j41(0,"li",60),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,a=e.XpG(),l=e.sdS(47);return e.Njj(a.openLeadModal(n,l))}),e.j41(1,"a",61),e.nrm(2,"i",62)(3,"span",63),e.k0s()()}}function ko(o,s){if(1&o){const t=e.RV6();e.j41(0,"li",60),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,a=e.XpG(),l=e.sdS(43);return e.Njj(a.openEvaluationModal(n,n.mobile,l,"lg"))}),e.j41(1,"a",61),e.nrm(2,"i",64)(3,"span",65),e.k0s()()}}function wo(o,s){if(1&o){const t=e.RV6();e.j41(0,"li",60),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,a=e.XpG(),l=e.sdS(45);return e.Njj(a.openOrderModal(n,l,"xxl"))}),e.j41(1,"a",61),e.nrm(2,"i",66)(3,"span",67),e.k0s()()}}function xo(o,s){if(1&o){const t=e.RV6();e.j41(0,"tr",46)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.nI1(7,"date"),e.k0s(),e.j41(8,"td"),e.EFF(9),e.k0s(),e.j41(10,"td")(11,"span",47),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.copytext(n.mobile))}),e.EFF(12),e.nrm(13,"i",48),e.k0s()(),e.j41(14,"td"),e.EFF(15),e.k0s(),e.j41(16,"td",49)(17,"button",50),e.nI1(18,"translate"),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),l=e.sdS(39);return e.Njj(a.openModal(n,l))}),e.j41(19,"i",51),e.EFF(20),e.k0s(),e.nrm(21,"span",52),e.k0s()(),e.j41(22,"td")(23,"i",53),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),l=e.sdS(41);return e.Njj(a.onCallHistoryModal(n.pendingCode,l))}),e.k0s(),e.j41(24,"div",54)(25,"div",55)(26,"button",56),e.nrm(27,"i",57),e.k0s(),e.j41(28,"ul",58),e.DNE(29,To,4,0,"li",59)(30,ko,4,0,"li",59)(31,wo,4,0,"li",59),e.k0s()()()()()}if(2&o){const t=s.$implicit,i=s.rowIndex;e.R7$(2),e.JRh(i+1),e.R7$(2),e.SpI(" ",t.pendingCode,""),e.R7$(2),e.SpI(" ",e.i5U(7,12,t.lastCallDate,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(3),e.JRh(t.name),e.R7$(3),e.SpI("",t.mobile," "),e.R7$(3),e.JRh(t.cityName),e.R7$(2),e.FS9("pTooltip",e.bMT(18,15,"general.actions")),e.Y8G("ngClass",e.sMw(17,Io,1==t.callCounter,2==t.callCounter,3==t.callCounter)),e.R7$(3),e.SpI(" ",t.callCounter," "),e.R7$(9),e.Y8G("hasPermission",e.lJ4(21,yo)),e.R7$(),e.Y8G("hasPermission",e.lJ4(22,Fo)),e.R7$(),e.Y8G("hasPermission",e.lJ4(23,Mo))}}function No(o,s){1&o&&(e.j41(0,"div",68),e.EFF(1," general.table.noData "),e.k0s())}function Go(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",69)(1,"div",70),e.nrm(2,"ngb-pagination-info",71),e.j41(3,"table-length",72),e.bIt("lengthChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",73)(5,"ngb-pagination",74),e.bIt("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.pagination.pageNumber,n)||(a.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&o){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function Eo(o,s){if(1&o){const t=e.RV6();e.j41(0,"delete-modal",75),e.bIt("deleteConfirm",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.DeleteConfirm())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}}function Do(o,s){1&o&&e.nrm(0,"h4",91)}function Vo(o,s){if(1&o&&(e.j41(0,"h4"),e.EFF(1),e.nI1(2,"translate"),e.nI1(3,"translate"),e.nI1(4,"translate"),e.k0s()),2&o){const t=e.XpG(2);e.R7$(),e.LHq(" ",e.bMT(2,4,"orderManagement.order.RecallMessageCount")," ",t.selectedCallCounter," ",e.bMT(3,6,"orderManagement.order.times")," ",e.bMT(4,8,"orderManagement.order.RecallMessageCount2")," ")}}function Lo(o,s){if(1&o){const t=e.RV6();e.j41(0,"form",76,7),e.bIt("ngSubmit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.reCallOrder())}),e.nrm(2,"ngx-ui-loader",77),e.j41(3,"div",78)(4,"div",79)(5,"button",80),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(6,"div",81)(7,"div",82),e.nrm(8,"lord-icon",83),e.j41(9,"div",84),e.DNE(10,Do,1,0,"h4",85)(11,Vo,5,10,"h4",86),e.nrm(12,"p",87),e.k0s()(),e.j41(13,"div",88),e.nrm(14,"button",89),e.j41(15,"button",90),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()()()()()}if(2&o){const t=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",t.loaderOperationShap)("loaderId",t.deleteLoader),e.R7$(8),e.Y8G("ngIf",t.selectedCallCounter<=2),e.R7$(),e.Y8G("ngIf",t.selectedCallCounter>2)}}function Xo(o,s){if(1&o){const t=e.RV6();e.j41(0,"form",76,7),e.bIt("ngSubmit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.reCallOrder())}),e.nrm(2,"ngx-ui-loader",77),e.j41(3,"div",78)(4,"div",79)(5,"button",80),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(6,"div",81)(7,"div",92)(8,"div",93)(9,"span",94),e.EFF(10," 01 "),e.k0s()(),e.j41(11,"div",95)(12,"h6",96),e.EFF(13),e.k0s(),e.j41(14,"p",97),e.EFF(15),e.nI1(16,"date"),e.k0s()(),e.j41(17,"div",98)(18,"p",97),e.EFF(19),e.nI1(20,"date"),e.k0s()()(),e.j41(21,"div",92)(22,"div",93)(23,"span",94),e.EFF(24," 02 "),e.k0s()(),e.j41(25,"div",95)(26,"h6",96),e.EFF(27),e.k0s(),e.j41(28,"p",97),e.EFF(29),e.nI1(30,"date"),e.k0s()(),e.j41(31,"div",98)(32,"p",97),e.EFF(33),e.nI1(34,"date"),e.k0s()()(),e.j41(35,"div",92)(36,"div",93)(37,"span",94),e.EFF(38," 03 "),e.k0s()(),e.j41(39,"div",95)(40,"h6",96),e.EFF(41),e.k0s(),e.j41(42,"p",97),e.EFF(43),e.nI1(44,"date"),e.k0s()(),e.j41(45,"div",98)(46,"p",97),e.EFF(47),e.nI1(48,"date"),e.k0s()()(),e.j41(49,"div",88)(50,"button",99),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()()()()()}if(2&o){const t=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",t.loaderOperationShap)("loaderId",t.deleteLoader),e.R7$(11),e.JRh(null==t.callHistory?null:t.callHistory.callBy1Name),e.R7$(2),e.SpI("",e.i5U(16,12,null==t.callHistory?null:t.callHistory.callDate1,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.JRh(e.i5U(20,15,null==t.callHistory?null:t.callHistory.callDate1,"HH:mm:ss")),e.R7$(8),e.JRh(null==t.callHistory?null:t.callHistory.callBy2Name),e.R7$(2),e.JRh(e.i5U(30,18,null==t.callHistory?null:t.callHistory.callDate2,"yyyy-MM-dd HH:mm:ss")),e.R7$(4),e.SpI(" ",e.i5U(34,21,null==t.callHistory?null:t.callHistory.callDate2,"HH:mm:ss"),""),e.R7$(8),e.JRh(null==t.callHistory?null:t.callHistory.callBy3Name),e.R7$(2),e.JRh(e.i5U(44,24,null==t.callHistory?null:t.callHistory.callDate3,"yyyy-MM-dd HH:mm:ss")),e.R7$(4),e.SpI(" ",e.i5U(48,27,null==t.callHistory?null:t.callHistory.callDate3,"HH:mm:ss"),"")}}function Oo(o,s){if(1&o){const t=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td")(8,"button",127),e.bIt("click",function(){const n=e.eBV(t).index,a=e.XpG(2);return e.Njj(a.deleteService(n))}),e.nrm(9,"i",128),e.k0s()()()}if(2&o){const t=s.$implicit;e.R7$(2),e.JRh(t.service),e.R7$(2),e.JRh(t.price),e.R7$(2),e.JRh(t.notes)}}function Bo(o,s){1&o&&(e.j41(0,"tr")(1,"td",129),e.EFF(2),e.nI1(3,"translate"),e.k0s()()),2&o&&(e.R7$(2),e.JRh(e.bMT(3,1,"orderManagement.order.noData")))}function Po(o,s){if(1&o){const t=e.RV6();e.j41(0,"form",null,7),e.nrm(2,"ngx-ui-loader",77),e.j41(3,"div",78)(4,"div",79)(5,"button",80),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(6,"div",81)(7,"div",100)(8,"div",14)(9,"div",101)(10,"label",102),e.EFF(11,"orderManagement.order.cityName"),e.k0s(),e.j41(12,"ng-select",103,8),e.bIt("change",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.getDistricts(n.code))}),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.evaluationForm.cityCode,n)||(a.evaluationForm.cityCode=n),e.Njj(n)}),e.k0s()(),e.j41(14,"div",101)(15,"label",102),e.EFF(16,"orderManagement.order.districtName"),e.k0s(),e.j41(17,"ng-select",104,9),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.evaluationForm.districtCode,n)||(a.evaluationForm.districtCode=n),e.Njj(n)}),e.k0s()(),e.j41(19,"div",101)(20,"label",105),e.EFF(21,"orderManagement.order.date"),e.k0s(),e.j41(22,"div",106)(23,"input",107,10),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.evaluationForm.visitDate,n)||(a.evaluationForm.visitDate=n),e.Njj(n)}),e.k0s()()()(),e.j41(25,"div",108)(26,"div",109)(27,"label",102),e.EFF(28,"orderManagement.order.services"),e.k0s()(),e.j41(29,"div",101)(30,"ng-select",110,11),e.nI1(32,"translate"),e.bIt("change",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.setService(n))}),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.evaluationForm.serviceCode,n)||(a.evaluationForm.serviceCode=n),e.Njj(n)}),e.k0s()(),e.j41(33,"div",101)(34,"div",106)(35,"input",111,12),e.nI1(37,"translate"),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.evaluationForm.note,n)||(a.evaluationForm.note=n),e.Njj(n)}),e.k0s()()(),e.j41(38,"div",109)(39,"button",112),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.addService())}),e.nrm(40,"i",113),e.k0s()(),e.j41(41,"div",114)(42,"table",115)(43,"thead")(44,"tr")(45,"th",116),e.EFF(46," orderManagement.order.service "),e.k0s(),e.j41(47,"th",116),e.EFF(48," orderManagement.order.price "),e.k0s(),e.j41(49,"th",116),e.EFF(50," orderManagement.order.notes "),e.k0s(),e.j41(51,"th",116),e.EFF(52," orderManagement.order.actions "),e.k0s()()(),e.j41(53,"tbody"),e.DNE(54,Oo,10,3,"tr",117)(55,Bo,4,3,"tr",86),e.k0s()()()(),e.j41(56,"div",118)(57,"div",119)(58,"label",120),e.EFF(59),e.nI1(60,"translate"),e.k0s(),e.j41(61,"p-checkbox",121),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.evaluationForm.isUrgent,n)||(a.evaluationForm.isUrgent=n),e.Njj(n)}),e.k0s()(),e.j41(62,"div",122)(63,"label",123),e.EFF(64,"orderManagement.order.notes"),e.k0s(),e.j41(65,"textarea",124,13),e.nI1(67,"translate"),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.evaluationForm.notes,n)||(a.evaluationForm.notes=n),e.Njj(n)}),e.EFF(68,"                            "),e.k0s()()(),e.j41(69,"div",125)(70,"button",126),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.submitEvaluation())}),e.k0s(),e.j41(71,"button",90),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()()()()()()}if(2&o){const t=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",t.loaderOperationShap)("loaderId",t.deleteLoader),e.R7$(10),e.Y8G("items",t.cities)("multiple",!1),e.R50("ngModel",t.evaluationForm.cityCode),e.R7$(5),e.Y8G("items",t.districts)("multiple",!1),e.R50("ngModel",t.evaluationForm.districtCode),e.R7$(6),e.R50("ngModel",t.evaluationForm.visitDate),e.R7$(7),e.FS9("placeholder",e.bMT(32,23,"orderManagement.order.services")),e.Y8G("items",t.services)("multiple",!1),e.R50("ngModel",t.evaluationForm.serviceCode),e.R7$(5),e.FS9("placeholder",e.bMT(37,25,"orderManagement.order.notes")),e.R50("ngModel",t.evaluationForm.note),e.R7$(19),e.Y8G("ngForOf",t.evaluationForm.evaluationServices),e.R7$(),e.Y8G("ngIf",!t.evaluationForm.evaluationServices.length),e.R7$(4),e.SpI(" ",e.bMT(60,27,"orderManagement.order.isUrgent")," "),e.R7$(2),e.R50("ngModel",t.evaluationForm.isUrgent),e.Y8G("binary",!0),e.R7$(4),e.FS9("placeholder",e.bMT(67,29,"orderManagement.order.notes")),e.R50("ngModel",t.evaluationForm.notes)}}function Ao(o,s){if(1&o&&e.nrm(0,"order-operation",130),2&o){const t=e.XpG();e.Y8G("pendingCode",t.orderOpen.pendingCode)("agentName",t.orderOpen.agentName)("cityCode",t.orderOpen.cityId)("isOrderEdit",!0)("isInner",!1)("mobile",t.orderOpen.mobile)}}function $o(o,s){if(1&o){const t=e.RV6();e.j41(0,"form",76,7),e.bIt("ngSubmit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.goLead())}),e.nrm(2,"ngx-ui-loader",77),e.j41(3,"div",78)(4,"div",79)(5,"button",80),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(6,"div",81)(7,"div",82),e.nrm(8,"lord-icon",83),e.j41(9,"div",84)(10,"h4"),e.EFF(11),e.nI1(12,"translate"),e.k0s(),e.nrm(13,"p",87),e.k0s()(),e.j41(14,"div",88),e.nrm(15,"button",89),e.j41(16,"button",90),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()()()()()}if(2&o){const t=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",t.loaderOperationShap)("loaderId","leadLoader"),e.R7$(9),e.SpI(" ",e.bMT(12,4,"orderManagement.order.sureGoLead")," ")}}let Yo=(()=>{class o extends G.w{constructor(t,i,n,a,l,r,h,v,R,S,E,$,k,Y,Q,Z,A){super(t,i,v,n,l,r,h),this.baseService=n,this.orderPendingService=a,this.authDaamService=R,this.excelService=S,this.cityService=E,this.districtService=$,this.channelService=k,this._clientService=Y,this._evaluationService=Q,this._servicesService=Z,this.router=A,this.title="orderManagement.order.titleRecall",this.titleOperation="orderManagement.order.titleOperation",this.keySelected="",this.assignUsers=[],this.times=[],this.employees=[],this.searchForm={},this.isResolveList=!0,this.employeeTypes=[{id:1,name:"employeeTeam"},{id:2,name:"managment"},{id:3,name:"customerService"}],this.employeeGroups=[],this.activeindex="1",this.active=1,this.formPassword={},this.roles=[],this.userTypes=[],this.actives=[{id:!0,name:"active"},{id:!1,name:"noActive"}],this.countLoad=2,this.orderSelected=0,this.selectedCallCounter=0,this.cities=[],this.districts=[],this.services=[],this.channels=[],this.callHistory={},this.orderOpen={},this.evaluationForm={evaluationServices:[],isUrgent:!1},this.GetPenddingCount=new e.bkB,this.setDates=(X,ne,le)=>{if(X?.from||X?.to){const Xe=X.to||X.from;this.pagination[ne]=this.datePipe.transform(X.from||X.to,"yyyy-MM-ddT00:00:00"),this.pagination[le]=this.datePipe.transform(Xe,"yyyy-MM-ddT23:59:59.999")}else this.pagination[ne]=null,this.pagination[le]=null},this.GetCities(),this.GetChannels(),this.GetServicesDropDown()}GetCities(){this.cityService.getDropDown().subscribe(t=>{this.cities=t.data},t=>{console.log(t)})}getDistricts(t){this.districtService.getByCityId(t).subscribe(i=>{this.districts=i.data},i=>{console.log(i)})}GetChannels(){this.channelService.getDropDown().subscribe(t=>{this.channels=t.data},t=>{console.log(t)})}GetServicesDropDown(){this._servicesService.getDropDown().subscribe(t=>{this.services=t.data},t=>{console.log(t)})}ngOnInitMore(){}mapForm(t){return{...t}}onUpdateIsActive(t){this.baseService.updateActive(t).pipe((0,p.Q)(this.notifier)).subscribe(i=>{i?this.alertService.success():this.alertService.error("general.message."+i)},i=>{this.alertService.error()})}mapRegisterForm(t){let i={...t};return i.employeeCode=0,i}onSearch(){let t={...this.searchForm};this.ngxLoader.startLoader(u.a7),this.setDates(t.dates,"visitDateFrom","visitDateTo"),this.setDates(t.creationDates,"createdDateFrom","createdDateTo"),this.loadentities()}loadentities(){this.countLoad=this.countLoad+1,(!this.isResolveList||1!==this.countLoad)&&(this.ngxLoader.startLoader("recallLoader"),this.orderPendingService.GetAllRecallOrder(this.pagination).pipe((0,p.Q)(this.notifier)).subscribe(t=>{this.ngxLoader.stopLoader("recallLoader"),this.entities=t.data,this.pagination.totalItems=t.totalItems,this.LoadSuccess()},t=>{this.ngxLoader.stopLoader("recallLoader"),this.alertService.error(t)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[])}mapExcel(){let t=[];return this.entities.forEach(i=>{t.push({"Order Code":i.pendingCode,"Last Call Date":i.lastCallDate,"Agent Name":i.agentName,Mobile:i.mobile,"City Name":i.cityName})}),t}reCallOrder(){this.ngxLoader.startLoader(u.Fq),this.baseService.UpdateCallCounter(this.orderSelected).pipe((0,j.O)(),(0,M.c)(this.mainDelay),(0,y.Z)(),(0,p.Q)(this.notifier),(0,I.j)(()=>this.ngxLoader.stopLoader(u.Fq))).subscribe({next:t=>{this.modalService.dismissAll(),this.GetPenddingCount.next(!0),this.loadentities(),this.alertService.success()}})}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,this.translateService.instant(this.title),[])}onNavChange(t){1===t.nextId&&(this.activeindex="1"),3===t.nextId&&(this.activeindex="3")}goRegister(){this.router.navigateByUrl("/managment/order/new")}goEdit(t){this.router.navigateByUrl("/managment/order/new")}getStatus(t){return t.isCancel?"bg-warning-subtle text-warning":t.isFinish?"bg-success-subtle text-success":t.isUrgent?"bg-danger-subtle text-danger":t.isReopen||t.isFree?"bg-warning-subtle text-warning":"bg-success-subtle text-success"}getTrnslate(t){return t.isCancel?"orderManagement.order.cancel":t.isFinish?"orderManagement.order.finish":t.isUrgent?"bg-danger-subtle text-danger":t.isReopen?"orderManagement.order.reopen":t.isFree?"orderManagement.order.free":"orderManagement.order.finished"}openModal(t,i,n="md"){this.orderSelected=t.pendingCode,this.selectedCallCounter=t.callCounter,this.modalService.open(i,{centered:!0,size:n})}oncityChange(t){this.getDistricts(t.code)}onCallHistoryModal(t,i,n="md"){this.orderPendingService.GetCallHistory(t).pipe((0,p.Q)(this.notifier)).subscribe(a=>{this.callHistory=a.data,this.GetPenddingCount.next(!0),this.modalService.open(i,{centered:!0,size:n})},()=>{this.alertService.error()})}copytext(t){navigator.clipboard.writeText(t),this.alertService.info(t)}setService(t){console.log(t),this.evaluationForm.service=t.name,this.evaluationForm.price=t.price}addService(){this.evaluationForm.evaluationServices.push({service:this.evaluationForm.service,serviceCode:this.evaluationForm.serviceCode,price:this.evaluationForm.price,notes:this.evaluationForm.note})}deleteService(t){console.log(t),this.evaluationForm.evaluationServices.splice(t,1)}submitEvaluation(){this._evaluationService.register(this.evaluationForm).subscribe(t=>{t.success?(this.modalService.dismissAll(),this.alertService.success(),this.evaluationForm={},this.loadentities()):this.alertService.error(t.message)},t=>{console.log(t)})}openEvaluationModal(t,i,n,a="md"){this._clientService.GetByMobile(i).subscribe(l=>{this.orderSelected=t.pendingCode,this.evaluationForm.pendingCode=t.pendingCode,this.modalService.open(n,{centered:!0,size:a}),this.clientMobileInf=t.data,this.evaluationForm.cityCode=t.cityCode,this.evaluationForm.agentName=t.name,this.evaluationForm.mobile=t.mobile,this.evaluationForm.agentCode=0,this.evaluationForm.districtCode=l.channelCode,l.data?(this.evaluationForm.agentCode=l.agentCode,this.alertService.info("orderManagement.order.clientExist")):this.alertService.info("orderManagement.order.clientNotExist")},l=>{console.log(l)})}openOrderModal(t,i,n="md"){this.orderOpen.mobile=t.mobile,this.orderOpen.cityId=t.cityCode,this.orderOpen.agentName=t.name,this.orderOpen.pendingCode=t.pendingCode,this.modalService.open(i,{centered:!0,size:n})}openLeadModal(t,i,n="md"){this.orderSelected=t.pendingCode,this.modalService.open(i,{centered:!0,size:n})}goLead(){this.ngxLoader.startLoader("leadLoader"),this.baseService.GoLead(this.orderSelected).pipe((0,p.Q)(this.notifier),(0,I.j)(()=>this.ngxLoader.stopAllLoader("leadLoader"))).subscribe(t=>{t.success?(this.GetPenddingCount.next(!0),this.loadentities(),this.modalService.dismissAll()):this.alertService.error()},t=>{this.alertService.error()})}onReset(){this.form={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems},this.searchForm={},this.loadentities()}static{this.\u0275fac=function(i){return new(i||o)(e.rXU(f.nX),e.rXU(_.c$),e.rXU(_e.Q),e.rXU(Ne.H),e.rXU(F.u),e.rXU(g.vh),e.rXU(b.eD),e.rXU(m.Bq),e.rXU(ue.J),e.rXU(O.V),e.rXU(he.h),e.rXU(Se.m),e.rXU(Te.l),e.rXU(z.X),e.rXU(at.W),e.rXU(it.N),e.rXU(f.Ix))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-recall-orders"]],outputs:{GetPenddingCount:"GetPenddingCount"},features:[e.Vt3],decls:48,vars:34,consts:[["tableMaster",""],["deleteModal",""],["recallModal",""],["callHistoryModal",""],["evaluateModal",""],["orderModel",""],["goLeadModal",""],["formEntity","ngForm"],["cityCode","ngModel"],["districtCode","ngModel"],["visitDate","ngModel"],["serviceCode","ngModel"],["note","ngModel"],["notes","ngModel"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],["overlayColor","rgba(255,255,255,0.05)","fgsColor","rgba(255,255,255,0)",3,"loaderId"],[3,"reset","search","exportXlsx","addNew","showAdd","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","number","id","filterValue","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["InputTirmFilter","","type","search","id","agentName","name","agentName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["InputTirmFilter","","type","search","id","filterValue","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["name","name","bindValue","code","bindLabel","name",3,"change","ngModelChange","placeholder","items","multiple","ngModel"],[1,"col-12","col-md-4","mb-2"],["type","text","mwlFlatpickr","","id","isDate","mode","range",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["translate","",2,"width",".5%"],["pSortableColumn","pendingCode","translate","",2,"width","6%"],[1,"ri-expand-up-down-line"],["translate","",2,"width","12%"],["pSortableColumn","agentCode","translate","",2,"width","5%"],["pSortableColumn","mobile","translate","",2,"width","10%"],["pSortableColumn","cityCode","translate","",2,"width","8%"],["pSortableColumn","callCounter","translate","",2,"width","8%"],["translate","",2,"width","10%"],[1,"fs-5"],[1,"cursor-pointer","badge","bg-danger-subtle","text-danger","fs-6",3,"click"],[1,"ri-clipboard-line"],[1,"cursor-pointer"],["tooltipPosition","top","type","button",1,"btn","btn-sm","btn-label","waves-effect","waves-light","rounded-pill","mx-1",3,"click","pTooltip","ngClass"],[1,"label-icon","align-middle","rounded-pill","fs-20","me-2"],["translate","orderManagement.order.Recall"],[1,"ri-history-fill","d-inline","text-primary","fs-16","align-middle","me-1",3,"click"],[1,"d-inline"],[1,"dropdown-custom"],["type","button",1,"btn","dropbtn","btn-soft-secondary","btn-sm","dropdown-custom","arrow-none"],[1,"ri-more-fill"],[1,"dropdown-menu","dropdown-menu-end","dropdown-content",2,"left","0"],[3,"click",4,"hasPermission"],[3,"click"],["href","javascript:void(0);","data-bs-toggle","modal","data-bs-target","#removeItemModal",1,"dropdown-item"],[1,"ri-questionnaire-line","align-bottom","me-2","text-muted"],["translate","orderManagement.order.addToLead"],[1,"ri-article-line","align-bottom","me-2","text-muted"],["translate","orderManagement.order.evaluation"],[1,"ri-file-add-line","align-bottom","me-2","text-muted"],["translate","orderManagement.order.orderNew"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[3,"deleteConfirm","dismiss"],[3,"ngSubmit"],[3,"hasProgressBar","fgsType","loaderId"],[1,"modal-content"],[1,"modal-header"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","btn-close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mt-2","text-center"],["src","https://cdn.lordicon.com/gdfrsvpt.json","stroke","bold","state","hover-oscillate","trigger","loop","colors","primary:#f7b84b,secondary:#f06548",2,"width","130px","height","130px"],[1,"pt-2","fs-15","mx-4","mx-sm-5"],["translate","orderManagement.order.RecallMessage",4,"ngIf"],[4,"ngIf"],[1,"text-muted","mx-4","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","submit","id","save","translate","general.action.save",1,"btn","w-sm","btn-danger"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light",3,"click"],["translate","orderManagement.order.RecallMessage"],[1,"mini-stats-wid","d-flex","align-items-center","mt-3"],[1,"flex-shrink-0","avatar-sm"],[1,"mini-stat-icon","avatar-title","rounded-circle","text-success","bg-success-subtle","fs-4"],[1,"flex-grow-1","ms-3"],[1,"mb-1"],[1,"text-muted","mb-0"],[1,"flex-shrink-0"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-danger",3,"click"],[1,"mx-4"],[1,"col-12","col-md-4","mb-3"],["translate","",1,"fw-bold","form-label","w-100"],["name","cityCode","bindValue","code","bindLabel","name",3,"change","ngModelChange","items","multiple","ngModel"],["name","districtCode","bindValue","code","bindLabel","name",3,"ngModelChange","items","multiple","ngModel"],["for","visitDate","translate","",1,"fw-bold","form-label"],[1,"input-group"],["InputTirmFilter","","name","mobile","type","date","id","visitDate",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,"mt-4","row",2,"border-top","1px solid rgba(128,128,128,0.29)"],[1,"col-md-2","mb-3"],["name","serviceCode","bindValue","code","bindLabel","name",3,"change","ngModelChange","items","multiple","placeholder","ngModel"],["InputTirmFilter","","name","note","type","text","id","notes",1,"form-control","fs-6",3,"ngModelChange","placeholder","ngModel"],[1,"btn","btn-success","py-1","px-2",3,"click"],[1,"ri-add-fill",2,"font-size","1.2rem"],[1,"col-12","text-center","mt-4"],[1,"table","table-bordered"],["translate",""],[4,"ngFor","ngForOf"],[1,"mt-4","pt-3","row",2,"border-top","1px solid rgba(128,128,128,0.29)"],[1,"col-md-12","mb-3","d-flex"],[1,"fw-bold","form-label","w-25"],["name","isUrgent",3,"ngModelChange","ngModel","binary"],[1,"col-12","col-md-12","mb-3","d-flex"],["translate","",1,"fw-bold","form-label","w-25"],["InputTirmFilter","","name","note","rows","3",1,"form-control","fs-6","w-75",3,"ngModelChange","placeholder","ngModel"],[1,"d-flex","gap-2","justify-content-end","mt-4","mb-2"],["type","submit","id","save","translate","general.action.save",1,"btn","w-sm","btn-danger",3,"click"],[1,"btn","btn-danger","py-1","px-2",3,"click"],[1,"ri-delete-bin-3-fill",2,"font-size","1.2rem"],["colspan","4"],[3,"pendingCode","agentName","cityCode","isOrderEdit","isInner","mobile"]],template:function(i,n){if(1&i){const a=e.RV6();e.j41(0,"div",14)(1,"div",15)(2,"div",16),e.nrm(3,"ngx-ui-loader",17),e.j41(4,"base-filter",18),e.bIt("reset",function(){return e.eBV(a),e.Njj(n.onReset())})("search",function(){return e.eBV(a),e.Njj(n.onSearch())})("exportXlsx",function(){return e.eBV(a),e.Njj(n.onExportXlsx())})("addNew",function(){return e.eBV(a),e.Njj(n.goRegister())}),e.qex(5,19),e.j41(6,"div",20)(7,"div",21)(8,"input",22),e.nI1(9,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.pendingCode,r)||(n.pagination.pendingCode=r),e.Njj(r)}),e.k0s(),e.nrm(10,"i",23),e.k0s()(),e.j41(11,"div",20)(12,"div",21)(13,"input",24),e.nI1(14,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.agentName,r)||(n.pagination.agentName=r),e.Njj(r)}),e.k0s(),e.nrm(15,"i",23),e.k0s()(),e.j41(16,"div",20)(17,"div",21)(18,"input",25),e.nI1(19,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.mobile,r)||(n.pagination.mobile=r),e.Njj(r)}),e.k0s(),e.nrm(20,"i",23),e.k0s()(),e.j41(21,"div",20)(22,"div",21)(23,"ng-select",26),e.nI1(24,"translate"),e.bIt("change",function(r){return e.eBV(a),e.Njj(n.oncityChange(r))}),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.cityCode,r)||(n.pagination.cityCode=r),e.Njj(r)}),e.k0s()()(),e.j41(25,"div",27)(26,"input",28),e.nI1(27,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.searchForm.creationDates,r)||(n.searchForm.creationDates=r),e.Njj(r)}),e.k0s()(),e.bVm(),e.k0s(),e.j41(28,"div",29)(29,"div",30)(30,"p-table",31,0),e.bIt("onLazyLoad",function(r){return e.eBV(a),e.Njj(n.tableChange(r))})("selectionChange",function(r){return e.eBV(a),e.Njj(n.onSelectionChange(r))}),e.DNE(32,So,21,0,"ng-template",32)(33,xo,32,24,"ng-template",33),e.k0s()(),e.DNE(34,No,2,0,"div",34)(35,Go,6,8,"div",35),e.k0s()()()(),e.DNE(36,Eo,1,0,"ng-template",null,1,e.C5r)(38,Lo,16,5,"ng-template",null,2,e.C5r)(40,Xo,51,30,"ng-template",null,3,e.C5r)(42,Po,72,31,"ng-template",null,4,e.C5r)(44,Ao,1,6,"ng-template",null,5,e.C5r)(46,$o,17,6,"ng-template",null,6,e.C5r)}2&i&&(e.R7$(3),e.Y8G("loaderId","recallLoader"),e.R7$(),e.Y8G("showAdd",!1)("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(4),e.FS9("placeholder",e.bMT(9,24,"orderManagement.order.orderCode")),e.R50("ngModel",n.pagination.pendingCode),e.R7$(5),e.FS9("placeholder",e.bMT(14,26,"orderManagement.order.agentName")),e.R50("ngModel",n.pagination.agentName),e.R7$(5),e.FS9("placeholder",e.bMT(19,28,"orderManagement.order.mobile")),e.R50("ngModel",n.pagination.mobile),e.R7$(5),e.FS9("placeholder",e.bMT(24,30,"orderManagement.order.cityName")),e.Y8G("items",n.cities)("multiple",!1),e.R50("ngModel",n.pagination.cityCode),e.R7$(3),e.FS9("placeholder",e.bMT(27,32,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.creationDates),e.R7$(4),e.Y8G("value",n.entities)("rows",n.pagination.pageSize)("lazy",!0)("totalRecords",n.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",n.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems>0))},dependencies:[g.YU,g.Sq,g.bT,c.qT,c.me,c.Q0,c.BC,c.cb,c.vS,c.cV,m.s5,B.kL,D.b,de.L,P.w,V.p,L.g,x.m,U.p,_.Mm,C.XI,N.Ei,C.Tg,Ge.Sc,b.Cv,T.vr,Ee.m,g.vh,_.D9],encapsulation:2})}}return o})();const Uo=()=>["pending.view"],Ho=()=>["recall.view"];function zo(o,s){if(1&o&&(e.j41(0,"span",11),e.EFF(1),e.k0s()),2&o){const t=e.XpG(2);e.R7$(),e.JRh(t.pendingCount.pending)}}function Qo(o,s){if(1&o){const t=e.RV6();e.j41(0,"app-pending-order",12),e.bIt("GetPenddingCount",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.GetAllRecallOrder())}),e.k0s()}}function qo(o,s){if(1&o&&(e.j41(0,"li",6)(1,"a",7),e.nrm(2,"span",8),e.DNE(3,zo,2,1,"span",9),e.k0s(),e.DNE(4,Qo,1,0,"ng-template",10),e.k0s()),2&o){const t=e.XpG();e.Y8G("ngbNavItem",1),e.R7$(3),e.Y8G("ngIf",0!=t.pendingCount.pending)}}function Jo(o,s){if(1&o&&(e.j41(0,"span",11),e.EFF(1),e.k0s()),2&o){const t=e.XpG(2);e.R7$(),e.JRh(t.pendingCount.recall)}}function Wo(o,s){if(1&o){const t=e.RV6();e.j41(0,"app-recall-orders",12),e.bIt("GetPenddingCount",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.GetAllRecallOrder())}),e.k0s()}}function Ko(o,s){if(1&o&&(e.j41(0,"li",6)(1,"a",7),e.nrm(2,"span",13),e.DNE(3,Jo,2,1,"span",9),e.k0s(),e.DNE(4,Wo,1,0,"ng-template",10),e.k0s()),2&o){const t=e.XpG();e.Y8G("ngbNavItem",2),e.R7$(3),e.Y8G("ngIf",0!=t.pendingCount.recall)}}let Zo=(()=>{class o extends G.w{constructor(t,i,n,a,l,r,h,v,R){super(t,i,h,n,a,l,r),this.baseService=n,this.authDaamService=v,this.orderPendingService=R,this.title="orderManagement.order.title",this.titleOperation="orderManagement.order.titleOperation",this.active=1,this.activeindex="1",this.pendingCount={},this.GetAllRecallOrder()}onNavChange(t){1===t.nextId&&(this.activeindex="1"),3===t.nextId&&(this.activeindex="3")}GetAllRecallOrder(){this.orderPendingService.GetCountPending().subscribe(t=>{this.pendingCount=t.data},t=>{console.log(t)})}static{this.\u0275fac=function(i){return new(i||o)(e.rXU(f.nX),e.rXU(_.c$),e.rXU(_e.Q),e.rXU(F.u),e.rXU(g.vh),e.rXU(b.eD),e.rXU(m.Bq),e.rXU(ue.J),e.rXU(Ne.H))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-crm-order"]],features:[e.Vt3],decls:7,vars:6,consts:[["nav","ngbNav"],[1,"row"],[1,"col-lg-12"],["ngbNav","",1,"nav","nav-tabs-custom","card-header-tabs","border-bottom-0",3,"activeIdChange","navChange","activeId"],[3,"ngbNavItem",4,"hasPermission"],[1,"mt-2",3,"ngbNavOutlet"],[3,"ngbNavItem"],["ngbNavLink","",1,"d-flex","align-items-center"],["translate","orderManagement.order.pending"],["class","ms-2 badge bg-warning",4,"ngIf"],["ngbNavContent",""],[1,"ms-2","badge","bg-warning"],[3,"GetPenddingCount"],["translate","orderManagement.order.Recall"]],template:function(i,n){if(1&i){const a=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"ul",3,0),e.mxI("activeIdChange",function(r){return e.eBV(a),e.DH7(n.active,r)||(n.active=r),e.Njj(r)}),e.bIt("navChange",function(r){return e.eBV(a),e.Njj(n.onNavChange(r))}),e.DNE(4,qo,5,2,"li",4)(5,Ko,5,2,"li",4),e.k0s(),e.nrm(6,"div",5),e.k0s()()}if(2&i){const a=e.sdS(3);e.R7$(2),e.R50("activeId",n.active),e.R7$(2),e.Y8G("hasPermission",e.lJ4(4,Uo)),e.R7$(),e.Y8G("hasPermission",e.lJ4(5,Ho)),e.R7$(),e.Y8G("ngbNavOutlet",a)}},dependencies:[g.bT,m.Um,m.X9,m.sy,m.Gx,m.Ri,m.WA,m.m_,U.p,_.Mm,jo,Yo],encapsulation:2})}}return o})();var De=d(26366),Ve=d(50969);const er=()=>["CrmCompanyClient.register"],tr=o=>({"bg-danger text-white":o}),ot=()=>["CrmCompanyClient.edit"],nr=()=>["CrmCompanyClient.delete"];function ir(o,s){1&o&&(e.j41(0,"tr",32)(1,"th",33),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",34),e.nrm(4,"i",35),e.EFF(5," client.client.odooId "),e.k0s(),e.j41(6,"th",36),e.nrm(7,"i",35),e.EFF(8," general.table.name "),e.k0s(),e.j41(9,"th",37),e.nrm(10,"i",35),e.EFF(11," client.client.cityName "),e.k0s(),e.j41(12,"th",38),e.EFF(13," client.client.priceListName "),e.k0s(),e.j41(14,"th",39),e.nrm(15,"i",35),e.EFF(16," client.client.clientGroupName "),e.k0s(),e.j41(17,"th",40),e.nrm(18,"i",35),e.EFF(19," client.client.salesPersonName "),e.k0s(),e.j41(20,"th",41),e.nrm(21,"i",35),e.EFF(22," client.client.CreditLimit "),e.k0s(),e.j41(23,"th",42),e.nrm(24,"i",35),e.EFF(25," client.client.vatNumber "),e.k0s(),e.j41(26,"th",43),e.nrm(27,"i",35),e.EFF(28," client.client.commercialRegistrationNumber "),e.k0s(),e.j41(29,"th",44),e.nrm(30,"i",35),e.EFF(31," general.table.isActive "),e.k0s(),e.j41(32,"th",45),e.nrm(33,"i",35),e.EFF(34," client.client.isComplete "),e.k0s(),e.nrm(35,"th",46),e.k0s())}function ar(o,s){if(1&o&&(e.nrm(0,"i",61),e.EFF(1),e.nI1(2,"date"),e.nrm(3,"br")(4,"i",62),e.EFF(5),e.nI1(6,"date"),e.nrm(7,"br")),2&o){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.i5U(2,2,t.createdDate,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",e.i5U(6,5,t.updatedDate,"yyyy-MM-dd HH:mm:ss")," ")}}function or(o,s){if(1&o){const t=e.RV6();e.j41(0,"li",49),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,a=e.XpG();return e.Njj(a.goClientEdit(n.agentCode))}),e.j41(1,"span",63),e.nrm(2,"i",64)(3,"span",65),e.k0s()()}}function rr(o,s){if(1&o){const t=e.RV6();e.j41(0,"li",49),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,a=e.XpG();return e.Njj(a.goClientProfile(n.agentCode))}),e.j41(1,"span",63),e.nrm(2,"i",66)(3,"span",67),e.k0s()()}}function lr(o,s){if(1&o){const t=e.RV6();e.j41(0,"li",49),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,a=e.XpG(),l=e.sdS(60);return e.Njj(a.openModal(n.userCode,l))}),e.j41(1,"a",68),e.nrm(2,"i",69)(3,"span",70),e.k0s()()}}function sr(o,s){if(1&o){const t=e.RV6();e.j41(0,"tr",47)(1,"td",48),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td",49),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),l=e.sdS(62);return e.Njj(a.openModal(n.agentCode,l,"md"))}),e.nrm(6,"i",50),e.j41(7,"a",51),e.EFF(8),e.k0s()(),e.j41(9,"td")(10,"a",52),e.EFF(11),e.k0s()(),e.j41(12,"td")(13,"span",53),e.EFF(14),e.k0s()(),e.j41(15,"td"),e.EFF(16),e.k0s(),e.j41(17,"td"),e.EFF(18),e.k0s(),e.j41(19,"td"),e.EFF(20),e.k0s(),e.j41(21,"td"),e.EFF(22),e.k0s(),e.j41(23,"td"),e.EFF(24),e.k0s(),e.j41(25,"td")(26,"p-inputSwitch",54),e.bIt("ngModelChange",function(){const n=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.onUpdateIsActive(n.agentCode))}),e.mxI("ngModelChange",function(n){const a=e.eBV(t).$implicit;return e.DH7(a.isActive,n)||(a.isActive=n),e.Njj(n)}),e.k0s()(),e.j41(27,"td")(28,"p-inputSwitch",54),e.bIt("ngModelChange",function(){const n=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.onUpdateIsComplete(n.agentCode))}),e.mxI("ngModelChange",function(n){const a=e.eBV(t).$implicit;return e.DH7(a.isComplete,n)||(a.isComplete=n),e.Njj(n)}),e.k0s()(),e.j41(29,"td"),e.DNE(30,ar,8,8,"ng-template",null,4,e.C5r),e.j41(32,"span",55)(33,"div",56)(34,"button",57),e.nrm(35,"i",58),e.k0s(),e.j41(36,"ul",59),e.DNE(37,or,4,0,"li",60)(38,rr,4,0,"li",60)(39,lr,4,0,"li",60),e.k0s()()()()()}if(2&o){const t=s.$implicit,i=s.rowIndex,n=e.sdS(31),a=e.XpG();e.R7$(),e.Y8G("ngClass",e.eq3(23,tr,!t.isComplete)),e.R7$(),e.JRh(i+1),e.R7$(2),e.JRh(t.odooId),e.R7$(2),e.Y8G("ngbTooltip",n),e.R7$(2),e.SpI(" ",t.agentName," "),e.R7$(2),e.AVh("text-success",t.lng)("text-danger",!t.lng),e.Y8G("href",a.mapUrl(t.lat,t.lng),e.B4B),e.R7$(),e.SpI(" ",t.cityName," "),e.R7$(3),e.Lme(" ",2==t.discountType?"%":""," ",t.discount,""),e.R7$(2),e.JRh(t.clientGroupName),e.R7$(2),e.SpI(" ",t.salesPersonName," "),e.R7$(2),e.JRh(t.creditLimit),e.R7$(2),e.JRh(t.vatNumber),e.R7$(2),e.JRh(t.commercialRegistrationNumber),e.R7$(2),e.R50("ngModel",t.isActive),e.R7$(2),e.R50("ngModel",t.isComplete),e.R7$(9),e.Y8G("hasPermission",e.lJ4(25,ot)),e.R7$(),e.Y8G("hasPermission",e.lJ4(26,ot)),e.R7$(),e.Y8G("hasPermission",e.lJ4(27,nr))}}function cr(o,s){1&o&&(e.j41(0,"div",71),e.EFF(1," general.table.noData "),e.k0s())}function dr(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",72)(1,"div",73),e.nrm(2,"ngb-pagination-info",74),e.j41(3,"table-length",75),e.bIt("lengthChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",76)(5,"ngb-pagination",77),e.bIt("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.pagination.pageNumber,n)||(a.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&o){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function mr(o,s){if(1&o){const t=e.RV6();e.j41(0,"delete-modal",78),e.bIt("deleteConfirm",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.DeleteConfirm())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}}function pr(o,s){if(1&o){const t=e.RV6();e.j41(0,"client-summary",79),e.bIt("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}if(2&o){const t=e.XpG();e.Y8G("clientId",t.operationId)}}function gr(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",80)(1,"div",81),e.nrm(2,"h3",82),e.j41(3,"button",83),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(4,"div",84)(5,"google-map",85),e.nrm(6,"map-marker",86),e.k0s(),e.j41(7,"div",87)(8,"button",88),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()()()()}if(2&o){const t=e.XpG();e.R7$(5),e.Y8G("options",t.mapOptions)("center",t.center)("zoom",t.zoom),e.R7$(),e.Y8G("position",t.markerPosition)}}let _r=(()=>{class o extends G.w{constructor(t,i,n,a,l,r,h,v,R,S,E){super(i,n,v,a,l,r,h),this.router=t,this.baseService=a,this.excelService=S,this.encrptAervice=E,this.title="client.clientCompany.title",this.titleOperation="client.clientCompany.titleOperation",this.keySelected="",this.assignUsers=[],this.times=[],this.employees=[],this.searchForm={},this.cities={},this.channels={},this.status={},this.clientType={individualCount:0,companyCount:0},this.num=0,this.option={startVal:this.num,useEasing:!0,duration:2,decimalPlaces:0},this.clientGroups=[],this.regions=[],this.sales=[],this.priceList=[],this.center={lat:0,lng:0},this.zoom=15,this.markerPosition=null,this.mapOptions={disableDefaultUI:!0,draggable:!1,gestureHandling:"none",zoomControl:!0},this.isResolveList=!0,this.configRoute(),this.GetAgentLookUps()}onUpdateIsActive(t){this.baseService.updateActive(t).pipe((0,p.Q)(this.notifier)).subscribe(i=>{i?this.alertService.success():this.alertService.error("general.message."+i)},i=>{this.alertService.error()})}onUpdateIsComplete(t){this.baseService.updateComplete(t).pipe((0,p.Q)(this.notifier)).subscribe(i=>{i?this.alertService.success():this.alertService.error("general.message."+i)},i=>{this.alertService.error()})}ngOnInitMore(){}mapForm(t){let i={...t};return i.id=i.workTimeCode,i}mapRegisterForm(t){let i={...t};return i.workTimeCode=0,i}OnSearch(t){this.ngxLoader.startLoader(u.a7),this.loadentities()}onSearch(){this.ngxLoader.startLoader(u.a7),this.pagination.isActive=1==this.pagination.active||2!=this.pagination.active&&null,this.loadentities()}configRoute(){this.routerActive.data.pipe((0,p.Q)(this.notifier)).subscribe(t=>{this.entities=t.data.data,this.pagination.totalItems=t.data.totalItems},()=>{this.alertService.error()})}mapExcel(){let t=[];return this.entities?.forEach(i=>{t.push({Ref_ID:i.odooId,name:i.agentName,mobile:i.mobile,City_Name:i.cityName,discount:i.discount,National_Address:i.nationalAddress,client_Group_Name:i.clientGroupName,Sale_Person_Name:i.salesPersonName,Credit_Limit:i.creditLimit,Vat_Number:i.vatNumber,Commercial_Registration_Number:i.commercialRegistrationNumber,IsActive:this.getTranslationText("general.table.active")})}),t}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,"Service Type",[])}EditModel(t,i,n="md"){this.isEditForm=!0,this.form={workTimeCode:t.workTimeCode,workTime:t.workTime,notes:t.notes,isActive:t.isActive},this.modalService.open(i,{centered:!0,size:n})}editEntity(){let t=this.mapForm(this.form);this.baseService.editPut(t.id,t).pipe((0,j.O)(),(0,M.c)(this.mainDelay),(0,y.Z)(),(0,p.Q)(this.notifier),(0,I.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(i=>{i.success?this.submitFunished():this.alertService.error("general.message."+i.message)},i=>{this.alertService.error("general.message."+i)})}GetAgentLookUps(){this.baseService.CustomerCompanyLookUps().subscribe(t=>{this.regions=t.data.regions,this.cities=t.data.cities,this.clientGroups=t.data.clientGroups,this.sales=t.data.employees,this.clientGroups=t.data.clientGroups,this.priceList=t.data.priceList},t=>{console.log(t)})}GetAgentTypeCount(){this.baseService.GetAgentTypeCount().subscribe(t=>{this.clientType.individualCount=t.data.countIndividual,this.clientType.companyCount=t.data.countCompany},t=>{console.log(t)})}goClientRegister(){this.router.navigateByUrl("/crm/customerCompanyList/register")}goClientEdit(t){this.router.navigateByUrl("/crm/customerCompanyList/edit",{state:{id:t}})}goClientProfile(t){this.router.navigateByUrl("/crm/customerCompanyList/profile",{state:{id:t}});let i=this.encrptAervice.encode(t.toString());this.router.navigateByUrl("/crm/customerCompanyList/profile/"+i,{state:{id:t}})}applayChart(t,i,n){return{series:i,chart:{type:"radialBar",width:100,sparkline:{enabled:!0}},dataLabels:{enabled:!1},plotOptions:{radialBar:{hollow:{margin:0,size:t+"%"},track:{margin:1},dataLabels:{show:!0,name:{show:!1},value:{show:!0,fontSize:"16px",fontWeight:600,offsetY:8}}}},colors:n=this.getChartColorsArray(n)}}getChartColorsArray(t){return(t=JSON.parse(t)).map(function(i){var n=i.replace(" ","");if(-1===n.indexOf(",")){var a=getComputedStyle(document.documentElement).getPropertyValue(n);return a?a=a.replace(" ",""):n}var l=i.split(",");if(2==l.length){var r=getComputedStyle(document.documentElement).getPropertyValue(l[0]);return"rgba("+r+","+l[1]+")"}return n})}onTypeSelect(t){this.pagination.clientType=t,this.loadentities()}loadentities(){this.countLoad=this.countLoad+1,(!this.isResolveList||1!==this.countLoad)&&(this.pagination.clientType=1,this.baseService.GetClientCompany(this.pagination).pipe((0,p.Q)(this.notifier)).subscribe(t=>{this.ngxLoader.stopLoader(u.a7),this.entities=t.data,this.pagination.totalItems=t.totalItems,this.LoadSuccess()},t=>{this.ngxLoader.stopLoader(u.a7),this.alertService.error(t)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[])}openMapModal(t,i,n,a="lg"){let l=parseFloat(t),r=parseFloat(i);isNaN(l)||isNaN(r)||(this.center={lat:l,lng:r},this.markerPosition={lat:l,lng:r},this.modalService.open(n,{centered:!0,size:a}))}mapUrl(t,i){return`https://www.google.com/maps/dir//${t},${i}/@${t},${i},17z?hl=en-US`}static{this.\u0275fac=function(i){return new(i||o)(e.rXU(f.Ix),e.rXU(f.nX),e.rXU(_.c$),e.rXU(z.X),e.rXU(F.u),e.rXU(g.vh),e.rXU(b.eD),e.rXU(m.Bq),e.rXU(e.gRc),e.rXU(O.V),e.rXU(nt._))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-client-company"]],features:[e.Vt3],decls:65,vars:69,consts:[["tableMaster",""],["deleteModal",""],["ClientInfo",""],["openMap",""],["tooltipContent",""],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],[3,"reset","search","exportXlsx","addNew","addPermission","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","search","id","filterValue","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["InputTirmFilter","","type","search","id","mobile","name","mobile",1,"form-control",3,"ngModelChange","placeholder","ngModel"],["name","regionId","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","placeholder","ngModel"],["name","userType","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","placeholder","ngModel"],["name","clientGroupId","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","placeholder","ngModel"],["name","salesPersonId","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","placeholder","ngModel"],["name","priceListId","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","placeholder","ngModel"],["InputTirmFilter","","type","search","id","creditLimit","name","creditLimit",1,"form-control",3,"ngModelChange","placeholder","ngModel"],["InputTirmFilter","","type","search","id","vatNumber","name","vatNumber",1,"form-control",3,"ngModelChange","placeholder","ngModel"],["InputTirmFilter","","type","search","id","commercialRegistrationNumber","name","commercialRegistrationNumber",1,"form-control",3,"ngModelChange","placeholder","ngModel"],["name","active","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","placeholder","ngModel"],[1,"card-body"],[3,"hasProgressBar","fgsType","loaderId"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["translate","",2,"width",".3%"],["pSortableColumn","odooId","translate","",2,"width","5%"],[1,"ri-expand-up-down-line"],["pSortableColumn","agentName","translate","",2,"width","25%"],["pSortableColumn","cityCode","translate","",2,"width","6%"],["translate","",2,"width","8%"],["pSortableColumn","clientGroupId","translate","",2,"width","10%"],["pSortableColumn","salesPersonId","translate","",2,"width","10%"],["pSortableColumn","creditLimit","translate","",2,"width","10%"],["pSortableColumn","vatNumber","translate","",2,"width","10%"],["pSortableColumn","commercialRegistrationNumber","translate","",2,"width","8%"],["pSortableColumn","isActive","translate","",2,"width","9%"],["pSortableColumn","isComplete","translate","",2,"width","5%"],["translate","",2,"width","6%"],[1,"fs-5"],[3,"ngClass"],[3,"click"],["tooltipPosition","top",1,"mdi","mdi-cog-outline","d-inline","text-muted","fs-16","align-middle","me-1",3,"ngbTooltip"],["href","javascript:void(0)",1,"link-primary","link-offset-2","text-decoration-underline","link-underline-opacity-25","link-underline-opacity-100-hover"],["target","_blank",1,"link-primary","link-offset-2","text-decoration-underline","link-underline-opacity-25","link-underline-opacity-100-hover",3,"href"],[1,"badge","bg-danger-subtle","text-danger","fs-4","p-2"],["name","isActive","inputId","isActive",3,"ngModelChange","ngModel"],[1,"d-inline"],[1,"dropdown-custom"],["type","button",1,"btn","d-inline","dropbtn","btn-soft-secondary","btn-sm","dropdown-custom","arrow-none"],[1,"ri-more-fill"],[1,"dropdown-menu","dropdown-menu-end","dropdown-content"],[3,"click",4,"hasPermission"],[1,"ri-history-fill","text-warning"],[1,"ri-history-fill","text-danger"],[1,"dropdown-item"],[1,"ri-pencil-fill","align-bottom","me-2","text-muted"],["translate","general.action.edit"],[1,"ri-user-location-fill","align-bottom","me-2","text-muted"],["translate","client.client.profile"],["href","javascript:void(0);",1,"dropdown-item"],[1,"ri-delete-bin-fill","align-bottom","me-2","text-muted"],["translate","general.action.delete"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[3,"deleteConfirm","dismiss"],[3,"dismiss","clientId"],[1,"modal-content"],[1,"modal-header"],["translate","approvals.customerRequest.currentLocation"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","btn-close",1,"btn-close",3,"click"],[1,"modal-body","p-1"],["height","500px","width","100%",3,"options","center","zoom"],[3,"position"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-danger","fs-6",3,"click"]],template:function(i,n){if(1&i){const a=e.RV6();e.j41(0,"div",5)(1,"div",6)(2,"div",7)(3,"base-filter",8),e.bIt("reset",function(){return e.eBV(a),e.Njj(n.onReset())})("search",function(){return e.eBV(a),e.Njj(n.onSearch())})("exportXlsx",function(){return e.eBV(a),e.Njj(n.onExportXlsx())})("addNew",function(){return e.eBV(a),e.Njj(n.goClientRegister())}),e.qex(4,9),e.j41(5,"div",10)(6,"div",11)(7,"input",12),e.nI1(8,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.filterValue,r)||(n.pagination.filterValue=r),e.Njj(r)}),e.k0s(),e.nrm(9,"i",13),e.k0s()(),e.j41(10,"div",10)(11,"div",11)(12,"input",14),e.nI1(13,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.mobile,r)||(n.pagination.mobile=r),e.Njj(r)}),e.k0s()()(),e.j41(14,"div",10)(15,"div",11)(16,"ng-select",15),e.nI1(17,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.regionId,r)||(n.pagination.regionId=r),e.Njj(r)}),e.k0s()()(),e.j41(18,"div",10)(19,"div",11)(20,"ng-select",16),e.nI1(21,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.cityCode,r)||(n.pagination.cityCode=r),e.Njj(r)}),e.k0s()()(),e.j41(22,"div",10)(23,"div",11)(24,"ng-select",17),e.nI1(25,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.clientGroupId,r)||(n.pagination.clientGroupId=r),e.Njj(r)}),e.k0s()()(),e.j41(26,"div",10)(27,"div",11)(28,"ng-select",18),e.nI1(29,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.salesPersonId,r)||(n.pagination.salesPersonId=r),e.Njj(r)}),e.k0s()()(),e.j41(30,"div",10)(31,"div",11)(32,"ng-select",19),e.nI1(33,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.priceListId,r)||(n.pagination.priceListId=r),e.Njj(r)}),e.k0s()()(),e.j41(34,"div",10)(35,"div",11)(36,"input",20),e.nI1(37,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.creditLimit,r)||(n.pagination.creditLimit=r),e.Njj(r)}),e.k0s()()(),e.j41(38,"div",10)(39,"div",11)(40,"input",21),e.nI1(41,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.vatNumber,r)||(n.pagination.vatNumber=r),e.Njj(r)}),e.k0s()()(),e.j41(42,"div",10)(43,"div",11)(44,"input",22),e.nI1(45,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.commercialRegistrationNumber,r)||(n.pagination.commercialRegistrationNumber=r),e.Njj(r)}),e.k0s()()(),e.j41(46,"div",10)(47,"div",11)(48,"ng-select",23),e.nI1(49,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.active,r)||(n.pagination.active=r),e.Njj(r)}),e.k0s()()(),e.bVm(),e.k0s(),e.j41(50,"div",24),e.nrm(51,"ngx-ui-loader",25),e.j41(52,"div",26)(53,"p-table",27,0),e.bIt("onLazyLoad",function(r){return e.eBV(a),e.Njj(n.tableChange(r))})("selectionChange",function(r){return e.eBV(a),e.Njj(n.onSelectionChange(r))}),e.DNE(55,ir,36,0,"ng-template",28)(56,sr,40,28,"ng-template",29),e.k0s()(),e.DNE(57,cr,2,0,"div",30)(58,dr,6,8,"div",31),e.k0s()()()(),e.DNE(59,mr,1,0,"ng-template",null,1,e.C5r)(61,pr,1,1,"ng-template",null,2,e.C5r)(63,gr,9,4,"ng-template",null,3,e.C5r)}2&i&&(e.R7$(3),e.Y8G("addPermission",e.lJ4(68,er))("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(4),e.FS9("placeholder",e.bMT(8,46,"task.tasklist.subject")),e.R50("ngModel",n.pagination.filterValue),e.R7$(5),e.FS9("placeholder",e.bMT(13,48,"client.client.mobile")),e.R50("ngModel",n.pagination.mobile),e.R7$(4),e.FS9("placeholder",e.bMT(17,50,"client.client.regionName")),e.Y8G("items",n.regions)("multiple",!1),e.R50("ngModel",n.pagination.regionId),e.R7$(4),e.FS9("placeholder",e.bMT(21,52,"client.client.cityName")),e.Y8G("items",n.cities)("multiple",!1),e.R50("ngModel",n.pagination.cityCode),e.R7$(4),e.FS9("placeholder",e.bMT(25,54,"client.client.clientGroupName")),e.Y8G("items",n.clientGroups)("multiple",!1),e.R50("ngModel",n.pagination.clientGroupId),e.R7$(4),e.FS9("placeholder",e.bMT(29,56,"client.client.salesPersonName")),e.Y8G("items",n.sales)("multiple",!1),e.R50("ngModel",n.pagination.salesPersonId),e.R7$(4),e.FS9("placeholder",e.bMT(33,58,"client.client.priceListName")),e.Y8G("items",n.priceList)("multiple",!1),e.R50("ngModel",n.pagination.priceListId),e.R7$(4),e.FS9("placeholder",e.bMT(37,60,"client.client.CreditLimit")),e.R50("ngModel",n.pagination.creditLimit),e.R7$(4),e.FS9("placeholder",e.bMT(41,62,"client.client.vatNumber")),e.R50("ngModel",n.pagination.vatNumber),e.R7$(4),e.FS9("placeholder",e.bMT(45,64,"client.client.commercialRegistrationNumber")),e.R50("ngModel",n.pagination.commercialRegistrationNumber),e.R7$(4),e.FS9("placeholder",e.bMT(49,66,"general.table.isActive")),e.Y8G("items",n.activeList)("multiple",!1),e.R50("ngModel",n.pagination.active),e.R7$(3),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderSearchShap)("loaderId",n.searchLoader),e.R7$(2),e.Y8G("value",n.entities)("rows",n.pagination.pageSize)("lazy",!0)("totalRecords",n.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",n.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems>0))},dependencies:[g.YU,g.bT,c.me,c.BC,c.vS,m.s5,D.b,P.w,V.p,L.g,De.x,x.m,U.p,_.Mm,C.XI,N.Ei,C.Tg,K.HW,b.Cv,m.md,T.vr,Ve.u6,Ve.fU,g.vh,_.D9],encapsulation:2})}}return o})(),ur=(()=>{class o extends oe.E{constructor(t,i,n){super(t,i,n),this.baseService=i,this.pagination={pageNumber:1,pageSize:10,clientType:1}}resolve(t,i){return this.baseService.GetClientCompany(this.pagination).pipe((0,q.W)(n=>(this.router.navigate([""]),this.alertService.error(n),(0,re.of)(null))))}static{this.\u0275fac=function(i){return new(i||o)(e.KVO(f.Ix),e.KVO(z.X),e.KVO(F.u))}}static{this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var Le=d(99902),rt=d(70072);const ee=o=>({"text-success":o}),te=o=>({"btn-outline-success":o}),Me=o=>[o];function hr(o,s){if(1&o&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&o){const t=e.XpG(2);e.R7$(),e.SpI("(",t.selectedlogo.name,")")}}function fr(o,s){1&o&&(e.j41(0,"div",94),e.EFF(1," general.message.filedIdRequired"),e.k0s())}function br(o,s){1&o&&(e.j41(0,"div",94),e.EFF(1," general.message.filedIdRequired"),e.k0s())}function Cr(o,s){1&o&&(e.j41(0,"div",94),e.EFF(1," general.message.filedIdRequired"),e.k0s())}function vr(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",44)(1,"div",45),e.nrm(2,"i",46)(3,"label",47),e.DNE(4,hr,2,1,"span",48),e.j41(5,"div",49)(6,"button",50),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.viewFile((null==n.selectedlogo?null:n.selectedlogo.path)||n.baseIamge+n.form.logoPath))}),e.nrm(7,"i",51),e.k0s(),e.j41(8,"input",52,2),e.bIt("change",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.onSelectedLogoPath(n))}),e.k0s()()(),e.j41(10,"div",53)(11,"label",54),e.EFF(12,"client.client.name"),e.k0s(),e.j41(13,"input",55,3),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.agentName,n)||(a.form.agentName=n),e.Njj(n)}),e.k0s(),e.DNE(15,fr,2,0,"div",56),e.k0s(),e.j41(16,"div",53)(17,"label",57),e.EFF(18,"client.client.mobile"),e.k0s(),e.j41(19,"input",58,4),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.mobile,n)||(a.form.mobile=n),e.Njj(n)}),e.k0s()(),e.j41(21,"div",53)(22,"label",59),e.EFF(23,"client.client.priceList"),e.k0s(),e.j41(24,"ng-select",60,5),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.priceListId,n)||(a.form.priceListId=n),e.Njj(n)}),e.k0s(),e.DNE(26,br,2,0,"div",56),e.k0s(),e.j41(27,"div",53)(28,"label",61),e.EFF(29,"client.client.clientGroup"),e.k0s(),e.j41(30,"ng-select",62),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.clientGroupId,n)||(a.form.clientGroupId=n),e.Njj(n)}),e.k0s()(),e.j41(31,"div",53)(32,"label",61),e.EFF(33,"client.client.salesPersonName"),e.k0s(),e.j41(34,"ng-select",63),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.salesPersonId,n)||(a.form.salesPersonId=n),e.Njj(n)}),e.k0s()(),e.qex(35),e.j41(36,"div",53)(37,"label",64),e.EFF(38,"client.client.commercialRegistrationNumber"),e.k0s(),e.j41(39,"input",65,6),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.commercialRegistrationNumber,n)||(a.form.commercialRegistrationNumber=n),e.Njj(n)}),e.k0s()(),e.j41(41,"div",53)(42,"label",66),e.EFF(43,"client.client.NationalAddress"),e.k0s(),e.j41(44,"input",67,7),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.nationalAddress,n)||(a.form.nationalAddress=n),e.Njj(n)}),e.k0s()(),e.j41(46,"div",53)(47,"label",68),e.EFF(48,"client.client.CreditLimit"),e.k0s(),e.j41(49,"input",69,8),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.creditLimit,n)||(a.form.creditLimit=n),e.Njj(n)}),e.k0s()(),e.j41(51,"div",53)(52,"label",70),e.EFF(53,"client.client.VATNumber"),e.k0s(),e.j41(54,"input",71,9),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.vatNumber,n)||(a.form.vatNumber=n),e.Njj(n)}),e.k0s()(),e.j41(56,"div",53),e.nrm(57,"label",72),e.j41(58,"input",73,10),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.odooId,n)||(a.form.odooId=n),e.Njj(n)}),e.k0s()(),e.j41(60,"div",53)(61,"label",74),e.EFF(62,"client.client.customerPaymentTerms"),e.k0s(),e.j41(63,"textarea",75,9),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.customerPaymentTerms,n)||(a.form.customerPaymentTerms=n),e.Njj(n)}),e.k0s()(),e.bVm(),e.j41(65,"div",53),e.nrm(66,"label",76),e.j41(67,"input",77,11),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.invoiceDayDue,n)||(a.form.invoiceDayDue=n),e.Njj(n)}),e.k0s()(),e.j41(69,"div",53),e.nrm(70,"label",78),e.j41(71,"input",79,12),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.dept,n)||(a.form.dept=n),e.Njj(n)}),e.k0s()(),e.j41(73,"div",80)(74,"label",61),e.EFF(75,"sales.priceList.discountType"),e.k0s(),e.j41(76,"ng-select",81,13),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.discountType,n)||(a.form.discountType=n),e.Njj(n)}),e.k0s()(),e.j41(78,"div",80)(79,"label",82),e.EFF(80,"sales.priceList.discount"),e.k0s(),e.j41(81,"input",83,14),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.discount,n)||(a.form.discount=n),e.Njj(n)}),e.k0s()(),e.j41(83,"div",84)(84,"label",85),e.EFF(85,"client.client.numberMunicipalLicense"),e.k0s(),e.j41(86,"input",86,15),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.numberMunicipalLicense,n)||(a.form.numberMunicipalLicense=n),e.Njj(n)}),e.k0s(),e.DNE(88,Cr,2,0,"div",56),e.k0s(),e.j41(89,"div",53)(90,"label",87),e.EFF(91,"client.client.note"),e.k0s(),e.j41(92,"input",88,16),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.notes,n)||(a.form.notes=n),e.Njj(n)}),e.k0s()(),e.j41(94,"div",89)(95,"label",90),e.EFF(96,"client.client.isComplete"),e.k0s(),e.j41(97,"p-inputSwitch",91),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.isComplete,n)||(a.form.isComplete=n),e.Njj(n)}),e.k0s()(),e.j41(98,"div",89)(99,"label",92),e.EFF(100,"general.table.isActive"),e.k0s(),e.j41(101,"p-inputSwitch",93),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.isActive,n)||(a.form.isActive=n),e.Njj(n)}),e.k0s()()()}if(2&o){const t=e.sdS(14),i=e.sdS(25),n=e.sdS(87),a=e.XpG();e.R7$(2),e.Y8G("ngClass",e.eq3(32,ee,a.form.logoPathPath||(null==a.selectedlogo?null:a.selectedlogo.path))),e.R7$(2),e.Y8G("ngIf",null==a.selectedlogo?null:a.selectedlogo.name),e.R7$(2),e.Y8G("ngClass",e.eq3(34,te,a.form.logoPath||(null==a.selectedlogo?null:a.selectedlogo.path))),e.R7$(7),e.R50("ngModel",a.form.agentName),e.R7$(2),e.Y8G("ngIf",t.invalid&&t.touched),e.R7$(4),e.R50("ngModel",a.form.mobile),e.R7$(5),e.Y8G("items",a.priceLists)("multiple",!1),e.R50("ngModel",a.form.priceListId),e.R7$(2),e.Y8G("ngIf",i.invalid&&i.touched),e.R7$(4),e.Y8G("items",a.groups)("multiple",!1),e.R50("ngModel",a.form.clientGroupId),e.R7$(4),e.Y8G("items",a.employes)("multiple",!1),e.R50("ngModel",a.form.salesPersonId),e.R7$(5),e.R50("ngModel",a.form.commercialRegistrationNumber),e.R7$(5),e.R50("ngModel",a.form.nationalAddress),e.R7$(5),e.R50("ngModel",a.form.creditLimit),e.R7$(5),e.R50("ngModel",a.form.vatNumber),e.R7$(4),e.R50("ngModel",a.form.odooId),e.R7$(5),e.R50("ngModel",a.form.customerPaymentTerms),e.R7$(4),e.R50("ngModel",a.form.invoiceDayDue),e.R7$(4),e.R50("ngModel",a.form.dept),e.R7$(5),e.Y8G("items",a.discountTypes),e.R50("ngModel",a.form.discountType),e.R7$(5),e.R50("ngModel",a.form.discount),e.R7$(5),e.R50("ngModel",a.form.numberMunicipalLicense),e.R7$(2),e.Y8G("ngIf",n.invalid&&n.touched),e.R7$(4),e.R50("ngModel",a.form.notes),e.R7$(5),e.R50("ngModel",a.form.isComplete),e.R7$(4),e.R50("ngModel",a.form.isActive)}}function Rr(o,s){1&o&&(e.j41(0,"div",94),e.EFF(1," general.message.filedIdRequired"),e.k0s())}function jr(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",95)(1,"div",53)(2,"label",59),e.EFF(3,"client.client.cityName"),e.k0s(),e.j41(4,"ng-select",96),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.cityCode,n)||(a.form.cityCode=n),e.Njj(n)}),e.k0s()(),e.j41(5,"div",53)(6,"label",97),e.EFF(7,"client.client.buildingNumber"),e.k0s(),e.j41(8,"input",98,17),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.buildingNumber,n)||(a.form.buildingNumber=n),e.Njj(n)}),e.k0s(),e.DNE(10,Rr,2,0,"div",56),e.k0s(),e.j41(11,"div",53)(12,"label",99),e.EFF(13,"client.client.subNumber"),e.k0s(),e.j41(14,"input",100,18),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.subNumber,n)||(a.form.subNumber=n),e.Njj(n)}),e.k0s()(),e.j41(16,"div",53)(17,"label",101),e.EFF(18,"client.client.postalCode"),e.k0s(),e.j41(19,"input",102,19),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.postalCode,n)||(a.form.postalCode=n),e.Njj(n)}),e.k0s()(),e.j41(21,"div",53)(22,"label",103),e.EFF(23,"client.client.district"),e.k0s(),e.j41(24,"input",104,19),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.district,n)||(a.form.district=n),e.Njj(n)}),e.k0s()()()}if(2&o){const t=e.sdS(9),i=e.XpG();e.R7$(4),e.Y8G("items",i.cities)("multiple",!1),e.R50("ngModel",i.form.cityCode),e.R7$(4),e.R50("ngModel",i.form.buildingNumber),e.R7$(2),e.Y8G("ngIf",t.invalid&&t.touched),e.R7$(4),e.R50("ngModel",i.form.subNumber),e.R7$(5),e.R50("ngModel",i.form.postalCode),e.R7$(5),e.R50("ngModel",i.form.district)}}function Ir(o,s){if(1&o&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&o){const t=e.XpG(2);e.R7$(),e.SpI("(",t.selectedExternalPhoto.name,")")}}function yr(o,s){if(1&o&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&o){const t=e.XpG(2);e.R7$(),e.SpI("(",t.selectedCommercialRegisterFile.name,")")}}function Fr(o,s){if(1&o&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&o){const t=e.XpG(2);e.R7$(),e.SpI("(",t.selectedMunicipalLicenseFile.name,")")}}function Mr(o,s){if(1&o&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&o){const t=e.XpG(2);e.R7$(),e.SpI("(",t.selectedNationalAddressProof.name,")")}}function Sr(o,s){if(1&o&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&o){const t=e.XpG(2);e.R7$(),e.SpI("(",t.selectedOwnerId.name,")")}}function Tr(o,s){if(1&o&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&o){const t=e.XpG(2);e.R7$(),e.SpI("(",t.selectedVatCertificate.name,")")}}function kr(o,s){if(1&o&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&o){const t=e.XpG(2);e.R7$(),e.SpI("(",t.selectedDealAgreement.name,")")}}function wr(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",95)(1,"div",105),e.nrm(2,"i",46)(3,"label",106),e.DNE(4,Ir,2,1,"span",48),e.j41(5,"div",49)(6,"button",107),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.viewFile((null==n.selectedExternalPhoto?null:n.selectedExternalPhoto.path)||n.baseIamge+n.form.externalPhotoPath))}),e.nrm(7,"i",51),e.k0s(),e.j41(8,"input",108,20),e.bIt("change",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.onSelectedExternalPhoto(n))}),e.k0s()()(),e.j41(10,"div",105),e.nrm(11,"i",46)(12,"label",109),e.DNE(13,yr,2,1,"span",48),e.j41(14,"div",49)(15,"button",110),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.viewFile((null==n.selectedCommercialRegisterFile?null:n.selectedCommercialRegisterFile.path)||n.baseIamge+n.form.commercialRegisterPath))}),e.nrm(16,"i",51),e.k0s(),e.j41(17,"input",111,21),e.bIt("change",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.onCommercialRegisterSelected(n))}),e.k0s()()(),e.j41(19,"div",105),e.nrm(20,"i",46)(21,"label",112),e.DNE(22,Fr,2,1,"span",48),e.j41(23,"div",49)(24,"button",113),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.viewFile((null==n.selectedMunicipalLicenseFile?null:n.selectedMunicipalLicenseFile.path)||n.baseIamge+n.form.municipalLicensePath))}),e.nrm(25,"i",114),e.k0s(),e.j41(26,"input",115),e.bIt("change",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.onMunicipalLicensePathSelected(n))}),e.k0s()()(),e.j41(27,"div",116),e.nrm(28,"i",46)(29,"label",117),e.DNE(30,Mr,2,1,"span",48),e.j41(31,"div",49)(32,"button",118),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.viewFile((null==n.selectedNationalAddressProof?null:n.selectedNationalAddressProof.path)||n.baseIamge+n.form.nationalAddressProofPath))}),e.nrm(33,"i",114),e.k0s(),e.j41(34,"input",119),e.bIt("change",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.onNationalAddressProofPathSelected(n))}),e.k0s()()(),e.j41(35,"div",116),e.nrm(36,"i",46)(37,"label",120),e.DNE(38,Sr,2,1,"span",48),e.j41(39,"div",49)(40,"button",121),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.viewFile((null==n.selectedOwnerId?null:n.selectedOwnerId.path)||n.baseIamge+n.form.nationalAddressProofPath))}),e.nrm(41,"i",114),e.k0s(),e.j41(42,"input",122),e.bIt("change",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.onOwnerIdPathSelected(n))}),e.k0s()()(),e.j41(43,"div",116),e.nrm(44,"i",46)(45,"label",123),e.DNE(46,Tr,2,1,"span",48),e.j41(47,"div",49)(48,"button",124),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.viewFile((null==n.selectedVatCertificate?null:n.selectedVatCertificate.path)||n.baseIamge+n.form.vatCertificatePath))}),e.nrm(49,"i",114),e.k0s(),e.j41(50,"input",125),e.bIt("change",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.onVatCertificatePathSelected(n))}),e.k0s()()(),e.j41(51,"div",116),e.nrm(52,"i",46)(53,"label",126),e.DNE(54,kr,2,1,"span",48),e.j41(55,"div",49)(56,"button",127),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.viewFile((null==n.selectedDealAgreement?null:n.selectedDealAgreement.path)||n.baseIamge+n.form.dealAgreementPath))}),e.nrm(57,"i",114),e.k0s(),e.j41(58,"input",128),e.bIt("change",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.onDealAgreementPathSelected(n))}),e.k0s()()()()}if(2&o){const t=e.XpG();e.R7$(2),e.Y8G("ngClass",e.eq3(21,ee,t.form.externalPhotoPath||(null==t.selectedExternalPhoto?null:t.selectedExternalPhoto.path))),e.R7$(2),e.Y8G("ngIf",null==t.selectedExternalPhoto?null:t.selectedExternalPhoto.name),e.R7$(2),e.Y8G("ngClass",e.eq3(23,te,t.form.externalPhotoPath||(null==t.selectedExternalPhoto?null:t.selectedExternalPhoto.path))),e.R7$(5),e.Y8G("ngClass",e.eq3(25,ee,t.form.commercialRegisterPath||(null==t.selectedCommercialRegisterFile?null:t.selectedCommercialRegisterFile.path))),e.R7$(2),e.Y8G("ngIf",null==t.selectedCommercialRegisterFile?null:t.selectedCommercialRegisterFile.name),e.R7$(2),e.Y8G("ngClass",e.eq3(27,te,t.form.commercialRegisterPath||(null==t.selectedCommercialRegisterFile?null:t.selectedCommercialRegisterFile.path))),e.R7$(5),e.Y8G("ngClass",e.eq3(29,ee,t.form.municipalLicensePath||(null==t.selectedMunicipalLicenseFile?null:t.selectedMunicipalLicenseFile.path))),e.R7$(2),e.Y8G("ngIf",null==t.selectedMunicipalLicenseFile?null:t.selectedMunicipalLicenseFile.name),e.R7$(2),e.Y8G("ngClass",e.eq3(31,te,t.form.municipalLicensePath||(null==t.selectedMunicipalLicenseFile?null:t.selectedMunicipalLicenseFile.path))),e.R7$(4),e.Y8G("ngClass",e.eq3(33,ee,t.form.nationalAddressProofPath||(null==t.selectedCommercialRegisterFile?null:t.selectedCommercialRegisterFile.path))),e.R7$(2),e.Y8G("ngIf",t.selectedNationalAddressProof.name),e.R7$(2),e.Y8G("ngClass",e.eq3(35,te,t.form.nationalAddressProofPath||(null==t.selectedNationalAddressProof?null:t.selectedNationalAddressProof.path))),e.R7$(4),e.Y8G("ngClass",e.eq3(37,ee,t.form.ownerIdPath||(null==t.selectedOwnerId?null:t.selectedOwnerId.path))),e.R7$(2),e.Y8G("ngIf",t.selectedOwnerId.name),e.R7$(2),e.Y8G("ngClass",e.eq3(39,te,t.form.nationalAddressProofPath||(null==t.selectedOwnerId?null:t.selectedOwnerId.path))),e.R7$(4),e.Y8G("ngClass",e.eq3(41,ee,t.form.vatCertificatePath||(null==t.selectedOwnerId?null:t.selectedOwnerId.path))),e.R7$(2),e.Y8G("ngIf",t.selectedVatCertificate.name),e.R7$(2),e.Y8G("ngClass",e.eq3(43,te,t.form.vatCertificatePath||(null==t.selectedVatCertificate?null:t.selectedVatCertificate.path))),e.R7$(4),e.Y8G("ngClass",e.eq3(45,ee,t.form.dealAgreementPath||(null==t.selectedDealAgreement?null:t.selectedDealAgreement.path))),e.R7$(2),e.Y8G("ngIf",t.selectedDealAgreement.name),e.R7$(2),e.Y8G("ngClass",e.eq3(47,te,t.form.dealAgreementPath||(null==t.selectedDealAgreement?null:t.selectedDealAgreement.path)))}}function xr(o,s){if(1&o){const t=e.RV6();e.j41(0,"tr",142)(1,"th",146),e.EFF(2),e.k0s(),e.j41(3,"td",147)(4,"div",148)(5,"input",149),e.mxI("ngModelChange",function(n){const a=e.eBV(t).$implicit;return e.DH7(a.name,n)||(a.name=n),e.Njj(n)}),e.k0s()()(),e.j41(6,"td")(7,"input",150),e.mxI("ngModelChange",function(n){const a=e.eBV(t).$implicit;return e.DH7(a.title,n)||(a.title=n),e.Njj(n)}),e.k0s()(),e.j41(8,"td")(9,"input",151),e.mxI("ngModelChange",function(n){const a=e.eBV(t).$implicit;return e.DH7(a.phone,n)||(a.phone=n),e.Njj(n)}),e.k0s()(),e.j41(10,"td",152)(11,"input",153),e.mxI("ngModelChange",function(n){const a=e.eBV(t).$implicit;return e.DH7(a.email,n)||(a.email=n),e.Njj(n)}),e.k0s()(),e.j41(12,"td",154)(13,"a",155),e.bIt("click",function(){const n=e.eBV(t).$index,a=e.XpG(2);return e.Njj(a.removeItem(n))}),e.EFF(14,"Delete"),e.k0s()()()}if(2&o){const t=s.$implicit,i=s.$index;e.R7$(2),e.JRh(i+1),e.R7$(3),e.Y8G("name","name"+e.eq3(9,Me,i)),e.R50("ngModel",t.name),e.R7$(2),e.Y8G("name","title"+e.eq3(11,Me,i)),e.R50("ngModel",t.title),e.R7$(2),e.Y8G("name","phone"+e.eq3(13,Me,i)),e.R50("ngModel",t.phone),e.R7$(2),e.Y8G("name","email"+e.eq3(15,Me,i)),e.R50("ngModel",t.email)}}function Nr(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",95)(1,"div",129)(2,"div",130)(3,"div",131)(4,"table",132)(5,"thead",133)(6,"tr",134)(7,"th",135),e.EFF(8,"#"),e.k0s(),e.nrm(9,"th",136)(10,"th",137)(11,"th",138)(12,"th",139)(13,"th",140),e.k0s()(),e.j41(14,"tbody",141),e.Z7z(15,xr,15,17,"tr",142,e.Vm6),e.k0s(),e.j41(17,"tbody")(18,"tr")(19,"td",143)(20,"a",144),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.addItem())}),e.nrm(21,"i",145),e.EFF(22," Add Contact"),e.k0s()()()()()()()()()}if(2&o){const t=e.XpG();e.R7$(15),e.Dyx(t.form.clientContacts)}}let lt=(()=>{class o{constructor(t,i,n,a,l,r,h,v,R,S,E,$){this.routerActive=t,this.translateService=i,this.baseService=n,this.clientGroupService=a,this.alertService=l,this.datePipe=r,this.modalService=h,this.employeeService=v,this.ngxLoader=R,this.router=S,this._formDataService=E,this.offerOrderService=$,this.selectValue=[],this.editEmployee="client.client.editClient",this.addEmployee="client.client.addClient",this.titleOperation="client.client.titleOperation",this.keySelected="",this.assignUsers=[],this.times=[],this.shifts=[],this.searchForm="",this.jobTypes=[],this.weekDays=[],this.breadCrumbItems=[],this.form={clientContacts:[],agentCode:0},this.lang=this.translateService.currentLang,this.idForm=0,this.isResolveList=!0,this.employeeGroups=[],this.notifier=new ye.B,this.mainDelay=100,this.loaderSearchShap=u.cX,this.loaderOperationShap=u.$$,this.operationLoader=u.ZW,this.isEditForm=!1,this.channels=[],this.cities=[],this.status=[],this.groups=[],this.priceLists=[],this.employes=[],this.selectedCommercialRegisterFile={},this.selectedMunicipalLicenseFile={},this.selectedNationalAddressProof={},this.selectedOwnerId={},this.selectedVatCertificate={},this.selectedDealAgreement={},this.selectedExternalPhoto={},this.selectedlogo={},this.maxSizeInBytes=1048576,this.baseIamge=W.c.mediaUrl,this.discountTypes=[]}ngOnDestroy(){this.notifier.next(),this.notifier.complete()}ngOnInit(){this.GetAgentLookUps(),this.ClientGroupDropDown(),this.getSalesPerson(),this.configRoute(),this.discountTypes=this.offerOrderService.discountTypes,this.discountTypes.forEach(t=>{t.name=this.getTranslationText("sales.salesOrder."+t.name)}),this.breadCrumbItems=[{label:"layout.sidebar.client"},{label:"client.clientCompany.title",active:!0,url:"crm/customerCompanyList"},{label:this.isEditForm?"general.action.edit":"general.action.register",active:!0}]}getSalesPerson(){this.employeeService.GetAllByType(9).subscribe(t=>{this.employes=t.data},t=>{console.log(t)})}configRoute(){this.routerActive.data.pipe((0,p.Q)(this.notifier)).subscribe(t=>{let i=t.data.data;i&&(this.isEditForm=!0,this.form=i)},()=>{this.alertService.error()})}GetAgentLookUps(){this.baseService.GetAgentLookUps().subscribe(t=>{this.channels=t.data.channels,this.cities=t.data.cities,this.status=t.data.status,this.priceLists=t.data.priceLists},t=>{console.log(t)})}ClientGroupDropDown(){this.clientGroupService.getDropDown().subscribe(t=>{this.groups=t.data},t=>{console.log(t)})}OnSubmit(){this.ngxLoader.startLoader(this.operationLoader),!0===this.isEditForm?this.editEntity():this.registerEntity()}mapFormData(t,i){const n={...t};return n.clientType=1,n.commercialRegister=this.selectedCommercialRegisterFile?.file??null,n.municipalLicense=this.selectedMunicipalLicenseFile?.file??null,n.nationalAddressProof=this.selectedNationalAddressProof?.file??null,n.ownerId=this.selectedOwnerId?.file??null,n.vatCertificate=this.selectedVatCertificate?.file??null,n.dealAgreement=this.selectedDealAgreement?.file??null,n.externalPhoto=this.selectedExternalPhoto?.file??null,n.logo=this.selectedlogo?.file??null,i?.isRegister?(n.agentCode=0,n.externalPhoto=this.selectedExternalPhoto?.file??null):n.id=n.agentCode,this._formDataService.formatFormData(n)}mapForm(t){return this.mapFormData(t)}mapRegisterForm(t){return this.mapFormData(t,{isRegister:!0})}registerEntity(){this.ngxLoader.startLoader(u.ZW);let t=this.mapRegisterForm(this.form);this.baseService.register(t).pipe((0,j.O)(),(0,M.c)(this.mainDelay),(0,y.Z)(),(0,p.Q)(this.notifier),(0,I.j)(()=>this.ngxLoader.stopLoader(u.ZW)),(0,q.W)(i=>(0,ce.$)(i))).subscribe(i=>{i.success?(this.alertService.success(),this.back()):this.alertService.error("general.message."+i.message)},i=>{this.alertService.error("general.message."+i)})}editEntity(){this.ngxLoader.startLoader(u.ZW);let t=this.mapForm(this.form);this.baseService.editPut(this.form.agentCode,t).pipe((0,j.O)(),(0,M.c)(this.mainDelay),(0,y.Z)(),(0,p.Q)(this.notifier),(0,I.j)(()=>this.ngxLoader.stopLoader(u.ZW))).subscribe(i=>{i.success?this.alertService.success():this.alertService.error("general.message."+i.message)},i=>{this.alertService.error("general.message."+i)})}getTranslationText(t){let i="";return this.translateService.get(t).pipe((0,p.Q)(this.notifier)).subscribe(n=>{i=n}),i}removeItem(t){this.form.clientContacts.splice(t,1)}addItem(){this.form.clientContacts.push({id:0,clientId:this.form.agentCode??0,name:"",title:"",email:"",phone:""})}onCommercialRegisterSelected(t){const i=t.target.files[0];if(!i)return;if(i.size>this.maxSizeInBytes)return void this.alertService.error("\u062d\u062c\u0645 \u0627\u0644\u0645\u0644\u0641 \u0627\u0643\u0628\u0631 \u0645\u0646 \u0648\u0627\u062d\u062f \u0645\u064a\u062c\u0627");this.selectedCommercialRegisterFile.file=i,this.selectedCommercialRegisterFile.name=i.name;const n=i.type;this.selectedCommercialRegisterFile.isImage=n.startsWith("image/"),this.selectedCommercialRegisterFile.isPdf="application/pdf"===n;const a=new FileReader;a.onload=()=>{this.selectedCommercialRegisterFile.path=a.result},this.selectedCommercialRegisterFile.isImage?a.readAsDataURL(i):this.selectedCommercialRegisterFile.isPdf&&(this.selectedCommercialRegisterFile.path=URL.createObjectURL(i))}onMunicipalLicensePathSelected(t){const i=t.target.files[0];if(!i)return;if(i.size>this.maxSizeInBytes)return void this.alertService.error("\u062d\u062c\u0645 \u0627\u0644\u0645\u0644\u0641 \u0627\u0643\u0628\u0631 \u0645\u0646 \u0648\u0627\u062d\u062f \u0645\u064a\u062c\u0627");this.selectedMunicipalLicenseFile.file=i;const n=i.type;this.selectedMunicipalLicenseFile.isImage=n.startsWith("image/"),this.selectedMunicipalLicenseFile.isPdf="application/pdf"===n;const a=new FileReader;a.onload=()=>{this.selectedMunicipalLicenseFile.path=a.result},this.selectedMunicipalLicenseFile.isImage?a.readAsDataURL(i):this.selectedMunicipalLicenseFile.isPdf&&(this.selectedMunicipalLicenseFile.path=URL.createObjectURL(i))}onNationalAddressProofPathSelected(t){const i=t.target.files[0];if(!i)return;if(i.size>this.maxSizeInBytes)return void this.alertService.error("\u062d\u062c\u0645 \u0627\u0644\u0645\u0644\u0641 \u0627\u0643\u0628\u0631 \u0645\u0646 \u0648\u0627\u062d\u062f \u0645\u064a\u062c\u0627");this.selectedNationalAddressProof.file=i;const n=i.type;this.selectedNationalAddressProof.isImage=n.startsWith("image/"),this.selectedNationalAddressProof.isPdf="application/pdf"===n;const a=new FileReader;a.onload=()=>{this.selectedNationalAddressProof.path=a.result},this.selectedNationalAddressProof.isImage?a.readAsDataURL(i):this.selectedNationalAddressProof.isPdf&&(this.selectedNationalAddressProof.path=URL.createObjectURL(i))}onOwnerIdPathSelected(t){const i=t.target.files[0];if(!i)return;if(i.size>this.maxSizeInBytes)return void this.alertService.error("\u062d\u062c\u0645 \u0627\u0644\u0645\u0644\u0641 \u0627\u0643\u0628\u0631 \u0645\u0646 \u0648\u0627\u062d\u062f \u0645\u064a\u062c\u0627");this.selectedOwnerId.file=i;const n=i.type;this.selectedOwnerId.isImage=n.startsWith("image/"),this.selectedOwnerId.isPdf="application/pdf"===n;const a=new FileReader;a.onload=()=>{this.selectedOwnerId.path=a.result},this.selectedOwnerId.isImage?a.readAsDataURL(i):this.selectedOwnerId.isPdf&&(this.selectedOwnerId.path=URL.createObjectURL(i))}onVatCertificatePathSelected(t){const i=t.target.files[0];if(!i)return;if(i.size>this.maxSizeInBytes)return void this.alertService.error("\u062d\u062c\u0645 \u0627\u0644\u0645\u0644\u0641 \u0627\u0643\u0628\u0631 \u0645\u0646 \u0648\u0627\u062d\u062f \u0645\u064a\u062c\u0627");this.selectedVatCertificate.file=i;const n=i.type;this.selectedVatCertificate.isImage=n.startsWith("image/"),this.selectedVatCertificate.isPdf="application/pdf"===n;const a=new FileReader;a.onload=()=>{this.selectedVatCertificate.path=a.result},this.selectedVatCertificate.isImage?a.readAsDataURL(i):this.selectedVatCertificate.isPdf&&(this.selectedVatCertificate.path=URL.createObjectURL(i))}onDealAgreementPathSelected(t){const i=t.target.files[0];if(!i)return;if(i.size>this.maxSizeInBytes)return void this.alertService.error("\u062d\u062c\u0645 \u0627\u0644\u0645\u0644\u0641 \u0627\u0643\u0628\u0631 \u0645\u0646 \u0648\u0627\u062d\u062f \u0645\u064a\u062c\u0627");this.selectedDealAgreement.file=i;const n=i.type;this.selectedDealAgreement.isImage=n.startsWith("image/"),this.selectedDealAgreement.isPdf="application/pdf"===n;const a=new FileReader;a.onload=()=>{this.selectedDealAgreement.path=a.result},this.selectedDealAgreement.isImage?a.readAsDataURL(i):this.selectedDealAgreement.isPdf&&(this.selectedDealAgreement.path=URL.createObjectURL(i))}onSelectedLogoPath(t){const i=t.target.files[0];if(!i)return;if(i.size>this.maxSizeInBytes)return void this.alertService.error("\u062d\u062c\u0645 \u0627\u0644\u0645\u0644\u0641 \u0627\u0643\u0628\u0631 \u0645\u0646 \u0648\u0627\u062d\u062f \u0645\u064a\u062c\u0627");this.selectedlogo.file=i;const n=i.type;this.selectedlogo.isImage=n.startsWith("image/"),this.selectedlogo.isPdf="application/pdf"===n;const a=new FileReader;a.onload=()=>{this.selectedlogo.path=a.result},this.selectedlogo.isImage?a.readAsDataURL(i):this.selectedlogo.isPdf&&(this.selectedlogo.path=URL.createObjectURL(i))}onSelectedExternalPhoto(t){const i=t.target.files[0];if(!i)return;if(i.size>this.maxSizeInBytes)return void this.alertService.error("\u062d\u062c\u0645 \u0627\u0644\u0645\u0644\u0641 \u0627\u0643\u0628\u0631 \u0645\u0646 \u0648\u0627\u062d\u062f \u0645\u064a\u062c\u0627");this.selectedExternalPhoto.file=i;const n=i.type;this.selectedExternalPhoto.isImage=n.startsWith("image/"),this.selectedExternalPhoto.isPdf="application/pdf"===n;const a=new FileReader;a.onload=()=>{this.selectedExternalPhoto.path=a.result},this.selectedExternalPhoto.isImage?a.readAsDataURL(i):this.selectedExternalPhoto.isPdf&&(this.selectedExternalPhoto.path=URL.createObjectURL(i))}viewFile(t){if(t==this.baseIamge+"null")return;const i=window.open();if(t instanceof Blob){const n=new FileReader;n.onloadend=()=>{const a=n.result,l=a.split(";")[0].split(":")[1];l.startsWith("image/")?i?.document.write(`<img src="${a}" style="width:80%;height:80%;" />`):"application/pdf"===l?i?.document.write(`<iframe src="${a}" ></iframe>`):alert("Unsupported file type")},n.readAsDataURL(t)}else i?.document.write(`<iframe src="${t}"  style="width:100%;height:100%;"></iframe>`)}back(){this.router.navigateByUrl("/crm/customerCompanyList")}static{this.\u0275fac=function(i){return new(i||o)(e.rXU(f.nX),e.rXU(_.c$),e.rXU(z.X),e.rXU(xe.t),e.rXU(F.u),e.rXU(g.vh),e.rXU(m.Bq),e.rXU(Fe.O),e.rXU(b.eD),e.rXU(f.Ix),e.rXU(Le.Q),e.rXU(rt.A))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["customer-company-operation"]],decls:32,vars:14,consts:[["formEntity","ngForm"],["ModifierCustom","ngbNav"],["logoPath",""],["agentName","ngModel"],["mobile","ngModel"],["priceListId","ngModel"],["commercialRegistrationNumber","ngModel"],["nationalAddress","ngModel"],["creditLimit","ngModel"],["vatNumber","ngModel"],["odooId","ngModel"],["invoiceDayDue","ngModel"],["dept","ngModel"],["discountType","ngModel"],["discount","ngModel"],["numberMunicipalLicenseM","ngModel"],["notes","ngModel"],["buildingNumber","ngModel"],["subNumber","ngModel"],["postalCode","ngModel"],["externalPhotoPath",""],["commercialRegister",""],[3,"title","breadcrumbItems"],[1,"col-12"],[1,"card"],[3,"hasProgressBar","fgsType","loaderId"],[3,"ngSubmit"],[1,"card-body"],["ngbNav","",1,"nav","nav-pills","nav-customs","nav-danger","mb-3",3,"activeId"],[3,"ngbNavItem"],["ngbNavLink","","translate","hr.employee.basicInfo",1,"nav-link"],["ngbNavContent",""],["ngbNavLink","","translate","client.client.nationalAddressData",1,"nav-link"],["ngbNavLink","","translate","client.client.formalPaper",1,"nav-link"],["ngbNavLink","","translate","hr.employee.contacts",1,"nav-link"],[1,"tab-content","text-muted"],[3,"ngbNavOutlet"],[1,"card-footer"],[1,"text-center"],["type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],["type","button",1,"mx-2","btn","btn-dark","btn-label","waves-effect","waves-light","rounded-pill",3,"click"],["translate","general.action.back"],[1,"row","align-items-center"],[1,"col-12","col-md-4","my-2"],[1,"ri-checkbox-fill",3,"ngClass"],["for","logoPath","translate","client.client.logo",1,"required"],[4,"ngIf"],[1,"input-group"],["type","button","id","logoPath",1,"btn","material-shadow-none",3,"click","ngClass"],[1,"ri-eye-2-line"],["type","file","id","logoPath","aria-describedby","logoPath","aria-label","Upload",1,"form-control",3,"change"],[1,"col-12","col-md-4","mb-2"],["for","name","translate","",1,"required","fw-bold","form-label"],["InputTirmFilter","","name","agentName","type","text","id","agentName","required","",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],["for","mobile","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","mobile","type","number","id","mobile",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["translate","",1,"required","fw-bold","form-label","w-100"],["name","priceListId","bindValue","id","bindLabel","name","required","",3,"ngModelChange","items","multiple","ngModel"],["translate","",1,"fw-bold","form-label","w-100"],["name","clientGroupId","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","ngModel"],["name","salesPersonId","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","ngModel"],["for","commercialRegistrationNumber","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","commercialRegistrationNumber","type","number","id","commercialRegistrationNumber",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["for","nationalAddress","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","nationalAddress","type","number","id","nationalAddress",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["for","creditLimit","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","creditLimit","type","number","id","creditLimit",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["for","vATNumber","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","vatNumber","type","number","id","vatNumber",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["for","odooId","translate","client.client.odooId",1,"fw-bold","form-label"],["InputTirmFilter","","name","odooId","type","number","id","odooId",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["for","customerPaymentTerms","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","customerPaymentTerms","type","text","id","customerPaymentTerms",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["for","invoiceDayDue","translate","client.client.invoiceDayDue",1,"fw-bold","form-label"],["InputTirmFilter","","name","invoiceDayDue","type","number","id","invoiceDayDue",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["for","dept","translate","client.client.dept",1,"fw-bold","form-label"],["InputTirmFilter","","name","dept","type","number","id","dept",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,"col-12","col-md-2","bg-light"],["clearable","false","clearOnBackspace","false","name","discountType","bindValue","id","bindLabel","name",2,"width","100%",3,"ngModelChange","items","ngModel"],["for","discount","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","discount","type","number","id","discount",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,"col-12","col-md-4"],["for","numberMunicipalLicense","translate","",1,"required","fw-bold","form-label"],["InputTirmFilter","","name","numberMunicipalLicense","type","number","id","numberMunicipalLicense","required","",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["for","notes","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","notes","type","text","id","notes",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,"col-12","col-md-3","form-check","mb-2"],["for","isComplete","translate","",1,"fw-bold","form-label","w-100"],["name","isComplete","inputId","isComplete",3,"ngModelChange","ngModel"],["for","isActive","translate","",1,"fw-bold","form-label","w-100"],["name","isActive","inputId","isActive",3,"ngModelChange","ngModel"],["translate","",1,"text-danger","text-center"],[1,"row"],["name","cityCode","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","ngModel"],["for","name","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","buildingNumber","type","number","id","buildingNumber",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["for","subNumber","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","subNumber","type","number","id","subNumber",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["for","postalCode","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","postalCode","type","number","id","postalCode",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["for","district","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","district","type","text","id","district",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,"col-12","col-md-6","my-2"],["for","externalPhotoPath","translate","client.client.externalPhotoPath",1,"required"],["type","button","id","externalPhotoPath",1,"btn","material-shadow-none",3,"click","ngClass"],["type","file","id","externalPhotoPath","aria-describedby","externalPhotoPath","aria-label","Upload",1,"form-control",3,"change"],["for","commercialRegister","translate","approvals.customerRequest.commercialRegister",1,"required"],["type","button","id","commercialRegister",1,"btn","material-shadow-none",3,"click","ngClass"],["type","file","id","commercialRegister","aria-describedby","commercialRegister","aria-label","Upload",1,"form-control",3,"change"],["for","municipalLicense","translate","approvals.customerRequest.municipalLicense",1,"required"],["type","button","id","municipalLicensePath",1,"btn","material-shadow-none",3,"click","ngClass"],[1,"ri-image-2-line"],["type","file","id","municipalLicensePath","aria-describedby","municipalLicensePath","aria-label","Upload",1,"form-control",3,"change"],[1,"col-12","col-md-6","my-3"],["for","nationalAddress","translate","approvals.customerRequest.nationalAddress",1,"required"],["type","button","id","nationalAddressProofPath",1,"btn","material-shadow-none",3,"click","ngClass"],["type","file","id","nationalAddressProofPath","aria-describedby","nationalAddressProofPath","aria-label","Upload",1,"form-control",3,"change"],["for","ownerId","translate","approvals.customerRequest.customerID",1,""],["type","button","id","ownerIdPath",1,"btn","material-shadow-none",3,"click","ngClass"],["type","file","id","ownerIdPath","aria-describedby","ownerIdPath","aria-label","Upload",1,"form-control",3,"change"],["for","vatCertificate","translate","approvals.customerRequest.vatCertificate",1,"required"],["type","button","id","vatCertificatePath",1,"btn","material-shadow-none",3,"click","ngClass"],["type","file","id","vatCertificatePath","aria-describedby","vatCertificatePath","aria-label","Upload",1,"form-control",3,"change"],["for","dealAgreement","translate","approvals.customerRequest.dealAgreement",1,""],["type","button","id","dealAgreementPath",1,"btn","material-shadow-none",3,"click","ngClass"],["accept","image/*,application/pdf","type","file","id","dealAgreementPath","aria-describedby","dealAgreementPath","aria-label","Upload",1,"form-control",3,"change"],[1,"col-12","col-md-10"],[1,"card-body","p-4"],[1,"table-responsive"],[1,"invoice-table","table","table-borderless","table-nowrap","mb-0"],[1,"align-middle"],[1,"table-active"],["scope","col",2,"width","50px"],["scope","col","translate","client.client.pName"],["scope","col","translate","client.client.pTitle"],["scope","col","translate","client.client.phone"],["scope","col","translate","client.client.email"],["scope","col"],["id","newlink"],["id","1",1,"product"],["colspan","5"],["href","javascript:void(0);","id","add-item",1,"btn","btn-soft-secondary","fw-medium",3,"click"],[1,"ri-add-fill","me-1","align-bottom"],["scope","row",1,"product-id"],[1,"text-start"],[1,"mb-2"],["type","text","id","name",1,"form-control","bg-light","border-0",3,"ngModelChange","name","ngModel"],["type","text","id","title",1,"form-control","bg-light","border-0",3,"ngModelChange","name","ngModel"],["type","text","id","phone",1,"form-control","bg-light","border-0",3,"ngModelChange","name","ngModel"],[1,""],["type","text","id","email",1,"form-control","bg-light","border-0",3,"ngModelChange","name","ngModel"],[1,"product-removal"],["href","javascript:void(0)",1,"btn","btn-success",3,"click"]],template:function(i,n){if(1&i){const a=e.RV6();e.nrm(0,"app-breadcrumbs",22),e.nI1(1,"translate"),e.j41(2,"div",23)(3,"div",24),e.nrm(4,"ngx-ui-loader",25),e.j41(5,"form",26,0),e.bIt("ngSubmit",function(){return e.eBV(a),e.Njj(n.OnSubmit())}),e.j41(7,"div",27)(8,"ul",28,1)(10,"li",29),e.nrm(11,"a",30),e.DNE(12,vr,102,36,"ng-template",31),e.k0s(),e.j41(13,"li",29),e.nrm(14,"a",32),e.DNE(15,jr,26,8,"ng-template",31),e.k0s(),e.j41(16,"li",29),e.nrm(17,"a",33),e.DNE(18,wr,59,49,"ng-template",31),e.k0s(),e.j41(19,"li",29),e.nrm(20,"a",34),e.DNE(21,Nr,23,0,"ng-template",31),e.k0s()(),e.j41(22,"div",35),e.nrm(23,"div",36),e.k0s()(),e.j41(24,"div",37)(25,"div",38)(26,"button",39),e.nrm(27,"i",40)(28,"span",41),e.k0s(),e.j41(29,"button",42),e.bIt("click",function(){return e.eBV(a),e.Njj(n.back())}),e.nrm(30,"i",40)(31,"span",43),e.k0s()()()()()()}if(2&i){const a=e.sdS(6),l=e.sdS(9);e.FS9("title",0==n.isEditForm?n.addEmployee:e.bMT(1,12,n.editEmployee)),e.Y8G("breadcrumbItems",n.breadCrumbItems),e.R7$(4),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderOperationShap)("loaderId",n.operationLoader),e.R7$(4),e.Y8G("activeId",1),e.R7$(2),e.Y8G("ngbNavItem",1),e.R7$(3),e.Y8G("ngbNavItem",2),e.R7$(3),e.Y8G("ngbNavItem",3),e.R7$(3),e.Y8G("ngbNavItem",4),e.R7$(4),e.Y8G("ngbNavOutlet",l),e.R7$(3),e.Y8G("disabled",!a.valid)}},dependencies:[g.YU,g.bT,c.qT,c.me,c.Q0,c.BC,c.cb,c.YS,c.vS,c.cV,m.Um,m.X9,m.sy,m.Gx,m.Ri,m.WA,m.m_,H.m,x.m,_.Mm,K.HW,b.Cv,T.vr,_.D9],encapsulation:2})}}return o})();var Gr=d(70152),Er=d(23294),st=d(25558),Vr=(d(67376),d(61351)),ct=d(12128);const Lr=()=>["clientCollection.register"],Xr=()=>["clientCollection.edit"],Or=()=>["clientCollection.delete"];function Br(o,s){1&o&&(e.j41(0,"tr",35),e.nrm(1,"th",36),e.j41(2,"th",37),e.EFF(3,"#"),e.k0s(),e.j41(4,"th",38),e.nrm(5,"i",39),e.EFF(6," sales.clientCollection.serial "),e.k0s(),e.j41(7,"th",40),e.nrm(8,"i",39),e.EFF(9," sales.clientCollection.paymentTypeName "),e.k0s(),e.j41(10,"th",41),e.nrm(11,"i",39),e.EFF(12," orderManagement.order.creation "),e.k0s(),e.j41(13,"th",42),e.nrm(14,"i",39),e.EFF(15," sales.clientCollection.paymentAmount "),e.k0s(),e.nrm(16,"th",43),e.k0s())}function Pr(o,s){if(1&o&&(e.nrm(0,"i",52),e.EFF(1),e.nI1(2,"date"),e.nrm(3,"br")(4,"i",53),e.EFF(5),e.nI1(6,"date"),e.nrm(7,"br")(8,"i",54),e.EFF(9)),2&o){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.i5U(2,3,t.creationTime,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",e.i5U(6,6,t.lastModificationTime,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",t.creatorName," ")}}function Ar(o,s){if(1&o){const t=e.RV6();e.j41(0,"button",55),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,a=e.XpG(),l=e.sdS(30);return e.Njj(a.EditModel(n.id,l))}),e.nrm(1,"i",56),e.k0s()}}function $r(o,s){if(1&o){const t=e.RV6();e.j41(0,"button",57),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,a=e.XpG(),l=e.sdS(32);return e.Njj(a.openModal(n.id,l))}),e.nrm(1,"i",58),e.k0s()}}function Yr(o,s){if(1&o){const t=e.RV6();e.j41(0,"tr",44)(1,"td"),e.nrm(2,"button",45),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td")(10,"span",46),e.EFF(11),e.k0s(),e.EFF(12),e.nI1(13,"date"),e.k0s(),e.j41(14,"td"),e.EFF(15),e.k0s(),e.j41(16,"td"),e.DNE(17,Pr,10,9,"ng-template",null,4,e.C5r),e.nrm(19,"i",47),e.j41(20,"button",48),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.onPrint(n.id))}),e.nrm(21,"i",49),e.k0s(),e.DNE(22,Ar,2,0,"button",50)(23,$r,2,0,"button",51),e.k0s()()}if(2&o){const t=s.$implicit,i=s.rowIndex,n=s.expanded,a=e.sdS(18);e.R7$(2),e.Y8G("pRowToggler",t)("ngClass",n?" ri-arrow-down-s-line":"  ri-arrow-up-s-line"),e.R7$(2),e.JRh(i+1),e.R7$(2),e.JRh(t.serial),e.R7$(2),e.JRh(t.paymentTypeName),e.R7$(3),e.SpI("",t.creatorName," "),e.R7$(),e.SpI(" ",e.i5U(13,11,t.creationTime,"yyyy-MM-dd")," "),e.R7$(3),e.JRh(t.cost),e.R7$(4),e.Y8G("ngbTooltip",a),e.R7$(3),e.Y8G("hasPermission",e.lJ4(14,Xr)),e.R7$(),e.Y8G("hasPermission",e.lJ4(15,Or))}}function Ur(o,s){1&o&&e.nrm(0,"span",67)}function Hr(o,s){1&o&&e.nrm(0,"span",68)}function zr(o,s){if(1&o&&(e.j41(0,"tr")(1,"td",59)(2,"div")(3,"table",60)(4,"thead")(5,"tr",61)(6,"th",41),e.nrm(7,"i",39),e.EFF(8," orderManagement.order.creation "),e.k0s(),e.j41(9,"th",62),e.nrm(10,"i",39),e.EFF(11," sales.clientCollection.isSyncOdoo "),e.k0s(),e.j41(12,"th",63),e.nrm(13,"i",39),e.EFF(14," sales.clientCollection.depositNumber "),e.k0s(),e.j41(15,"th",64),e.nrm(16,"i",39),e.EFF(17," sales.clientCollection.notes "),e.k0s()()(),e.j41(18,"tbody")(19,"tr")(20,"td")(21,"span",46),e.EFF(22),e.k0s(),e.EFF(23),e.nI1(24,"date"),e.k0s(),e.j41(25,"td"),e.DNE(26,Ur,1,0,"span",65)(27,Hr,1,0,"span",66),e.k0s(),e.j41(28,"td"),e.EFF(29),e.k0s(),e.j41(30,"td"),e.EFF(31),e.k0s()()()()()()()),2&o){const t=s.$implicit;e.R7$(22),e.SpI("",t.creatorName," "),e.R7$(),e.SpI(" ",e.i5U(24,6,t.creationTime,"yyyy-MM-dd")," "),e.R7$(3),e.Y8G("ngIf",t.isSyncOdoo),e.R7$(),e.Y8G("ngIf",!t.isSyncOdoo),e.R7$(2),e.JRh(t.depositNumber),e.R7$(2),e.JRh(t.notes)}}function Qr(o,s){1&o&&(e.j41(0,"div",69),e.EFF(1," general.table.noData"),e.k0s())}function qr(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",70)(1,"div",71),e.nrm(2,"ngb-pagination-info",72),e.j41(3,"table-length",73),e.bIt("lengthChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",74)(5,"ngb-pagination",75),e.bIt("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.pagination.pageNumber,n)||(a.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&o){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function Jr(o,s){1&o&&(e.j41(0,"span",112),e.EFF(1,"general.action.register "),e.k0s())}function Wr(o,s){1&o&&(e.j41(0,"span",112),e.EFF(1,"general.action.edit "),e.k0s())}function Kr(o,s){if(1&o){const t=e.RV6();e.j41(0,"i",113),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.removeMainImage())}),e.k0s()}}function Zr(o,s){1&o&&(e.j41(0,"div",114),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function el(o,s){1&o&&(e.j41(0,"div",114),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function tl(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",76)(1,"div",77)(2,"h4",78),e.DNE(3,Jr,2,0,"span",79)(4,Wr,2,0,"span",79),e.j41(5,"span",80),e.EFF(6),e.k0s()(),e.j41(7,"button",81),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss("Cross click"))}),e.k0s()(),e.j41(8,"div",82),e.nrm(9,"ngx-ui-loader",27),e.j41(10,"form",83,5),e.bIt("submit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.OnSubmit())}),e.j41(12,"div",84)(13,"div",85)(14,"div",86)(15,"div",87)(16,"label",88),e.bIt("click",function(){e.eBV(t);const n=e.sdS(21);return e.Njj(n.click())}),e.j41(17,"div",89)(18,"div",90),e.nrm(19,"i",91),e.k0s()()(),e.j41(20,"input",92,6),e.bIt("change",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.onFileChangedMain(n))}),e.k0s()(),e.j41(22,"div",93)(23,"div",94),e.DNE(24,Kr,1,0,"i",95),e.j41(25,"div",96),e.nrm(26,"img",97),e.k0s()()()()()(),e.j41(27,"div",84)(28,"label",98),e.EFF(29,"sales.salesInvoices.paymentTypeName"),e.k0s(),e.j41(30,"ng-select",99,7),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.paymentTypeId,n)||(a.form.paymentTypeId=n),e.Njj(n)}),e.k0s(),e.DNE(32,Zr,2,0,"div",100),e.k0s(),e.j41(33,"div",101)(34,"label",102),e.EFF(35,"sales.clientCollection.costCollection"),e.k0s(),e.j41(36,"input",103,8),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.cost,n)||(a.form.cost=n),e.Njj(n)}),e.k0s(),e.DNE(38,el,2,0,"div",104),e.k0s(),e.j41(39,"div",101)(40,"label",105),e.EFF(41,"sales.clientCollection.depositNumber"),e.k0s(),e.j41(42,"input",106,9),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.depositNumber,n)||(a.form.depositNumber=n),e.Njj(n)}),e.k0s()(),e.j41(44,"div",101)(45,"label",107),e.EFF(46,"sales.clientCollection.notes"),e.k0s(),e.j41(47,"textarea",108,10),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.notes,n)||(a.form.notes=n),e.Njj(n)}),e.k0s()(),e.j41(49,"div",85)(50,"button",109),e.nrm(51,"i",110)(52,"span",111),e.k0s()()()()()}if(2&o){const t=e.sdS(11),i=e.sdS(31),n=e.sdS(37),a=e.XpG();e.R7$(3),e.Y8G("ngIf",!a.isEditForm),e.R7$(),e.Y8G("ngIf",a.isEditForm),e.R7$(2),e.JRh(a.titleOperation),e.R7$(3),e.Y8G("hasProgressBar",!1)("fgsType",a.loaderOperationShap)("loaderId",a.operationLoader),e.R7$(15),e.Y8G("ngIf",a.image.path),e.R7$(2),e.Y8G("src",a.image.isApi?a.serverPath+a.image.path:a.image.path,e.B4B),e.R7$(4),e.Y8G("items",a.paymentMethods)("multiple",!1),e.R50("ngModel",a.form.paymentTypeId),e.R7$(2),e.Y8G("ngIf",i.invalid&&i.touched),e.R7$(4),e.R50("ngModel",a.form.cost),e.R7$(2),e.Y8G("ngIf",n.invalid&&n.touched),e.R7$(4),e.R50("ngModel",a.form.depositNumber),e.R7$(5),e.R50("ngModel",a.form.notes),e.R7$(3),e.Y8G("disabled",!t.valid)}}function nl(o,s){if(1&o){const t=e.RV6();e.j41(0,"delete-modal",115),e.bIt("deleteConfirm",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.DeleteConfirmSoft())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}}function il(o,s){if(1&o){const t=e.RV6();e.j41(0,"client-summary",116),e.bIt("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}if(2&o){const t=e.XpG();e.Y8G("clientId",t.operationId)}}let al=(()=>{class o extends G.w{constructor(t,i,n,a,l,r,h,v,R,S,E,$){super(t,i,h,n,a,l,r),this.baseService=n,this.excelService=R,this.clientService=S,this.paymentTypesService=E,this._formDataService=$,this.title="sales.clientCollection.title",this.titleOperation="sales.clientCollection.titleOperation",this.keySelected="",this.clientId=0,this.assignUsers=[],this.times=[],this.employees=[],this.searchForm={},this.isResolveList=!0,this.countLoad=2,this.clientParam={pageSize:50,pageNumber:1,search:"",clientId:null},this.clients=[],this.loading=!1,this.searchClient=new ye.B,this.paymentMethods=[],this.image={},this.serverPath=W.c.mediaUrl,this.clientGroups=[],this.regions=[],this.sales=[],this.priceList=[],this.cities=[],this.sumResult={total:0},this.setDates=(k,Y,Q)=>{if(k?.from||k?.to){const A=k.to||k.from;this.pagination[Y]=this.datePipe.transform(k.from||k.to,"yyyy-MM-ddT00:00:00"),this.pagination[Q]=this.datePipe.transform(A,"yyyy-MM-ddT23:59:59.999")}else this.pagination[Y]=null,this.pagination[Q]=null},this.configRoute()}ngOnInitMore(){this.searchClient.pipe((0,Gr.B)(300),(0,Er.F)(),(0,st.n)(t=>this.loadClient(t))).subscribe(),this.getPaymentTypes(),this.GetAgentLookUps()}GetAgentLookUps(){this.clientService.CustomerCompanyLookUps().subscribe(t=>{this.regions=t.data.regions,this.cities=t.data.cities,this.clientGroups=t.data.clientGroups,this.sales=t.data.employees,this.priceList=t.data.priceList},t=>{console.log(t)})}getPaymentTypes(){this.paymentTypesService.getDropDown().subscribe({next:t=>{this.paymentMethods=t.data}})}onSearch(){this.ngxLoader.startLoader(u.a7);let t={...this.searchForm};this.pagination.depositNumber&&(this.pagination.depositNumber=this.pagination.depositNumber.toString()),this.setDates(t.creationDates,"dateFrom","dateTo"),this.loadentities()}loadClient(t){return this.loading=!0,""==t||null==t?(this.loading=!1,(0,re.of)([])):this.getClientDropdwon(t)}getClientDropdwon(t=""){return this.clientParam.search=t,this.clientParam.clientId=null,this.clientParam.pageNumber=1,this.clientService.GetClientSearch(this.clientParam).pipe((0,st.n)(i=>(this.clients=i.data,this.loading=!1,[])))}mapForm(t){let i={...t};return this._formDataService.formatFormData(i)}validAttachment(){return!!(2!==this.form.paymentTypeId&&3!==this.form.paymentTypeId||this.form.image||this.form.path)||(this.ngxLoader.stopLoader(this.operationLoader),this.alertService.error("sales.clientCollection.mustEnterReceipt"),!1)}mapRegisterForm(t){let i={...t};return i.id=0,this._formDataService.formatFormData(i)}OnSearch(t){this.ngxLoader.startLoader(u.a7),this.loadentities()}configRoute(){}OnSubmit(){this.form.cost<=0?this.alertService.error("sales.clientCollection.costLargeZero"):(this.ngxLoader.startLoader(this.operationLoader),!0===this.isEditForm?this.editEntity():this.registerEntity())}EditModel(t,i,n="md"){this.isEditForm=!0,this.image={},this.form={},this.baseService.getById(t).pipe((0,p.Q)(this.notifier)).subscribe(a=>{a.success?(this.clientParam.clientId=a.data.clientId,this.clientParam.search="",this.clientService.GetClientSearch(this.clientParam).subscribe(l=>{this.clients=l.data}),this.image.path=a.data.path,this.image.isApi=!0,this.form=a.data):this.alertService.error("general.message."+a.message),this.modalService.open(i,{centered:!0,size:n})},a=>{this.alertService.error()})}mapExcel(){let t=[];return this.entities?.forEach(i=>{t.push({Client_Name:i.clientName,Date:this.datePipe.transform(i.creationTime,"yyyy-MM-dd HH:mm"),User:i.creatorName,Payment_Name:i.paymentTypeName,Cost:i.cost,DepositNumber:i.depositNumber,Sync_Odoo:this.getTranslationText(i.isSyncOdoo?"sales.salesOrder.syncSend":"sales.salesOrder.syncNotSend"),Notes:i.notes})}),t}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,this.getTranslationText(this.title),[])}registerEntity(){if(!this.validAttachment())return;let i=this.mapRegisterForm(this.form);this.baseService.register(i).pipe((0,j.O)(),(0,M.c)(this.mainDelay),(0,y.Z)(),(0,p.Q)(this.notifier),(0,I.j)(()=>this.ngxLoader.stopLoader(this.operationLoader)),(0,q.W)(n=>(0,ce.$)(n))).subscribe(n=>{n.success?this.submitFunished():this.alertService.error("general.message."+n.message)},n=>{this.alertService.error("general.message."+n)})}editEntity(){if(!this.validAttachment())return;let i=this.mapForm(this.form);this.baseService.editPut(this.form.id,i).pipe((0,j.O)(),(0,M.c)(this.mainDelay),(0,y.Z)(),(0,p.Q)(this.notifier),(0,I.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(n=>{n.success?this.submitFunished():this.alertService.error("general.message."+n.message)},n=>{this.alertService.error("general.message."+n)})}scrollClient(){this.clientParam.pageNumber=this.clientParam.pageNumber+1,this.clientService.GetClientSearch(this.clientParam).subscribe(t=>{this.clients=[...this.clients,...t.data]})}onFileChangedMain(t){if(t.target.files&&t.target.files[0]){let i=t.target.files.length;for(let n=0;n<i;n++){let a=new FileReader;this.form.image=t.target.files.item(n),a.onload=l=>{this.image={isApi:!1,path:l.target.result}},a.readAsDataURL(t.target.files[n]),console.log(this.image)}}}removeMainImage(){this.form.image="",this.image={isApi:!1,path:""}}onPrint(t){this.ngxLoader.startLoader("searchLoader"),this.baseService.print(t).pipe((0,j.O)(),(0,y.Z)(),(0,p.Q)(this.notifier),(0,I.j)(()=>this.ngxLoader.stopLoader("searchLoader"))).subscribe(i=>{this.openUrl(i)},i=>{this.alertService.error("general.message."+i)})}openUrl(t){let i=new Blob([t],{type:t.type});var n=URL.createObjectURL(i);window.open(n,"_blank")}getTotal(t){this.sumResult.total=t.reduce((i,n)=>i+n.cost,0)}loadentities(){this.pagination.clientId=this.clientId,this.baseService.get(this.pagination).pipe((0,p.Q)(this.notifier)).subscribe(t=>{this.ngxLoader.stopLoader(u.a7),this.entities=t.data,this.getTotal(this.entities),this.pagination.totalItems=t.totalItems,this.LoadSuccess()},t=>{this.ngxLoader.stopLoader(u.a7),this.alertService.error(t)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[]}openModalTitle(t,i="md"){this.isEditForm=!1,this.form={},this.form.clientId=this.clientId,this.modalService.open(t,{centered:!0,size:i})}static{this.\u0275fac=function(i){return new(i||o)(e.rXU(f.nX),e.rXU(_.c$),e.rXU(Vr.F),e.rXU(F.u),e.rXU(g.vh),e.rXU(b.eD),e.rXU(m.Bq),e.rXU(e.gRc),e.rXU(O.V),e.rXU(z.X),e.rXU(ct.z),e.rXU(Le.Q))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["client-collections"]],inputs:{clientId:"clientId"},features:[e.Vt3],decls:35,vars:33,consts:[["tableMaster",""],["operation",""],["deleteModal",""],["ClientInfo",""],["tooltipContent",""],["formEntity","ngForm"],["FileInputMain",""],["paymentTypeId","ngModel"],["cost","ngModel"],["depositNumber","ngModel"],["notes","ngModel"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],[3,"reset","search","exportXlsx","addNew","addPermission","totalItems","title"],["control",""],[1,"col-md-3","mb-2"],[1,"search-box"],["type","search","id","name","name","name",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],[1,"col-12","col-md-2","mb-2"],["type","text","mwlFlatpickr","","id","isDate","mode","range","altFormat","d/m/Y",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"col-12","col-md-2"],["name","paymentTypeId","bindValue","code","bindLabel","name","required","",3,"ngModelChange","items","multiple","placeholder","ngModel"],[1,"col-md-2","mb-2"],["type","number","id","depositNumber","name","depositNumber",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"card-body"],[3,"hasProgressBar","fgsType","loaderId"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],[2,"width",".2%"],["translate","",2,"width",".5%"],["pSortableColumn","serial","translate","",2,"width","4%"],[1,"ri-expand-up-down-line"],["pSortableColumn","paymentTypeName","translate","",2,"width","8%"],["pSortableColumn","creationTime","translate","",2,"width","12%"],["pSortableColumn","cost","translate","",2,"width","5%"],["translate","",2,"width","12%"],[1,"fs-5"],["type","button","pRipple","",1,"border-0","p-button-text","p-button-rounded","p-button-plain",3,"pRowToggler","ngClass"],[1,"badge","bg-success-subtle","text-success"],["tooltipPosition","top",1,"mdi","mdi-cog-outline","text-muted","fs-16","align-middle","me-1",3,"ngbTooltip"],[1,"btn","btn-sm","btn-soft-warning","edit-list","mx-2",3,"click"],[1,"ri-printer-cloud-fill","align-bottom","mx-1"],["class","btn btn-sm btn-soft-info edit-list mx-2",3,"click",4,"hasPermission"],["class","btn btn-sm btn-soft-danger remove-list",3,"click",4,"hasPermission"],[1,"ri-history-fill","text-warning"],[1,"ri-history-fill","text-danger"],[1,"ri-user-location-fill","text-primary"],[1,"btn","btn-sm","btn-soft-info","edit-list","mx-2",3,"click"],[1,"ri-pencil-fill","align-bottom","mx-1"],[1,"btn","btn-sm","btn-soft-danger","remove-list",3,"click"],[1,"ri-delete-bin-5-fill","align-bottom"],["colspan","17"],["dataKey","id"],[1,"bg-light"],["pSortableColumn","isSyncOdoo","translate","",2,"width","6%"],["pSortableColumn","depositNumber","translate","",2,"width","8%"],["pSortableColumn","notes","translate","",2,"width","8%"],["class","badge bg-success","translate","sales.salesOrder.syncSend",4,"ngIf"],["class","badge bg-warning","translate","sales.salesOrder.syncNotSend",4,"ngIf"],["translate","sales.salesOrder.syncSend",1,"badge","bg-success"],["translate","sales.salesOrder.syncNotSend",1,"badge","bg-warning"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["class","fw-bold fs-4","translate","",4,"ngIf"],["translate",""],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"submit"],[1,"mb-3"],[1,"text-center"],[1,"position-relative","d-inline-block"],[1,"position-absolute","top-100","start-100","translate-middle"],["placement","right","ngbTooltip","Select Image",1,"mb-0",3,"click"],[1,"avatar-xs"],[1,"avatar-title","bg-light","border","rounded-circle","text-muted","cursor-pointer"],[1,"ri-image-fill"],["value","","type","file","accept","image/png, image/gif, image/jpeg",1,"form-control","d-none",3,"change"],[1,"d-flex"],[1,"avatar-lg","mx-2","position-relative"],["class","position-absolute bx bx-x-circle text-white","style","background: red; top: 1px; right: -4px; font-size: 1rem;\n                                                        border-radius: 50% ",3,"click",4,"ngIf"],[1,"avatar-title","bg-light","rounded"],["id","product-img2","alt","",1,"avatar-md","h-auto",3,"src"],["translate","",1,"required","fw-bold","form-label","w-100"],["name","paymentTypeId","bindValue","code","bindLabel","name","required","",3,"ngModelChange","items","multiple","ngModel"],["class","text-danger text-center","translate","",4,"ngIf"],[1,"mb-2"],["for","cost","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","cost","type","text","id","cost",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],["for","depositNumber","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","depositNumber","type","text","id","depositNumber",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["for","notes","translate","",1,"fw-bold","form-label"],["rows","2","InputTirmFilter","","name","notes","type","text","id","notes",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["type","submit","type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],["translate","",1,"fw-bold","fs-4"],[1,"position-absolute","bx","bx-x-circle","text-white",2,"background","red","top","1px","right","-4px","font-size","1rem","border-radius","50%",3,"click"],["translate","",1,"text-danger","text-center"],[3,"deleteConfirm","dismiss"],[3,"dismiss","clientId"]],template:function(i,n){if(1&i){const a=e.RV6();e.j41(0,"div",11)(1,"div",12)(2,"div",13)(3,"base-filter",14),e.bIt("reset",function(){return e.eBV(a),e.Njj(n.onReset())})("search",function(){return e.eBV(a),e.Njj(n.onSearch())})("exportXlsx",function(){return e.eBV(a),e.Njj(n.onExportXlsx())})("addNew",function(){e.eBV(a);const r=e.sdS(30);return e.Njj(n.openModalTitle(r,"md"))}),e.qex(4,15),e.j41(5,"div",16)(6,"div",17)(7,"input",18),e.nI1(8,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.name,r)||(n.pagination.name=r),e.Njj(r)}),e.k0s(),e.nrm(9,"i",19),e.k0s()(),e.j41(10,"div",20)(11,"input",21),e.nI1(12,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.searchForm.creationDates,r)||(n.searchForm.creationDates=r),e.Njj(r)}),e.k0s()(),e.j41(13,"div",22)(14,"ng-select",23),e.nI1(15,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.paymentTypeId,r)||(n.pagination.paymentTypeId=r),e.Njj(r)}),e.k0s()(),e.j41(16,"div",24)(17,"input",25),e.nI1(18,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.depositNumber,r)||(n.pagination.depositNumber=r),e.Njj(r)}),e.k0s()(),e.bVm(),e.k0s(),e.j41(19,"div",26),e.nrm(20,"ngx-ui-loader",27),e.j41(21,"div",28)(22,"p-table",29,0),e.bIt("onLazyLoad",function(r){return e.eBV(a),e.Njj(n.tableChange(r))})("selectionChange",function(r){return e.eBV(a),e.Njj(n.onSelectionChange(r))}),e.DNE(24,Br,17,0,"ng-template",30)(25,Yr,24,16,"ng-template",31)(26,zr,32,9,"ng-template",32),e.k0s()(),e.DNE(27,Qr,2,0,"div",33)(28,qr,6,8,"div",34),e.k0s()()()(),e.DNE(29,tl,53,17,"ng-template",null,1,e.C5r)(31,nl,1,0,"ng-template",null,2,e.C5r)(33,il,1,1,"ng-template",null,3,e.C5r)}2&i&&(e.R7$(3),e.Y8G("addPermission",e.lJ4(32,Lr))("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(4),e.FS9("placeholder",e.bMT(8,24,"general.table.name")),e.R50("ngModel",n.pagination.name),e.R7$(4),e.FS9("placeholder",e.bMT(12,26,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.creationDates),e.R7$(3),e.FS9("placeholder",e.bMT(15,28,"sales.salesInvoices.paymentTypeName")),e.Y8G("items",n.paymentMethods)("multiple",!1),e.R50("ngModel",n.pagination.paymentTypeId),e.R7$(3),e.FS9("placeholder",e.bMT(18,30,"sales.clientCollection.depositNumber")),e.R50("ngModel",n.pagination.depositNumber),e.R7$(3),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderSearchShap)("loaderId",n.searchLoader),e.R7$(2),e.Y8G("value",n.entities)("rows",n.pagination.pageSize)("lazy",!0)("totalRecords",n.pagination.totalItems),e.R7$(5),e.Y8G("ngIf",n.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems>0))},dependencies:[g.YU,g.bT,c.qT,c.me,c.Q0,c.BC,c.cb,c.YS,c.vS,c.cV,m.s5,B.kL,D.b,P.w,V.p,L.g,De.x,x.m,U.p,_.Mm,C.XI,N.Ei,C.Tg,C.FP,b.Cv,m.md,T.vr,g.vh,_.D9]})}}return o})();var ol=d(96357),dt=d(35419);const rl=()=>["salesInvoices.register"],ll=(o,s)=>({"bg-success-subtle text-success":o,"bg-danger-subtle text-danger":s}),sl=()=>["salesInvoices.odooSync","salesInvoices.printPill"],cl=()=>["salesInvoices.odooSync"],dl=()=>["salesInvoices.printPill"];function ml(o,s){1&o&&(e.j41(0,"tr",38),e.nrm(1,"th",39),e.j41(2,"th",40),e.EFF(3,"#"),e.k0s(),e.j41(4,"th",41),e.nrm(5,"i",42),e.EFF(6," orderManagement.order.invoiceCode "),e.k0s(),e.j41(7,"th",43),e.nrm(8,"i",42),e.EFF(9," orderManagement.order.orderCode "),e.k0s(),e.j41(10,"th",44),e.nrm(11,"i",42),e.EFF(12," sales.salesInvoices.creationDue "),e.k0s(),e.j41(13,"th",45),e.EFF(14," sales.salesOrder.salsePerson "),e.k0s(),e.j41(15,"th",46),e.nrm(16,"i",42),e.EFF(17," sales.salesInvoices.total "),e.k0s(),e.j41(18,"th",47),e.nrm(19,"i",42),e.EFF(20," sales.salesOrder.totalDiscount "),e.k0s(),e.j41(21,"th",48),e.nrm(22,"i",42),e.EFF(23," sales.salesInvoices.tax "),e.k0s(),e.j41(24,"th",49),e.nrm(25,"i",42),e.EFF(26," sales.salesOrder.netPrice "),e.k0s(),e.j41(27,"th",50),e.nrm(28,"i",42),e.EFF(29," sales.salesOrder.invoiceStatus "),e.k0s(),e.nrm(30,"th",51),e.k0s())}function pl(o,s){1&o&&e.nrm(0,"span",65)}function gl(o,s){1&o&&e.nrm(0,"span",66)}function _l(o,s){1&o&&e.nrm(0,"span",67)}function ul(o,s){1&o&&(e.j41(0,"li")(1,"span",72),e.nrm(2,"i",77)(3,"span",78),e.k0s()())}function hl(o,s){if(1&o){const t=e.RV6();e.j41(0,"li",54),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2).$implicit,a=e.XpG();return e.Njj(a.Print(n.id))}),e.j41(1,"span",72),e.nrm(2,"i",77)(3,"span",79),e.k0s()()}}function fl(o,s){if(1&o){const t=e.RV6();e.j41(0,"span",63)(1,"div",68)(2,"button",69),e.nrm(3,"i",70),e.k0s(),e.j41(4,"ul",71)(5,"li",54),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,a=e.XpG(),l=e.sdS(54);return e.Njj(a.getInvoiceAttachments(n.id,l))}),e.j41(6,"span",72),e.nrm(7,"i",73)(8,"span",74),e.k0s()(),e.DNE(9,ul,4,0,"li",75)(10,hl,4,0,"li",76),e.k0s()()()}2&o&&(e.R7$(9),e.Y8G("hasPermission",e.lJ4(2,cl)),e.R7$(),e.Y8G("hasPermission",e.lJ4(3,dl)))}function bl(o,s){if(1&o){const t=e.RV6();e.j41(0,"tr",52)(1,"td"),e.nrm(2,"button",53),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td",54),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.Print(n.id))}),e.nrm(6,"i",55),e.j41(7,"bdi",56),e.EFF(8),e.k0s()(),e.j41(9,"td"),e.nrm(10,"i",55),e.j41(11,"bdi",57),e.EFF(12),e.k0s()(),e.j41(13,"td")(14,"div"),e.EFF(15),e.nI1(16,"date"),e.k0s(),e.j41(17,"div",58),e.EFF(18),e.nI1(19,"date"),e.k0s()(),e.j41(20,"td"),e.EFF(21),e.k0s(),e.j41(22,"td"),e.EFF(23),e.k0s(),e.j41(24,"td"),e.EFF(25),e.k0s(),e.j41(26,"td"),e.EFF(27),e.k0s(),e.j41(28,"td")(29,"span",59),e.EFF(30),e.k0s()(),e.j41(31,"td"),e.DNE(32,pl,1,0,"span",60)(33,gl,1,0,"span",61)(34,_l,1,0,"span",62),e.k0s(),e.j41(35,"td")(36,"div",63),e.DNE(37,fl,11,4,"span",64),e.k0s()()()}if(2&o){const t=s.$implicit,i=s.rowIndex,n=s.expanded;e.R7$(2),e.Y8G("pRowToggler",t)("ngClass",n?" ri-arrow-down-s-line":"  ri-arrow-up-s-line"),e.R7$(2),e.JRh(i+1),e.R7$(4),e.SpI("#INV#",t.id,""),e.R7$(4),e.SpI("#SO#",t.offerOrderId," "),e.R7$(3),e.JRh(e.i5U(16,17,t.creationTime,"yyyy-MM-dd")),e.R7$(2),e.Y8G("ngClass",e.l_i(23,ll,!t.isDue,t.isDue)),e.R7$(),e.JRh(e.i5U(19,20,t.dueDate,"yyyy-MM-dd")),e.R7$(3),e.JRh(t.salsePersonName),e.R7$(2),e.JRh(t.total),e.R7$(2),e.JRh(t.totalDiscount),e.R7$(2),e.JRh(t.tax),e.R7$(3),e.JRh(t.net),e.R7$(2),e.Y8G("ngIf",0==t.status),e.R7$(),e.Y8G("ngIf",2==t.status),e.R7$(),e.Y8G("ngIf",3==t.status),e.R7$(3),e.Y8G("hasPermission",e.lJ4(26,sl))}}function Cl(o,s){1&o&&e.nrm(0,"span",87)}function vl(o,s){1&o&&e.nrm(0,"span",88)}function Rl(o,s){if(1&o&&(e.j41(0,"tr")(1,"td",80)(2,"div")(3,"table",81)(4,"thead")(5,"tr",82)(6,"th",83),e.nrm(7,"i",42),e.EFF(8," sales.salesOrder.isSync "),e.k0s(),e.j41(9,"th",84),e.nrm(10,"i",42),e.EFF(11," sales.salesInvoices.notes "),e.k0s()()(),e.j41(12,"tbody")(13,"tr")(14,"td"),e.DNE(15,Cl,1,0,"span",85)(16,vl,1,0,"span",86),e.k0s(),e.j41(17,"td"),e.EFF(18),e.k0s()()()()()()()),2&o){const t=s.$implicit;e.R7$(15),e.Y8G("ngIf",t.isSync),e.R7$(),e.Y8G("ngIf",!t.isSync),e.R7$(2),e.JRh(t.notes)}}function jl(o,s){1&o&&(e.j41(0,"div",89),e.EFF(1," general.table.noData "),e.k0s())}function Il(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",90)(1,"div",91),e.nrm(2,"ngb-pagination-info",92),e.j41(3,"table-length",93),e.bIt("lengthChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",94)(5,"ngb-pagination",95),e.bIt("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.pagination.pageNumber,n)||(a.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&o){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function yl(o,s){1&o&&(e.j41(0,"span",121),e.EFF(1,"general.action.register "),e.k0s())}function Fl(o,s){1&o&&(e.j41(0,"span",121),e.EFF(1,"general.action.edit "),e.k0s())}function Ml(o,s){1&o&&(e.j41(0,"div",122),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function Sl(o,s){1&o&&(e.j41(0,"div",122),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function Tl(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",125)(1,"i",126),e.bIt("click",function(){e.eBV(t);const n=e.XpG().index,a=e.XpG(2);return e.Njj(a.removeFile(n))}),e.k0s(),e.j41(2,"p-image",127),e.bIt("error",function(n){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setDefaultImage(n,"assets/images/custom/no-img.jpg"))}),e.k0s()()}2&o&&(e.R7$(2),e.Y8G("src","assets/images/PDF.png")("preview",!1)("alt","pdf"))}function kl(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",125)(1,"i",126),e.bIt("click",function(){e.eBV(t);const n=e.XpG().index,a=e.XpG(2);return e.Njj(a.removeFile(n))}),e.k0s(),e.j41(2,"p-image",127),e.bIt("error",function(n){e.eBV(t);const a=e.XpG(3);return e.Njj(a.setDefaultImage(n,"assets/images/custom/no-img.jpg"))}),e.k0s()()}if(2&o){const t=e.XpG().$implicit,i=e.XpG(2);e.R7$(2),e.Y8G("src",t.isNew?t.attachment:i.serverPath+t.attachment)("preview",!0)("alt","image")}}function wl(o,s){if(1&o&&(e.j41(0,"div",123),e.DNE(1,Tl,3,3,"div",124)(2,kl,3,3,"div",124),e.k0s()),2&o){const t=s.index,i=e.XpG(2);e.R7$(),e.Y8G("ngIf","application/pdf"===i.filesNames[t]),e.R7$(),e.Y8G("ngIf","application/pdf"!==i.filesNames[t])}}function xl(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",96)(1,"div",97)(2,"h4",98),e.DNE(3,yl,2,0,"span",99)(4,Fl,2,0,"span",99),e.j41(5,"span",100),e.EFF(6),e.k0s()(),e.j41(7,"button",101),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss("Cross click"))}),e.k0s()(),e.j41(8,"div",102),e.nrm(9,"ngx-ui-loader",30),e.j41(10,"form",103,5),e.bIt("submit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.OnSubmit())}),e.j41(12,"div",104)(13,"label",105),e.EFF(14,"sales.salesInvoices.paymentTypeName"),e.k0s(),e.j41(15,"ng-select",106,6),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.paymentTypeId,n)||(a.form.paymentTypeId=n),e.Njj(n)}),e.k0s(),e.DNE(17,Ml,2,0,"div",107),e.k0s(),e.j41(18,"div",104)(19,"label",108),e.EFF(20,"sales.salesInvoices.cost"),e.k0s(),e.j41(21,"input",109,7),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.cost,n)||(a.form.cost=n),e.Njj(n)}),e.k0s(),e.DNE(23,Sl,2,0,"div",110),e.k0s(),e.j41(24,"div",104)(25,"label",111),e.EFF(26,"general.table.notes"),e.k0s(),e.j41(27,"textarea",112),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.notes,n)||(a.form.notes=n),e.Njj(n)}),e.EFF(28,"                    "),e.k0s()(),e.j41(29,"div",9)(30,"div",113)(31,"label",105),e.EFF(32," orderManagement.order.attachment"),e.k0s(),e.j41(33,"input",114,8),e.bIt("change",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.onFileSelected(n))}),e.k0s()(),e.j41(35,"div",115),e.DNE(36,wl,3,2,"div",116),e.k0s()(),e.j41(37,"div",117)(38,"button",118),e.nrm(39,"i",119)(40,"span",120),e.k0s()()()()()}if(2&o){const t=e.sdS(11),i=e.sdS(16),n=e.sdS(22),a=e.XpG();e.R7$(3),e.Y8G("ngIf",!a.isEditForm),e.R7$(),e.Y8G("ngIf",a.isEditForm),e.R7$(2),e.JRh(a.titleOperation),e.R7$(3),e.Y8G("hasProgressBar",!1)("fgsType",a.loaderOperationShap)("loaderId",a.operationLoader),e.R7$(6),e.Y8G("items",a.paymentMethods)("multiple",!1),e.R50("ngModel",a.form.paymentTypeId),e.R7$(2),e.Y8G("ngIf",i.invalid&&i.touched),e.R7$(4),e.R50("ngModel",a.form.cost),e.R7$(2),e.Y8G("ngIf",n.invalid&&n.touched),e.R7$(4),e.R50("ngModel",a.form.notes),e.R7$(9),e.Y8G("ngForOf",a.filesToShow),e.R7$(2),e.Y8G("disabled",!t.valid)}}function Nl(o,s){if(1&o){const t=e.RV6();e.j41(0,"delete-modal",128),e.bIt("deleteConfirm",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.DeleteConfirmSoft())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}}function Gl(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",131)(1,"p-image",132),e.bIt("error",function(n){e.eBV(t);const a=e.XpG(2);return e.Njj(a.setDefaultImage(n,"assets/images/custom/no-img.jpg"))}),e.k0s()()}if(2&o){const t=s.$implicit,i=e.XpG(2);e.R7$(),e.Y8G("src",i.serverPath+t.path)("preview",!0)}}function El(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",96)(1,"div",97),e.nrm(2,"h2",74),e.j41(3,"button",101),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss("Cross click"))}),e.k0s()(),e.j41(4,"div",129)(5,"div",9),e.DNE(6,Gl,2,2,"div",130),e.k0s()()()}if(2&o){const t=e.XpG();e.R7$(6),e.Y8G("ngForOf",t.images)}}function Dl(o,s){if(1&o){const t=e.RV6();e.j41(0,"client-summary",133),e.bIt("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}if(2&o){const t=e.XpG();e.Y8G("clientId",t.operationId)}}let Vl=(()=>{class o extends G.w{constructor(t,i,n,a,l,r,h,v,R,S,E,$){super(t,i,h,n,a,l,r),this.baseService=n,this.paymentTypesService=v,this.formData=R,this.employeeService=S,this.regionService=E,this.cityService=$,this.title="sales.salesInvoices.title",this.titleOperation="sales.salesInvoices.payment",this.paymentMethods=[],this.searchForm={},this.form={file:""},this.filesToSend=[],this.filesToShow=[],this.filesNames=[],this.isResolveList=!0,this.serverPath=W.c.mediaUrl,this.countLoad=0,this.isOrderEdit=!1,this.images=[],this.salesPersons=[],this.regions=[],this.cities=[],this.clientId=0,this.setDates=(k,Y,Q)=>{if(k?.from||k?.to){const A=k.to||k.from;this.pagination[Y]=this.datePipe.transform(k.from||k.to,"yyyy-MM-ddT00:00:00"),this.pagination[Q]=this.datePipe.transform(A,"yyyy-MM-ddT23:59:59.999")}else this.pagination[Y]=null,this.pagination[Q]=null},this.configRoute(),this.GetSalesPersons(),this.GetRegions(),this.GetCities()}GetRegions(){this.regionService.getDropDown().subscribe(t=>{this.regions=t.data},t=>{console.log(t)})}GetCities(){this.cityService.getDropDown().subscribe(t=>{this.cities=t.data},t=>{console.log(t)})}GetSalesPersons(){this.employeeService.GetAllByType(9).subscribe(t=>{this.salesPersons=t.data},t=>{console.log(t)})}configRoute(){this.routerActive.data.pipe((0,p.Q)(this.notifier)).subscribe(t=>{this.entities=t.data.data,this.pagination.totalItems=t.data.totalItems},()=>{this.alertService.error()})}getInvoiceAttachments(t,i){this.baseService.getInvoiceAttachments(t).subscribe({next:n=>{this.images=n.data,this.modalService.open(i,{centered:!0,size:"md"})}})}onSearch(){let t={...this.searchForm};this.ngxLoader.startLoader(u.a7),this.setDates(t.dueDates,"dueDateFrom","dueDateTo"),this.setDates(t.creationDates,"creationTimeFrom","creationTimeTo"),this.loadentities()}LoadSuccess(){this.ngxLoader.stopLoader(u.a7)}onReset(){this.form={},this.searchForm={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems}}openInvoiceModal(t,i,n="md",a){if(this.isEditForm=a,this.form={},this.clearFiles(),this.operationId=t.id,a){this.form=t,console.log(this.form);let l="";t.path&&(l=t.path.split(".")[1]),this.filesToSend.push({id:0,isNew:!1,attachment:t.path}),this.filesToShow.push({id:0,isNew:!1,attachment:t.path}),this.filesNames.push("pdf"===l?"application/pdf":l),this.modalService.open(i,{centered:!0,size:n})}else this.form.invoiceMasterId=t.id,this.modalService.open(i,{centered:!0,size:n})}onFileSelected(t){this.clearFiles();const i=t.target;if(t.target.files&&t.target.files[0]){let n=t.target.files.length;for(let a=0;a<n;a++){let l=new FileReader;this.filesToSend.push({id:0,isNew:!0,attachment:t.target.files.item(a)}),this.filesNames.push(t.target.files[a].type),l.onload=r=>{this.filesToShow.push({id:0,isNew:!0,attachment:r.target.result}),console.log(this.filesToShow)},l.readAsDataURL(t.target?.files[a])}i.value=""}}setDefaultImage(t,i){t.target.src=i}checkExtension(t){const n=t.split("/").pop().split(".").pop();return console.log(),n}checkUrl(t){return null==t||""==t?"":t.startsWith("/upload")?t.replace("/upload","upload"):t}removeFile(t){this.filesToShow.splice(t,1),this.filesNames.splice(t,1),this.filesToSend.splice(t,1)}clearFiles(){this.filesNames=[],this.filesToShow=[],this.filesToSend=[]}registerEntity(){let t=this.mapRegisterForm(this.form);t.file=this.filesToSend&&this.filesToSend.length>0?this.filesToSend[0].attachment:null,this.baseService.register(this.formData.formatFormData(t)).pipe((0,j.O)(),(0,M.c)(this.mainDelay),(0,y.Z)(),(0,p.Q)(this.notifier),(0,I.j)(()=>this.ngxLoader.stopLoader(u.ZW)),(0,q.W)(i=>(0,ce.$)(i))).subscribe(i=>{i.success?(this.modalService.dismissAll(),this.submitFunished()):this.alertService.error("general.message."+i.message)},i=>{this.alertService.error("general.message."+i)})}editEntity(){let t=this.mapForm(this.form);t.file=this.filesToSend&&this.filesToSend.length>0?this.filesToSend[0].attachment:null,this.baseService.edit(this.formData.formatFormData(t)).pipe((0,j.O)(),(0,M.c)(this.mainDelay),(0,y.Z)(),(0,p.Q)(this.notifier),(0,I.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(i=>{i.success?this.submitFunished():this.alertService.error("general.message."+i.message)},i=>{this.alertService.error("general.message."+i)})}Print(t){this.ngxLoader.startLoader("searchLoader"),this.baseService.print(t).pipe((0,j.O)(),(0,y.Z)(),(0,p.Q)(this.notifier),(0,I.j)(()=>this.ngxLoader.stopLoader("searchLoader"))).subscribe(i=>{this.openUrl(i)},i=>{this.alertService.error("general.message."+i)})}openUrl(t){let i=new Blob([t],{type:t.type});var n=URL.createObjectURL(i);window.open(n,"_blank")}loadentities(){this.pagination.clientId=this.clientId,this.baseService.get(this.pagination).pipe((0,p.Q)(this.notifier)).subscribe(t=>{this.ngxLoader.stopLoader(u.a7),this.entities=t.data,this.pagination.totalItems=t.totalItems,this.LoadSuccess()},t=>{this.ngxLoader.stopLoader(u.a7),this.alertService.error(t)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[]}static{this.\u0275fac=function(i){return new(i||o)(e.rXU(f.nX),e.rXU(_.c$),e.rXU(ol.Q),e.rXU(F.u),e.rXU(g.vh),e.rXU(b.eD),e.rXU(m.Bq),e.rXU(ct.z),e.rXU(Le.Q),e.rXU(Fe.O),e.rXU(dt.S),e.rXU(he.h))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["client-invoices"]],inputs:{clientId:"clientId"},features:[e.Vt3],decls:57,vars:58,consts:[["tableMaster",""],["addPaymentModal",""],["deleteModal",""],["viewMedia",""],["ClientInfo",""],["formEntity","ngForm"],["paymentTypeId","ngModel"],["cost","ngModel"],["fileInput",""],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],["overlayColor","rgba(255,255,255,0.05)","fgsColor","rgba(255,255,255,0)",3,"loaderId"],[3,"reset","search","addPermission","showAdd","showExport","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","number","id","id","name","id",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["InputTirmFilter","","type","search","id","clientName","name","clientName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["name","name","bindValue","id","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],["type","text","mwlFlatpickr","","id","isDate","mode","range","altFormat","d/m/Y",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],["type","text","mwlFlatpickr","","id","dueDates","mode","range","altFormat","d/m/Y",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],["name","regionId","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","placeholder","ngModel"],["name","cityId","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","placeholder","ngModel"],["name","customerSize","id","customerSize","aria-label","Floating label select example",1,"form-select",3,"ngModelChange","ngModel"],["translate","sales.salesInvoices.Unpaid",3,"value"],["translate","sales.salesInvoices.PartiallyPaid",3,"value"],["translate","sales.salesInvoices.Paid",3,"value"],[1,"card-body"],[3,"hasProgressBar","fgsType","loaderId"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],[2,"width",".2%"],["translate","",2,"width",".3%"],["pSortableColumn","id","translate","",2,"width","3%"],[1,"ri-expand-up-down-line"],["pSortableColumn","id","translate","",2,"width","4%"],["pSortableColumn","creationTime","translate","",2,"width","12%"],["translate","",2,"width","8%"],["pSortableColumn","total","translate","",2,"width","5%"],["pSortableColumn","totalDiscount","translate","",2,"width","5%"],["pSortableColumn","tax","translate","",2,"width","4%"],["pSortableColumn","net","translate","",2,"width","4%"],["pSortableColumn","invoiceStatus","translate","",2,"width","6%"],[2,"width","3%"],[1,"fs-5"],["type","button","pRipple","",1,"border-0","p-button-text","p-button-rounded","p-button-plain",3,"pRowToggler","ngClass"],[3,"click"],[1,"ri-share-circle-fill","label-icon","align-middle","rounded-pill","fs-16","me-2"],[1,"code-pointer","text-decoration-underline"],[1,"code-pointer"],[1,"badge",3,"ngClass"],[1,"badge","fs-5","bg-success-subtle","text-success","badge-border"],["class","badge bg-danger","translate","sales.salesInvoices.Unpaid",4,"ngIf"],["class","badge bg-warning","translate","sales.salesInvoices.PartiallyPaid",4,"ngIf"],["class","badge bg-success","translate","sales.salesInvoices.Paid",4,"ngIf"],[1,"d-inline-block"],["class","d-inline-block",4,"hasPermission"],["translate","sales.salesInvoices.Unpaid",1,"badge","bg-danger"],["translate","sales.salesInvoices.PartiallyPaid",1,"badge","bg-warning"],["translate","sales.salesInvoices.Paid",1,"badge","bg-success"],[1,"dropdown-custom","d-inline-block"],["type","button",1,"btn","dropbtn","btn-soft-secondary","btn-sm","dropdown-custom","arrow-none"],[1,"ri-more-fill"],[1,"dropdown-menu","dropdown-menu-end","dropdown-content",2,"left","0"],[1,"dropdown-item"],[1,"ri-image-fill","align-bottom","me-2","text-muted"],["translate","sales.salesOrder.attachments"],[4,"hasPermission"],[3,"click",4,"hasPermission"],[1,"ri-printer-line","align-bottom","me-2","text-muted"],["translate","sales.salesOrder.isSync"],["translate","orderManagement.order.printPill"],["colspan","17"],["dataKey","id"],[1,"bg-light"],["pSortableColumn","isSync","translate","",2,"width","5%"],["pSortableColumn","notes","translate","",2,"width","5%"],["class","badge bg-success","translate","sales.salesOrder.syncSend",4,"ngIf"],["class","badge bg-warning","translate","sales.salesOrder.syncNotSend",4,"ngIf"],["translate","sales.salesOrder.syncSend",1,"badge","bg-success"],["translate","sales.salesOrder.syncNotSend",1,"badge","bg-warning"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["class","fw-bold fs-4","translate","",4,"ngIf"],["translate",""],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"submit"],[1,"mb-3"],["translate","",1,"required","fw-bold","form-label","w-100"],["name","paymentTypeId","bindValue","code","bindLabel","name","required","",3,"ngModelChange","items","multiple","ngModel"],["class","text-danger text-center","translate","",4,"ngIf"],["for","cost","translate","",1,"required","fw-bold","form-label"],["InputTirmFilter","","name","cost","type","text","id","employeeName","required","",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],["for","notes","translate","",1,"fw-bold","form-label"],["rows","3","name","notes","type","text","id","notes",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,"col-12","mb-2"],["accept","image/*, application/pdf","type","file","placeholder","dfd",1,"form-control","fs-6",3,"change"],[1,"my-3","row","row-cols-5"],["class","col",4,"ngFor","ngForOf"],[1,"text-center"],["type","submit","type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],["translate","",1,"fw-bold","fs-4"],["translate","",1,"text-danger","text-center"],[1,"col"],["class","position-relative",4,"ngIf"],[1,"position-relative"],[1,"ri-close-fill","position-absolute",2,"border-radius","50%","background-color","red","inset-inline-start","-14px","top","-8px","color","white",3,"click"],["width","50","height","50",3,"error","src","preview","alt"],[3,"deleteConfirm","dismiss"],[1,"modal-body","p-4"],["class","col-12 col-md-3",4,"ngFor","ngForOf"],[1,"col-12","col-md-3"],["width","80","height","100",3,"error","src","preview"],[3,"dismiss","clientId"]],template:function(i,n){if(1&i){const a=e.RV6();e.j41(0,"div",9)(1,"div",10)(2,"div",11),e.nrm(3,"ngx-ui-loader",12),e.j41(4,"base-filter",13),e.bIt("reset",function(){return e.eBV(a),e.Njj(n.onReset())})("search",function(){return e.eBV(a),e.Njj(n.onSearch())}),e.qex(5,14),e.j41(6,"div",15)(7,"div",16)(8,"input",17),e.nI1(9,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.id,r)||(n.pagination.id=r),e.Njj(r)}),e.k0s(),e.nrm(10,"i",18),e.k0s()(),e.j41(11,"div",15)(12,"div",16)(13,"input",19),e.nI1(14,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.clientName,r)||(n.pagination.clientName=r),e.Njj(r)}),e.k0s(),e.nrm(15,"i",18),e.k0s()(),e.j41(16,"div",15)(17,"div",16)(18,"ng-select",20),e.nI1(19,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.salesPersonId,r)||(n.pagination.salesPersonId=r),e.Njj(r)}),e.k0s()()(),e.j41(20,"div",15)(21,"input",21),e.nI1(22,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.searchForm.creationDates,r)||(n.searchForm.creationDates=r),e.Njj(r)}),e.k0s()(),e.j41(23,"div",15)(24,"input",22),e.nI1(25,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.searchForm.dueDates,r)||(n.searchForm.dueDates=r),e.Njj(r)}),e.k0s()(),e.j41(26,"div",15)(27,"div",16)(28,"ng-select",23),e.nI1(29,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.regionId,r)||(n.pagination.regionId=r),e.Njj(r)}),e.k0s()()(),e.j41(30,"div",15)(31,"div",16)(32,"ng-select",24),e.nI1(33,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.cityId,r)||(n.pagination.cityId=r),e.Njj(r)}),e.k0s()()(),e.j41(34,"div",15)(35,"select",25),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.status,r)||(n.pagination.status=r),e.Njj(r)}),e.nrm(36,"option",26)(37,"option",27)(38,"option",28),e.k0s()(),e.bVm(),e.k0s(),e.j41(39,"div",29),e.nrm(40,"ngx-ui-loader",30),e.j41(41,"div",31)(42,"p-table",32,0),e.bIt("onLazyLoad",function(r){return e.eBV(a),e.Njj(n.tableChange(r))})("selectionChange",function(r){return e.eBV(a),e.Njj(n.onSelectionChange(r))}),e.DNE(44,ml,31,0,"ng-template",33)(45,bl,38,27,"ng-template",34)(46,Rl,19,3,"ng-template",35),e.k0s()(),e.DNE(47,jl,2,0,"div",36)(48,Il,6,8,"div",37),e.k0s()()()(),e.DNE(49,xl,41,15,"ng-template",null,1,e.C5r)(51,Nl,1,0,"ng-template",null,2,e.C5r)(53,El,7,1,"ng-template",null,3,e.C5r)(55,Dl,1,1,"ng-template",null,4,e.C5r)}2&i&&(e.R7$(3),e.Y8G("loaderId","newLoader"),e.R7$(),e.Y8G("addPermission",e.lJ4(57,rl))("showAdd",!1)("showExport",!1)("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(4),e.FS9("placeholder",e.bMT(9,43,"orderManagement.order.orderCode")),e.R50("ngModel",n.pagination.id),e.R7$(5),e.FS9("placeholder",e.bMT(14,45,"orderManagement.order.agentName")),e.R50("ngModel",n.pagination.clientName),e.R7$(5),e.FS9("placeholder",e.bMT(19,47,"sales.salesOrder.salsePerson")),e.Y8G("items",n.salesPersons)("multiple",!1),e.R50("ngModel",n.pagination.salesPersonId),e.R7$(3),e.FS9("placeholder",e.bMT(22,49,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.creationDates),e.R7$(3),e.FS9("placeholder",e.bMT(25,51,"sales.salesInvoices.dueDates")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.dueDates),e.R7$(4),e.FS9("placeholder",e.bMT(29,53,"client.client.regionName")),e.Y8G("items",n.regions)("multiple",!1),e.R50("ngModel",n.pagination.regionId),e.R7$(4),e.FS9("placeholder",e.bMT(33,55,"client.client.cityName")),e.Y8G("items",n.cities)("multiple",!1),e.R50("ngModel",n.pagination.cityId),e.R7$(3),e.R50("ngModel",n.pagination.status),e.R7$(),e.Y8G("value",0),e.R7$(),e.Y8G("value",2),e.R7$(),e.Y8G("value",3),e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderSearchShap)("loaderId",n.searchLoader),e.R7$(2),e.Y8G("value",n.entities)("rows",n.pagination.pageSize)("lazy",!0)("totalRecords",n.pagination.totalItems),e.R7$(5),e.Y8G("ngIf",n.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems>0))},dependencies:[g.YU,g.Sq,g.bT,c.qT,c.xH,c.y7,c.me,c.Q0,c.wz,c.BC,c.cb,c.YS,c.vS,c.cV,m.s5,B.kL,D.b,P.w,V.p,L.g,De.x,x.m,U.p,_.Mm,C.XI,N.Ei,C.Tg,C.FP,b.Cv,T.vr,g.vh,_.D9]})}}return o})();var Ll=d(69433),Xl=d(86865);function Ol(o,s){1&o&&(e.j41(0,"th",37),e.EFF(1," sales.salesOrder.trunck "),e.k0s())}function Bl(o,s){1&o&&(e.j41(0,"th",45),e.EFF(1," sales.salesOrder.cancelReasonName "),e.k0s())}function Pl(o,s){if(1&o&&(e.j41(0,"tr",30),e.nrm(1,"th",31),e.j41(2,"th",32),e.EFF(3,"#"),e.k0s(),e.j41(4,"th",33),e.nrm(5,"i",34),e.EFF(6," orderManagement.order.orderCode "),e.k0s(),e.j41(7,"th",35),e.nrm(8,"i",34),e.EFF(9," orderManagement.order.creation "),e.k0s(),e.j41(10,"th",36),e.EFF(11," orderManagement.order.status "),e.k0s(),e.j41(12,"th",37),e.EFF(13," sales.salesOrder.salsePerson "),e.k0s(),e.j41(14,"th",38),e.nrm(15,"i",34),e.EFF(16," sales.salesOrder.clientVisitDate "),e.k0s(),e.j41(17,"th",39),e.nrm(18,"i",34),e.EFF(19," sales.salesOrder.totalQuantity "),e.k0s(),e.j41(20,"th",40),e.nrm(21,"i",34),e.EFF(22," sales.salesOrder.totalDiscount "),e.k0s(),e.j41(23,"th",41),e.EFF(24," orderManagement.order.totalTax "),e.k0s(),e.j41(25,"th",42),e.nrm(26,"i",34),e.EFF(27," sales.salesOrder.netPrice "),e.k0s(),e.DNE(28,Ol,2,0,"th",43)(29,Bl,2,0,"th",44),e.k0s()),2&o){const t=e.XpG();e.R7$(28),e.Y8G("ngIf",50==t.pagination.status),e.R7$(),e.Y8G("ngIf",40==t.pagination.status||5==t.pagination.status)}}function Al(o,s){if(1&o&&(e.j41(0,"td")(1,"div"),e.EFF(2),e.k0s(),e.j41(3,"div"),e.EFF(4),e.k0s()()),2&o){const t=e.XpG().$implicit;e.R7$(2),e.JRh(t.shippingTruckName),e.R7$(2),e.JRh(t.driverName)}}function $l(o,s){if(1&o&&(e.j41(0,"td")(1,"span",53),e.EFF(2),e.k0s()()),2&o){const t=e.XpG().$implicit;e.R7$(2),e.SpI("",t.cancelReasonName," ")}}function Yl(o,s){if(1&o&&(e.j41(0,"td")(1,"span",53),e.EFF(2),e.k0s()()),2&o){const t=e.XpG().$implicit;e.R7$(2),e.SpI("",t.changeQuantityMessage," ")}}function Ul(o,s){if(1&o){const t=e.RV6();e.j41(0,"tr",46)(1,"td"),e.nrm(2,"button",47),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td",48),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.PrintSalesOrder(n.id))}),e.j41(6,"bdi",49),e.EFF(7),e.k0s()(),e.j41(8,"td"),e.EFF(9),e.nI1(10,"date"),e.k0s(),e.j41(11,"td")(12,"span"),e.nrm(13,"span",50),e.k0s()(),e.j41(14,"td")(15,"div"),e.EFF(16),e.k0s(),e.j41(17,"div",51),e.EFF(18),e.k0s()(),e.j41(19,"td"),e.EFF(20),e.nI1(21,"date"),e.k0s(),e.j41(22,"td"),e.EFF(23),e.k0s(),e.j41(24,"td"),e.EFF(25),e.k0s(),e.j41(26,"td"),e.EFF(27),e.k0s(),e.j41(28,"td"),e.EFF(29),e.k0s(),e.DNE(30,Al,5,2,"td",52)(31,$l,3,1,"td",52)(32,Yl,3,1,"td",52),e.k0s()}if(2&o){const t=s.$implicit,i=s.rowIndex,n=s.expanded,a=e.XpG();e.R7$(2),e.Y8G("pRowToggler",t)("ngClass",n?" ri-arrow-down-s-line":"  ri-arrow-up-s-line"),e.R7$(2),e.JRh(i+1),e.R7$(3),e.SpI("#SO#",t.id,""),e.R7$(2),e.SpI(" ",e.i5U(10,19,t.creationTime,"yyyy-MM-dd HH:mm")," "),e.R7$(3),e.ZvI("badge ",a.getStatus(t),""),e.R7$(),e.FS9("translate","sales.salesOrder."+t.offerOrderStatusValue),e.R7$(3),e.JRh(t.salsePersonName),e.R7$(2),e.JRh(t.storeName),e.R7$(2),e.SpI(" ",e.i5U(21,22,t.acutalVisitDate,"yyyy-MM-dd HH:mm"),""),e.R7$(3),e.JRh(t.totalQuantity),e.R7$(2),e.JRh(t.totalDiscount),e.R7$(2),e.JRh(t.totalTax),e.R7$(2),e.JRh(t.netPrice),e.R7$(),e.Y8G("ngIf",50==a.pagination.status),e.R7$(),e.Y8G("ngIf",40==a.pagination.status),e.R7$(),e.Y8G("ngIf",5==a.pagination.status)}}function Hl(o,s){1&o&&e.nrm(0,"span",66)}function zl(o,s){1&o&&e.nrm(0,"span",67)}function Ql(o,s){if(1&o&&(e.qex(0),e.j41(1,"tr")(2,"td"),e.EFF(3),e.k0s(),e.j41(4,"td"),e.EFF(5),e.k0s(),e.j41(6,"td"),e.EFF(7),e.k0s(),e.j41(8,"td"),e.EFF(9),e.k0s(),e.j41(10,"td"),e.EFF(11),e.k0s(),e.j41(12,"td"),e.DNE(13,Hl,1,0,"span",64)(14,zl,1,0,"span",65),e.k0s()(),e.bVm()),2&o){const t=s.$implicit,i=s.index;e.R7$(),e.AVh("bg-danger-subtle",t.isFree),e.R7$(2),e.JRh(i+1),e.R7$(2),e.JRh(t.itemName),e.R7$(2),e.JRh(t.unitName),e.R7$(2),e.JRh(t.approvedQuantity),e.R7$(2),e.JRh(t.price),e.R7$(2),e.Y8G("ngIf",t.isFree),e.R7$(),e.Y8G("ngIf",!t.isFree)}}function ql(o,s){if(1&o&&(e.j41(0,"tr")(1,"td",54)(2,"div")(3,"table",55)(4,"thead")(5,"tr",56)(6,"th",57),e.EFF(7,"#"),e.k0s(),e.nrm(8,"th",58)(9,"th",59)(10,"th",60)(11,"th",61)(12,"th",62),e.k0s()(),e.j41(13,"tbody"),e.DNE(14,Ql,15,9,"ng-container",63),e.k0s()()()()()),2&o){const t=s.$implicit;e.R7$(14),e.Y8G("ngForOf",t.offerOrderDetails)}}function Jl(o,s){1&o&&(e.j41(0,"div",68),e.EFF(1," general.table.noData "),e.k0s())}function Wl(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",69)(1,"div",70),e.nrm(2,"ngb-pagination-info",71),e.j41(3,"table-length",72),e.bIt("lengthChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",73)(5,"ngb-pagination",74),e.bIt("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.pagination.pageNumber,n)||(a.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&o){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function Kl(o,s){if(1&o){const t=e.RV6();e.j41(0,"delete-modal",75),e.bIt("deleteConfirm",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.DeleteConfirm())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}}function Zl(o,s){if(1&o){const t=e.RV6();e.j41(0,"app-all-orders-details",76),e.bIt("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}if(2&o){const t=e.XpG();e.Y8G("orderDetails",t.operationId)}}function es(o,s){if(1&o){const t=e.RV6();e.j41(0,"sales-edit-order",77),e.bIt("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}if(2&o){const t=e.XpG();e.Y8G("isChangeQuantity",!0)("isDraft",!0)("orderSelected",t.operationId)}}function ts(o,s){if(1&o){const t=e.RV6();e.j41(0,"sales-edit-order",77),e.bIt("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}if(2&o){const t=e.XpG();e.Y8G("isChangeQuantity",!0)("isDraft",!0)("orderSelected",t.operationId)}}let ns=(()=>{class o extends G.w{constructor(t,i,n,a,l,r,h,v,R,S,E,$,k,Y,Q,Z){super(t,i,h,n,a,l,r),this.baseService=n,this.authDaamService=v,this.teamService=R,this.employeeService=S,this.regionService=E,this.cityService=$,this.excelService=k,this.router=Y,this.storesService=Q,this.orderReceivedService=Z,this.title="sales.salesOrder.title",this.titleOperation="sales.salesOrder.titleOperation",this.keySelected="",this.searchForm={},this.clientId=0,this.isResolveList=!0,this.employeeGroups=[],this.activeindex="2",this.active=2,this.clientSelected=0,this.status=[],this.countLoad=2,this.isOrderEdit=!1,this.orderSelected={},this.users=[],this.statusCount={},this.salesPersons=[],this.regions=[],this.cities=[],this.count={},this.truncks=[],this.locations=[],this.discountTypes=[],this.showStore=!1,this.pagination={pageNumber:1,pageSize:5},this.statusList=[{id:0,name:"Draft"},{id:5,name:"ChangeQuantity"},{id:20,name:"UnderReview"},{id:30,name:"StoreDeliveryOrder"},{id:32,name:"RepareOrder"},{id:40,name:"Cancel"},{id:50,name:"Assign"},{id:60,name:"Finished"},{id:100,name:"Return"}],this.user=JSON.parse(localStorage.getItem("user")),this.stores=[],this.setting=[],this.setDates=(A,X,ne)=>{if(A?.from||A?.to){const be=A.to||A.from;this.pagination[X]=this.datePipe.transform(A.from||A.to,"yyyy-MM-ddT00:00:00"),this.pagination[ne]=this.datePipe.transform(be,"yyyy-MM-ddT23:59:59.999")}else this.pagination[X]=null,this.pagination[ne]=null},this.configRoute(),this.GetSalesPersons(),this.GetRegions(),this.GetCities(),this.GetOfferOrderCount(),this.configStatus(),this.GetStores()}loadentities(){this.pagination.clientId=this.clientId,this.baseService.get(this.pagination).pipe((0,p.Q)(this.notifier)).subscribe(t=>{this.ngxLoader.stopLoader(u.a7),this.entities=t.data,this.pagination.totalItems=t.totalItems,this.LoadSuccess()},t=>{this.ngxLoader.stopLoader(u.a7),this.alertService.error(t)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[]}configStatus(){this.statusList.forEach(t=>{t.name=this.getTranslationText("sales.salesOrder."+t.name)})}GetOfferOrderCount(){this.baseService.GetOfferOrderCount().subscribe(t=>{this.count=t.data})}GetStores(){this.storesService.getDropDown().subscribe(t=>{this.stores=t.data},t=>{console.log(t)})}GetRegions(){this.regionService.getDropDown().subscribe(t=>{this.regions=t.data},t=>{console.log(t)})}GetCities(){this.cityService.GetAllDropDown().subscribe(t=>{this.cities=t.data},t=>{console.log(t)})}GetSalesPersons(){this.employeeService.GetAllByType(9).subscribe(t=>{this.salesPersons=t.data},t=>{console.log(t)})}ngOnInitMore(){this.discountTypes=this.baseService.discountTypes,this.discountTypes.forEach(t=>{t.name=this.getTranslationText("sales.salesOrder."+t.name)})}onSearch(){-1===this.pagination.status?(this.pagination.status=null,this.pagination.statusList=[],this.showStore=!1):30===this.pagination.status?(this.pagination.status=null,this.showStore=!0,this.pagination.statusList=[30,32]):(this.pagination.statusList=[],this.showStore=!1);let t={...this.searchForm};this.ngxLoader.startLoader("allLoader"),this.setDates(t.dates,"visitDateFrom","visitDateTo"),this.setDates(t.creationDates,"creationTimeFrom","creationTimeTo"),this.loadentities()}LoadSuccess(){this.ngxLoader.stopLoader("allLoader")}onReset(){this.form={},this.searchForm={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems},this.loadentities()}configRoute(){this.routerActive.data.pipe((0,p.Q)(this.notifier)).subscribe(t=>{this.entities=t.data,this.pagination.totalItems=t.data?.totalItems},()=>{this.alertService.error()})}mapExcel(){let t=[];return this.entities.forEach(i=>{t.push({Code:i.id,CreatorName:i.creatorName,creationTime:i.creationTime,clientName:i.clientName,Status:this.getTranslationText("sales.salesOrder."+i.offerOrderStatusValue),salse_Person:i.salsePersonName,"Delivery.Date":i.acutalVisitDate,"T.Quantity":i.totalQuantity," T.Discount":i.totalDiscount,Tax:i.totalTax,Net:i.netPrice,Reason:i.cancelReasonName})}),t}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,this.translateService.instant(this.title),[])}onNavChange(t){1===t.nextId&&(this.activeindex="1"),3===t.nextId&&(this.activeindex="3")}getStatus(t){return 10==t.offerOrderStatus||5==t.offerOrderStatus?"bg-warning":20==t.offerOrderStatus?"bg-secondary ":30==t.offerOrderStatus?"bg-info":60==t.offerOrderStatus?"bg-success":40==t.offerOrderStatus?"bg-danger":50==t.offerOrderStatus?"bg-info":"bg-warning"}checkEdit(t){return!t.isCancel&&!t.isFinish}copytext(t){navigator.clipboard.writeText(t),this.alertService.info(t)}goNew(){this.router.navigateByUrl("/sales/new")}onSelectStatus(t){this.pagination.status=t,this.onSearch()}openStatusModal(t,i,n,a="md"){this.isEditForm=!1,this.form={},this.form={id:t,status:n},this.modalService.open(i,{centered:!0,size:a})}reload(){this.modalService.dismissAll(),this.GetOfferOrderCount(),this.loadentities()}formatDate(t){if(!t)return"";const i=new Date(t);return i.getDate().toString().padStart(2,"0")+"-"+(i.getMonth()+1).toString().padStart(2,"0")+"-"+i.getFullYear()+" "+i.getHours().toString().padStart(2,"0")+":"+i.getMinutes().toString().padStart(2,"0")}getTotal(){let t=0,i=0,n=0;this.form.details.forEach(a=>{a.discount<0&&(a.discoun=0);let l=a.quantity*a.price,r=0;1===a.discountType?r=a.discount:2===a.discountType&&(r=l*a.discount/100),i=+r;let h=l-r;a.net=h,t=+h}),1===this.form.totalAddDiscountType?n=this.form.totalAddDiscount:2===this.form.totalAddDiscountType&&(n=t*this.form.totalAddDiscount/100),this.form.total=t,this.form.totalAddDiscount=this.form.totalAddDiscount,this.form.tax=15*this.form.total/100,this.form.totalNet=this.form.total-n+this.form.tax}updateTruck(){this.form.acutalVisitDate=new Date(this.convertToISO(this.form.acutalVisitDate));let t={shippingTruckId:this.form.shippingTruckId,clientLocationId:this.form.clientLocationId,offerOrderMasterId:this.form.id,Notes:this.form.notes,terms:this.form.terms,deliveryDate:this.datePipe.transform(this.form.acutalVisitDate,"yyyy-MM-ddTHH:mm:00.000"),details:this.form.details.map(i=>({id:0,itemId:i.itemId,itemName:i.itemName,quantity:i.quantity,unitId:i.unitId,price:i.price,discount:i.discount,discountType:i.discountType,clientQuantity:i.clientQuantity,approvedQuantity:i.approvedQuantity}))};this.ngxLoader.startLoader(this.operationLoader),this.orderReceivedService.register(t).pipe((0,j.O)(),(0,M.c)(this.mainDelay),(0,y.Z)(),(0,p.Q)(this.notifier),(0,I.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(i=>{i.success?this.reload():this.alertService.error("general.message."+i.message)},i=>{this.alertService.error("general.message."+i)})}convertToISO(t){if(t instanceof Date)return t.toISOString();if("string"==typeof t){const[i,n,a,l,r]=t.split(/[-\s:]/);return`${a}-${n}-${i}T${l}:${r}:00`}}dateChangeModal(t){t=new Date(t);let i={id:this.form.id,acutalVisitDate:this.datePipe.transform(t,"yyyy-MM-ddT00:00:00.000")};this.baseService.GetTrucks(i).subscribe(n=>{n.success?this.truncks=n.data.truncks:this.alertService.error("general.message."+n.message)},n=>{this.alertService.error("general.message."+n)})}PrintOrderReceived(t){this.ngxLoader.startLoader("allLoader"),this.orderReceivedService.PrintOrderReceived(t).pipe((0,j.O)(),(0,y.Z)(),(0,p.Q)(this.notifier),(0,I.j)(()=>this.ngxLoader.stopLoader("allLoader"))).subscribe(i=>{this.openUrl(i)},i=>{this.alertService.error("general.message."+i)})}openUrl(t){let i=new Blob([t],{type:t.type});var n=URL.createObjectURL(i);window.open(n,"_blank")}PrintSalesOrder(t){this.ngxLoader.startLoader("allLoader"),this.baseService.PrintSalesOrder(t).pipe((0,j.O)(),(0,y.Z)(),(0,p.Q)(this.notifier),(0,I.j)(()=>this.ngxLoader.stopLoader("allLoader"))).subscribe(i=>{this.openUrl(i)},i=>{this.alertService.error("general.message."+i)})}mapUrl(t,i){return null===t||null==i?"":`https://www.google.com/maps/dir//${i},${t}/@${i},${t},17z?hl=en-US`}static{this.\u0275fac=function(i){return new(i||o)(e.rXU(f.nX),e.rXU(_.c$),e.rXU(rt.A),e.rXU(F.u),e.rXU(g.vh),e.rXU(b.eD),e.rXU(m.Bq),e.rXU(ue.J),e.rXU(Ie.n),e.rXU(Fe.O),e.rXU(dt.S),e.rXU(he.h),e.rXU(O.V),e.rXU(f.Ix),e.rXU(Ll.a),e.rXU(Xl.B))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["client-orders"]],inputs:{clientId:"clientId"},features:[e.Vt3],decls:59,vars:61,consts:[["tableMaster",""],["deleteModal",""],["orderViewModel",""],["SalesEditModel",""],["SalesChangeModel",""],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],["overlayColor","rgba(255,255,255,0.05)","fgsColor","rgba(255,255,255,0)",3,"loaderId"],[3,"reset","search","exportXlsx","showAdd","showExport","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","number","id","id","name","id",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["type","text","mwlFlatpickr","","id","isDate","mode","range","altFormat","d/m/Y",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],["InputTirmFilter","","type","search","id","clientName","name","clientName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["name","name","bindValue","id","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],["name","regionId","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","placeholder","ngModel"],["name","cityId","bindValue","code","bindLabel","name",3,"ngModelChange","items","multiple","placeholder","ngModel"],["name","status","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","placeholder","ngModel"],["name","storeId","bindValue","id","bindLabel","nameAR",3,"ngModelChange","items","multiple","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],[2,"width",".2%"],["translate","",2,"width",".1%"],["pSortableColumn","id","translate","",2,"width","5%"],[1,"ri-expand-up-down-line"],["pSortableColumn","creationTime","translate","",2,"width","10%"],["pSortableColumn","status","translate","",2,"width","5%"],["translate","",2,"width","12%"],["pSortableColumn","clientVisitDate","translate","",2,"width","10%"],["pSortableColumn","totalQuantity","translate","",2,"width","8%"],["pSortableColumn","totalDiscount","translate","",2,"width","8%"],["translate","",2,"width","6%"],["pSortableColumn","netPrice","translate","",2,"width","8%"],["style","width:12%","translate","",4,"ngIf"],["style","width:10%","translate","",4,"ngIf"],["translate","",2,"width","10%"],[1,"fs-5"],["type","button","pRipple","",1,"border-0","p-button-text","p-button-rounded","p-button-plain",3,"pRowToggler","ngClass"],[3,"click"],[1,"code-pointer","text-decoration-underline","link-underline-opacity-25","link-underline-opacity-100-hover"],[3,"translate"],[1,"badge","bg-primary"],[4,"ngIf"],[1,"badge","bg-danger-subtle","text-danger"],["colspan","17"],["dataKey","id"],[1,"bg-light"],[2,"width","3%"],["translate","sales.salesOrder.itemName",2,"width","10%"],["translate","sales.salesOrder.unit",2,"width","6%"],["translate","sales.salesOrder.approvedQuantity",2,"width","8%"],["translate","sales.salesOrder.price",2,"width","5%"],["translate","sales.salesOrder.isFree",2,"width","5%"],[4,"ngFor","ngForOf"],["translate","sales.salesOrder.free",4,"ngIf"],["translate","sales.salesOrder.noFree",4,"ngIf"],["translate","sales.salesOrder.free"],["translate","sales.salesOrder.noFree"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[3,"deleteConfirm","dismiss"],[3,"dismiss","orderDetails"],[3,"dismiss","isChangeQuantity","isDraft","orderSelected"]],template:function(i,n){if(1&i){const a=e.RV6();e.j41(0,"div",5)(1,"div",6)(2,"div",7),e.nrm(3,"ngx-ui-loader",8),e.j41(4,"base-filter",9),e.bIt("reset",function(){return e.eBV(a),e.Njj(n.onReset())})("search",function(){return e.eBV(a),e.Njj(n.onSearch())})("exportXlsx",function(){return e.eBV(a),e.Njj(n.onExportXlsx())}),e.qex(5,10),e.j41(6,"div",11)(7,"div",12)(8,"input",13),e.nI1(9,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.id,r)||(n.pagination.id=r),e.Njj(r)}),e.k0s(),e.nrm(10,"i",14),e.k0s()(),e.j41(11,"div",11)(12,"input",15),e.nI1(13,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.searchForm.creationDates,r)||(n.searchForm.creationDates=r),e.Njj(r)}),e.k0s()(),e.j41(14,"div",11)(15,"div",12)(16,"input",16),e.nI1(17,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.clientName,r)||(n.pagination.clientName=r),e.Njj(r)}),e.k0s(),e.nrm(18,"i",14),e.k0s()(),e.j41(19,"div",11)(20,"div",12)(21,"ng-select",17),e.nI1(22,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.salesPersonId,r)||(n.pagination.salesPersonId=r),e.Njj(r)}),e.k0s()()(),e.j41(23,"div",11)(24,"input",15),e.nI1(25,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.searchForm.dates,r)||(n.searchForm.dates=r),e.Njj(r)}),e.k0s()(),e.j41(26,"div",11)(27,"div",12)(28,"ng-select",18),e.nI1(29,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.regionId,r)||(n.pagination.regionId=r),e.Njj(r)}),e.k0s()()(),e.j41(30,"div",11)(31,"div",12)(32,"ng-select",19),e.nI1(33,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.cityId,r)||(n.pagination.cityId=r),e.Njj(r)}),e.k0s()()(),e.j41(34,"div",11)(35,"div",12)(36,"ng-select",20),e.nI1(37,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.status,r)||(n.pagination.status=r),e.Njj(r)}),e.k0s()()(),e.j41(38,"div",11)(39,"div",12)(40,"ng-select",21),e.nI1(41,"translate"),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(n.pagination.storeId,r)||(n.pagination.storeId=r),e.Njj(r)}),e.k0s()()(),e.bVm(),e.k0s(),e.j41(42,"div",22)(43,"div",23)(44,"p-table",24,0),e.bIt("onLazyLoad",function(r){return e.eBV(a),e.Njj(n.tableChange(r))})("selectionChange",function(r){return e.eBV(a),e.Njj(n.onSelectionChange(r))}),e.DNE(46,Pl,30,2,"ng-template",25)(47,Ul,33,25,"ng-template",26)(48,ql,15,1,"ng-template",27),e.k0s()(),e.DNE(49,Jl,2,0,"div",28)(50,Wl,6,8,"div",29),e.k0s()()()(),e.DNE(51,Kl,1,0,"ng-template",null,1,e.C5r)(53,Zl,1,1,"ng-template",null,2,e.C5r)(55,es,1,3,"ng-template",null,3,e.C5r)(57,ts,1,3,"ng-template",null,4,e.C5r)}2&i&&(e.R7$(3),e.Y8G("loaderId","allLoader"),e.R7$(),e.Y8G("showAdd",!1)("showExport",!0)("totalItems",n.pagination.totalItems)("title",""),e.R7$(4),e.FS9("placeholder",e.bMT(9,43,"orderManagement.order.orderCode")),e.R50("ngModel",n.pagination.id),e.R7$(4),e.FS9("placeholder",e.bMT(13,45,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.creationDates),e.R7$(4),e.FS9("placeholder",e.bMT(17,47,"orderManagement.order.agentName")),e.R50("ngModel",n.pagination.clientName),e.R7$(5),e.FS9("placeholder",e.bMT(22,49,"sales.salesOrder.salsePerson")),e.Y8G("items",n.salesPersons)("multiple",!1),e.R50("ngModel",n.pagination.salesPersonId),e.R7$(3),e.FS9("placeholder",e.bMT(25,51,"sales.salesOrder.clientVisitDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.dates),e.R7$(4),e.FS9("placeholder",e.bMT(29,53,"client.client.regionName")),e.Y8G("items",n.regions)("multiple",!1),e.R50("ngModel",n.pagination.regionId),e.R7$(4),e.FS9("placeholder",e.bMT(33,55,"client.client.cityName")),e.Y8G("items",n.cities)("multiple",!1),e.R50("ngModel",n.pagination.cityId),e.R7$(4),e.FS9("placeholder",e.bMT(37,57,"orderManagement.order.status")),e.Y8G("items",n.statusList)("multiple",!1),e.R50("ngModel",n.pagination.status),e.R7$(4),e.FS9("placeholder",e.bMT(41,59,"sales.salesOrder.storeName")),e.Y8G("items",n.stores)("multiple",!1),e.R50("ngModel",n.pagination.storeId),e.R7$(4),e.Y8G("value",n.entities)("rows",n.pagination.pageSize)("lazy",!0)("totalRecords",n.pagination.totalItems),e.R7$(5),e.Y8G("ngIf",n.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems>0))},dependencies:[g.YU,g.Sq,g.bT,c.me,c.Q0,c.BC,c.vS,m.s5,B.kL,D.b,P.w,V.p,L.g,x.m,_.Mm,C.XI,N.Ei,C.Tg,C.FP,b.Cv,T.vr,g.vh,_.D9],encapsulation:2})}}return o})(),is=(()=>{class o{constructor(){}ngOnInit(){}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["client-visits"]],decls:0,vars:0,template:function(i,n){}})}}return o})();const me=(o,s)=>({"text-danger":o,"text-dark ":s});function as(o,s){if(1&o&&(e.j41(0,"a",75),e.nrm(1,"i",76)(2,"span",77),e.k0s()),2&o){const t=e.XpG(2);e.Y8G("href",t.serverMedia+(null==t.clientData?null:t.clientData.commercialRegisterPath),e.B4B)}}function os(o,s){if(1&o&&(e.j41(0,"a",75),e.nrm(1,"i",76)(2,"span",77),e.k0s()),2&o){const t=e.XpG(2);e.Y8G("href",t.serverMedia+(null==t.clientData?null:t.clientData.municipalLicensePath),e.B4B)}}function rs(o,s){if(1&o&&(e.j41(0,"a",75),e.nrm(1,"i",76)(2,"span",77),e.k0s()),2&o){const t=e.XpG(2);e.Y8G("href",t.serverMedia+(null==t.clientData?null:t.clientData.nationalAddressProofPath),e.B4B)}}function ls(o,s){if(1&o&&(e.j41(0,"a",75),e.nrm(1,"i",76)(2,"span",77),e.k0s()),2&o){const t=e.XpG(2);e.Y8G("href",t.serverMedia+(null==t.clientData?null:t.clientData.vatCertificatePath),e.B4B)}}function ss(o,s){if(1&o&&(e.j41(0,"a",75),e.nrm(1,"i",76)(2,"span",77),e.k0s()),2&o){const t=e.XpG(2);e.Y8G("href",t.serverMedia+(null==t.clientData?null:t.clientData.ownerIdPath),e.B4B)}}function cs(o,s){if(1&o&&(e.j41(0,"a",75),e.nrm(1,"i",76)(2,"span",77),e.k0s()),2&o){const t=e.XpG(2);e.Y8G("href",t.serverMedia+(null==t.clientData?null:t.clientData.dealAgreementPath),e.B4B)}}function ds(o,s){if(1&o&&(e.j41(0,"div",61)(1,"div",62)(2,"div",63)(3,"table",64)(4,"thead",65)(5,"tr"),e.nrm(6,"th",66)(7,"th",67),e.k0s()(),e.j41(8,"tbody")(9,"tr"),e.nrm(10,"td",68),e.j41(11,"td"),e.DNE(12,as,3,1,"a",69),e.k0s()(),e.j41(13,"tr"),e.nrm(14,"td",70),e.j41(15,"td"),e.DNE(16,os,3,1,"a",69),e.k0s()(),e.j41(17,"tr"),e.nrm(18,"td",71),e.j41(19,"td"),e.DNE(20,rs,3,1,"a",69),e.k0s()(),e.j41(21,"tr"),e.nrm(22,"td",72),e.j41(23,"td"),e.DNE(24,ls,3,1,"a",69),e.k0s()(),e.j41(25,"tr"),e.nrm(26,"td",73),e.j41(27,"td"),e.DNE(28,ss,3,1,"a",69),e.k0s()(),e.j41(29,"tr"),e.nrm(30,"td",74),e.j41(31,"td"),e.DNE(32,cs,3,1,"a",69),e.k0s()()()()()()()),2&o){const t=e.XpG();e.R7$(10),e.Y8G("ngClass",e.l_i(12,me,""==(null==t.clientData?null:t.clientData.commercialRegisterPath),""!=(null==t.clientData?null:t.clientData.commercialRegisterPath))),e.R7$(2),e.Y8G("ngIf",""!=(null==t.clientData?null:t.clientData.commercialRegisterPath)),e.R7$(2),e.Y8G("ngClass",e.l_i(15,me,""==(null==t.clientData?null:t.clientData.municipalLicensePath),""!=(null==t.clientData?null:t.clientData.municipalLicensePath))),e.R7$(2),e.Y8G("ngIf",""!=(null==t.clientData?null:t.clientData.municipalLicensePath)),e.R7$(2),e.Y8G("ngClass",e.l_i(18,me,""==(null==t.clientData?null:t.clientData.nationalAddressProofPath),""!=(null==t.clientData?null:t.clientData.nationalAddressProofPath))),e.R7$(2),e.Y8G("ngIf",""!=(null==t.clientData?null:t.clientData.nationalAddressProofPath)),e.R7$(2),e.Y8G("ngClass",e.l_i(21,me,""==(null==t.clientData?null:t.clientData.vatCertificatePath),""!=(null==t.clientData?null:t.clientData.vatCertificatePath))),e.R7$(2),e.Y8G("ngIf",""!=(null==t.clientData?null:t.clientData.vatCertificatePath)),e.R7$(2),e.Y8G("ngClass",e.l_i(24,me,""==(null==t.clientData?null:t.clientData.ownerIdPath),""!=(null==t.clientData?null:t.clientData.ownerIdPath))),e.R7$(2),e.Y8G("ngIf",""!=(null==t.clientData?null:t.clientData.ownerIdPath)),e.R7$(2),e.Y8G("ngClass",e.l_i(27,me,""==(null==t.clientData?null:t.clientData.dealAgreementPath),""!=(null==t.clientData?null:t.clientData.dealAgreementPath))),e.R7$(2),e.Y8G("ngIf",""!=(null==t.clientData?null:t.clientData.dealAgreementPath))}}function ms(o,s){if(1&o&&e.nrm(0,"client-orders",78),2&o){const t=e.XpG();e.Y8G("clientId",t.clientId)}}function ps(o,s){if(1&o&&e.nrm(0,"client-collections",78),2&o){const t=e.XpG();e.Y8G("clientId",t.clientId)}}function gs(o,s){if(1&o&&e.nrm(0,"client-invoices",78),2&o){const t=e.XpG();e.Y8G("clientId",t.clientId)}}function _s(o,s){1&o&&e.nrm(0,"client-visits")}const hs=[{path:"crm-setting",component:ya,canActivate:[w.g],data:{permission:["crmSetting.view"]}},{path:"serviceAfterSales",component:yn,resolve:{data:Ha},canActivate:[w.g],data:{permission:["serviceAfterSale.view"]}},{path:"clientReviews",component:zn,resolve:{data:Fa},canActivate:[w.g],data:{permission:["clientReview.view"]}},{path:"clientReviewPrice",component:Ya,resolve:{data:Ua},canActivate:[w.g],data:{permission:["clientReviewPrice.view"]}},{path:"review-result",component:Je,canActivate:[w.g],data:{permission:["crmSetting.view"]}},{path:"review-actions",component:Be,canActivate:[w.g],data:{permission:["crmSetting.view"]}},{path:"reviewQuestions",component:Qe,canActivate:[w.g],data:{permission:["crmSetting.view"]}},{path:"reviewStatistics",component:Xi,resolve:{data:Na},canActivate:[w.g],data:{permission:["reviewstatistics.view"]}},{path:"leads",component:Lt,resolve:{data:xa},canActivate:[w.g],data:{permission:["leads.view"]}},{path:"leads/register",component:Ze,canActivate:[w.g],data:{permission:["leads.register"]}},{path:"leads/edit",component:Ze,resolve:{data:wa},canActivate:[w.g],data:{permission:["leads.edit"]}},{path:"client-list",component:no,resolve:{data:io},canActivate:[w.g],data:{permission:["CrmClient.view"]}},{path:"customerCompanyList",component:_r,resolve:{data:ur},canActivate:[w.g],data:{permission:["CrmCompanyClient.view"]}},{path:"client-list/register",component:We,canActivate:[w.g],data:{permission:["CrmClient.register"]}},{path:"client-list/edit",component:We,resolve:{data:Ke},canActivate:[w.g],data:{permission:["CrmClient.edit"]}},{path:"customerCompanyList/register",component:lt,canActivate:[w.g],data:{permission:["CrmCompanyClient.register"]}},{path:"customerCompanyList/edit",component:lt,resolve:{data:Ke},canActivate:[w.g],data:{permission:["CrmCompanyClient.edit"]}},{path:"client-list/profile/:id",component:za,canActivate:[w.g],data:{permission:["CrmClient.edit","CrmClient.register","CrmCompanyClient"]}},{path:"customerCompanyList/profile/:id",component:(()=>{class o{constructor(t,i,n){this.clientService=t,this.route=i,this.router=n,this.clientId=0,this.serverMedia=W.c.mediaUrl,this.selectValue=["Illustrator","Photoshop","CSS","HTML","Javascript","Python","PHP"],this.clientId=this.route.snapshot.paramMap.get("id")}ngOnInit(){this.getClientInfo()}getClientInfo(){this.clientService.GetClientCompanyInfo(this.clientId).subscribe(t=>{this.clientData=t.data})}goMap(){window.open(`https://www.google.com/maps/dir//${this.clientData.Lat},${this.clientData.Lng}/@${this.clientData.Lat},${this.clientData.Lng},17z?hl=en-US`,"_blank")}goClientEdit(){this.router.navigateByUrl("/crm/customerCompanyList/edit",{state:{id:this.clientId}})}static{this.\u0275fac=function(i){return new(i||o)(e.rXU(z.X),e.rXU(f.nX),e.rXU(f.Ix))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-client-profile2"]],decls:109,vars:23,consts:[["customNav","ngbNav"],[1,"position-relative","mx-n4","mt-n4"],[1,"profile-wid-bg","profile-setting-img"],["alt","",1,"profile-wid-img",3,"src"],[1,"overlay-content"],[1,"text-end","p-3"],[1,"p-0","ms-auto","rounded-circle","profile-photo-edit",3,"click"],["for","profile-foreground-img-file-input",1,"profile-photo-edit","btn","btn-light"],[1,"ri-pencil-fill","align-bottom","me-1"],["translate","general.action.edit"],[1,"row"],[1,"col-xxl-3"],[1,"card","mt-n5"],[1,"card-body","p-4"],[1,"text-center"],[1,"profile-user","position-relative","d-inline-block","mx-auto","mb-4"],["alt","",1,"rounded-circle","avatar-xl","img-thumbnail","user-profile-image","material-shadow",3,"src"],[1,"avatar-xs","p-0","rounded-circle","profile-photo-edit"],["for","profile-img-file-input",1,"profile-photo-edit","avatar-xs"],[1,"avatar-title","rounded-circle","bg-light","text-body","material-shadow",3,"click"],[1,"ri-map-pin-fill"],[1,"progress","animated-progess","custom-progress","progress-label"],["role","progressbar","aria-valuenow","30","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-danger"],[1,"label"],[1,"fs-16","mb-1"],[1,"text-muted","mb-0"],[1,"card"],[1,"card-body"],["translate","hr.employee.basicInfo",1,"card-title","mb-3"],[1,"table-responsive"],[1,"table","table-borderless","mb-0"],["scope","row","translate","client.client.name",1,"ps-0"],[1,"text-muted"],["scope","row","translate","client.client.mobile",1,"ps-0"],["scope","row","translate","client.client.priceList",1,"ps-0"],["scope","row","translate","client.client.clientGroup",1,"ps-0"],["scope","row","translate","client.client.salesPersonName",1,"ps-0"],["scope","row","translate","client.client.commercialRegistrationNumber",1,"ps-0"],["scope","row","translate","client.client.CreditLimit",1,"ps-0"],["scope","row","translate","client.client.vatNumber",1,"ps-0"],["scope","row","translate","client.client.odooId",1,"ps-0"],["scope","row","translate","client.client.customerPaymentTerms",1,"ps-0"],["scope","row","translate","client.client.invoiceDayDue",1,"ps-0"],[1,"col-xxl-9"],[1,"card","mt-xxl-n5"],[1,"card-header"],["ngbNav","","role","tablist",1,"nav","nav-tabs-custom","rounded","card-header-tabs","border-bottom-0",3,"activeId"],[1,"nav-item",3,"ngbNavItem"],["ngbNavLink","","data-bs-toggle","tab","role","tab",1,"nav-link"],[1,"fas","fa-home"],["translate","client.client.formalPaper"],["ngbNavContent",""],[1,"far","fa-user"],["translate","client.client.orders"],[1,"far","fa-envelope"],["translate","client.client.collections"],["translate","client.client.invoices"],["translate","client.client.visits"],[1,"card-body","p-1"],[1,"tab-content"],[3,"ngbNavOutlet"],[1,"row","p-5"],[1,"col-lg-12"],[1,"table-responsive","table-card"],[1,"table","table-borderless","align-middle","mb-0"],[1,"table-light"],["scope","col","translate","approvals.approvalRequests.documentName"],["scope","col"],["translate","approvals.customerRequest.commercialRegister",1,"fw-bold",3,"ngClass"],["target","_blank","class","dropdown-item",3,"href",4,"ngIf"],["translate","approvals.customerRequest.municipalLicense",1,"fw-bold",3,"ngClass"],["translate","approvals.customerRequest.nationalAddress",1,"fw-bold",3,"ngClass"],["translate","approvals.customerRequest.vatCertificate",1,"fw-bold",3,"ngClass"],["translate","approvals.customerRequest.customerID",1,"fw-bold",3,"ngClass"],["translate","approvals.customerRequest.dealAgreement",1,"fw-bold",3,"ngClass"],["target","_blank",1,"dropdown-item",3,"href"],[1,"ri-external-link-line","me-2","align-bottom","text-muted","float-start"],["translate","general.action.view"],[3,"clientId"]],template:function(i,n){if(1&i){const a=e.RV6();e.j41(0,"div",1)(1,"div",2),e.nrm(2,"img",3),e.j41(3,"div",4)(4,"div",5)(5,"div",6),e.bIt("click",function(){return e.eBV(a),e.Njj(n.goClientEdit())}),e.j41(6,"label",7),e.nrm(7,"i",8)(8,"span",9),e.k0s()()()()()(),e.j41(9,"div",10)(10,"div",11)(11,"div",12)(12,"div",13)(13,"div",14)(14,"div",15),e.nrm(15,"img",16),e.j41(16,"div",17)(17,"label",18)(18,"span",19),e.bIt("click",function(){return e.eBV(a),e.Njj(n.goMap())}),e.nrm(19,"i",20),e.k0s()()()(),e.j41(20,"div",21)(21,"div",22)(22,"div",23),e.EFF(23),e.k0s()()(),e.nrm(24,"h5",24)(25,"p",25),e.k0s()()(),e.j41(26,"div",26)(27,"div",27),e.nrm(28,"h5",28),e.j41(29,"div",29)(30,"table",30)(31,"tbody")(32,"tr"),e.nrm(33,"th",31),e.j41(34,"td",32),e.EFF(35),e.k0s()(),e.j41(36,"tr"),e.nrm(37,"th",33),e.j41(38,"td",32),e.EFF(39),e.k0s()(),e.j41(40,"tr"),e.nrm(41,"th",34),e.j41(42,"td",32),e.EFF(43),e.k0s()(),e.j41(44,"tr"),e.nrm(45,"th",35),e.j41(46,"td",32),e.EFF(47),e.k0s()(),e.j41(48,"tr"),e.nrm(49,"th",36),e.j41(50,"td",32),e.EFF(51),e.k0s()(),e.j41(52,"tr"),e.nrm(53,"th",37),e.j41(54,"td",32),e.EFF(55),e.k0s()(),e.j41(56,"tr"),e.nrm(57,"th",38),e.j41(58,"td",32),e.EFF(59),e.k0s()(),e.j41(60,"tr"),e.nrm(61,"th",39),e.j41(62,"td",32),e.EFF(63),e.k0s()(),e.j41(64,"tr"),e.nrm(65,"th",40),e.j41(66,"td",32),e.EFF(67),e.k0s()(),e.j41(68,"tr"),e.nrm(69,"th",41),e.j41(70,"td",32),e.EFF(71),e.k0s()(),e.j41(72,"tr"),e.nrm(73,"th",42),e.j41(74,"td",32),e.EFF(75),e.k0s()()()()()()()(),e.j41(76,"div",43)(77,"div",44)(78,"div",45)(79,"ul",46,0)(81,"li",47)(82,"a",48),e.nrm(83,"i",49)(84,"span",50),e.k0s(),e.DNE(85,ds,33,30,"ng-template",51),e.k0s(),e.j41(86,"li",47)(87,"a",48),e.nrm(88,"i",52)(89,"span",53),e.k0s(),e.DNE(90,ms,1,1,"ng-template",51),e.k0s(),e.j41(91,"li",47)(92,"a",48),e.nrm(93,"i",54)(94,"span",55),e.k0s(),e.DNE(95,ps,1,1,"ng-template",51),e.k0s(),e.j41(96,"li",47)(97,"a",48),e.nrm(98,"i",54)(99,"span",56),e.k0s(),e.DNE(100,gs,1,1,"ng-template",51),e.k0s(),e.j41(101,"li",47)(102,"a",48),e.nrm(103,"i",54)(104,"span",57),e.k0s(),e.DNE(105,_s,1,0,"ng-template",51),e.k0s()()(),e.j41(106,"div",58)(107,"div",59),e.nrm(108,"div",60),e.k0s()()()()()}if(2&i){const a=e.sdS(80);e.R7$(2),e.Y8G("src",n.serverMedia+(null==n.clientData?null:n.clientData.externalPhotoPath),e.B4B),e.R7$(13),e.Y8G("src",n.serverMedia+(null==n.clientData?null:n.clientData.logoPath),e.B4B),e.R7$(6),e.xc7("width",n.clientData.precentage,"%"),e.R7$(2),e.SpI("",n.clientData.precentage,"%"),e.R7$(12),e.SpI("",null==n.clientData?null:n.clientData.name," "),e.R7$(4),e.JRh(null==n.clientData?null:n.clientData.mobile),e.R7$(4),e.JRh(null==n.clientData?null:n.clientData.priceListName),e.R7$(4),e.SpI("",null==n.clientData?null:n.clientData.clientGroupName,", "),e.R7$(4),e.JRh(null==n.clientData?null:n.clientData.salesPersonName),e.R7$(4),e.JRh(null==n.clientData?null:n.clientData.commercialRegistrationNumber),e.R7$(4),e.JRh(null==n.clientData?null:n.clientData.creditLimit),e.R7$(4),e.JRh(null==n.clientData?null:n.clientData.vatNumber),e.R7$(4),e.JRh(null==n.clientData?null:n.clientData.odooId),e.R7$(4),e.JRh(null==n.clientData?null:n.clientData.customerPaymentTerms),e.R7$(4),e.JRh(null==n.clientData?null:n.clientData.invoiceDayDue),e.R7$(4),e.Y8G("activeId",1),e.R7$(2),e.Y8G("ngbNavItem",1),e.R7$(5),e.Y8G("ngbNavItem",2),e.R7$(5),e.Y8G("ngbNavItem",3),e.R7$(5),e.Y8G("ngbNavItem",4),e.R7$(5),e.Y8G("ngbNavItem",5),e.R7$(7),e.Y8G("ngbNavOutlet",a)}},dependencies:[g.YU,g.bT,m.Um,m.X9,m.sy,m.Gx,m.Ri,m.WA,m.m_,_.Mm,al,Vl,ns,is]})}}return o})(),canActivate:[w.g],data:{permission:["CrmClient.edit","CrmClient.register","CrmCompanyClient"]}},{path:"crm-orders",component:Zo,canActivate:[w.g],data:{permission:["pending.view"]}}];let fs=(()=>{class o{static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275mod=e.$C({type:o})}static{this.\u0275inj=e.G2t({imports:[f.iI.forChild(hs),f.iI]})}}return o})();var bs=d(53978),Cs=d(81391),vs=d(73687),Rs=d(5946),js=d(5490),Is=d(18865),ys=d(6064),Fs=d(66900),Ms=d(89524),Ss=d(41198),Ts=d(32454),ks=d(71144);let ws=(()=>{class o{constructor(){(0,J.eV)(Ce().loadAnimation)}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275mod=e.$C({type:o})}static{this.\u0275inj=e.G2t({providers:[g.vh],imports:[g.MD,c.YN,c.X1,m.zH,m.Pv,m.Gk,m.h_,m.c9,Ts.A,Fs.JG,B.ND.forRoot(),et.r,fs,bs.G,ks.j,_.h,C.bG,Ge.q4,K.H_,b.th,m.n8,ys.E,js.w8,we.J,Rs.gI,Is.z0,Cs.ad,vs.tP,T.MQ,Ss.TV,m._f,m.HC,Ms.Ls,on,K.H_,Ee.S,Ve.rJ]})}}return o})()}}]);
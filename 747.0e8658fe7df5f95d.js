"use strict";(self.webpackChunkvelzon=self.webpackChunkvelzon||[]).push([[747],{64747:(Jt,x,r)=>{r.r(x),r.d(x,{TicketsModule:()=>At});var p=r(60177),c=r(89417),m=r(69005),V=r(32454),X=r(66900),k=r(91022),D=r(70255),g=r(51188),b=r(37021),v=r(35335),_=r(45236),j=r(56977),F=r(70980),C=r(99437),E=r(18810),w=r(75622),h=r(36158),L=r(45312),t=r(54438),u=r(8147),y=r(90621),T=r(3888),f=r(1530),Y=r(91426),U=r(99902),A=r(56080),O=r(73674),S=r(45286),P=r(5779),G=r(72510),N=r(38542),H=r(26364),J=r(15084),z=r(88148),Z=r(91580),Q=r(29935),$=r(3200);function K(a,d){1&a&&(t.j41(0,"tr",73)(1,"th",74),t.nrm(2,"i",75),t.EFF(3," ticketSupport.ticketList.id "),t.k0s(),t.j41(4,"th",76),t.nrm(5,"i",75),t.EFF(6," ticketSupport.ticketList.subject "),t.k0s(),t.j41(7,"th",77),t.nrm(8,"i",75),t.EFF(9," ticketSupport.ticketList.dateStart "),t.k0s(),t.j41(10,"th",78),t.nrm(11,"i",75),t.EFF(12," ticketSupport.ticketList.status "),t.k0s(),t.j41(13,"th",79),t.EFF(14," ticketSupport.ticketList.countTicket "),t.k0s(),t.j41(15,"th",80),t.EFF(16," ticketSupport.ticketList.ticketMasterAssignees "),t.k0s(),t.j41(17,"th",81),t.nrm(18,"i",75),t.EFF(19," ticketSupport.ticketList.priority "),t.k0s(),t.nrm(20,"th",82),t.k0s())}function W(a,d){if(1&a&&(t.qex(0),t.j41(1,"span",96),t.EFF(2),t.k0s(),t.bVm()),2&a){const i=d.$implicit;t.R7$(2),t.JRh(i.userName)}}function q(a,d){if(1&a&&(t.nrm(0,"i",97),t.EFF(1),t.nI1(2,"date"),t.nrm(3,"br")(4,"i",98),t.EFF(5),t.nI1(6,"date"),t.nrm(7,"br")(8,"i",99),t.EFF(9),t.nrm(10,"br")),2&a){const i=t.XpG().$implicit;t.R7$(),t.SpI(" ",t.i5U(2,3,i.creationTime,"yyyy-MM-dd HH:mm:ss")," "),t.R7$(4),t.SpI(" ",t.i5U(6,6,i.lastModificationTime,"yyyy-MM-dd HH:mm:ss")," "),t.R7$(4),t.SpI(" ",i.creatorName,"")}}function tt(a,d){if(1&a){const i=t.RV6();t.j41(0,"tr",83)(1,"td",84),t.bIt("click",function(){const e=t.eBV(i).$implicit,s=t.XpG();return t.Njj(s.goToDetails(e.id))}),t.j41(2,"span",85),t.EFF(3),t.k0s()(),t.j41(4,"td",86)(5,"div",87)(6,"div",88),t.EFF(7),t.k0s()()(),t.j41(8,"td"),t.EFF(9),t.nI1(10,"date"),t.k0s(),t.j41(11,"td")(12,"span"),t.EFF(13),t.nI1(14,"translate"),t.k0s()(),t.j41(15,"td")(16,"span",89),t.EFF(17),t.k0s()(),t.j41(18,"td"),t.DNE(19,W,3,1,"ng-container",90),t.k0s(),t.j41(20,"td")(21,"span"),t.EFF(22),t.nI1(23,"translate"),t.k0s()(),t.DNE(24,q,11,9,"ng-template",null,5,t.C5r),t.j41(26,"td"),t.nrm(27,"i",91),t.j41(28,"button",92),t.nI1(29,"translate"),t.bIt("click",function(){const e=t.eBV(i).$implicit,s=t.XpG(),l=t.sdS(110);return t.Njj(s.EditModel(e.id,l,"md"))}),t.nrm(30,"i",93),t.k0s(),t.j41(31,"button",94),t.nI1(32,"translate"),t.bIt("click",function(){const e=t.eBV(i).$implicit,s=t.XpG(),l=t.sdS(114);return t.Njj(s.openModal(e.id,l))}),t.nrm(33,"i",95),t.k0s()()()}if(2&a){const i=d.$implicit,n=t.sdS(25),e=t.XpG();t.R7$(3),t.JRh("#ticket#"+i.id),t.R7$(4),t.JRh(i.subject),t.R7$(2),t.JRh(t.i5U(10,16,i.dateStart,"dd-MM-yyyy")),t.R7$(3),t.ZvI(" badge ",e.getStatusBgTextColor(i.status)," text-uppercas "),t.R7$(),t.JRh(t.bMT(14,19,"ticketSupport.ticketList."+i.statusName)),t.R7$(4),t.JRh(i.countTask),t.R7$(2),t.Y8G("ngForOf",i.taskMasterAssignees),t.R7$(2),t.ZvI("badge text-uppercase   ",e.getStatusColor(i.priority)," "),t.R7$(),t.JRh(t.bMT(23,21,"ticketSupport.ticketList."+i.priorityName)),t.R7$(5),t.Y8G("ngbTooltip",n),t.R7$(),t.FS9("pTooltip",t.bMT(29,23,"general.edit")),t.R7$(3),t.FS9("pTooltip",t.bMT(32,25,"general.delete"))}}function et(a,d){1&a&&(t.j41(0,"div",100),t.EFF(1," general.table.noData "),t.k0s())}function it(a,d){if(1&a){const i=t.RV6();t.j41(0,"div",101)(1,"div",102),t.nrm(2,"ngb-pagination-info",103),t.j41(3,"table-length",104),t.bIt("lengthChange",function(e){t.eBV(i);const s=t.XpG();return t.Njj(s.ListItemChange(e))}),t.k0s()(),t.j41(4,"div",105)(5,"ngb-pagination",106),t.bIt("pageChange",function(e){t.eBV(i);const s=t.XpG();return t.Njj(s.pageChanged(e))}),t.mxI("pageChange",function(e){t.eBV(i);const s=t.XpG();return t.DH7(s.pagination.pageNumber,e)||(s.pagination.pageNumber=e),t.Njj(e)}),t.k0s()()()}if(2&a){const i=t.XpG();t.R7$(2),t.Y8G("pagination",i.pagination),t.R7$(),t.Y8G("lengthTable",i.tableLengthSelect),t.R7$(2),t.Y8G("pageSize",i.pagination.pageSize)("collectionSize",i.pagination.totalItems),t.R50("page",i.pagination.pageNumber),t.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function nt(a,d){1&a&&(t.j41(0,"div",130),t.EFF(1," general.message.filedIdRequired "),t.k0s())}function st(a,d){if(1&a){const i=t.RV6();t.j41(0,"div",133)(1,"i",134),t.bIt("click",function(){t.eBV(i);const e=t.XpG().index,s=t.XpG(2);return t.Njj(s.removeFile(e))}),t.k0s(),t.j41(2,"p-image",135),t.bIt("error",function(e){t.eBV(i);const s=t.XpG(3);return t.Njj(s.setDefaultImage(e,"assets/images/custom/no-img.jpg"))}),t.k0s()()}2&a&&(t.R7$(2),t.Y8G("src","assets/images/PDF.png")("preview",!1)("alt","pdf"))}function at(a,d){if(1&a){const i=t.RV6();t.j41(0,"div",133)(1,"i",134),t.bIt("click",function(){t.eBV(i);const e=t.XpG().index,s=t.XpG(2);return t.Njj(s.removeFile(e))}),t.k0s(),t.j41(2,"p-image",135),t.bIt("error",function(e){t.eBV(i);const s=t.XpG(3);return t.Njj(s.setDefaultImage(e,"assets/images/custom/no-img.jpg"))}),t.k0s()()}if(2&a){const i=t.XpG().$implicit,n=t.XpG(2);t.R7$(2),t.Y8G("src",i.isNew?i.attachment:n.serverUrl+i.attachment)("preview",!0)("alt","image")}}function rt(a,d){if(1&a&&(t.j41(0,"div",131),t.DNE(1,st,3,3,"div",132)(2,at,3,3,"div",132),t.k0s()),2&a){const i=d.index,n=t.XpG(2);t.R7$(),t.Y8G("ngIf","application/pdf"===n.filesNames[i]),t.R7$(),t.Y8G("ngIf","application/pdf"!==n.filesNames[i])}}function ot(a,d){if(1&a){const i=t.RV6();t.j41(0,"div",107)(1,"div",108)(2,"h5",109),t.EFF(3),t.k0s(),t.j41(4,"button",110),t.bIt("click",function(){const e=t.eBV(i).$implicit;return t.Njj(e.dismiss("Cross click"))}),t.k0s()(),t.j41(5,"div",111),t.nrm(6,"ngx-ui-loader",112),t.j41(7,"form",113,6),t.bIt("ngSubmit",function(){t.eBV(i);const e=t.XpG();return t.Njj(e.OnSubmit())}),t.j41(9,"div",29)(10,"div",114)(11,"label",115),t.EFF(12," ticketSupport.ticketList.subject"),t.k0s(),t.j41(13,"input",116,7),t.mxI("ngModelChange",function(e){t.eBV(i);const s=t.XpG();return t.DH7(s.form.subject,e)||(s.form.subject=e),t.Njj(e)}),t.k0s(),t.DNE(15,nt,2,0,"div",117),t.k0s(),t.j41(16,"div",118)(17,"label",119),t.EFF(18," ticketSupport.ticketList.dateStart"),t.k0s(),t.j41(19,"input",120),t.mxI("ngModelChange",function(e){t.eBV(i);const s=t.XpG();return t.DH7(s.form.dateStart,e)||(s.form.dateStart=e),t.Njj(e)}),t.k0s()(),t.j41(20,"div",118)(21,"label",119),t.EFF(22," ticketSupport.ticketList.dateEnd"),t.k0s(),t.j41(23,"input",121),t.mxI("ngModelChange",function(e){t.eBV(i);const s=t.XpG();return t.DH7(s.form.dateEnd,e)||(s.form.dateEnd=e),t.Njj(e)}),t.k0s()(),t.j41(24,"div",118)(25,"label",119),t.EFF(26," ticketSupport.ticketList.priority"),t.k0s(),t.j41(27,"ng-select",57),t.mxI("ngModelChange",function(e){t.eBV(i);const s=t.XpG();return t.DH7(s.form.priority,e)||(s.form.priority=e),t.Njj(e)}),t.k0s()(),t.j41(28,"div",118)(29,"label",119),t.EFF(30," ticketSupport.ticketList.status"),t.k0s(),t.j41(31,"ng-select",56),t.mxI("ngModelChange",function(e){t.eBV(i);const s=t.XpG();return t.DH7(s.form.status,e)||(s.form.status=e),t.Njj(e)}),t.k0s()(),t.j41(32,"div",114)(33,"label",119),t.EFF(34," ticketSupport.ticketList.ticketMasterAssignees"),t.k0s(),t.j41(35,"ng-select",122),t.mxI("ngModelChange",function(e){t.eBV(i);const s=t.XpG();return t.DH7(s.form.taskMasterAssignees,e)||(s.form.taskMasterAssignees=e),t.Njj(e)}),t.k0s()(),t.j41(36,"div",114)(37,"label",119),t.EFF(38," orderManagement.order.attachment"),t.k0s(),t.j41(39,"input",123,8),t.bIt("change",function(e){t.eBV(i);const s=t.XpG();return t.Njj(s.onFileSelected(e))}),t.k0s()(),t.j41(41,"div",124),t.DNE(42,rt,3,2,"div",125),t.k0s()(),t.j41(43,"div",126)(44,"button",127),t.nrm(45,"i",128)(46,"span",129),t.k0s()()()()()}if(2&a){const i=t.sdS(8),n=t.sdS(14),e=t.XpG();t.R7$(3),t.JRh(e.titleOperation),t.R7$(3),t.Y8G("hasProgressBar",!1)("fgsType",e.loaderOperationShap)("loaderId",e.operationLoader),t.R7$(7),t.R50("ngModel",e.form.subject),t.R7$(2),t.Y8G("ngIf",n.invalid&&n.touched),t.R7$(4),t.R50("ngModel",e.form.dateStart),t.Y8G("altInput",!0)("convertModelValue",!0),t.R7$(4),t.R50("ngModel",e.form.dateEnd),t.Y8G("altInput",!0)("convertModelValue",!0),t.R7$(4),t.Y8G("items",e.priority)("multiple",!1),t.R50("ngModel",e.form.priority),t.Y8G("required",!0),t.R7$(4),t.Y8G("items",e.status)("multiple",!1),t.R50("ngModel",e.form.status),t.Y8G("required",!0),t.R7$(4),t.Y8G("items",e.taskMasterAssignees)("multiple",!0),t.R50("ngModel",e.form.taskMasterAssignees),t.Y8G("required",!0),t.R7$(7),t.Y8G("ngForOf",e.filesToShow),t.R7$(2),t.Y8G("disabled",!i.valid)}}function lt(a,d){if(1&a&&(t.qex(0),t.j41(1,"option",144),t.EFF(2),t.k0s(),t.bVm()),2&a){const i=d.$implicit;t.R7$(),t.Y8G("value",i.id),t.R7$(),t.JRh(i.name)}}function dt(a,d){if(1&a&&(t.qex(0),t.j41(1,"option",144),t.EFF(2),t.k0s(),t.bVm()),2&a){const i=d.$implicit;t.R7$(),t.Y8G("value",i.id),t.R7$(),t.JRh(i.name)}}function ct(a,d){if(1&a){const i=t.RV6();t.j41(0,"div",107)(1,"div",108)(2,"h5",109),t.EFF(3),t.k0s(),t.j41(4,"button",110),t.bIt("click",function(){const e=t.eBV(i).$implicit;return t.Njj(e.dismiss("Cross click"))}),t.k0s()(),t.j41(5,"div",111)(6,"form",113,6),t.bIt("ngSubmit",function(){t.eBV(i);const e=t.XpG();return t.Njj(e.OnSubmit())}),t.j41(8,"div",29)(9,"div",114)(10,"label",136),t.EFF(11," ticketSupport.ticketList.subject"),t.k0s(),t.j41(12,"input",137,7),t.mxI("ngModelChange",function(e){t.eBV(i);const s=t.XpG();return t.DH7(s.form.subject,e)||(s.form.subject=e),t.Njj(e)}),t.k0s()(),t.j41(14,"div",118)(15,"label",138),t.EFF(16," ticketSupport.ticketList.dateStart"),t.k0s(),t.j41(17,"input",139),t.mxI("ngModelChange",function(e){t.eBV(i);const s=t.XpG();return t.DH7(s.form.dateStart,e)||(s.form.dateStart=e),t.Njj(e)}),t.k0s()(),t.j41(18,"div",118)(19,"label",138),t.EFF(20," ticketSupport.ticketList.dateEnd"),t.k0s(),t.j41(21,"input",140),t.mxI("ngModelChange",function(e){t.eBV(i);const s=t.XpG();return t.DH7(s.form.dateEnd,e)||(s.form.dateEnd=e),t.Njj(e)}),t.k0s()(),t.j41(22,"div",118)(23,"label",138),t.EFF(24," ticketSupport.ticketList.priority"),t.k0s(),t.j41(25,"select",141),t.mxI("ngModelChange",function(e){t.eBV(i);const s=t.XpG();return t.DH7(s.form.priority,e)||(s.form.priority=e),t.Njj(e)}),t.DNE(26,lt,3,2,"ng-container",90),t.k0s()(),t.j41(27,"div",118)(28,"label",138),t.EFF(29," ticketSupport.ticketList.status"),t.k0s(),t.j41(30,"select",142),t.mxI("ngModelChange",function(e){t.eBV(i);const s=t.XpG();return t.DH7(s.form.status,e)||(s.form.status=e),t.Njj(e)}),t.DNE(31,dt,3,2,"ng-container",90),t.k0s()(),t.j41(32,"div",114)(33,"label",138),t.EFF(34," ticketSupport.ticketList.ticketMasterAssignees"),t.k0s(),t.j41(35,"ng-select",143),t.mxI("ngModelChange",function(e){t.eBV(i);const s=t.XpG();return t.DH7(s.form.taskMasterAssignees,e)||(s.form.taskMasterAssignees=e),t.Njj(e)}),t.k0s()()()()()()}if(2&a){const i=t.XpG();t.R7$(3),t.JRh(i.titleOperation),t.R7$(9),t.R50("ngModel",i.form.subject),t.R7$(5),t.R50("ngModel",i.form.dateStart),t.Y8G("altInput",!0)("convertModelValue",!0),t.R7$(4),t.R50("ngModel",i.form.dateEnd),t.Y8G("altInput",!0)("convertModelValue",!0),t.R7$(4),t.R50("ngModel",i.form.priority),t.R7$(),t.Y8G("ngForOf",i.priority),t.R7$(4),t.R50("ngModel",i.form.status),t.R7$(),t.Y8G("ngForOf",i.status),t.R7$(4),t.Y8G("items",i.taskMasterAssignees)("multiple",!0),t.R50("ngModel",i.form.taskMasterAssignees)}}function mt(a,d){if(1&a){const i=t.RV6();t.j41(0,"delete-modal",145),t.bIt("deleteConfirm",function(){t.eBV(i);const e=t.XpG();return t.Njj(e.DeleteConfirm())})("dismiss",function(){const e=t.eBV(i).$implicit;return t.Njj(e.dismiss())}),t.k0s()}}let pt=(()=>{class a extends w.w{constructor(i,n,e,s,l,o,M,R,I,Ot,Pt,Ht){super(i,e,R,s,l,o,M),this.router=n,this.baseService=s,this.excelService=I,this.formData=Ot,this.notificationService=Pt,this.pdfService=Ht,this.title="ticketSupport.ticketList.title",this.titleOperation="ticketSupport.ticketList.titleOperation",this.num=0,this.serverUrl=L.c.mediaUrl,this.option={startVal:this.num,useEasing:!0,duration:1,decimalPlaces:0},this.taskMasterAssignees=[],this.status=[],this.priority=[],this.taskStatistics={all:0,complete:0,awatingFeddBack:0,testing:0,inProgress:0,notStart:0},this.searchForm={status:0,priority:0},this.pagination={pageNumber:1,pageSize:10,status:null},this.isShow=!0,this.isResolveList=!0,this.isCollapsed=!0,this.filesToSend=[],this.filesToShow=[],this.filesNames=[],this.reportTeam=[],this.pagination.taskType=2,this.setCurrentMonthRange(),this.configRoute()}setCurrentMonthRange(){const i=new Date,n=new Date(i.getFullYear(),i.getMonth(),i.getDate()),e=new Date(i.getFullYear(),i.getMonth(),i.getDate());this.searchForm.date={from:n,to:e}}configRoute(){let i=this.routerActive.snapshot.data;this.entities=i.data.tasks.data,this.pagination.totalItems=i.data.tasks.totalItems,this.settings=i.data.settings.data}ngOnInitMore(){this.breadCrumbItems=[{label:"layout.sidebar.tickets"},{label:this.title,active:!0}],this.GetTaskLookUp(),this.GetTaskStatistics()}mapForm(i){let n={...i};return n.status=Number.parseInt(n.status),n.priority=Number.parseInt(n.priority),n.maxTaskForEmployee=n.maxTaskForEmployee,n.taskMasterAssignees=n.taskMasterAssignees.map(e=>({userId:e,taskMasterId:0})),n.dateStart=this.datePipe.transform(n.dateStart,"yyyy-MM-ddT00:00:00.000"),n.dateEnd=this.datePipe.transform(n.dateEnd,"yyyy-MM-ddT23:59:59.999"),n}mapRegisterForm(i){let n={...i};return n.id=0,n.status=Number.parseInt(n.status),n.priority=Number.parseInt(n.priority),n.dateStart=this.datePipe.transform(n.dateStart,"yyyy-MM-ddT00:00:00.000"),n.dateEnd=this.datePipe.transform(n.dateEnd,"yyyy-MM-ddT00:00:00.000"),n.maxTaskForEmployee=n.maxTaskForEmployee,n.taskMasterAssignees=n.taskMasterAssignees.map(e=>({userId:e,taskMasterId:0})),n}GetTaskStatistics(){this.baseService.GetTaskStatistics(2).subscribe(i=>{this.taskStatistics=i.data.statusCounts,this.taskStatistics.all=i.data.all})}GetTaskLookUp(){this.baseService.GetTaskLookUp().subscribe(i=>{let n=i.data;this.taskMasterAssignees=n.taskMasterAssignees,n.status.forEach(e=>{e.name=this.getTranslationText("task.tasklist."+e.name)}),n.priority.forEach(e=>{e.name=this.getTranslationText("task.tasklist."+e.name)}),this.status=n.status,this.priority=n.priority})}registerEntity(){let i=this.mapRegisterForm(this.form);i.attachments=this.filesToSend,this.baseService.register(this.formData.formatFormData(i)).pipe((0,b.O)(),(0,v.c)(this.mainDelay),(0,_.Z)(),(0,j.Q)(this.notifier),(0,F.j)(()=>this.ngxLoader.stopLoader(h.ZW)),(0,C.W)(n=>(0,E.$)(n))).subscribe(n=>{if(n.success){let e=i.taskMasterAssignees.map(s=>""+s.userId);this.modalService.dismissAll(),this.notificationService.notificationConnection.invoke("SendNotificationByEmployee",e).catch(s=>console.error(" SendNotification Error sending notification:",s)),this.submitFunished()}else this.alertService.error("general.message."+n.message)},n=>{this.alertService.error("general.message."+n)})}getStatusColor(i){switch(i){case 1:return"bg-success-subtle text-success";case 2:return"bg-warning-subtle text-warning";case 3:return"bg-danger-subtle text-danger";case 4:return"bg-primary-subtle text-primary";default:return""}}getStatusBgTextColor(i){switch(i){case 1:case 2:return"bg-warning-subtle  text-warning";case 3:return"bg-info-subtle text-info";case 4:return"bg-warning-subtle text-warning";case 5:return"bg-success-subtle text-success";case 6:return"bg-danger-subtle text-danger";default:return""}}statusCardChange(i){this.searchForm.status=i,this.pagination.status=Number.parseInt(i),this.loadentities()}goTodo(i){this.router.navigateByUrl("/tickets/todo",{state:{id:i}})}goToDetails(i){this.router.navigateByUrl(`/tickets/details/${i}`)}OnSearch(i){this.pagination.taskType=2,this.ngxLoader.startLoader(h.a7);var n=this.searchForm.date;n+void 0&&"to"in n?(this.pagination.dateFrom=this.datePipe.transform(n.from,"yyyy-MM-ddT00:00:00.000"),this.pagination.dateTo=this.datePipe.transform(n.to,"yyyy-MM-ddT23:59:59.999")):(this.pagination.dateFrom=null,this.pagination.dateTo=null),this.pagination.subject=this.searchForm.name,this.pagination.status=0!=this.searchForm.status?Number.parseInt(this.searchForm.status):null,this.pagination.priority=0!=this.searchForm.priority?Number.parseInt(this.searchForm.priority):null,this.loadentities()}getPrecentage(i,n){return 0==i||0==n?0:Math.floor(i/n*100)}performSearch(){}submitFunished(){this.alertService.success(),this.loadentities(),this.pagination.taskType=2,this.modalService?.dismissAll(),this.ngxLoader.stop(h.a7),this.GetTaskStatistics(),this.btnDisabled=!0}mapExcel(){let i=[];return this.entities.forEach(n=>{i.push({TaskId:this.settings.taskPerfix+n.id,Subject:n.subject,DueDate:this.datePipe.transform(n.dateStart,"yyyy-MM-dd"),Precentage:this.getPrecentage(n.taskComplete,n.totalTask)+"%",Status:n.statusName,AssignTo:n.taskMasterAssignees.map(e=>e.userName).join(","),Priority:n.priorityName})}),i}exportAsXLSX(){let i=this.mapExcel();this.excelService.exportAsExcelFile(i,"Task",[])}OnReset(i){this.form={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems},this.searchForm={status:1,priority:0}}onFileSelected(i){const n=i.target;if(i.target.files&&i.target.files[0]){let e=i.target.files.length;for(let s=0;s<e;s++){let l=new FileReader;this.filesToSend.push({id:0,isNew:!0,attachment:i.target.files.item(s)}),this.filesNames.push(i.target.files[s].type),l.onload=o=>{this.filesToShow.push({id:0,isNew:!0,attachment:o.target.result}),console.log(this.filesToShow)},l.readAsDataURL(i.target?.files[s])}n.value=""}}setDefaultImage(i,n){i.target.src=n}removeFile(i){this.filesToShow.splice(i,1),this.filesNames.splice(i,1),this.filesToSend.splice(i,1)}clearFiles(){this.filesNames=[],this.filesToShow=[],this.filesToSend=[]}openModalTitle(i,n="md"){this.isEditForm=!1,this.clearFiles(),this.form={},this.modalService.open(i,{centered:!0,size:n})}EditModel(i,n,e="md"){}editEntity(){let i=this.mapForm(this.form);i.attachments=this.filesToSend,this.baseService.edit(i.id,this.formData.formatFormData(i)).pipe((0,b.O)(),(0,v.c)(this.mainDelay),(0,_.Z)(),(0,j.Q)(this.notifier),(0,F.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(n=>{n.success?this.submitFunished():this.alertService.error("general.message."+n.message)},n=>{this.alertService.error("general.message."+n)})}static{this.\u0275fac=function(n){return new(n||a)(t.rXU(g.nX),t.rXU(g.Ix),t.rXU(u.c$),t.rXU(y.T),t.rXU(T.u),t.rXU(p.vh),t.rXU(f.eD),t.rXU(m.Bq),t.rXU(Y.V),t.rXU(U.Q),t.rXU(A.J),t.rXU(O.u))}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["app-list-view"]],features:[t.Vt3],decls:116,vars:45,consts:[["collapse","ngbCollapse"],["tableMaster",""],["operation",""],["operationView",""],["deleteModal",""],["tooltipContent",""],["formEntity","ngForm"],["subject","ngModel"],["fileInput",""],[3,"title","breadcrumbItems"],[1,"row","row-cols-md-7"],[1,"col","cursor-pointer",3,"click"],[1,"card","card-animate"],[1,"card-body"],[1,"d-flex","justify-content-between"],["translate","ticketSupport.ticketList.allTicket",1,"fw-medium","text-muted","mb-0"],[1,"mt-4","ff-secondary","fw-semibold"],[1,"counter-value",3,"countUp","options"],[1,"avatar-sm","flex-shrink-0"],[1,"avatar-title","bg-default-subtle","text-default","rounded-circle","fs-4"],[1,"ri-ticket-2-line"],[1,"col","cursor-pointer"],["translate","ticketSupport.ticketList.complete",1,"fw-medium","text-muted","mb-0"],[1,"avatar-title","bg-success-subtle","text-success","rounded-circle","fs-4"],["translate","ticketSupport.ticketList.inproccess",1,"fw-medium","text-muted","mb-0"],[1,"avatar-title","bg-warning-subtle","text-warning","rounded-circle","fs-4"],[1,"col","cursor-pointers"],["translate","ticketSupport.ticketList.deleted",1,"fw-medium","text-muted","mb-0"],[1,"avatar-title","bg-danger-subtle","text-danger","rounded-circle","fs-4"],[1,"row"],[1,"col-lg-12"],["id","tasksList",1,"card"],[1,"card-header","border-0"],[1,"d-flex","align-items-center","mb-2"],["translate","ticketSupport.ticketList.allTickets",1,"card-title","mb-0","flex-grow-1"],["data-bs-toggle","collapse","href","javascript:void(0);",1,"btn","btn-success","mx-1",3,"click"],[1,"ri-filter-2-line","align-bottom"],["translate","general.action.filter"],["ngbDropdown","",1,"dropdown","d-inline"],["ngbDropdownToggle","","type","button",1,"btn","btn-primary","mx-2",3,"disabled"],[1,"ri-chat-download-line","me-1","align-bottom"],["translate","general.action.export"],["aria-labelledby","dropdownMenuButton1","ngbDropdownMenu","",1,"dropdown-menu",3,"click"],["href","javascript:void(0);",1,"dropdown-item"],["translate","general.action.xlxs"],["href","javascript:void(0);",1,"btn","btn-danger",3,"click"],[1,"ri-add-line","align-bottom"],["translate","ticketSupport.ticketList.addNewTicket"],["id","collapseExample",1,"collaps","show",3,"ngbCollapseChange","ngbCollapse"],[1,"col-md-3","mb-2"],[1,"search-box"],["type","number","name","id",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["type","search","name","searchTerm",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["type","text","mwlFlatpickr","","id","isDate","mode","range",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"input-light"],["bindValue","id","bindLabel","name","name","status",3,"ngModelChange","items","multiple","ngModel","required"],["name","priority","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","ngModel","required"],[1,"col-md-3","text-center","mb-2","d-flex"],["type","button",1,"btn","btn-primary",3,"click"],[1,"ri-file-search-fill","me-1","align-bottom"],["translate","general.action.search"],["type","button",1,"btn","btn-danger","mx-1",3,"click"],[1,"ri-equalizer-fill","me-1","align-bottom"],["translate","general.action.clear"],["fgsColor","rgba(255, 255, 255, 0)",3,"hasProgressBar","loaderId"],[1,"table-responsive"],["id","tableMaster","dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],["aria-live","polite","aria-atomic","true"],[1,""],["pSortableColumn","id","translate","",2,"width","7%"],[1,"ri-expand-up-down-line"],["pSortableColumn","subject","translate","",2,"width","25%"],["pSortableColumn","dateStart","translate","",2,"width","12%"],["pSortableColumn","status","translate","",2,"width","10%"],["translate","",2,"width","8%"],["translate","",2,"width","15%"],["pSortableColumn","priority","translate","",2,"width","15%"],["translate","",2,"width","20%"],[1,"fs-5"],[1,"cursor-pointer",3,"click"],[1,"text-primary"],[1,"cursor-pointer"],[1,"d-flex","flex-sm-column","flex-md-row","flex-lg-row"],[1,"flex-grow-1","tasks_name"],[1,"badge","bg-success","mx-1"],[4,"ngFor","ngForOf"],["tooltipPosition","top",1,"mdi","mdi-cog-outline","d-inline","text-muted","fs-16","align-middle","me-1",3,"ngbTooltip"],["tooltipPosition","top",1,"btn","btn-sm","btn-soft-info","edit-list","mx-2",3,"click","pTooltip"],[1,"ri-pencil-fill","align-bottom","mx-1"],["tooltipPosition","top",1,"btn","btn-sm","btn-soft-danger","remove-list",3,"click","pTooltip"],[1,"ri-delete-bin-5-fill","align-bottom"],[1,"badge","badge-pill","bg-primary","mx-1"],[1,"ri-history-fill","text-warning"],[1,"ri-history-fill","text-danger"],[1,"ri-user-location-fill","text-primary"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],["id","exampleModalLabel","translate","",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","close-modal",1,"btn-close",3,"click"],[1,"modal-body"],[3,"hasProgressBar","fgsType","loaderId"],[3,"ngSubmit"],[1,"col-12","mb-2"],["for","subject","translate","",1,"required","fw-bold","form-label"],["rows","1","InputTirmFilter","","name","subject","type","text","id","subject","required","",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],[1,"col-12","col-lg-6","mb-2"],["translate","",1,"required","fw-bold","form-label","w-100"],["name","dateStart","type","text","mwlFlatpickr","",1,"form-control","flatpickr-input",3,"ngModelChange","ngModel","altInput","convertModelValue"],["name","dateEnd","type","text","mwlFlatpickr","",1,"form-control","flatpickr-input",3,"ngModelChange","ngModel","altInput","convertModelValue"],["name","taskMasterAssignees","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","ngModel","required"],["multiple","","accept","image/*, application/pdf","type","file","placeholder","dfd",1,"form-control","fs-6",3,"change"],[1,"row","row-cols-5"],["class","col",4,"ngFor","ngForOf"],[1,"text-center","my-2"],["type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],["translate","",1,"text-danger","text-center"],[1,"col"],["class","position-relative",4,"ngIf"],[1,"position-relative"],[1,"ri-close-fill","position-absolute",2,"border-radius","50%","background-color","red","inset-inline-start","-14px","top","-8px","color","white",3,"click"],["width","50","height","50",3,"error","src","preview","alt"],["for","subject","translate","",1,"fw-bold","form-label"],["disabled","","rows","1","InputTirmFilter","","name","subject","type","text","id","subject",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["translate","",1,"fw-bold","form-label","w-100"],["disabled","","name","dateStart","type","text","mwlFlatpickr","",1,"form-control","flatpickr-input",3,"ngModelChange","ngModel","altInput","convertModelValue"],["disabled","","name","dateEnd","type","text","mwlFlatpickr","",1,"form-control","flatpickr-input",3,"ngModelChange","ngModel","altInput","convertModelValue"],["disabled","","name","priority","data-choices","","data-choices-search-false","","id","priority-field",1,"form-control",3,"ngModelChange","ngModel"],["disabled","","name","status","data-choices","","data-choices-search-false","","id","status-field",1,"form-control",3,"ngModelChange","ngModel"],["disabled","","name","taskMasterAssignees","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","ngModel"],[1,"fs-6",3,"value"],[3,"deleteConfirm","dismiss"]],template:function(n,e){if(1&n){const s=t.RV6();t.nrm(0,"app-breadcrumbs",9),t.nI1(1,"translate"),t.j41(2,"div",10)(3,"div",11),t.bIt("click",function(){return t.eBV(s),t.Njj(e.statusCardChange(null))}),t.j41(4,"div",12)(5,"div",13)(6,"div",14)(7,"div"),t.nrm(8,"p",15),t.j41(9,"h2",16),t.nrm(10,"span",17),t.k0s()(),t.j41(11,"div")(12,"div",18)(13,"span",19),t.nrm(14,"i",20),t.k0s()()()()()()(),t.j41(15,"div",21)(16,"div",12)(17,"div",13)(18,"div",14)(19,"div"),t.nrm(20,"p",22),t.j41(21,"h2",16),t.nrm(22,"span",17),t.k0s()(),t.j41(23,"div")(24,"div",18)(25,"span",23),t.nrm(26,"i",20),t.k0s()()()()()()(),t.j41(27,"div",21)(28,"div",12)(29,"div",13)(30,"div",14)(31,"div"),t.nrm(32,"p",24),t.j41(33,"h2",16),t.nrm(34,"span",17),t.k0s()(),t.j41(35,"div")(36,"div",18)(37,"span",25),t.nrm(38,"i",20),t.k0s()()()()()()(),t.j41(39,"div",26)(40,"div",12)(41,"div",13)(42,"div",14)(43,"div"),t.nrm(44,"p",27),t.j41(45,"h2",16),t.nrm(46,"span",17),t.k0s()(),t.j41(47,"div")(48,"div",18)(49,"span",28),t.nrm(50,"i",20),t.k0s()()()()()()()(),t.j41(51,"div",29)(52,"div",30)(53,"div",31)(54,"div",32)(55,"div",33),t.nrm(56,"h5",34),t.j41(57,"div")(58,"a",35),t.bIt("click",function(){t.eBV(s);const o=t.sdS(73);return t.Njj(o.toggle())}),t.nrm(59,"i",36)(60,"span",37),t.k0s(),t.j41(61,"div",38)(62,"button",39),t.nrm(63,"i",40)(64,"span",41),t.k0s(),t.j41(65,"ul",42),t.bIt("click",function(){return t.eBV(s),t.Njj(e.exportAsXLSX())}),t.j41(66,"li")(67,"a",43),t.nrm(68,"span",44),t.k0s()()()(),t.j41(69,"a",45),t.bIt("click",function(){t.eBV(s);const o=t.sdS(110);return t.Njj(e.openModalTitle(o,"lg"))}),t.nrm(70,"i",46)(71,"span",47),t.k0s()()(),t.j41(72,"div",48,0),t.mxI("ngbCollapseChange",function(o){return t.eBV(s),t.DH7(e.isCollapsed,o)||(e.isCollapsed=o),t.Njj(o)}),t.j41(74,"div",29)(75,"div",49)(76,"div",50)(77,"input",51),t.nI1(78,"translate"),t.mxI("ngModelChange",function(o){return t.eBV(s),t.DH7(e.pagination.id,o)||(e.pagination.id=o),t.Njj(o)}),t.k0s()()(),t.j41(79,"div",49)(80,"div",50)(81,"input",52),t.nI1(82,"translate"),t.mxI("ngModelChange",function(o){return t.eBV(s),t.DH7(e.searchForm.name,o)||(e.searchForm.name=o),t.Njj(o)}),t.bIt("ngModelChange",function(){return t.eBV(s),t.Njj(e.performSearch())}),t.k0s(),t.nrm(83,"i",53),t.k0s()(),t.j41(84,"div",49)(85,"input",54),t.nI1(86,"translate"),t.mxI("ngModelChange",function(o){return t.eBV(s),t.DH7(e.searchForm.date,o)||(e.searchForm.date=o),t.Njj(o)}),t.k0s()(),t.j41(87,"div",49)(88,"div",55)(89,"ng-select",56),t.mxI("ngModelChange",function(o){return t.eBV(s),t.DH7(e.searchForm.status,o)||(e.searchForm.status=o),t.Njj(o)}),t.k0s()()(),t.j41(90,"div",49)(91,"div",55)(92,"ng-select",57),t.mxI("ngModelChange",function(o){return t.eBV(s),t.DH7(e.searchForm.priority,o)||(e.searchForm.priority=o),t.Njj(o)}),t.k0s()()(),t.j41(93,"div",58)(94,"button",59),t.bIt("click",function(o){return t.eBV(s),t.Njj(e.OnSearch(o))}),t.nrm(95,"i",60)(96,"span",61),t.k0s(),t.j41(97,"button",62),t.bIt("click",function(){return t.eBV(s),t.Njj(e.OnReset(!0))}),t.nrm(98,"i",63)(99,"span",64),t.k0s()()()()(),t.j41(100,"div",13),t.nrm(101,"ngx-ui-loader",65),t.j41(102,"div",66)(103,"p-table",67,1),t.bIt("onLazyLoad",function(o){return t.eBV(s),t.Njj(e.tableChange(o))})("selectionChange",function(o){return t.eBV(s),t.Njj(e.onSelectionChange(o))}),t.DNE(105,K,21,0,"ng-template",68)(106,tt,34,27,"ng-template",69),t.k0s()(),t.DNE(107,et,2,0,"div",70)(108,it,6,8,"div",71),t.k0s()()(),t.DNE(109,ot,47,26,"ng-template",null,2,t.C5r)(111,ct,36,15,"ng-template",null,3,t.C5r)(113,mt,1,0,"ng-template",null,4,t.C5r),t.nrm(115,"app-toast",72),t.k0s()}2&n&&(t.FS9("title",t.bMT(1,37,e.title)),t.Y8G("breadcrumbItems",e.breadCrumbItems),t.R7$(10),t.Y8G("countUp",null==e.taskStatistics?null:e.taskStatistics.all)("options",e.option),t.R7$(12),t.Y8G("countUp",null==e.taskStatistics?null:e.taskStatistics.complete)("options",e.option),t.R7$(12),t.Y8G("countUp",null==e.taskStatistics?null:e.taskStatistics.inProgress)("options",e.option),t.R7$(12),t.Y8G("countUp",null==e.taskStatistics?null:e.taskStatistics.deleted)("options",e.option),t.R7$(12),t.BMQ("aria-expanded",!e.isCollapsed),t.R7$(4),t.Y8G("disabled",e.pagination.totalItems<=0),t.R7$(10),t.R50("ngbCollapse",e.isCollapsed),t.R7$(5),t.FS9("placeholder",t.bMT(78,39,"ticketSupport.ticketList.id")),t.R50("ngModel",e.pagination.id),t.R7$(4),t.FS9("placeholder",t.bMT(82,41,"ticketSupport.ticketList.subject")),t.R50("ngModel",e.searchForm.name),t.R7$(4),t.FS9("placeholder",t.bMT(86,43,"ticketSupport.ticketList.dateStart")),t.Y8G("altInput",!0)("convertModelValue",!0),t.R50("ngModel",e.searchForm.date),t.R7$(4),t.Y8G("items",e.status)("multiple",!1),t.R50("ngModel",e.searchForm.status),t.Y8G("required",!0),t.R7$(3),t.Y8G("items",e.priority)("multiple",!1),t.R50("ngModel",e.searchForm.priority),t.Y8G("required",!0),t.R7$(9),t.Y8G("hasProgressBar",!1)("loaderId",e.searchLoader),t.R7$(2),t.Y8G("value",e.entities)("rows",e.pagination.pageSize)("lazy",!0)("totalRecords",e.pagination.totalItems),t.R7$(4),t.Y8G("ngIf",e.pagination.totalItems<=0),t.R7$(),t.Y8G("ngIf",e.pagination.totalItems>0))},dependencies:[p.Sq,p.bT,c.qT,c.xH,c.y7,c.me,c.Q0,c.wz,c.BC,c.cb,c.YS,c.vS,c.cV,m.tg,m.do,m.U0,m.md,m.s5,k.kL,D.G,u.Mm,S.XI,P.Ei,S.Tg,f.Cv,G.vr,N.m,m.$G,H.m,J.w,z.p,Z.g,Q.m,$._,p.vh,u.D9],styles:[".card-animate[_ngcontent-%COMP%]{cursor:pointer!important}"]})}}return a})();var B=r(56701),gt=r(56131),ut=r(27468),ht=r(7673),ft=r(95279);const bt=["myInput"];function vt(a,d){if(1&a){const i=t.RV6();t.j41(0,"div",56)(1,"div",49),t.nrm(2,"img",57),t.k0s(),t.j41(3,"div",51)(4,"h5",52),t.EFF(5),t.j41(6,"small",15),t.EFF(7),t.nI1(8,"date"),t.k0s()(),t.j41(9,"p",15),t.EFF(10),t.k0s(),t.j41(11,"a",53),t.bIt("click",function(){t.eBV(i);const e=t.XpG().$implicit,s=t.XpG();return t.Njj(s.focusInput(e.id))}),t.nrm(12,"i",54),t.EFF(13," Reply"),t.k0s()()()}if(2&a){const i=d.$implicit,n=t.XpG().$implicit;t.R7$(5),t.SpI("",i.creatorName," "),t.R7$(2),t.SpI(" ",t.i5U(8,3,i.creationTime,"mediumDate")," "),t.R7$(3),t.JRh(n.content)}}function _t(a,d){if(1&a){const i=t.RV6();t.j41(0,"div",48)(1,"div",49),t.nrm(2,"img",50),t.k0s(),t.j41(3,"div",51)(4,"h5",52),t.EFF(5),t.j41(6,"small",15),t.EFF(7),t.nI1(8,"date"),t.k0s()(),t.j41(9,"p",15),t.EFF(10),t.k0s(),t.j41(11,"a",53),t.bIt("click",function(){const e=t.eBV(i).$implicit,s=t.XpG();return t.Njj(s.focusInput(e.id))}),t.nrm(12,"i",54),t.EFF(13," Reply"),t.k0s(),t.DNE(14,vt,14,6,"div",55),t.k0s()()}if(2&a){const i=d.$implicit;t.R7$(5),t.SpI("",i.creatorName," "),t.R7$(2),t.JRh(t.i5U(8,4,i.creationTime,"mediumDate")),t.R7$(3),t.JRh(i.content),t.R7$(4),t.Y8G("ngForOf",null==i?null:i.replies)}}function jt(a,d){if(1&a&&(t.j41(0,"a",58)(1,"div",59)(2,"div",60),t.EFF(3),t.k0s()()()),2&a){const i=d.$implicit;t.FS9("ngbTooltip",i.userName),t.R7$(3),t.SpI(" ",i.userName.substring(0,2)," ")}}function Ft(a,d){if(1&a&&(t.j41(0,"div",61)(1,"div",62)(2,"div",63),t.nrm(3,"i",64),t.k0s()(),t.j41(4,"div",51)(5,"h6",65)(6,"a",66),t.EFF(7),t.k0s()(),t.nrm(8,"small",15),t.k0s(),t.j41(9,"div",67)(10,"a",68),t.nrm(11,"i",69),t.k0s()()()),2&a){const i=d.$implicit,n=t.XpG();t.R7$(7),t.JRh(i.name),t.R7$(3),t.FS9("href",n.serverUrl+i.path,t.B4B)}}function Ct(a,d){1&a&&(t.j41(0,"div",70)(1,"span",71),t.EFF(2),t.nI1(3,"translate"),t.k0s()()),2&a&&(t.R7$(2),t.SpI(" ",t.bMT(3,1,"general.table.noAttachments")," "))}const Tt=[{path:"list",component:pt,resolve:{data:(()=>{class a extends gt.E{constructor(i,n,e,s,l){super(i,e,l),this.datePipe=n,this.generalSettingService=s}resolve(i,n){const e=new Date,s=new Date(e.getFullYear(),e.getMonth(),e.getDate());return this.pagination.taskType=2,this.pagination.dateFrom=this.datePipe.transform(s,"yyyy-MM-ddT00:00:00.000"),this.pagination.dateTo=this.datePipe.transform(s,"yyyy-MM-ddT23:59:59.999"),this.pagination.status=null,(0,ut.p)({tasks:this.BaseService.get(this.pagination),settings:this.generalSettingService.GetSettingTask()}).pipe((0,C.W)(l=>(this.router.navigate([""]),this.alertService.error(l),(0,ht.of)(null))))}static{this.\u0275fac=function(n){return new(n||a)(t.KVO(g.Ix),t.KVO(p.vh),t.KVO(y.T),t.KVO(ft.k),t.KVO(T.u))}}static{this.\u0275prov=t.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})()},canActivate:[B.g],data:{permission:["ticketList.view"]}},{path:"details/:id",component:(()=>{class a extends w.w{constructor(i,n,e,s,l,o,M,R,I){super(i,e,R,s,l,o,M),this.router=n,this.baseService=s,this.route=I,this.ticketId=0,this.form={},this.serverUrl=L.c.mediaUrl,this.ticketId=+this.route.snapshot.params.id,this.getTicketsDetails()}getTicketsDetails(){this.baseService.getTicketById(this.ticketId).subscribe({next:i=>{this.ticketDetails=i.data,console.log(i)}})}focusInput(i){this.myInput.nativeElement.focus(),this.form.parentCommentId=i}getStatusColor(i){switch(i){case 1:return"bg-success-subtle text-success";case 2:return"bg-warning-subtle text-warning";case 3:return"bg-danger-subtle text-danger";case 4:return"bg-primary-subtle text-primary";default:return""}}getStatusBgTextColor(i){switch(i){case 1:case 2:return"bg-warning-subtle  text-warning";case 3:return"bg-info-subtle text-info";case 4:return"bg-warning-subtle text-warning";case 5:return"bg-success-subtle text-success";case 6:return"bg-danger-subtle text-danger";default:return""}}sendComment(){this.form.taskMasterId=this.ticketId,this.baseService.sendComment(this.form).pipe((0,b.O)(),(0,v.c)(this.mainDelay),(0,_.Z)(),(0,j.Q)(this.notifier),(0,F.j)(()=>this.ngxLoader.stopLoader(h.ZW)),(0,C.W)(i=>(0,E.$)(i))).subscribe(i=>{i.success?(this.modalService.dismissAll(),this.submitFunished(),this.form={}):this.alertService.error("general.message."+i.message)},i=>{this.alertService.error("general.message."+i)})}submitFunished(){this.alertService.success(),this.getTicketsDetails(),this.modalService?.dismissAll(),this.ngxLoader.stop(h.a7),this.btnDisabled=!0}static{this.\u0275fac=function(n){return new(n||a)(t.rXU(g.nX),t.rXU(g.Ix),t.rXU(u.c$),t.rXU(y.T),t.rXU(T.u),t.rXU(p.vh),t.rXU(f.eD),t.rXU(m.Bq),t.rXU(g.nX))}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["app-tickets-details"]],viewQuery:function(n,e){if(1&n&&t.GBs(bt,5),2&n){let s;t.mGM(s=t.lsd())&&(e.myInput=s.first)}},features:[t.Vt3],decls:128,vars:53,consts:[["formEntity","ngForm"],["myInput",""],[1,"row"],[1,"col-lg-12"],[1,"card","mt-n4","mx-n4","mb-n5"],[1,"bg-warning-subtle"],[1,"card-body","pb-4","mb-5"],[1,"col-md"],[1,"row","align-items-center"],[1,"col-md-auto"],[1,"avatar-md","mb-md-0","mb-4"],[1,"avatar-title","bg-white","rounded-circle"],["src","assets/images/ticket-icon.jpg","alt","",1,"avatar-sm"],["id","ticket-title",1,"fw-semibold"],[1,"hstack","gap-3","flex-wrap"],[1,"text-muted"],["id","create-date",1,"fw-medium"],[1,"vr"],["id","due-date",1,"fw-medium"],[1,"col-xxl-9"],[1,"card"],[1,"card-body","p-4"],[1,"fw-semibold","text-uppercase","mb-3"],[1,"text-muted","vstack","gap-2","mb-4","Excellent-list"],[1,"card-title","mb-4"],[1,"px-3","mx-n3",2,"height","300px"],["class","d-flex mb-4",4,"ngFor","ngForOf"],["action","javascript:void(0);",1,"mt-3",3,"ngSubmit"],[1,"row","g-3"],["for","exampleFormControlTextarea1",1,"form-label"],["name","content","required","","id","exampleFormControlTextarea1","rows","3","placeholder","Enter comments",1,"form-control","bg-light","border-light",3,"ngModelChange","ngModel"],[1,"col-lg-12","text-end"],[1,"btn","btn-success",3,"disabled"],[1,"col-xxl-3"],[1,"card-header"],[1,"card-title","mb-0"],[1,"card-body"],[1,"table-responsive","table-card"],[1,"table","table-borderless","align-middle","mb-0"],[1,"fw-medium"],["id","t-no"],[1,"avatar-group"],["href","javascript:void(0);","class","avatar-group-item","placement","top",3,"ngbTooltip",4,"ngFor","ngForOf"],["id","c-date"],["id","d-date"],[1,"card-title","fw-semibold","mb-0"],["class","d-flex align-items-center border border-dashed p-2 rounded",4,"ngFor","ngForOf"],["class","my-3 d-flex justify-content-center",4,"ngIf"],[1,"d-flex","mb-4"],[1,"flex-shrink-0"],["src","assets/images/user-dummy-img.jpg","alt","",1,"avatar-xs","rounded-circle"],[1,"flex-grow-1","ms-3"],[1,"fs-13"],["href","javascript: void(0);",1,"badge","text-muted","bg-light",3,"click"],[1,"mdi","mdi-reply"],["class","d-flex mt-4",4,"ngFor","ngForOf"],[1,"d-flex","mt-4"],["src","assets/images/users/user-dummy-img.jpg","alt","",1,"avatar-xs","rounded-circle"],["href","javascript:void(0);","placement","top",1,"avatar-group-item",3,"ngbTooltip"],[1,"avatar-xs"],[1,"avatar-title","rounded-circle","bg-primary"],[1,"d-flex","align-items-center","border","border-dashed","p-2","rounded"],[1,"flex-shrink-0","avatar-sm"],[1,"avatar-title","bg-light","rounded"],[1,"ri-file-2-fill","fs-20","text-primary"],[1,"mb-1"],["href","javascript:void(0);"],[1,"hstack","gap-3","fs-16"],["target","_blank",1,"text-muted",3,"href"],[1,"ri-download-2-line"],[1,"my-3","d-flex","justify-content-center"],[1,"badge","bg-warning"]],template:function(n,e){if(1&n){const s=t.RV6();t.j41(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"div",6)(5,"div",2)(6,"div",7)(7,"div",8)(8,"div",9)(9,"div",10)(10,"div",11),t.nrm(11,"img",12),t.k0s()()(),t.j41(12,"div",7)(13,"h4",13),t.EFF(14),t.k0s(),t.j41(15,"div",14)(16,"div",15),t.EFF(17,"Start Date : "),t.j41(18,"span",16),t.EFF(19),t.nI1(20,"date"),t.k0s()(),t.nrm(21,"div",17),t.j41(22,"div",15),t.EFF(23,"End Date : "),t.j41(24,"span",18),t.EFF(25),t.nI1(26,"date"),t.k0s()(),t.nrm(27,"div",17),t.j41(28,"div"),t.EFF(29),t.nI1(30,"translate"),t.k0s(),t.j41(31,"div"),t.EFF(32),t.nI1(33,"translate"),t.k0s()()()()()()()()()()(),t.j41(34,"div",2)(35,"div",19)(36,"div",20)(37,"div",21)(38,"h6",22),t.EFF(39,"Actions"),t.k0s(),t.j41(40,"ul",23)(41,"li"),t.EFF(42,"Pick a Dashboard Type"),t.k0s(),t.j41(43,"li"),t.EFF(44,"Categorize information when needed"),t.k0s(),t.j41(45,"li"),t.EFF(46,"Provide Context"),t.k0s(),t.j41(47,"li"),t.EFF(48,"On using colors"),t.k0s(),t.j41(49,"li"),t.EFF(50,"On using the right graphs"),t.k0s()()(),t.j41(51,"div",21)(52,"h5",24),t.EFF(53,"Comments"),t.k0s(),t.j41(54,"ngx-simplebar",25),t.DNE(55,_t,15,7,"div",26),t.k0s(),t.j41(56,"form",27,0),t.bIt("ngSubmit",function(){return t.eBV(s),t.Njj(e.sendComment())}),t.j41(58,"div",28)(59,"div",3)(60,"label",29),t.EFF(61,"Leave a Comments"),t.k0s(),t.j41(62,"textarea",30,1),t.mxI("ngModelChange",function(o){return t.eBV(s),t.DH7(e.form.content,o)||(e.form.content=o),t.Njj(o)}),t.EFF(64,"                            "),t.k0s()(),t.j41(65,"div",31)(66,"button",32),t.EFF(67,"Post Comments"),t.k0s()()()()()()(),t.j41(68,"div",33)(69,"div",20)(70,"div",34)(71,"h5",35),t.EFF(72,"Ticket Details"),t.k0s()(),t.j41(73,"div",36)(74,"div",37)(75,"table",38)(76,"tbody")(77,"tr")(78,"td",39),t.EFF(79,"Ticket"),t.k0s(),t.j41(80,"td")(81,"span",40),t.EFF(82),t.k0s()()(),t.j41(83,"tr")(84,"td",39),t.EFF(85,"Assigned To:"),t.k0s(),t.j41(86,"td")(87,"div",41),t.DNE(88,jt,4,2,"a",42),t.k0s()()(),t.j41(89,"tr")(90,"td",39),t.EFF(91,"Status:"),t.k0s(),t.j41(92,"td")(93,"span"),t.EFF(94),t.nI1(95,"translate"),t.k0s()()(),t.j41(96,"tr")(97,"td",39),t.EFF(98,"Priority"),t.k0s(),t.j41(99,"td")(100,"span"),t.EFF(101),t.nI1(102,"translate"),t.k0s()()(),t.j41(103,"tr")(104,"td",39),t.EFF(105,"Start Date"),t.k0s(),t.j41(106,"td",43),t.EFF(107),t.nI1(108,"date"),t.k0s()(),t.j41(109,"tr")(110,"td",39),t.EFF(111,"End Date"),t.k0s(),t.j41(112,"td",44),t.EFF(113),t.nI1(114,"date"),t.k0s()(),t.j41(115,"tr")(116,"td",39),t.EFF(117,"Last Activity"),t.k0s(),t.j41(118,"td"),t.EFF(119),t.nI1(120,"date"),t.k0s()()()()()()(),t.j41(121,"div",20)(122,"div",34)(123,"h6",45),t.EFF(124,"Files Attachment"),t.k0s()(),t.j41(125,"div",36),t.DNE(126,Ft,12,2,"div",46)(127,Ct,4,3,"div",47),t.k0s()()()()}if(2&n){const s=t.sdS(57);t.R7$(14),t.Lme("#ticket#",null==e.ticketDetails?null:e.ticketDetails.id," - ",null==e.ticketDetails?null:e.ticketDetails.subject,""),t.R7$(5),t.JRh(t.i5U(20,30,null==e.ticketDetails?null:e.ticketDetails.dateStart,"mediumDate")),t.R7$(6),t.JRh(t.i5U(26,33,null==e.ticketDetails?null:e.ticketDetails.dateEnd,"mediumDate")),t.R7$(3),t.ZvI(" badge ",e.getStatusBgTextColor(null==e.ticketDetails?null:e.ticketDetails.status)," text-uppercas "),t.R7$(),t.JRh(t.bMT(30,36,"ticketSupport.ticketList."+(null==e.ticketDetails?null:e.ticketDetails.statusName))),t.R7$(2),t.ZvI("badge text-uppercase   ",e.getStatusColor(null==e.ticketDetails?null:e.ticketDetails.priority)," "),t.R7$(),t.JRh(t.bMT(33,38,"ticketSupport.ticketList."+(null==e.ticketDetails?null:e.ticketDetails.priorityName))),t.R7$(23),t.Y8G("ngForOf",null==e.ticketDetails?null:e.ticketDetails.comments),t.R7$(7),t.R50("ngModel",e.form.content),t.R7$(4),t.Y8G("disabled",!s.valid),t.R7$(16),t.JRh("#ticket#"+(null==e.ticketDetails?null:e.ticketDetails.id)),t.R7$(6),t.Y8G("ngForOf",null==e.ticketDetails?null:e.ticketDetails.taskMasterAssignees),t.R7$(5),t.ZvI(" badge ",e.getStatusBgTextColor(null==e.ticketDetails?null:e.ticketDetails.status)," text-uppercas "),t.R7$(),t.JRh(t.bMT(95,40,"ticketSupport.ticketList."+(null==e.ticketDetails?null:e.ticketDetails.statusName))),t.R7$(6),t.ZvI("badge text-uppercase   ",e.getStatusColor(null==e.ticketDetails?null:e.ticketDetails.priority)," "),t.R7$(),t.JRh(t.bMT(102,42,"ticketSupport.ticketList."+(null==e.ticketDetails?null:e.ticketDetails.priorityName))),t.R7$(6),t.JRh(t.i5U(108,44,null==e.ticketDetails?null:e.ticketDetails.dateStart,"mediumDate")),t.R7$(6),t.JRh(t.i5U(114,47,null==e.ticketDetails?null:e.ticketDetails.dateEnd,"mediumDate")),t.R7$(6),t.JRh(t.i5U(120,50,null==e.ticketDetails?null:e.ticketDetails.lastModificationTime,"mediumDate")),t.R7$(7),t.Y8G("ngForOf",null==e.ticketDetails?null:e.ticketDetails.attachments),t.R7$(),t.Y8G("ngIf",!(null!=e.ticketDetails&&e.ticketDetails.attachments.length))}},dependencies:[p.Sq,p.bT,c.qT,c.me,c.BC,c.cb,c.YS,c.vS,c.cV,m.md,V.H,p.vh,u.D9]})}}return a})(),canActivate:[B.g],data:{permission:["ticketList.view"]}}];let St=(()=>{class a{static{this.\u0275fac=function(n){return new(n||a)}}static{this.\u0275mod=t.$C({type:a})}static{this.\u0275inj=t.G2t({imports:[g.iI.forChild(Tt),g.iI]})}}return a})();var Mt=r(53978),Rt=r(73687),It=r(81391),xt=r(5946),Vt=r(5490),Dt=r(18865),Et=r(4626),wt=r(99830),Lt=r(41198),Gt=r(6064),Nt=r(75464),$t=r(86411),Bt=r(89524),Xt=r(71144),Yt=r(65430),Ut=r(41631);let At=(()=>{class a{static{this.\u0275fac=function(n){return new(n||a)}}static{this.\u0275mod=t.$C({type:a})}static{this.\u0275inj=t.G2t({providers:[(0,wt.Dw)(),p.vh],imports:[p.MD,c.YN,c.X1,m.zH,m.Pv,m.n8,m.Gk,m.h_,m.c9,V.A,X.JG,k.ND,D.r,St,u.h,S.bG,f.th,G.MQ,N.S,Rt.tP,Vt.w8,Et.J,xt.gI,Dt.z0,It.ad,Lt.TV,m._f,m.HC,Bt.Ls,Nt.M.pick($t.Wzl),Gt.E,k.ND.forRoot(),Mt.G,Xt.j,m.oi,Yt.q4,Ut.H_,$.U]})}}return a})()}}]);
(self.webpackChunkvelzon=self.webpackChunkvelzon||[]).push([[571],{56701:(st,ke,j)=>{"use strict";j.d(ke,{g:()=>De});var x=j(54438),m=j(62984),O=j(51188),ne=j(3888);let De=(()=>{class J{constructor(ue,Ge,R){this.authservice=ue,this.router=Ge,this.alertService=R}canActivate(ue){return!!this.authservice.permissionMatch(ue.data.permission)||(this.alertService.error("general.notAllow.notAllowPageMessage"),this.router.navigate(["/"]),!1)}static{this.\u0275fac=function(Ge){return new(Ge||J)(x.KVO(m.J),x.KVO(O.Ix),x.KVO(ne.u))}}static{this.\u0275prov=x.jDH({token:J,factory:J.\u0275fac,providedIn:"root"})}}return J})()},56131:(st,ke,j)=>{"use strict";j.d(ke,{E:()=>O});var x=j(7673),m=j(99437);class O{constructor(De,J,Le){this.router=De,this.BaseService=J,this.alertService=Le,this.pagination={pageNumber:1,pageSize:10}}resolve(De,J){return this.BaseService.get(this.pagination).pipe((0,m.W)(Le=>(this.router.navigate([""]),this.alertService.error(Le),(0,x.of)(null))))}}},25571:(st,ke,j)=>{"use strict";j.r(ke),j.d(ke,{SalesModule:()=>Za});var x=j(60177),m=j(89417),O=j(69005),ne=j(91022),De=j(70255),J=j(63789),Le=j(98982),ue=j.n(Le),Ge=j(53978),R=j(8147),G=j(45286),Zt=j(65430),Tt=j(41631),Y=j(1530),Ee=j(72510),U=j(51188),e=j(54438),We=j(21413),N=j(56977),Z=j(37021),te=j(35335),F=j(45236),M=j(70980),he=j(99437),Oe=j(18810),D=j(36158),mi=j(84412),Rt=j(67569),kt=j(45312),At=j(21626);let Ve=(()=>{class o extends Rt.d{constructor(n){super(n,kt.c.apiUrl+"OfferOrder/"),this.checkValidationSource=new mi.t(!0),this.checkValidation=this.checkValidationSource.asObservable(),this.salesOrderForm={id:null,clientLocationId:0,clientVisitDate:new Date,clientId:0,notes:"",items:[],discountAmount:0,discountAmountAdd:0,total:0,agent:{},orderLocations:{},discountType:1,discountTypeAdd:1,isPrecentage:!1,isPrecentageAdd:!1,totalAddDiscountType:0,totalAddDiscount:0}}getLookups(){return this.http.get(this.baseUrl+"Lookups")}changStatus(n){return this.http.put(this.baseUrl+"ChangeStatus/",n)}UpdateQuantity(n){return this.http.put(this.baseUrl+"UpdateQuantity",n)}updateTruck(n){return this.http.put(this.baseUrl+"updateTruck",n)}GetTrucks(n){return this.http.post(this.baseUrl+"GetTrucks/",n)}CancelOfferOrder(n){return this.http.post(this.baseUrl+"CancelOfferOrder",n)}GetOfferOrderCount(){return this.http.get(this.baseUrl+"OfferOrderCount")}GetAssignSalesOrder(){return this.http.get(this.baseUrl+"GetAssignSalesOrder")}static{this.\u0275fac=function(s){return new(s||o)(e.KVO(At.Qq))}}static{this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})(),tr=(()=>{class o extends Rt.d{constructor(n){super(n,kt.c.apiUrl+"RequestPersonSales/")}UpdateLimit(n){return this.http.post(this.baseUrl+"UpdateLimit",n)}GetRequestLookups(){return this.http.get(this.baseUrl+"GetRequestLookups")}static{this.\u0275fac=function(s){return new(s||o)(e.KVO(At.Qq))}}static{this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var me=j(3888),_e=j(29935),Bt=j(38542),en=j(70152),Je=j(23294),tn=j(25558),pi=j(7673),Gn=j(75922);function nn(o,g){if(1&o&&(e.j41(0,"div",8),e.nrm(1,"i",9),e.j41(2,"div"),e.nrm(3,"strong",10),e.EFF(4),e.k0s(),e.j41(5,"div"),e.nrm(6,"strong",11),e.EFF(7),e.k0s(),e.j41(8,"div"),e.nrm(9,"strong",12),e.EFF(10),e.k0s(),e.j41(11,"div"),e.nrm(12,"strong",13),e.EFF(13),e.k0s(),e.j41(14,"div"),e.nrm(15,"strong",14),e.EFF(16),e.k0s(),e.j41(17,"div"),e.nrm(18,"strong",15),e.EFF(19),e.k0s()()),2&o){const n=e.XpG();e.R7$(4),e.SpI(" : ",n.clientInfo.name,""),e.R7$(3),e.SpI(" : ",n.clientInfo.vatNumber,""),e.R7$(3),e.SpI(" : ",n.clientInfo.mobile,""),e.R7$(3),e.SpI(" : ",n.clientInfo.creditLimit,""),e.R7$(3),e.SpI(" : ",n.clientInfo.nationalAddress,""),e.R7$(3),e.SpI(" : ",n.clientInfo.clientGroupName,"")}}let Vn=(()=>{class o{constructor(n,s,r){this.clientService=n,this.offerOrder=s,this.route=r,this.form={},this.keySelected="",this.notifier=new We.B,this.mainDelay=100,this.loaderSearchShap=D.cX,this.loaderOperationShap=D.$$,this.operationLoader=D.ZW,this.isEditForm=!1,this.showEdit=!1,this.clients=[],this.paymentTypes=[],this.isClientFound=!0,this.errorMessage="",this.setFormByOrderCode=new e.bkB,this.calacTotal=new e.bkB,this.isOrderEdit=!0,this.loading=!1,this.searchClient=new We.B,this.clientParam={pageSize:50,pageNumber:1,search:""}}ngOnInit(){this.form=this.offerOrder.salesOrderForm,this.form.clientId&&(this.getClientSearchDropdwon(this.form.clientId),this.getClientInfo(this.form.clientId)),this.searchClient.pipe((0,en.B)(300),(0,Je.F)(),(0,tn.n)(n=>this.loadClient(n))).subscribe()}loadClient(n){return this.loading=!0,""==n||null==n?(this.loading=!1,(0,pi.of)([])):this.getClientDropdwon(n)}getClientDropdwon(n){return this.clientParam.search=n,this.clientParam.pageNumber=1,this.clientService.GetClientSearch(this.clientParam).pipe((0,tn.n)(s=>(this.clients=s.data,this.loading=!1,[])))}getClientSearchDropdwon(n){this.clientParam.search=n,this.clientParam.pageNumber=1,this.clientService.GetClientSearch(this.clientParam).subscribe(s=>{this.clients=s.data})}scrollClient(){this.clientParam.pageNumber=this.clientParam.pageNumber+1,this.clientService.GetClientSearch(this.clientParam).subscribe(n=>{this.clients=[...this.clients,...n.data]})}getClientInfo(n){null!=n&&(this.offerOrder.salesOrderForm.clientId=n,this.offerOrder.salesOrderForm.clientVisitDate=this.form.clientVisitDate,this.clientService.GetClientInfo(n).subscribe(s=>{this.form.creditLimit=s.data.creditLimit,this.offerOrder.checkValidationSource.next(!0),this.clientInfo=s.data}))}ngOnDestroy(){}static{this.\u0275fac=function(s){return new(s||o)(e.rXU(Gn.X),e.rXU(Ve),e.rXU(U.nX))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-client-info-salse"]],inputs:{form:"form",clients:"clients",isOrderEdit:"isOrderEdit"},outputs:{setFormByOrderCode:"setFormByOrderCode",calacTotal:"calacTotal"},decls:10,vars:13,consts:[[1,"row","mt-4"],[1,"col-12","col-md-8","mb-3"],["for","mobile","translate","",1,"fw-bold","form-label"],["bindLabel","displayName","bindValue","id","required","",3,"scrollToEnd","ngModelChange","virtualScroll","items","typeahead","loading","multiple","ngModel","disabled"],["class","mt-5 alert alert-primary alert-dismissible material-shadow alert-label-icon rounded-label fade show","role","alert",4,"ngIf"],[1,"col-12","col-md-4","mb-3"],["for","name","translate","",1,"fw-bold","form-label"],["name","clientVisitDate","type","text","mwlFlatpickr","","altFormat","d-m-Y H:i",1,"form-control","flatpickr-input",3,"ngModelChange","ngModel","altInput","enableTime","convertModelValue","dateFormat"],["role","alert",1,"mt-5","alert","alert-primary","alert-dismissible","material-shadow","alert-label-icon","rounded-label","fade","show"],[1,"ri-user-smile-line","label-icon"],["translate","sales.salesOrder.clientName"],["translate","sales.salesOrder.vatNumber"],["translate","sales.salesOrder.mobile"],["translate","sales.salesOrder.creditLimit"],["translate","sales.salesOrder.nationalAddress"],["translate","sales.salesOrder.clientGroupName"]],template:function(s,r){1&s&&(e.j41(0,"div",0)(1,"div",1)(2,"label",2),e.EFF(3,"orderManagement.order.clientSearch"),e.k0s(),e.j41(4,"ng-select",3),e.bIt("scrollToEnd",function(){return r.scrollClient()}),e.mxI("ngModelChange",function(h){return e.DH7(r.form.clientId,h)||(r.form.clientId=h),h}),e.bIt("ngModelChange",function(h){return r.getClientInfo(h)}),e.k0s(),e.DNE(5,nn,20,6,"div",4),e.k0s(),e.j41(6,"div",5)(7,"label",6),e.EFF(8,"sales.salesOrder.acutalVisitDate"),e.k0s(),e.j41(9,"input",7),e.mxI("ngModelChange",function(h){return e.DH7(r.form.clientVisitDate,h)||(r.form.clientVisitDate=h),h}),e.k0s()()()),2&s&&(e.R7$(4),e.Y8G("virtualScroll",!0)("items",r.clients)("typeahead",r.searchClient)("loading",r.loading)("multiple",!1),e.R50("ngModel",r.form.clientId),e.Y8G("disabled",!r.isOrderEdit),e.R7$(),e.Y8G("ngIf",r.clientInfo),e.R7$(4),e.R50("ngModel",r.form.clientVisitDate),e.Y8G("altInput",!0)("enableTime",!0)("convertModelValue",!0)("dateFormat","d-m-Y H:i"))},dependencies:[x.bT,m.me,m.BC,m.YS,m.vS,R.Mm,Ee.vr,ne.kL],encapsulation:2})}}return o})();var bs=j(25947),vn=j(33121),Be=j(12260),jt=j(15084);function An(o,g){if(1&o){const n=e.RV6();e.qex(0),e.j41(1,"div",17)(2,"div",18)(3,"input",19),e.bIt("change",function(){const r=e.eBV(n).$implicit,d=e.XpG();return e.Njj(d.locationChange(r))}),e.k0s(),e.j41(4,"label",20)(5,"span",21),e.EFF(6),e.k0s(),e.j41(7,"span",22),e.EFF(8),e.k0s()()(),e.j41(9,"div",23)(10,"div")(11,"a",24),e.bIt("click",function(){const r=e.eBV(n).$implicit,d=e.XpG(),h=e.sdS(9);return e.Njj(d.openEditModal(r,h))}),e.nrm(12,"i",25)(13,"span",26),e.k0s()(),e.j41(14,"div")(15,"a",27),e.bIt("click",function(){const r=e.eBV(n).$implicit,d=e.XpG(),h=e.sdS(11);return e.Njj(d.confirm(r.id,h))}),e.nrm(16,"i",28)(17,"span",29),e.k0s()()()(),e.bVm()}if(2&o){const n=g.$implicit;e.R7$(3),e.Mz_("id","S",n.id,""),e.Y8G("checked",n.isSelected),e.R7$(),e.Mz_("for","S",n.id,""),e.R7$(2),e.Lme(" ",n.cityName,"- ",n.name,""),e.R7$(2),e.SpI(" ",n.address,"")}}function Bn(o,g){1&o&&(e.j41(0,"span",58),e.EFF(1,"general.action.register "),e.k0s())}function nr(o,g){1&o&&(e.j41(0,"span",58),e.EFF(1,"general.action.edit "),e.k0s())}function at(o,g){1&o&&(e.j41(0,"div",59),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function Cn(o,g){1&o&&(e.j41(0,"div",59),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function vs(o,g){if(1&o){const n=e.RV6();e.j41(0,"div",30)(1,"div",31)(2,"h4",32),e.DNE(3,Bn,2,0,"span",33)(4,nr,2,0,"span",33),e.k0s(),e.j41(5,"button",34),e.bIt("click",function(){const r=e.eBV(n).$implicit;return e.Njj(r.dismiss("Cross click"))}),e.k0s()(),e.j41(6,"div",35),e.nrm(7,"ngx-ui-loader",36),e.j41(8,"form",37,2),e.bIt("submit",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.OnSubmit())}),e.j41(10,"div",38),e.nrm(11,"label",39),e.j41(12,"ng-select",40,3),e.nI1(14,"translate"),e.mxI("ngModelChange",function(r){e.eBV(n);const d=e.XpG();return e.DH7(d.formEdit.cityCode,r)||(d.formEdit.cityCode=r),e.Njj(r)}),e.k0s()(),e.j41(15,"div",38),e.nrm(16,"label",41),e.j41(17,"input",42,4),e.mxI("ngModelChange",function(r){e.eBV(n);const d=e.XpG();return e.DH7(d.formEdit.name,r)||(d.formEdit.name=r),e.Njj(r)}),e.k0s(),e.DNE(19,at,2,0,"div",43),e.k0s(),e.j41(20,"div",38),e.nrm(21,"label",44),e.j41(22,"textarea",45,5),e.mxI("ngModelChange",function(r){e.eBV(n);const d=e.XpG();return e.DH7(d.formEdit.address,r)||(d.formEdit.address=r),e.Njj(r)}),e.k0s(),e.DNE(24,Cn,2,0,"div",43),e.k0s(),e.j41(25,"div",38),e.nrm(26,"label",46),e.j41(27,"input",47,6),e.bIt("change",function(r){e.eBV(n);const d=e.XpG();return e.Njj(d.onUrlChange(r))}),e.mxI("ngModelChange",function(r){e.eBV(n);const d=e.XpG();return e.DH7(d.formEdit.mapURL,r)||(d.formEdit.mapURL=r),e.Njj(r)}),e.k0s()(),e.j41(29,"div",48)(30,"div",49),e.nrm(31,"label",50),e.j41(32,"input",51,7),e.mxI("ngModelChange",function(r){e.eBV(n);const d=e.XpG();return e.DH7(d.formEdit.lat,r)||(d.formEdit.lat=r),e.Njj(r)}),e.k0s()(),e.j41(34,"div",49),e.nrm(35,"label",52),e.j41(36,"input",53,8),e.mxI("ngModelChange",function(r){e.eBV(n);const d=e.XpG();return e.DH7(d.formEdit.lng,r)||(d.formEdit.lng=r),e.Njj(r)}),e.k0s()()(),e.j41(38,"div",54)(39,"button",55),e.nrm(40,"i",56)(41,"span",57),e.k0s()()()()()}if(2&o){const n=e.sdS(9),s=e.sdS(18),r=e.sdS(23),d=e.XpG();e.R7$(3),e.Y8G("ngIf",!d.isEditForm),e.R7$(),e.Y8G("ngIf",d.isEditForm),e.R7$(3),e.Y8G("hasProgressBar",!1)("fgsType",d.loaderOperationShap)("loaderId","locationOperation"),e.R7$(5),e.FS9("placeholder",e.bMT(14,17,"orderManagement.order.cityName")),e.R50("ngModel",d.formEdit.cityCode),e.Y8G("items",d.cities)("multiple",!1),e.R7$(5),e.R50("ngModel",d.formEdit.name),e.R7$(2),e.Y8G("ngIf",s.invalid&&s.touched),e.R7$(3),e.R50("ngModel",d.formEdit.address),e.R7$(2),e.Y8G("ngIf",r.invalid&&r.touched),e.R7$(3),e.R50("ngModel",d.formEdit.mapURL),e.R7$(5),e.R50("ngModel",d.formEdit.lat),e.R7$(4),e.R50("ngModel",d.formEdit.lng),e.R7$(3),e.Y8G("disabled",!n.valid)}}function It(o,g){if(1&o){const n=e.RV6();e.j41(0,"delete-modal",60),e.bIt("deleteConfirm",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.DeleteConfirm())})("dismiss",function(){const r=e.eBV(n).$implicit;return e.Njj(r.dismiss())}),e.k0s()}}let Cs=(()=>{class o{constructor(n,s,r,d,h,u,E,ce){this.modalService=n,this.baseService=s,this.alertService=r,this.ngxLoader=d,this.whatsupService=h,this.whatsAppMessagesService=u,this.cityService=E,this.offerOrder=ce,this.submitted=!1,this.form={},this.mainDelay=20,this.notifier=new We.B,this.operationLoader=D.ZW,this.isEditForm=!1,this.loaderOperationShap=D.$$,this.isLoad=!1,this.formEdit={},this.cities=[],this.idSelected=0,this.isOrderEdit=!0,this.modalRefs={}}ngOnInit(){this.form=this.offerOrder.salesOrderForm,this.form.clientId&&this.checkLocation(),this.form.clientLocationId&&this.checkSelected(this.form.clientLocationId),this.GetCities()}confirm(n,s){this.idSelected=n,this.modalService.open(s,{centered:!0})}openModal(n){this.ngxLoader.stopLoader(this.operationLoader),this.submitted=!1,this.modalRefs=this.modalService.open(n,{size:"md",centered:!0})}openEditModal(n,s){this.submitted=!1,this.formEdit=n,this.isEditForm=!0,this.modalRefs=this.modalService.open(s,{size:"md",centered:!0})}changeActiveTab(n){this.nav.select(n)}GetCities(){this.cityService.getDropDown().subscribe(n=>{this.cities=n.data},n=>{console.log(n)})}registerEntity(n=!1){this.ngxLoader.startLoader("locationOperation");let s=this.mapRegisterForm(this.formEdit);s.isSend=n,this.baseService.AddLocation(s).pipe((0,Z.O)(),(0,te.c)(this.mainDelay),(0,F.Z)(),(0,N.Q)(this.notifier),(0,M.j)(()=>this.ngxLoader.stopLoader("locationOperation")),(0,he.W)(r=>(0,Oe.$)(r))).subscribe(r=>{r.success?(this.alertService.success(),this.modalRefs.dismiss(),this.refresh()):this.alertService.error("general.message."+r.message)},r=>{this.alertService.error("general.message."+r)})}editEntity(n=!1){this.ngxLoader.startLoader("locationOperation");let s=this.mapForm(this.formEdit);s.isSend=n,this.baseService.EditLocation(s).pipe((0,Z.O)(),(0,te.c)(this.mainDelay),(0,F.Z)(),(0,N.Q)(this.notifier),(0,M.j)(()=>this.ngxLoader.stopLoader("locationOperation"))).subscribe(r=>{r.success?(this.alertService.success(),this.modalRefs.dismiss(),this.refresh()):this.alertService.error("general.message."+r.message)},r=>{this.alertService.error("general.message."+r)})}mapForm(n){let s={...n};return s.agentCode=this.form.clientId,s.cityCode=s.cityCode,s.agentName="",s.mobile="",s.mapURL=s.mapURL,s.lat=s.lat?s.lat.toString():"",s.lng=s.lng?s.lng.toString():"",s}mapRegisterForm(n){let s={...n};return s.id=0,s.cityCode=s.cityCode,s.agentName="",s.mobile="",s.agentCode=this.form.clientId,s.mapURL=s.mapURL,s.lat=s.lat,s.lng=s.lng,s}submitFunished(){this.alertService.success(),this.modalService?.dismissAll()}OnSubmit(n=!1){this.ngxLoader.startLoader(this.operationLoader),!0===this.isEditForm?this.editEntity(n):this.registerEntity(n)}getFromClient(){this.form.agent.mobile||this.alertService.error("orderManagement.order.mustEnterNumber"),this.isLoad=!0,this.whatsupService.GetLocationFromClient(this.form.agent.mobile).pipe((0,N.Q)(this.notifier),(0,M.j)(()=>this.isLoad=!1)).subscribe(n=>{n.success?this.alertService.success("orderManagement.order.successSendLocation"):this.alertService.error("orderManagement.order.failSendLocation")},()=>{this.alertService.error("orderManagement.order.failSendLocation")})}DeleteConfirm(){this.baseService.DeleteLocation(this.idSelected).pipe((0,Z.O)(),(0,te.c)(this.mainDelay),(0,F.Z)(),(0,N.Q)(this.notifier),(0,M.j)(()=>this.ngxLoader.stopLoader("deleteLoader"))).subscribe(n=>{if(n.success){const s=this.form.locations.findIndex(r=>r.id===this.idSelected);-1!==s&&this.form.locations.splice(s,1),this.alertService.success(),this.modalService.dismissAll()}else this.alertService.error("general.message."+n)},()=>{this.alertService.error()})}refresh(){this.baseService.clientNumber.next(!0)}locationChange(n){this.form.clientLocationId=n.id;let s=this.form.locations.find(r=>r.id==n.id);s.isSelected=!s.isSelected,this.offerOrder.salesOrderForm.clientLocationId=this.form.clientLocationId}checkSelected(n){this.offerOrder.checkValidationSource.next(!0),this.form.locations.find(r=>r.id==n).isSelected=!0}checkLocation(){this.offerOrder.checkValidationSource.next(!0),this.baseService.GetClientLocations(this.form.clientId).subscribe(n=>{this.form.locations=n.data})}ngOnDestroy(){this.notifier.next(),this.notifier.complete()}onUrlChange(n){let d=new URL(n.target.value).searchParams.get("q");if(d){let[h,u]=d.split(",").map(Number);this.formEdit.lat=h,this.formEdit.lng=u}}static{this.\u0275fac=function(s){return new(s||o)(e.rXU(O.Bq),e.rXU(Gn.X),e.rXU(me.u),e.rXU(Y.eD),e.rXU(bs.A),e.rXU(vn.Q),e.rXU(Be.h),e.rXU(Ve))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["client-location-salse"]],viewQuery:function(s,r){if(1&s&&e.GBs(O.X9,5),2&s){let d;e.mGM(d=e.lsd())&&(r.nav=d.first)}},inputs:{form:"form",isOrderEdit:"isOrderEdit"},features:[e.Jv_([O.X9])],decls:12,vars:2,consts:[["content",""],["deleteModal",""],["formEntity","ngForm"],["cityCode","ngModel"],["name","ngModel"],["address","ngModel"],["mapURL","ngModel"],["lat","ngModel"],["lng","ngModel"],[1,"mt-4"],[1,"d-flex","align-items-center","mb-2"],[1,"flex-grow-1"],["translate","orderManagement.order.savedAddress",1,"fs-15","mb-0"],[1,"flex-shrink-0"],["type","button","translate","orderManagement.order.sendToClient",1,"btn","btn-sm","btn-success","mb-1",3,"click","disabled"],[1,"row","gy-3"],[4,"ngFor","ngForOf"],[1,"col-lg-4","col-sm-6"],[1,"form-check","card-radio"],["name","location","type","radio",1,"form-check-input",3,"change","id","checked"],[1,"form-check-label",3,"for"],[1,"mb-4","fw-bold","d-block","text-muted","text-uppercase"],[1,"text-muted","fw-normal","text-wrap","mb-1","d-block"],[1,"d-flex","flex-wrap","p-2","py-1","bg-light","rounded-bottom","border","mt-n1"],["href","javascript:void(0);","data-bs-toggle","modal","data-bs-target","#addAddressModal",1,"d-block","text-body","p-1","px-2",3,"click"],[1,"ri-pencil-fill","text-muted","align-bottom","me-1"],["translate","general.action.edit"],["href","javascript:void(0);","data-bs-toggle","modal","data-bs-target","#removeItemModal",1,"d-block","text-body","p-1","px-2",3,"click"],[1,"ri-delete-bin-fill","text-muted","align-bottom","me-1"],["translate","general.action.delete"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["class","fw-bold fs-4","translate","",4,"ngIf"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"hasProgressBar","fgsType","loaderId"],[3,"submit"],[1,"mb-1"],["for","name","translate","orderManagement.order.cityName",1,"required","fw-bold","form-label"],["name","cityCode","id","cityCode","bindValue","code","bindLabel","name",3,"ngModelChange","ngModel","placeholder","items","multiple"],["for","name","translate","orderManagement.order.name",1,"required","fw-bold","form-label"],["InputTirmFilter","","name","name","type","text","id","name","required","",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],["for","address","translate","orderManagement.order.address",1,"fw-bold","form-label"],["rows","2","InputTirmFilter","","name","address","type","text","id","address",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["for","mapURL","translate","orderManagement.order.mapURL",1,"fw-bold","form-label"],["InputTirmFilter","","name","mapURL","type","text","id","mapURL",1,"form-control","fs-6",3,"change","ngModelChange","ngModel"],[1,"row","my-2"],[1,"col-12","col-md-6"],["for","lat","translate","orderManagement.order.lat",1,"fw-bold","form-label"],["disabled","","InputTirmFilter","","name","lat","type","text","id","lat",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["for","lng","translate","orderManagement.order.lng",1,"fw-bold","form-label"],["disabled","","InputTirmFilter","","name","lng","type","text","id","lng",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,"text-center"],["type","submit","type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],["translate","",1,"fw-bold","fs-4"],["translate","",1,"text-danger","text-center"],[3,"deleteConfirm","dismiss"]],template:function(s,r){if(1&s){const d=e.RV6();e.j41(0,"div",9)(1,"div",10)(2,"div",11),e.nrm(3,"h5",12),e.k0s(),e.j41(4,"div",13)(5,"button",14),e.bIt("click",function(){e.eBV(d);const u=e.sdS(9);return e.Njj(r.openModal(u))}),e.k0s()()(),e.j41(6,"div",15),e.DNE(7,An,18,8,"ng-container",16),e.k0s()(),e.DNE(8,vs,42,19,"ng-template",null,0,e.C5r)(10,It,1,0,"ng-template",null,1,e.C5r)}2&s&&(e.R7$(5),e.Y8G("disabled",r.isLoad),e.R7$(2),e.Y8G("ngForOf",r.form.locations))},dependencies:[x.Sq,x.bT,m.qT,m.me,m.BC,m.cb,m.YS,m.vS,m.cV,R.Mm,_e.m,Ee.vr,Y.Cv,jt.w,R.D9],encapsulation:2})}}return o})();var rn=j(33826);let ot=(()=>{class o{constructor(n,s,r,d,h,u,E,ce){this.routerActive=n,this.translateService=s,this.baseService=r,this.alertService=d,this.datePipe=h,this.modalService=u,this.ngxLoader=E,this.router=ce,this.editOrders="orderManagement.order.editOrders",this.addOrders="orderManagement.order.addOrders",this.titleOperation="orderManagement.order.titleOperation",this.form={},this.keySelected="",this.assignUsers=[],this.times=[],this.active=0,this.shifts=[],this.searchForm="",this.jobTypes=[],this.weekDays=[],this.breadCrumbItems=[],this.todayDate="",this.idForm=0,this.totalPaid=0,this.priceModel=0,this.priceModelIndex=0,this.subtotal=0,this.total=0,this.isResolveList=!0,this.extraDiscountCalc=!1,this.employeeGroups=[],this.notifier=new We.B,this.mainDelay=100,this.loaderSearchShap=D.cX,this.loaderOperationShap=D.$$,this.operationLoader=D.ZW,this.isEditForm=!1,this.showEdit=!1,this.channels=[],this.districts=[],this.cities=[],this.orderTypes=[],this.serviceCategories=[],this.services=[],this.paymentTypes=[],this.fileName="",this.base64String=null,this.orderCode=[],this.newOrder=new e.bkB,this.editOrderActiveTab=new e.bkB;const le=new Date;this.todayDate=`${le.getFullYear()}-${(le.getMonth()+1).toString().padStart(2,"0")}-${le.getDate().toString().padStart(2,"0")}`,console.log(this.todayDate)}nextDate(){let n=this.todayDate.split("-");this.todayDate=`${n[0]}-${n[1]}-${+n[2]+1}`,console.log(this.todayDate)}OpenChangInput(n,s){this.showEdit=!0,console.log(s),this.priceModel=s.price,this.priceModelIndex=n}ChangInput(){this.form.tbOrderServices[`${this.priceModelIndex}`].price=this.priceModel,this.showEdit=!1}previousDate(){let n=this.todayDate.split("-");this.todayDate=`${n[0]}-${n[1]}-${+n[2]-1}`,console.log(this.todayDate)}ngOnDestroy(){this.notifier.next(),this.notifier.complete()}ngOnInit(){this.configRoute(),this.breadCrumbItems=[{label:"layout.sidebar.orders"},{label:"orderManagement.order.title",active:!0,url:"order/list"},{label:this.isEditForm?"general.action.edit":"general.action.register",active:!0}],this.GetOrderLookUp()}onFileSelected(n){const s=n.target;if(s.files&&s.files.length>0){const r=s.files[0];this.fileName=r.name,console.log(r);const d=new FileReader;d.onload=()=>{this.base64String=d.result,console.log("Base64 String:",this.base64String)},d.onerror=h=>{console.error("Error reading file:",h)},d.readAsDataURL(r)}}addService(){let n=this.form.formServices,s=this.services.filter(d=>d.serviceCode==n.serviceCode)[0];this.form.tbOrderServices.push({service:s.name,serviceCode:s.code,price:n.price,notes:n.notes});let r=0;this.form.tbOrderServices.forEach(d=>{r+=+d.price}),this.subtotal=r,console.log(this.subtotal),this.checkTotal(),this.resetServiceForm()}addPayment(){let n=this.form.formPayment,s=this.paymentTypes.filter(d=>d.id==n.paymentTypeCode)[0];this.form.orderPayments.push({paymentType:s.name,paymentTypeCode:n.paymentTypeCode,value:n.value,fileName:this.fileName});let r=0;this.form.orderPayments.forEach(d=>{r+=+d.value}),this.totalPaid=r,this.resetPaymentForm()}checkTotal(){this.total=this.subtotal-+this.form.DiscountAmount}deleteService(n){this.form.tbOrderServices.splice(n,1)}deletePayment(n){this.form.orderPayments.splice(n,1)}resetServiceForm(){let n=this.form.formServices;n.serviceCode=void 0,n.price=null,n.notes=null}resetPaymentForm(){let n=this.form.formPayment;n.paymentTypeCode=null,n.value=null,n.attachRecietPath=null,n.fileName=null}configRoute(){this.routerActive.data.pipe((0,N.Q)(this.notifier)).subscribe(n=>{let s=n.data.data;s&&(this.isEditForm=!0,this.form=s,"Proposed"==s.leadsTypes?this.form.leadsTypes=1:"Inquiry"==s.leadsTypes&&(this.form.leadsTypes=2))},()=>{this.alertService.error()})}GetOrderLookUp(){this.baseService.GetOrderLookUp().subscribe(n=>{this.channels=n.data.channels,this.cities=n.data.cityNames,this.orderTypes=n.data.orderStatus,this.serviceCategories=n.data.serviceCategories,this.paymentTypes=n.data.paymentTypes},n=>{console.log(n)})}getDistricts(n){this.ngxLoader.startLoader(D.ZW),this.baseService.districtsByCity(n).subscribe(s=>{this.districts=s.data,this.ngxLoader.stopLoader(D.ZW)},s=>{console.log(s)})}getServicesByCategory(n){console.log(n),this.ngxLoader.startLoader(D.ZW),this.baseService.getServicesByCategory(n).subscribe(s=>{this.ngxLoader.stopLoader(D.ZW),this.services=s.data},s=>{console.log(s)})}OnSubmit(){this.ngxLoader.startLoader(this.operationLoader),!0===this.isEditForm?this.editEntity():this.registerEntity()}mapRegisterForm(n){let s={...n};return s.id=0,s}registerEntity(){this.ngxLoader.startLoader(D.ZW);let n=this.mapRegisterForm(this.form);this.baseService.registerNewOrder(n).pipe((0,Z.O)(),(0,te.c)(this.mainDelay),(0,F.Z)(),(0,N.Q)(this.notifier),(0,M.j)(()=>this.ngxLoader.stopLoader(D.ZW)),(0,he.W)(s=>(0,Oe.$)(s))).subscribe(s=>{s.success?(this.alertService.success(),this.router.navigateByUrl("/order/list")):this.alertService.error("general.message."+s.message)},s=>{this.alertService.error("general.message."+s)})}editEntity(){this.baseService.editPut(this.form.id,this.form).pipe((0,Z.O)(),(0,te.c)(this.mainDelay),(0,F.Z)(),(0,N.Q)(this.notifier),(0,M.j)(()=>this.ngxLoader.stopLoader(D.ZW))).subscribe(n=>{n.success?this.alertService.success():this.alertService.error("general.message."+n.message)},n=>{this.alertService.error("general.message."+n)})}getTranslationText(n){let s="";return this.translateService.get(n).pipe((0,N.Q)(this.notifier)).subscribe(r=>{s=r}),s}onTimeSelected(n){this.form.orderTeams=n}newOrderAgain(){this.newOrder.next(!0)}editOrder(n){this.baseService.orderEditSubject.next(n),this.editOrderActiveTab.next(!0)}static{this.\u0275fac=function(s){return new(s||o)(e.rXU(U.nX),e.rXU(R.c$),e.rXU(rn.Q),e.rXU(me.u),e.rXU(x.vh),e.rXU(O.Bq),e.rXU(Y.eD),e.rXU(U.Ix))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-finish-order-salse"]],inputs:{form:"form",orderCode:"orderCode"},outputs:{newOrder:"newOrder",editOrderActiveTab:"editOrderActiveTab"},decls:12,vars:1,consts:[[1,"text-center","py-5"],[1,"mb-4"],["src","https://cdn.lordicon.com/lupuorrc.json","trigger","loop","colors","primary:#0ab39c,secondary:#405189",2,"width","120px","height","120px"],["translate","orderManagement.order.orderSaveSuccess"],[1,"fw-semibold",3,"click"],["translate","orderManagement.order.orderCode"],["routerLink","/ecommerce/order-details",1,"text-decoration-underline"],[1,"d-flex","align-items-start","gap-3","mt-4"],["type","button","data-nexttab","pills-finish-tab",1,"btn","btn-primary","btn-label","right","ms-auto","nexttab",3,"click"],[1,"ri-chat-new-line","label-icon","align-middle","fs-16","ms-2"],["translate","orderManagement.order.newOrderAgain"]],template:function(s,r){1&s&&(e.j41(0,"div",0)(1,"div",1),e.nrm(2,"lord-icon",2),e.k0s(),e.nrm(3,"h5",3),e.j41(4,"h3",4),e.bIt("click",function(){return r.editOrder(r.orderCode)}),e.nrm(5,"span",5),e.j41(6,"a",6),e.EFF(7),e.k0s()()(),e.j41(8,"div",7)(9,"button",8),e.bIt("click",function(){return r.newOrderAgain()}),e.nrm(10,"i",9)(11,"span",10),e.k0s()()),2&s&&(e.R7$(7),e.SpI("#SO#",r.orderCode,""))},dependencies:[R.Mm,U.Wk],encapsulation:2})}}return o})();var Sn=j(34618),$n=j(96402),Ss=j(84205);const Ot=o=>[o];function Ts(o,g){if(1&o){const n=e.RV6();e.j41(0,"div",7)(1,"div",8),e.nrm(2,"div",9)(3,"div",10)(4,"div",11)(5,"div",12)(6,"div",13)(7,"div",14),e.k0s(),e.j41(8,"div",15)(9,"div",16)(10,"ng-select",17),e.bIt("change",function(r){const d=e.eBV(n).$index,h=e.XpG();return e.Njj(h.itemSelected(r,d))}),e.mxI("ngModelChange",function(r){const d=e.eBV(n).$implicit;return e.DH7(d.itemId,r)||(d.itemId=r),e.Njj(r)}),e.k0s()(),e.j41(11,"div",18)(12,"ng-select",17),e.bIt("change",function(r){const d=e.eBV(n).$index,h=e.XpG();return e.Njj(h.unitSelect(r,d))}),e.mxI("ngModelChange",function(r){const d=e.eBV(n).$implicit;return e.DH7(d.unitId,r)||(d.unitId=r),e.Njj(r)}),e.k0s()(),e.j41(13,"div",19)(14,"input",20),e.mxI("ngModelChange",function(r){const d=e.eBV(n).$implicit;return e.DH7(d.quantity,r)||(d.quantity=r),e.Njj(r)}),e.bIt("ngModelChange",function(r){const d=e.eBV(n).$index,h=e.XpG();return e.Njj(h.quantitySelect(r,d))}),e.k0s()(),e.j41(15,"div",19)(16,"div",21)(17,"span"),e.EFF(18),e.k0s()()(),e.j41(19,"div",18)(20,"ng-select",22),e.bIt("ngModelChange",function(r){const d=e.eBV(n).$index,h=e.XpG();return e.Njj(h.discountSelect(r,d,2))}),e.mxI("ngModelChange",function(r){const d=e.eBV(n).$implicit;return e.DH7(d.discountType,r)||(d.discountType=r),e.Njj(r)}),e.k0s()(),e.j41(21,"div",18)(22,"input",23),e.bIt("ngModelChange",function(r){const d=e.eBV(n).$index,h=e.XpG();return e.Njj(h.discountSelect(r,d))}),e.mxI("ngModelChange",function(r){const d=e.eBV(n).$implicit;return e.DH7(d.discount,r)||(d.discount=r),e.Njj(r)}),e.k0s()()(),e.j41(23,"div",24)(24,"div",25)(25,"div",26)(26,"div",27)(27,"div",21)(28,"span",28),e.bIt("click",function(){const r=e.eBV(n).$index,d=e.XpG();return e.Njj(d.deleteRow(r))}),e.nrm(29,"i",29),e.k0s()()()(),e.j41(30,"div",30)(31,"div",31),e.nrm(32,"div",32),e.j41(33,"h5",33)(34,"span",34),e.EFF(35),e.k0s(),e.j41(36,"span"),e.EFF(37),e.nI1(38,"translate"),e.k0s()()()()()()()}if(2&o){const n=g.$implicit,s=g.$index,r=e.XpG();e.R7$(10),e.Y8G("name","itemId"+s)("items",r.products),e.R50("ngModel",n.itemId),e.R7$(2),e.Y8G("name","unitId"+e.eq3(18,Ot,s))("items",n.units),e.R50("ngModel",n.unitId),e.R7$(2),e.Y8G("name","quantity"+e.eq3(20,Ot,s)),e.R50("ngModel",n.quantity),e.R7$(4),e.SpI(" ",n.price||0," "),e.R7$(2),e.Y8G("name","discountType"+e.eq3(22,Ot,s))("items",r.discountTypes),e.R50("ngModel",n.discountType),e.R7$(2),e.Y8G("name","discount"+e.eq3(24,Ot,s)),e.R50("ngModel",n.discount),e.R7$(13),e.JRh(n.net||0),e.R7$(2),e.JRh(e.bMT(38,16,"orderManagement.order.currancy"))}}let Tn=(()=>{class o{constructor(n,s,r,d,h,u,E,ce,le){this.routerActive=n,this.translateService=s,this.baseService=r,this.alertService=d,this.ngxLoader=h,this.storeUnitsService=u,this.serviceService=E,this.clientGroupsService=ce,this.offerOrder=le,this.form={},this.selectedServices=[],this.notifier=new We.B,this.mainDelay=100,this.lang=this.translateService.currentLang,this.loaderSearchShap=D.cX,this.loaderOperationShap=D.$$,this.operationLoader=D.ZW,this.isEditForm=!1,this.showEdit=!1,this.statusEnum=[{nameAr:"\u0645\u0639\u0644\u0642",nameEn:"Pending",id:1},{nameAr:"\u0641\u064a \u062a\u064e\u0642\u064e\u062f\u0645",nameEn:"inProgress",id:1},{nameAr:"\u0645\u0646\u062a\u0647\u064a",nameEn:"finished",id:1}],this.clientGroups=[],this.clients=[],this.clientLocation=[],this.items=[],this.itemGroups=[],this.products=[],this.units=[],this.services=[],this.currentLang=this.translateService.currentLang,this.subtotal=0,this.total=0,this.serverImage=kt.c.mediaUrl,this.CalcTotal=new e.bkB,this.discountTypes=[{id:1,name:"Cost"},{id:2,name:"Precentage"}],this.getUnits(),this.getProducts(),this.discountTypes.forEach(re=>{re.name=this.getTranslationText("sales.salesOrder."+re.name)})}addRow(){this.form.items.push({itemGroup:null,itemName:"",itemId:0,unit:null,quantity:1,priceUnit:null,discount:0,discountType:1,net:0}),this.offerOrder.checkValidationSource.next(!0)}deleteRow(n){this.form.items.splice(n,1),this.checkTotal(),this.offerOrder.checkValidationSource.next(!0)}confirmForm(){this.form.items=this.form.items}calculate(n){let s=0,r=0;s=this.products.filter(d=>d.id===this.form.items[n].itemId)[0].price,this.form.items[n].priceUnit=s,r=s*this.form.items[n].quantity,this.form.items[n].net=r,this.confirmForm()}ngOnDestroy(){this.offerOrder.salesOrderForm.items=this.form.items,this.notifier.next(),this.notifier.complete()}getUnits(){this.storeUnitsService.getDropDown().subscribe(n=>{this.units=n.data})}getProducts(){this.serviceService.getItemDropDown().subscribe(n=>{this.products=n.data,console.log(n)})}getClientGroups(){this.clientGroupsService.getDropDown().subscribe(n=>{this.products=n.data,console.log(n)})}ngOnInit(){}updatePrice(n){const s=this.form.orderServices.find(r=>r.serviceCode===n.code);s.quantity=n.quantity,s.price=n.price}checkTotal(){this.CalcTotal.next(!0)}deleteService(n){this.form.orderServices.splice(n,1)}deletePayment(n){this.form.orderPayments.splice(n,1)}resetServiceForm(){let n=this.form.formServices;n.serviceCode=void 0,n.price=null,n.notes=null}resetPaymentForm(){let n=this.form.formPayment;n.paymentTypeCode=null,n.value=null,n.attachRecietPath=null,n.fileName=null}configRoute(){this.routerActive.data.pipe((0,N.Q)(this.notifier)).subscribe(n=>{let s=n.data.data;s&&(this.isEditForm=!0,this.form=s,"Proposed"==s.leadsTypes?this.form.leadsTypes=1:"Inquiry"==s.leadsTypes&&(this.form.leadsTypes=2))},()=>{this.alertService.error()})}getTranslationText(n){let s="";return this.translateService.get(n).pipe((0,N.Q)(this.notifier)).subscribe(r=>{s=r}),s}onTimeSelected(n){this.form.orderTeams=n}itemSelected(n,s){n&&(this.form.items[s].unitId=n.units.length>0?n.units[0].id:null,this.form.items[s].units=n.units,this.form.items[s].price=n.price,this.form.items[s].itemName=n.name,this.quantitySelect(this.form.items[s].quantity,s),this.checkTotal(),this.offerOrder.checkValidationSource.next(!0))}unitSelect(n,s){}quantitySelect(n,s){n&&(n<=0&&(n=1),this.form.items[s].quantity=parseInt(n),this.form.items[s].net=this.form.items[s].price*this.form.items[s].quantity,this.discountSelect(this.form.items[s].discount,s),this.checkTotal())}discountSelect(n,s,r=1){if(n){(n=parseInt(n))<=0&&(this.form.items[s].discount=0),1==r&&(this.form.items[s].discount=n);let d=0;1==this.form.items[s].discountType?d=this.form.items[s].discount:(d=this.form.items[s].price*this.form.items[s].quantity*this.form.items[s].discount/100,d=+d.toFixed(2)),this.form.items[s].net=this.form.items[s].price*this.form.items[s].quantity-d,this.form.items[s].net=this.form.items[s].net.toFixed(2),this.checkTotal()}}static{this.\u0275fac=function(s){return new(s||o)(e.rXU(U.nX),e.rXU(R.c$),e.rXU(rn.Q),e.rXU(me.u),e.rXU(Y.eD),e.rXU(Sn.S),e.rXU($n.N),e.rXU(Ss.t),e.rXU(Ve))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-order-services-sale"]],inputs:{form:"form"},outputs:{CalcTotal:"CalcTotal"},decls:11,vars:3,consts:[[1,"service-container"],[1,"mt-2"],[1,"mt-3"],[1,"my-2","d-flex","justify-content-start","align-items-center"],[1,"mb-0","me-3"],[1,"cursor-pointer","p-2","mb-0","badge","bg-success-subtle","text-success",3,"click"],[1,"ri-add-fill"],[1,"card","card-item","p-1",2,"overflow","visible"],[1,"card-header","row","my-3","p-0"],["translate","sales.salesRequests.itemName",1,"col-12","col-md-4","text-center"],["translate","sales.salesRequests.unit",1,"col-12","col-md-2","text-center"],["translate","sales.salesRequests.quantity",1,"col-12","col-md-1","text-center"],["translate","sales.salesRequests.priceUnit",1,"col-12","col-md-1","text-center"],["translate","sales.salesRequests.discountType",1,"col-12","col-md-2","text-center"],["translate","sales.salesRequests.discount",1,"col-12","col-md-2","text-center"],[1,"card-body","row","p-1"],[1,"col-12","col-md-4"],["bindValue","id","bindLabel","name",2,"width","100%",3,"change","ngModelChange","name","items","ngModel"],[1,"col-12","col-md-2"],[1,"col-12","col-md-1"],["InputTirmFilter","","type","text","id","quantity",1,"form-control","fs-6",3,"ngModelChange","name","ngModel"],[1,"h-100","d-flex","align-items-center"],["bindValue","id","bindLabel","name",2,"width","100%",3,"ngModelChange","name","items","ngModel"],["InputTirmFilter","","type","text","id","discount",1,"form-control","fs-6",3,"ngModelChange","name","ngModel"],[1,"card-footer","p-2"],[1,"row","align-items-center","gy-3"],[1,"col-sm"],[1,"d-flex","flex-wrap","my-n1"],[1,"cursor-pointer","mb-0","p-2","badge","bg-danger-subtle","text-danger",3,"click"],[1,"ri-delete-bin-2-fill"],[1,"col-sm-auto"],[1,"d-flex","align-items-center","gap-2","text-muted"],["translate","sales.salesRequests.net"],[1,"mb-0","text-danger","fs-6"],[1,"product-line-price"]],template:function(s,r){1&s&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4),e.EFF(5),e.nI1(6,"translate"),e.k0s(),e.j41(7,"span",5),e.bIt("click",function(){return r.addRow()}),e.nrm(8,"i",6),e.k0s()(),e.Z7z(9,Ts,39,26,"div",7,e.Vm6),e.k0s()()()),2&s&&(e.R7$(5),e.JRh(e.bMT(6,1,"sales.salesRequests.items")),e.R7$(4),e.Dyx(r.form.items))},dependencies:[m.me,m.BC,m.vS,R.Mm,_e.m,Ee.vr,R.D9],encapsulation:2})}}return o})();const sn=(o,g)=>({"border-right: solid #E5E5E6 2px":o,"border-left: solid #E5E5E6 2px":g}),ui=o=>({"border-bottom:1px solid #E5E5E6;":o});function hi(o,g){if(1&o){const n=e.RV6();e.j41(0,"app-client-info-salse",63),e.bIt("calacTotal",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.checkTotal())})("setFormByOrderCode",function(r){e.eBV(n);const d=e.XpG();return e.Njj(d.setFormByOrderCode(r))}),e.k0s()}if(2&o){const n=e.XpG();e.Y8G("isOrderEdit",n.isOrderEdit)("isInner",n.isInner)("form",n.form)}}function gi(o,g){if(1&o&&e.nrm(0,"client-location-salse",64),2&o){const n=e.XpG();e.Y8G("isOrderEdit",n.isOrderEdit)("form",n.form)}}function fi(o,g){if(1&o){const n=e.RV6();e.j41(0,"app-order-services-sale",65),e.bIt("CalcTotal",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.checkTotal())}),e.k0s()}if(2&o){const n=e.XpG();e.Y8G("isOrderEdit",n.isOrderEdit)("form",n.form)}}function _i(o,g){if(1&o){const n=e.RV6();e.j41(0,"app-finish-order-salse",66),e.bIt("editOrderActiveTab",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.editOrder())})("newOrder",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.newOrder())}),e.k0s()}if(2&o){const n=e.XpG();e.Y8G("orderCode",n.orderCode)("form",n.form)}}function bi(o,g){if(1&o){const n=e.RV6();e.j41(0,"span",67)(1,"div",68)(2,"button",69),e.nrm(3,"i",70)(4,"span",71),e.k0s(),e.j41(5,"ul",72)(6,"li",73),e.bIt("click",function(){e.eBV(n);const r=e.XpG(),d=e.sdS(138);return e.Njj(r.openModalRequest(d))}),e.j41(7,"span",74),e.nrm(8,"i",75)(9,"span",76),e.k0s()()()()()}}function vi(o,g){if(1&o){const n=e.RV6();e.qex(0),e.j41(1,"tr",79)(2,"td",80)(3,"div",81)(4,"div",82)(5,"span",83),e.EFF(6),e.k0s(),e.j41(7,"span")(8,"small",84),e.EFF(9),e.k0s(),e.j41(10,"small",85),e.EFF(11),e.nI1(12,"translate"),e.k0s()()(),e.j41(13,"div",86)(14,"div",87)(15,"button",88),e.bIt("click",function(){const r=e.eBV(n).$implicit,d=e.XpG(2);return e.Njj(d.decrement(r))}),e.EFF(16,"\u2013 "),e.k0s(),e.j41(17,"input",89),e.bIt("change",function(r){const d=e.eBV(n).$implicit,h=e.XpG(2);return e.Njj(h.quantityChange(r,d))}),e.k0s(),e.j41(18,"button",90),e.bIt("click",function(){const r=e.eBV(n).$implicit,d=e.XpG(2);return e.Njj(d.increment(r))}),e.EFF(19,"+ "),e.k0s()()(),e.j41(20,"div",91),e.EFF(21),e.nI1(22,"translate"),e.j41(23,"i",92),e.bIt("click",function(){const r=e.eBV(n).index,d=e.XpG(2);return d.removeService(r),e.Njj(d.checkTotal())}),e.k0s()()()()(),e.bVm()}if(2&o){const n=g.$implicit,s=g.index,r=e.XpG(2);e.R7$(),e.Y8G("ngStyle",e.eq3(14,ui,s===r.form.items.length-1)),e.R7$(5),e.JRh(s+1),e.R7$(3),e.SpI(" ",n.itemName," "),e.R7$(2),e.Lme(" ",n.price," ",e.bMT(12,10,"orderManagement.order.currancy")," "),e.R7$(6),e.Mz_("id","cart-",n.code,""),e.FS9("value",n.quantity),e.R7$(4),e.Lme(" ",n.price*n.quantity-n.discount," ",e.bMT(22,12,"orderManagement.order.currancy")," ")}}function Ci(o,g){if(1&o&&(e.qex(0),e.j41(1,"h5",77),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.DNE(4,vi,24,16,"ng-container",78),e.bVm()),2&o){const n=e.XpG();e.R7$(2),e.SpI(" ",e.bMT(3,2,"orderManagement.order.clientServices")," "),e.R7$(2),e.Y8G("ngForOf",n.form.items)}}function Si(o,g){1&o&&(e.j41(0,"tr")(1,"td",93),e.EFF(2),e.nI1(3,"translate"),e.k0s()()),2&o&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"orderManagement.order.noServices")," "))}function js(o,g){1&o&&(e.j41(0,"tr")(1,"td",94),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"td",95),e.EFF(5," 0 "),e.k0s()()),2&o&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"orderManagement.order.ServicePrice")," "))}function Is(o,g){1&o&&(e.j41(0,"div",112),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function ys(o,g){if(1&o){const n=e.RV6();e.j41(0,"div",96)(1,"div",97)(2,"h4",98),e.nrm(3,"span",76),e.k0s(),e.j41(4,"button",99),e.bIt("click",function(){const r=e.eBV(n).$implicit;return e.Njj(r.dismiss("Cross click"))}),e.k0s()(),e.j41(5,"div",100),e.nrm(6,"ngx-ui-loader",101),e.j41(7,"form",102,0),e.bIt("submit",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.OnRequestSubmit())}),e.j41(9,"div",103)(10,"label",104),e.EFF(11,"sales.clientCollection.cost"),e.k0s(),e.j41(12,"input",105,5),e.mxI("ngModelChange",function(r){e.eBV(n);const d=e.XpG();return e.DH7(d.formRequest.cost,r)||(d.formRequest.cost=r),e.Njj(r)}),e.k0s(),e.DNE(14,Is,2,0,"div",106),e.k0s(),e.j41(15,"div",103)(16,"label",107),e.EFF(17,"sales.clientCollection.notes"),e.k0s(),e.j41(18,"textarea",108,3),e.mxI("ngModelChange",function(r){e.eBV(n);const d=e.XpG();return e.DH7(d.formRequest.notes,r)||(d.formRequest.notes=r),e.Njj(r)}),e.k0s()(),e.j41(20,"div",109)(21,"button",110),e.nrm(22,"i",33)(23,"span",111),e.k0s()()()()()}if(2&o){const n=e.sdS(8),s=e.sdS(13),r=e.XpG();e.R7$(6),e.Y8G("hasProgressBar",!1)("fgsType",r.loaderOperationShap)("loaderId",r.operationLoader),e.R7$(6),e.R50("ngModel",r.formRequest.cost),e.R7$(2),e.Y8G("ngIf",s.invalid&&s.touched),e.R7$(4),e.R50("ngModel",r.formRequest.notes),e.R7$(3),e.Y8G("disabled",!n.valid)}}let rr=(()=>{class o{constructor(n,s,r,d,h,u,E){this.translateService=n,this.baseService=s,this.requestPersonSalesService=r,this.alertService=d,this.ngxLoader=h,this.datePipe=u,this.modalService=E,this.editOrders="orderManagement.order.editOrders",this.addOrders="orderManagement.order.addOrders",this.titleOperation="orderManagement.order.titleOperation",this.keySelected="",this.active=1,this.language=this.translateService.currentLang,this.searchForm="",this.breadCrumbItems=[],this.disabledStatus=!0,this.form={clientVisitDate:new Date,id:null,cityCode:0,clientLocationId:0,clientId:0,isUrgent:!1,notes:"",items:[],discountAmount:0,discountAmountAdd:0,total:0,agent:{},orderPayments:[],orderLocations:{},discountType:1,discountTypeAdd:1,isPrecentage:!1,isPrecentageAdd:!1,totalAddDiscountType:0,totalAddDiscount:0,creditLimit:0},this.orderCode=0,this.mobile=0,this.cityCode=0,this.agentName="",this.pendingCode=0,this.isInner=!1,this.isOrderEdit=!0,this.idForm=0,this.totalPaid=0,this.priceModel=0,this.priceModelIndex=0,this.subtotal=0,this.paidTotal=0,this.VATTotal=0,this.beforeVatTotal=0,this.total=0,this.isResolveList=!0,this.extraDiscountCalc=!1,this.employeeGroups=[],this.notifier=new We.B,this.mainDelay=100,this.loaderSearchShap=D.cX,this.loaderOperationShap=D.$$,this.operationLoader=D.ZW,this.isEditForm=!1,this.showEdit=!1,this.orderTypes=[],this.serviceCategories=[],this.services=[],this.paymentTypes=[],this.isFinished=!1,this.isUpdate=!1,this.isReopen=!1,this.formRequest={},this.form=this.baseService.salesOrderForm}OpenChangInput(n,s){this.showEdit=!0,this.priceModel=s.price,this.priceModelIndex=n}ChangInput(){this.form.orderServices[`${this.priceModelIndex}`].price=this.priceModel,this.showEdit=!1}ngOnDestroy(){this.notifier.next(),this.notifier.complete()}ngOnInit(){localStorage.getItem("isReopen")&&(this.isReopen=!0),this.resetForm(),this.breadCrumbItems=[{label:"layout.sidebar.orders"},{label:"orderManagement.order.title",active:!0,url:"order/list"},{label:this.isEditForm?"general.action.edit":"general.action.register",active:!0}],this.GetOrderLookUp(),this.checkTotal(),this.baseService.checkValidation.subscribe(s=>{this.checkdisableForm()})}GetOrderLookUp(){}getTranslationText(n){let s="";return this.translateService.get(n).pipe((0,N.Q)(this.notifier)).subscribe(r=>{s=r}),s}checkTotal(){this.subtotal=this.form.items.reduce((s,r)=>s+(r.price*r.quantity-r.discount||0),0),this.form.discountAmount<0&&(this.form.discountAmount=0),this.form.discountAmountAdd<0&&(this.form.discountAmountAdd=0);let n=0;this.form.isPrecentage?(this.form.discountAmount=this.form.discountAmount>100?100:this.form.discountAmount,n=this.subtotal-this.subtotal*(+this.form.discountAmount||0)*.01):n=this.subtotal-(+this.form.discountAmount||0),this.form.isPrecentageAdd?(this.form.discountAmountAdd=this.form.discountAmountAdd>100?100:this.form.discountAmountAdd,n-=this.subtotal*(+this.form.discountAmount||0)*.01):n-=+this.form.discountAmountAdd||0,this.beforeVatTotal=n,this.VATTotal=0==n?0:n+.15*n,this.form.total=this.total=this.VATTotal}setFormByOrderCode(n){this.form=n,this.checkTotal(),this.form.isFree&&(this.form.isPrecentage=!0,this.form.discountAmount=100)}onTimeSelected(n){this.form.visitDate=n.dataVisit,this.form.orderTeams=n.selectedTimes}onNavChange(n){}changeTab(){}finishedOrder(n){this.isFinished=!0,this.orderCode=n,this.active=6,this.resetForm()}finishedUpdateOrder(n){this.isFinished=!0,this.orderCode=n,this.active=6}newOrder(){this.resetForm(),this.orderCode=0,this.active=1,this.total=0,this.subtotal=0}editOrder(){this.active=1}resetForm(){this.form=this.baseService.salesOrderForm={clientVisitDate:new Date,id:null,clientLocationId:0,clientId:0,notes:"",items:[],discountAmount:0,discountAmountAdd:0,total:0,agent:{},orderLocations:{},discountType:1,discountTypeAdd:1,isPrecentage:!1,isPrecentageAdd:!1,totalAddDiscountType:0,totalAddDiscount:0,creditLimit:0}}removeService(n){this.form.orderServices.splice(n,1)}updatePrice(n,s){this.form.orderServices[s].price=n.price*n.quantity}decrement(n){let s=this.form.orderServices.find(r=>r.serviceCode==n.serviceCode);s.quantity<=1||(s&&(s.quantity=s.quantity-1),this.checkTotal())}increment(n){let s=this.form.orderServices.find(r=>r.serviceCode==n.serviceCode);s&&(s.quantity=s.quantity+1),this.checkTotal()}quantityChange(n,s){parseInt(n.target.value)<=0&&(this.form.orderServices.find(h=>h.serviceCode==s.serviceCode).quantity=1),this.checkTotal(),this.form.orderServices=[...this.form.orderServices]}checkPrecentageChange(n){this.form.isPrecentage=n.target.checked,this.checkTotal()}checkPrecentageAddChange(n){this.form.isPrecentageAdd=n.target.checked,this.checkTotal()}onIsFreeChange(n){n?(this.form.isPrecentage=!0,this.form.discountAmount=100):(this.form.isPrecentage=!1,this.form.discountAmount=0),this.checkTotal()}orderFinished(n=10){let s={id:0,clientId:this.form.clientId,clientVisitDate:this.datePipe.transform(this.form.clientVisitDate,"yyyy-MM-ddTHH:mm:ss.000"),offerOrderStatus:n,notes:this.form.notes,clientLocationId:this.form.clientLocationId,totalAddDiscount:this.form.discountAmount,totalAddDiscountType:this.form.isPrecentage?2:1,offerOrderDetails:this.form.items.map(r=>({discount:r.discount,discountType:r.discountType,itemId:r.itemId,clientQuantity:r.quantity,id:0,price:r.price,unitId:r.unitId}))};this.ngxLoader.startLoader("order"),this.baseService.register(s).subscribe(r=>{r.success?(this.ngxLoader.stopLoader("order"),this.finishedOrder(r.data.id),this.alertService.success(),localStorage.removeItem("orderCode"),this.checkdisableForm()):(this.alertService.error(),this.ngxLoader.stopLoader("order"))},()=>{this.alertService.error(),this.ngxLoader.stopLoader("order")})}checkdisableForm(){let n=!1;null==this.form.clientId||0==this.form.clientId||null==this.form.clientId||null==this.form.clientLocationId||0==this.form.clientLocationId||null==this.form.clientLocationId||this.form.items.length<=0?n=!0:this.form.items.length>0?(this.form.items.forEach(s=>{0!=s.itemId||(n=!0)}),n=!!n):n=!1,this.disabledStatus=n}openModalRequest(n,s="md"){this.formRequest={id:0,clientId:this.form.clientId},this.modalService.open(n,{centered:!0,size:s})}OnRequestSubmit(){this.ngxLoader.start(this.operationLoader),this.requestPersonSalesService.register(this.formRequest).pipe((0,Z.O)(),(0,te.c)(this.mainDelay),(0,F.Z)(),(0,N.Q)(this.notifier),(0,M.j)(()=>this.ngxLoader.stopLoader(this.operationLoader)),(0,he.W)(n=>(0,Oe.$)(n))).subscribe(n=>{n.success?(this.alertService.success(),this.modalService.dismissAll()):this.alertService.error("general.message."+n.message)},n=>{this.alertService.error("general.message."+n)})}static{this.\u0275fac=function(s){return new(s||o)(e.rXU(R.c$),e.rXU(Ve),e.rXU(tr),e.rXU(me.u),e.rXU(Y.eD),e.rXU(x.vh),e.rXU(O.Bq))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["sales-operation"]],inputs:{form:"form",orderCode:"orderCode",mobile:"mobile",cityCode:"cityCode",agentName:"agentName",pendingCode:"pendingCode",isInner:"isInner",isOrderEdit:"isOrderEdit",isReopen:"isReopen"},decls:139,vars:89,consts:[["formEntity","ngForm"],["customNav","ngbNav"],["discountAmount","ngModel"],["notes","ngModel"],["RequestModal",""],["cost","ngModel"],[1,"row"],[1,"col-xl-12"],[1,"checkout-tab"],[1,"col-12","col-lg-8","col-md-12",3,"ngStyle"],[1,"card","card-summary","card-order-operation","m-0","ribbon-box","material-shadow",2,"border-radius","20px"],[1,"card-body",2,"padding","2rem"],[1,"ribbon-three","ribbon-three-warning"],["fgsColor","rgba(255,255,255,0)",3,"loaderId"],[1,"step-arrow-nav","mt-n3","mx-n3","mb-3"],["ngbNav","","role","tablist",1,"nav","nav-pills","custom-nav","nav-justified",3,"navChange","activeId"],[3,"ngbNavItem"],["ngbNavLink","","data-bs-toggle","tab","role","tab",1,"nav-link","fs-15","p-3"],[1,"ri-user-3-fill","fs-16","p-2","bg-primary-subtle","text-primary","rounded-circle","align-middle","mx-2"],[1,"d-block","mt-2"],["ngbNavContent",""],[1,"ri-user-location-fill","fs-16","p-2","bg-primary-subtle","text-primary","rounded-circle","align-middle","mx-2"],[1,"ri-shopping-cart-fill","fs-16","p-2","bg-primary-subtle","text-primary","rounded-circle","align-middle","mx-2"],[1,"ri-check-double-fill","fs-16","p-2","bg-primary-subtle","text-primary","rounded-circle","align-middle","mx-2"],[1,"tab-content"],[3,"ngbNavOutlet"],[1,"card-footer","text-center",2,"padding",".5rem","position","relative"],[1,"row","justify-content-between"],[1,"col-12","col-md-3"],["type","button",1,"btn","btn-warning","btn-label","waves-effect","waves-light","rounded-pill",3,"click","disabled"],[1,"ri-timer-fill","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","orderManagement.order.orderSavedAsDraft"],["type","button",1,"btn","btn-success","btn-label","waves-effect","waves-light","rounded-pill","mx-1",3,"click","disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","orderManagement.order.orderSaved"],[1,"col-12","col-md-2"],["class","d-inline-block",4,"ngIf"],[1,"col-12","col-lg-4","col-md-12","mt-3","mt-lg-0","mt-md-3","summary"],[1,"card","card-summary","card-summary-pos","card-order-operation","m-0","ribbon-box","material-shadow","right"],[1,"card-body","card-order-operation",2,"padding","2rem"],[1,"table-responsive","table-card","mt-3","overflow-hidden"],[1,"table","table-borderless","align-middle","mb-0"],[4,"ngIf"],["lass","py-0",2,"border-top","hsl(226, 36%, 80%) solid 1px!important"],["colspan","3"],[1,"d-flex","justify-content-between","align-items-center","mb-2"],[1,"w-75","fw-semibold"],[1,"w-25","fw-semibold","text-end"],[1,"col-6","input-group"],["type","button",1,"btn","btn-danger"],["tooltipPosition","top",1,"input-group-text","d-inline",3,"pTooltip"],["type","checkbox","aria-label","Checkbox for following text input",1,"form-check-input",3,"change","checked"],[1,"p-1"],["min","0","InputTirmFilter","","name","discountAmount","type","text","id","discountAmount","required","",1,"form-control","text-right",3,"change","ngModelChange","ngModel"],[1,"d-flex","justify-content-between","align-items-center"],[1,"fw-semibold"],[1,"fw-semibold","text-end"],[1,"table-active","py-0"],[1,"py-0",2,"border-top","hsl(226, 36%, 80%) solid 1px!important"],["colspan","2",1,"fw-semibold"],[1,"fw-semibold","text-end","text-danger"],["colspan","3",1,"py-0"],["InputTirmFilter","","name","notes","type","text","id","notes","required","",1,"form-control","fs-6",3,"ngModelChange","placeholder","ngModel"],[3,"calacTotal","setFormByOrderCode","isOrderEdit","isInner","form"],[3,"isOrderEdit","form"],[3,"CalcTotal","isOrderEdit","form"],[3,"editOrderActiveTab","newOrder","orderCode","form"],[1,"d-inline-block"],[1,"dropdown-custom","d-inline-block"],["type","button",1,"btn","dropbtn","btn-primary","btn-sm","dropdown-custom","arrow-none"],[1,"ri-more-2-fill"],["translate","general.actions"],[1,"dropdown-menu","dropdown-menu-end","dropdown-content",2,"left","0"],[3,"click"],[1,"dropdown-item"],[1,"text-primary","ri-add-box-fill","align-bottom","me-2"],["translate","sales.salesOrder.addRequestLimit"],[1,"text-start","text-muted","fw-semibold","mt-3"],[4,"ngFor","ngForOf"],[3,"ngStyle"],["colspan","3",1,"p-1","m-1"],[1,"row","justify-content-between","align-items-center"],[1,"col-12","col-md-4","h6","d-flex","justify-content-start","align-items-center"],[1,"badge","bg-success-subtle","text-success","me-2"],[1,"d-block","mb-1"],[1,"d-block","mt-1"],[1,"col-12","col-md-4","text-mute","text-center"],[1,"input-step","my-2"],["type","button",1,"minus",3,"click"],["disabled","","type","number","min","1","max","100",1,"product-quantity",3,"change","id","value"],["type","button",1,"plus",3,"click"],[1,"col-12","col-md-4","text-mute","text-right"],[1,"ri-close-fill","text-danger","cursor-pointer",3,"click"],["colspan","3",1,"text-center","text-danger"],[1,"text-start","text-muted","fw-semibold"],["colspan","2",1,"text-end"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"hasProgressBar","fgsType","loaderId"],[3,"submit"],[1,"mb-2"],["for","cost","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","cost","type","text","id","cost",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],["for","notes","translate","",1,"fw-bold","form-label"],["rows","2","InputTirmFilter","","name","notes","type","text","id","notes",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,"text-center"],["type","submit","type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],["translate","general.action.save"],["translate","",1,"text-danger","text-center"]],template:function(s,r){if(1&s){const d=e.RV6();e.j41(0,"div",6)(1,"div",7)(2,"div")(3,"div",8)(4,"div",6)(5,"div",9)(6,"div",10)(7,"div",11)(8,"span",12)(9,"span"),e.EFF(10),e.nI1(11,"translate"),e.k0s()(),e.nrm(12,"ngx-ui-loader",13),e.j41(13,"div",14)(14,"form",null,0)(16,"ul",15,1),e.bIt("navChange",function(u){return e.eBV(d),e.Njj(r.onNavChange(u))}),e.j41(18,"li",16)(19,"a",17),e.nrm(20,"i",18),e.j41(21,"span",19),e.EFF(22),e.nI1(23,"translate"),e.k0s()(),e.DNE(24,hi,1,3,"ng-template",20),e.k0s(),e.j41(25,"li",16)(26,"a",17),e.nrm(27,"i",21),e.j41(28,"span",19),e.EFF(29),e.nI1(30,"translate"),e.k0s()(),e.DNE(31,gi,1,2,"ng-template",20),e.k0s(),e.j41(32,"li",16)(33,"a",17),e.nrm(34,"i",22),e.j41(35,"span",19),e.EFF(36),e.nI1(37,"translate"),e.k0s()(),e.DNE(38,fi,1,2,"ng-template",20),e.k0s(),e.j41(39,"li",16)(40,"a",17),e.nrm(41,"i",23),e.j41(42,"span",19),e.EFF(43),e.nI1(44,"translate"),e.k0s()(),e.DNE(45,_i,1,2,"ng-template",20),e.k0s()(),e.j41(46,"div",24),e.nrm(47,"div",25),e.k0s()()()(),e.j41(48,"div",26)(49,"div",27)(50,"div",28)(51,"button",29),e.bIt("click",function(){return e.eBV(d),e.Njj(r.orderFinished(0))}),e.nrm(52,"i",30)(53,"span",31),e.k0s()(),e.j41(54,"div",28)(55,"button",32),e.bIt("click",function(){return e.eBV(d),e.Njj(r.orderFinished())}),e.nrm(56,"i",33)(57,"span",34),e.k0s()(),e.j41(58,"div",35),e.DNE(59,bi,10,0,"span",36),e.k0s()()()()(),e.j41(60,"div",37)(61,"div",38)(62,"div",39)(63,"span",12)(64,"span"),e.EFF(65),e.nI1(66,"translate"),e.k0s()(),e.j41(67,"div",40)(68,"table",41)(69,"tbody"),e.DNE(70,Ci,5,4,"ng-container",42)(71,Si,4,3,"tr",42)(72,js,6,3,"tr",42),e.j41(73,"tr",43)(74,"td",44)(75,"div",45)(76,"div",46),e.EFF(77),e.nI1(78,"translate"),e.k0s(),e.j41(79,"div",47),e.EFF(80),e.nI1(81,"translate"),e.k0s()(),e.j41(82,"div",48)(83,"button",49),e.EFF(84),e.nI1(85,"translate"),e.k0s(),e.j41(86,"div",50),e.nI1(87,"translate"),e.j41(88,"input",51),e.bIt("change",function(u){return e.eBV(d),e.Njj(r.checkPrecentageChange(u))}),e.k0s(),e.j41(89,"span",52),e.EFF(90,"%"),e.k0s()(),e.j41(91,"input",53,2),e.bIt("change",function(){return e.eBV(d),e.Njj(r.checkTotal())}),e.mxI("ngModelChange",function(u){return e.eBV(d),e.DH7(r.form.discountAmount,u)||(r.form.discountAmount=u),e.Njj(u)}),e.k0s()()()(),e.j41(93,"tr",43)(94,"td",44)(95,"div",54)(96,"div",55),e.EFF(97),e.nI1(98,"translate"),e.k0s(),e.j41(99,"div",56),e.EFF(100),e.nI1(101,"translate"),e.k0s()(),e.j41(102,"div",54)(103,"div",55),e.EFF(104),e.nI1(105,"translate"),e.k0s(),e.j41(106,"div",56),e.EFF(107),e.nI1(108,"translate"),e.k0s()(),e.j41(109,"div",54)(110,"div",55),e.EFF(111),e.nI1(112,"translate"),e.k0s(),e.j41(113,"div",56),e.EFF(114),e.nI1(115,"translate"),e.k0s()()()(),e.j41(116,"tr",57)(117,"td",44)(118,"div",45)(119,"div",55),e.EFF(120),e.nI1(121,"translate"),e.k0s(),e.j41(122,"div",56),e.EFF(123),e.nI1(124,"translate"),e.k0s()()()(),e.j41(125,"tr",58)(126,"td",59),e.EFF(127),e.nI1(128,"translate"),e.k0s(),e.j41(129,"td",60),e.EFF(130),e.nI1(131,"translate"),e.k0s()(),e.j41(132,"tr",57)(133,"td",61)(134,"textarea",62,3),e.nI1(136,"translate"),e.mxI("ngModelChange",function(u){return e.eBV(d),e.DH7(r.form.notes,u)||(r.form.notes=u),e.Njj(u)}),e.k0s()()()()()()()()()()()()()(),e.DNE(137,ys,24,7,"ng-template",null,4,e.C5r)}if(2&s){const d=e.sdS(17);e.R7$(5),e.Y8G("ngStyle",e.l_i(86,sn,"en"==r.language,"en"==r.language)),e.R7$(5),e.JRh(e.bMT(11,44,"orderManagement.order.addOrders")),e.R7$(2),e.Y8G("loaderId","order"),e.R7$(4),e.Y8G("activeId",r.active),e.R7$(2),e.Y8G("ngbNavItem",1),e.R7$(4),e.SpI(" ",e.bMT(23,46,"orderManagement.order.clientInfo")," "),e.R7$(3),e.Y8G("ngbNavItem",2),e.R7$(4),e.SpI(" ",e.bMT(30,48,"orderManagement.order.locations")," "),e.R7$(3),e.Y8G("ngbNavItem",3),e.R7$(4),e.SpI(" ",e.bMT(37,50,"orderManagement.order.items")," "),e.R7$(3),e.Y8G("ngbNavItem",6),e.R7$(4),e.SpI(" ",e.bMT(44,52,"orderManagement.order.finish")," "),e.R7$(4),e.Y8G("ngbNavOutlet",d),e.R7$(4),e.Y8G("disabled",r.disabledStatus),e.R7$(4),e.Y8G("disabled",r.disabledStatus),e.R7$(4),e.Y8G("ngIf",r.form.clientId>0),e.R7$(6),e.JRh(e.bMT(66,54,"orderManagement.order.orderSummary")),e.R7$(5),e.Y8G("ngIf",r.form.items.length>0),e.R7$(),e.Y8G("ngIf",0==r.form.items.length),e.R7$(),e.Y8G("ngIf",0==r.form.items.length),e.R7$(5),e.JRh(e.bMT(78,56,"orderManagement.order.SubTotal")),e.R7$(3),e.Lme("",r.subtotal," ",e.bMT(81,58,"orderManagement.order.currancy"),""),e.R7$(4),e.SpI(" ",e.bMT(85,60,"orderManagement.order.Discount")," "),e.R7$(2),e.FS9("pTooltip",e.bMT(87,62,"orderManagement.order.discount")),e.R7$(2),e.Y8G("checked",r.form.isPrecentage),e.R7$(3),e.R50("ngModel",r.form.discountAmount),e.R7$(6),e.JRh(e.bMT(98,64,"orderManagement.order.PriceAfterDisaccount")),e.R7$(3),e.Lme(" ",r.beforeVatTotal.toFixed(2)," ",e.bMT(101,66,"orderManagement.order.currancy")," "),e.R7$(4),e.JRh(e.bMT(105,68,"orderManagement.order.PriceBeforeVat")),e.R7$(3),e.Lme(" ",r.beforeVatTotal.toFixed(2)," ",e.bMT(108,70,"orderManagement.order.currancy")," "),e.R7$(4),e.SpI("",e.bMT(112,72,"orderManagement.order.tax")," (15%)"),e.R7$(3),e.Lme("",(r.VATTotal-r.beforeVatTotal).toFixed(2)," ",e.bMT(115,74,"orderManagement.order.currancy")," "),e.R7$(6),e.JRh(e.bMT(121,76,"orderManagement.order.VAT")),e.R7$(3),e.Lme("",r.VATTotal.toFixed(2)," ",e.bMT(124,78,"orderManagement.order.currancy"),""),e.R7$(4),e.SpI("",e.bMT(128,80,"orderManagement.order.creditLimit"),": "),e.R7$(3),e.Lme("",r.form.creditLimit," ",e.bMT(131,82,"orderManagement.order.currancy"),""),e.R7$(4),e.FS9("placeholder",e.bMT(136,84,"orderManagement.order.notes")),e.R50("ngModel",r.form.notes)}},dependencies:[x.Sq,x.bT,x.B3,O.Um,O.X9,O.sy,O.Gx,O.Ri,O.WA,O.m_,m.qT,m.me,m.BC,m.cb,m.YS,m.vS,m.cV,R.Mm,_e.m,Y.Cv,Bt.m,Vn,Cs,ot,Tn,R.D9],encapsulation:2})}}return o})(),Ti=(()=>{class o{constructor(){this.breadCrumbItems=[],this.addOrders="orderManagement.order.addOrders"}ngOnInit(){}static{this.\u0275fac=function(s){return new(s||o)}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["order-register"]],decls:1,vars:0,template:function(s,r){1&s&&e.nrm(0,"sales-operation")},dependencies:[rr],encapsulation:2})}}return o})();var ji=j(56701),Xn=j(26364),Qe=j(75622);let xs=(()=>{class o extends Rt.d{constructor(n){super(n,kt.c.apiUrl+"ShippingTruck/")}static{this.\u0275fac=function(s){return new(s||o)(e.KVO(At.Qq))}}static{this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var lt=j(91426),Fs=j(53928),dt=j(40724),ct=j(88148),$e=j(91580),mt=j(5779);function Ii(o,g){1&o&&(e.j41(0,"tr",25)(1,"th",26),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",27),e.nrm(4,"i",28),e.EFF(5," sales.shippingTruck.name "),e.k0s(),e.j41(6,"th",29),e.nrm(7,"i",28),e.EFF(8," sales.shippingTruck.truckNumber "),e.k0s(),e.j41(9,"th",30),e.nrm(10,"i",28),e.EFF(11," sales.shippingTruck.truckDriverName "),e.k0s(),e.j41(12,"th",31),e.EFF(13," sales.shippingTruck.cityName "),e.k0s(),e.j41(14,"th",32),e.nrm(15,"i",28),e.EFF(16," general.table.isActive "),e.k0s(),e.nrm(17,"th",31),e.k0s())}function Rs(o,g){if(1&o&&(e.qex(0),e.j41(1,"span",42),e.EFF(2),e.k0s(),e.bVm()),2&o){const n=g.$implicit;e.R7$(2),e.JRh(n.cityName)}}function ks(o,g){1&o&&e.nrm(0,"span",43)}function Os(o,g){1&o&&e.nrm(0,"span",44)}function Ms(o,g){if(1&o&&(e.nrm(0,"i",45),e.EFF(1),e.nI1(2,"date"),e.nrm(3,"br")(4,"i",46),e.EFF(5),e.nI1(6,"date"),e.nrm(7,"br")(8,"i",47),e.EFF(9)),2&o){const n=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.i5U(2,3,n.createdDate,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",e.i5U(6,6,n.updatedDate,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",n.creatorName," ")}}function ws(o,g){if(1&o){const n=e.RV6();e.j41(0,"tr",33)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.DNE(10,Rs,3,1,"ng-container",34),e.k0s(),e.j41(11,"td"),e.DNE(12,ks,1,0,"span",35)(13,Os,1,0,"span",36),e.k0s(),e.j41(14,"td"),e.DNE(15,Ms,10,9,"ng-template",null,3,e.C5r),e.nrm(17,"i",37),e.j41(18,"button",38),e.bIt("click",function(){const r=e.eBV(n).$implicit,d=e.XpG(),h=e.sdS(20);return e.Njj(d.EditModel(r.id,h))}),e.nrm(19,"i",39),e.k0s(),e.j41(20,"button",40),e.bIt("click",function(){const r=e.eBV(n).$implicit,d=e.XpG(),h=e.sdS(22);return e.Njj(d.openModal(r.id,h))}),e.nrm(21,"i",41),e.k0s()()()}if(2&o){const n=g.$implicit,s=g.rowIndex,r=e.sdS(16);e.R7$(2),e.JRh(s+1),e.R7$(2),e.JRh(n.name),e.R7$(2),e.JRh(n.truckNumber),e.R7$(2),e.JRh(n.truckDriverName),e.R7$(2),e.Y8G("ngForOf",n.cities),e.R7$(2),e.Y8G("ngIf",n.isActive),e.R7$(),e.Y8G("ngIf",!n.isActive),e.R7$(4),e.Y8G("ngbTooltip",r)}}function Es(o,g){1&o&&(e.j41(0,"div",48),e.EFF(1," general.table.noData "),e.k0s())}function Ns(o,g){if(1&o){const n=e.RV6();e.j41(0,"div",49)(1,"div",50),e.nrm(2,"ngb-pagination-info",51),e.j41(3,"table-length",52),e.bIt("lengthChange",function(r){e.eBV(n);const d=e.XpG();return e.Njj(d.ListItemChange(r))}),e.k0s()(),e.j41(4,"div",53)(5,"ngb-pagination",54),e.bIt("pageChange",function(r){e.eBV(n);const d=e.XpG();return e.Njj(d.pageChanged(r))}),e.mxI("pageChange",function(r){e.eBV(n);const d=e.XpG();return e.DH7(d.pagination.pageNumber,r)||(d.pagination.pageNumber=r),e.Njj(r)}),e.k0s()()()}if(2&o){const n=e.XpG();e.R7$(2),e.Y8G("pagination",n.pagination),e.R7$(),e.Y8G("lengthTable",n.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",n.pagination.pageSize)("collectionSize",n.pagination.totalItems),e.R50("page",n.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function Ds(o,g){1&o&&(e.j41(0,"span",80),e.EFF(1,"general.action.register "),e.k0s())}function sr(o,g){1&o&&(e.j41(0,"span",80),e.EFF(1,"general.action.edit "),e.k0s())}function Ls(o,g){1&o&&(e.j41(0,"div",81),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function Gs(o,g){1&o&&(e.j41(0,"div",81),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function Vs(o,g){1&o&&(e.j41(0,"div",81),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function As(o,g){if(1&o){const n=e.RV6();e.j41(0,"div",55)(1,"div",56)(2,"h4",57),e.DNE(3,Ds,2,0,"span",58)(4,sr,2,0,"span",58),e.j41(5,"span",59),e.EFF(6),e.k0s()(),e.j41(7,"button",60),e.bIt("click",function(){const r=e.eBV(n).$implicit;return e.Njj(r.dismiss("Cross click"))}),e.k0s()(),e.j41(8,"div",61),e.nrm(9,"ngx-ui-loader",18),e.j41(10,"form",62,4),e.bIt("submit",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.OnSubmit())}),e.j41(12,"div",63)(13,"label",64),e.EFF(14,"sales.shippingTruck.name"),e.k0s(),e.j41(15,"input",65,5),e.mxI("ngModelChange",function(r){e.eBV(n);const d=e.XpG();return e.DH7(d.form.name,r)||(d.form.name=r),e.Njj(r)}),e.k0s(),e.DNE(17,Ls,2,0,"div",66),e.k0s(),e.j41(18,"div",63)(19,"label",67),e.EFF(20,"sales.shippingTruck.truckNumber"),e.k0s(),e.j41(21,"input",68,6),e.mxI("ngModelChange",function(r){e.eBV(n);const d=e.XpG();return e.DH7(d.form.truckNumber,r)||(d.form.truckNumber=r),e.Njj(r)}),e.k0s(),e.DNE(23,Gs,2,0,"div",66),e.k0s(),e.j41(24,"div",63)(25,"label",69),e.EFF(26,"sales.shippingTruck.driver"),e.k0s(),e.j41(27,"ng-select",70,7),e.mxI("ngModelChange",function(r){e.eBV(n);const d=e.XpG();return e.DH7(d.form.truckDriverId,r)||(d.form.truckDriverId=r),e.Njj(r)}),e.k0s(),e.DNE(29,Vs,2,0,"div",66),e.k0s(),e.j41(30,"div",71)(31,"label",69),e.EFF(32,"sales.shippingTruck.cities"),e.k0s(),e.j41(33,"ng-select",72),e.mxI("ngModelChange",function(r){e.eBV(n);const d=e.XpG();return e.DH7(d.form.cities,r)||(d.form.cities=r),e.Njj(r)}),e.k0s()(),e.j41(34,"div",73)(35,"label",74),e.EFF(36,"general.table.isActive"),e.k0s(),e.j41(37,"p-inputSwitch",75),e.mxI("ngModelChange",function(r){e.eBV(n);const d=e.XpG();return e.DH7(d.form.isActive,r)||(d.form.isActive=r),e.Njj(r)}),e.k0s()(),e.j41(38,"div",76)(39,"button",77),e.nrm(40,"i",78)(41,"span",79),e.k0s()()()()()}if(2&o){const n=e.sdS(11),s=e.sdS(16),r=e.sdS(22),d=e.sdS(28),h=e.XpG();e.R7$(3),e.Y8G("ngIf",!h.isEditForm),e.R7$(),e.Y8G("ngIf",h.isEditForm),e.R7$(2),e.JRh(h.titleOperation),e.R7$(3),e.Y8G("hasProgressBar",!1)("fgsType",h.loaderOperationShap)("loaderId",h.operationLoader),e.R7$(6),e.R50("ngModel",h.form.name),e.R7$(2),e.Y8G("ngIf",s.invalid&&s.touched),e.R7$(4),e.R50("ngModel",h.form.truckNumber),e.R7$(2),e.Y8G("ngIf",r.invalid&&r.touched),e.R7$(4),e.Y8G("items",h.employees)("multiple",!1),e.R50("ngModel",h.form.truckDriverId),e.R7$(2),e.Y8G("ngIf",d.invalid&&d.touched),e.R7$(4),e.Y8G("items",h.cities)("multiple",!0),e.R50("ngModel",h.form.cities),e.R7$(4),e.R50("ngModel",h.form.isActive),e.R7$(2),e.Y8G("disabled",!n.valid)}}function Bs(o,g){if(1&o){const n=e.RV6();e.j41(0,"delete-modal",82),e.bIt("deleteConfirm",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.DeleteConfirmSoft())})("dismiss",function(){const r=e.eBV(n).$implicit;return e.Njj(r.dismiss())}),e.k0s()}}let $s=(()=>{class o extends Qe.w{constructor(n,s,r,d,h,u,E,ce,le,re,q){super(n,s,E,r,d,h,u),this.baseService=r,this.excelService=le,this.employeeService=re,this.cityService=q,this.title="sales.shippingTruck.title",this.titleOperation="sales.shippingTruck.titleOperation",this.keySelected="",this.assignUsers=[],this.times=[],this.employees=[],this.searchForm={},this.cities=[],this.configRoute(),this.getEmployees(),this.getCities()}OnSearch(n){this.ngxLoader.startLoader(D.a7),this.loadentities()}onSearch(){this.ngxLoader.startLoader(D.a7),this.loadentities()}configRoute(){this.routerActive.data.pipe((0,N.Q)(this.notifier)).subscribe(n=>{this.entities=n.data.data,this.pagination.totalItems=n.data.totalItems},()=>{this.alertService.error()})}getEmployees(){this.employeeService.getDropDown().pipe((0,N.Q)(this.notifier)).subscribe(n=>{this.employees=n.data},()=>{this.alertService.error()})}getCities(){this.cityService.getDropDown().pipe((0,N.Q)(this.notifier)).subscribe(n=>{this.cities=n.data},()=>{this.alertService.error()})}mapExcel(){let n=[];return this.entities?.forEach(s=>{n.push({workTime:s.workTime,isActive:this.getTranslationText("general.table.active")})}),n}mapRegisterForm(n){let s={...n};return s.id=0,s.cities=s.cities.map(r=>({cityId:r,shippingTruckId:0})),s}mapForm(n){let s={...n};return s.cities=s.cities.map(r=>({cityId:r,shippingTruckId:s.id})),s}onExportXlsx(){let n=this.mapExcel();this.excelService.exportAsExcelFile(n,"Service Type",[])}editEntity(){let n=this.mapForm(this.form);this.baseService.editPut(n.id,n).pipe((0,Z.O)(),(0,te.c)(this.mainDelay),(0,F.Z)(),(0,N.Q)(this.notifier),(0,M.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(s=>{s.success?this.submitFunished():this.alertService.error("general.message."+s.message)},s=>{this.alertService.error("general.message."+s)})}static{this.\u0275fac=function(s){return new(s||o)(e.rXU(U.nX),e.rXU(R.c$),e.rXU(xs),e.rXU(me.u),e.rXU(x.vh),e.rXU(Y.eD),e.rXU(O.Bq),e.rXU(e.gRc),e.rXU(lt.V),e.rXU(Fs.O),e.rXU(Be.h))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-shipping-trucks"]],features:[e.Vt3],decls:23,vars:16,consts:[["tableMaster",""],["operation",""],["deleteModal",""],["tooltipContent",""],["formEntity","ngForm"],["name","ngModel"],["truckNumber","ngModel"],["truckDriverId","ngModel"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],[3,"reset","search","addNew","showExport","totalItems","title"],["control",""],[1,"col-md-3","mb-2"],[1,"search-box"],["InputTirmFilter","","type","search","id","filterValue","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],[1,"card-body"],[3,"hasProgressBar","fgsType","loaderId"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["translate","",2,"width",".5%"],["pSortableColumn","name","translate","",2,"width","10%"],[1,"ri-expand-up-down-line"],["pSortableColumn","truckNumber","translate","",2,"width","10%"],["pSortableColumn","truckDriverId","translate","",2,"width","10%"],["translate","",2,"width","10%"],["pSortableColumn","isActive","translate","",2,"width","8%"],[1,"fs-5"],[4,"ngFor","ngForOf"],["class","badge bg-success-subtle text-success p-2","translate","general.table.active",4,"ngIf"],["class","badge bg-danger-subtle text-danger p-2","translate","general.table.noActive",4,"ngIf"],["tooltipPosition","top",1,"mdi","mdi-cog-outline","text-muted","fs-16","align-middle","me-1",3,"ngbTooltip"],[1,"btn","btn-sm","btn-soft-info","edit-list","mx-2",3,"click"],[1,"ri-pencil-fill","align-bottom","mx-1"],[1,"btn","btn-sm","btn-soft-danger","remove-list",3,"click"],[1,"ri-delete-bin-5-fill","align-bottom"],[1,"badge","badge-pill","bg-primary","mx-1"],["translate","general.table.active",1,"badge","bg-success-subtle","text-success","p-2"],["translate","general.table.noActive",1,"badge","bg-danger-subtle","text-danger","p-2"],[1,"ri-history-fill","text-warning"],[1,"ri-history-fill","text-danger"],[1,"ri-user-location-fill","text-primary"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["class","fw-bold fs-4","translate","",4,"ngIf"],["translate",""],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"submit"],[1,"mb-3"],["for","name","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","name","type","text","id","name",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],["for","truckNumber","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","truckNumber","type","text","id","truckNumber",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["translate","",1,"required","fw-bold","form-label","w-100"],["name","truckDriverId","bindValue","code","bindLabel","name","required","",3,"ngModelChange","items","multiple","ngModel"],[1,"col-12","mb-1"],["name","cities","bindValue","code","bindLabel","name",3,"ngModelChange","items","multiple","ngModel"],[1,"form-check"],["for","isActive","translate","",1,"fw-bold","form-label","w-100"],["name","isActive","inputId","isActive",3,"ngModelChange","ngModel"],[1,"text-center"],["type","submit","type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],["translate","",1,"fw-bold","fs-4"],["translate","",1,"text-danger","text-center"],[3,"deleteConfirm","dismiss"]],template:function(s,r){if(1&s){const d=e.RV6();e.j41(0,"div",8)(1,"div",9)(2,"div",10)(3,"base-filter",11),e.bIt("reset",function(){return e.eBV(d),e.Njj(r.onReset())})("search",function(){return e.eBV(d),e.Njj(r.onSearch())})("addNew",function(){e.eBV(d);const u=e.sdS(20);return e.Njj(r.openModalTitle(u,"md"))}),e.qex(4,12),e.j41(5,"div",13)(6,"div",14)(7,"input",15),e.nI1(8,"translate"),e.mxI("ngModelChange",function(u){return e.eBV(d),e.DH7(r.pagination.filterValue,u)||(r.pagination.filterValue=u),e.Njj(u)}),e.k0s(),e.nrm(9,"i",16),e.k0s()(),e.bVm(),e.k0s(),e.j41(10,"div",17),e.nrm(11,"ngx-ui-loader",18),e.j41(12,"div",19)(13,"p-table",20,0),e.bIt("onLazyLoad",function(u){return e.eBV(d),e.Njj(r.tableChange(u))})("selectionChange",function(u){return e.eBV(d),e.Njj(r.onSelectionChange(u))}),e.DNE(15,Ii,18,0,"ng-template",21)(16,ws,22,8,"ng-template",22),e.k0s()(),e.DNE(17,Es,2,0,"div",23)(18,Ns,6,8,"div",24),e.k0s()()()(),e.DNE(19,As,42,19,"ng-template",null,1,e.C5r)(21,Bs,1,0,"ng-template",null,2,e.C5r)}2&s&&(e.R7$(3),e.Y8G("showExport",!1)("totalItems",r.pagination.totalItems)("title",r.title),e.R7$(4),e.FS9("placeholder",e.bMT(8,14,"task.tasklist.subject")),e.R50("ngModel",r.pagination.filterValue),e.R7$(4),e.Y8G("hasProgressBar",!1)("fgsType",r.loaderSearchShap)("loaderId",r.searchLoader),e.R7$(2),e.Y8G("value",r.entities)("rows",r.pagination.pageSize)("lazy",!0)("totalRecords",r.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",r.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",r.pagination.totalItems>0))},dependencies:[x.Sq,x.bT,m.qT,m.me,m.BC,m.cb,m.YS,m.vS,m.cV,O.s5,dt.b,jt.w,ct.p,$e.g,R.Mm,G.XI,mt.Ei,G.Tg,Tt.HW,Y.Cv,Ee.vr,O.md,_e.m,x.vh,R.D9],encapsulation:2})}}return o})();function Un(o,g){1&o&&e.nrm(0,"app-shipping-trucks")}let Xs=(()=>{class o{constructor(){this.title="sales.salesSetting.title"}ngOnInit(){this.breadCrumbItems=[]}static{this.\u0275fac=function(s){return new(s||o)}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-sales-setting"]],decls:15,vars:7,consts:[["Arrow","ngbNav"],[3,"title","breadcrumbItems"],[1,"col-12"],[1,"card"],[1,"card-body"],["ngbNav","",1,"nav","nav-pills","arrow-navtabs","nav-success","bg-light","mb-3",3,"activeId"],[3,"ngbNavItem"],["ngbNavLink",""],[1,"d-block","d-sm-none"],[1,"mdi","mdi-home-variant"],["translate","sales.shippingTruck.title",1,"d-sm-block"],["ngbNavContent",""],[1,"tab-content","text-muted"],[3,"ngbNavOutlet"]],template:function(s,r){if(1&s&&(e.nrm(0,"app-breadcrumbs",1),e.nI1(1,"translate"),e.j41(2,"div",2)(3,"div",3)(4,"div",4)(5,"ul",5,0)(7,"li",6)(8,"a",7)(9,"span",8),e.nrm(10,"i",9),e.k0s(),e.nrm(11,"span",10),e.k0s(),e.DNE(12,Un,1,0,"ng-template",11),e.k0s()(),e.j41(13,"div",12),e.nrm(14,"div",13),e.k0s()()()()),2&s){const d=e.sdS(6);e.FS9("title",e.bMT(1,5,r.title)),e.Y8G("breadcrumbItems",r.breadCrumbItems),e.R7$(5),e.Y8G("activeId",1),e.R7$(2),e.Y8G("ngbNavItem",1),e.R7$(7),e.Y8G("ngbNavOutlet",d)}},dependencies:[O.Um,O.X9,O.sy,O.Gx,O.Ri,O.WA,O.m_,Xn.m,R.Mm,$s,R.D9],encapsulation:2})}}return o})();var pt=j(62984),$t=j(70053),Xt=j(79284),Ut=j(16229),Mt=j(12822),jn=j(50204),ar=j(14221);function Us(o,g){1&o&&(e.j41(0,"tr",27),e.nrm(1,"th",28),e.j41(2,"th",29),e.EFF(3,"#"),e.k0s(),e.j41(4,"th",30),e.nrm(5,"i",31),e.EFF(6," orderManagement.order.orderCode "),e.k0s(),e.j41(7,"th",32),e.nrm(8,"i",31),e.EFF(9," orderManagement.order.creation "),e.k0s(),e.j41(10,"th",33),e.EFF(11," orderManagement.order.status "),e.k0s(),e.j41(12,"th",34),e.nrm(13,"i",31),e.EFF(14," orderManagement.order.agentName "),e.k0s(),e.j41(15,"th",35),e.EFF(16," orderManagement.order.assignTo "),e.k0s(),e.j41(17,"th",36),e.nrm(18,"i",31),e.EFF(19," sales.salesOrder.clientVisitDate "),e.k0s(),e.j41(20,"th",37),e.nrm(21,"i",31),e.EFF(22," sales.salesOrder.totalQuantity "),e.k0s(),e.j41(23,"th",38),e.nrm(24,"i",31),e.EFF(25," sales.salesOrder.totalDiscount "),e.k0s(),e.j41(26,"th",39),e.nrm(27,"i",31),e.EFF(28," sales.salesOrder.netPrice "),e.k0s(),e.nrm(29,"th",40),e.k0s())}function Ps(o,g){1&o&&(e.j41(0,"button",50),e.nrm(1,"i",51)(2,"span",52),e.k0s())}function Ys(o,g){if(1&o){const n=e.RV6();e.j41(0,"tr",41)(1,"td"),e.nrm(2,"button",42),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td",43),e.bIt("click",function(){const r=e.eBV(n).$implicit,d=e.XpG(),h=e.sdS(40);return e.Njj(d.openModalClient(r,h,"lg"))}),e.j41(6,"bdi",44),e.EFF(7),e.k0s()(),e.j41(8,"td")(9,"span",45),e.EFF(10),e.k0s(),e.EFF(11),e.nI1(12,"date"),e.k0s(),e.j41(13,"td")(14,"span"),e.nrm(15,"span",46),e.k0s()(),e.j41(16,"td",43),e.bIt("click",function(){const r=e.eBV(n).$implicit,d=e.XpG(),h=e.sdS(38);return e.Njj(d.openModalClient(r,h))}),e.j41(17,"span",47),e.EFF(18),e.k0s()(),e.j41(19,"td"),e.EFF(20),e.k0s(),e.j41(21,"td"),e.EFF(22),e.nI1(23,"date"),e.k0s(),e.j41(24,"td"),e.EFF(25),e.k0s(),e.j41(26,"td"),e.EFF(27),e.k0s(),e.j41(28,"td"),e.EFF(29),e.k0s(),e.j41(30,"td"),e.nrm(31,"i",48),e.DNE(32,Ps,3,0,"button",49),e.k0s()()}if(2&o){const n=g.$implicit,s=g.rowIndex,r=g.expanded,d=e.XpG();e.R7$(2),e.Y8G("pRowToggler",n)("ngClass",r?" ri-arrow-down-s-line":"  ri-arrow-up-s-line"),e.R7$(2),e.JRh(s+1),e.R7$(3),e.SpI("#SO#",n.id,""),e.R7$(3),e.SpI("",n.creatorName," "),e.R7$(),e.SpI(" ",e.i5U(12,17,n.creationTime,"yyyy-MM-dd")," "),e.R7$(3),e.ZvI("badge ",d.getStatus(n),""),e.R7$(),e.FS9("translate","sales.salesOrder."+n.offerOrderStatusValue),e.R7$(3),e.SpI("",n.clientName," "),e.R7$(2),e.JRh(n.shippingTruckName),e.R7$(2),e.SpI(" ",e.i5U(23,20,n.clientVisitDate,"yyyy-MM-dd"),""),e.R7$(3),e.JRh(n.totalQuantity),e.R7$(2),e.JRh(n.totalDiscount),e.R7$(2),e.JRh(n.netPrice),e.R7$(3),e.Y8G("ngIf",d.checkEdit(n))}}function zs(o,g){if(1&o&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.nI1(11,"translate"),e.k0s(),e.j41(12,"td"),e.EFF(13),e.k0s(),e.j41(14,"td"),e.EFF(15),e.k0s()()),2&o){const n=g.$implicit;e.R7$(2),e.JRh(n.itemName),e.R7$(2),e.JRh(n.unitName),e.R7$(2),e.JRh(n.clientQuantity),e.R7$(2),e.JRh(n.approvedQuantity),e.R7$(2),e.SpI("",e.bMT(11,7,"sales.salesOrder."+n.discountTypeValue)," "),e.R7$(3),e.JRh(n.discount),e.R7$(2),e.JRh(n.price)}}function or(o,g){if(1&o&&(e.j41(0,"tr")(1,"td",53)(2,"div")(3,"table",54)(4,"thead")(5,"tr",55),e.nrm(6,"th",56)(7,"th",57)(8,"th",58)(9,"th",59)(10,"th",60)(11,"th",61)(12,"th",62),e.k0s()(),e.j41(13,"tbody"),e.DNE(14,zs,16,9,"tr",63),e.k0s()()()()()),2&o){const n=g.$implicit;e.R7$(14),e.Y8G("ngForOf",n.offerOrderDetails)}}function lr(o,g){1&o&&(e.j41(0,"div",64),e.EFF(1," general.table.noData "),e.k0s())}function dr(o,g){if(1&o){const n=e.RV6();e.j41(0,"div",65)(1,"div",66),e.nrm(2,"ngb-pagination-info",67),e.j41(3,"table-length",68),e.bIt("lengthChange",function(r){e.eBV(n);const d=e.XpG();return e.Njj(d.ListItemChange(r))}),e.k0s()(),e.j41(4,"div",69)(5,"ngb-pagination",70),e.bIt("pageChange",function(r){e.eBV(n);const d=e.XpG();return e.Njj(d.pageChanged(r))}),e.mxI("pageChange",function(r){e.eBV(n);const d=e.XpG();return e.DH7(d.pagination.pageNumber,r)||(d.pagination.pageNumber=r),e.Njj(r)}),e.k0s()()()}if(2&o){const n=e.XpG();e.R7$(2),e.Y8G("pagination",n.pagination),e.R7$(),e.Y8G("lengthTable",n.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",n.pagination.pageSize)("collectionSize",n.pagination.totalItems),e.R50("page",n.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function yi(o,g){if(1&o){const n=e.RV6();e.j41(0,"delete-modal",71),e.bIt("deleteConfirm",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.DeleteConfirm())})("dismiss",function(){const r=e.eBV(n).$implicit;return e.Njj(r.dismiss())}),e.k0s()}}function qs(o,g){1&o&&e.nrm(0,"client-profile-main",72)}function cr(o,g){if(1&o){const n=e.RV6();e.j41(0,"app-all-orders-details",73),e.bIt("dismiss",function(){const r=e.eBV(n).$implicit;return e.Njj(r.dismiss())}),e.k0s()}if(2&o){const n=e.XpG();e.Y8G("orderDetails",n.orderSelected)}}function Pn(o,g){if(1&o&&e.nrm(0,"order-operation",74),2&o){const n=e.XpG();e.Y8G("isOrderEdit",n.isOrderEdit)("isInner",!0)("orderCode",n.clientSelected)}}function mr(o,g){if(1&o){const n=e.RV6();e.j41(0,"order-timeline",75),e.bIt("dismiss",function(){const r=e.eBV(n).$implicit;return e.Njj(r.dismiss())}),e.k0s()}if(2&o){const n=e.XpG();e.Y8G("orderSelected",n.orderSelected)}}let Hs=(()=>{class o extends Qe.w{constructor(n,s,r,d,h,u,E,ce,le,re,q,fe,be,Ie,Re){super(n,s,E,r,d,h,u),this.baseService=r,this.authDaamService=ce,this.teamService=le,this.workTimeService=re,this.excelService=q,this.cityService=fe,this.districtService=be,this.channelService=Ie,this.router=Re,this.title="orderManagement.order.title",this.titleOperation="orderManagement.order.titleOperation",this.keySelected="",this.assignUsers=[],this.times=[],this.employees=[],this.searchForm={},this.isResolveList=!0,this.employeeTypes=[{id:1,name:"employeeTeam"},{id:2,name:"managment"},{id:3,name:"customerService"}],this.employeeGroups=[],this.activeindex="2",this.active=2,this.formPassword={},this.roles=[],this.teams=[],this.workTimes=[],this.userTypes=[],this.actives=[{id:!0,name:"active"},{id:!1,name:"noActive"}],this.clientSelected=0,this.cities=[],this.districts=[],this.channels=[],this.status=[],this.countLoad=2,this.isOrderEdit=!1,this.orderSelected={},this.users=[],this.statusCount={},this.setDates=(A,se,Ce)=>{if(A?.from||A?.to){const Ye=A.to||A.from;this.pagination[se]=this.datePipe.transform(A.from||A.to,"yyyy-MM-ddT00:00:00"),this.pagination[Ce]=this.datePipe.transform(Ye,"yyyy-MM-ddT23:59:59.999")}else this.pagination[se]=null,this.pagination[Ce]=null},this.configRoute()}GetOrderLookUp(){this.baseService.getLookups().subscribe(n=>{this.status=n.data.offerOrderStatuses},n=>{console.log(n)})}GetCities(){this.cityService.getDropDown().subscribe(n=>{this.cities=n.data},n=>{console.log(n)})}GetDistricts(n){this.districtService.getByCityId(n).subscribe(s=>{this.districts=s.data},s=>{console.log(s)})}GetChannels(){this.channelService.getDropDown().subscribe(n=>{this.channels=n.data},n=>{console.log(n)})}GetTeams(){this.teamService.getDropDown().subscribe(n=>{this.teams=n.data},n=>{console.log(n)})}GetTimes(){this.workTimeService.getDropDown().subscribe(n=>{this.workTimes=n.data},n=>{console.log(n)})}ngOnInitMore(){}mapForm(n){return{...n}}onUpdateIsActive(n){this.baseService.updateActive(n).pipe((0,N.Q)(this.notifier)).subscribe(s=>{s?this.alertService.success():this.alertService.error("general.message."+s)},s=>{this.alertService.error()})}mapRegisterForm(n){let s={...n};return s.employeeCode=0,s}onSearch(){let n={...this.searchForm};this.ngxLoader.startLoader("allLoader"),this.setDates(n.dates,"visitDateFrom","visitDateTo"),this.setDates(n.creationDates,"creationTimeFrom","creationTimeTo"),this.loadentities()}LoadSuccess(){this.ngxLoader.stopLoader("allLoader")}onReset(){this.form={},this.searchForm={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems},this.loadentities()}configRoute(){this.routerActive.data.pipe((0,N.Q)(this.notifier)).subscribe(n=>{this.entities=n.data,this.pagination.totalItems=n.data?.totalItems},()=>{this.alertService.error()})}mapExcel(){let n=[];return this.entities.forEach(s=>{n.push({"Order Code":s.orderCode,"Created Date":s.createdDate,"City Name":s.cityName,"District Name":s.districtName?s.districtName:"--",Status:this.translateService.instant(this.getTrnslate(s)),"Agent Name":s.agentName,Mobile:s.mobile,"Channel Name":s.channelName,"Assigned To":s.teamNames,Times:s.workTimes,"Visit Date":s.visitDate,Services:s.services})}),n}onExportXlsx(){let n=this.mapExcel();this.excelService.exportAsExcelFile(n,this.translateService.instant(this.title),[])}onNavChange(n){1===n.nextId&&(this.activeindex="1"),3===n.nextId&&(this.activeindex="3")}getStatus(n){return 10==n.offerOrderStatus||20==n.offerOrderStatus?"bg-warning-subtle text-warning":30==n.offerOrderStatus?"bg-success-subtle text-success":40==n.offerOrderStatus?"bg-danger-subtle text-danger":50==n.offerOrderStatus?"bg-danger-success text-success":"bg-warning-subtle text-warning"}checkEdit(n){return!n.isCancel&&!n.isFinish}getTrnslate(n){return n.isCancel?"orderManagement.order.cancel":n.isFinish?"orderManagement.order.finish":n.isUrgent?"bg-danger-subtle text-danger":n.isReopen?"orderManagement.order.reopen":n.isAssign?"orderManagement.order.assign":n.isConfirmed?"orderManagement.order.confirmed":n.isFree?"orderManagement.order.free":"orderManagement.order.new"}openModalClient(n,s,r="xl"){this.clientSelected=n.orderCode,this.orderSelected=n,this.isOrderEdit=!1,this.modalService.open(s,{centered:!0,size:r})}oncityChange(n){this.GetDistricts(n.code)}copytext(n){navigator.clipboard.writeText(n),this.alertService.info(n)}static{this.\u0275fac=function(s){return new(s||o)(e.rXU(U.nX),e.rXU(R.c$),e.rXU(Ve),e.rXU(me.u),e.rXU(x.vh),e.rXU(Y.eD),e.rXU(O.Bq),e.rXU(pt.J),e.rXU($t.n),e.rXU(Xt.G),e.rXU(lt.V),e.rXU(Be.h),e.rXU(Ut.m),e.rXU(Mt.l),e.rXU(U.Ix))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-all-sales-order"]],features:[e.Vt3],decls:45,vars:37,consts:[["tableMaster",""],["deleteModal",""],["clientProfile",""],["orderViewModel",""],["orderModel",""],["OrderTimeLineModel",""],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],["overlayColor","rgba(255,255,255,0.05)","fgsColor","rgba(255,255,255,0)",3,"loaderId"],[3,"reset","search","exportXlsx","showAdd","showExport","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","number","id","id","name","id",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["InputTirmFilter","","type","search","id","clientName","name","clientName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["name","name","bindValue","id","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],["type","text","mwlFlatpickr","","id","isDate","mode","range","altFormat","d/m/Y",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],[2,"width",".2%"],["translate","",2,"width",".5%"],["pSortableColumn","id","translate","",2,"width","6%"],[1,"ri-expand-up-down-line"],["pSortableColumn","creationTime","translate","",2,"width","12%"],["pSortableColumn","status","translate","",2,"width","6%"],["pSortableColumn","clientId","translate","",2,"width","10%"],["translate","",2,"width","8%"],["pSortableColumn","clientVisitDate","translate","",2,"width","10%"],["pSortableColumn","totalQuantity","translate","",2,"width","8%"],["pSortableColumn","totalDiscount","translate","",2,"width","8%"],["pSortableColumn","netPrice","translate","",2,"width","8%"],["translate","",2,"width","10%"],[1,"fs-5"],["type","button","pRipple","",1,"border-0","p-button-text","p-button-rounded","p-button-plain",3,"pRowToggler","ngClass"],[3,"click"],[1,"code-pointer"],[1,"badge","bg-success-subtle","text-success"],[3,"translate"],[1,"badge","bg-primary-subtle","text-primary","my-1"],[1,"ri-history-fill","d-inline","text-primary","fs-16","align-middle","me-1"],["type","button","class","btn px-4 w-auto btn-sm btn-primary btn-label  waves-effect waves-light rounded-pill",4,"ngIf"],["type","button",1,"btn","px-4","w-auto","btn-sm","btn-primary","btn-label","waves-effect","waves-light","rounded-pill"],[1,"ri-edit-2-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.edit"],["colspan","17"],["dataKey","id"],[1,"bg-light"],["translate","sales.salesOrder.itemName",2,"width","10%"],["translate","sales.salesOrder.unit",2,"width","6%"],["translate","sales.salesOrder.clientQuantity",2,"width","8%"],["translate","sales.salesOrder.approvedQuantity",2,"width","8%"],["translate","sales.salesOrder.discountType",2,"width","5%"],["translate","sales.salesOrder.discount",2,"width","5%"],["translate","sales.salesOrder.price",2,"width","5%"],[4,"ngFor","ngForOf"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[3,"deleteConfirm","dismiss"],["","clientSelected"],[3,"dismiss","orderDetails"],[3,"isOrderEdit","isInner","orderCode"],[3,"dismiss","orderSelected"]],template:function(s,r){if(1&s){const d=e.RV6();e.j41(0,"div",6)(1,"div",7)(2,"div",8),e.nrm(3,"ngx-ui-loader",9),e.j41(4,"base-filter",10),e.bIt("reset",function(){return e.eBV(d),e.Njj(r.onReset())})("search",function(){return e.eBV(d),e.Njj(r.onSearch())})("exportXlsx",function(){return e.eBV(d),e.Njj(r.onExportXlsx())}),e.qex(5,11),e.j41(6,"div",12)(7,"div",13)(8,"input",14),e.nI1(9,"translate"),e.mxI("ngModelChange",function(u){return e.eBV(d),e.DH7(r.pagination.id,u)||(r.pagination.id=u),e.Njj(u)}),e.k0s(),e.nrm(10,"i",15),e.k0s()(),e.j41(11,"div",12)(12,"div",13)(13,"input",16),e.nI1(14,"translate"),e.mxI("ngModelChange",function(u){return e.eBV(d),e.DH7(r.pagination.clientName,u)||(r.pagination.clientName=u),e.Njj(u)}),e.k0s(),e.nrm(15,"i",15),e.k0s()(),e.j41(16,"div",12)(17,"div",13)(18,"ng-select",17),e.nI1(19,"translate"),e.mxI("ngModelChange",function(u){return e.eBV(d),e.DH7(r.pagination.status,u)||(r.pagination.status=u),e.Njj(u)}),e.k0s()()(),e.j41(20,"div",12)(21,"input",18),e.nI1(22,"translate"),e.mxI("ngModelChange",function(u){return e.eBV(d),e.DH7(r.searchForm.dates,u)||(r.searchForm.dates=u),e.Njj(u)}),e.k0s()(),e.j41(23,"div",12)(24,"input",18),e.nI1(25,"translate"),e.mxI("ngModelChange",function(u){return e.eBV(d),e.DH7(r.searchForm.creationDates,u)||(r.searchForm.creationDates=u),e.Njj(u)}),e.k0s()(),e.bVm(),e.k0s(),e.j41(26,"div",19)(27,"div",20)(28,"p-table",21,0),e.bIt("onLazyLoad",function(u){return e.eBV(d),e.Njj(r.tableChange(u))})("selectionChange",function(u){return e.eBV(d),e.Njj(r.onSelectionChange(u))}),e.DNE(30,Us,30,0,"ng-template",22)(31,Ys,33,23,"ng-template",23)(32,or,15,1,"ng-template",24),e.k0s()(),e.DNE(33,lr,2,0,"div",25)(34,dr,6,8,"div",26),e.k0s()()()(),e.DNE(35,yi,1,0,"ng-template",null,1,e.C5r)(37,qs,1,0,"ng-template",null,2,e.C5r)(39,cr,1,1,"ng-template",null,3,e.C5r)(41,Pn,1,3,"ng-template",null,4,e.C5r)(43,mr,1,1,"ng-template",null,5,e.C5r)}2&s&&(e.R7$(3),e.Y8G("loaderId","allLoader"),e.R7$(),e.Y8G("showAdd",!1)("showExport",!1)("totalItems",r.pagination.totalItems)("title",r.title),e.R7$(4),e.FS9("placeholder",e.bMT(9,27,"orderManagement.order.orderCode")),e.R50("ngModel",r.pagination.id),e.R7$(5),e.FS9("placeholder",e.bMT(14,29,"orderManagement.order.agentName")),e.R50("ngModel",r.pagination.clientName),e.R7$(5),e.FS9("placeholder",e.bMT(19,31,"orderManagement.order.status")),e.Y8G("items",r.status)("multiple",!1),e.R50("ngModel",r.pagination.status),e.R7$(3),e.FS9("placeholder",e.bMT(22,33,"orderManagement.order.visitDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",r.searchForm.dates),e.R7$(3),e.FS9("placeholder",e.bMT(25,35,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",r.searchForm.creationDates),e.R7$(4),e.Y8G("value",r.entities)("rows",r.pagination.pageSize)("lazy",!0)("totalRecords",r.pagination.totalItems),e.R7$(5),e.Y8G("ngIf",r.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",r.pagination.totalItems>0))},dependencies:[x.YU,x.Sq,x.bT,m.me,m.Q0,m.BC,m.vS,O.s5,ne.kL,dt.b,jn.L,jt.w,ct.p,$e.g,ar.t,R.Mm,G.XI,mt.Ei,G.Tg,G.FP,Y.Cv,Ee.vr,_e.m,x.vh,R.D9],encapsulation:2})}}return o})();var pr=j(91020);let Yn=(()=>{class o{constructor(n,s,r,d){this.cancelReasonService=n,this.orderService=s,this.ngxLoader=r,this.alertService=d,this.cancelReasons=[],this.form={},this.orderId=0,this.loaderOperationShap=D.$$,this.operationLoader=D.ZW,this.notifier=new We.B,this.success=new e.bkB,this.dismiss=new e.bkB}ngOnInit(){this.GetReturnReasons()}GetReturnReasons(){this.cancelReasonService.getDropDown().subscribe(n=>{this.cancelReasons=n.data},n=>{console.log(n)})}onCancelOrder(){let n={cancelReasonId:this.form.cancelReasonCode,id:this.orderId};this.ngxLoader.startLoader(this.operationLoader),this.orderService.CancelOfferOrder(n).pipe((0,N.Q)(this.notifier)).subscribe(s=>{this.ngxLoader.stopLoader(this.operationLoader),s.success?(this.alertService.success(),this.success.emit(!0),this.dismiss.emit(!0)):this.alertService.error()},()=>{this.alertService.error(),this.ngxLoader.stopLoader(this.operationLoader)})}dismissFn(){this.dismiss.emit(!0)}static{this.\u0275fac=function(s){return new(s||o)(e.rXU(pr.e),e.rXU(Ve),e.rXU(Y.eD),e.rXU(me.u))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["cancel-sales-model"]],inputs:{orderId:"orderId"},outputs:{success:"success",dismiss:"dismiss"},decls:19,vars:10,consts:[["formEntity","ngForm"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["translate","orderManagement.order.cancelReasonName",1,"fw-bold","fs-4"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"hasProgressBar","fgsType","loaderId"],[3,"ngSubmit"],[1,"row"],[1,"mb-3"],["for","actionMismatch","translate","",1,"required","fw-bold","form-label"],["name","name","bindValue","code","bindLabel","name","required","",3,"ngModelChange","placeholder","items","multiple","ngModel"],[1,"text-center"],["type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"]],template:function(s,r){if(1&s){const d=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"h4",3),e.nrm(3,"span",4),e.k0s(),e.j41(4,"button",5),e.bIt("click",function(){return e.eBV(d),e.Njj(r.dismissFn())}),e.k0s()(),e.j41(5,"div",6),e.nrm(6,"ngx-ui-loader",7),e.j41(7,"form",8,0),e.bIt("ngSubmit",function(){return e.eBV(d),e.Njj(r.onCancelOrder())}),e.j41(9,"div",9)(10,"div",10)(11,"label",11),e.EFF(12,"orderManagement.order.cancelReasonName"),e.k0s(),e.j41(13,"ng-select",12),e.nI1(14,"translate"),e.mxI("ngModelChange",function(u){return e.eBV(d),e.DH7(r.form.cancelReasonCode,u)||(r.form.cancelReasonCode=u),e.Njj(u)}),e.k0s()()(),e.j41(15,"div",13)(16,"button",14),e.nrm(17,"i",15)(18,"span",16),e.k0s()()()()()}if(2&s){const d=e.sdS(8);e.R7$(6),e.Y8G("hasProgressBar",!1)("fgsType",r.loaderOperationShap)("loaderId",r.operationLoader),e.R7$(7),e.FS9("placeholder",e.bMT(14,8,"orderManagement.order.cancelReasonName")),e.Y8G("items",r.cancelReasons)("multiple",!1),e.R50("ngModel",r.form.cancelReasonCode),e.R7$(3),e.Y8G("disabled",!d.valid)}},dependencies:[m.qT,m.BC,m.cb,m.YS,m.vS,m.cV,R.Mm,Y.Cv,Ee.vr,R.D9],encapsulation:2})}}return o})();function xi(o,g){1&o&&(e.j41(0,"tr",26),e.nrm(1,"th",27),e.j41(2,"th",28),e.EFF(3,"#"),e.k0s(),e.j41(4,"th",29),e.nrm(5,"i",30),e.EFF(6," orderManagement.order.orderCode "),e.k0s(),e.j41(7,"th",31),e.nrm(8,"i",30),e.EFF(9," orderManagement.order.creation "),e.k0s(),e.j41(10,"th",32),e.nrm(11,"i",30),e.EFF(12," orderManagement.order.agentName "),e.k0s(),e.j41(13,"th",33),e.nrm(14,"i",30),e.EFF(15," sales.salesOrder.clientVisitDate "),e.k0s(),e.j41(16,"th",34),e.nrm(17,"i",30),e.EFF(18," sales.salesOrder.shippingTruckName "),e.k0s(),e.j41(19,"th",35),e.EFF(20," sales.salesOrder.totalQuantity "),e.k0s(),e.j41(21,"th",36),e.EFF(22," sales.salesOrder.totalDiscount "),e.k0s(),e.j41(23,"th",37),e.EFF(24," orderManagement.order.totalTax "),e.k0s(),e.j41(25,"th",37),e.EFF(26," sales.salesOrder.netPrice "),e.k0s(),e.j41(27,"th",37),e.EFF(28," sales.salesOrder.clientLocationName "),e.k0s(),e.nrm(29,"th",38),e.k0s())}function Ws(o,g){1&o&&(e.j41(0,"td")(1,"button",45),e.nI1(2,"translate"),e.nrm(3,"i",46),e.k0s(),e.j41(4,"button",47),e.nI1(5,"translate"),e.nrm(6,"i",48),e.k0s()()),2&o&&(e.R7$(),e.FS9("pTooltip",e.bMT(2,2,"orderManagement.order.changeTeamStatus")),e.R7$(3),e.FS9("pTooltip",e.bMT(5,4,"orderManagement.order.finishOrder")))}function ur(o,g){if(1&o){const n=e.RV6();e.j41(0,"td")(1,"div",49)(2,"button",50),e.nI1(3,"translate"),e.bIt("click",function(){e.eBV(n);const r=e.XpG().$implicit,d=e.XpG(),h=e.sdS(38);return e.Njj(d.openStatusModal(r.id,h,60,"md"))}),e.nrm(4,"i",51),e.k0s(),e.j41(5,"span",49)(6,"div",52)(7,"button",53),e.nrm(8,"i",54),e.k0s(),e.j41(9,"ul",55)(10,"li")(11,"span",56),e.nrm(12,"i",57)(13,"span",58),e.k0s()(),e.j41(14,"li")(15,"span",56),e.nrm(16,"i",59)(17,"span",60),e.k0s()(),e.j41(18,"li",61),e.bIt("click",function(){e.eBV(n);const r=e.XpG().$implicit,d=e.XpG(),h=e.sdS(38);return e.Njj(d.openStatusModal(r.id,h,40,"md"))}),e.j41(19,"span",56),e.nrm(20,"i",62)(21,"span",63),e.k0s()(),e.j41(22,"li",61),e.bIt("click",function(){e.eBV(n);const r=e.XpG().$implicit,d=e.XpG(),h=e.sdS(34);return e.Njj(d.openModal(r.id,h))}),e.j41(23,"span",56),e.nrm(24,"i",64)(25,"span",65),e.k0s()()()()()()()}2&o&&(e.R7$(2),e.FS9("pTooltip",e.bMT(3,1,"sales.salesOrder.finihedOrder")))}function Fi(o,g){if(1&o&&(e.j41(0,"tr",39)(1,"td"),e.nrm(2,"button",40),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td")(6,"bdi",41),e.EFF(7),e.k0s()(),e.j41(8,"td")(9,"span",42),e.EFF(10),e.k0s(),e.EFF(11),e.nI1(12,"date"),e.k0s(),e.j41(13,"td")(14,"span",43),e.EFF(15),e.k0s()(),e.j41(16,"td"),e.EFF(17),e.nI1(18,"date"),e.k0s(),e.j41(19,"td"),e.EFF(20),e.k0s(),e.j41(21,"td"),e.EFF(22),e.k0s(),e.j41(23,"td"),e.EFF(24),e.k0s(),e.j41(25,"td"),e.EFF(26),e.k0s(),e.j41(27,"td"),e.EFF(28),e.k0s(),e.j41(29,"td"),e.EFF(30),e.k0s(),e.DNE(31,Ws,7,6,"td",44)(32,ur,26,3,"td",44),e.k0s()),2&o){const n=g.$implicit,s=g.rowIndex,r=g.expanded,d=e.XpG();e.R7$(2),e.Y8G("pRowToggler",n)("ngClass",r?" ri-arrow-down-s-line":"  ri-arrow-up-s-line"),e.R7$(2),e.JRh(s+1),e.R7$(3),e.SpI("#SO#",n.id,""),e.R7$(3),e.SpI("",n.creatorName," "),e.R7$(),e.SpI(" ",e.i5U(12,16,n.creationTime,"yyyy-MM-dd")," "),e.R7$(4),e.SpI("",n.clientName," "),e.R7$(2),e.SpI(" ",e.i5U(18,19,n.acutalVisitDate,"yyyy-MM-dd HH:mm"),""),e.R7$(3),e.JRh(n.shippingTruckName),e.R7$(2),e.JRh(n.totalQuantity),e.R7$(2),e.JRh(n.totalDiscount),e.R7$(2),e.JRh(n.totalTax),e.R7$(2),e.JRh(n.netPrice),e.R7$(2),e.JRh(n.clientLocationName),e.R7$(),e.Y8G("ngIf",d.isTrunck),e.R7$(),e.Y8G("ngIf",!d.isTrunck)}}function Ri(o,g){1&o&&(e.j41(0,"tr"),e.nrm(1,"th",70)(2,"th",71)(3,"th",72)(4,"th",73)(5,"th",74)(6,"th",75)(7,"th",76),e.k0s())}function an(o,g){if(1&o&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td")(8,"span"),e.EFF(9),e.k0s()(),e.j41(10,"td"),e.EFF(11),e.nI1(12,"translate"),e.k0s(),e.j41(13,"td"),e.EFF(14),e.k0s(),e.j41(15,"td"),e.EFF(16),e.k0s()()),2&o){const n=g.$implicit;e.R7$(2),e.JRh(n.itemName),e.R7$(2),e.JRh(n.unitName),e.R7$(2),e.JRh(n.clientQuantity),e.R7$(3),e.JRh(n.approvedQuantity),e.R7$(2),e.JRh(e.bMT(12,7,"sales.salesOrder."+n.discountTypeValue)),e.R7$(3),e.SpI(" ",n.discount," "),e.R7$(2),e.JRh(n.price)}}function hr(o,g){1&o&&(e.j41(0,"tr"),e.nrm(1,"td",77),e.k0s())}function gr(o,g){if(1&o&&(e.j41(0,"tr")(1,"td",66)(2,"div",67)(3,"p-table",68),e.DNE(4,Ri,8,0,"ng-template",21)(5,an,17,9,"ng-template",22)(6,hr,2,0,"ng-template",69),e.k0s()()()()),2&o){const n=g.$implicit;e.R7$(3),e.Y8G("value",n.offerOrderDetails)}}function Js(o,g){1&o&&(e.j41(0,"div",78),e.EFF(1," general.table.noData "),e.k0s())}function fr(o,g){if(1&o){const n=e.RV6();e.j41(0,"div",79)(1,"div",80),e.nrm(2,"ngb-pagination-info",81),e.j41(3,"table-length",82),e.bIt("lengthChange",function(r){e.eBV(n);const d=e.XpG();return e.Njj(d.ListItemChange(r))}),e.k0s()(),e.j41(4,"div",83)(5,"ngb-pagination",84),e.bIt("pageChange",function(r){e.eBV(n);const d=e.XpG();return e.Njj(d.pageChanged(r))}),e.mxI("pageChange",function(r){e.eBV(n);const d=e.XpG();return e.DH7(d.pagination.pageNumber,r)||(d.pagination.pageNumber=r),e.Njj(r)}),e.k0s()()()}if(2&o){const n=e.XpG();e.R7$(2),e.Y8G("pagination",n.pagination),e.R7$(),e.Y8G("lengthTable",n.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",n.pagination.pageSize)("collectionSize",n.pagination.totalItems),e.R50("page",n.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function _r(o,g){if(1&o){const n=e.RV6();e.j41(0,"form",85,5),e.bIt("ngSubmit",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.cancelOrder())}),e.nrm(2,"ngx-ui-loader",86),e.j41(3,"div",87)(4,"div",88)(5,"button",89),e.bIt("click",function(){const r=e.eBV(n).$implicit;return e.Njj(r.dismiss())}),e.k0s()(),e.j41(6,"div",90)(7,"div",91),e.nrm(8,"lord-icon",92),e.j41(9,"div",93),e.nrm(10,"h3",94)(11,"p",95),e.k0s()(),e.j41(12,"div",96),e.nrm(13,"button",97),e.j41(14,"button",98),e.bIt("click",function(){const r=e.eBV(n).$implicit;return e.Njj(r.dismiss())}),e.k0s()()()()()}if(2&o){const n=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderOperationShap)("loaderId",n.deleteLoader)}}function br(o,g){if(1&o){const n=e.RV6();e.j41(0,"cancel-sales-model",99),e.bIt("success",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.loadentities())})("dismiss",function(){const r=e.eBV(n).$implicit;return e.Njj(r.dismiss())}),e.k0s()}if(2&o){const n=e.XpG();e.Y8G("orderId",n.orderSelected)}}function vr(o,g){if(1&o){const n=e.RV6();e.j41(0,"order-timeline",100),e.bIt("dismiss",function(){const r=e.eBV(n).$implicit;return e.Njj(r.dismiss())}),e.k0s()}if(2&o){const n=e.XpG();e.Y8G("orderSelected",n.orderSelected)}}function Qs(o,g){if(1&o){const n=e.RV6();e.j41(0,"form",85,5),e.bIt("ngSubmit",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.SubmitOrder())}),e.nrm(2,"ngx-ui-loader",86),e.j41(3,"div",87)(4,"div",88)(5,"button",89),e.bIt("click",function(){const r=e.eBV(n).$implicit;return e.Njj(r.dismiss())}),e.k0s()(),e.j41(6,"div",90)(7,"div",91),e.nrm(8,"lord-icon",92),e.j41(9,"div",93),e.nrm(10,"h3",94)(11,"p",95),e.k0s()(),e.j41(12,"div",96),e.nrm(13,"button",97),e.j41(14,"button",98),e.bIt("click",function(){const r=e.eBV(n).$implicit;return e.Njj(r.dismiss())}),e.k0s()()()()()}if(2&o){const n=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderOperationShap)("loaderId",n.deleteLoader)}}let Cr=(()=>{class o extends Qe.w{constructor(n,s,r,d,h,u,E,ce,le,re,q,fe,be,Ie,Re){super(n,s,E,r,d,h,u),this.baseService=r,this.authDaamService=ce,this.teamService=le,this.workTimeService=re,this.excelService=q,this.cityService=fe,this.districtService=be,this.channelService=Ie,this.router=Re,this.title="sales.salesOrder.assignOrder",this.titleOperation="sales.salesOrder.assignOrder",this.keySelected="",this.assignUsers=[],this.times=[],this.employees=[],this.searchForm={},this.isResolveList=!0,this.employeeTypes=[{id:1,name:"employeeTeam"},{id:2,name:"managment"},{id:3,name:"customerService"}],this.employeeGroups=[],this.activeindex="2",this.active=2,this.formPassword={},this.roles=[],this.teams=[],this.workTimes=[],this.userTypes=[],this.actives=[{id:!0,name:"active"},{id:!1,name:"noActive"}],this.clientSelected=0,this.cities=[],this.districts=[],this.channels=[],this.status=[],this.countLoad=2,this.isOrderEdit=!1,this.orderSelected={},this.users=[],this.truncks=[],this.isTrunck=!1,this.setDates=(A,se,Ce)=>{if(A?.from||A?.to){const Ye=A.to||A.from;this.pagination[se]=this.datePipe.transform(A.from||A.to,"yyyy-MM-ddT00:00:00"),this.pagination[Ce]=this.datePipe.transform(Ye,"yyyy-MM-ddT23:59:59.999")}else this.pagination[se]=null,this.pagination[Ce]=null},this.loadentities()}loadentities(){this.countLoad=this.countLoad+1,(!this.isResolveList||1!==this.countLoad)&&(this.pagination.status=50,this.baseService.get(this.pagination).pipe((0,N.Q)(this.notifier)).subscribe(n=>{this.ngxLoader.stopLoader(D.a7),this.entities=n.data,this.pagination.totalItems=n.totalItems,this.LoadSuccess()},n=>{this.ngxLoader.stopLoader(D.a7),this.alertService.error(n)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[])}openModal(n,s,r="md"){this.isOrderEdit=!1,this.form={},this.orderSelected=n,this.modalService.open(s,{centered:!0,size:r})}SubmitOrder(){this.ngxLoader.startLoader(D.Fq),this.baseService.changStatus({id:this.form.id,status:this.form.status}).pipe((0,Z.O)(),(0,te.c)(this.mainDelay),(0,F.Z)(),(0,N.Q)(this.notifier),(0,M.j)(()=>this.ngxLoader.stopLoader(D.Fq))).subscribe({next:s=>{this.modalService.dismissAll(),this.loadentities(),this.alertService.success()}})}cancelOrder(){this.ngxLoader.startLoader(D.Fq),console.log(this.operationId),this.baseService.changStatus({id:this.operationId,status:40}).pipe((0,Z.O)(),(0,te.c)(this.mainDelay),(0,F.Z)(),(0,N.Q)(this.notifier),(0,M.j)(()=>this.ngxLoader.stopLoader(D.Fq))).subscribe({next:s=>{this.modalService.dismissAll(),this.loadentities(),this.alertService.success()}})}GetDistricts(n){this.districtService.getByCityId(n).subscribe(s=>{this.districts=s.data},s=>{console.log(s)})}ngOnInitMore(){}mapForm(n){return{...n}}onUpdateIsActive(n){this.baseService.updateActive(n).pipe((0,N.Q)(this.notifier)).subscribe(s=>{s?this.alertService.success():this.alertService.error("general.message."+s)},s=>{this.alertService.error()})}mapRegisterForm(n){let s={...n};return s.employeeCode=0,s}onSearch(){let n={...this.searchForm};this.ngxLoader.startLoader("allLoader"),this.setDates(n.dates,"visitDateFrom","visitDateTo"),this.setDates(n.creationDates,"creationTimeFrom","creationTimeTo"),this.loadentities()}LoadSuccess(){this.ngxLoader.stopLoader("allLoader")}onReset(){this.form={},this.searchForm={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems}}configRoute(){this.routerActive.data.pipe((0,N.Q)(this.notifier)).subscribe(n=>{this.entities=n.data,this.pagination.totalItems=n.data?.totalItems},()=>{this.alertService.error()})}mapExcel(){let n=[];return this.entities.forEach(s=>{n.push({"Order Code":s.orderCode,"Created Date":s.createdDate,"City Name":s.cityName,"District Name":s.districtName?s.districtName:"--","Agent Name":s.agentName,Mobile:s.mobile,"Channel Name":s.channelName,"Assigned To":s.teamNames,Times:s.workTimes,"Visit Date":s.visitDate,Services:s.services})}),n}onExportXlsx(){let n=this.mapExcel();this.excelService.exportAsExcelFile(n,this.translateService.instant(this.title),[])}onNavChange(n){1===n.nextId&&(this.activeindex="1"),3===n.nextId&&(this.activeindex="3")}checkEdit(n){return!n.isCancel&&!n.isFinish}openStatusModal(n,s,r,d="md"){this.isEditForm=!1,this.form={},this.form={id:n,status:r},this.modalService.open(s,{centered:!0,size:d})}openModalClient(n,s,r="xl"){this.clientSelected=n.orderCode,this.form=n,this.isOrderEdit=!1,this.modalService.open(s,{centered:!0,size:r})}copytext(n){navigator.clipboard.writeText(n),this.alertService.info(n)}openEditOrderModal(n,s,r="md"){this.form={},this.isOrderEdit=!0,this.clientSelected=n,this.modalService.open(s,{centered:!0,size:r})}OpenOrderTimeLineModel(n,s,r="md"){this.orderSelected=n,this.modalService.open(s,{centered:!0,size:r})}static{this.\u0275fac=function(s){return new(s||o)(e.rXU(U.nX),e.rXU(R.c$),e.rXU(Ve),e.rXU(me.u),e.rXU(x.vh),e.rXU(Y.eD),e.rXU(O.Bq),e.rXU(pt.J),e.rXU($t.n),e.rXU(Xt.G),e.rXU(lt.V),e.rXU(Be.h),e.rXU(Ut.m),e.rXU(Mt.l),e.rXU(U.Ix))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["assign-order"]],inputs:{isTrunck:"isTrunck"},features:[e.Vt3],decls:39,vars:31,consts:[["tableMaster",""],["cancelOrderModal",""],["deleteModal",""],["OrderTimeLineModel",""],["StatusOrderModal",""],["formEntity","ngForm"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],["overlayColor","rgba(255,255,255,0.05)","fgsColor","rgba(255,255,255,0)",3,"loaderId"],[3,"reset","search","exportXlsx","showAdd","showExport","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","number","id","id","name","id",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["InputTirmFilter","","type","search","id","clientName","name","clientName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["type","text","mwlFlatpickr","","id","isDate","mode","range","altFormat","d/m/Y",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],[2,"width",".2%"],["translate","",2,"width",".5%"],["pSortableColumn","id","translate","",2,"width","6%"],[1,"ri-expand-up-down-line"],["pSortableColumn","creationTime","translate","",2,"width","12%"],["pSortableColumn","clientId","translate","",2,"width","10%"],["pSortableColumn","clientVisitDate","translate","",2,"width","8%"],["pSortableColumn","shippingTruckName","translate","",2,"width","8%"],["translate","",2,"width","8%"],["translate","",2,"width","7%"],["translate","",2,"width","6%"],["translate","",2,"width","10%"],[1,"fs-5"],["type","button","pRipple","",1,"border-0","p-button-text","p-button-rounded","p-button-plain",3,"pRowToggler","ngClass"],[1,"code-pointer"],[1,"badge","bg-success-subtle","text-success"],[1,"badge","bg-primary-subtle","text-primary","my-1"],[4,"ngIf"],["tooltipPosition","top",1,"btn","btn-sm","btn-warning","edit-list","mx-1",3,"pTooltip"],[1,"ri-swap-line","align-bottom"],["tooltipPosition","top",1,"btn","btn-sm","btn-success","edit-list","mx-1",3,"pTooltip"],[1,"ri-checkbox-circle-fill","align-bottom"],[1,"d-inline-block"],["tooltipPosition","top",1,"btn","btn-sm","btn-primary","edit-list","mx-1",3,"click","pTooltip"],[1,"ri-checkbox-fill","align-bottom"],[1,"dropdown-custom","d-inline-block"],["type","button",1,"btn","dropbtn","btn-soft-secondary","btn-sm","dropdown-custom","arrow-none"],[1,"ri-more-fill"],[1,"dropdown-menu","dropdown-menu-end","dropdown-content",2,"left","0"],[1,"dropdown-item"],[1,"text-primary","ri-printer-line","align-bottom","me-2"],["translate","sales.salesOrder.printBillOfLading"],[1,"text-success","ri-pencil-fill","align-bottom","me-2"],["translate","general.action.edit"],[3,"click"],[1,"text-warning","ri-skip-back-fill","align-bottom","me-2"],["translate","sales.salesOrder.sureOrder"],[1,"text-danger","ri-close-fill","align-bottom","me-2"],["translate","general.action.cancel"],["colspan","17"],[1,"table-detail"],["dataKey","id",3,"value"],["pTemplate","emptymessage"],["translate","sales.salesOrder.itemName",2,"width","10%"],["translate","sales.salesOrder.unit",2,"width","6%"],["translate","sales.salesOrder.clientQuantity",2,"width","8%"],["translate","sales.salesOrder.approvedQuantity",2,"width","8%"],["translate","sales.salesOrder.discountType",2,"width","5%"],["translate","sales.salesOrder.discount",2,"width","5%"],["translate","sales.salesOrder.price",2,"width","5%"],["colspan","8"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[3,"ngSubmit"],[3,"hasProgressBar","fgsType","loaderId"],[1,"modal-content"],[1,"modal-header"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","btn-close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mt-2","text-center"],["src","https://cdn.lordicon.com/gdfrsvpt.json","stroke","bold","state","hover-oscillate","trigger","loop","colors","primary:#f7b84b,secondary:#f06548",2,"width","130px","height","130px"],[1,"pt-2","fs-15","mx-4","mx-sm-5"],["translate","orderManagement.order.AreYouSureMessage"],[1,"text-muted","mx-4","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","submit","id","save","translate","general.action.save",1,"btn","w-sm","btn-danger"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light",3,"click"],[3,"success","dismiss","orderId"],[3,"dismiss","orderSelected"]],template:function(s,r){if(1&s){const d=e.RV6();e.j41(0,"div",6)(1,"div",7)(2,"div",8),e.nrm(3,"ngx-ui-loader",9),e.j41(4,"base-filter",10),e.bIt("reset",function(){return e.eBV(d),e.Njj(r.onReset())})("search",function(){return e.eBV(d),e.Njj(r.onSearch())})("exportXlsx",function(){return e.eBV(d),e.Njj(r.onExportXlsx())}),e.qex(5,11),e.j41(6,"div",12)(7,"div",13)(8,"input",14),e.nI1(9,"translate"),e.mxI("ngModelChange",function(u){return e.eBV(d),e.DH7(r.pagination.id,u)||(r.pagination.id=u),e.Njj(u)}),e.k0s(),e.nrm(10,"i",15),e.k0s()(),e.j41(11,"div",12)(12,"div",13)(13,"input",16),e.nI1(14,"translate"),e.mxI("ngModelChange",function(u){return e.eBV(d),e.DH7(r.pagination.clientName,u)||(r.pagination.clientName=u),e.Njj(u)}),e.k0s(),e.nrm(15,"i",15),e.k0s()(),e.j41(16,"div",12)(17,"input",17),e.nI1(18,"translate"),e.mxI("ngModelChange",function(u){return e.eBV(d),e.DH7(r.searchForm.dates,u)||(r.searchForm.dates=u),e.Njj(u)}),e.k0s()(),e.j41(19,"div",12)(20,"input",17),e.nI1(21,"translate"),e.mxI("ngModelChange",function(u){return e.eBV(d),e.DH7(r.searchForm.creationDates,u)||(r.searchForm.creationDates=u),e.Njj(u)}),e.k0s()(),e.bVm(),e.k0s(),e.j41(22,"div",18)(23,"div",19)(24,"p-table",20,0),e.bIt("onLazyLoad",function(u){return e.eBV(d),e.Njj(r.tableChange(u))})("selectionChange",function(u){return e.eBV(d),e.Njj(r.onSelectionChange(u))}),e.DNE(26,xi,30,0,"ng-template",21)(27,Fi,33,22,"ng-template",22)(28,gr,7,1,"ng-template",23),e.k0s()(),e.DNE(29,Js,2,0,"div",24)(30,fr,6,8,"div",25),e.k0s()()()(),e.DNE(31,_r,15,3,"ng-template",null,1,e.C5r)(33,br,1,1,"ng-template",null,2,e.C5r)(35,vr,1,1,"ng-template",null,3,e.C5r)(37,Qs,15,3,"ng-template",null,4,e.C5r)}2&s&&(e.R7$(3),e.Y8G("loaderId","sureLoader"),e.R7$(),e.Y8G("showAdd",!1)("showExport",!1)("totalItems",r.pagination.totalItems)("title",r.title),e.R7$(4),e.FS9("placeholder",e.bMT(9,23,"orderManagement.order.orderCode")),e.R50("ngModel",r.pagination.id),e.R7$(5),e.FS9("placeholder",e.bMT(14,25,"orderManagement.order.agentName")),e.R50("ngModel",r.pagination.clientName),e.R7$(4),e.FS9("placeholder",e.bMT(18,27,"orderManagement.order.visitDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",r.searchForm.dates),e.R7$(3),e.FS9("placeholder",e.bMT(21,29,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",r.searchForm.creationDates),e.R7$(4),e.Y8G("value",r.entities)("rows",r.pagination.pageSize)("lazy",!0)("totalRecords",r.pagination.totalItems),e.R7$(5),e.Y8G("ngIf",r.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",r.pagination.totalItems>0))},dependencies:[x.YU,x.bT,m.qT,m.me,m.Q0,m.BC,m.cb,m.vS,m.cV,O.s5,ne.kL,dt.b,ct.p,$e.g,R.Mm,G.XI,mt.Ei,G.Tg,G.FP,Y.Cv,_e.m,Bt.m,Yn,x.vh,R.D9],encapsulation:2})}}return o})();function Ks(o,g){1&o&&(e.j41(0,"tr",29),e.nrm(1,"th",30),e.j41(2,"th",31),e.EFF(3,"#"),e.k0s(),e.j41(4,"th",32),e.nrm(5,"i",33),e.EFF(6," orderManagement.order.orderCode "),e.k0s(),e.j41(7,"th",34),e.nrm(8,"i",33),e.EFF(9," orderManagement.order.creation "),e.k0s(),e.j41(10,"th",35),e.nrm(11,"i",33),e.EFF(12," orderManagement.order.agentName "),e.k0s(),e.j41(13,"th",36),e.nrm(14,"i",33),e.EFF(15," sales.salesOrder.clientVisitDate "),e.k0s(),e.j41(16,"th",37),e.nrm(17,"i",33),e.EFF(18," sales.salesOrder.totalQuantity "),e.k0s(),e.j41(19,"th",38),e.nrm(20,"i",33),e.EFF(21," sales.salesOrder.totalDiscount "),e.k0s(),e.j41(22,"th",39),e.EFF(23," orderManagement.order.totalTax "),e.k0s(),e.j41(24,"th",40),e.nrm(25,"i",33),e.EFF(26," sales.salesOrder.netPrice "),e.k0s(),e.nrm(27,"th",41),e.k0s())}function Sr(o,g){if(1&o){const n=e.RV6();e.j41(0,"button",55),e.nI1(1,"translate"),e.bIt("click",function(){e.eBV(n);const r=e.XpG().$implicit,d=e.XpG(),h=e.sdS(42);return e.Njj(d.openEditOrderModal(r.id,h,"xxl"))}),e.nrm(2,"i",56),e.k0s()}2&o&&e.FS9("pTooltip",e.bMT(1,1,"general.action.edit"))}function Zs(o,g){if(1&o){const n=e.RV6();e.j41(0,"tr",42)(1,"td"),e.nrm(2,"button",43),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td",44),e.bIt("click",function(){const r=e.eBV(n).$implicit,d=e.XpG(),h=e.sdS(40);return e.Njj(d.openModalClient(r,h,"lg"))}),e.j41(6,"bdi",45),e.EFF(7),e.k0s()(),e.j41(8,"td")(9,"span",46),e.EFF(10),e.k0s(),e.EFF(11),e.nI1(12,"date"),e.k0s(),e.j41(13,"td",44),e.bIt("click",function(){const r=e.eBV(n).$implicit,d=e.XpG(),h=e.sdS(38);return e.Njj(d.openModalClient(r,h))}),e.j41(14,"span",47),e.EFF(15),e.k0s()(),e.j41(16,"td"),e.EFF(17),e.nI1(18,"date"),e.k0s(),e.j41(19,"td"),e.EFF(20),e.k0s(),e.j41(21,"td"),e.EFF(22),e.k0s(),e.j41(23,"td"),e.EFF(24),e.k0s(),e.j41(25,"td"),e.EFF(26),e.k0s(),e.j41(27,"td")(28,"div",48)(29,"i",49),e.bIt("click",function(){const r=e.eBV(n).$implicit,d=e.XpG(),h=e.sdS(44);return e.Njj(d.OpenOrderTimeLineModel(r,h,"lg"))}),e.k0s(),e.DNE(30,Sr,3,3,"button",50),e.j41(31,"button",51),e.nI1(32,"translate"),e.bIt("click",function(){const r=e.eBV(n).$implicit,d=e.XpG(),h=e.sdS(32);return e.Njj(d.openModal(r.id,h))}),e.nrm(33,"i",52),e.k0s(),e.j41(34,"button",53),e.nI1(35,"translate"),e.bIt("click",function(){const r=e.eBV(n).$implicit,d=e.XpG(),h=e.sdS(34);return e.Njj(d.openModal(r.id,h))}),e.nrm(36,"i",54),e.k0s()()()()}if(2&o){const n=g.$implicit,s=g.rowIndex,r=g.expanded,d=e.XpG();e.R7$(2),e.Y8G("pRowToggler",n)("ngClass",r?" ri-arrow-down-s-line":"  ri-arrow-up-s-line"),e.R7$(2),e.JRh(s+1),e.R7$(3),e.SpI("#SO#",n.id,""),e.R7$(3),e.SpI("",n.creatorName," "),e.R7$(),e.SpI(" ",e.i5U(12,15,n.creationTime,"yyyy-MM-dd HH:mm")," "),e.R7$(4),e.SpI("",n.clientName," "),e.R7$(2),e.SpI(" ",e.i5U(18,18,n.acutalVisitDate,"yyyy-MM-dd HH:mm"),""),e.R7$(3),e.JRh(n.totalQuantity),e.R7$(2),e.JRh(n.totalDiscount),e.R7$(2),e.JRh(n.totalTax),e.R7$(2),e.JRh(n.netPrice),e.R7$(4),e.Y8G("ngIf",d.checkEdit(n)),e.R7$(),e.FS9("pTooltip",e.bMT(32,21,"general.action.proceed")),e.R7$(3),e.FS9("pTooltip",e.bMT(35,23,"general.action.cancel"))}}function ea(o,g){1&o&&(e.j41(0,"tr"),e.nrm(1,"th",61)(2,"th",62)(3,"th",63)(4,"th",64)(5,"th",65)(6,"th",66)(7,"th",67)(8,"th",68),e.k0s())}function ta(o,g){if(1&o&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&o){const n=e.XpG().$implicit;e.R7$(),e.JRh(n.approvedQuantity)}}function na(o,g){if(1&o){const n=e.RV6();e.j41(0,"input",73),e.mxI("ngModelChange",function(r){e.eBV(n);const d=e.XpG().$implicit;return e.DH7(d.approvedQuantity,r)||(d.approvedQuantity=r),e.Njj(r)}),e.k0s()}if(2&o){const n=e.XpG().$implicit;e.R50("ngModel",n.approvedQuantity)}}function ki(o,g){if(1&o){const n=e.RV6();e.j41(0,"button",51),e.nI1(1,"translate"),e.bIt("click",function(){e.eBV(n);const r=e.XpG().$implicit,d=e.XpG(2);return e.Njj(d.saveQuantity(r.id,r))}),e.nrm(2,"i",52),e.k0s()}2&o&&e.FS9("pTooltip",e.bMT(1,1,"general.action.save"))}function ia(o,g){if(1&o){const n=e.RV6();e.j41(0,"button",55),e.nI1(1,"translate"),e.bIt("click",function(){e.eBV(n);const r=e.XpG().$implicit;return e.Njj(r.isEdit=!r.isEdit)}),e.nrm(2,"i",56),e.k0s()}2&o&&e.FS9("pTooltip",e.bMT(1,1,"general.action.edit"))}function ra(o,g){if(1&o){const n=e.RV6();e.j41(0,"button",53),e.nI1(1,"translate"),e.bIt("click",function(){e.eBV(n);const r=e.XpG().$implicit;return e.Njj(r.isEdit=!1)}),e.nrm(2,"i",54),e.k0s()}2&o&&e.FS9("pTooltip",e.bMT(1,1,"general.action.cancel"))}function sa(o,g){if(1&o&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.DNE(8,ta,2,1,"span",69)(9,na,1,1,"input",70),e.k0s(),e.j41(10,"td"),e.EFF(11),e.nI1(12,"translate"),e.k0s(),e.j41(13,"td"),e.EFF(14),e.k0s(),e.j41(15,"td"),e.EFF(16),e.k0s(),e.j41(17,"td"),e.DNE(18,ki,3,3,"button",71)(19,ia,3,3,"button",50)(20,ra,3,3,"button",72),e.k0s()()),2&o){const n=g.$implicit;e.R7$(2),e.JRh(n.itemName),e.R7$(2),e.JRh(n.unitName),e.R7$(2),e.JRh(n.clientQuantity),e.R7$(2),e.Y8G("ngIf",!n.isEdit),e.R7$(),e.Y8G("ngIf",n.isEdit),e.R7$(2),e.JRh(e.bMT(12,11,"sales.salesOrder."+n.discountTypeValue)),e.R7$(3),e.SpI(" ",n.discount," "),e.R7$(2),e.JRh(n.price),e.R7$(2),e.Y8G("ngIf",n.isEdit),e.R7$(),e.Y8G("ngIf",!n.isEdit),e.R7$(),e.Y8G("ngIf",n.isEdit)}}function aa(o,g){1&o&&(e.j41(0,"tr"),e.nrm(1,"td",74),e.k0s())}function oa(o,g){if(1&o&&(e.j41(0,"tr")(1,"td",57)(2,"div",58)(3,"p-table",59),e.DNE(4,ea,9,0,"ng-template",24)(5,sa,21,13,"ng-template",25)(6,aa,2,0,"ng-template",60),e.k0s()()()()),2&o){const n=g.$implicit;e.R7$(3),e.Y8G("value",n.offerOrderDetails)}}function pe(o,g){1&o&&(e.j41(0,"div",75),e.EFF(1," general.table.noData "),e.k0s())}function de(o,g){if(1&o){const n=e.RV6();e.j41(0,"div",76)(1,"div",77),e.nrm(2,"ngb-pagination-info",78),e.j41(3,"table-length",79),e.bIt("lengthChange",function(r){e.eBV(n);const d=e.XpG();return e.Njj(d.ListItemChange(r))}),e.k0s()(),e.j41(4,"div",80)(5,"ngb-pagination",81),e.bIt("pageChange",function(r){e.eBV(n);const d=e.XpG();return e.Njj(d.pageChanged(r))}),e.mxI("pageChange",function(r){e.eBV(n);const d=e.XpG();return e.DH7(d.pagination.pageNumber,r)||(d.pagination.pageNumber=r),e.Njj(r)}),e.k0s()()()}if(2&o){const n=e.XpG();e.R7$(2),e.Y8G("pagination",n.pagination),e.R7$(),e.Y8G("lengthTable",n.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",n.pagination.pageSize)("collectionSize",n.pagination.totalItems),e.R50("page",n.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function la(o,g){if(1&o){const n=e.RV6();e.j41(0,"form",82,8),e.bIt("ngSubmit",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.SubmitOrder())}),e.nrm(2,"ngx-ui-loader",83),e.j41(3,"div",84)(4,"div",85)(5,"button",86),e.bIt("click",function(){const r=e.eBV(n).$implicit;return e.Njj(r.dismiss())}),e.k0s()(),e.j41(6,"div",87)(7,"div",88),e.nrm(8,"lord-icon",89),e.j41(9,"div",90),e.nrm(10,"h3",91)(11,"p",92),e.k0s()(),e.j41(12,"div",93),e.nrm(13,"button",94),e.j41(14,"button",95),e.bIt("click",function(){const r=e.eBV(n).$implicit;return e.Njj(r.dismiss())}),e.k0s()()()()()}if(2&o){const n=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderOperationShap)("loaderId",n.deleteLoader)}}function da(o,g){if(1&o){const n=e.RV6();e.j41(0,"form",82,8),e.bIt("ngSubmit",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.cancelOrder())}),e.nrm(2,"ngx-ui-loader",83),e.j41(3,"div",84)(4,"div",85)(5,"button",86),e.bIt("click",function(){const r=e.eBV(n).$implicit;return e.Njj(r.dismiss())}),e.k0s()(),e.j41(6,"div",87)(7,"div",88),e.nrm(8,"lord-icon",89),e.j41(9,"div",90),e.nrm(10,"h3",91)(11,"p",92),e.k0s()(),e.j41(12,"div",93),e.nrm(13,"button",94),e.j41(14,"button",95),e.bIt("click",function(){const r=e.eBV(n).$implicit;return e.Njj(r.dismiss())}),e.k0s()()()()()}if(2&o){const n=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderOperationShap)("loaderId",n.deleteLoader)}}function ca(o,g){if(1&o){const n=e.RV6();e.j41(0,"delete-modal",96),e.bIt("deleteConfirm",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.DeleteConfirm())})("dismiss",function(){const r=e.eBV(n).$implicit;return e.Njj(r.dismiss())}),e.k0s()}}function ma(o,g){}function pa(o,g){if(1&o){const n=e.RV6();e.j41(0,"app-all-orders-details",97),e.bIt("dismiss",function(){const r=e.eBV(n).$implicit;return e.Njj(r.dismiss())}),e.k0s()}if(2&o){const n=e.XpG();e.Y8G("orderDetails",n.orderSelected)}}function ua(o,g){if(1&o&&e.nrm(0,"order-operation",98),2&o){const n=e.XpG();e.Y8G("isOrderEdit",n.isOrderEdit)("isInner",!0)("orderCode",n.clientSelected)}}function Tr(o,g){if(1&o){const n=e.RV6();e.j41(0,"order-timeline",99),e.bIt("dismiss",function(){const r=e.eBV(n).$implicit;return e.Njj(r.dismiss())}),e.k0s()}if(2&o){const n=e.XpG();e.Y8G("orderSelected",n.orderSelected)}}let ha=(()=>{class o extends Qe.w{constructor(n,s,r,d,h,u,E,ce,le,re,q,fe,be,Ie,Re){super(n,s,E,r,d,h,u),this.baseService=r,this.authDaamService=ce,this.teamService=le,this.workTimeService=re,this.excelService=q,this.cityService=fe,this.districtService=be,this.channelService=Ie,this.router=Re,this.title="sales.salesOrder.newOrders",this.titleOperation="sales.salesOrder.newOrders",this.keySelected="",this.assignUsers=[],this.times=[],this.employees=[],this.searchForm={},this.isResolveList=!0,this.employeeTypes=[{id:1,name:"employeeTeam"},{id:2,name:"managment"},{id:3,name:"customerService"}],this.employeeGroups=[],this.activeindex="2",this.active=2,this.formPassword={},this.roles=[],this.teams=[],this.workTimes=[],this.userTypes=[],this.actives=[{id:!0,name:"active"},{id:!1,name:"noActive"}],this.clientSelected=0,this.cities=[],this.districts=[],this.channels=[],this.status=[],this.countLoad=2,this.isOrderEdit=!1,this.orderSelected={},this.users=[],this.setDates=(A,se,Ce)=>{if(A?.from||A?.to){const Ye=A.to||A.from;this.pagination[se]=this.datePipe.transform(A.from||A.to,"yyyy-MM-ddT00:00:00"),this.pagination[Ce]=this.datePipe.transform(Ye,"yyyy-MM-ddT23:59:59.999")}else this.pagination[se]=null,this.pagination[Ce]=null},this.loadentities(),this.GetCities(),this.GetChannels(),this.GetTeams(),this.GetTimes(),this.status=[{name:"None",nameAr:"\u0644\u0627 \u0634\u0626",id:0},{name:"Is Review",nameAr:"\u062a\u0645\u062a \u0627\u0644\u0645\u0631\u0627\u062c\u0639\u0629",id:1},{name:"Is Confirmed",nameAr:"\u062a\u0645 \u0627\u0644\u062a\u0623\u0643\u064a\u062f",id:2},{name:"Is Free",nameAr:"\u0645\u062c\u0627\u0646\u064a",id:3},{name:"Is Reopen",nameAr:"\u062a\u0645\u062a \u0625\u0639\u0627\u062f\u0629 \u0641\u062a\u062d\u0647",id:4},{name:"Is Finish",nameAr:"\u0627\u0646\u062a\u0647\u0649",id:5},{name:"Is Cancel",nameAr:"\u062a\u0645 \u0627\u0644\u0625\u0644\u063a\u0627\u0621",id:6},{name:"Is Assign",nameAr:"\u062a\u0645 \u062a\u0639\u064a\u064a\u0646\u0647",id:7},{name:"Is Urgent",nameAr:"\u0639\u0627\u062c\u0644",id:8},{name:"New",nameAr:"\u062c\u062f\u064a\u062f",id:9}]}loadentities(){this.countLoad=this.countLoad+1,(!this.isResolveList||1!==this.countLoad)&&(this.pagination.status=10,this.baseService.get(this.pagination).pipe((0,N.Q)(this.notifier)).subscribe(n=>{this.ngxLoader.stopLoader(D.a7),this.entities=n.data,this.pagination.totalItems=n.totalItems,this.LoadSuccess()},n=>{this.ngxLoader.stopLoader(D.a7),this.alertService.error(n)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[])}SubmitOrder(){this.ngxLoader.startLoader(D.Fq),console.log(this.operationId),this.baseService.changStatus({id:this.operationId,status:30}).pipe((0,Z.O)(),(0,te.c)(this.mainDelay),(0,F.Z)(),(0,N.Q)(this.notifier),(0,M.j)(()=>this.ngxLoader.stopLoader(D.Fq))).subscribe({next:s=>{this.modalService.dismissAll(),this.loadentities(),this.alertService.success()}})}cancelOrder(){this.ngxLoader.startLoader(D.Fq),console.log(this.operationId),this.baseService.changStatus({id:this.operationId,status:40}).pipe((0,Z.O)(),(0,te.c)(this.mainDelay),(0,F.Z)(),(0,N.Q)(this.notifier),(0,M.j)(()=>this.ngxLoader.stopLoader(D.Fq))).subscribe({next:s=>{this.modalService.dismissAll(),this.loadentities(),this.alertService.success()}})}GetCities(){this.cityService.getDropDown().subscribe(n=>{this.cities=n.data},n=>{console.log(n)})}GetDistricts(n){this.districtService.getByCityId(n).subscribe(s=>{this.districts=s.data},s=>{console.log(s)})}GetChannels(){this.channelService.getDropDown().subscribe(n=>{this.channels=n.data},n=>{console.log(n)})}GetTeams(){this.teamService.getDropDown().subscribe(n=>{this.teams=n.data},n=>{console.log(n)})}GetTimes(){this.workTimeService.getDropDown().subscribe(n=>{this.workTimes=n.data},n=>{console.log(n)})}ngOnInitMore(){}mapForm(n){return{...n}}onUpdateIsActive(n){this.baseService.updateActive(n).pipe((0,N.Q)(this.notifier)).subscribe(s=>{s?this.alertService.success():this.alertService.error("general.message."+s)},s=>{this.alertService.error()})}mapRegisterForm(n){let s={...n};return s.employeeCode=0,s}onSearch(){let n={...this.searchForm};this.ngxLoader.startLoader("allLoader"),this.setDates(n.dates,"visitDateFrom","visitDateTo"),this.setDates(n.creationDates,"creationTimeFrom","creationTimeTo"),this.loadentities()}LoadSuccess(){this.ngxLoader.stopLoader("allLoader")}onReset(){this.form={},this.searchForm={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems}}mapExcel(){let n=[];return this.entities.forEach(s=>{n.push({"Order Code":s.orderCode,"Created Date":s.createdDate,"City Name":s.cityName,"District Name":s.districtName?s.districtName:"--",Status:this.translateService.instant(this.getTrnslate(s)),"Agent Name":s.agentName,Mobile:s.mobile,"Channel Name":s.channelName,"Assigned To":s.teamNames,Times:s.workTimes,"Visit Date":s.visitDate,Services:s.services})}),n}onExportXlsx(){let n=this.mapExcel();this.excelService.exportAsExcelFile(n,this.translateService.instant(this.title),[])}onNavChange(n){1===n.nextId&&(this.activeindex="1"),3===n.nextId&&(this.activeindex="3")}goRegister(){this.router.navigateByUrl("/managment/order/new")}goEdit(n){this.router.navigateByUrl("/managment/order/new")}getStatus(n){return 10==n.offerOrderStatus||20==n.offerOrderStatus?"bg-warning-subtle text-warning":30==n.offerOrderStatus?"bg-success-subtle text-success":40==n.offerOrderStatus?"bg-danger-subtle text-danger":50==n.offerOrderStatus?"bg-danger-success text-success":"bg-warning-subtle text-warning"}checkEdit(n){return!n.isCancel&&!n.isFinish}getTrnslate(n){return n.isCancel?"orderManagement.order.cancel":n.isFinish?"orderManagement.order.finish":n.isUrgent?"bg-danger-subtle text-danger":n.isReopen?"orderManagement.order.reopen":n.isAssign?"orderManagement.order.assign":n.isConfirmed?"orderManagement.order.confirmed":n.isFree?"orderManagement.order.free":"orderManagement.order.new"}openModalClient(n,s,r="xl"){this.clientSelected=n.orderCode,this.orderSelected=n,this.isOrderEdit=!1,this.modalService.open(s,{centered:!0,size:r})}oncityChange(n){this.GetDistricts(n.code)}getTimes(n){return n?.split(",")}getServices(n){return n.split("#")}copytext(n){navigator.clipboard.writeText(n),this.alertService.info(n)}openEditOrderModal(n,s,r="md"){this.form={},this.isOrderEdit=!0,this.clientSelected=n,this.modalService.open(s,{centered:!0,size:r})}OpenOrderTimeLineModel(n,s,r="md"){this.orderSelected=n,this.modalService.open(s,{centered:!0,size:r})}saveQuantity(n,s){this.baseService.UpdateQuantity({id:n,quantity:s.approvedQuantity}).pipe((0,N.Q)(this.notifier)).subscribe(d=>{d.success?(this.alertService.success(),this.loadentities()):this.alertService.error("general.message."+d)},d=>{this.alertService.error()}),console.log("Saved Quantity:",s.approvedQuantity)}static{this.\u0275fac=function(s){return new(s||o)(e.rXU(U.nX),e.rXU(R.c$),e.rXU(Ve),e.rXU(me.u),e.rXU(x.vh),e.rXU(Y.eD),e.rXU(O.Bq),e.rXU(pt.J),e.rXU($t.n),e.rXU(Xt.G),e.rXU(lt.V),e.rXU(Be.h),e.rXU(Ut.m),e.rXU(Mt.l),e.rXU(U.Ix))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-new-order"]],features:[e.Vt3],decls:45,vars:31,consts:[["tableMaster",""],["SubmitOrderModal",""],["cancelOrderModal",""],["deleteModal",""],["clientProfile",""],["orderViewModel",""],["orderModel",""],["OrderTimeLineModel",""],["formEntity","ngForm"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],["overlayColor","rgba(255,255,255,0.05)","fgsColor","rgba(255,255,255,0)",3,"loaderId"],[3,"reset","search","exportXlsx","addNew","showAdd","showExport","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","number","id","id","name","id",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["InputTirmFilter","","type","search","id","clientName","name","clientName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["type","text","mwlFlatpickr","","id","isDate","mode","range","altFormat","d/m/Y",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],[2,"width",".2%"],["translate","",2,"width",".5%"],["pSortableColumn","id","translate","",2,"width","6%"],[1,"ri-expand-up-down-line"],["pSortableColumn","creationTime","translate","",2,"width","12%"],["pSortableColumn","clientId","translate","",2,"width","10%"],["pSortableColumn","clientVisitDate","translate","",2,"width","8%"],["pSortableColumn","totalQuantity","translate","",2,"width","8%"],["pSortableColumn","totalDiscount","translate","",2,"width","7%"],["translate","",2,"width","6%"],["pSortableColumn","netPrice","translate","",2,"width","6%"],["translate","",2,"width","10%"],[1,"fs-5"],["type","button","pRipple","",1,"border-0","p-button-text","p-button-rounded","p-button-plain",3,"pRowToggler","ngClass"],[3,"click"],[1,"code-pointer"],[1,"badge","bg-success-subtle","text-success"],[1,"badge","bg-primary-subtle","text-primary","my-1"],[1,"d-inline"],[1,"ri-history-fill","d-inline","text-primary","fs-16","align-middle","me-1",3,"click"],["class","btn btn-sm btn-primary edit-list mx-1","tooltipPosition","top",3,"pTooltip","click",4,"ngIf"],["tooltipPosition","top",1,"btn","btn-sm","btn-success","edit-list","mx-1",3,"click","pTooltip"],[1,"ri-check-double-fill","align-bottom"],["tooltipPosition","top",1,"btn","btn-sm","btn-danger","edit-list","mx-1",3,"click","pTooltip"],[1,"ri-close-fill","align-bottom"],["tooltipPosition","top",1,"btn","btn-sm","btn-primary","edit-list","mx-1",3,"click","pTooltip"],[1,"ri-edit-2-line","align-bottom"],["colspan","17"],[1,"table-detail"],["dataKey","id",3,"value"],["pTemplate","emptymessage"],["translate","sales.salesOrder.itemName",2,"width","10%"],["translate","sales.salesOrder.unit",2,"width","6%"],["translate","sales.salesOrder.clientQuantity",2,"width","8%"],["translate","sales.salesOrder.approvedQuantity",2,"width","8%"],["translate","sales.salesOrder.discountType",2,"width","5%"],["translate","sales.salesOrder.discount",2,"width","5%"],["translate","sales.salesOrder.price",2,"width","5%"],[2,"width","5%"],[4,"ngIf"],["type","number","class","form-control fs-6",3,"ngModel","ngModelChange",4,"ngIf"],["class","btn btn-sm btn-success edit-list mx-1","tooltipPosition","top",3,"pTooltip","click",4,"ngIf"],["class","btn btn-sm btn-danger edit-list mx-1","tooltipPosition","top",3,"pTooltip","click",4,"ngIf"],["type","number",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["colspan","8"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[3,"ngSubmit"],[3,"hasProgressBar","fgsType","loaderId"],[1,"modal-content"],[1,"modal-header"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","btn-close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mt-2","text-center"],["src","https://cdn.lordicon.com/gdfrsvpt.json","stroke","bold","state","hover-oscillate","trigger","loop","colors","primary:#f7b84b,secondary:#f06548",2,"width","130px","height","130px"],[1,"pt-2","fs-15","mx-4","mx-sm-5"],["translate","orderManagement.order.AreYouSureMessage"],[1,"text-muted","mx-4","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","submit","id","save","translate","general.action.save",1,"btn","w-sm","btn-danger"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light",3,"click"],[3,"deleteConfirm","dismiss"],[3,"dismiss","orderDetails"],[3,"isOrderEdit","isInner","orderCode"],[3,"dismiss","orderSelected"]],template:function(s,r){if(1&s){const d=e.RV6();e.j41(0,"div",9)(1,"div",10)(2,"div",11),e.nrm(3,"ngx-ui-loader",12),e.j41(4,"base-filter",13),e.bIt("reset",function(){return e.eBV(d),e.Njj(r.onReset())})("search",function(){return e.eBV(d),e.Njj(r.onSearch())})("exportXlsx",function(){return e.eBV(d),e.Njj(r.onExportXlsx())})("addNew",function(){return e.eBV(d),e.Njj(r.goRegister())}),e.qex(5,14),e.j41(6,"div",15)(7,"div",16)(8,"input",17),e.nI1(9,"translate"),e.mxI("ngModelChange",function(u){return e.eBV(d),e.DH7(r.pagination.id,u)||(r.pagination.id=u),e.Njj(u)}),e.k0s(),e.nrm(10,"i",18),e.k0s()(),e.j41(11,"div",15)(12,"div",16)(13,"input",19),e.nI1(14,"translate"),e.mxI("ngModelChange",function(u){return e.eBV(d),e.DH7(r.pagination.clientName,u)||(r.pagination.clientName=u),e.Njj(u)}),e.k0s(),e.nrm(15,"i",18),e.k0s()(),e.j41(16,"div",15)(17,"input",20),e.nI1(18,"translate"),e.mxI("ngModelChange",function(u){return e.eBV(d),e.DH7(r.searchForm.dates,u)||(r.searchForm.dates=u),e.Njj(u)}),e.k0s()(),e.j41(19,"div",15)(20,"input",20),e.nI1(21,"translate"),e.mxI("ngModelChange",function(u){return e.eBV(d),e.DH7(r.searchForm.creationDates,u)||(r.searchForm.creationDates=u),e.Njj(u)}),e.k0s()(),e.bVm(),e.k0s(),e.j41(22,"div",21)(23,"div",22)(24,"p-table",23,0),e.bIt("onLazyLoad",function(u){return e.eBV(d),e.Njj(r.tableChange(u))})("selectionChange",function(u){return e.eBV(d),e.Njj(r.onSelectionChange(u))}),e.DNE(26,Ks,28,0,"ng-template",24)(27,Zs,37,25,"ng-template",25)(28,oa,7,1,"ng-template",26),e.k0s()(),e.DNE(29,pe,2,0,"div",27)(30,de,6,8,"div",28),e.k0s()()()(),e.DNE(31,la,15,3,"ng-template",null,1,e.C5r)(33,da,15,3,"ng-template",null,2,e.C5r)(35,ca,1,0,"ng-template",null,3,e.C5r)(37,ma,0,0,"ng-template",null,4,e.C5r)(39,pa,1,1,"ng-template",null,5,e.C5r)(41,ua,1,3,"ng-template",null,6,e.C5r)(43,Tr,1,1,"ng-template",null,7,e.C5r)}2&s&&(e.R7$(3),e.Y8G("loaderId","newLoader"),e.R7$(),e.Y8G("showAdd",!1)("showExport",!1)("totalItems",r.pagination.totalItems)("title",r.title),e.R7$(4),e.FS9("placeholder",e.bMT(9,23,"orderManagement.order.orderCode")),e.R50("ngModel",r.pagination.id),e.R7$(5),e.FS9("placeholder",e.bMT(14,25,"orderManagement.order.agentName")),e.R50("ngModel",r.pagination.clientName),e.R7$(4),e.FS9("placeholder",e.bMT(18,27,"orderManagement.order.visitDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",r.searchForm.dates),e.R7$(3),e.FS9("placeholder",e.bMT(21,29,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",r.searchForm.creationDates),e.R7$(4),e.Y8G("value",r.entities)("rows",r.pagination.pageSize)("lazy",!0)("totalRecords",r.pagination.totalItems),e.R7$(5),e.Y8G("ngIf",r.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",r.pagination.totalItems>0))},dependencies:[x.YU,x.bT,m.qT,m.me,m.Q0,m.BC,m.cb,m.vS,m.cV,O.s5,ne.kL,dt.b,jn.L,jt.w,ct.p,$e.g,R.Mm,G.XI,mt.Ei,G.Tg,G.FP,Y.Cv,_e.m,Bt.m,x.vh,R.D9],encapsulation:2})}}return o})();const Fe=o=>({"card-active":o});function jr(o,g){1&o&&(e.j41(0,"tr",27),e.nrm(1,"th",28),e.j41(2,"th",29),e.EFF(3,"#"),e.k0s(),e.j41(4,"th",30),e.nrm(5,"i",31),e.EFF(6," orderManagement.order.orderCode "),e.k0s(),e.j41(7,"th",32),e.nrm(8,"i",31),e.EFF(9," orderManagement.order.creation "),e.k0s(),e.j41(10,"th",33),e.nrm(11,"i",31),e.EFF(12," orderManagement.order.agentName "),e.k0s(),e.j41(13,"th",34),e.nrm(14,"i",31),e.EFF(15," sales.salesOrder.clientVisitDate "),e.k0s(),e.j41(16,"th",35),e.nrm(17,"i",31),e.EFF(18," sales.salesOrder.shippingTruckName "),e.k0s(),e.j41(19,"th",36),e.nrm(20,"i",31),e.EFF(21," sales.salesOrder.totalQuantity "),e.k0s(),e.j41(22,"th",37),e.nrm(23,"i",31),e.EFF(24," sales.salesOrder.totalDiscount "),e.k0s(),e.j41(25,"th",38),e.EFF(26," orderManagement.order.totalTax "),e.k0s(),e.j41(27,"th",39),e.nrm(28,"i",31),e.EFF(29," sales.salesOrder.netPrice "),e.k0s(),e.nrm(30,"th",40),e.k0s())}function In(o,g){if(1&o){const n=e.RV6();e.j41(0,"tr",41)(1,"td"),e.nrm(2,"button",42),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td")(6,"bdi",43),e.EFF(7),e.k0s()(),e.j41(8,"td")(9,"span",44),e.EFF(10),e.k0s(),e.EFF(11),e.nI1(12,"date"),e.k0s(),e.j41(13,"td")(14,"span",45),e.EFF(15),e.k0s()(),e.j41(16,"td"),e.EFF(17),e.nI1(18,"date"),e.k0s(),e.j41(19,"td"),e.EFF(20),e.k0s(),e.j41(21,"td"),e.EFF(22),e.k0s(),e.j41(23,"td"),e.EFF(24),e.k0s(),e.j41(25,"td"),e.EFF(26),e.k0s(),e.j41(27,"td"),e.EFF(28),e.k0s(),e.j41(29,"td")(30,"div",46)(31,"button",47),e.nI1(32,"translate"),e.bIt("click",function(){const r=e.eBV(n).$implicit,d=e.XpG(),h=e.sdS(34);return e.Njj(d.openShippingModal(r.id,h,"lg"))}),e.nrm(33,"i",48),e.k0s(),e.j41(34,"span",46)(35,"div",49)(36,"button",50),e.nrm(37,"i",51),e.k0s(),e.j41(38,"ul",52)(39,"li")(40,"span",53),e.nrm(41,"i",54)(42,"span",55),e.k0s()(),e.j41(43,"li")(44,"span",53),e.nrm(45,"i",56)(46,"span",57),e.k0s()(),e.j41(47,"li",58),e.bIt("click",function(){const r=e.eBV(n).$implicit,d=e.XpG(),h=e.sdS(40);return e.Njj(d.openStatusModal(r.id,h,50,"md"))}),e.j41(48,"span",53),e.nrm(49,"i",59)(50,"span",60),e.k0s()(),e.j41(51,"li",58),e.bIt("click",function(){const r=e.eBV(n).$implicit,d=e.XpG(),h=e.sdS(40);return e.Njj(d.openStatusModal(r.id,h,10,"md"))}),e.j41(52,"span",53),e.nrm(53,"i",61)(54,"span",62),e.k0s()(),e.j41(55,"li",58),e.bIt("click",function(){const r=e.eBV(n).$implicit,d=e.XpG(),h=e.sdS(36);return e.Njj(d.openModal(r.id,h))}),e.j41(56,"span",53),e.nrm(57,"i",63)(58,"span",64),e.k0s()()()()()()()()}if(2&o){const n=g.$implicit,s=g.rowIndex,r=g.expanded;e.R7$(2),e.Y8G("pRowToggler",n)("ngClass",r?" ri-arrow-down-s-line":"  ri-arrow-up-s-line"),e.R7$(2),e.JRh(s+1),e.R7$(3),e.SpI("#SO#",n.id,""),e.R7$(3),e.SpI("",n.creatorName," "),e.R7$(),e.SpI(" ",e.i5U(12,14,n.creationTime,"yyyy-MM-dd HH:mm")," "),e.R7$(4),e.SpI("",n.clientName," "),e.R7$(2),e.SpI(" ",e.i5U(18,17,n.acutalVisitDate,"yyyy-MM-dd HH:mm"),""),e.R7$(3),e.JRh(n.shippingTruckName),e.R7$(2),e.JRh(n.totalQuantity),e.R7$(2),e.JRh(n.totalDiscount),e.R7$(2),e.JRh(n.totalTax),e.R7$(2),e.JRh(n.netPrice),e.R7$(3),e.FS9("pTooltip",e.bMT(32,20,"sales.salesOrder.shipping"))}}function Ir(o,g){1&o&&(e.j41(0,"tr"),e.nrm(1,"th",69)(2,"th",70)(3,"th",71)(4,"th",72)(5,"th",73)(6,"th",74)(7,"th",75),e.k0s())}function Oi(o,g){if(1&o&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td")(8,"span"),e.EFF(9),e.k0s()(),e.j41(10,"td"),e.EFF(11),e.nI1(12,"translate"),e.k0s(),e.j41(13,"td"),e.EFF(14),e.k0s(),e.j41(15,"td"),e.EFF(16),e.k0s()()),2&o){const n=g.$implicit;e.R7$(2),e.JRh(n.itemName),e.R7$(2),e.JRh(n.unitName),e.R7$(2),e.JRh(n.clientQuantity),e.R7$(3),e.JRh(n.approvedQuantity),e.R7$(2),e.JRh(e.bMT(12,7,"sales.salesOrder."+n.discountTypeValue)),e.R7$(3),e.SpI(" ",n.discount," "),e.R7$(2),e.JRh(n.price)}}function Ke(o,g){1&o&&(e.j41(0,"tr"),e.nrm(1,"td",76),e.k0s())}function yr(o,g){if(1&o&&(e.j41(0,"tr")(1,"td",65)(2,"div",66)(3,"p-table",67),e.DNE(4,Ir,8,0,"ng-template",22)(5,Oi,17,9,"ng-template",23)(6,Ke,2,0,"ng-template",68),e.k0s()()()()),2&o){const n=g.$implicit;e.R7$(3),e.Y8G("value",n.offerOrderDetails)}}function xr(o,g){1&o&&(e.j41(0,"div",77),e.EFF(1," general.table.noData "),e.k0s())}function Fr(o,g){if(1&o){const n=e.RV6();e.j41(0,"div",78)(1,"div",79),e.nrm(2,"ngb-pagination-info",80),e.j41(3,"table-length",81),e.bIt("lengthChange",function(r){e.eBV(n);const d=e.XpG();return e.Njj(d.ListItemChange(r))}),e.k0s()(),e.j41(4,"div",82)(5,"ngb-pagination",83),e.bIt("pageChange",function(r){e.eBV(n);const d=e.XpG();return e.Njj(d.pageChanged(r))}),e.mxI("pageChange",function(r){e.eBV(n);const d=e.XpG();return e.DH7(d.pagination.pageNumber,r)||(d.pagination.pageNumber=r),e.Njj(r)}),e.k0s()()()}if(2&o){const n=e.XpG();e.R7$(2),e.Y8G("pagination",n.pagination),e.R7$(),e.Y8G("lengthTable",n.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",n.pagination.pageSize)("collectionSize",n.pagination.totalItems),e.R50("page",n.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function Rr(o,g){if(1&o){const n=e.RV6();e.j41(0,"form",84,6),e.bIt("ngSubmit",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.cancelOrder())}),e.nrm(2,"ngx-ui-loader",85),e.j41(3,"div",86)(4,"div",87)(5,"button",88),e.bIt("click",function(){const r=e.eBV(n).$implicit;return e.Njj(r.dismiss())}),e.k0s()(),e.j41(6,"div",89)(7,"div",90),e.nrm(8,"lord-icon",91),e.j41(9,"div",92),e.nrm(10,"h3",93)(11,"p",94),e.k0s()(),e.j41(12,"div",95),e.nrm(13,"button",96),e.j41(14,"button",97),e.bIt("click",function(){const r=e.eBV(n).$implicit;return e.Njj(r.dismiss())}),e.k0s()()()()()}if(2&o){const n=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderOperationShap)("loaderId",n.deleteLoader)}}function kr(o,g){if(1&o){const n=e.RV6();e.qex(0),e.j41(1,"div",114)(2,"div",115),e.bIt("click",function(){const r=e.eBV(n).$implicit,d=e.XpG(2);return e.Njj(d.selectTruck(r.id))}),e.j41(3,"div",19)(4,"p"),e.nrm(5,"i",48),e.k0s(),e.j41(6,"p"),e.EFF(7),e.k0s(),e.j41(8,"p"),e.EFF(9),e.k0s(),e.j41(10,"p")(11,"span",116)(12,"span"),e.EFF(13,"#SO#"),e.k0s(),e.j41(14,"span"),e.EFF(15),e.k0s()()()()()(),e.bVm()}if(2&o){const n=g.$implicit;e.R7$(2),e.Y8G("ngClass",e.eq3(4,Fe,n.isSelected)),e.R7$(5),e.JRh(n.name),e.R7$(2),e.JRh(n.truckNumber),e.R7$(6),e.JRh(n.orderCount)}}function Or(o,g){if(1&o){const n=e.RV6();e.j41(0,"div",98)(1,"div",99)(2,"h4",100),e.nrm(3,"span",101),e.k0s(),e.j41(4,"button",102),e.bIt("click",function(){const r=e.eBV(n).$implicit;return e.Njj(r.dismiss("Cross click"))}),e.k0s()(),e.j41(5,"div",89),e.nrm(6,"ngx-ui-loader",85),e.j41(7,"form",103,6),e.bIt("submit",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.updateTruck())}),e.j41(9,"div",7)(10,"div",104)(11,"label",105),e.EFF(12,"sales.salesOrder.clientDeliveryDate"),e.k0s(),e.nrm(13,"input",106),e.k0s(),e.j41(14,"div",104)(15,"label",105),e.EFF(16,"sales.salesOrder.acutalDeliveryDate"),e.k0s(),e.j41(17,"input",107),e.bIt("ngModelChange",function(r){e.eBV(n);const d=e.XpG();return e.Njj(d.dateChangeModal(r))}),e.mxI("ngModelChange",function(r){e.eBV(n);const d=e.XpG();return e.DH7(d.form.acutalVisitDate,r)||(d.form.acutalVisitDate=r),e.Njj(r)}),e.k0s()(),e.j41(18,"div",108),e.DNE(19,kr,16,6,"ng-container",109),e.k0s()(),e.j41(20,"div",110)(21,"button",111),e.nrm(22,"i",112)(23,"span",113),e.k0s()()()()()}if(2&o){const n=e.sdS(8),s=e.XpG();e.R7$(6),e.Y8G("hasProgressBar",!1)("fgsType",s.loaderOperationShap)("loaderId",s.operationLoader),e.R7$(7),e.Y8G("disabled",!0)("readonly",!0)("value",s.form.clientVisitDate),e.R7$(4),e.R50("ngModel",s.form.acutalVisitDate),e.Y8G("altInput",!0)("enableTime",!0)("convertModelValue",!0)("dateFormat","d-m-Y H:i"),e.R7$(2),e.Y8G("ngForOf",s.truncks),e.R7$(2),e.Y8G("disabled",!n.valid)}}function Xe(o,g){if(1&o){const n=e.RV6();e.j41(0,"cancel-sales-model",117),e.bIt("success",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.loadentities())})("dismiss",function(){const r=e.eBV(n).$implicit;return e.Njj(r.dismiss())}),e.k0s()}if(2&o){const n=e.XpG();e.Y8G("orderId",n.orderSelected)}}function ga(o,g){if(1&o){const n=e.RV6();e.j41(0,"order-timeline",118),e.bIt("dismiss",function(){const r=e.eBV(n).$implicit;return e.Njj(r.dismiss())}),e.k0s()}if(2&o){const n=e.XpG();e.Y8G("orderSelected",n.orderSelected)}}function Ze(o,g){if(1&o){const n=e.RV6();e.j41(0,"form",84,6),e.bIt("ngSubmit",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.SubmitOrder())}),e.nrm(2,"ngx-ui-loader",85),e.j41(3,"div",86)(4,"div",87)(5,"button",88),e.bIt("click",function(){const r=e.eBV(n).$implicit;return e.Njj(r.dismiss())}),e.k0s()(),e.j41(6,"div",89)(7,"div",90),e.nrm(8,"lord-icon",91),e.j41(9,"div",92),e.nrm(10,"h3",93)(11,"p",94),e.k0s()(),e.j41(12,"div",95),e.nrm(13,"button",96),e.j41(14,"button",97),e.bIt("click",function(){const r=e.eBV(n).$implicit;return e.Njj(r.dismiss())}),e.k0s()()()()()}if(2&o){const n=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderOperationShap)("loaderId",n.deleteLoader)}}let fa=(()=>{class o extends Qe.w{constructor(n,s,r,d,h,u,E,ce,le,re,q,fe,be,Ie,Re){super(n,s,E,r,d,h,u),this.baseService=r,this.authDaamService=ce,this.teamService=le,this.workTimeService=re,this.excelService=q,this.cityService=fe,this.districtService=be,this.channelService=Ie,this.router=Re,this.title="sales.salesOrder.sureOrder",this.titleOperation="sales.salesOrder.sureOrder",this.keySelected="",this.assignUsers=[],this.times=[],this.employees=[],this.searchForm={},this.isResolveList=!0,this.employeeTypes=[{id:1,name:"employeeTeam"},{id:2,name:"managment"},{id:3,name:"customerService"}],this.employeeGroups=[],this.activeindex="2",this.active=2,this.formPassword={},this.roles=[],this.teams=[],this.workTimes=[],this.userTypes=[],this.actives=[{id:!0,name:"active"},{id:!1,name:"noActive"}],this.clientSelected=0,this.cities=[],this.districts=[],this.channels=[],this.status=[],this.countLoad=2,this.isOrderEdit=!1,this.orderSelected={},this.users=[],this.truncks=[],this.setDates=(A,se,Ce)=>{if(A?.from||A?.to){const Ye=A.to||A.from;this.pagination[se]=this.datePipe.transform(A.from||A.to,"yyyy-MM-ddT00:00:00"),this.pagination[Ce]=this.datePipe.transform(Ye,"yyyy-MM-ddT23:59:59.999")}else this.pagination[se]=null,this.pagination[Ce]=null},this.loadentities()}loadentities(){this.countLoad=this.countLoad+1,(!this.isResolveList||1!==this.countLoad)&&(this.pagination.status=30,this.baseService.get(this.pagination).pipe((0,N.Q)(this.notifier)).subscribe(n=>{this.ngxLoader.stopLoader(D.a7),this.entities=n.data,this.pagination.totalItems=n.totalItems,this.LoadSuccess()},n=>{this.ngxLoader.stopLoader(D.a7),this.alertService.error(n)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[])}openModal(n,s,r="md"){this.isOrderEdit=!1,this.form={},this.orderSelected=n,this.modalService.open(s,{centered:!0,size:r})}SubmitOrder(){this.ngxLoader.startLoader(D.Fq),this.baseService.changStatus({id:this.form.id,status:this.form.status}).pipe((0,Z.O)(),(0,te.c)(this.mainDelay),(0,F.Z)(),(0,N.Q)(this.notifier),(0,M.j)(()=>this.ngxLoader.stopLoader(D.Fq))).subscribe({next:s=>{this.modalService.dismissAll(),this.loadentities(),this.alertService.success()}})}cancelOrder(){this.ngxLoader.startLoader(D.Fq),console.log(this.operationId),this.baseService.changStatus({id:this.operationId,status:40}).pipe((0,Z.O)(),(0,te.c)(this.mainDelay),(0,F.Z)(),(0,N.Q)(this.notifier),(0,M.j)(()=>this.ngxLoader.stopLoader(D.Fq))).subscribe({next:s=>{this.modalService.dismissAll(),this.loadentities(),this.alertService.success()}})}GetDistricts(n){this.districtService.getByCityId(n).subscribe(s=>{this.districts=s.data},s=>{console.log(s)})}ngOnInitMore(){}mapForm(n){return{...n}}onUpdateIsActive(n){this.baseService.updateActive(n).pipe((0,N.Q)(this.notifier)).subscribe(s=>{s?this.alertService.success():this.alertService.error("general.message."+s)},s=>{this.alertService.error()})}mapRegisterForm(n){let s={...n};return s.employeeCode=0,s}onSearch(){let n={...this.searchForm};this.ngxLoader.startLoader("allLoader"),this.setDates(n.dates,"visitDateFrom","visitDateTo"),this.setDates(n.creationDates,"creationTimeFrom","creationTimeTo"),this.loadentities()}LoadSuccess(){this.ngxLoader.stopLoader("allLoader")}onReset(){this.form={},this.searchForm={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems}}configRoute(){this.routerActive.data.pipe((0,N.Q)(this.notifier)).subscribe(n=>{this.entities=n.data,this.pagination.totalItems=n.data?.totalItems},()=>{this.alertService.error()})}mapExcel(){let n=[];return this.entities.forEach(s=>{n.push({"Order Code":s.orderCode,"Created Date":s.createdDate,"City Name":s.cityName,"District Name":s.districtName?s.districtName:"--","Agent Name":s.agentName,Mobile:s.mobile,"Channel Name":s.channelName,"Assigned To":s.teamNames,Times:s.workTimes,"Visit Date":s.visitDate,Services:s.services})}),n}onExportXlsx(){let n=this.mapExcel();this.excelService.exportAsExcelFile(n,this.translateService.instant(this.title),[])}onNavChange(n){1===n.nextId&&(this.activeindex="1"),3===n.nextId&&(this.activeindex="3")}goRegister(){this.router.navigateByUrl("/managment/order/new")}goEdit(n){this.router.navigateByUrl("/managment/order/new")}getStatus(n){return 10==n.offerOrderStatus||20==n.offerOrderStatus?"bg-warning-subtle text-warning":30==n.offerOrderStatus?"bg-success-subtle text-success":40==n.offerOrderStatus?"bg-danger-subtle text-danger":50==n.offerOrderStatus?"bg-danger-success text-success":"bg-warning-subtle text-warning"}checkEdit(n){return!n.isCancel&&!n.isFinish}openStatusModal(n,s,r,d="md"){this.isEditForm=!1,this.form={},this.form={id:n,status:r},this.modalService.open(s,{centered:!0,size:d})}openModalClient(n,s,r="xl"){this.clientSelected=n.orderCode,this.form=n,this.isOrderEdit=!1,this.modalService.open(s,{centered:!0,size:r})}copytext(n){navigator.clipboard.writeText(n),this.alertService.info(n)}openEditOrderModal(n,s,r="md"){this.form={},this.isOrderEdit=!0,this.clientSelected=n,this.modalService.open(s,{centered:!0,size:r})}OpenOrderTimeLineModel(n,s,r="md"){this.orderSelected=n,this.modalService.open(s,{centered:!0,size:r})}selectTruck(n){this.truncks=this.truncks.map(s=>({...s,isSelected:s.id===n}))}getSelectedTruckId(){const n=this.truncks.find(s=>s.isSelected);return n?n.id:null}updateTruck(){let n=this.getSelectedTruckId();if(null==n)return void this.alertService.error("sales.salesOrder.plzSelectTrunck");let s={shippingTruckId:n,id:this.form.id,acutalVisitDate:this.datePipe.transform(this.form.acutalVisitDate,"yyyy-MM-ddTHH:mm:00.000")};this.ngxLoader.startLoader(this.operationLoader),this.baseService.updateTruck(s).pipe((0,Z.O)(),(0,te.c)(this.mainDelay),(0,F.Z)(),(0,N.Q)(this.notifier),(0,M.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(r=>{r.success?this.submitFunished():this.alertService.error("general.message."+r.message)},r=>{this.alertService.error("general.message."+r)})}openShippingModal(n,s,r="md"){this.baseService.GetTrucks({id:n,acutalVisitDate:null}).subscribe(h=>{h.success?(this.form=h.data.order,this.form.clientVisitDate=this.formatDate(this.form.clientVisitDate),this.form.acutalVisitDate=this.formatDate(this.form.acutalVisitDate),this.truncks=h.data.truncks,this.modalService.open(s,{centered:!0,size:r})):this.alertService.error("general.message."+h.message)},h=>{this.alertService.error("general.message."+h)})}dateChangeModal(n){n=new Date(n);let s={id:this.form.id,acutalVisitDate:this.datePipe.transform(n,"yyyy-MM-ddT00:00:00.000")};this.baseService.GetTrucks(s).subscribe(r=>{r.success?this.truncks=r.data.truncks:this.alertService.error("general.message."+r.message)},r=>{this.alertService.error("general.message."+r)})}formatDate(n){if(!n)return"";const s=new Date(n);return s.getDate().toString().padStart(2,"0")+"-"+(s.getMonth()+1).toString().padStart(2,"0")+"-"+s.getFullYear()+" "+s.getHours().toString().padStart(2,"0")+":"+s.getMinutes().toString().padStart(2,"0")}static{this.\u0275fac=function(s){return new(s||o)(e.rXU(U.nX),e.rXU(R.c$),e.rXU(Ve),e.rXU(me.u),e.rXU(x.vh),e.rXU(Y.eD),e.rXU(O.Bq),e.rXU(pt.J),e.rXU($t.n),e.rXU(Xt.G),e.rXU(lt.V),e.rXU(Be.h),e.rXU(Ut.m),e.rXU(Mt.l),e.rXU(U.Ix))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-sure-order"]],features:[e.Vt3],decls:41,vars:31,consts:[["tableMaster",""],["cancelOrderModal",""],["SubmitOrderModal",""],["deleteModal",""],["OrderTimeLineModel",""],["StatusOrderModal",""],["formEntity","ngForm"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],["overlayColor","rgba(255,255,255,0.05)","fgsColor","rgba(255,255,255,0)",3,"loaderId"],[3,"reset","search","exportXlsx","addNew","showAdd","showExport","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","number","id","id","name","id",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["InputTirmFilter","","type","search","id","clientName","name","clientName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["type","text","mwlFlatpickr","","id","isDate","mode","range","altFormat","d/m/Y",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],[2,"width",".2%"],["translate","",2,"width",".5%"],["pSortableColumn","id","translate","",2,"width","6%"],[1,"ri-expand-up-down-line"],["pSortableColumn","creationTime","translate","",2,"width","12%"],["pSortableColumn","clientId","translate","",2,"width","10%"],["pSortableColumn","clientVisitDate","translate","",2,"width","8%"],["pSortableColumn","shippingTruckName","translate","",2,"width","8%"],["pSortableColumn","totalQuantity","translate","",2,"width","8%"],["pSortableColumn","totalDiscount","translate","",2,"width","7%"],["translate","",2,"width","6%"],["pSortableColumn","netPrice","translate","",2,"width","6%"],["translate","",2,"width","10%"],[1,"fs-5"],["type","button","pRipple","",1,"border-0","p-button-text","p-button-rounded","p-button-plain",3,"pRowToggler","ngClass"],[1,"code-pointer"],[1,"badge","bg-success-subtle","text-success"],[1,"badge","bg-primary-subtle","text-primary","my-1"],[1,"d-inline-block"],["tooltipPosition","top",1,"btn","btn-sm","btn-primary","edit-list","mx-1",3,"click","pTooltip"],[1,"ri-truck-line","align-bottom"],[1,"dropdown-custom","d-inline-block"],["type","button",1,"btn","dropbtn","btn-soft-secondary","btn-sm","dropdown-custom","arrow-none"],[1,"ri-more-fill"],[1,"dropdown-menu","dropdown-menu-end","dropdown-content",2,"left","0"],[1,"dropdown-item"],[1,"text-primary","ri-printer-line","align-bottom","me-2"],["translate","sales.salesOrder.printBillOfLading"],[1,"text-success","ri-pencil-fill","align-bottom","me-2"],["translate","general.action.edit"],[3,"click"],[1,"text-primary","ri-check-double-fill","align-bottom","me-2"],["translate","sales.salesOrder.assignOrder"],[1,"text-warning","ri-skip-back-fill","align-bottom","me-2"],["translate","sales.salesOrder.newOrder"],[1,"text-danger","ri-close-fill","align-bottom","me-2"],["translate","general.action.cancel"],["colspan","17"],[1,"table-detail"],["dataKey","id",3,"value"],["pTemplate","emptymessage"],["translate","sales.salesOrder.itemName",2,"width","10%"],["translate","sales.salesOrder.unit",2,"width","6%"],["translate","sales.salesOrder.clientQuantity",2,"width","8%"],["translate","sales.salesOrder.approvedQuantity",2,"width","8%"],["translate","sales.salesOrder.discountType",2,"width","5%"],["translate","sales.salesOrder.discount",2,"width","5%"],["translate","sales.salesOrder.price",2,"width","5%"],["colspan","8"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[3,"ngSubmit"],[3,"hasProgressBar","fgsType","loaderId"],[1,"modal-content"],[1,"modal-header"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","btn-close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mt-2","text-center"],["src","https://cdn.lordicon.com/gdfrsvpt.json","stroke","bold","state","hover-oscillate","trigger","loop","colors","primary:#f7b84b,secondary:#f06548",2,"width","130px","height","130px"],[1,"pt-2","fs-15","mx-4","mx-sm-5"],["translate","orderManagement.order.AreYouSureMessage"],[1,"text-muted","mx-4","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","submit","id","save","translate","general.action.save",1,"btn","w-sm","btn-danger"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light",3,"click"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["translate","sales.salesOrder.truckUpdate"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[3,"submit"],[1,"col-12","col-md-4"],["for","name","translate","",1,"fw-bold","form-label"],["name","clientVisitDate","type","datetime",1,"form-control",3,"disabled","readonly","value"],["name","acutalVisitDate","type","text","mwlFlatpickr","","altFormat","d-m-Y H:i",1,"form-control","flatpickr-input",3,"ngModelChange","ngModel","altInput","enableTime","convertModelValue","dateFormat"],[1,"row","truck-card","mt-5","justify-content-center"],[4,"ngFor","ngForOf"],[1,"text-center"],["type","submit","type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],[1,"col-12","col-md-3"],[1,"card","cursor-pointer",3,"click","ngClass"],[1,"badge","bg-success-subtle","text-success","my-1"],[3,"success","dismiss","orderId"],[3,"dismiss","orderSelected"]],template:function(s,r){if(1&s){const d=e.RV6();e.j41(0,"div",7)(1,"div",8)(2,"div",9),e.nrm(3,"ngx-ui-loader",10),e.j41(4,"base-filter",11),e.bIt("reset",function(){return e.eBV(d),e.Njj(r.onReset())})("search",function(){return e.eBV(d),e.Njj(r.onSearch())})("exportXlsx",function(){return e.eBV(d),e.Njj(r.onExportXlsx())})("addNew",function(){return e.eBV(d),e.Njj(r.goRegister())}),e.qex(5,12),e.j41(6,"div",13)(7,"div",14)(8,"input",15),e.nI1(9,"translate"),e.mxI("ngModelChange",function(u){return e.eBV(d),e.DH7(r.pagination.id,u)||(r.pagination.id=u),e.Njj(u)}),e.k0s(),e.nrm(10,"i",16),e.k0s()(),e.j41(11,"div",13)(12,"div",14)(13,"input",17),e.nI1(14,"translate"),e.mxI("ngModelChange",function(u){return e.eBV(d),e.DH7(r.pagination.clientName,u)||(r.pagination.clientName=u),e.Njj(u)}),e.k0s(),e.nrm(15,"i",16),e.k0s()(),e.j41(16,"div",13)(17,"input",18),e.nI1(18,"translate"),e.mxI("ngModelChange",function(u){return e.eBV(d),e.DH7(r.searchForm.dates,u)||(r.searchForm.dates=u),e.Njj(u)}),e.k0s()(),e.j41(19,"div",13)(20,"input",18),e.nI1(21,"translate"),e.mxI("ngModelChange",function(u){return e.eBV(d),e.DH7(r.searchForm.creationDates,u)||(r.searchForm.creationDates=u),e.Njj(u)}),e.k0s()(),e.bVm(),e.k0s(),e.j41(22,"div",19)(23,"div",20)(24,"p-table",21,0),e.bIt("onLazyLoad",function(u){return e.eBV(d),e.Njj(r.tableChange(u))})("selectionChange",function(u){return e.eBV(d),e.Njj(r.onSelectionChange(u))}),e.DNE(26,jr,31,0,"ng-template",22)(27,In,59,22,"ng-template",23)(28,yr,7,1,"ng-template",24),e.k0s()(),e.DNE(29,xr,2,0,"div",25)(30,Fr,6,8,"div",26),e.k0s()()()(),e.DNE(31,Rr,15,3,"ng-template",null,1,e.C5r)(33,Or,24,13,"ng-template",null,2,e.C5r)(35,Xe,1,1,"ng-template",null,3,e.C5r)(37,ga,1,1,"ng-template",null,4,e.C5r)(39,Ze,15,3,"ng-template",null,5,e.C5r)}2&s&&(e.R7$(3),e.Y8G("loaderId","sureLoader"),e.R7$(),e.Y8G("showAdd",!1)("showExport",!1)("totalItems",r.pagination.totalItems)("title",r.title),e.R7$(4),e.FS9("placeholder",e.bMT(9,23,"orderManagement.order.orderCode")),e.R50("ngModel",r.pagination.id),e.R7$(5),e.FS9("placeholder",e.bMT(14,25,"orderManagement.order.agentName")),e.R50("ngModel",r.pagination.clientName),e.R7$(4),e.FS9("placeholder",e.bMT(18,27,"orderManagement.order.visitDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",r.searchForm.dates),e.R7$(3),e.FS9("placeholder",e.bMT(21,29,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",r.searchForm.creationDates),e.R7$(4),e.Y8G("value",r.entities)("rows",r.pagination.pageSize)("lazy",!0)("totalRecords",r.pagination.totalItems),e.R7$(5),e.Y8G("ngIf",r.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",r.pagination.totalItems>0))},dependencies:[x.YU,x.Sq,x.bT,m.qT,m.me,m.Q0,m.BC,m.cb,m.vS,m.cV,O.s5,ne.kL,dt.b,ct.p,$e.g,R.Mm,G.XI,mt.Ei,G.Tg,G.FP,Y.Cv,_e.m,Bt.m,Yn,x.vh,R.D9],encapsulation:2})}}return o})();function Mr(o,g){1&o&&(e.j41(0,"tr",28),e.nrm(1,"th",29),e.j41(2,"th",30),e.EFF(3,"#"),e.k0s(),e.j41(4,"th",31),e.nrm(5,"i",32),e.EFF(6," orderManagement.order.orderCode "),e.k0s(),e.j41(7,"th",33),e.nrm(8,"i",32),e.EFF(9," orderManagement.order.creation "),e.k0s(),e.j41(10,"th",34),e.nrm(11,"i",32),e.EFF(12," orderManagement.order.agentName "),e.k0s(),e.j41(13,"th",35),e.EFF(14," sales.salesOrder.shippingTruckName "),e.k0s(),e.j41(15,"th",36),e.nrm(16,"i",32),e.EFF(17," sales.salesOrder.clientVisitDate "),e.k0s(),e.j41(18,"th",37),e.nrm(19,"i",32),e.EFF(20," sales.salesOrder.totalQuantity "),e.k0s(),e.j41(21,"th",38),e.nrm(22,"i",32),e.EFF(23," sales.salesOrder.totalDiscount "),e.k0s(),e.j41(24,"th",39),e.nrm(25,"i",32),e.EFF(26," sales.salesOrder.netPrice "),e.k0s(),e.nrm(27,"th",40),e.k0s())}function wt(o,g){if(1&o){const n=e.RV6();e.j41(0,"tr",41)(1,"td"),e.nrm(2,"button",42),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td",43),e.bIt("click",function(){const r=e.eBV(n).$implicit,d=e.XpG(),h=e.sdS(38);return e.Njj(d.openModalClient(r,h,"lg"))}),e.j41(6,"bdi",44),e.EFF(7),e.k0s()(),e.j41(8,"td")(9,"span",45),e.EFF(10),e.k0s(),e.EFF(11),e.nI1(12,"date"),e.k0s(),e.j41(13,"td",43),e.bIt("click",function(){const r=e.eBV(n).$implicit,d=e.XpG(),h=e.sdS(36);return e.Njj(d.openModalClient(r,h))}),e.j41(14,"span",46),e.EFF(15),e.k0s()(),e.j41(16,"td"),e.EFF(17),e.k0s(),e.j41(18,"td"),e.EFF(19),e.nI1(20,"date"),e.k0s(),e.j41(21,"td"),e.EFF(22),e.k0s(),e.j41(23,"td"),e.EFF(24),e.k0s(),e.j41(25,"td"),e.EFF(26),e.k0s(),e.j41(27,"td")(28,"button",47),e.nI1(29,"translate"),e.nrm(30,"i",48),e.k0s()()()}if(2&o){const n=g.$implicit,s=g.rowIndex,r=g.expanded;e.R7$(2),e.Y8G("pRowToggler",n)("ngClass",r?" ri-arrow-down-s-line":"  ri-arrow-up-s-line"),e.R7$(2),e.JRh(s+1),e.R7$(3),e.SpI("#SO#",n.id,""),e.R7$(3),e.SpI("",n.creatorName," "),e.R7$(),e.SpI(" ",e.i5U(12,13,n.creationTime,"yyyy-MM-dd")," "),e.R7$(4),e.SpI("",n.clientName," "),e.R7$(2),e.JRh(n.shippingTruckName),e.R7$(2),e.SpI(" ",e.i5U(20,16,n.clientVisitDate,"yyyy-MM-dd"),""),e.R7$(3),e.JRh(n.totalQuantity),e.R7$(2),e.JRh(n.totalDiscount),e.R7$(2),e.JRh(n.netPrice),e.R7$(2),e.FS9("pTooltip",e.bMT(29,19,"sales.salesOrder.printOrder"))}}function zn(o,g){1&o&&(e.j41(0,"tr"),e.nrm(1,"th",52)(2,"th",53)(3,"th",54)(4,"th",55)(5,"th",56)(6,"th",57)(7,"th",58),e.k0s())}function Mi(o,g){if(1&o&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.nI1(11,"translate"),e.k0s(),e.j41(12,"td"),e.EFF(13),e.k0s(),e.j41(14,"td"),e.EFF(15),e.k0s()()),2&o){const n=g.$implicit;e.R7$(2),e.JRh(n.itemName),e.R7$(2),e.JRh(n.unitName),e.R7$(2),e.JRh(n.clientQuantity),e.R7$(2),e.JRh(n.approvedQuantity),e.R7$(2),e.JRh(e.bMT(11,7,"sales.salesOrder."+n.discountTypeValue)),e.R7$(3),e.JRh(n.discount),e.R7$(2),e.JRh(n.price)}}function ge(o,g){1&o&&(e.j41(0,"tr"),e.nrm(1,"td",59),e.k0s())}function Et(o,g){if(1&o&&(e.j41(0,"tr")(1,"td",49)(2,"div")(3,"p-table",50),e.DNE(4,zn,8,0,"ng-template",23)(5,Mi,16,9,"ng-template",24)(6,ge,2,0,"ng-template",51),e.k0s()()()()),2&o){const n=g.$implicit;e.R7$(3),e.Y8G("value",n.offerOrderDetails)}}function wi(o,g){1&o&&(e.j41(0,"div",60),e.EFF(1," general.table.noData "),e.k0s())}function _a(o,g){if(1&o){const n=e.RV6();e.j41(0,"div",61)(1,"div",62),e.nrm(2,"ngb-pagination-info",63),e.j41(3,"table-length",64),e.bIt("lengthChange",function(r){e.eBV(n);const d=e.XpG();return e.Njj(d.ListItemChange(r))}),e.k0s()(),e.j41(4,"div",65)(5,"ngb-pagination",66),e.bIt("pageChange",function(r){e.eBV(n);const d=e.XpG();return e.Njj(d.pageChanged(r))}),e.mxI("pageChange",function(r){e.eBV(n);const d=e.XpG();return e.DH7(d.pagination.pageNumber,r)||(d.pagination.pageNumber=r),e.Njj(r)}),e.k0s()()()}if(2&o){const n=e.XpG();e.R7$(2),e.Y8G("pagination",n.pagination),e.R7$(),e.Y8G("lengthTable",n.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",n.pagination.pageSize)("collectionSize",n.pagination.totalItems),e.R50("page",n.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function Ei(o,g){if(1&o){const n=e.RV6();e.j41(0,"form",67,7),e.bIt("ngSubmit",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.SubmitOrder())}),e.nrm(2,"ngx-ui-loader",68),e.j41(3,"div",69)(4,"div",70)(5,"button",71),e.bIt("click",function(){const r=e.eBV(n).$implicit;return e.Njj(r.dismiss())}),e.k0s()(),e.j41(6,"div",72)(7,"div",73),e.nrm(8,"lord-icon",74),e.j41(9,"div",75),e.nrm(10,"h3",76)(11,"p",77),e.k0s()(),e.j41(12,"div",78),e.nrm(13,"button",79),e.j41(14,"button",80),e.bIt("click",function(){const r=e.eBV(n).$implicit;return e.Njj(r.dismiss())}),e.k0s()()()()()}if(2&o){const n=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderOperationShap)("loaderId",n.deleteLoader)}}function ba(o,g){if(1&o){const n=e.RV6();e.j41(0,"delete-modal",81),e.bIt("deleteConfirm",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.DeleteConfirm())})("dismiss",function(){const r=e.eBV(n).$implicit;return e.Njj(r.dismiss())}),e.k0s()}}function va(o,g){}function Ca(o,g){if(1&o){const n=e.RV6();e.j41(0,"app-all-orders-details",82),e.bIt("dismiss",function(){const r=e.eBV(n).$implicit;return e.Njj(r.dismiss())}),e.k0s()}if(2&o){const n=e.XpG();e.Y8G("orderDetails",n.orderSelected)}}function wr(o,g){if(1&o&&e.nrm(0,"order-operation",83),2&o){const n=e.XpG();e.Y8G("isOrderEdit",n.isOrderEdit)("isInner",!0)("orderCode",n.clientSelected)}}function qn(o,g){if(1&o){const n=e.RV6();e.j41(0,"order-timeline",84),e.bIt("dismiss",function(){const r=e.eBV(n).$implicit;return e.Njj(r.dismiss())}),e.k0s()}if(2&o){const n=e.XpG();e.Y8G("orderSelected",n.orderSelected)}}let on=(()=>{class o extends Qe.w{constructor(n,s,r,d,h,u,E,ce,le,re,q,fe,be,Ie,Re){super(n,s,E,r,d,h,u),this.baseService=r,this.authDaamService=ce,this.teamService=le,this.workTimeService=re,this.excelService=q,this.cityService=fe,this.districtService=be,this.channelService=Ie,this.router=Re,this.title="sales.salesOrder.completeOrder",this.titleOperation="sales.salesOrder.completeOrder",this.keySelected="",this.assignUsers=[],this.times=[],this.employees=[],this.searchForm={},this.isResolveList=!0,this.employeeTypes=[{id:1,name:"employeeTeam"},{id:2,name:"managment"},{id:3,name:"customerService"}],this.employeeGroups=[],this.activeindex="2",this.active=2,this.formPassword={},this.roles=[],this.teams=[],this.workTimes=[],this.userTypes=[],this.actives=[{id:!0,name:"active"},{id:!1,name:"noActive"}],this.clientSelected=0,this.cities=[],this.districts=[],this.channels=[],this.status=[],this.countLoad=2,this.isOrderEdit=!1,this.orderSelected={},this.users=[],this.setDates=(A,se,Ce)=>{if(A?.from||A?.to){const Ye=A.to||A.from;this.pagination[se]=this.datePipe.transform(A.from||A.to,"yyyy-MM-ddT00:00:00"),this.pagination[Ce]=this.datePipe.transform(Ye,"yyyy-MM-ddT23:59:59.999")}else this.pagination[se]=null,this.pagination[Ce]=null},this.loadentities(),this.GetCities(),this.GetChannels(),this.GetTeams(),this.GetTimes(),this.status=[{name:"None",nameAr:"\u0644\u0627 \u0634\u0626",id:0},{name:"Is Review",nameAr:"\u062a\u0645\u062a \u0627\u0644\u0645\u0631\u0627\u062c\u0639\u0629",id:1},{name:"Is Confirmed",nameAr:"\u062a\u0645 \u0627\u0644\u062a\u0623\u0643\u064a\u062f",id:2},{name:"Is Free",nameAr:"\u0645\u062c\u0627\u0646\u064a",id:3},{name:"Is Reopen",nameAr:"\u062a\u0645\u062a \u0625\u0639\u0627\u062f\u0629 \u0641\u062a\u062d\u0647",id:4},{name:"Is Finish",nameAr:"\u0627\u0646\u062a\u0647\u0649",id:5},{name:"Is Cancel",nameAr:"\u062a\u0645 \u0627\u0644\u0625\u0644\u063a\u0627\u0621",id:6},{name:"Is Assign",nameAr:"\u062a\u0645 \u062a\u0639\u064a\u064a\u0646\u0647",id:7},{name:"Is Urgent",nameAr:"\u0639\u0627\u062c\u0644",id:8},{name:"New",nameAr:"\u062c\u062f\u064a\u062f",id:9}]}loadentities(){this.countLoad=this.countLoad+1,(!this.isResolveList||1!==this.countLoad)&&(this.pagination.status=60,this.baseService.get(this.pagination).pipe((0,N.Q)(this.notifier)).subscribe(n=>{this.ngxLoader.stopLoader(D.a7),this.entities=n.data,this.pagination.totalItems=n.totalItems,this.LoadSuccess()},n=>{this.ngxLoader.stopLoader(D.a7),this.alertService.error(n)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[])}SubmitOrder(){}GetCities(){this.cityService.getDropDown().subscribe(n=>{this.cities=n.data},n=>{console.log(n)})}GetDistricts(n){this.districtService.getByCityId(n).subscribe(s=>{this.districts=s.data},s=>{console.log(s)})}GetChannels(){this.channelService.getDropDown().subscribe(n=>{this.channels=n.data},n=>{console.log(n)})}GetTeams(){this.teamService.getDropDown().subscribe(n=>{this.teams=n.data},n=>{console.log(n)})}GetTimes(){this.workTimeService.getDropDown().subscribe(n=>{this.workTimes=n.data},n=>{console.log(n)})}ngOnInitMore(){}mapForm(n){return{...n}}onUpdateIsActive(n){this.baseService.updateActive(n).pipe((0,N.Q)(this.notifier)).subscribe(s=>{s?this.alertService.success():this.alertService.error("general.message."+s)},s=>{this.alertService.error()})}mapRegisterForm(n){let s={...n};return s.employeeCode=0,s}onSearch(){let n={...this.searchForm};this.ngxLoader.startLoader("allLoader"),this.setDates(n.dates,"visitDateFrom","visitDateTo"),this.setDates(n.creationDates,"creationTimeFrom","creationTimeTo"),this.loadentities()}LoadSuccess(){this.ngxLoader.stopLoader("allLoader")}onReset(){this.form={},this.searchForm={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems}}configRoute(){this.routerActive.data.pipe((0,N.Q)(this.notifier)).subscribe(n=>{this.entities=n.data,this.pagination.totalItems=n.data?.totalItems},()=>{this.alertService.error()})}mapExcel(){let n=[];return this.entities.forEach(s=>{n.push({"Order Code":s.orderCode,"Created Date":s.createdDate,"City Name":s.cityName,"District Name":s.districtName?s.districtName:"--",Status:this.translateService.instant(this.getTrnslate(s)),"Agent Name":s.agentName,Mobile:s.mobile,"Channel Name":s.channelName,"Assigned To":s.teamNames,Times:s.workTimes,"Visit Date":s.visitDate,Services:s.services})}),n}onExportXlsx(){let n=this.mapExcel();this.excelService.exportAsExcelFile(n,this.translateService.instant(this.title),[])}onNavChange(n){1===n.nextId&&(this.activeindex="1"),3===n.nextId&&(this.activeindex="3")}goRegister(){this.router.navigateByUrl("/managment/order/new")}goEdit(n){this.router.navigateByUrl("/managment/order/new")}getStatus(n){return 10==n.offerOrderStatus||20==n.offerOrderStatus?"bg-warning-subtle text-warning":30==n.offerOrderStatus?"bg-success-subtle text-success":40==n.offerOrderStatus?"bg-danger-subtle text-danger":50==n.offerOrderStatus?"bg-danger-success text-success":"bg-warning-subtle text-warning"}checkEdit(n){return!n.isCancel&&!n.isFinish}getTrnslate(n){return n.isCancel?"orderManagement.order.cancel":n.isFinish?"orderManagement.order.finish":n.isUrgent?"bg-danger-subtle text-danger":n.isReopen?"orderManagement.order.reopen":n.isAssign?"orderManagement.order.assign":n.isConfirmed?"orderManagement.order.confirmed":n.isFree?"orderManagement.order.free":"orderManagement.order.new"}openModalClient(n,s,r="xl"){this.clientSelected=n.orderCode,this.orderSelected=n,this.isOrderEdit=!1,this.modalService.open(s,{centered:!0,size:r})}oncityChange(n){this.GetDistricts(n.code)}getTimes(n){return n?.split(",")}getServices(n){return n.split("#")}copytext(n){navigator.clipboard.writeText(n),this.alertService.info(n)}openEditOrderModal(n,s,r="md"){this.form={},this.isOrderEdit=!0,this.clientSelected=n,this.modalService.open(s,{centered:!0,size:r})}OpenOrderTimeLineModel(n,s,r="md"){this.orderSelected=n,this.modalService.open(s,{centered:!0,size:r})}static{this.\u0275fac=function(s){return new(s||o)(e.rXU(U.nX),e.rXU(R.c$),e.rXU(Ve),e.rXU(me.u),e.rXU(x.vh),e.rXU(Y.eD),e.rXU(O.Bq),e.rXU(pt.J),e.rXU($t.n),e.rXU(Xt.G),e.rXU(lt.V),e.rXU(Be.h),e.rXU(Ut.m),e.rXU(Mt.l),e.rXU(U.Ix))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-complete-order"]],features:[e.Vt3],decls:43,vars:31,consts:[["tableMaster",""],["SubmitOrderModal",""],["deleteModal",""],["clientProfile",""],["orderViewModel",""],["orderModel",""],["OrderTimeLineModel",""],["formEntity","ngForm"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],["overlayColor","rgba(255,255,255,0.05)","fgsColor","rgba(255,255,255,0)",3,"loaderId"],[3,"reset","search","exportXlsx","addNew","showAdd","showExport","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","number","id","id","name","id",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["InputTirmFilter","","type","search","id","clientName","name","clientName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["type","text","mwlFlatpickr","","id","isDate","mode","range","altFormat","d/m/Y",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],[2,"width",".2%"],["translate","",2,"width",".5%"],["pSortableColumn","id","translate","",2,"width","6%"],[1,"ri-expand-up-down-line"],["pSortableColumn","creationTime","translate","",2,"width","12%"],["pSortableColumn","clientId","translate","",2,"width","10%"],["translate","",2,"width","8%"],["pSortableColumn","clientVisitDate","translate","",2,"width","10%"],["pSortableColumn","totalQuantity","translate","",2,"width","8%"],["pSortableColumn","totalDiscount","translate","",2,"width","8%"],["pSortableColumn","netPrice","translate","",2,"width","8%"],["translate","",2,"width","5%"],[1,"fs-5"],["type","button","pRipple","",1,"border-0","p-button-text","p-button-rounded","p-button-plain",3,"pRowToggler","ngClass"],[3,"click"],[1,"code-pointer"],[1,"badge","bg-success-subtle","text-success"],[1,"badge","bg-primary-subtle","text-primary","my-1"],["tooltipPosition","top",1,"btn","btn-sm","btn-warning","edit-list","mx-1",3,"pTooltip"],[1,"ri-printer-line","align-bottom"],["colspan","17",1,"table-detail"],["dataKey","id",3,"value"],["pTemplate","emptymessage"],["translate","sales.salesOrder.itemName",2,"width","10%"],["translate","sales.salesOrder.unit",2,"width","6%"],["translate","sales.salesOrder.clientQuantity",2,"width","8%"],["translate","sales.salesOrder.approvedQuantity",2,"width","8%"],["translate","sales.salesOrder.discountType",2,"width","5%"],["translate","sales.salesOrder.discount",2,"width","5%"],["translate","sales.salesOrder.price",2,"width","5%"],["colspan","8"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[3,"ngSubmit"],[3,"hasProgressBar","fgsType","loaderId"],[1,"modal-content"],[1,"modal-header"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","btn-close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mt-2","text-center"],["src","https://cdn.lordicon.com/gdfrsvpt.json","stroke","bold","state","hover-oscillate","trigger","loop","colors","primary:#f7b84b,secondary:#f06548",2,"width","130px","height","130px"],[1,"pt-2","fs-15","mx-4","mx-sm-5"],["translate","orderManagement.order.AreYouSureMessage"],[1,"text-muted","mx-4","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","submit","id","save","translate","general.action.save",1,"btn","w-sm","btn-danger"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light",3,"click"],[3,"deleteConfirm","dismiss"],[3,"dismiss","orderDetails"],[3,"isOrderEdit","isInner","orderCode"],[3,"dismiss","orderSelected"]],template:function(s,r){if(1&s){const d=e.RV6();e.j41(0,"div",8)(1,"div",9)(2,"div",10),e.nrm(3,"ngx-ui-loader",11),e.j41(4,"base-filter",12),e.bIt("reset",function(){return e.eBV(d),e.Njj(r.onReset())})("search",function(){return e.eBV(d),e.Njj(r.onSearch())})("exportXlsx",function(){return e.eBV(d),e.Njj(r.onExportXlsx())})("addNew",function(){return e.eBV(d),e.Njj(r.goRegister())}),e.qex(5,13),e.j41(6,"div",14)(7,"div",15)(8,"input",16),e.nI1(9,"translate"),e.mxI("ngModelChange",function(u){return e.eBV(d),e.DH7(r.pagination.id,u)||(r.pagination.id=u),e.Njj(u)}),e.k0s(),e.nrm(10,"i",17),e.k0s()(),e.j41(11,"div",14)(12,"div",15)(13,"input",18),e.nI1(14,"translate"),e.mxI("ngModelChange",function(u){return e.eBV(d),e.DH7(r.pagination.clientName,u)||(r.pagination.clientName=u),e.Njj(u)}),e.k0s(),e.nrm(15,"i",17),e.k0s()(),e.j41(16,"div",14)(17,"input",19),e.nI1(18,"translate"),e.mxI("ngModelChange",function(u){return e.eBV(d),e.DH7(r.searchForm.dates,u)||(r.searchForm.dates=u),e.Njj(u)}),e.k0s()(),e.j41(19,"div",14)(20,"input",19),e.nI1(21,"translate"),e.mxI("ngModelChange",function(u){return e.eBV(d),e.DH7(r.searchForm.creationDates,u)||(r.searchForm.creationDates=u),e.Njj(u)}),e.k0s()(),e.bVm(),e.k0s(),e.j41(22,"div",20)(23,"div",21)(24,"p-table",22,0),e.bIt("onLazyLoad",function(u){return e.eBV(d),e.Njj(r.tableChange(u))})("selectionChange",function(u){return e.eBV(d),e.Njj(r.onSelectionChange(u))}),e.DNE(26,Mr,28,0,"ng-template",23)(27,wt,31,21,"ng-template",24)(28,Et,7,1,"ng-template",25),e.k0s()(),e.DNE(29,wi,2,0,"div",26)(30,_a,6,8,"div",27),e.k0s()()()(),e.DNE(31,Ei,15,3,"ng-template",null,1,e.C5r)(33,ba,1,0,"ng-template",null,2,e.C5r)(35,va,0,0,"ng-template",null,3,e.C5r)(37,Ca,1,1,"ng-template",null,4,e.C5r)(39,wr,1,3,"ng-template",null,5,e.C5r)(41,qn,1,1,"ng-template",null,6,e.C5r)}2&s&&(e.R7$(3),e.Y8G("loaderId","CompleteLoader"),e.R7$(),e.Y8G("showAdd",!1)("showExport",!1)("totalItems",r.pagination.totalItems)("title",r.title),e.R7$(4),e.FS9("placeholder",e.bMT(9,23,"orderManagement.order.orderCode")),e.R50("ngModel",r.pagination.id),e.R7$(5),e.FS9("placeholder",e.bMT(14,25,"orderManagement.order.agentName")),e.R50("ngModel",r.pagination.clientName),e.R7$(4),e.FS9("placeholder",e.bMT(18,27,"orderManagement.order.visitDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",r.searchForm.dates),e.R7$(3),e.FS9("placeholder",e.bMT(21,29,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",r.searchForm.creationDates),e.R7$(4),e.Y8G("value",r.entities)("rows",r.pagination.pageSize)("lazy",!0)("totalRecords",r.pagination.totalItems),e.R7$(5),e.Y8G("ngIf",r.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",r.pagination.totalItems>0))},dependencies:[x.YU,x.bT,m.qT,m.me,m.Q0,m.BC,m.cb,m.vS,m.cV,O.s5,ne.kL,dt.b,jn.L,jt.w,ct.p,$e.g,R.Mm,G.XI,mt.Ei,G.Tg,G.FP,Y.Cv,_e.m,Bt.m,x.vh,R.D9],encapsulation:2})}}return o})();function Sa(o,g){1&o&&(e.j41(0,"tr",28),e.nrm(1,"th",29),e.j41(2,"th",30),e.EFF(3,"#"),e.k0s(),e.j41(4,"th",31),e.nrm(5,"i",32),e.EFF(6," orderManagement.order.orderCode "),e.k0s(),e.j41(7,"th",33),e.nrm(8,"i",32),e.EFF(9," orderManagement.order.creation "),e.k0s(),e.j41(10,"th",34),e.nrm(11,"i",32),e.EFF(12," orderManagement.order.agentName "),e.k0s(),e.j41(13,"th",35),e.nrm(14,"i",32),e.EFF(15," sales.salesOrder.clientVisitDate "),e.k0s(),e.j41(16,"th",36),e.nrm(17,"i",32),e.EFF(18," sales.salesOrder.totalQuantity "),e.k0s(),e.j41(19,"th",37),e.nrm(20,"i",32),e.EFF(21," sales.salesOrder.totalDiscount "),e.k0s(),e.j41(22,"th",38),e.nrm(23,"i",32),e.EFF(24," sales.salesOrder.netPrice "),e.k0s(),e.j41(25,"th",39),e.nrm(26,"i",32),e.EFF(27," sales.salesOrder.cancelReasonName "),e.k0s()())}function Er(o,g){if(1&o){const n=e.RV6();e.j41(0,"tr",40)(1,"td"),e.nrm(2,"button",41),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td",42),e.bIt("click",function(){const r=e.eBV(n).$implicit,d=e.XpG(),h=e.sdS(38);return e.Njj(d.openModalClient(r,h,"lg"))}),e.j41(6,"bdi",43),e.EFF(7),e.k0s()(),e.j41(8,"td")(9,"span",44),e.EFF(10),e.k0s(),e.EFF(11),e.nI1(12,"date"),e.k0s(),e.j41(13,"td")(14,"span",45),e.EFF(15),e.k0s()(),e.j41(16,"td"),e.EFF(17),e.nI1(18,"date"),e.k0s(),e.j41(19,"td"),e.EFF(20),e.k0s(),e.j41(21,"td"),e.EFF(22),e.k0s(),e.j41(23,"td"),e.EFF(24),e.k0s(),e.j41(25,"td")(26,"span",46),e.EFF(27),e.k0s()()()}if(2&o){const n=g.$implicit,s=g.rowIndex,r=g.expanded;e.R7$(2),e.Y8G("pRowToggler",n)("ngClass",r?" ri-arrow-down-s-line":"  ri-arrow-up-s-line"),e.R7$(2),e.JRh(s+1),e.R7$(3),e.SpI("#SO#",n.id,""),e.R7$(3),e.SpI("",n.creatorName," "),e.R7$(),e.SpI(" ",e.i5U(12,12,n.creationTime,"yyyy-MM-dd")," "),e.R7$(4),e.SpI("",n.clientName," "),e.R7$(2),e.SpI(" ",e.i5U(18,15,n.acutalVisitDate,"yyyy-MM-dd"),""),e.R7$(3),e.JRh(n.totalQuantity),e.R7$(2),e.JRh(n.totalDiscount),e.R7$(2),e.JRh(n.netPrice),e.R7$(3),e.SpI("",n.cancelReasonName," ")}}function Nr(o,g){1&o&&(e.j41(0,"tr"),e.nrm(1,"th",51)(2,"th",52)(3,"th",53)(4,"th",54)(5,"th",55)(6,"th",56)(7,"th",57),e.k0s())}function Ni(o,g){if(1&o&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.nI1(11,"translate"),e.k0s(),e.j41(12,"td"),e.EFF(13),e.k0s(),e.j41(14,"td"),e.EFF(15),e.k0s()()),2&o){const n=g.$implicit;e.R7$(2),e.JRh(n.itemName),e.R7$(2),e.JRh(n.unitName),e.R7$(2),e.JRh(n.clientQuantity),e.R7$(2),e.JRh(n.approvedQuantity),e.R7$(2),e.JRh(e.bMT(11,7,"sales.salesOrder."+n.discountTypeValue)),e.R7$(3),e.JRh(n.discount),e.R7$(2),e.JRh(n.price)}}function Di(o,g){1&o&&(e.j41(0,"tr"),e.nrm(1,"td",58),e.k0s())}function Dr(o,g){if(1&o&&(e.j41(0,"tr")(1,"td",47)(2,"div",48)(3,"p-table",49),e.DNE(4,Nr,8,0,"ng-template",23)(5,Ni,16,9,"ng-template",24)(6,Di,2,0,"ng-template",50),e.k0s()()()()),2&o){const n=g.$implicit;e.R7$(3),e.Y8G("value",n.offerOrderDetails)}}function Ta(o,g){1&o&&(e.j41(0,"div",59),e.EFF(1," general.table.noData "),e.k0s())}function Li(o,g){if(1&o){const n=e.RV6();e.j41(0,"div",60)(1,"div",61),e.nrm(2,"ngb-pagination-info",62),e.j41(3,"table-length",63),e.bIt("lengthChange",function(r){e.eBV(n);const d=e.XpG();return e.Njj(d.ListItemChange(r))}),e.k0s()(),e.j41(4,"div",64)(5,"ngb-pagination",65),e.bIt("pageChange",function(r){e.eBV(n);const d=e.XpG();return e.Njj(d.pageChanged(r))}),e.mxI("pageChange",function(r){e.eBV(n);const d=e.XpG();return e.DH7(d.pagination.pageNumber,r)||(d.pagination.pageNumber=r),e.Njj(r)}),e.k0s()()()}if(2&o){const n=e.XpG();e.R7$(2),e.Y8G("pagination",n.pagination),e.R7$(),e.Y8G("lengthTable",n.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",n.pagination.pageSize)("collectionSize",n.pagination.totalItems),e.R50("page",n.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function Gi(o,g){if(1&o){const n=e.RV6();e.j41(0,"form",66,7),e.bIt("ngSubmit",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.SubmitOrder())}),e.nrm(2,"ngx-ui-loader",67),e.j41(3,"div",68)(4,"div",69)(5,"button",70),e.bIt("click",function(){const r=e.eBV(n).$implicit;return e.Njj(r.dismiss())}),e.k0s()(),e.j41(6,"div",71)(7,"div",72),e.nrm(8,"lord-icon",73),e.j41(9,"div",74),e.nrm(10,"h3",75)(11,"p",76),e.k0s()(),e.j41(12,"div",77),e.nrm(13,"button",78),e.j41(14,"button",79),e.bIt("click",function(){const r=e.eBV(n).$implicit;return e.Njj(r.dismiss())}),e.k0s()()()()()}if(2&o){const n=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderOperationShap)("loaderId",n.deleteLoader)}}function ja(o,g){if(1&o){const n=e.RV6();e.j41(0,"delete-modal",80),e.bIt("deleteConfirm",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.DeleteConfirm())})("dismiss",function(){const r=e.eBV(n).$implicit;return e.Njj(r.dismiss())}),e.k0s()}}function Lr(o,g){}function Ue(o,g){if(1&o){const n=e.RV6();e.j41(0,"app-all-orders-details",81),e.bIt("dismiss",function(){const r=e.eBV(n).$implicit;return e.Njj(r.dismiss())}),e.k0s()}if(2&o){const n=e.XpG();e.Y8G("orderDetails",n.orderSelected)}}function Vi(o,g){if(1&o&&e.nrm(0,"order-operation",82),2&o){const n=e.XpG();e.Y8G("isOrderEdit",n.isOrderEdit)("isInner",!0)("orderCode",n.clientSelected)}}function yn(o,g){if(1&o){const n=e.RV6();e.j41(0,"order-timeline",83),e.bIt("dismiss",function(){const r=e.eBV(n).$implicit;return e.Njj(r.dismiss())}),e.k0s()}if(2&o){const n=e.XpG();e.Y8G("orderSelected",n.orderSelected)}}let Gr=(()=>{class o extends Qe.w{constructor(n,s,r,d,h,u,E,ce,le,re,q,fe,be,Ie,Re){super(n,s,E,r,d,h,u),this.baseService=r,this.authDaamService=ce,this.teamService=le,this.workTimeService=re,this.excelService=q,this.cityService=fe,this.districtService=be,this.channelService=Ie,this.router=Re,this.title="sales.salesOrder.cancelOrder",this.titleOperation="sales.salesOrder.cancelOrder",this.keySelected="",this.assignUsers=[],this.times=[],this.employees=[],this.searchForm={},this.isResolveList=!0,this.employeeTypes=[{id:1,name:"employeeTeam"},{id:2,name:"managment"},{id:3,name:"customerService"}],this.employeeGroups=[],this.activeindex="2",this.active=2,this.formPassword={},this.roles=[],this.teams=[],this.workTimes=[],this.userTypes=[],this.actives=[{id:!0,name:"active"},{id:!1,name:"noActive"}],this.clientSelected=0,this.cities=[],this.districts=[],this.channels=[],this.status=[],this.countLoad=2,this.isOrderEdit=!1,this.orderSelected={},this.users=[],this.setDates=(A,se,Ce)=>{if(A?.from||A?.to){const Ye=A.to||A.from;this.pagination[se]=this.datePipe.transform(A.from||A.to,"yyyy-MM-ddT00:00:00"),this.pagination[Ce]=this.datePipe.transform(Ye,"yyyy-MM-ddT23:59:59.999")}else this.pagination[se]=null,this.pagination[Ce]=null},this.loadentities(),this.GetCities(),this.GetChannels(),this.GetTeams(),this.GetTimes(),this.status=[{name:"None",nameAr:"\u0644\u0627 \u0634\u0626",id:0},{name:"Is Review",nameAr:"\u062a\u0645\u062a \u0627\u0644\u0645\u0631\u0627\u062c\u0639\u0629",id:1},{name:"Is Confirmed",nameAr:"\u062a\u0645 \u0627\u0644\u062a\u0623\u0643\u064a\u062f",id:2},{name:"Is Free",nameAr:"\u0645\u062c\u0627\u0646\u064a",id:3},{name:"Is Reopen",nameAr:"\u062a\u0645\u062a \u0625\u0639\u0627\u062f\u0629 \u0641\u062a\u062d\u0647",id:4},{name:"Is Finish",nameAr:"\u0627\u0646\u062a\u0647\u0649",id:5},{name:"Is Cancel",nameAr:"\u062a\u0645 \u0627\u0644\u0625\u0644\u063a\u0627\u0621",id:6},{name:"Is Assign",nameAr:"\u062a\u0645 \u062a\u0639\u064a\u064a\u0646\u0647",id:7},{name:"Is Urgent",nameAr:"\u0639\u0627\u062c\u0644",id:8},{name:"New",nameAr:"\u062c\u062f\u064a\u062f",id:9}]}loadentities(){this.countLoad=this.countLoad+1,(!this.isResolveList||1!==this.countLoad)&&(this.pagination.status=40,this.baseService.get(this.pagination).pipe((0,N.Q)(this.notifier)).subscribe(n=>{this.ngxLoader.stopLoader(D.a7),this.entities=n.data,this.pagination.totalItems=n.totalItems,this.LoadSuccess()},n=>{this.ngxLoader.stopLoader(D.a7),this.alertService.error(n)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[])}SubmitOrder(){}GetCities(){this.cityService.getDropDown().subscribe(n=>{this.cities=n.data},n=>{console.log(n)})}GetDistricts(n){this.districtService.getByCityId(n).subscribe(s=>{this.districts=s.data},s=>{console.log(s)})}GetChannels(){this.channelService.getDropDown().subscribe(n=>{this.channels=n.data},n=>{console.log(n)})}GetTeams(){this.teamService.getDropDown().subscribe(n=>{this.teams=n.data},n=>{console.log(n)})}GetTimes(){this.workTimeService.getDropDown().subscribe(n=>{this.workTimes=n.data},n=>{console.log(n)})}ngOnInitMore(){}mapForm(n){return{...n}}onUpdateIsActive(n){this.baseService.updateActive(n).pipe((0,N.Q)(this.notifier)).subscribe(s=>{s?this.alertService.success():this.alertService.error("general.message."+s)},s=>{this.alertService.error()})}mapRegisterForm(n){let s={...n};return s.employeeCode=0,s}onSearch(){let n={...this.searchForm};this.ngxLoader.startLoader("allLoader"),this.setDates(n.dates,"visitDateFrom","visitDateTo"),this.setDates(n.creationDates,"creationTimeFrom","creationTimeTo"),this.loadentities()}LoadSuccess(){this.ngxLoader.stopLoader("allLoader")}onReset(){this.form={},this.searchForm={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems}}configRoute(){this.routerActive.data.pipe((0,N.Q)(this.notifier)).subscribe(n=>{this.entities=n.data,this.pagination.totalItems=n.data?.totalItems},()=>{this.alertService.error()})}mapExcel(){let n=[];return this.entities.forEach(s=>{n.push({"Order Code":s.orderCode,"Created Date":s.createdDate,"City Name":s.cityName,"District Name":s.districtName?s.districtName:"--",Status:this.translateService.instant(this.getTrnslate(s)),"Agent Name":s.agentName,Mobile:s.mobile,"Channel Name":s.channelName,"Assigned To":s.teamNames,Times:s.workTimes,"Visit Date":s.visitDate,Services:s.services})}),n}onExportXlsx(){let n=this.mapExcel();this.excelService.exportAsExcelFile(n,this.translateService.instant(this.title),[])}onNavChange(n){1===n.nextId&&(this.activeindex="1"),3===n.nextId&&(this.activeindex="3")}goRegister(){this.router.navigateByUrl("/managment/order/new")}goEdit(n){this.router.navigateByUrl("/managment/order/new")}getStatus(n){return 10==n.offerOrderStatus||20==n.offerOrderStatus?"bg-warning-subtle text-warning":30==n.offerOrderStatus?"bg-success-subtle text-success":40==n.offerOrderStatus?"bg-danger-subtle text-danger":50==n.offerOrderStatus?"bg-danger-success text-success":"bg-warning-subtle text-warning"}checkEdit(n){return!n.isCancel&&!n.isFinish}getTrnslate(n){return n.isCancel?"orderManagement.order.cancel":n.isFinish?"orderManagement.order.finish":n.isUrgent?"bg-danger-subtle text-danger":n.isReopen?"orderManagement.order.reopen":n.isAssign?"orderManagement.order.assign":n.isConfirmed?"orderManagement.order.confirmed":n.isFree?"orderManagement.order.free":"orderManagement.order.new"}openModalClient(n,s,r="xl"){this.clientSelected=n.orderCode,this.orderSelected=n,this.isOrderEdit=!1,this.modalService.open(s,{centered:!0,size:r})}oncityChange(n){this.GetDistricts(n.code)}getTimes(n){return n?.split(",")}getServices(n){return n.split("#")}copytext(n){navigator.clipboard.writeText(n),this.alertService.info(n)}openEditOrderModal(n,s,r="md"){this.form={},this.isOrderEdit=!0,this.clientSelected=n,this.modalService.open(s,{centered:!0,size:r})}OpenOrderTimeLineModel(n,s,r="md"){this.orderSelected=n,this.modalService.open(s,{centered:!0,size:r})}static{this.\u0275fac=function(s){return new(s||o)(e.rXU(U.nX),e.rXU(R.c$),e.rXU(Ve),e.rXU(me.u),e.rXU(x.vh),e.rXU(Y.eD),e.rXU(O.Bq),e.rXU(pt.J),e.rXU($t.n),e.rXU(Xt.G),e.rXU(lt.V),e.rXU(Be.h),e.rXU(Ut.m),e.rXU(Mt.l),e.rXU(U.Ix))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-cancel-order"]],features:[e.Vt3],decls:43,vars:31,consts:[["tableMaster",""],["SubmitOrderModal",""],["deleteModal",""],["clientProfile",""],["orderViewModel",""],["orderModel",""],["OrderTimeLineModel",""],["formEntity","ngForm"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],["overlayColor","rgba(255,255,255,0.05)","fgsColor","rgba(255,255,255,0)",3,"loaderId"],[3,"reset","search","exportXlsx","addNew","showAdd","showExport","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","number","id","id","name","id",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["InputTirmFilter","","type","search","id","clientName","name","clientName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["type","text","mwlFlatpickr","","id","isDate","mode","range","altFormat","d/m/Y",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],[2,"width",".2%"],["translate","",2,"width",".5%"],["pSortableColumn","id","translate","",2,"width","6%"],[1,"ri-expand-up-down-line"],["pSortableColumn","creationTime","translate","",2,"width","12%"],["pSortableColumn","clientId","translate","",2,"width","10%"],["pSortableColumn","clientVisitDate","translate","",2,"width","10%"],["pSortableColumn","totalQuantity","translate","",2,"width","8%"],["pSortableColumn","totalDiscount","translate","",2,"width","8%"],["pSortableColumn","netPrice","translate","",2,"width","8%"],["pSortableColumn","cancelReasonName","translate","",2,"width","15%"],[1,"fs-5"],["type","button","pRipple","",1,"border-0","p-button-text","p-button-rounded","p-button-plain",3,"pRowToggler","ngClass"],[3,"click"],[1,"code-pointer"],[1,"badge","bg-success-subtle","text-success"],[1,"badge","bg-primary-subtle","text-primary","my-1"],[1,"badge","bg-danger-subtle","text-danger"],["colspan","17"],[1,"table-detail"],["dataKey","id",3,"value"],["pTemplate","emptymessage"],["translate","sales.salesOrder.itemName",2,"width","10%"],["translate","sales.salesOrder.unit",2,"width","6%"],["translate","sales.salesOrder.clientQuantity",2,"width","8%"],["translate","sales.salesOrder.approvedQuantity",2,"width","8%"],["translate","sales.salesOrder.discountType",2,"width","5%"],["translate","sales.salesOrder.discount",2,"width","5%"],["translate","sales.salesOrder.price",2,"width","5%"],["colspan","8"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[3,"ngSubmit"],[3,"hasProgressBar","fgsType","loaderId"],[1,"modal-content"],[1,"modal-header"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","btn-close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mt-2","text-center"],["src","https://cdn.lordicon.com/gdfrsvpt.json","stroke","bold","state","hover-oscillate","trigger","loop","colors","primary:#f7b84b,secondary:#f06548",2,"width","130px","height","130px"],[1,"pt-2","fs-15","mx-4","mx-sm-5"],["translate","orderManagement.order.AreYouSureMessage"],[1,"text-muted","mx-4","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","submit","id","save","translate","general.action.save",1,"btn","w-sm","btn-danger"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light",3,"click"],[3,"deleteConfirm","dismiss"],[3,"dismiss","orderDetails"],[3,"isOrderEdit","isInner","orderCode"],[3,"dismiss","orderSelected"]],template:function(s,r){if(1&s){const d=e.RV6();e.j41(0,"div",8)(1,"div",9)(2,"div",10),e.nrm(3,"ngx-ui-loader",11),e.j41(4,"base-filter",12),e.bIt("reset",function(){return e.eBV(d),e.Njj(r.onReset())})("search",function(){return e.eBV(d),e.Njj(r.onSearch())})("exportXlsx",function(){return e.eBV(d),e.Njj(r.onExportXlsx())})("addNew",function(){return e.eBV(d),e.Njj(r.goRegister())}),e.qex(5,13),e.j41(6,"div",14)(7,"div",15)(8,"input",16),e.nI1(9,"translate"),e.mxI("ngModelChange",function(u){return e.eBV(d),e.DH7(r.pagination.id,u)||(r.pagination.id=u),e.Njj(u)}),e.k0s(),e.nrm(10,"i",17),e.k0s()(),e.j41(11,"div",14)(12,"div",15)(13,"input",18),e.nI1(14,"translate"),e.mxI("ngModelChange",function(u){return e.eBV(d),e.DH7(r.pagination.clientName,u)||(r.pagination.clientName=u),e.Njj(u)}),e.k0s(),e.nrm(15,"i",17),e.k0s()(),e.j41(16,"div",14)(17,"input",19),e.nI1(18,"translate"),e.mxI("ngModelChange",function(u){return e.eBV(d),e.DH7(r.searchForm.dates,u)||(r.searchForm.dates=u),e.Njj(u)}),e.k0s()(),e.j41(19,"div",14)(20,"input",19),e.nI1(21,"translate"),e.mxI("ngModelChange",function(u){return e.eBV(d),e.DH7(r.searchForm.creationDates,u)||(r.searchForm.creationDates=u),e.Njj(u)}),e.k0s()(),e.bVm(),e.k0s(),e.j41(22,"div",20)(23,"div",21)(24,"p-table",22,0),e.bIt("onLazyLoad",function(u){return e.eBV(d),e.Njj(r.tableChange(u))})("selectionChange",function(u){return e.eBV(d),e.Njj(r.onSelectionChange(u))}),e.DNE(26,Sa,28,0,"ng-template",23)(27,Er,28,18,"ng-template",24)(28,Dr,7,1,"ng-template",25),e.k0s()(),e.DNE(29,Ta,2,0,"div",26)(30,Li,6,8,"div",27),e.k0s()()()(),e.DNE(31,Gi,15,3,"ng-template",null,1,e.C5r)(33,ja,1,0,"ng-template",null,2,e.C5r)(35,Lr,0,0,"ng-template",null,3,e.C5r)(37,Ue,1,1,"ng-template",null,4,e.C5r)(39,Vi,1,3,"ng-template",null,5,e.C5r)(41,yn,1,1,"ng-template",null,6,e.C5r)}2&s&&(e.R7$(3),e.Y8G("loaderId","cancelLoader"),e.R7$(),e.Y8G("showAdd",!1)("showExport",!1)("totalItems",r.pagination.totalItems)("title",r.title),e.R7$(4),e.FS9("placeholder",e.bMT(9,23,"orderManagement.order.orderCode")),e.R50("ngModel",r.pagination.id),e.R7$(5),e.FS9("placeholder",e.bMT(14,25,"orderManagement.order.agentName")),e.R50("ngModel",r.pagination.clientName),e.R7$(4),e.FS9("placeholder",e.bMT(18,27,"orderManagement.order.visitDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",r.searchForm.dates),e.R7$(3),e.FS9("placeholder",e.bMT(21,29,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",r.searchForm.creationDates),e.R7$(4),e.Y8G("value",r.entities)("rows",r.pagination.pageSize)("lazy",!0)("totalRecords",r.pagination.totalItems),e.R7$(5),e.Y8G("ngIf",r.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",r.pagination.totalItems>0))},dependencies:[x.YU,x.bT,m.qT,m.me,m.Q0,m.BC,m.cb,m.vS,m.cV,O.s5,ne.kL,dt.b,jn.L,jt.w,ct.p,$e.g,R.Mm,G.XI,mt.Ei,G.Tg,G.FP,Y.Cv,_e.m,x.vh,R.D9],encapsulation:2})}}return o})();function Vr(o,g){1&o&&(e.j41(0,"tr",26),e.nrm(1,"th",27),e.j41(2,"th",28),e.EFF(3,"#"),e.k0s(),e.j41(4,"th",29),e.nrm(5,"i",30),e.EFF(6," orderManagement.order.orderCode "),e.k0s(),e.j41(7,"th",31),e.nrm(8,"i",30),e.EFF(9," orderManagement.order.creation "),e.k0s(),e.j41(10,"th",32),e.nrm(11,"i",30),e.EFF(12," orderManagement.order.agentName "),e.k0s(),e.j41(13,"th",33),e.nrm(14,"i",30),e.EFF(15," sales.salesOrder.clientVisitDate "),e.k0s(),e.j41(16,"th",34),e.nrm(17,"i",30),e.EFF(18," sales.salesOrder.totalQuantity "),e.k0s(),e.j41(19,"th",35),e.nrm(20,"i",30),e.EFF(21," sales.salesOrder.totalDiscount "),e.k0s(),e.j41(22,"th",36),e.EFF(23," orderManagement.order.totalTax "),e.k0s(),e.j41(24,"th",37),e.nrm(25,"i",30),e.EFF(26," sales.salesOrder.netPrice "),e.k0s(),e.nrm(27,"th",38),e.k0s())}function Ia(o,g){if(1&o){const n=e.RV6();e.j41(0,"tr",39)(1,"td"),e.nrm(2,"button",40),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td")(6,"bdi",41),e.EFF(7),e.k0s()(),e.j41(8,"td")(9,"span",42),e.EFF(10),e.k0s(),e.EFF(11),e.nI1(12,"date"),e.k0s(),e.j41(13,"td")(14,"span",43),e.EFF(15),e.k0s()(),e.j41(16,"td"),e.EFF(17),e.nI1(18,"date"),e.k0s(),e.j41(19,"td"),e.EFF(20),e.k0s(),e.j41(21,"td"),e.EFF(22),e.k0s(),e.j41(23,"td"),e.EFF(24),e.k0s(),e.j41(25,"td"),e.EFF(26),e.k0s(),e.j41(27,"td")(28,"div",44)(29,"button",45),e.nI1(30,"translate"),e.bIt("click",function(){const r=e.eBV(n).$implicit,d=e.XpG(),h=e.sdS(38);return e.Njj(d.openStatusModal(r.id,h,10,"md"))}),e.nrm(31,"i",46),e.k0s(),e.j41(32,"span",44)(33,"div",47)(34,"button",48),e.nrm(35,"i",49),e.k0s(),e.j41(36,"ul",50)(37,"li")(38,"span",51),e.nrm(39,"i",52)(40,"span",53),e.k0s()(),e.j41(41,"li",54),e.bIt("click",function(){const r=e.eBV(n).$implicit,d=e.XpG(),h=e.sdS(34);return e.Njj(d.openModal(r.id,h))}),e.j41(42,"span",51),e.nrm(43,"i",55)(44,"span",56),e.k0s()()()()()()()()}if(2&o){const n=g.$implicit,s=g.rowIndex,r=g.expanded;e.R7$(2),e.Y8G("pRowToggler",n)("ngClass",r?" ri-arrow-down-s-line":"  ri-arrow-up-s-line"),e.R7$(2),e.JRh(s+1),e.R7$(3),e.SpI("#SO#",n.id,""),e.R7$(3),e.SpI("",n.creatorName," "),e.R7$(),e.SpI(" ",e.i5U(12,13,n.creationTime,"yyyy-MM-dd")," "),e.R7$(4),e.SpI("",n.clientName," "),e.R7$(2),e.SpI(" ",e.i5U(18,16,n.acutalVisitDate,"yyyy-MM-dd HH:mm"),""),e.R7$(3),e.JRh(n.totalQuantity),e.R7$(2),e.JRh(n.totalDiscount),e.R7$(2),e.JRh(n.totalTax),e.R7$(2),e.JRh(n.netPrice),e.R7$(3),e.FS9("pTooltip",e.bMT(30,19,"sales.salesOrder.newOrder"))}}function ya(o,g){1&o&&(e.j41(0,"tr"),e.nrm(1,"th",61)(2,"th",62)(3,"th",63)(4,"th",64)(5,"th",65)(6,"th",66)(7,"th",67),e.k0s())}function xa(o,g){if(1&o&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td")(8,"span"),e.EFF(9),e.k0s()(),e.j41(10,"td"),e.EFF(11),e.nI1(12,"translate"),e.k0s(),e.j41(13,"td"),e.EFF(14),e.k0s(),e.j41(15,"td"),e.EFF(16),e.k0s()()),2&o){const n=g.$implicit;e.R7$(2),e.JRh(n.itemName),e.R7$(2),e.JRh(n.unitName),e.R7$(2),e.JRh(n.clientQuantity),e.R7$(3),e.JRh(n.approvedQuantity),e.R7$(2),e.JRh(e.bMT(12,7,"sales.salesOrder."+n.discountTypeValue)),e.R7$(3),e.SpI(" ",n.discount," "),e.R7$(2),e.JRh(n.price)}}function Fa(o,g){1&o&&(e.j41(0,"tr"),e.nrm(1,"td",68),e.k0s())}function Ra(o,g){if(1&o&&(e.j41(0,"tr")(1,"td",57)(2,"div",58)(3,"p-table",59),e.DNE(4,ya,8,0,"ng-template",21)(5,xa,17,9,"ng-template",22)(6,Fa,2,0,"ng-template",60),e.k0s()()()()),2&o){const n=g.$implicit;e.R7$(3),e.Y8G("value",n.offerOrderDetails)}}function ln(o,g){1&o&&(e.j41(0,"div",69),e.EFF(1," general.table.noData "),e.k0s())}function ka(o,g){if(1&o){const n=e.RV6();e.j41(0,"div",70)(1,"div",71),e.nrm(2,"ngb-pagination-info",72),e.j41(3,"table-length",73),e.bIt("lengthChange",function(r){e.eBV(n);const d=e.XpG();return e.Njj(d.ListItemChange(r))}),e.k0s()(),e.j41(4,"div",74)(5,"ngb-pagination",75),e.bIt("pageChange",function(r){e.eBV(n);const d=e.XpG();return e.Njj(d.pageChanged(r))}),e.mxI("pageChange",function(r){e.eBV(n);const d=e.XpG();return e.DH7(d.pagination.pageNumber,r)||(d.pagination.pageNumber=r),e.Njj(r)}),e.k0s()()()}if(2&o){const n=e.XpG();e.R7$(2),e.Y8G("pagination",n.pagination),e.R7$(),e.Y8G("lengthTable",n.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",n.pagination.pageSize)("collectionSize",n.pagination.totalItems),e.R50("page",n.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function Oa(o,g){if(1&o){const n=e.RV6();e.j41(0,"form",76,5),e.bIt("ngSubmit",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.cancelOrder())}),e.nrm(2,"ngx-ui-loader",77),e.j41(3,"div",78)(4,"div",79)(5,"button",80),e.bIt("click",function(){const r=e.eBV(n).$implicit;return e.Njj(r.dismiss())}),e.k0s()(),e.j41(6,"div",81)(7,"div",82),e.nrm(8,"lord-icon",83),e.j41(9,"div",84),e.nrm(10,"h3",85)(11,"p",86),e.k0s()(),e.j41(12,"div",87),e.nrm(13,"button",88),e.j41(14,"button",89),e.bIt("click",function(){const r=e.eBV(n).$implicit;return e.Njj(r.dismiss())}),e.k0s()()()()()}if(2&o){const n=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderOperationShap)("loaderId",n.deleteLoader)}}function Ai(o,g){if(1&o){const n=e.RV6();e.j41(0,"cancel-sales-model",90),e.bIt("success",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.loadentities())})("dismiss",function(){const r=e.eBV(n).$implicit;return e.Njj(r.dismiss())}),e.k0s()}if(2&o){const n=e.XpG();e.Y8G("orderId",n.orderSelected)}}function Ar(o,g){if(1&o){const n=e.RV6();e.j41(0,"order-timeline",91),e.bIt("dismiss",function(){const r=e.eBV(n).$implicit;return e.Njj(r.dismiss())}),e.k0s()}if(2&o){const n=e.XpG();e.Y8G("orderSelected",n.orderSelected)}}function Nt(o,g){if(1&o){const n=e.RV6();e.j41(0,"form",76,5),e.bIt("ngSubmit",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.SubmitOrder())}),e.nrm(2,"ngx-ui-loader",77),e.j41(3,"div",78)(4,"div",79)(5,"button",80),e.bIt("click",function(){const r=e.eBV(n).$implicit;return e.Njj(r.dismiss())}),e.k0s()(),e.j41(6,"div",81)(7,"div",82),e.nrm(8,"lord-icon",83),e.j41(9,"div",84),e.nrm(10,"h3",85)(11,"p",86),e.k0s()(),e.j41(12,"div",87),e.nrm(13,"button",88),e.j41(14,"button",89),e.bIt("click",function(){const r=e.eBV(n).$implicit;return e.Njj(r.dismiss())}),e.k0s()()()()()}if(2&o){const n=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderOperationShap)("loaderId",n.deleteLoader)}}let Hn=(()=>{class o extends Qe.w{constructor(n,s,r,d,h,u,E,ce,le,re,q,fe,be,Ie,Re){super(n,s,E,r,d,h,u),this.baseService=r,this.authDaamService=ce,this.teamService=le,this.workTimeService=re,this.excelService=q,this.cityService=fe,this.districtService=be,this.channelService=Ie,this.router=Re,this.title="sales.salesOrder.sureOrder",this.titleOperation="sales.salesOrder.sureOrder",this.keySelected="",this.assignUsers=[],this.times=[],this.employees=[],this.searchForm={},this.isResolveList=!0,this.employeeTypes=[{id:1,name:"employeeTeam"},{id:2,name:"managment"},{id:3,name:"customerService"}],this.employeeGroups=[],this.activeindex="2",this.active=2,this.formPassword={},this.roles=[],this.teams=[],this.workTimes=[],this.userTypes=[],this.actives=[{id:!0,name:"active"},{id:!1,name:"noActive"}],this.clientSelected=0,this.cities=[],this.districts=[],this.channels=[],this.status=[],this.countLoad=2,this.isOrderEdit=!1,this.orderSelected={},this.users=[],this.truncks=[],this.setDates=(A,se,Ce)=>{if(A?.from||A?.to){const Ye=A.to||A.from;this.pagination[se]=this.datePipe.transform(A.from||A.to,"yyyy-MM-ddT00:00:00"),this.pagination[Ce]=this.datePipe.transform(Ye,"yyyy-MM-ddT23:59:59.999")}else this.pagination[se]=null,this.pagination[Ce]=null},this.loadentities()}loadentities(){this.countLoad=this.countLoad+1,(!this.isResolveList||1!==this.countLoad)&&(this.pagination.status=0,this.baseService.get(this.pagination).pipe((0,N.Q)(this.notifier)).subscribe(n=>{this.ngxLoader.stopLoader(D.a7),this.entities=n.data,this.pagination.totalItems=n.totalItems,this.LoadSuccess()},n=>{this.ngxLoader.stopLoader(D.a7),this.alertService.error(n)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[])}openModal(n,s,r="md"){this.isOrderEdit=!1,this.form={},this.orderSelected=n,this.modalService.open(s,{centered:!0,size:r})}SubmitOrder(){this.ngxLoader.startLoader(D.Fq),this.baseService.changStatus({id:this.form.id,status:this.form.status}).pipe((0,Z.O)(),(0,te.c)(this.mainDelay),(0,F.Z)(),(0,N.Q)(this.notifier),(0,M.j)(()=>this.ngxLoader.stopLoader(D.Fq))).subscribe({next:s=>{this.modalService.dismissAll(),this.loadentities(),this.alertService.success()}})}cancelOrder(){this.ngxLoader.startLoader(D.Fq),console.log(this.operationId),this.baseService.changStatus({id:this.operationId,status:40}).pipe((0,Z.O)(),(0,te.c)(this.mainDelay),(0,F.Z)(),(0,N.Q)(this.notifier),(0,M.j)(()=>this.ngxLoader.stopLoader(D.Fq))).subscribe({next:s=>{this.modalService.dismissAll(),this.loadentities(),this.alertService.success()}})}ngOnInitMore(){}mapForm(n){return{...n}}onUpdateIsActive(n){this.baseService.updateActive(n).pipe((0,N.Q)(this.notifier)).subscribe(s=>{s?this.alertService.success():this.alertService.error("general.message."+s)},s=>{this.alertService.error()})}mapRegisterForm(n){let s={...n};return s.employeeCode=0,s}onSearch(){let n={...this.searchForm};this.ngxLoader.startLoader("allLoader"),this.setDates(n.dates,"visitDateFrom","visitDateTo"),this.setDates(n.creationDates,"creationTimeFrom","creationTimeTo"),this.loadentities()}LoadSuccess(){this.ngxLoader.stopLoader("allLoader")}onReset(){this.form={},this.searchForm={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems}}configRoute(){this.routerActive.data.pipe((0,N.Q)(this.notifier)).subscribe(n=>{this.entities=n.data,this.pagination.totalItems=n.data?.totalItems},()=>{this.alertService.error()})}mapExcel(){let n=[];return this.entities.forEach(s=>{n.push({"Order Code":s.orderCode,"Created Date":s.createdDate,"City Name":s.cityName,"District Name":s.districtName?s.districtName:"--","Agent Name":s.agentName,Mobile:s.mobile,"Channel Name":s.channelName,"Assigned To":s.teamNames,Times:s.workTimes,"Visit Date":s.visitDate,Services:s.services})}),n}onExportXlsx(){let n=this.mapExcel();this.excelService.exportAsExcelFile(n,this.translateService.instant(this.title),[])}onNavChange(n){1===n.nextId&&(this.activeindex="1"),3===n.nextId&&(this.activeindex="3")}goRegister(){this.router.navigateByUrl("/managment/order/new")}goEdit(n){this.router.navigateByUrl("/managment/order/new")}getStatus(n){return 10==n.offerOrderStatus||20==n.offerOrderStatus?"bg-warning-subtle text-warning":30==n.offerOrderStatus?"bg-success-subtle text-success":40==n.offerOrderStatus?"bg-danger-subtle text-danger":50==n.offerOrderStatus?"bg-danger-success text-success":"bg-warning-subtle text-warning"}checkEdit(n){return!n.isCancel&&!n.isFinish}openStatusModal(n,s,r,d="md"){this.isEditForm=!1,this.form={},this.form={id:n,status:r},this.modalService.open(s,{centered:!0,size:d})}openModalClient(n,s,r="xl"){this.clientSelected=n.orderCode,this.form=n,this.isOrderEdit=!1,this.modalService.open(s,{centered:!0,size:r})}copytext(n){navigator.clipboard.writeText(n),this.alertService.info(n)}openEditOrderModal(n,s,r="md"){this.form={},this.isOrderEdit=!0,this.clientSelected=n,this.modalService.open(s,{centered:!0,size:r})}OpenOrderTimeLineModel(n,s,r="md"){this.orderSelected=n,this.modalService.open(s,{centered:!0,size:r})}static{this.\u0275fac=function(s){return new(s||o)(e.rXU(U.nX),e.rXU(R.c$),e.rXU(Ve),e.rXU(me.u),e.rXU(x.vh),e.rXU(Y.eD),e.rXU(O.Bq),e.rXU(pt.J),e.rXU($t.n),e.rXU(Xt.G),e.rXU(lt.V),e.rXU(Be.h),e.rXU(Ut.m),e.rXU(Mt.l),e.rXU(U.Ix))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["draft-order"]],features:[e.Vt3],decls:39,vars:31,consts:[["tableMaster",""],["cancelOrderModal",""],["deleteModal",""],["OrderTimeLineModel",""],["StatusOrderModal",""],["formEntity","ngForm"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],["overlayColor","rgba(255,255,255,0.05)","fgsColor","rgba(255,255,255,0)",3,"loaderId"],[3,"reset","search","exportXlsx","showAdd","showExport","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","number","id","id","name","id",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["InputTirmFilter","","type","search","id","clientName","name","clientName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["type","text","mwlFlatpickr","","id","isDate","mode","range","altFormat","d/m/Y",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],[2,"width",".2%"],["translate","",2,"width",".5%"],["pSortableColumn","id","translate","",2,"width","6%"],[1,"ri-expand-up-down-line"],["pSortableColumn","creationTime","translate","",2,"width","12%"],["pSortableColumn","clientId","translate","",2,"width","10%"],["pSortableColumn","clientVisitDate","translate","",2,"width","8%"],["pSortableColumn","totalQuantity","translate","",2,"width","8%"],["pSortableColumn","totalDiscount","translate","",2,"width","7%"],["translate","",2,"width","6%"],["pSortableColumn","netPrice","translate","",2,"width","6%"],["translate","",2,"width","10%"],[1,"fs-5"],["type","button","pRipple","",1,"border-0","p-button-text","p-button-rounded","p-button-plain",3,"pRowToggler","ngClass"],[1,"code-pointer"],[1,"badge","bg-success-subtle","text-success"],[1,"badge","bg-primary-subtle","text-primary","my-1"],[1,"d-inline-block"],["tooltipPosition","top",1,"btn","btn-sm","btn-warning","edit-list","mx-1",3,"click","pTooltip"],[1,"ri-checkbox-fill","align-bottom"],[1,"dropdown-custom","d-inline-block"],["type","button",1,"btn","dropbtn","btn-soft-secondary","btn-sm","dropdown-custom","arrow-none"],[1,"ri-more-fill"],[1,"dropdown-menu","dropdown-menu-end","dropdown-content",2,"left","0"],[1,"dropdown-item"],[1,"text-success","ri-pencil-fill","align-bottom","me-2"],["translate","general.action.edit"],[3,"click"],[1,"text-danger","ri-close-fill","align-bottom","me-2"],["translate","general.action.cancel"],["colspan","17"],[1,"table-detail"],["dataKey","id",3,"value"],["pTemplate","emptymessage"],["translate","sales.salesOrder.itemName",2,"width","10%"],["translate","sales.salesOrder.unit",2,"width","6%"],["translate","sales.salesOrder.clientQuantity",2,"width","8%"],["translate","sales.salesOrder.approvedQuantity",2,"width","8%"],["translate","sales.salesOrder.discountType",2,"width","5%"],["translate","sales.salesOrder.discount",2,"width","5%"],["translate","sales.salesOrder.price",2,"width","5%"],["colspan","8"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[3,"ngSubmit"],[3,"hasProgressBar","fgsType","loaderId"],[1,"modal-content"],[1,"modal-header"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","btn-close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mt-2","text-center"],["src","https://cdn.lordicon.com/gdfrsvpt.json","stroke","bold","state","hover-oscillate","trigger","loop","colors","primary:#f7b84b,secondary:#f06548",2,"width","130px","height","130px"],[1,"pt-2","fs-15","mx-4","mx-sm-5"],["translate","orderManagement.order.AreYouSureMessage"],[1,"text-muted","mx-4","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","submit","id","save","translate","general.action.save",1,"btn","w-sm","btn-danger"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light",3,"click"],[3,"success","dismiss","orderId"],[3,"dismiss","orderSelected"]],template:function(s,r){if(1&s){const d=e.RV6();e.j41(0,"div",6)(1,"div",7)(2,"div",8),e.nrm(3,"ngx-ui-loader",9),e.j41(4,"base-filter",10),e.bIt("reset",function(){return e.eBV(d),e.Njj(r.onReset())})("search",function(){return e.eBV(d),e.Njj(r.onSearch())})("exportXlsx",function(){return e.eBV(d),e.Njj(r.onExportXlsx())}),e.qex(5,11),e.j41(6,"div",12)(7,"div",13)(8,"input",14),e.nI1(9,"translate"),e.mxI("ngModelChange",function(u){return e.eBV(d),e.DH7(r.pagination.id,u)||(r.pagination.id=u),e.Njj(u)}),e.k0s(),e.nrm(10,"i",15),e.k0s()(),e.j41(11,"div",12)(12,"div",13)(13,"input",16),e.nI1(14,"translate"),e.mxI("ngModelChange",function(u){return e.eBV(d),e.DH7(r.pagination.clientName,u)||(r.pagination.clientName=u),e.Njj(u)}),e.k0s(),e.nrm(15,"i",15),e.k0s()(),e.j41(16,"div",12)(17,"input",17),e.nI1(18,"translate"),e.mxI("ngModelChange",function(u){return e.eBV(d),e.DH7(r.searchForm.dates,u)||(r.searchForm.dates=u),e.Njj(u)}),e.k0s()(),e.j41(19,"div",12)(20,"input",17),e.nI1(21,"translate"),e.mxI("ngModelChange",function(u){return e.eBV(d),e.DH7(r.searchForm.creationDates,u)||(r.searchForm.creationDates=u),e.Njj(u)}),e.k0s()(),e.bVm(),e.k0s(),e.j41(22,"div",18)(23,"div",19)(24,"p-table",20,0),e.bIt("onLazyLoad",function(u){return e.eBV(d),e.Njj(r.tableChange(u))})("selectionChange",function(u){return e.eBV(d),e.Njj(r.onSelectionChange(u))}),e.DNE(26,Vr,28,0,"ng-template",21)(27,Ia,45,21,"ng-template",22)(28,Ra,7,1,"ng-template",23),e.k0s()(),e.DNE(29,ln,2,0,"div",24)(30,ka,6,8,"div",25),e.k0s()()()(),e.DNE(31,Oa,15,3,"ng-template",null,1,e.C5r)(33,Ai,1,1,"ng-template",null,2,e.C5r)(35,Ar,1,1,"ng-template",null,3,e.C5r)(37,Nt,15,3,"ng-template",null,4,e.C5r)}2&s&&(e.R7$(3),e.Y8G("loaderId","sureLoader"),e.R7$(),e.Y8G("showAdd",!1)("showExport",!1)("totalItems",r.pagination.totalItems)("title",r.title),e.R7$(4),e.FS9("placeholder",e.bMT(9,23,"orderManagement.order.orderCode")),e.R50("ngModel",r.pagination.id),e.R7$(5),e.FS9("placeholder",e.bMT(14,25,"orderManagement.order.agentName")),e.R50("ngModel",r.pagination.clientName),e.R7$(4),e.FS9("placeholder",e.bMT(18,27,"orderManagement.order.visitDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",r.searchForm.dates),e.R7$(3),e.FS9("placeholder",e.bMT(21,29,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",r.searchForm.creationDates),e.R7$(4),e.Y8G("value",r.entities)("rows",r.pagination.pageSize)("lazy",!0)("totalRecords",r.pagination.totalItems),e.R7$(5),e.Y8G("ngIf",r.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",r.pagination.totalItems>0))},dependencies:[x.YU,x.bT,m.qT,m.me,m.Q0,m.BC,m.cb,m.vS,m.cV,O.s5,ne.kL,dt.b,ct.p,$e.g,R.Mm,G.XI,mt.Ei,G.Tg,G.FP,Y.Cv,_e.m,Bt.m,Yn,x.vh,R.D9],encapsulation:2})}}return o})();function Ma(o,g){1&o&&e.nrm(0,"app-all-sales-order")}function wa(o,g){1&o&&e.nrm(0,"draft-order")}function Ea(o,g){1&o&&e.nrm(0,"app-new-order")}function dn(o,g){1&o&&e.nrm(0,"app-sure-order")}function ut(o,g){1&o&&e.nrm(0,"assign-order")}function Br(o,g){1&o&&e.nrm(0,"app-complete-order")}function Na(o,g){1&o&&e.nrm(0,"app-cancel-order")}let Da=(()=>{class o extends Qe.w{constructor(n,s,r,d,h,u,E,ce){super(n,s,E,r,d,h,u),this.baseService=r,this.authDaamService=ce,this.title="orderManagement.order.title",this.titleOperation="orderManagement.order.titleOperation",this.active=3,this.activeindex="2",this.count={},this.GetOfferOrderCount()}onNavChange(n){1===n.nextId&&(this.activeindex="1"),3===n.nextId&&(this.activeindex="3")}GetOfferOrderCount(){this.baseService.GetOfferOrderCount().subscribe(n=>{this.count=n.data})}static{this.\u0275fac=function(s){return new(s||o)(e.rXU(U.nX),e.rXU(R.c$),e.rXU(Ve),e.rXU(me.u),e.rXU(x.vh),e.rXU(Y.eD),e.rXU(O.Bq),e.rXU(pt.J))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-order-layout"]],features:[e.Vt3],decls:41,vars:13,consts:[["nav","ngbNav"],[1,"row"],[1,"col-lg-12"],["ngbNav","",1,"nav","nav-tabs-custom","card-header-tabs","border-bottom-0","justify-content-center",3,"activeIdChange","navChange","activeId"],[3,"ngbNavItem"],["ngbNavLink",""],["translate","sales.salesOrder.allOrders"],["ngbNavContent",""],["translate","sales.salesOrder.draftOrder"],[1,"ms-2","badge","bg-warning"],["translate","sales.salesOrder.newOrders"],["translate","sales.salesOrder.sureOrder"],["translate","sales.salesOrder.assignTrunk"],["translate","sales.salesOrder.completeOrder"],["translate","sales.salesOrder.cancelOrder"],[1,"mt-2",3,"ngbNavOutlet"]],template:function(s,r){if(1&s){const d=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"ul",3,0),e.mxI("activeIdChange",function(u){return e.eBV(d),e.DH7(r.active,u)||(r.active=u),e.Njj(u)}),e.bIt("navChange",function(u){return e.eBV(d),e.Njj(r.onNavChange(u))}),e.j41(4,"li",4)(5,"a",5),e.nrm(6,"span",6),e.k0s(),e.DNE(7,Ma,1,0,"ng-template",7),e.k0s(),e.j41(8,"li",4)(9,"a",5),e.nrm(10,"span",8),e.j41(11,"span",9),e.EFF(12),e.k0s()(),e.DNE(13,wa,1,0,"ng-template",7),e.k0s(),e.j41(14,"li",4)(15,"a",5),e.nrm(16,"span",10),e.j41(17,"span",9),e.EFF(18),e.k0s()(),e.DNE(19,Ea,1,0,"ng-template",7),e.k0s(),e.j41(20,"li",4)(21,"a",5),e.nrm(22,"span",11),e.j41(23,"span",9),e.EFF(24),e.k0s()(),e.DNE(25,dn,1,0,"ng-template",7),e.k0s(),e.j41(26,"li",4)(27,"a",5),e.nrm(28,"span",12),e.j41(29,"span",9),e.EFF(30),e.k0s()(),e.DNE(31,ut,1,0,"ng-template",7),e.k0s(),e.j41(32,"li",4)(33,"a",5),e.nrm(34,"span",13),e.k0s(),e.DNE(35,Br,1,0,"ng-template",7),e.k0s(),e.j41(36,"li",4)(37,"a",5),e.nrm(38,"span",14),e.k0s(),e.DNE(39,Na,1,0,"ng-template",7),e.k0s()(),e.nrm(40,"div",15),e.k0s()()}if(2&s){const d=e.sdS(3);e.R7$(2),e.R50("activeId",r.active),e.R7$(2),e.Y8G("ngbNavItem",1),e.R7$(4),e.Y8G("ngbNavItem",2),e.R7$(4),e.JRh(null==r.count?null:r.count.draft),e.R7$(2),e.Y8G("ngbNavItem",3),e.R7$(4),e.JRh(null==r.count?null:r.count.pending),e.R7$(2),e.Y8G("ngbNavItem",4),e.R7$(4),e.JRh(null==r.count?null:r.count.approved),e.R7$(2),e.Y8G("ngbNavItem",5),e.R7$(4),e.JRh(null==r.count?null:r.count.assign),e.R7$(2),e.Y8G("ngbNavItem",6),e.R7$(4),e.Y8G("ngbNavItem",7),e.R7$(4),e.Y8G("ngbNavOutlet",d)}},dependencies:[O.Um,O.X9,O.sy,O.Gx,O.Ri,O.WA,O.m_,R.Mm,Hs,Cr,ha,fa,on,Gr,Hn],encapsulation:2})}}return o})(),$r=(()=>{class o extends Rt.d{constructor(n){super(n,kt.c.apiUrl+"InvoiceMaster/")}register(n){return this.http.post(this.baseUrl+"AddPaymentToInvoice",n)}edit(n){return this.http.post(this.baseUrl+"EditPayment",n)}softDelete(n){return this.http.delete(this.baseUrl+`SoftDelete/${n}`)}static{this.\u0275fac=function(s){return new(s||o)(e.KVO(At.Qq))}}static{this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})(),La=(()=>{class o extends Rt.d{constructor(n){super(n,kt.c.apiUrl+"PaymentType/")}getLookups(){return this.http.get(this.baseUrl+"Lookups")}changStatus(n){return this.http.put(this.baseUrl+"ChangeStatus/",n)}static{this.\u0275fac=function(s){return new(s||o)(e.KVO(At.Qq))}}static{this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var Ga=j(99902),xn=j(3200);const b=(o,g,n)=>({"bg-success-subtle text-success":o,"bg-warning-subtle text-warning":g,"bg-danger-subtle text-danger":n});function S(o,g){1&o&&(e.j41(0,"tr",27)(1,"th",28),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",29),e.nrm(4,"i",30),e.EFF(5," orderManagement.order.invoiceCode "),e.k0s(),e.j41(6,"th",31),e.nrm(7,"i",30),e.EFF(8," orderManagement.order.orderCode "),e.k0s(),e.j41(9,"th",32),e.nrm(10,"i",30),e.EFF(11," orderManagement.order.creation "),e.k0s(),e.j41(12,"th",33),e.nrm(13,"i",30),e.EFF(14," sales.salesInvoices.total "),e.k0s(),e.j41(15,"th",34),e.nrm(16,"i",30),e.EFF(17," sales.salesOrder.totalDiscount "),e.k0s(),e.j41(18,"th",35),e.nrm(19,"i",30),e.EFF(20," sales.salesInvoices.tax "),e.k0s(),e.j41(21,"th",36),e.nrm(22,"i",30),e.EFF(23," sales.salesOrder.netPrice "),e.k0s(),e.j41(24,"th",37),e.EFF(25," sales.salesOrder.totalPayment "),e.k0s(),e.j41(26,"th",38),e.nrm(27,"i",30),e.EFF(28," sales.salesOrder.isSync "),e.k0s(),e.j41(29,"th",39),e.nrm(30,"i",30),e.EFF(31," sales.salesInvoices.notes "),e.k0s(),e.nrm(32,"th",40),e.k0s())}function C(o,g){if(1&o&&(e.j41(0,"span",57),e.EFF(1),e.k0s()),2&o){const n=e.XpG().$implicit;e.R7$(),e.JRh(n.creatorName)}}function w(o,g){1&o&&e.nrm(0,"span",58)}function X(o,g){1&o&&e.nrm(0,"span",59)}function ee(o,g){if(1&o&&(e.j41(0,"tr",41)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td")(4,"bdi",42),e.EFF(5),e.k0s()(),e.j41(6,"td")(7,"bdi",42),e.EFF(8),e.k0s(),e.nrm(9,"i",43),e.k0s(),e.j41(10,"td"),e.DNE(11,C,2,1,"span",44),e.EFF(12),e.nI1(13,"date"),e.k0s(),e.j41(14,"td"),e.EFF(15),e.k0s(),e.j41(16,"td"),e.EFF(17),e.k0s(),e.j41(18,"td"),e.EFF(19),e.k0s(),e.j41(20,"td")(21,"span",45),e.EFF(22),e.k0s()(),e.j41(23,"td")(24,"span",45),e.EFF(25),e.k0s()(),e.j41(26,"td"),e.DNE(27,w,1,0,"span",46)(28,X,1,0,"span",47),e.k0s(),e.j41(29,"td"),e.EFF(30),e.k0s(),e.j41(31,"td")(32,"div",48)(33,"span",48)(34,"div",49)(35,"button",50),e.nrm(36,"i",51),e.k0s(),e.j41(37,"ul",52)(38,"li")(39,"span",53),e.nrm(40,"i",54)(41,"span",55),e.k0s()(),e.j41(42,"li")(43,"span",53),e.nrm(44,"i",54)(45,"span",56),e.k0s()()()()()()()()),2&o){const n=g.$implicit,s=g.rowIndex;e.R7$(2),e.JRh(s+1),e.R7$(3),e.SpI("#SI#",n.id,""),e.R7$(3),e.SpI("#SO#",n.offerOrderId," "),e.R7$(3),e.Y8G("ngIf",n.creatorName),e.R7$(),e.SpI(" ",e.i5U(13,15,n.creationTime,"yyyy-MM-dd")," "),e.R7$(3),e.JRh(n.total),e.R7$(2),e.JRh(n.totalDiscount),e.R7$(2),e.JRh(n.tax),e.R7$(2),e.Y8G("ngClass",e.sMw(18,b,n.net==n.totalPayment,n.net<n.totalPayment,n.net>n.totalPayment)),e.R7$(),e.JRh(n.net),e.R7$(2),e.Y8G("ngClass",e.sMw(22,b,n.net==n.totalPayment,n.net<n.totalPayment,n.net>n.totalPayment)),e.R7$(),e.JRh(n.totalPayment),e.R7$(2),e.Y8G("ngIf",n.isSync),e.R7$(),e.Y8G("ngIf",!n.isSync),e.R7$(2),e.JRh(n.notes)}}function Te(o,g){1&o&&(e.j41(0,"div",60),e.EFF(1," general.table.noData "),e.k0s())}function oe(o,g){if(1&o){const n=e.RV6();e.j41(0,"div",61)(1,"div",62),e.nrm(2,"ngb-pagination-info",63),e.j41(3,"table-length",64),e.bIt("lengthChange",function(r){e.eBV(n);const d=e.XpG();return e.Njj(d.ListItemChange(r))}),e.k0s()(),e.j41(4,"div",65)(5,"ngb-pagination",66),e.bIt("pageChange",function(r){e.eBV(n);const d=e.XpG();return e.Njj(d.pageChanged(r))}),e.mxI("pageChange",function(r){e.eBV(n);const d=e.XpG();return e.DH7(d.pagination.pageNumber,r)||(d.pagination.pageNumber=r),e.Njj(r)}),e.k0s()()()}if(2&o){const n=e.XpG();e.R7$(2),e.Y8G("pagination",n.pagination),e.R7$(),e.Y8G("lengthTable",n.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",n.pagination.pageSize)("collectionSize",n.pagination.totalItems),e.R50("page",n.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function Bi(o,g){1&o&&(e.j41(0,"span",93),e.EFF(1,"general.action.register "),e.k0s())}function Va(o,g){1&o&&(e.j41(0,"span",93),e.EFF(1,"general.action.edit "),e.k0s())}function et(o,g){1&o&&(e.j41(0,"div",94),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function Wn(o,g){1&o&&(e.j41(0,"div",94),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function Aa(o,g){if(1&o){const n=e.RV6();e.j41(0,"div",97)(1,"i",98),e.bIt("click",function(){e.eBV(n);const r=e.XpG().index,d=e.XpG(2);return e.Njj(d.removeFile(r))}),e.k0s(),e.j41(2,"p-image",99),e.bIt("error",function(r){e.eBV(n);const d=e.XpG(3);return e.Njj(d.setDefaultImage(r,"assets/images/custom/no-img.jpg"))}),e.k0s()()}2&o&&(e.R7$(2),e.Y8G("src","assets/images/PDF.png")("preview",!1)("alt","pdf"))}function cn(o,g){if(1&o){const n=e.RV6();e.j41(0,"div",97)(1,"i",98),e.bIt("click",function(){e.eBV(n);const r=e.XpG().index,d=e.XpG(2);return e.Njj(d.removeFile(r))}),e.k0s(),e.j41(2,"p-image",99),e.bIt("error",function(r){e.eBV(n);const d=e.XpG(3);return e.Njj(d.setDefaultImage(r,"assets/images/custom/no-img.jpg"))}),e.k0s()()}if(2&o){const n=e.XpG().$implicit,s=e.XpG(2);e.R7$(2),e.Y8G("src",n.isNew?n.attachment:s.serverPath+n.attachment)("preview",!0)("alt","image")}}function Jn(o,g){if(1&o&&(e.j41(0,"div",95),e.DNE(1,Aa,3,3,"div",96)(2,cn,3,3,"div",96),e.k0s()),2&o){const n=g.index,s=e.XpG(2);e.R7$(),e.Y8G("ngIf","application/pdf"===s.filesNames[n]),e.R7$(),e.Y8G("ngIf","application/pdf"!==s.filesNames[n])}}function Qn(o,g){if(1&o){const n=e.RV6();e.j41(0,"div",67)(1,"div",68)(2,"h4",69),e.DNE(3,Bi,2,0,"span",70)(4,Va,2,0,"span",70),e.j41(5,"span",71),e.EFF(6),e.k0s()(),e.j41(7,"button",72),e.bIt("click",function(){const r=e.eBV(n).$implicit;return e.Njj(r.dismiss("Cross click"))}),e.k0s()(),e.j41(8,"div",73),e.nrm(9,"ngx-ui-loader",74),e.j41(10,"form",75,3),e.bIt("submit",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.OnSubmit())}),e.j41(12,"div",76)(13,"label",77),e.EFF(14,"sales.salesInvoices.paymentTypeName"),e.k0s(),e.j41(15,"ng-select",78,4),e.mxI("ngModelChange",function(r){e.eBV(n);const d=e.XpG();return e.DH7(d.form.paymentTypeId,r)||(d.form.paymentTypeId=r),e.Njj(r)}),e.k0s(),e.DNE(17,et,2,0,"div",79),e.k0s(),e.j41(18,"div",76)(19,"label",80),e.EFF(20,"sales.salesInvoices.cost"),e.k0s(),e.j41(21,"input",81,5),e.mxI("ngModelChange",function(r){e.eBV(n);const d=e.XpG();return e.DH7(d.form.cost,r)||(d.form.cost=r),e.Njj(r)}),e.k0s(),e.DNE(23,Wn,2,0,"div",82),e.k0s(),e.j41(24,"div",76)(25,"label",83),e.EFF(26,"general.table.notes"),e.k0s(),e.j41(27,"textarea",84),e.mxI("ngModelChange",function(r){e.eBV(n);const d=e.XpG();return e.DH7(d.form.notes,r)||(d.form.notes=r),e.Njj(r)}),e.EFF(28,"                    "),e.k0s()(),e.j41(29,"div",8)(30,"div",85)(31,"label",77),e.EFF(32," orderManagement.order.attachment"),e.k0s(),e.j41(33,"input",86,6),e.bIt("change",function(r){e.eBV(n);const d=e.XpG();return e.Njj(d.onFileSelected(r))}),e.k0s()(),e.j41(35,"div",87),e.DNE(36,Jn,3,2,"div",88),e.k0s()(),e.j41(37,"div",89)(38,"button",90),e.nrm(39,"i",91)(40,"span",92),e.k0s()()()()()}if(2&o){const n=e.sdS(11),s=e.sdS(16),r=e.sdS(22),d=e.XpG();e.R7$(3),e.Y8G("ngIf",!d.isEditForm),e.R7$(),e.Y8G("ngIf",d.isEditForm),e.R7$(2),e.JRh(d.titleOperation),e.R7$(3),e.Y8G("hasProgressBar",!1)("fgsType",d.loaderOperationShap)("loaderId",d.operationLoader),e.R7$(6),e.Y8G("items",d.paymentMethods)("multiple",!1),e.R50("ngModel",d.form.paymentTypeId),e.R7$(2),e.Y8G("ngIf",s.invalid&&s.touched),e.R7$(4),e.R50("ngModel",d.form.cost),e.R7$(2),e.Y8G("ngIf",r.invalid&&r.touched),e.R7$(4),e.R50("ngModel",d.form.notes),e.R7$(9),e.Y8G("ngForOf",d.filesToShow),e.R7$(2),e.Y8G("disabled",!n.valid)}}function ie(o,g){if(1&o){const n=e.RV6();e.j41(0,"delete-modal",100),e.bIt("deleteConfirm",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.DeleteConfirmSoft())})("dismiss",function(){const r=e.eBV(n).$implicit;return e.Njj(r.dismiss())}),e.k0s()}}let Ba=(()=>{class o extends Qe.w{constructor(n,s,r,d,h,u,E,ce,le){super(n,s,E,r,d,h,u),this.baseService=r,this.paymentTypesService=ce,this.formData=le,this.title="sales.salesInvoices.title",this.titleOperation="sales.salesInvoices.payment",this.paymentMethods=[],this.searchForm={},this.form={file:""},this.filesToSend=[],this.filesToShow=[],this.filesNames=[],this.isResolveList=!0,this.serverPath=kt.c.mediaUrl,this.countLoad=0,this.isOrderEdit=!1,this.setDates=(re,q,fe)=>{if(re?.from||re?.to){const Ie=re.to||re.from;this.pagination[q]=this.datePipe.transform(re.from||re.to,"yyyy-MM-ddT00:00:00"),this.pagination[fe]=this.datePipe.transform(Ie,"yyyy-MM-ddT23:59:59.999")}else this.pagination[q]=null,this.pagination[fe]=null},this.configRoute(),this.getPaymentTypes()}configRoute(){this.routerActive.data.pipe((0,N.Q)(this.notifier)).subscribe(n=>{this.entities=n.data.data,this.pagination.totalItems=n.data.totalItems},()=>{this.alertService.error()})}getPaymentTypes(){this.paymentTypesService.getDropDown().subscribe({next:n=>{this.paymentMethods=n.data}})}onSearch(){let n={...this.searchForm};this.ngxLoader.startLoader("allLoader"),this.setDates(n.dates,"visitDateFrom","visitDateTo"),this.setDates(n.creationDates,"creationTimeFrom","creationTimeTo"),this.loadentities()}LoadSuccess(){this.ngxLoader.stopLoader("allLoader")}onReset(){this.form={},this.searchForm={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems}}openInvoiceModal(n,s,r="md",d){if(this.isEditForm=d,this.form={},this.clearFiles(),this.operationId=n.id,d){this.form=n,console.log(this.form);let h="";n.path&&(h=n.path.split(".")[1]),this.filesToSend.push({id:0,isNew:!1,attachment:n.path}),this.filesToShow.push({id:0,isNew:!1,attachment:n.path}),this.filesNames.push("pdf"===h?"application/pdf":h),this.modalService.open(s,{centered:!0,size:r})}else this.form.invoiceMasterId=n.id,this.modalService.open(s,{centered:!0,size:r})}onFileSelected(n){this.clearFiles();const s=n.target;if(n.target.files&&n.target.files[0]){let r=n.target.files.length;for(let d=0;d<r;d++){let h=new FileReader;this.filesToSend.push({id:0,isNew:!0,attachment:n.target.files.item(d)}),this.filesNames.push(n.target.files[d].type),h.onload=u=>{this.filesToShow.push({id:0,isNew:!0,attachment:u.target.result}),console.log(this.filesToShow)},h.readAsDataURL(n.target?.files[d])}s.value=""}}setDefaultImage(n,s){const r=n.target;console.log(r,"targettargettargettarget"),r.src=s}checkExtension(n){const r=n.split("/").pop().split(".").pop();return console.log(),r}checkUrl(n){return null==n||""==n?"":n.startsWith("/upload")?n.replace("/upload","upload"):n}removeFile(n){this.filesToShow.splice(n,1),this.filesNames.splice(n,1),this.filesToSend.splice(n,1)}clearFiles(){this.filesNames=[],this.filesToShow=[],this.filesToSend=[]}registerEntity(){let n=this.mapRegisterForm(this.form);n.file=this.filesToSend&&this.filesToSend.length>0?this.filesToSend[0].attachment:null,this.baseService.register(this.formData.formatFormData(n)).pipe((0,Z.O)(),(0,te.c)(this.mainDelay),(0,F.Z)(),(0,N.Q)(this.notifier),(0,M.j)(()=>this.ngxLoader.stopLoader(D.ZW)),(0,he.W)(s=>(0,Oe.$)(s))).subscribe(s=>{s.success?(this.modalService.dismissAll(),this.submitFunished()):this.alertService.error("general.message."+s.message)},s=>{this.alertService.error("general.message."+s)})}editEntity(){let n=this.mapForm(this.form);n.file=this.filesToSend&&this.filesToSend.length>0?this.filesToSend[0].attachment:null,this.baseService.edit(this.formData.formatFormData(n)).pipe((0,Z.O)(),(0,te.c)(this.mainDelay),(0,F.Z)(),(0,N.Q)(this.notifier),(0,M.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(s=>{s.success?this.submitFunished():this.alertService.error("general.message."+s.message)},s=>{this.alertService.error("general.message."+s)})}static{this.\u0275fac=function(s){return new(s||o)(e.rXU(U.nX),e.rXU(R.c$),e.rXU($r),e.rXU(me.u),e.rXU(x.vh),e.rXU(Y.eD),e.rXU(O.Bq),e.rXU(La),e.rXU(Ga.Q))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-sales-invoices"]],features:[e.Vt3],decls:36,vars:35,consts:[["tableMaster",""],["addPaymentModal",""],["deleteModal",""],["formEntity","ngForm"],["paymentTypeId","ngModel"],["cost","ngModel"],["fileInput",""],[3,"title","breadcrumbItems"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],["overlayColor","rgba(255,255,255,0.05)","fgsColor","rgba(255,255,255,0)",3,"loaderId"],[3,"reset","search","showAdd","showExport","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","number","id","id","name","id",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["InputTirmFilter","","type","search","id","clientName","name","clientName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["type","text","mwlFlatpickr","","id","isDate","mode","range","altFormat","d/m/Y",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["translate","",2,"width",".3%"],["pSortableColumn","id","translate","",2,"width","3%"],[1,"ri-expand-up-down-line"],["pSortableColumn","id","translate","",2,"width","4%"],["pSortableColumn","creationTime","translate","",2,"width","5%"],["pSortableColumn","total","translate","",2,"width","5%"],["pSortableColumn","totalDiscount","translate","",2,"width","5%"],["pSortableColumn","tax","translate","",2,"width","4%"],["pSortableColumn","net","translate","",2,"width","4%"],["translate","",2,"width","5%"],["pSortableColumn","isSync","translate","",2,"width","5%"],["pSortableColumn","notes","translate","",2,"width","5%"],[2,"width","12%"],[1,"fs-5"],[1,"code-pointer"],[1,"ri-share-circle-fill","label-icon","align-middle","rounded-pill","fs-16","me-2"],["class","badge bg-success-subtle text-success",4,"ngIf"],[1,"badge","fs-5","badge-border",3,"ngClass"],["class","badge bg-success","translate","sales.salesOrder.syncSend",4,"ngIf"],["class","badge bg-warning","translate","sales.salesOrder.syncNotSend",4,"ngIf"],[1,"d-inline-block"],[1,"dropdown-custom","d-inline-block"],["type","button",1,"btn","dropbtn","btn-soft-secondary","btn-sm","dropdown-custom","arrow-none"],[1,"ri-more-fill"],[1,"dropdown-menu","dropdown-menu-end","dropdown-content",2,"left","0"],[1,"dropdown-item"],[1,"ri-printer-line","align-bottom","me-2","text-muted"],["translate","sales.salesOrder.isSync"],["translate","orderManagement.order.printPill"],[1,"badge","bg-success-subtle","text-success"],["translate","sales.salesOrder.syncSend",1,"badge","bg-success"],["translate","sales.salesOrder.syncNotSend",1,"badge","bg-warning"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["class","fw-bold fs-4","translate","",4,"ngIf"],["translate",""],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"hasProgressBar","fgsType","loaderId"],[3,"submit"],[1,"mb-3"],["translate","",1,"required","fw-bold","form-label","w-100"],["name","paymentTypeId","bindValue","code","bindLabel","name","required","",3,"ngModelChange","items","multiple","ngModel"],["class","text-danger text-center","translate","",4,"ngIf"],["for","cost","translate","",1,"required","fw-bold","form-label"],["InputTirmFilter","","name","cost","type","text","id","employeeName","required","",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],["for","notes","translate","",1,"fw-bold","form-label"],["rows","3","name","notes","type","text","id","notes",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,"col-12","mb-2"],["accept","image/*, application/pdf","type","file","placeholder","dfd",1,"form-control","fs-6",3,"change"],[1,"my-3","row","row-cols-5"],["class","col",4,"ngFor","ngForOf"],[1,"text-center"],["type","submit","type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],["translate","",1,"fw-bold","fs-4"],["translate","",1,"text-danger","text-center"],[1,"col"],["class","position-relative",4,"ngIf"],[1,"position-relative"],[1,"ri-close-fill","position-absolute",2,"border-radius","50%","background-color","red","inset-inline-start","-14px","top","-8px","color","white",3,"click"],["width","50","height","50",3,"error","src","preview","alt"],[3,"deleteConfirm","dismiss"]],template:function(s,r){if(1&s){const d=e.RV6();e.nrm(0,"app-breadcrumbs",7),e.nI1(1,"translate"),e.j41(2,"div",8)(3,"div",9)(4,"div",10),e.nrm(5,"ngx-ui-loader",11),e.j41(6,"base-filter",12),e.bIt("reset",function(){return e.eBV(d),e.Njj(r.onReset())})("search",function(){return e.eBV(d),e.Njj(r.onSearch())}),e.qex(7,13),e.j41(8,"div",14)(9,"div",15)(10,"input",16),e.nI1(11,"translate"),e.mxI("ngModelChange",function(u){return e.eBV(d),e.DH7(r.pagination.id,u)||(r.pagination.id=u),e.Njj(u)}),e.k0s(),e.nrm(12,"i",17),e.k0s()(),e.j41(13,"div",14)(14,"div",15)(15,"input",18),e.nI1(16,"translate"),e.mxI("ngModelChange",function(u){return e.eBV(d),e.DH7(r.pagination.clientName,u)||(r.pagination.clientName=u),e.Njj(u)}),e.k0s(),e.nrm(17,"i",17),e.k0s()(),e.j41(18,"div",14)(19,"input",19),e.nI1(20,"translate"),e.mxI("ngModelChange",function(u){return e.eBV(d),e.DH7(r.searchForm.dates,u)||(r.searchForm.dates=u),e.Njj(u)}),e.k0s()(),e.j41(21,"div",14)(22,"input",19),e.nI1(23,"translate"),e.mxI("ngModelChange",function(u){return e.eBV(d),e.DH7(r.searchForm.creationDates,u)||(r.searchForm.creationDates=u),e.Njj(u)}),e.k0s()(),e.bVm(),e.k0s(),e.j41(24,"div",20)(25,"div",21)(26,"p-table",22,0),e.bIt("onLazyLoad",function(u){return e.eBV(d),e.Njj(r.tableChange(u))})("selectionChange",function(u){return e.eBV(d),e.Njj(r.onSelectionChange(u))}),e.DNE(28,S,33,0,"ng-template",23)(29,ee,46,26,"ng-template",24),e.k0s()(),e.DNE(30,Te,2,0,"div",25)(31,oe,6,8,"div",26),e.k0s()()()(),e.DNE(32,Qn,41,15,"ng-template",null,1,e.C5r)(34,ie,1,0,"ng-template",null,2,e.C5r)}2&s&&(e.FS9("title",e.bMT(1,25,r.title)),e.Y8G("breadcrumbItems",r.breadCrumbItems),e.R7$(5),e.Y8G("loaderId","newLoader"),e.R7$(),e.Y8G("showAdd",!1)("showExport",!1)("totalItems",r.pagination.totalItems)("title",r.title),e.R7$(4),e.FS9("placeholder",e.bMT(11,27,"orderManagement.order.orderCode")),e.R50("ngModel",r.pagination.id),e.R7$(5),e.FS9("placeholder",e.bMT(16,29,"orderManagement.order.agentName")),e.R50("ngModel",r.pagination.clientName),e.R7$(4),e.FS9("placeholder",e.bMT(20,31,"orderManagement.order.visitDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",r.searchForm.dates),e.R7$(3),e.FS9("placeholder",e.bMT(23,33,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",r.searchForm.creationDates),e.R7$(4),e.Y8G("value",r.entities)("rows",r.pagination.pageSize)("lazy",!0)("totalRecords",r.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",r.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",r.pagination.totalItems>0))},dependencies:[x.YU,x.Sq,x.bT,m.qT,m.me,m.Q0,m.BC,m.cb,m.YS,m.vS,m.cV,O.s5,ne.kL,Xn.m,dt.b,jt.w,ct.p,$e.g,R.Mm,G.XI,mt.Ei,G.Tg,Y.Cv,Ee.vr,_e.m,xn._,x.vh,R.D9],encapsulation:2})}}return o})();var $i=j(56131);let mn=(()=>{class o extends $i.E{constructor(n,s,r){super(n,s,r)}static{this.\u0275fac=function(s){return new(s||o)(e.KVO(U.Ix),e.KVO($r),e.KVO(me.u))}}static{this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();j(67376);let Ur=(()=>{class o extends Rt.d{constructor(n){super(n,kt.c.apiUrl+"ClientCollection/")}static{this.\u0275fac=function(s){return new(s||o)(e.KVO(At.Qq))}}static{this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();function $a(o,g){1&o&&(e.j41(0,"tr",25)(1,"th",26),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",27),e.nrm(4,"i",28),e.EFF(5," sales.clientCollection.clientName "),e.k0s(),e.j41(6,"th",29),e.nrm(7,"i",28),e.EFF(8," orderManagement.order.creation "),e.k0s(),e.j41(9,"th",30),e.nrm(10,"i",28),e.EFF(11," sales.clientCollection.cost "),e.k0s(),e.j41(12,"th",31),e.nrm(13,"i",28),e.EFF(14," sales.clientCollection.isSyncOdoo "),e.k0s(),e.j41(15,"th",32),e.nrm(16,"i",28),e.EFF(17," sales.clientCollection.syncDate "),e.k0s(),e.j41(18,"th",33),e.nrm(19,"i",28),e.EFF(20," sales.clientCollection.notes "),e.k0s(),e.nrm(21,"th",34),e.k0s())}function Kn(o,g){1&o&&e.nrm(0,"span",46)}function Dt(o,g){1&o&&e.nrm(0,"span",47)}function Zn(o,g){if(1&o&&(e.nrm(0,"i",48),e.EFF(1),e.nI1(2,"date"),e.nrm(3,"br")(4,"i",49),e.EFF(5),e.nI1(6,"date"),e.nrm(7,"br")(8,"i",50),e.EFF(9)),2&o){const n=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.i5U(2,3,n.creationTime,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",e.i5U(6,6,n.lastModificationTime,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",n.creatorName," ")}}function Pr(o,g){if(1&o){const n=e.RV6();e.j41(0,"tr",35)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td")(6,"span",36),e.EFF(7),e.k0s(),e.EFF(8),e.nI1(9,"date"),e.k0s(),e.j41(10,"td"),e.EFF(11),e.k0s(),e.j41(12,"td"),e.DNE(13,Kn,1,0,"span",37)(14,Dt,1,0,"span",38),e.k0s(),e.j41(15,"td"),e.EFF(16),e.nI1(17,"date"),e.k0s(),e.j41(18,"td"),e.EFF(19),e.k0s(),e.j41(20,"td"),e.DNE(21,Zn,10,9,"ng-template",null,3,e.C5r),e.nrm(23,"i",39),e.j41(24,"button",40),e.nrm(25,"i",41),e.k0s(),e.j41(26,"button",42),e.bIt("click",function(){const r=e.eBV(n).$implicit,d=e.XpG(),h=e.sdS(22);return e.Njj(d.EditModel(r.id,h))}),e.nrm(27,"i",43),e.k0s(),e.j41(28,"button",44),e.bIt("click",function(){const r=e.eBV(n).$implicit,d=e.XpG(),h=e.sdS(24);return e.Njj(d.openModal(r.id,h))}),e.nrm(29,"i",45),e.k0s()()()}if(2&o){const n=g.$implicit,s=g.rowIndex,r=e.sdS(22);e.R7$(2),e.JRh(s+1),e.R7$(2),e.JRh(n.clientName),e.R7$(3),e.SpI("",n.creatorName," "),e.R7$(),e.SpI(" ",e.i5U(9,10,n.creationTime,"yyyy-MM-dd")," "),e.R7$(3),e.JRh(n.cost),e.R7$(2),e.Y8G("ngIf",n.isSyncOdoo),e.R7$(),e.Y8G("ngIf",!n.isSyncOdoo),e.R7$(2),e.JRh(e.i5U(17,13,n.syncDate,"yyyy-MM-dd HH:mm:ss")),e.R7$(3),e.JRh(n.notes),e.R7$(4),e.Y8G("ngbTooltip",r)}}function ei(o,g){1&o&&(e.j41(0,"div",51),e.EFF(1," general.table.noData"),e.k0s())}function Yr(o,g){if(1&o){const n=e.RV6();e.j41(0,"div",52)(1,"div",53),e.nrm(2,"ngb-pagination-info",54),e.j41(3,"table-length",55),e.bIt("lengthChange",function(r){e.eBV(n);const d=e.XpG();return e.Njj(d.ListItemChange(r))}),e.k0s()(),e.j41(4,"div",56)(5,"ngb-pagination",57),e.bIt("pageChange",function(r){e.eBV(n);const d=e.XpG();return e.Njj(d.pageChanged(r))}),e.mxI("pageChange",function(r){e.eBV(n);const d=e.XpG();return e.DH7(d.pagination.pageNumber,r)||(d.pagination.pageNumber=r),e.Njj(r)}),e.k0s()()()}if(2&o){const n=e.XpG();e.R7$(2),e.Y8G("pagination",n.pagination),e.R7$(),e.Y8G("lengthTable",n.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",n.pagination.pageSize)("collectionSize",n.pagination.totalItems),e.R50("page",n.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function zr(o,g){1&o&&(e.j41(0,"span",80),e.EFF(1,"general.action.register "),e.k0s())}function ti(o,g){1&o&&(e.j41(0,"span",80),e.EFF(1,"general.action.edit "),e.k0s())}function qr(o,g){1&o&&(e.j41(0,"div",81),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function Fn(o,g){if(1&o){const n=e.RV6();e.j41(0,"div",58)(1,"div",59)(2,"h4",60),e.DNE(3,zr,2,0,"span",61)(4,ti,2,0,"span",61),e.j41(5,"span",62),e.EFF(6),e.k0s()(),e.j41(7,"button",63),e.bIt("click",function(){const r=e.eBV(n).$implicit;return e.Njj(r.dismiss("Cross click"))}),e.k0s()(),e.j41(8,"div",64),e.nrm(9,"ngx-ui-loader",65),e.j41(10,"form",66,4),e.bIt("submit",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.OnSubmit())}),e.j41(12,"div",67)(13,"label",68),e.EFF(14,"sales.clientCollection.clientName"),e.k0s(),e.j41(15,"ng-select",69),e.bIt("scrollToEnd",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.scrollClient())}),e.mxI("ngModelChange",function(r){e.eBV(n);const d=e.XpG();return e.DH7(d.form.clientId,r)||(d.form.clientId=r),e.Njj(r)}),e.k0s()(),e.j41(16,"div",70)(17,"label",71),e.EFF(18,"sales.clientCollection.cost"),e.k0s(),e.j41(19,"input",72,5),e.mxI("ngModelChange",function(r){e.eBV(n);const d=e.XpG();return e.DH7(d.form.cost,r)||(d.form.cost=r),e.Njj(r)}),e.k0s(),e.DNE(21,qr,2,0,"div",73),e.k0s(),e.j41(22,"div",70)(23,"label",74),e.EFF(24,"sales.clientCollection.notes"),e.k0s(),e.j41(25,"textarea",75,6),e.mxI("ngModelChange",function(r){e.eBV(n);const d=e.XpG();return e.DH7(d.form.notes,r)||(d.form.notes=r),e.Njj(r)}),e.k0s()(),e.j41(27,"div",76)(28,"button",77),e.nrm(29,"i",78)(30,"span",79),e.k0s()()()()()}if(2&o){const n=e.sdS(11),s=e.sdS(20),r=e.XpG();e.R7$(3),e.Y8G("ngIf",!r.isEditForm),e.R7$(),e.Y8G("ngIf",r.isEditForm),e.R7$(2),e.JRh(r.titleOperation),e.R7$(3),e.Y8G("hasProgressBar",!1)("fgsType",r.loaderOperationShap)("loaderId",r.operationLoader),e.R7$(6),e.Y8G("virtualScroll",!0)("items",r.clients)("typeahead",r.searchClient)("loading",r.loading)("multiple",!1),e.R50("ngModel",r.form.clientId),e.R7$(4),e.R50("ngModel",r.form.cost),e.R7$(2),e.Y8G("ngIf",s.invalid&&s.touched),e.R7$(4),e.R50("ngModel",r.form.notes),e.R7$(3),e.Y8G("disabled",!n.valid)}}function Pt(o,g){if(1&o){const n=e.RV6();e.j41(0,"delete-modal",82),e.bIt("deleteConfirm",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.DeleteConfirmSoft())})("dismiss",function(){const r=e.eBV(n).$implicit;return e.Njj(r.dismiss())}),e.k0s()}}let ni=(()=>{class o extends Qe.w{constructor(n,s,r,d,h,u,E,ce,le,re){super(n,s,E,r,d,h,u),this.baseService=r,this.excelService=le,this.clientService=re,this.title="sales.clientCollection.title",this.titleOperation="sales.clientCollection.titleOperation",this.keySelected="",this.assignUsers=[],this.times=[],this.employees=[],this.searchForm={},this.isResolveList=!0,this.countLoad=2,this.clientParam={pageSize:50,pageNumber:1,search:"",clientId:null},this.clients=[],this.loading=!1,this.searchClient=new We.B,this.setDates=(q,fe,be)=>{if(q?.from||q?.to){const Re=q.to||q.from;this.pagination[fe]=this.datePipe.transform(q.from||q.to,"yyyy-MM-ddT00:00:00"),this.pagination[be]=this.datePipe.transform(Re,"yyyy-MM-ddT23:59:59.999")}else this.pagination[fe]=null,this.pagination[be]=null},this.configRoute()}ngOnInitMore(){this.searchClient.pipe((0,en.B)(300),(0,Je.F)(),(0,tn.n)(n=>this.loadClient(n))).subscribe()}onSearch(){let n={...this.searchForm};this.ngxLoader.startLoader("allLoader"),this.setDates(n.creationDates,"dateFrom","dateTo"),this.loadentities()}loadClient(n){return this.loading=!0,""==n||null==n?(this.loading=!1,(0,pi.of)([])):this.getClientDropdwon(n)}getClientDropdwon(n=""){return this.clientParam.search=n,this.clientParam.clientId=null,this.clientParam.pageNumber=1,this.clientService.GetClientSearch(this.clientParam).pipe((0,tn.n)(s=>(this.clients=s.data,this.loading=!1,[])))}mapForm(n){return{...n}}mapRegisterForm(n){let s={...n};return s.id=0,s}OnSearch(n){this.ngxLoader.startLoader(D.a7),this.loadentities()}configRoute(){}EditModel(n,s,r="md"){this.isEditForm=!0,this.baseService.getById(n).pipe((0,N.Q)(this.notifier)).subscribe(d=>{d.success?(this.clientParam.clientId=d.data.clientId,this.clientParam.search="",this.clientService.GetClientSearch(this.clientParam).subscribe(h=>{this.clients=h.data}),this.form=d.data):this.alertService.error("general.message."+d.message),this.modalService.open(s,{centered:!0,size:r})},d=>{this.alertService.error()})}mapExcel(){let n=[];return this.entities?.forEach(s=>{n.push({nameAr:s.nameAr,nameEn:s.nameEn,isActive:this.getTranslationText("general.table.active"),notes:s.notes})}),n}onExportXlsx(){let n=this.mapExcel();this.excelService.exportAsExcelFile(n,this.getTranslationText(this.title),[])}editEntity(){let n=this.mapForm(this.form);this.baseService.editPut(n.id,n).pipe((0,Z.O)(),(0,te.c)(this.mainDelay),(0,F.Z)(),(0,N.Q)(this.notifier),(0,M.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(s=>{s.success?this.submitFunished():this.alertService.error("general.message."+s.message)},s=>{this.alertService.error("general.message."+s)})}scrollClient(){this.clientParam.pageNumber=this.clientParam.pageNumber+1,this.clientService.GetClientSearch(this.clientParam).subscribe(n=>{this.clients=[...this.clients,...n.data]})}static{this.\u0275fac=function(s){return new(s||o)(e.rXU(U.nX),e.rXU(R.c$),e.rXU(Ur),e.rXU(me.u),e.rXU(x.vh),e.rXU(Y.eD),e.rXU(O.Bq),e.rXU(e.gRc),e.rXU(lt.V),e.rXU(Gn.X))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-clientCollection"]],features:[e.Vt3],decls:25,vars:18,consts:[["tableMaster",""],["operation",""],["deleteModal",""],["tooltipContent",""],["formEntity","ngForm"],["cost","ngModel"],["notes","ngModel"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],[3,"reset","search","exportXlsx","addNew","totalItems","title"],["control",""],[1,"col-md-4","mb-2"],[1,"search-box"],["type","search","id","name","name","name",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],[1,"col-12","col-md-3","mb-2"],["type","text","mwlFlatpickr","","id","isDate","mode","range","altFormat","d/m/Y",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["translate","",2,"width",".5%"],["pSortableColumn","clientId","translate","",2,"width","15%"],[1,"ri-expand-up-down-line"],["pSortableColumn","creationTime","translate","",2,"width","12%"],["pSortableColumn","cost","translate","",2,"width","5%"],["pSortableColumn","isSyncOdoo","translate","",2,"width","6%"],["pSortableColumn","syncDate","translate","",2,"width","8%"],["pSortableColumn","notes","translate","",2,"width","10%"],["translate","",2,"width","15%"],[1,"fs-5"],[1,"badge","bg-success-subtle","text-success"],["class","badge bg-success","translate","sales.salesOrder.syncSend",4,"ngIf"],["class","badge bg-warning","translate","sales.salesOrder.syncNotSend",4,"ngIf"],["tooltipPosition","top",1,"mdi","mdi-cog-outline","text-muted","fs-16","align-middle","me-1",3,"ngbTooltip"],[1,"btn","btn-sm","btn-soft-warning","edit-list","mx-2"],[1,"ri-refresh-fill","align-bottom","mx-1"],[1,"btn","btn-sm","btn-soft-info","edit-list","mx-2",3,"click"],[1,"ri-pencil-fill","align-bottom","mx-1"],[1,"btn","btn-sm","btn-soft-danger","remove-list",3,"click"],[1,"ri-delete-bin-5-fill","align-bottom"],["translate","sales.salesOrder.syncSend",1,"badge","bg-success"],["translate","sales.salesOrder.syncNotSend",1,"badge","bg-warning"],[1,"ri-history-fill","text-warning"],[1,"ri-history-fill","text-danger"],[1,"ri-user-location-fill","text-primary"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["class","fw-bold fs-4","translate","",4,"ngIf"],["translate",""],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"hasProgressBar","fgsType","loaderId"],[3,"submit"],[1,"mb-3"],["for","nameAr","translate","",1,"required","fw-bold","form-label"],["bindLabel","displayName","bindValue","id","name","clientId","required","",3,"scrollToEnd","ngModelChange","virtualScroll","items","typeahead","loading","multiple","ngModel"],[1,"mb-2"],["for","cost","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","cost","type","text","id","cost",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],["for","notes","translate","",1,"fw-bold","form-label"],["rows","2","InputTirmFilter","","name","notes","type","text","id","notes",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,"text-center"],["type","submit","type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],["translate","",1,"fw-bold","fs-4"],["translate","",1,"text-danger","text-center"],[3,"deleteConfirm","dismiss"]],template:function(s,r){if(1&s){const d=e.RV6();e.j41(0,"div",7)(1,"div",8)(2,"div",9)(3,"base-filter",10),e.bIt("reset",function(){return e.eBV(d),e.Njj(r.onReset())})("search",function(){return e.eBV(d),e.Njj(r.onSearch())})("exportXlsx",function(){return e.eBV(d),e.Njj(r.onExportXlsx())})("addNew",function(){e.eBV(d);const u=e.sdS(22);return e.Njj(r.openModalTitle(u,"md"))}),e.qex(4,11),e.j41(5,"div",12)(6,"div",13)(7,"input",14),e.nI1(8,"translate"),e.mxI("ngModelChange",function(u){return e.eBV(d),e.DH7(r.pagination.name,u)||(r.pagination.name=u),e.Njj(u)}),e.k0s(),e.nrm(9,"i",15),e.k0s()(),e.j41(10,"div",16)(11,"input",17),e.nI1(12,"translate"),e.mxI("ngModelChange",function(u){return e.eBV(d),e.DH7(r.searchForm.creationDates,u)||(r.searchForm.creationDates=u),e.Njj(u)}),e.k0s()(),e.bVm(),e.k0s(),e.j41(13,"div",18)(14,"div",19)(15,"p-table",20,0),e.bIt("onLazyLoad",function(u){return e.eBV(d),e.Njj(r.tableChange(u))})("selectionChange",function(u){return e.eBV(d),e.Njj(r.onSelectionChange(u))}),e.DNE(17,$a,22,0,"ng-template",21)(18,Pr,30,16,"ng-template",22),e.k0s()(),e.DNE(19,ei,2,0,"div",23)(20,Yr,6,8,"div",24),e.k0s()()()(),e.DNE(21,Fn,31,16,"ng-template",null,1,e.C5r)(23,Pt,1,0,"ng-template",null,2,e.C5r)}2&s&&(e.R7$(3),e.Y8G("totalItems",r.pagination.totalItems)("title",r.title),e.R7$(4),e.FS9("placeholder",e.bMT(8,14,"general.table.name")),e.R50("ngModel",r.pagination.name),e.R7$(4),e.FS9("placeholder",e.bMT(12,16,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",r.searchForm.creationDates),e.R7$(4),e.Y8G("value",r.entities)("rows",r.pagination.pageSize)("lazy",!0)("totalRecords",r.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",r.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",r.pagination.totalItems>0))},dependencies:[x.bT,m.qT,m.me,m.BC,m.cb,m.YS,m.vS,m.cV,O.s5,ne.kL,dt.b,jt.w,ct.p,$e.g,R.Mm,G.XI,mt.Ei,G.Tg,Y.Cv,Ee.vr,O.md,_e.m,x.vh,R.D9],encapsulation:2})}}return o})();function Xa(o,g){1&o&&(e.j41(0,"tr",45)(1,"th",46),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",47),e.nrm(4,"i",48),e.EFF(5," sales.clientCollection.clientName "),e.k0s(),e.j41(6,"th",49),e.nrm(7,"i",48),e.EFF(8," orderManagement.order.creation "),e.k0s(),e.j41(9,"th",50),e.nrm(10,"i",48),e.EFF(11," sales.clientCollection.cost "),e.k0s(),e.j41(12,"th",51),e.nrm(13,"i",48),e.EFF(14," sales.requestPersonSales.requestPersonStatus "),e.k0s(),e.j41(15,"th",52),e.nrm(16,"i",48),e.EFF(17," sales.clientCollection.notes "),e.k0s(),e.nrm(18,"th",53),e.k0s())}function Ua(o,g){if(1&o&&(e.nrm(0,"i",64),e.EFF(1),e.nI1(2,"date"),e.nrm(3,"br")(4,"i",65),e.EFF(5),e.nI1(6,"date"),e.nrm(7,"br")(8,"i",66),e.EFF(9)),2&o){const n=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.i5U(2,3,n.creationTime,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",e.i5U(6,6,n.lastModificationTime,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",n.creatorName," ")}}function Pa(o,g){if(1&o){const n=e.RV6();e.j41(0,"tr",54)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td")(6,"span",55),e.EFF(7),e.k0s(),e.EFF(8),e.nI1(9,"date"),e.k0s(),e.j41(10,"td"),e.EFF(11),e.k0s(),e.j41(12,"td")(13,"span"),e.nrm(14,"span",56),e.k0s()(),e.j41(15,"td"),e.EFF(16),e.k0s(),e.j41(17,"td"),e.DNE(18,Ua,10,9,"ng-template",null,4,e.C5r),e.nrm(20,"i",57),e.j41(21,"button",58),e.bIt("click",function(){const r=e.eBV(n).$implicit,d=e.XpG(),h=e.sdS(89);return e.Njj(d.openModal(r.id,h))}),e.nrm(22,"i",59),e.k0s(),e.j41(23,"button",60),e.bIt("click",function(){const r=e.eBV(n).$implicit,d=e.XpG(),h=e.sdS(85);return e.Njj(d.EditModel(r.id,h))}),e.nrm(24,"i",61),e.k0s(),e.j41(25,"button",62),e.bIt("click",function(){const r=e.eBV(n).$implicit,d=e.XpG(),h=e.sdS(87);return e.Njj(d.openModal(r.id,h))}),e.nrm(26,"i",63),e.k0s()()()}if(2&o){const n=g.$implicit,s=g.rowIndex,r=e.sdS(19),d=e.XpG();e.R7$(2),e.JRh(s+1),e.R7$(2),e.JRh(n.clientName),e.R7$(3),e.SpI("",n.creatorName," "),e.R7$(),e.SpI(" ",e.i5U(9,11,n.creationTime,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(3),e.JRh(n.cost),e.R7$(2),e.ZvI("badge ",d.getStatus(n.requestPersonStatus),""),e.R7$(),e.FS9("translate","sales.salesOrder."+n.requestPersonStatusName),e.R7$(2),e.JRh(n.notes),e.R7$(4),e.Y8G("ngbTooltip",r)}}function ii(o,g){1&o&&(e.j41(0,"div",67),e.EFF(1," general.table.noData"),e.k0s())}function ri(o,g){if(1&o){const n=e.RV6();e.j41(0,"div",68)(1,"div",69),e.nrm(2,"ngb-pagination-info",70),e.j41(3,"table-length",71),e.bIt("lengthChange",function(r){e.eBV(n);const d=e.XpG();return e.Njj(d.ListItemChange(r))}),e.k0s()(),e.j41(4,"div",72)(5,"ngb-pagination",73),e.bIt("pageChange",function(r){e.eBV(n);const d=e.XpG();return e.Njj(d.pageChanged(r))}),e.mxI("pageChange",function(r){e.eBV(n);const d=e.XpG();return e.DH7(d.pagination.pageNumber,r)||(d.pagination.pageNumber=r),e.Njj(r)}),e.k0s()()()}if(2&o){const n=e.XpG();e.R7$(2),e.Y8G("pagination",n.pagination),e.R7$(),e.Y8G("lengthTable",n.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",n.pagination.pageSize)("collectionSize",n.pagination.totalItems),e.R50("page",n.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function Xi(o,g){1&o&&(e.j41(0,"span",96),e.EFF(1,"general.action.register "),e.k0s())}function Ya(o,g){1&o&&(e.j41(0,"span",96),e.EFF(1,"general.action.edit "),e.k0s())}function Hr(o,g){1&o&&(e.j41(0,"div",97),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function za(o,g){if(1&o){const n=e.RV6();e.j41(0,"div",74)(1,"div",75)(2,"h4",76),e.DNE(3,Xi,2,0,"span",77)(4,Ya,2,0,"span",77),e.j41(5,"span",78),e.EFF(6),e.k0s()(),e.j41(7,"button",79),e.bIt("click",function(){const r=e.eBV(n).$implicit;return e.Njj(r.dismiss("Cross click"))}),e.k0s()(),e.j41(8,"div",80),e.nrm(9,"ngx-ui-loader",81),e.j41(10,"form",82,5),e.bIt("submit",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.OnSubmit())}),e.j41(12,"div",83)(13,"label",84),e.EFF(14,"sales.clientCollection.clientName"),e.k0s(),e.j41(15,"ng-select",85),e.bIt("scrollToEnd",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.scrollClient())}),e.mxI("ngModelChange",function(r){e.eBV(n);const d=e.XpG();return e.DH7(d.form.clientId,r)||(d.form.clientId=r),e.Njj(r)}),e.k0s()(),e.j41(16,"div",86)(17,"label",87),e.EFF(18,"sales.clientCollection.cost"),e.k0s(),e.j41(19,"input",88,6),e.mxI("ngModelChange",function(r){e.eBV(n);const d=e.XpG();return e.DH7(d.form.cost,r)||(d.form.cost=r),e.Njj(r)}),e.k0s(),e.DNE(21,Hr,2,0,"div",89),e.k0s(),e.j41(22,"div",86)(23,"label",90),e.EFF(24,"sales.clientCollection.notes"),e.k0s(),e.j41(25,"textarea",91,7),e.mxI("ngModelChange",function(r){e.eBV(n);const d=e.XpG();return e.DH7(d.form.notes,r)||(d.form.notes=r),e.Njj(r)}),e.k0s()(),e.j41(27,"div",92)(28,"button",93),e.nrm(29,"i",94)(30,"span",95),e.k0s()()()()()}if(2&o){const n=e.sdS(11),s=e.sdS(20),r=e.XpG();e.R7$(3),e.Y8G("ngIf",!r.isEditForm),e.R7$(),e.Y8G("ngIf",r.isEditForm),e.R7$(2),e.JRh(r.titleOperation),e.R7$(3),e.Y8G("hasProgressBar",!1)("fgsType",r.loaderOperationShap)("loaderId",r.operationLoader),e.R7$(6),e.Y8G("virtualScroll",!0)("items",r.clients)("typeahead",r.searchClient)("loading",r.loading)("multiple",!1),e.R50("ngModel",r.form.clientId),e.R7$(4),e.R50("ngModel",r.form.cost),e.R7$(2),e.Y8G("ngIf",s.invalid&&s.touched),e.R7$(4),e.R50("ngModel",r.form.notes),e.R7$(3),e.Y8G("disabled",!n.valid)}}function qa(o,g){if(1&o){const n=e.RV6();e.j41(0,"delete-modal",98),e.bIt("deleteConfirm",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.DeleteConfirmSoft())})("dismiss",function(){const r=e.eBV(n).$implicit;return e.Njj(r.dismiss())}),e.k0s()}}function je(o,g){if(1&o){const n=e.RV6();e.j41(0,"div",83)(1,"label",103),e.EFF(2,"sales.clientCollection.cost"),e.k0s(),e.j41(3,"input",104),e.mxI("ngModelChange",function(r){e.eBV(n);const d=e.XpG(2);return e.DH7(d.form.cost,r)||(d.form.cost=r),e.Njj(r)}),e.k0s()()}if(2&o){const n=e.XpG(2);e.R7$(3),e.R50("ngModel",n.form.cost)}}function Me(o,g){if(1&o){const n=e.RV6();e.j41(0,"div",74)(1,"div",75)(2,"h4",76)(3,"span",78),e.EFF(4),e.k0s()(),e.j41(5,"button",79),e.bIt("click",function(){const r=e.eBV(n).$implicit;return e.Njj(r.dismiss("Cross click"))}),e.k0s()(),e.j41(6,"div",80),e.nrm(7,"ngx-ui-loader",81),e.j41(8,"form",82,5),e.bIt("submit",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.OnStatusSubmit())}),e.j41(10,"div",28)(11,"div",83)(12,"label",99),e.EFF(13,"sales.requestPersonSales.requestPersonStatus"),e.k0s(),e.j41(14,"ng-select",100),e.nI1(15,"translate"),e.mxI("ngModelChange",function(r){e.eBV(n);const d=e.XpG();return e.DH7(d.form.requestPersonStatus,r)||(d.form.requestPersonStatus=r),e.Njj(r)}),e.k0s()(),e.DNE(16,je,4,1,"div",101),e.k0s(),e.j41(17,"div",92)(18,"button",102),e.nrm(19,"i",94)(20,"span",95),e.k0s()()()()()}if(2&o){const n=e.sdS(9),s=e.XpG();e.R7$(4),e.JRh(s.titleOperation),e.R7$(3),e.Y8G("hasProgressBar",!1)("fgsType",s.loaderOperationShap)("loaderId",s.operationLoader),e.R7$(7),e.FS9("placeholder",e.bMT(15,10,"sales.requestPersonSales.requestPersonStatus")),e.Y8G("items",s.status)("multiple",!1),e.R50("ngModel",s.form.requestPersonStatus),e.R7$(2),e.Y8G("ngIf",30==s.form.requestPersonStatus),e.R7$(2),e.Y8G("disabled",!n.valid)}}let Ha=(()=>{class o extends Qe.w{constructor(n,s,r,d,h,u,E,ce,le,re){super(n,s,E,r,d,h,u),this.baseService=r,this.excelService=le,this.clientService=re,this.title="sales.requestPersonSales.title",this.titleOperation="sales.requestPersonSales.titleOperation",this.searchForm={},this.isResolveList=!0,this.countLoad=2,this.clientParam={pageSize:50,pageNumber:1,search:"",clientId:null},this.clients=[],this.loading=!1,this.searchClient=new We.B,this.status=[],this.requestStatus={all:0,pending:0,underReview:0,accept:0,reject:0},this.option={startVal:0,useEasing:!0,duration:2,decimalPlaces:0},this.setDates=(q,fe,be)=>{if(q?.from||q?.to){const Re=q.to||q.from;this.pagination[fe]=this.datePipe.transform(q.from||q.to,"yyyy-MM-ddT00:00:00"),this.pagination[be]=this.datePipe.transform(Re,"yyyy-MM-ddT23:59:59.999")}else this.pagination[fe]=null,this.pagination[be]=null},this.configRoute()}ngOnInitMore(){this.searchClient.pipe((0,en.B)(300),(0,Je.F)(),(0,tn.n)(n=>this.loadClient(n))).subscribe(),this.GetRequestLookups()}GetRequestLookups(){this.baseService.GetRequestLookups().subscribe(n=>{let s=n.data.status;s.forEach(r=>{r.name=this.getTranslationText("sales.salesOrder."+r.name)}),this.status=s})}onSearch(){let n={...this.searchForm};this.ngxLoader.startLoader("allLoader"),this.setDates(n.creationDates,"dateFrom","dateTo"),this.loadentities()}loadClient(n){return this.loading=!0,""==n||null==n?(this.loading=!1,(0,pi.of)([])):this.getClientDropdwon(n)}getClientDropdwon(n=""){return this.clientParam.search=n,this.clientParam.clientId=null,this.clientParam.pageNumber=1,this.clientService.GetClientSearch(this.clientParam).pipe((0,tn.n)(s=>(this.clients=s.data,this.loading=!1,[])))}mapForm(n){return{...n}}mapRegisterForm(n){let s={...n};return s.id=0,s}OnSearch(n){this.ngxLoader.startLoader(D.a7),this.loadentities()}configRoute(){}EditModel(n,s,r="md"){this.isEditForm=!0,this.baseService.getById(n).pipe((0,N.Q)(this.notifier)).subscribe(d=>{d.success?(this.clientParam.clientId=d.data.clientId,this.clientParam.search="",this.clientService.GetClientSearch(this.clientParam).subscribe(h=>{this.clients=h.data}),this.form=d.data):this.alertService.error("general.message."+d.message),this.modalService.open(s,{centered:!0,size:r})},d=>{this.alertService.error()})}mapExcel(){let n=[];return this.entities?.forEach(s=>{n.push({nameAr:s.nameAr,nameEn:s.nameEn,isActive:this.getTranslationText("general.table.active"),notes:s.notes})}),n}onExportXlsx(){let n=this.mapExcel();this.excelService.exportAsExcelFile(n,this.getTranslationText(this.title),[])}editEntity(){let n=this.mapForm(this.form);this.baseService.editPut(n.id,n).pipe((0,Z.O)(),(0,te.c)(this.mainDelay),(0,F.Z)(),(0,N.Q)(this.notifier),(0,M.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(s=>{s.success?this.submitFunished():this.alertService.error("general.message."+s.message)},s=>{this.alertService.error("general.message."+s)})}scrollClient(){this.clientParam.pageNumber=this.clientParam.pageNumber+1,this.clientService.GetClientSearch(this.clientParam).subscribe(n=>{this.clients=[...this.clients,...n.data]})}getStatus(n){return 10==n||20==n?"bg-warning-subtle text-warning":30==n?"bg-success-subtle text-success":40==n?"bg-danger-subtle text-danger":"bg-warning-subtle text-warning"}OnStatusSubmit(){let n={requestPersonStatus:this.form.requestPersonStatus,id:this.operationId,cost:this.form.cost?this.form.cost:0};this.ngxLoader.start(this.operationLoader),this.baseService.UpdateLimit(n).pipe((0,Z.O)(),(0,te.c)(this.mainDelay),(0,F.Z)(),(0,N.Q)(this.notifier),(0,M.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(s=>{s.success?(this.alertService.success(),this.modalService.dismissAll(),this.loadentities()):this.alertService.error("general.message."+s.message)},s=>{this.alertService.error("general.message."+s)})}onStatusSelect(n){this.pagination.requestPersonStatus=n,this.loadentities()}static{this.\u0275fac=function(s){return new(s||o)(e.rXU(U.nX),e.rXU(R.c$),e.rXU(tr),e.rXU(me.u),e.rXU(x.vh),e.rXU(Y.eD),e.rXU(O.Bq),e.rXU(e.gRc),e.rXU(lt.V),e.rXU(Gn.X))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-requestPersonSales"]],features:[e.Vt3],decls:90,vars:32,consts:[["tableMaster",""],["operation",""],["deleteModal",""],["operationStatus",""],["tooltipContent",""],["formEntity","ngForm"],["cost","ngModel"],["notes","ngModel"],[3,"title","breadcrumbItems"],[1,"row","justify-content-around"],[1,"col-12","col-md-3","cursor-pointer"],[1,"card","card-animate",3,"click"],[1,"card-body"],[1,"d-flex","justify-content-between"],["translate","sales.salesOrder.all",1,"fw-medium","text-muted","mb-0"],[1,"mt-4","ff-secondary","fw-semibold"],[1,"counter-value",3,"countUp","options"],[1,"avatar-sm","flex-shrink-0"],[1,"avatar-title","bg-primary-subtle","text-primary","rounded-circle","fs-4"],[1,"ri-ticket-2-line"],[1,"col-12","col-md-2","cursor-pointer"],["translate","sales.salesOrder.Pending",1,"fw-medium","text-muted","mb-0"],[1,"avatar-title","bg-warning-subtle","text-warning","rounded-circle","fs-4"],["translate","sales.salesOrder.UnderReview",1,"fw-medium","text-muted","mb-0"],["translate","sales.salesOrder.Accept",1,"fw-medium","text-muted","mb-0"],[1,"avatar-title","bg-success-subtle","text-success","rounded-circle","fs-4"],["translate","sales.salesOrder.Reject",1,"fw-medium","text-muted","mb-0"],[1,"avatar-title","bg-danger-subtle","text-danger","rounded-circle","fs-4"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],[3,"reset","search","exportXlsx","addNew","totalItems","title"],["control",""],[1,"col-md-4","mb-2"],[1,"search-box"],["type","search","id","name","name","name",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],[1,"col-12","col-md-3","mb-2"],["type","text","mwlFlatpickr","","id","isDate","mode","range","altFormat","d/m/Y",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["translate","",2,"width",".5%"],["pSortableColumn","clientId","translate","",2,"width","15%"],[1,"ri-expand-up-down-line"],["pSortableColumn","creationTime","translate","",2,"width","12%"],["pSortableColumn","cost","translate","",2,"width","5%"],["pSortableColumn","requestPersonStatus","translate","",2,"width","8%"],["pSortableColumn","notes","translate","",2,"width","10%"],["translate","",2,"width","15%"],[1,"fs-5"],[1,"badge","bg-success-subtle","text-success"],[3,"translate"],["tooltipPosition","top",1,"mdi","mdi-cog-outline","text-muted","fs-16","align-middle","me-1",3,"ngbTooltip"],[1,"btn","btn-sm","btn-soft-warning","edit-list","mx-2",3,"click"],[1,"ri-exchange-line","align-bottom","mx-1"],[1,"btn","btn-sm","btn-soft-info","edit-list","mx-2",3,"click"],[1,"ri-pencil-fill","align-bottom","mx-1"],[1,"btn","btn-sm","btn-soft-danger","remove-list",3,"click"],[1,"ri-delete-bin-5-fill","align-bottom"],[1,"ri-history-fill","text-warning"],[1,"ri-history-fill","text-danger"],[1,"ri-user-location-fill","text-primary"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["class","fw-bold fs-4","translate","",4,"ngIf"],["translate",""],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"hasProgressBar","fgsType","loaderId"],[3,"submit"],[1,"mb-3"],["for","nameAr","translate","",1,"required","fw-bold","form-label"],["bindLabel","displayName","bindValue","id","name","clientId","required","",3,"scrollToEnd","ngModelChange","virtualScroll","items","typeahead","loading","multiple","ngModel"],[1,"mb-2"],["for","cost","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","cost","type","text","id","cost",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],["for","notes","translate","",1,"fw-bold","form-label"],["rows","2","InputTirmFilter","","name","notes","type","text","id","notes",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,"text-center"],["type","submit","type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],["translate","",1,"fw-bold","fs-4"],["translate","",1,"text-danger","text-center"],[3,"deleteConfirm","dismiss"],["for","status","translate","",1,"required","fw-bold","form-label"],["name","name","bindValue","id","bindLabel","name","required","",3,"ngModelChange","placeholder","items","multiple","ngModel"],["class","mb-3",4,"ngIf"],["type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],["for","cost","translate","",1,"required","fw-bold","form-label"],["type","numbers","id","cost","name","cost",1,"form-control",3,"ngModelChange","ngModel"]],template:function(s,r){if(1&s){const d=e.RV6();e.nrm(0,"app-breadcrumbs",8),e.nI1(1,"translate"),e.j41(2,"div",9)(3,"div",10)(4,"div",11),e.bIt("click",function(){return e.eBV(d),e.Njj(r.onStatusSelect(0))}),e.j41(5,"div",12)(6,"div",13)(7,"div"),e.nrm(8,"p",14),e.j41(9,"h2",15),e.nrm(10,"span",16),e.k0s()(),e.j41(11,"div")(12,"div",17)(13,"span",18),e.nrm(14,"i",19),e.k0s()()()()()()(),e.j41(15,"div",20)(16,"div",11),e.bIt("click",function(){return e.eBV(d),e.Njj(r.onStatusSelect(10))}),e.j41(17,"div",12)(18,"div",13)(19,"div"),e.nrm(20,"p",21),e.j41(21,"h2",15),e.nrm(22,"span",16),e.k0s()(),e.j41(23,"div")(24,"div",17)(25,"span",22),e.nrm(26,"i",19),e.k0s()()()()()()(),e.j41(27,"div",20)(28,"div",11),e.bIt("click",function(){return e.eBV(d),e.Njj(r.onStatusSelect(20))}),e.j41(29,"div",12)(30,"div",13)(31,"div"),e.nrm(32,"p",23),e.j41(33,"h2",15),e.nrm(34,"span",16),e.k0s()(),e.j41(35,"div")(36,"div",17)(37,"span",22),e.nrm(38,"i",19),e.k0s()()()()()()(),e.j41(39,"div",20)(40,"div",11),e.bIt("click",function(){return e.eBV(d),e.Njj(r.onStatusSelect(30))}),e.j41(41,"div",12)(42,"div",13)(43,"div"),e.nrm(44,"p",24),e.j41(45,"h2",15),e.nrm(46,"span",16),e.k0s()(),e.j41(47,"div")(48,"div",17)(49,"span",25),e.nrm(50,"i",19),e.k0s()()()()()()(),e.j41(51,"div",20)(52,"div",11),e.bIt("click",function(){return e.eBV(d),e.Njj(r.onStatusSelect(40))}),e.j41(53,"div",12)(54,"div",13)(55,"div"),e.nrm(56,"p",26),e.j41(57,"h2",15),e.nrm(58,"span",16),e.k0s()(),e.j41(59,"div")(60,"div",17)(61,"span",27),e.nrm(62,"i",19),e.k0s()()()()()()()(),e.j41(63,"div",28)(64,"div",29)(65,"div",30)(66,"base-filter",31),e.bIt("reset",function(){return e.eBV(d),e.Njj(r.onReset())})("search",function(){return e.eBV(d),e.Njj(r.onSearch())})("exportXlsx",function(){return e.eBV(d),e.Njj(r.onExportXlsx())})("addNew",function(){e.eBV(d);const u=e.sdS(85);return e.Njj(r.openModalTitle(u,"md"))}),e.qex(67,32),e.j41(68,"div",33)(69,"div",34)(70,"input",35),e.nI1(71,"translate"),e.mxI("ngModelChange",function(u){return e.eBV(d),e.DH7(r.pagination.name,u)||(r.pagination.name=u),e.Njj(u)}),e.k0s(),e.nrm(72,"i",36),e.k0s()(),e.j41(73,"div",37)(74,"input",38),e.nI1(75,"translate"),e.mxI("ngModelChange",function(u){return e.eBV(d),e.DH7(r.searchForm.creationDates,u)||(r.searchForm.creationDates=u),e.Njj(u)}),e.k0s()(),e.bVm(),e.k0s(),e.j41(76,"div",12)(77,"div",39)(78,"p-table",40,0),e.bIt("onLazyLoad",function(u){return e.eBV(d),e.Njj(r.tableChange(u))})("selectionChange",function(u){return e.eBV(d),e.Njj(r.onSelectionChange(u))}),e.DNE(80,Xa,19,0,"ng-template",41)(81,Pa,27,14,"ng-template",42),e.k0s()(),e.DNE(82,ii,2,0,"div",43)(83,ri,6,8,"div",44),e.k0s()()()(),e.DNE(84,za,31,16,"ng-template",null,1,e.C5r)(86,qa,1,0,"ng-template",null,2,e.C5r)(88,Me,21,12,"ng-template",null,3,e.C5r)}2&s&&(e.FS9("title",e.bMT(1,26,r.title)),e.Y8G("breadcrumbItems",r.breadCrumbItems),e.R7$(10),e.Y8G("countUp",null==r.requestStatus?null:r.requestStatus.all)("options",r.option),e.R7$(12),e.Y8G("countUp",null==r.requestStatus?null:r.requestStatus.pending)("options",r.option),e.R7$(12),e.Y8G("countUp",null==r.requestStatus?null:r.requestStatus.underReview)("options",r.option),e.R7$(12),e.Y8G("countUp",null==r.requestStatus?null:r.requestStatus.accept)("options",r.option),e.R7$(12),e.Y8G("countUp",null==r.requestStatus?null:r.requestStatus.reject)("options",r.option),e.R7$(8),e.Y8G("totalItems",r.pagination.totalItems)("title",r.title),e.R7$(4),e.FS9("placeholder",e.bMT(71,28,"general.table.name")),e.R50("ngModel",r.pagination.name),e.R7$(4),e.FS9("placeholder",e.bMT(75,30,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",r.searchForm.creationDates),e.R7$(4),e.Y8G("value",r.entities)("rows",r.pagination.pageSize)("lazy",!0)("totalRecords",r.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",r.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",r.pagination.totalItems>0))},dependencies:[x.bT,m.qT,m.me,m.BC,m.cb,m.YS,m.vS,m.cV,O.s5,ne.kL,De.G,Xn.m,dt.b,jt.w,ct.p,$e.g,R.Mm,G.XI,mt.Ei,G.Tg,Y.Cv,Ee.vr,O.md,_e.m,x.vh,R.D9],encapsulation:2})}}return o})(),Wa=(()=>{class o{constructor(){}ngOnInit(){}static{this.\u0275fac=function(s){return new(s||o)}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-priceList"]],decls:2,vars:0,template:function(s,r){1&s&&(e.j41(0,"p"),e.EFF(1," priceList works!\n"),e.k0s())},encapsulation:2})}}return o})(),Wr=(()=>{class o extends $i.E{constructor(n,s,r){super(n,s,r)}static{this.\u0275fac=function(s){return new(s||o)(e.KVO(U.Ix),e.KVO(Ur),e.KVO(me.u))}}static{this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var Ui=j(41198);function Pi(o,g){if(1&o){const n=e.RV6();e.j41(0,"button",5),e.bIt("click",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.isFlagTime=!r.isFlagTime)}),e.nrm(1,"i",6),e.k0s()}}function Rn(o,g){if(1&o){const n=e.RV6();e.j41(0,"button",5),e.bIt("click",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.isFlagTime=!r.isFlagTime)}),e.nrm(1,"i",7),e.k0s()}}function Yi(o,g){1&o&&e.nrm(0,"assign-order",8),2&o&&e.Y8G("isTrunck",!0)}function pn(o,g){if(1&o&&(e.qex(0),e.j41(1,"div",17)(2,"div",18)(3,"div",19)(4,"div",20)(5,"div",21),e.EFF(6,"Arrived at location"),e.k0s(),e.j41(7,"div",22)(8,"div",23),e.EFF(9),e.k0s(),e.j41(10,"div",24)(11,"span",25)(12,"div",26)(13,"button",27),e.nrm(14,"i",28),e.k0s(),e.j41(15,"ul",29)(16,"li")(17,"span",30),e.nrm(18,"i",31)(19,"span",32),e.k0s()(),e.j41(20,"li")(21,"span",30),e.nrm(22,"i",33)(23,"span",34),e.k0s()()()()()(),e.j41(24,"div",35),e.EFF(25),e.k0s(),e.j41(26,"div",36),e.EFF(27),e.k0s(),e.j41(28,"div",37),e.EFF(29),e.nI1(30,"date"),e.k0s(),e.j41(31,"div",38)(32,"span",39),e.EFF(33),e.k0s()()()(),e.j41(34,"div",40)(35,"span",41),e.EFF(36),e.nI1(37,"date"),e.k0s()()()()(),e.bVm()),2&o){const n=g.$implicit;e.R7$(9),e.SpI("#SO#",n.id,""),e.R7$(16),e.JRh(n.clientName),e.R7$(2),e.JRh(n.mobile),e.R7$(2),e.JRh(e.i5U(30,6,n.acutalVisitDate,"dd-MM-yyyy ")),e.R7$(4),e.SpI("",n.netPrice," SAR "),e.R7$(3),e.JRh(e.i5U(37,9,n.acutalVisitDate,"HH:mm "))}}function kn(o,g){if(1&o&&(e.qex(0),e.j41(1,"div",10)(2,"div",11)(3,"div")(4,"div",12)(5,"span",13),e.EFF(6),e.k0s(),e.j41(7,"strong"),e.EFF(8),e.k0s()(),e.j41(9,"div",14)(10,"div",15)(11,"ngx-slick-carousel",16),e.DNE(12,pn,38,12,"ng-container",9),e.k0s()()()()()(),e.bVm()),2&o){const n=g.$implicit,s=e.XpG(2);e.R7$(6),e.JRh(n.orders.length),e.R7$(2),e.JRh(n.name),e.R7$(3),e.Y8G("config",s.config),e.R7$(),e.Y8G("ngForOf",n.orders)}}function On(o,g){if(1&o&&(e.qex(0),e.DNE(1,kn,13,4,"ng-container",9),e.bVm()),2&o){const n=e.XpG();e.R7$(),e.Y8G("ngForOf",n.trunks)}}const un=[{path:"sales-orders",component:Da,canActivate:[ji.g],data:{permission:[]}},{path:"setting",component:Xs,canActivate:[ji.g],data:{permission:[]}},{path:"new",component:Ti},{path:"sales-invoices",component:Ba,resolve:{data:mn}},{path:"Client-Collections",component:ni,resolve:{data:Wr}},{path:"Requests-Limit",component:Ha,resolve:{data:mn}},{path:"Prices-List",component:Wa,resolve:{data:mn}},{path:"assign-truck-orders",component:(()=>{class o{constructor(n){this.offerOrderService=n,this.title="sales.assignTruckOrder.title",this.titleOperation="sales.assignTruckOrder.title",this.config={infinite:!0,slidesToShow:5,slidesToScroll:1,autoplay:!1,arrows:!1},this.trunks=[],this.isFlagTime=!0}ngOnInit(){this.getTruncks()}getTruncks(){this.offerOrderService.GetAssignSalesOrder().subscribe(n=>{this.trunks=n.data})}static{this.\u0275fac=function(s){return new(s||o)(e.rXU(Ve))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["assign-truck-order"]],decls:7,vars:8,consts:[[3,"title","breadcrumbItems"],["more",""],["type","button","class","btn btn-primary waves-effect waves-light text-right ",3,"click",4,"ngIf"],[3,"isTrunck",4,"ngIf"],[4,"ngIf"],["type","button",1,"btn","btn-primary","waves-effect","waves-light","text-right",3,"click"],[1,"ri-apps-line"],[1,"ri-menu-line"],[3,"isTrunck"],[4,"ngFor","ngForOf"],[1,"row","mt-4"],[1,"col-lg-12"],["role","alert",1,"alert","alert-primary","alert-dismissible","material-shadow","alert-label-icon","rounded-label","fade","show"],[1,"label-icon"],[1,"horizontal-timeline","my-3"],["dir","ltr",1,"swiper","timelineSlider"],[1,"carousel",3,"config"],["ngxSlickItem","",1,"swiper-slide"],[1,"card","p-0","border-0","item-box","text-center","ribbon-box","border","shadow-none","mb-lg-0","material-shadow",2,"overflow-y","visible"],[1,"card-body","p-0"],[1,"timeline-content","p-3","rounded"],[1,"ribbon","ribbon-success","ribbon-shape"],[1,"row","justify-content-between","align-items-center"],[1,"col-12","col-md-8","text-muted","fw-medium","mt-4","text-justify"],[1,"col-12","col-md-4","mt-4","text-right"],[1,"d-inline-block"],[1,"dropdown-custom","d-inline-block"],["type","button",1,"btn","dropbtn","btn-soft-secondary","btn-sm","dropdown-custom","arrow-none"],[1,"ri-more-fill"],[1,"dropdown-menu","dropdown-menu-end","dropdown-content",2,"left","0"],[1,"dropdown-item"],[1,"text-primary","ri-swap-line","align-bottom","me-2"],["translate","orderManagement.order.changeTeamStatus"],[1,"text-success","ri-checkbox-circle-fill","align-bottom","me-2"],["translate","orderManagement.order.finishOrder"],[1,"col-12","col-md-12","text-muted","fw-medium"],[1,"col-12","text-muted","fw-medium"],[1,"col-12","col-md-6","text-muted","fw-medium"],[1,"col-12","col-md-6","text-muted","fw-medium","text-right"],[1,"badge","bg-primary-subtle","text-primary","my-1"],[1,"time"],[1,"badge","bg-success"]],template:function(s,r){1&s&&(e.j41(0,"app-breadcrumbs",0),e.nI1(1,"translate"),e.qex(2,1),e.DNE(3,Pi,2,0,"button",2)(4,Rn,2,0,"button",2),e.bVm(),e.k0s(),e.DNE(5,Yi,1,1,"assign-order",3)(6,On,2,1,"ng-container",4)),2&s&&(e.FS9("title",e.bMT(1,6,r.title)),e.Y8G("breadcrumbItems",r.breadCrumbItems),e.R7$(3),e.Y8G("ngIf",!r.isFlagTime),e.R7$(),e.Y8G("ngIf",r.isFlagTime),e.R7$(),e.Y8G("ngIf",!r.isFlagTime),e.R7$(),e.Y8G("ngIf",r.isFlagTime))},dependencies:[x.Sq,x.bT,Xn.m,R.Mm,Ui.qW,Ui.Hv,Cr,x.vh,R.D9],encapsulation:2})}}return o})()},{path:"new/:id",component:Ti,canActivate:[ji.g],data:{permission:["order.edit"]}}];let Ja=(()=>{class o{static{this.\u0275fac=function(s){return new(s||o)}}static{this.\u0275mod=e.$C({type:o})}static{this.\u0275inj=e.G2t({imports:[U.iI.forChild(un),U.iI]})}}return o})();var Qa=j(71144),Ka=j(81141);let Za=(()=>{class o{constructor(){(0,J.eV)(ue().loadAnimation)}static{this.\u0275fac=function(s){return new(s||o)}}static{this.\u0275mod=e.$C({type:o})}static{this.\u0275inj=e.G2t({imports:[x.MD,m.YN,m.X1,O.zH,O.Pv,O.c9,ne.ND,De.r,Ja,Ge.G,R.h,G.bG,Zt.q4,Tt.H_,O.c9,Y.th,Ee.MQ,O.n8,Qa.j,O._f,Bt.S,xn.U,Ka.tm,Ui.TV]})}}return o})()},75622:(st,ke,j)=>{"use strict";j.d(ke,{w:()=>N});var x=j(21413),m=j(56977),O=j(37021),ne=j(35335),De=j(45236),J=j(70980),Le=j(99437),ue=j(18810),Ge=j(45286),R=j(36158),G=j(54438),Zt=j(51188),Tt=j(8147),Y=j(69005),Ee=j(67569),U=j(3888),e=j(60177),We=j(1530);let N=(()=>{class Z{constructor(F,M,he,Oe,D,mi,Rt){this.routerActive=F,this.translateService=M,this.modalService=he,this.baseService=Oe,this.alertService=D,this.datePipe=mi,this.ngxLoader=Rt,this.title="",this.mainDelay=50,this.operationId=0,this.selectedRow=[],this.pagination={pageNumber:1,pageSize:10},this.notifier=new x.B,this.checkAll=!1,this.checkOne=!1,this.checkMore=!1,this.loader=!1,this.form={},this.isEditForm=!1,this.draw=1,this.index=0,this.lengthSelect=0,this.screenName="",this.filterToggle=!0,this.start=1,this.startFirstLoad=!0,this.btnDisabled=!0,this.loaderSearchShap=R.cX,this.loaderOperationShap=R.$$,this.operationLoader=R.ZW,this.loaderDeleteShap=R.jg,this.mainTable=R.uG,this.searchLoader=R.a7,this.deleteLoader=R.Fq,this.langArabic="ar",this.paymentTypes=[],this.tableLengthSelect=[10,20,30,50,100,500,1e3],this.maxSizePagination=10,this.isResolveList=!1,this.countLoad=0,this.pagination.pageSize=10,this.pagination.pageNumber=1}ngOnInit(){this.lang=this.translateService.currentLang,this.translateConfig(),this.ngOnInitMore()}ngOnInitMore(){}routeDataConfig(){this.routerActive.data.pipe((0,m.Q)(this.notifier)).subscribe(F=>{this.entities=F.data.result,this.pagination=F.data.pagination,this.pagination.pageNumber=1,this.pagination.pageSize=10,this.ngxLoader.stopLoader(R.a7)},F=>{this.alertService.error()})}translateConfig(){this.translateService.onLangChange.pipe((0,m.Q)(this.notifier)).subscribe(F=>{this.lang=F.lang})}getTranslationText(F){let M="";return this.translateService.get(F).pipe((0,m.Q)(this.notifier)).subscribe(he=>{M=he}),M}ngAfterViewInit(){this.ngAfterViewInitMore()}ngAfterViewInitMore(){}getRenderString(F){return null!=F?F.substring(0,10)+"...":""}getRenderIndex(F){return this.index++,this.index}successDataTable(F){this.ngxLoader.stopLoader(R.a7),this.pagination.totalItems=F.data.pagination.totalItems,this.startFirstLoad=!1}errorDataTable(){this.ngxLoader.stopLoader(R.a7),this.alertService.error()}openModalTitle(F,M="md"){this.isEditForm=!1,this.form={},this.modalService.open(F,{centered:!0,size:M})}openModal(F,M,he="md"){this.isEditForm=!1,this.form={},this.selectedRow=[{id:F}],this.operationId=F,this.modalService.open(M,{centered:!0,size:he})}openModalMoreOperation(F){this.isEditForm=!1,this.moreIdSelected=this.selectedRow.map(M=>M.id)}closeModelDeleted(){this.modalRef?.hide(),this.loader=!1,this.btnDisabled=!0}OnSearch(F){this.ngxLoader.startLoader("allLoader"),this.loadentities()}OnSubmit(){this.ngxLoader.startLoader(this.operationLoader),!0===this.isEditForm?this.editEntity():this.registerEntity()}loadentities(){this.countLoad=this.countLoad+1,(!this.isResolveList||1!==this.countLoad)&&(this.baseService.get(this.pagination).pipe((0,m.Q)(this.notifier)).subscribe(F=>{this.ngxLoader.stopLoader(R.a7),this.entities=F.data,this.pagination.totalItems=F.totalItems,this.LoadSuccess()},F=>{this.ngxLoader.stopLoader(R.a7),this.alertService.error(F)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[])}LoadSuccess(){}tableChange(F){this.pagination.filterType=F.sortField,this.pagination.sortType=1==F.sortOrder?"asc":"desc",this.loadentities()}registerEntity(){let F=this.mapRegisterForm(this.form);this.baseService.register(F).pipe((0,O.O)(),(0,ne.c)(this.mainDelay),(0,De.Z)(),(0,m.Q)(this.notifier),(0,J.j)(()=>this.ngxLoader.stopLoader(this.operationLoader)),(0,Le.W)(M=>(0,ue.$)(M))).subscribe(M=>{M.success?this.submitFunished():this.alertService.error("general.message."+M.message)},M=>{this.alertService.error("general.message."+M)})}editEntity(){let F=this.mapForm(this.form);this.baseService.edit(F.id,F).pipe((0,O.O)(),(0,ne.c)(this.mainDelay),(0,De.Z)(),(0,m.Q)(this.notifier),(0,J.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(M=>{M.success?this.submitFunished():this.alertService.error("general.message."+M.message)},M=>{this.alertService.error("general.message."+M)})}mapForm(F){return F}mapRegisterForm(F){return F.id=0,F}submitFunished(){this.alertService.success(),this.loadentities(),this.modalService?.dismissAll(),this.ngxLoader.stop(R.a7),this.btnDisabled=!0}EditModel(F,M,he="md"){this.isEditForm=!0,this.baseService.getById(F).pipe((0,m.Q)(this.notifier)).subscribe(Oe=>{Oe.success?this.form=Oe.data:this.alertService.error("general.message."+Oe.message),this.modalService.open(M,{centered:!0,size:he})},Oe=>{this.alertService.error()})}EditModelTilte(F){this.isEditForm=!0,this.baseService.getById(this.selectedRow[0].id).pipe((0,m.Q)(this.notifier)).subscribe(he=>{he?this.form=he:this.alertService.error("general.message."+he)},he=>{this.alertService.error()})}onSelectionChange(F){this.selectedRow=F,this.lengthSelect=F.length}resetSelected(){this.selectedRow=[],this.lengthSelect=0}pageChanged(F){this.pagination.pageNumber=F,this.loadentities()}ListItemChange(F){this.pagination.pageSize=F.target.value,this.loadentities()}searchChange(F){this.pagination.filterValue=F,this.loadentities()}DeleteConfirm(){console.log(this.selectedRow),this.ngxLoader.startLoader(R.Fq);let F=this.selectedRow.map(M=>M.id);this.baseService.deleteRange(F).pipe((0,O.O)(),(0,ne.c)(this.mainDelay),(0,De.Z)(),(0,m.Q)(this.notifier),(0,J.j)(()=>this.ngxLoader.stopLoader(R.Fq))).subscribe(M=>{M.success?(this.alertService.success(),this.loadentities(),this.modalService.dismissAll(),this.resetSelected()):this.alertService.error("general.message."+M)},()=>{this.alertService.error()})}DeleteConfirmSoft(){console.log(this.selectedRow,"selectedRow"),this.ngxLoader.startLoader(R.Fq),this.baseService.softDelete(this.selectedRow[0].id).pipe((0,O.O)(),(0,ne.c)(this.mainDelay),(0,De.Z)(),(0,m.Q)(this.notifier),(0,J.j)(()=>this.ngxLoader.stopLoader(R.Fq))).subscribe(F=>{F.success?(this.alertService.success(),this.loadentities(),this.modalService.dismissAll(),this.resetSelected()):this.alertService.error("general.message."+F)},()=>{this.alertService.error()})}getIds(){return this.selectedRow.map(F=>F.id)}isEmpty(F){return(void 0===F||null==F||F.length)<=0}OnReset(F){this.form={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems}}onReset(){this.form={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems}}closeModel(F){this.modalRef?.hide()}ngOnDestroy(){this.notifier.next(),this.notifier.complete(),this.OnDestroyMore()}OnDestroyMore(){}static{this.\u0275fac=function(M){return new(M||Z)(G.rXU(Zt.nX),G.rXU(Tt.c$),G.rXU(Y.Bq),G.rXU(Ee.d),G.rXU(U.u),G.rXU(e.vh),G.rXU(We.eD))}}static{this.\u0275cmp=G.VBU({type:Z,selectors:[["app-base"]],viewQuery:function(M,he){if(1&M&&G.GBs(Ge.XI,5),2&M){let Oe;G.mGM(Oe=G.lsd())&&(he.tableMaster=Oe.first)}},decls:0,vars:0,template:function(M,he){},encapsulation:2})}}return Z})()},88148:(st,ke,j)=>{"use strict";j.d(ke,{p:()=>O});var x=j(54438),m=j(8147);let O=(()=>{class ne{static{this.\u0275fac=function(Le){return new(Le||ne)}}static{this.\u0275cmp=x.VBU({type:ne,selectors:[["ngb-pagination-info"]],inputs:{pagination:"pagination"},decls:6,vars:2,consts:[[1,"d-inline-block","mx-1","text-pInfo"],["translate","general.table.pFrom",1,"text-pInfo"],["translate","general.table.item",1,"text-pInfo"]],template:function(Le,ue){1&Le&&(x.j41(0,"span",0),x.EFF(1),x.k0s(),x.nrm(2,"span",1),x.j41(3,"span",0),x.EFF(4),x.k0s(),x.nrm(5,"span",2)),2&Le&&(x.R7$(),x.JRh(ue.pagination.totalItems>ue.pagination.pageNumber*ue.pagination.pageSize?ue.pagination.pageNumber*ue.pagination.pageSize:ue.pagination.totalItems),x.R7$(3),x.JRh(ue.pagination.totalItems))},dependencies:[m.Mm],styles:[".text-pInfo[_ngcontent-%COMP%]{font-size:.7rem;color:#8a96a0}"]})}}return ne})()},91580:(st,ke,j)=>{"use strict";j.d(ke,{g:()=>De});var x=j(54438),m=j(60177),O=j(89417);function ne(J,Le){if(1&J&&(x.j41(0,"option"),x.EFF(1),x.k0s()),2&J){const ue=Le.$implicit;x.R7$(),x.JRh(ue)}}let De=(()=>{class J{constructor(){this.lengthChange=new x.bkB}ListItemChange(ue){this.lengthChange.emit(ue)}static{this.\u0275fac=function(Ge){return new(Ge||J)}}static{this.\u0275cmp=x.VBU({type:J,selectors:[["table-length"]],inputs:{lengthTable:"lengthTable"},outputs:{lengthChange:"lengthChange"},decls:4,vars:1,consts:[[1,"card-toolbar","mx-2"],[1,"fs-2","text-primary"],[1,"form-select","mx-2","d-inline","form-select-sm","w-auto",3,"change"],[4,"ngFor","ngForOf"]],template:function(Ge,R){1&Ge&&(x.j41(0,"div",0),x.nrm(1,"span",1),x.j41(2,"select",2),x.bIt("change",function(Zt){return R.ListItemChange(Zt)}),x.DNE(3,ne,2,1,"option",3),x.k0s()()),2&Ge&&(x.R7$(3),x.Y8G("ngForOf",R.lengthTable))},dependencies:[m.Sq,O.xH,O.y7],encapsulation:2})}}return J})()},67376:function(st,ke,j){var x;st=j.nmd(st),function(){var m,J="Expected a function",ue="__lodash_hash_undefined__",R="__lodash_placeholder__",M=128,me=1/0,_e=9007199254740991,Je=4294967295,Gn=[["ary",M],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],nn="[object Arguments]",Vn="[object Array]",vn="[object Boolean]",Be="[object Date]",An="[object Error]",Bn="[object Function]",nr="[object GeneratorFunction]",at="[object Map]",Cn="[object Number]",It="[object Object]",ir="[object Promise]",rn="[object RegExp]",ot="[object Set]",Sn="[object String]",$n="[object Symbol]",Ot="[object WeakMap]",Tn="[object ArrayBuffer]",sn="[object DataView]",ui="[object Float32Array]",hi="[object Float64Array]",gi="[object Int8Array]",fi="[object Int16Array]",_i="[object Int32Array]",bi="[object Uint8Array]",vi="[object Uint8ClampedArray]",Ci="[object Uint16Array]",Si="[object Uint32Array]",js=/\b__p \+= '';/g,Is=/\b(__p \+=) '' \+/g,ys=/(__e\(.*?\)|\b__t\)) \+\n'';/g,rr=/&(?:amp|lt|gt|quot|#39);/g,Ti=/[&<>"']/g,ji=RegExp(rr.source),Xn=RegExp(Ti.source),Qe=/<%-([\s\S]+?)%>/g,xs=/<%([\s\S]+?)%>/g,lt=/<%=([\s\S]+?)%>/g,Fs=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,dt=/^\w*$/,ct=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$e=/[\\^$.*+?()[\]{}|]/g,mt=RegExp($e.source),Ii=/^\s+/,Rs=/\s/,ks=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Os=/\{\n\/\* \[wrapped with (.+)\] \*/,Ms=/,? & /,ws=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Es=/[()=,{}\[\]\/\s]/,Ns=/\\(\\)?/g,Ds=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,sr=/\w*$/,Ls=/^[-+]0x[0-9a-f]+$/i,Gs=/^0b[01]+$/i,Vs=/^\[object .+?Constructor\]$/,As=/^0o[0-7]+$/i,Bs=/^(?:0|[1-9]\d*)$/,$s=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Un=/($^)/,Xs=/['\n\r\u2028\u2029\\]/g,pt="\\ud800-\\udfff",Mt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",jn="\\u2700-\\u27bf",ar="a-z\\xdf-\\xf6\\xf8-\\xff",or="A-Z\\xc0-\\xd6\\xd8-\\xde",lr="\\ufe0e\\ufe0f",dr="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",qs="["+pt+"]",cr="["+dr+"]",Pn="["+Mt+"]",mr="\\d+",Hs="["+jn+"]",pr="["+ar+"]",Yn="[^"+pt+dr+mr+jn+ar+or+"]",xi="\\ud83c[\\udffb-\\udfff]",ur="[^"+pt+"]",Fi="(?:\\ud83c[\\udde6-\\uddff]){2}",Ri="[\\ud800-\\udbff][\\udc00-\\udfff]",an="["+or+"]",gr="(?:"+pr+"|"+Yn+")",Js="(?:"+an+"|"+Yn+")",fr="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",_r="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",br="(?:"+Pn+"|"+xi+")?",vr="["+lr+"]?",Sr=vr+br+"(?:\\u200d(?:"+[ur,Fi,Ri].join("|")+")"+vr+br+")*",Zs="(?:"+[Hs,Fi,Ri].join("|")+")"+Sr,ea="(?:"+[ur+Pn+"?",Pn,Fi,Ri,qs].join("|")+")",ta=RegExp("['\u2019]","g"),na=RegExp(Pn,"g"),ki=RegExp(xi+"(?="+xi+")|"+ea+Sr,"g"),ia=RegExp([an+"?"+pr+"+"+fr+"(?="+[cr,an,"$"].join("|")+")",Js+"+"+_r+"(?="+[cr,an+gr,"$"].join("|")+")",an+"?"+gr+"+"+fr,an+"+"+_r,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",mr,Zs].join("|"),"g"),ra=RegExp("[\\u200d"+pt+Mt+lr+"]"),sa=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,aa=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],oa=-1,pe={};pe[ui]=pe[hi]=pe[gi]=pe[fi]=pe[_i]=pe[bi]=pe[vi]=pe[Ci]=pe[Si]=!0,pe[nn]=pe[Vn]=pe[Tn]=pe[vn]=pe[sn]=pe[Be]=pe[An]=pe[Bn]=pe[at]=pe[Cn]=pe[It]=pe[rn]=pe[ot]=pe[Sn]=pe[Ot]=!1;var de={};de[nn]=de[Vn]=de[Tn]=de[sn]=de[vn]=de[Be]=de[ui]=de[hi]=de[gi]=de[fi]=de[_i]=de[at]=de[Cn]=de[It]=de[rn]=de[ot]=de[Sn]=de[$n]=de[bi]=de[vi]=de[Ci]=de[Si]=!0,de[An]=de[Bn]=de[Ot]=!1;var ma={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},pa=parseFloat,ua=parseInt,Tr="object"==typeof global&&global&&global.Object===Object&&global,ha="object"==typeof self&&self&&self.Object===Object&&self,Fe=Tr||ha||Function("return this")(),jr=ke&&!ke.nodeType&&ke,In=jr&&st&&!st.nodeType&&st,Ir=In&&In.exports===jr,Oi=Ir&&Tr.process,Ke=function(){try{return In&&In.require&&In.require("util").types||Oi&&Oi.binding&&Oi.binding("util")}catch{}}(),yr=Ke&&Ke.isArrayBuffer,xr=Ke&&Ke.isDate,Fr=Ke&&Ke.isMap,Rr=Ke&&Ke.isRegExp,kr=Ke&&Ke.isSet,Or=Ke&&Ke.isTypedArray;function Xe(b,S,C){switch(C.length){case 0:return b.call(S);case 1:return b.call(S,C[0]);case 2:return b.call(S,C[0],C[1]);case 3:return b.call(S,C[0],C[1],C[2])}return b.apply(S,C)}function ga(b,S,C,w){for(var X=-1,ee=null==b?0:b.length;++X<ee;){var Te=b[X];S(w,Te,C(Te),b)}return w}function Ze(b,S){for(var C=-1,w=null==b?0:b.length;++C<w&&!1!==S(b[C],C,b););return b}function fa(b,S){for(var C=null==b?0:b.length;C--&&!1!==S(b[C],C,b););return b}function Mr(b,S){for(var C=-1,w=null==b?0:b.length;++C<w;)if(!S(b[C],C,b))return!1;return!0}function wt(b,S){for(var C=-1,w=null==b?0:b.length,X=0,ee=[];++C<w;){var Te=b[C];S(Te,C,b)&&(ee[X++]=Te)}return ee}function zn(b,S){return!(null==b||!b.length)&&on(b,S,0)>-1}function Mi(b,S,C){for(var w=-1,X=null==b?0:b.length;++w<X;)if(C(S,b[w]))return!0;return!1}function ge(b,S){for(var C=-1,w=null==b?0:b.length,X=Array(w);++C<w;)X[C]=S(b[C],C,b);return X}function Et(b,S){for(var C=-1,w=S.length,X=b.length;++C<w;)b[X+C]=S[C];return b}function wi(b,S,C,w){var X=-1,ee=null==b?0:b.length;for(w&&ee&&(C=b[++X]);++X<ee;)C=S(C,b[X],X,b);return C}function _a(b,S,C,w){var X=null==b?0:b.length;for(w&&X&&(C=b[--X]);X--;)C=S(C,b[X],X,b);return C}function Ei(b,S){for(var C=-1,w=null==b?0:b.length;++C<w;)if(S(b[C],C,b))return!0;return!1}var ba=Ni("length");function wr(b,S,C){var w;return C(b,function(X,ee,Te){if(S(X,ee,Te))return w=ee,!1}),w}function qn(b,S,C,w){for(var X=b.length,ee=C+(w?1:-1);w?ee--:++ee<X;)if(S(b[ee],ee,b))return ee;return-1}function on(b,S,C){return S==S?function wa(b,S,C){for(var w=C-1,X=b.length;++w<X;)if(b[w]===S)return w;return-1}(b,S,C):qn(b,Er,C)}function Sa(b,S,C,w){for(var X=C-1,ee=b.length;++X<ee;)if(w(b[X],S))return X;return-1}function Er(b){return b!=b}function Nr(b,S){var C=null==b?0:b.length;return C?Li(b,S)/C:NaN}function Ni(b){return function(S){return null==S?m:S[b]}}function Di(b){return function(S){return null==b?m:b[S]}}function Dr(b,S,C,w,X){return X(b,function(ee,Te,oe){C=w?(w=!1,ee):S(C,ee,Te,oe)}),C}function Li(b,S){for(var C,w=-1,X=b.length;++w<X;){var ee=S(b[w]);ee!==m&&(C=C===m?ee:C+ee)}return C}function Gi(b,S){for(var C=-1,w=Array(b);++C<b;)w[C]=S(C);return w}function Lr(b){return b&&b.slice(0,Br(b)+1).replace(Ii,"")}function Ue(b){return function(S){return b(S)}}function Vi(b,S){return ge(S,function(C){return b[C]})}function yn(b,S){return b.has(S)}function Gr(b,S){for(var C=-1,w=b.length;++C<w&&on(S,b[C],0)>-1;);return C}function Vr(b,S){for(var C=b.length;C--&&on(S,b[C],0)>-1;);return C}var ya=Di({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),xa=Di({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Fa(b){return"\\"+ma[b]}function ln(b){return ra.test(b)}function Ai(b){var S=-1,C=Array(b.size);return b.forEach(function(w,X){C[++S]=[X,w]}),C}function Ar(b,S){return function(C){return b(S(C))}}function Nt(b,S){for(var C=-1,w=b.length,X=0,ee=[];++C<w;){var Te=b[C];(Te===S||Te===R)&&(b[C]=R,ee[X++]=C)}return ee}function Hn(b){var S=-1,C=Array(b.size);return b.forEach(function(w){C[++S]=w}),C}function dn(b){return ln(b)?function Da(b){for(var S=ki.lastIndex=0;ki.test(b);)++S;return S}(b):ba(b)}function ut(b){return ln(b)?function $r(b){return b.match(ki)||[]}(b):function va(b){return b.split("")}(b)}function Br(b){for(var S=b.length;S--&&Rs.test(b.charAt(S)););return S}var Na=Di({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),xn=function b(S){var t,C=(S=null==S?Fe:xn.defaults(Fe.Object(),S,xn.pick(Fe,aa))).Array,w=S.Date,X=S.Error,ee=S.Function,Te=S.Math,oe=S.Object,Bi=S.RegExp,Va=S.String,et=S.TypeError,Wn=C.prototype,cn=oe.prototype,Jn=S["__core-js_shared__"],Qn=ee.prototype.toString,ie=cn.hasOwnProperty,Ba=0,$i=(t=/[^.]+$/.exec(Jn&&Jn.keys&&Jn.keys.IE_PROTO||""))?"Symbol(src)_1."+t:"",mn=cn.toString,Xr=Qn.call(oe),Ur=Fe._,$a=Bi("^"+Qn.call(ie).replace($e,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Kn=Ir?S.Buffer:m,Dt=S.Symbol,Zn=S.Uint8Array,Pr=Kn?Kn.allocUnsafe:m,ei=Ar(oe.getPrototypeOf,oe),Yr=oe.create,zr=cn.propertyIsEnumerable,ti=Wn.splice,qr=Dt?Dt.isConcatSpreadable:m,Fn=Dt?Dt.iterator:m,Pt=Dt?Dt.toStringTag:m,ni=function(){try{var t=Nn(oe,"defineProperty");return t({},"",{}),t}catch{}}(),Xa=S.clearTimeout!==Fe.clearTimeout&&S.clearTimeout,Ua=w&&w.now!==Fe.Date.now&&w.now,Pa=S.setTimeout!==Fe.setTimeout&&S.setTimeout,ii=Te.ceil,ri=Te.floor,Xi=oe.getOwnPropertySymbols,Ya=Kn?Kn.isBuffer:m,Hr=S.isFinite,za=Wn.join,qa=Ar(oe.keys,oe),je=Te.max,Me=Te.min,Ha=w.now,Wa=S.parseInt,Wr=Te.random,Ui=Wn.reverse,Pi=Nn(S,"DataView"),Rn=Nn(S,"Map"),Yi=Nn(S,"Promise"),pn=Nn(S,"Set"),kn=Nn(S,"WeakMap"),On=Nn(oe,"create"),si=kn&&new kn,un={},Ja=Dn(Pi),Qa=Dn(Rn),Ka=Dn(Yi),Za=Dn(pn),o=Dn(kn),g=Dt?Dt.prototype:m,n=g?g.valueOf:m,s=g?g.toString:m;function r(t){if(Se(t)&&!P(t)&&!(t instanceof E)){if(t instanceof u)return t;if(ie.call(t,"__wrapped__"))return Yl(t)}return new u(t)}var d=function(){function t(){}return function(i){if(!ve(i))return{};if(Yr)return Yr(i);t.prototype=i;var a=new t;return t.prototype=m,a}}();function h(){}function u(t,i){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!i,this.__index__=0,this.__values__=m}function E(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Je,this.__views__=[]}function q(t){var i=-1,a=null==t?0:t.length;for(this.clear();++i<a;){var l=t[i];this.set(l[0],l[1])}}function se(t){var i=-1,a=null==t?0:t.length;for(this.clear();++i<a;){var l=t[i];this.set(l[0],l[1])}}function Yt(t){var i=-1,a=null==t?0:t.length;for(this.clear();++i<a;){var l=t[i];this.set(l[0],l[1])}}function Mn(t){var i=-1,a=null==t?0:t.length;for(this.__data__=new Yt;++i<a;)this.add(t[i])}function yt(t){var i=this.__data__=new se(t);this.size=i.size}function Yo(t,i){var a=P(t),l=!a&&Ln(t),c=!a&&!l&&bn(t),p=!a&&!l&&!c&&di(t),f=a||l||c||p,_=f?Gi(t.length,Va):[],v=_.length;for(var T in t)(i||ie.call(t,T))&&(!f||!("length"==T||c&&("offset"==T||"parent"==T)||p&&("buffer"==T||"byteLength"==T||"byteOffset"==T)||Wt(T,v)))&&_.push(T);return _}function zo(t){var i=t.length;return i?t[mo(0,i-1)]:m}function Bd(t,i){return ds(tt(t),wn(i,0,t.length))}function $d(t){return ds(tt(t))}function eo(t,i,a){(a!==m&&!xt(t[i],a)||a===m&&!(i in t))&&zt(t,i,a)}function zi(t,i,a){var l=t[i];(!ie.call(t,i)||!xt(l,a)||a===m&&!(i in t))&&zt(t,i,a)}function Jr(t,i){for(var a=t.length;a--;)if(xt(t[a][0],i))return a;return-1}function Xd(t,i,a,l){return hn(t,function(c,p,f){i(l,c,a(c),f)}),l}function qo(t,i){return t&&Gt(i,we(i),t)}function zt(t,i,a){"__proto__"==i&&ni?ni(t,i,{configurable:!0,enumerable:!0,value:a,writable:!0}):t[i]=a}function to(t,i){for(var a=-1,l=i.length,c=C(l),p=null==t;++a<l;)c[a]=p?m:Lo(t,i[a]);return c}function wn(t,i,a){return t==t&&(a!==m&&(t=t<=a?t:a),i!==m&&(t=t>=i?t:i)),t}function bt(t,i,a,l,c,p){var f,_=1&i,v=2&i,T=4&i;if(a&&(f=c?a(t,l,c,p):a(t)),f!==m)return f;if(!ve(t))return t;var I=P(t);if(I){if(f=function Mc(t){var i=t.length,a=new t.constructor(i);return i&&"string"==typeof t[0]&&ie.call(t,"index")&&(a.index=t.index,a.input=t.input),a}(t),!_)return tt(t,f)}else{var y=Ae(t),k=y==Bn||y==nr;if(bn(t))return _l(t,_);if(y==It||y==nn||k&&!c){if(f=v||k?{}:Ll(t),!_)return v?function Cc(t,i){return Gt(t,Nl(t),i)}(t,function Ud(t,i){return t&&Gt(i,it(i),t)}(f,t)):function vc(t,i){return Gt(t,yo(t),i)}(t,qo(f,t))}else{if(!de[y])return c?t:{};f=function wc(t,i,a){var l=t.constructor;switch(i){case Tn:return bo(t);case vn:case Be:return new l(+t);case sn:return function gc(t,i){var a=i?bo(t.buffer):t.buffer;return new t.constructor(a,t.byteOffset,t.byteLength)}(t,a);case ui:case hi:case gi:case fi:case _i:case bi:case vi:case Ci:case Si:return bl(t,a);case at:return new l;case Cn:case Sn:return new l(t);case rn:return function fc(t){var i=new t.constructor(t.source,sr.exec(t));return i.lastIndex=t.lastIndex,i}(t);case ot:return new l;case $n:return function _c(t){return n?oe(n.call(t)):{}}(t)}}(t,y,_)}}p||(p=new yt);var L=p.get(t);if(L)return L;p.set(t,f),md(t)?t.forEach(function($){f.add(bt($,i,a,$,t,p))}):dd(t)&&t.forEach(function($,Q){f.set(Q,bt($,i,a,Q,t,p))});var H=I?m:(T?v?To:So:v?it:we)(t);return Ze(H||t,function($,Q){H&&($=t[Q=$]),zi(f,Q,bt($,i,a,Q,t,p))}),f}function Ho(t,i,a){var l=a.length;if(null==t)return!l;for(t=oe(t);l--;){var c=a[l],f=t[c];if(f===m&&!(c in t)||!(0,i[c])(f))return!1}return!0}function Wo(t,i,a){if("function"!=typeof t)throw new et(J);return Zi(function(){t.apply(m,a)},i)}function qi(t,i,a,l){var c=-1,p=zn,f=!0,_=t.length,v=[],T=i.length;if(!_)return v;a&&(i=ge(i,Ue(a))),l?(p=Mi,f=!1):i.length>=200&&(p=yn,f=!1,i=new Mn(i));e:for(;++c<_;){var I=t[c],y=null==a?I:a(I);if(I=l||0!==I?I:0,f&&y==y){for(var k=T;k--;)if(i[k]===y)continue e;v.push(I)}else p(i,y,l)||v.push(I)}return v}r.templateSettings={escape:Qe,evaluate:xs,interpolate:lt,variable:"",imports:{_:r}},(r.prototype=h.prototype).constructor=r,(u.prototype=d(h.prototype)).constructor=u,(E.prototype=d(h.prototype)).constructor=E,q.prototype.clear=function fe(){this.__data__=On?On(null):{},this.size=0},q.prototype.delete=function be(t){var i=this.has(t)&&delete this.__data__[t];return this.size-=i?1:0,i},q.prototype.get=function Ie(t){var i=this.__data__;if(On){var a=i[t];return a===ue?m:a}return ie.call(i,t)?i[t]:m},q.prototype.has=function Re(t){var i=this.__data__;return On?i[t]!==m:ie.call(i,t)},q.prototype.set=function A(t,i){var a=this.__data__;return this.size+=this.has(t)?0:1,a[t]=On&&i===m?ue:i,this},se.prototype.clear=function Ce(){this.__data__=[],this.size=0},se.prototype.delete=function Pe(t){var i=this.__data__,a=Jr(i,t);return!(a<0||(a==i.length-1?i.pop():ti.call(i,a,1),--this.size,0))},se.prototype.get=function Ye(t){var i=this.__data__,a=Jr(i,t);return a<0?m:i[a][1]},se.prototype.has=function xd(t){return Jr(this.__data__,t)>-1},se.prototype.set=function Fd(t,i){var a=this.__data__,l=Jr(a,t);return l<0?(++this.size,a.push([t,i])):a[l][1]=i,this},Yt.prototype.clear=function Rd(){this.size=0,this.__data__={hash:new q,map:new(Rn||se),string:new q}},Yt.prototype.delete=function kd(t){var i=ls(this,t).delete(t);return this.size-=i?1:0,i},Yt.prototype.get=function Od(t){return ls(this,t).get(t)},Yt.prototype.has=function Md(t){return ls(this,t).has(t)},Yt.prototype.set=function wd(t,i){var a=ls(this,t),l=a.size;return a.set(t,i),this.size+=a.size==l?0:1,this},Mn.prototype.add=Mn.prototype.push=function Ed(t){return this.__data__.set(t,ue),this},Mn.prototype.has=function Nd(t){return this.__data__.has(t)},yt.prototype.clear=function Dd(){this.__data__=new se,this.size=0},yt.prototype.delete=function Ld(t){var i=this.__data__,a=i.delete(t);return this.size=i.size,a},yt.prototype.get=function Gd(t){return this.__data__.get(t)},yt.prototype.has=function Vd(t){return this.__data__.has(t)},yt.prototype.set=function Ad(t,i){var a=this.__data__;if(a instanceof se){var l=a.__data__;if(!Rn||l.length<199)return l.push([t,i]),this.size=++a.size,this;a=this.__data__=new Yt(l)}return a.set(t,i),this.size=a.size,this};var hn=Tl(Lt),Jo=Tl(io,!0);function Yd(t,i){var a=!0;return hn(t,function(l,c,p){return a=!!i(l,c,p)}),a}function Qr(t,i,a){for(var l=-1,c=t.length;++l<c;){var p=t[l],f=i(p);if(null!=f&&(_===m?f==f&&!gt(f):a(f,_)))var _=f,v=p}return v}function Qo(t,i){var a=[];return hn(t,function(l,c,p){i(l,c,p)&&a.push(l)}),a}function Ne(t,i,a,l,c){var p=-1,f=t.length;for(a||(a=Nc),c||(c=[]);++p<f;){var _=t[p];i>0&&a(_)?i>1?Ne(_,i-1,a,l,c):Et(c,_):l||(c[c.length]=_)}return c}var no=jl(),Ko=jl(!0);function Lt(t,i){return t&&no(t,i,we)}function io(t,i){return t&&Ko(t,i,we)}function Kr(t,i){return wt(i,function(a){return Jt(t[a])})}function En(t,i){for(var a=0,l=(i=fn(i,t)).length;null!=t&&a<l;)t=t[Vt(i[a++])];return a&&a==l?t:m}function Zo(t,i,a){var l=i(t);return P(t)?l:Et(l,a(t))}function ze(t){return null==t?t===m?"[object Undefined]":"[object Null]":Pt&&Pt in oe(t)?function Rc(t){var i=ie.call(t,Pt),a=t[Pt];try{t[Pt]=m;var l=!0}catch{}var c=mn.call(t);return l&&(i?t[Pt]=a:delete t[Pt]),c}(t):function $c(t){return mn.call(t)}(t)}function ro(t,i){return t>i}function qd(t,i){return null!=t&&ie.call(t,i)}function Hd(t,i){return null!=t&&i in oe(t)}function so(t,i,a){for(var l=a?Mi:zn,c=t[0].length,p=t.length,f=p,_=C(p),v=1/0,T=[];f--;){var I=t[f];f&&i&&(I=ge(I,Ue(i))),v=Me(I.length,v),_[f]=!a&&(i||c>=120&&I.length>=120)?new Mn(f&&I):m}I=t[0];var y=-1,k=_[0];e:for(;++y<c&&T.length<v;){var L=I[y],B=i?i(L):L;if(L=a||0!==L?L:0,!(k?yn(k,B):l(T,B,a))){for(f=p;--f;){var H=_[f];if(!(H?yn(H,B):l(t[f],B,a)))continue e}k&&k.push(B),T.push(L)}}return T}function Hi(t,i,a){var l=null==(t=Bl(t,i=fn(i,t)))?t:t[Vt(Ct(i))];return null==l?m:Xe(l,t,a)}function el(t){return Se(t)&&ze(t)==nn}function Wi(t,i,a,l,c){return t===i||(null==t||null==i||!Se(t)&&!Se(i)?t!=t&&i!=i:function Zd(t,i,a,l,c,p){var f=P(t),_=P(i),v=f?Vn:Ae(t),T=_?Vn:Ae(i),I=(v=v==nn?It:v)==It,y=(T=T==nn?It:T)==It,k=v==T;if(k&&bn(t)){if(!bn(i))return!1;f=!0,I=!1}if(k&&!I)return p||(p=new yt),f||di(t)?El(t,i,a,l,c,p):function xc(t,i,a,l,c,p,f){switch(a){case sn:if(t.byteLength!=i.byteLength||t.byteOffset!=i.byteOffset)return!1;t=t.buffer,i=i.buffer;case Tn:return!(t.byteLength!=i.byteLength||!p(new Zn(t),new Zn(i)));case vn:case Be:case Cn:return xt(+t,+i);case An:return t.name==i.name&&t.message==i.message;case rn:case Sn:return t==i+"";case at:var _=Ai;case ot:if(_||(_=Hn),t.size!=i.size&&!(1&l))return!1;var T=f.get(t);if(T)return T==i;l|=2,f.set(t,i);var I=El(_(t),_(i),l,c,p,f);return f.delete(t),I;case $n:if(n)return n.call(t)==n.call(i)}return!1}(t,i,v,a,l,c,p);if(!(1&a)){var L=I&&ie.call(t,"__wrapped__"),B=y&&ie.call(i,"__wrapped__");if(L||B){var H=L?t.value():t,$=B?i.value():i;return p||(p=new yt),c(H,$,a,l,p)}}return!!k&&(p||(p=new yt),function Fc(t,i,a,l,c,p){var f=1&a,_=So(t),v=_.length;if(v!=So(i).length&&!f)return!1;for(var y=v;y--;){var k=_[y];if(!(f?k in i:ie.call(i,k)))return!1}var L=p.get(t),B=p.get(i);if(L&&B)return L==i&&B==t;var H=!0;p.set(t,i),p.set(i,t);for(var $=f;++y<v;){var Q=t[k=_[y]],K=i[k];if(l)var ft=f?l(K,Q,k,i,t,p):l(Q,K,k,t,i,p);if(!(ft===m?Q===K||c(Q,K,a,l,p):ft)){H=!1;break}$||($="constructor"==k)}if(H&&!$){var He=t.constructor,_t=i.constructor;He!=_t&&"constructor"in t&&"constructor"in i&&!("function"==typeof He&&He instanceof He&&"function"==typeof _t&&_t instanceof _t)&&(H=!1)}return p.delete(t),p.delete(i),H}(t,i,a,l,c,p))}(t,i,a,l,Wi,c))}function ao(t,i,a,l){var c=a.length,p=c,f=!l;if(null==t)return!p;for(t=oe(t);c--;){var _=a[c];if(f&&_[2]?_[1]!==t[_[0]]:!(_[0]in t))return!1}for(;++c<p;){var v=(_=a[c])[0],T=t[v],I=_[1];if(f&&_[2]){if(T===m&&!(v in t))return!1}else{var y=new yt;if(l)var k=l(T,I,v,t,i,y);if(!(k===m?Wi(I,T,3,l,y):k))return!1}}return!0}function tl(t){return!(!ve(t)||function Lc(t){return!!$i&&$i in t}(t))&&(Jt(t)?$a:Vs).test(Dn(t))}function nl(t){return"function"==typeof t?t:null==t?rt:"object"==typeof t?P(t)?sl(t[0],t[1]):rl(t):Id(t)}function oo(t){if(!Ki(t))return qa(t);var i=[];for(var a in oe(t))ie.call(t,a)&&"constructor"!=a&&i.push(a);return i}function lo(t,i){return t<i}function il(t,i){var a=-1,l=nt(t)?C(t.length):[];return hn(t,function(c,p,f){l[++a]=i(c,p,f)}),l}function rl(t){var i=Io(t);return 1==i.length&&i[0][2]?Vl(i[0][0],i[0][1]):function(a){return a===t||ao(a,t,i)}}function sl(t,i){return xo(t)&&Gl(i)?Vl(Vt(t),i):function(a){var l=Lo(a,t);return l===m&&l===i?Go(a,t):Wi(i,l,3)}}function Zr(t,i,a,l,c){t!==i&&no(i,function(p,f){if(c||(c=new yt),ve(p))!function sc(t,i,a,l,c,p,f){var _=Ro(t,a),v=Ro(i,a),T=f.get(v);if(T)eo(t,a,T);else{var I=p?p(_,v,a+"",t,i,f):m,y=I===m;if(y){var k=P(v),L=!k&&bn(v),B=!k&&!L&&di(v);I=v,k||L||B?P(_)?I=_:ye(_)?I=tt(_):L?(y=!1,I=_l(v,!0)):B?(y=!1,I=bl(v,!0)):I=[]:er(v)||Ln(v)?(I=_,Ln(_)?I=hd(_):(!ve(_)||Jt(_))&&(I=Ll(v))):y=!1}y&&(f.set(v,I),c(I,v,l,p,f),f.delete(v)),eo(t,a,I)}}(t,i,f,a,Zr,l,c);else{var _=l?l(Ro(t,f),p,f+"",t,i,c):m;_===m&&(_=p),eo(t,f,_)}},it)}function al(t,i){var a=t.length;if(a)return Wt(i+=i<0?a:0,a)?t[i]:m}function ol(t,i,a){i=i.length?ge(i,function(p){return P(p)?function(f){return En(f,1===p.length?p[0]:p)}:p}):[rt];var l=-1;return i=ge(i,Ue(V())),function Ta(b,S){var C=b.length;for(b.sort(S);C--;)b[C]=b[C].value;return b}(il(t,function(p,f,_){return{criteria:ge(i,function(T){return T(p)}),index:++l,value:p}}),function(p,f){return function bc(t,i,a){for(var l=-1,c=t.criteria,p=i.criteria,f=c.length,_=a.length;++l<f;){var v=vl(c[l],p[l]);if(v)return l>=_?v:v*("desc"==a[l]?-1:1)}return t.index-i.index}(p,f,a)})}function ll(t,i,a){for(var l=-1,c=i.length,p={};++l<c;){var f=i[l],_=En(t,f);a(_,f)&&Ji(p,fn(f,t),_)}return p}function co(t,i,a,l){var c=l?Sa:on,p=-1,f=i.length,_=t;for(t===i&&(i=tt(i)),a&&(_=ge(t,Ue(a)));++p<f;)for(var v=0,T=i[p],I=a?a(T):T;(v=c(_,I,v,l))>-1;)_!==t&&ti.call(_,v,1),ti.call(t,v,1);return t}function dl(t,i){for(var a=t?i.length:0,l=a-1;a--;){var c=i[a];if(a==l||c!==p){var p=c;Wt(c)?ti.call(t,c,1):ho(t,c)}}return t}function mo(t,i){return t+ri(Wr()*(i-t+1))}function po(t,i){var a="";if(!t||i<1||i>_e)return a;do{i%2&&(a+=t),(i=ri(i/2))&&(t+=t)}while(i);return a}function W(t,i){return ko(Al(t,i,rt),t+"")}function dc(t){return zo(ci(t))}function cc(t,i){var a=ci(t);return ds(a,wn(i,0,a.length))}function Ji(t,i,a,l){if(!ve(t))return t;for(var c=-1,p=(i=fn(i,t)).length,f=p-1,_=t;null!=_&&++c<p;){var v=Vt(i[c]),T=a;if("__proto__"===v||"constructor"===v||"prototype"===v)return t;if(c!=f){var I=_[v];(T=l?l(I,v,_):m)===m&&(T=ve(I)?I:Wt(i[c+1])?[]:{})}zi(_,v,T),_=_[v]}return t}var cl=si?function(t,i){return si.set(t,i),t}:rt,mc=ni?function(t,i){return ni(t,"toString",{configurable:!0,enumerable:!1,value:Ao(i),writable:!0})}:rt;function pc(t){return ds(ci(t))}function vt(t,i,a){var l=-1,c=t.length;i<0&&(i=-i>c?0:c+i),(a=a>c?c:a)<0&&(a+=c),c=i>a?0:a-i>>>0,i>>>=0;for(var p=C(c);++l<c;)p[l]=t[l+i];return p}function uc(t,i){var a;return hn(t,function(l,c,p){return!(a=i(l,c,p))}),!!a}function es(t,i,a){var l=0,c=null==t?l:t.length;if("number"==typeof i&&i==i&&c<=2147483647){for(;l<c;){var p=l+c>>>1,f=t[p];null!==f&&!gt(f)&&(a?f<=i:f<i)?l=p+1:c=p}return c}return uo(t,i,rt,a)}function uo(t,i,a,l){var c=0,p=null==t?0:t.length;if(0===p)return 0;for(var f=(i=a(i))!=i,_=null===i,v=gt(i),T=i===m;c<p;){var I=ri((c+p)/2),y=a(t[I]),k=y!==m,L=null===y,B=y==y,H=gt(y);if(f)var $=l||B;else $=T?B&&(l||k):_?B&&k&&(l||!L):v?B&&k&&!L&&(l||!H):!L&&!H&&(l?y<=i:y<i);$?c=I+1:p=I}return Me(p,4294967294)}function ml(t,i){for(var a=-1,l=t.length,c=0,p=[];++a<l;){var f=t[a],_=i?i(f):f;if(!a||!xt(_,v)){var v=_;p[c++]=0===f?0:f}}return p}function pl(t){return"number"==typeof t?t:gt(t)?NaN:+t}function ht(t){if("string"==typeof t)return t;if(P(t))return ge(t,ht)+"";if(gt(t))return s?s.call(t):"";var i=t+"";return"0"==i&&1/t==-me?"-0":i}function gn(t,i,a){var l=-1,c=zn,p=t.length,f=!0,_=[],v=_;if(a)f=!1,c=Mi;else if(p>=200){var T=i?null:Ic(t);if(T)return Hn(T);f=!1,c=yn,v=new Mn}else v=i?[]:_;e:for(;++l<p;){var I=t[l],y=i?i(I):I;if(I=a||0!==I?I:0,f&&y==y){for(var k=v.length;k--;)if(v[k]===y)continue e;i&&v.push(y),_.push(I)}else c(v,y,a)||(v!==_&&v.push(y),_.push(I))}return _}function ho(t,i){return null==(t=Bl(t,i=fn(i,t)))||delete t[Vt(Ct(i))]}function ul(t,i,a,l){return Ji(t,i,a(En(t,i)),l)}function ts(t,i,a,l){for(var c=t.length,p=l?c:-1;(l?p--:++p<c)&&i(t[p],p,t););return a?vt(t,l?0:p,l?p+1:c):vt(t,l?p+1:0,l?c:p)}function hl(t,i){var a=t;return a instanceof E&&(a=a.value()),wi(i,function(l,c){return c.func.apply(c.thisArg,Et([l],c.args))},a)}function go(t,i,a){var l=t.length;if(l<2)return l?gn(t[0]):[];for(var c=-1,p=C(l);++c<l;)for(var f=t[c],_=-1;++_<l;)_!=c&&(p[c]=qi(p[c]||f,t[_],i,a));return gn(Ne(p,1),i,a)}function gl(t,i,a){for(var l=-1,c=t.length,p=i.length,f={};++l<c;)a(f,t[l],l<p?i[l]:m);return f}function fo(t){return ye(t)?t:[]}function _o(t){return"function"==typeof t?t:rt}function fn(t,i){return P(t)?t:xo(t,i)?[t]:Pl(ae(t))}var hc=W;function _n(t,i,a){var l=t.length;return a=a===m?l:a,!i&&a>=l?t:vt(t,i,a)}var fl=Xa||function(t){return Fe.clearTimeout(t)};function _l(t,i){if(i)return t.slice();var a=t.length,l=Pr?Pr(a):new t.constructor(a);return t.copy(l),l}function bo(t){var i=new t.constructor(t.byteLength);return new Zn(i).set(new Zn(t)),i}function bl(t,i){var a=i?bo(t.buffer):t.buffer;return new t.constructor(a,t.byteOffset,t.length)}function vl(t,i){if(t!==i){var a=t!==m,l=null===t,c=t==t,p=gt(t),f=i!==m,_=null===i,v=i==i,T=gt(i);if(!_&&!T&&!p&&t>i||p&&f&&v&&!_&&!T||l&&f&&v||!a&&v||!c)return 1;if(!l&&!p&&!T&&t<i||T&&a&&c&&!l&&!p||_&&a&&c||!f&&c||!v)return-1}return 0}function Cl(t,i,a,l){for(var c=-1,p=t.length,f=a.length,_=-1,v=i.length,T=je(p-f,0),I=C(v+T),y=!l;++_<v;)I[_]=i[_];for(;++c<f;)(y||c<p)&&(I[a[c]]=t[c]);for(;T--;)I[_++]=t[c++];return I}function Sl(t,i,a,l){for(var c=-1,p=t.length,f=-1,_=a.length,v=-1,T=i.length,I=je(p-_,0),y=C(I+T),k=!l;++c<I;)y[c]=t[c];for(var L=c;++v<T;)y[L+v]=i[v];for(;++f<_;)(k||c<p)&&(y[L+a[f]]=t[c++]);return y}function tt(t,i){var a=-1,l=t.length;for(i||(i=C(l));++a<l;)i[a]=t[a];return i}function Gt(t,i,a,l){var c=!a;a||(a={});for(var p=-1,f=i.length;++p<f;){var _=i[p],v=l?l(a[_],t[_],_,a,t):m;v===m&&(v=t[_]),c?zt(a,_,v):zi(a,_,v)}return a}function ns(t,i){return function(a,l){var c=P(a)?ga:Xd,p=i?i():{};return c(a,t,V(l,2),p)}}function ai(t){return W(function(i,a){var l=-1,c=a.length,p=c>1?a[c-1]:m,f=c>2?a[2]:m;for(p=t.length>3&&"function"==typeof p?(c--,p):m,f&&qe(a[0],a[1],f)&&(p=c<3?m:p,c=1),i=oe(i);++l<c;){var _=a[l];_&&t(i,_,l,p)}return i})}function Tl(t,i){return function(a,l){if(null==a)return a;if(!nt(a))return t(a,l);for(var c=a.length,p=i?c:-1,f=oe(a);(i?p--:++p<c)&&!1!==l(f[p],p,f););return a}}function jl(t){return function(i,a,l){for(var c=-1,p=oe(i),f=l(i),_=f.length;_--;){var v=f[t?_:++c];if(!1===a(p[v],v,p))break}return i}}function Il(t){return function(i){var a=ln(i=ae(i))?ut(i):m,l=a?a[0]:i.charAt(0),c=a?_n(a,1).join(""):i.slice(1);return l[t]()+c}}function oi(t){return function(i){return wi(Td(Sd(i).replace(ta,"")),t,"")}}function Qi(t){return function(){var i=arguments;switch(i.length){case 0:return new t;case 1:return new t(i[0]);case 2:return new t(i[0],i[1]);case 3:return new t(i[0],i[1],i[2]);case 4:return new t(i[0],i[1],i[2],i[3]);case 5:return new t(i[0],i[1],i[2],i[3],i[4]);case 6:return new t(i[0],i[1],i[2],i[3],i[4],i[5]);case 7:return new t(i[0],i[1],i[2],i[3],i[4],i[5],i[6])}var a=d(t.prototype),l=t.apply(a,i);return ve(l)?l:a}}function yl(t){return function(i,a,l){var c=oe(i);if(!nt(i)){var p=V(a,3);i=we(i),a=function(_){return p(c[_],_,c)}}var f=t(i,a,l);return f>-1?c[p?i[f]:f]:m}}function xl(t){return Ht(function(i){var a=i.length,l=a,c=u.prototype.thru;for(t&&i.reverse();l--;){var p=i[l];if("function"!=typeof p)throw new et(J);if(c&&!f&&"wrapper"==os(p))var f=new u([],!0)}for(l=f?l:a;++l<a;){var _=os(p=i[l]),v="wrapper"==_?jo(p):m;f=v&&Fo(v[0])&&424==v[1]&&!v[4].length&&1==v[9]?f[os(v[0])].apply(f,v[3]):1==p.length&&Fo(p)?f[_]():f.thru(p)}return function(){var T=arguments,I=T[0];if(f&&1==T.length&&P(I))return f.plant(I).value();for(var y=0,k=a?i[y].apply(this,T):I;++y<a;)k=i[y].call(this,k);return k}})}function is(t,i,a,l,c,p,f,_,v,T){var I=i&M,y=1&i,k=2&i,L=24&i,B=512&i,H=k?m:Qi(t);return function $(){for(var Q=arguments.length,K=C(Q),ft=Q;ft--;)K[ft]=arguments[ft];if(L)var He=li($),_t=function Ia(b,S){for(var C=b.length,w=0;C--;)b[C]===S&&++w;return w}(K,He);if(l&&(K=Cl(K,l,c,L)),p&&(K=Sl(K,p,f,L)),Q-=_t,L&&Q<T){var xe=Nt(K,He);return kl(t,i,is,$.placeholder,a,K,xe,_,v,T-Q)}var Ft=y?a:this,Kt=k?Ft[t]:t;return Q=K.length,_?K=function Xc(t,i){for(var a=t.length,l=Me(i.length,a),c=tt(t);l--;){var p=i[l];t[l]=Wt(p,a)?c[p]:m}return t}(K,_):B&&Q>1&&K.reverse(),I&&v<Q&&(K.length=v),this&&this!==Fe&&this instanceof $&&(Kt=H||Qi(Kt)),Kt.apply(Ft,K)}}function Fl(t,i){return function(a,l){return function Jd(t,i,a,l){return Lt(t,function(c,p,f){i(l,a(c),p,f)}),l}(a,t,i(l),{})}}function rs(t,i){return function(a,l){var c;if(a===m&&l===m)return i;if(a!==m&&(c=a),l!==m){if(c===m)return l;"string"==typeof a||"string"==typeof l?(a=ht(a),l=ht(l)):(a=pl(a),l=pl(l)),c=t(a,l)}return c}}function vo(t){return Ht(function(i){return i=ge(i,Ue(V())),W(function(a){var l=this;return t(i,function(c){return Xe(c,l,a)})})})}function ss(t,i){var a=(i=i===m?" ":ht(i)).length;if(a<2)return a?po(i,t):i;var l=po(i,ii(t/dn(i)));return ln(i)?_n(ut(l),0,t).join(""):l.slice(0,t)}function Rl(t){return function(i,a,l){return l&&"number"!=typeof l&&qe(i,a,l)&&(a=l=m),i=Qt(i),a===m?(a=i,i=0):a=Qt(a),function lc(t,i,a,l){for(var c=-1,p=je(ii((i-t)/(a||1)),0),f=C(p);p--;)f[l?p:++c]=t,t+=a;return f}(i,a,l=l===m?i<a?1:-1:Qt(l),t)}}function as(t){return function(i,a){return"string"==typeof i&&"string"==typeof a||(i=St(i),a=St(a)),t(i,a)}}function kl(t,i,a,l,c,p,f,_,v,T){var I=8&i;i|=I?32:64,4&(i&=~(I?64:32))||(i&=-4);var H=[t,i,c,I?p:m,I?f:m,I?m:p,I?m:f,_,v,T],$=a.apply(m,H);return Fo(t)&&$l($,H),$.placeholder=l,Xl($,t,i)}function Co(t){var i=Te[t];return function(a,l){if(a=St(a),(l=null==l?0:Me(z(l),292))&&Hr(a)){var c=(ae(a)+"e").split("e");return+((c=(ae(i(c[0]+"e"+(+c[1]+l)))+"e").split("e"))[0]+"e"+(+c[1]-l))}return i(a)}}var Ic=pn&&1/Hn(new pn([,-0]))[1]==me?function(t){return new pn(t)}:Xo;function Ol(t){return function(i){var a=Ae(i);return a==at?Ai(i):a==ot?function Ma(b){var S=-1,C=Array(b.size);return b.forEach(function(w){C[++S]=[w,w]}),C}(i):function ja(b,S){return ge(S,function(C){return[C,b[C]]})}(i,t(i))}}function qt(t,i,a,l,c,p,f,_){var v=2&i;if(!v&&"function"!=typeof t)throw new et(J);var T=l?l.length:0;if(T||(i&=-97,l=c=m),f=f===m?f:je(z(f),0),_=_===m?_:z(_),T-=c?c.length:0,64&i){var I=l,y=c;l=c=m}var k=v?m:jo(t),L=[t,i,a,l,c,I,y,p,f,_];if(k&&function Ac(t,i){var a=t[1],l=i[1],c=a|l;if(!(c<131)&&!(l==M&&8==a||l==M&&256==a&&t[7].length<=i[8]||384==l&&i[7].length<=i[8]&&8==a))return t;1&l&&(t[2]=i[2],c|=1&a?0:4);var _=i[3];if(_){var v=t[3];t[3]=v?Cl(v,_,i[4]):_,t[4]=v?Nt(t[3],R):i[4]}(_=i[5])&&(t[5]=(v=t[5])?Sl(v,_,i[6]):_,t[6]=v?Nt(t[5],R):i[6]),(_=i[7])&&(t[7]=_),l&M&&(t[8]=null==t[8]?i[8]:Me(t[8],i[8])),null==t[9]&&(t[9]=i[9]),t[0]=i[0],t[1]=c}(L,k),t=L[0],i=L[1],a=L[2],l=L[3],c=L[4],!(_=L[9]=L[9]===m?v?0:t.length:je(L[9]-T,0))&&24&i&&(i&=-25),i&&1!=i)B=8==i||16==i?function Tc(t,i,a){var l=Qi(t);return function c(){for(var p=arguments.length,f=C(p),_=p,v=li(c);_--;)f[_]=arguments[_];var T=p<3&&f[0]!==v&&f[p-1]!==v?[]:Nt(f,v);return(p-=T.length)<a?kl(t,i,is,c.placeholder,m,f,T,m,m,a-p):Xe(this&&this!==Fe&&this instanceof c?l:t,this,f)}}(t,i,_):32!=i&&33!=i||c.length?is.apply(m,L):function jc(t,i,a,l){var c=1&i,p=Qi(t);return function f(){for(var _=-1,v=arguments.length,T=-1,I=l.length,y=C(I+v),k=this&&this!==Fe&&this instanceof f?p:t;++T<I;)y[T]=l[T];for(;v--;)y[T++]=arguments[++_];return Xe(k,c?a:this,y)}}(t,i,a,l);else var B=function Sc(t,i,a){var l=1&i,c=Qi(t);return function p(){return(this&&this!==Fe&&this instanceof p?c:t).apply(l?a:this,arguments)}}(t,i,a);return Xl((k?cl:$l)(B,L),t,i)}function Ml(t,i,a,l){return t===m||xt(t,cn[a])&&!ie.call(l,a)?i:t}function wl(t,i,a,l,c,p){return ve(t)&&ve(i)&&(p.set(i,t),Zr(t,i,m,wl,p),p.delete(i)),t}function yc(t){return er(t)?m:t}function El(t,i,a,l,c,p){var f=1&a,_=t.length,v=i.length;if(_!=v&&!(f&&v>_))return!1;var T=p.get(t),I=p.get(i);if(T&&I)return T==i&&I==t;var y=-1,k=!0,L=2&a?new Mn:m;for(p.set(t,i),p.set(i,t);++y<_;){var B=t[y],H=i[y];if(l)var $=f?l(H,B,y,i,t,p):l(B,H,y,t,i,p);if($!==m){if($)continue;k=!1;break}if(L){if(!Ei(i,function(Q,K){if(!yn(L,K)&&(B===Q||c(B,Q,a,l,p)))return L.push(K)})){k=!1;break}}else if(B!==H&&!c(B,H,a,l,p)){k=!1;break}}return p.delete(t),p.delete(i),k}function Ht(t){return ko(Al(t,m,Hl),t+"")}function So(t){return Zo(t,we,yo)}function To(t){return Zo(t,it,Nl)}var jo=si?function(t){return si.get(t)}:Xo;function os(t){for(var i=t.name+"",a=un[i],l=ie.call(un,i)?a.length:0;l--;){var c=a[l],p=c.func;if(null==p||p==t)return c.name}return i}function li(t){return(ie.call(r,"placeholder")?r:t).placeholder}function V(){var t=r.iteratee||Bo;return t=t===Bo?nl:t,arguments.length?t(arguments[0],arguments[1]):t}function ls(t,i){var a=t.__data__;return function Dc(t){var i=typeof t;return"string"==i||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==t:null===t}(i)?a["string"==typeof i?"string":"hash"]:a.map}function Io(t){for(var i=we(t),a=i.length;a--;){var l=i[a],c=t[l];i[a]=[l,c,Gl(c)]}return i}function Nn(t,i){var a=function Ra(b,S){return null==b?m:b[S]}(t,i);return tl(a)?a:m}var yo=Xi?function(t){return null==t?[]:(t=oe(t),wt(Xi(t),function(i){return zr.call(t,i)}))}:Uo,Nl=Xi?function(t){for(var i=[];t;)Et(i,yo(t)),t=ei(t);return i}:Uo,Ae=ze;function Dl(t,i,a){for(var l=-1,c=(i=fn(i,t)).length,p=!1;++l<c;){var f=Vt(i[l]);if(!(p=null!=t&&a(t,f)))break;t=t[f]}return p||++l!=c?p:!!(c=null==t?0:t.length)&&gs(c)&&Wt(f,c)&&(P(t)||Ln(t))}function Ll(t){return"function"!=typeof t.constructor||Ki(t)?{}:d(ei(t))}function Nc(t){return P(t)||Ln(t)||!!(qr&&t&&t[qr])}function Wt(t,i){var a=typeof t;return!!(i=i??_e)&&("number"==a||"symbol"!=a&&Bs.test(t))&&t>-1&&t%1==0&&t<i}function qe(t,i,a){if(!ve(a))return!1;var l=typeof i;return!!("number"==l?nt(a)&&Wt(i,a.length):"string"==l&&i in a)&&xt(a[i],t)}function xo(t,i){if(P(t))return!1;var a=typeof t;return!("number"!=a&&"symbol"!=a&&"boolean"!=a&&null!=t&&!gt(t))||dt.test(t)||!Fs.test(t)||null!=i&&t in oe(i)}function Fo(t){var i=os(t),a=r[i];if("function"!=typeof a||!(i in E.prototype))return!1;if(t===a)return!0;var l=jo(a);return!!l&&t===l[0]}(Pi&&Ae(new Pi(new ArrayBuffer(1)))!=sn||Rn&&Ae(new Rn)!=at||Yi&&Ae(Yi.resolve())!=ir||pn&&Ae(new pn)!=ot||kn&&Ae(new kn)!=Ot)&&(Ae=function(t){var i=ze(t),a=i==It?t.constructor:m,l=a?Dn(a):"";if(l)switch(l){case Ja:return sn;case Qa:return at;case Ka:return ir;case Za:return ot;case o:return Ot}return i});var Gc=Jn?Jt:Po;function Ki(t){var i=t&&t.constructor;return t===("function"==typeof i&&i.prototype||cn)}function Gl(t){return t==t&&!ve(t)}function Vl(t,i){return function(a){return null!=a&&a[t]===i&&(i!==m||t in oe(a))}}function Al(t,i,a){return i=je(i===m?t.length-1:i,0),function(){for(var l=arguments,c=-1,p=je(l.length-i,0),f=C(p);++c<p;)f[c]=l[i+c];c=-1;for(var _=C(i+1);++c<i;)_[c]=l[c];return _[i]=a(f),Xe(t,this,_)}}function Bl(t,i){return i.length<2?t:En(t,vt(i,0,-1))}function Ro(t,i){if(("constructor"!==i||"function"!=typeof t[i])&&"__proto__"!=i)return t[i]}var $l=Ul(cl),Zi=Pa||function(t,i){return Fe.setTimeout(t,i)},ko=Ul(mc);function Xl(t,i,a){var l=i+"";return ko(t,function Ec(t,i){var a=i.length;if(!a)return t;var l=a-1;return i[l]=(a>1?"& ":"")+i[l],i=i.join(a>2?", ":" "),t.replace(ks,"{\n/* [wrapped with "+i+"] */\n")}(l,function Uc(t,i){return Ze(Gn,function(a){var l="_."+a[0];i&a[1]&&!zn(t,l)&&t.push(l)}),t.sort()}(function Oc(t){var i=t.match(Os);return i?i[1].split(Ms):[]}(l),a)))}function Ul(t){var i=0,a=0;return function(){var l=Ha(),c=16-(l-a);if(a=l,c>0){if(++i>=800)return arguments[0]}else i=0;return t.apply(m,arguments)}}function ds(t,i){var a=-1,l=t.length,c=l-1;for(i=i===m?l:i;++a<i;){var p=mo(a,c),f=t[p];t[p]=t[a],t[a]=f}return t.length=i,t}var Pl=function Vc(t){var i=us(t,function(l){return 500===a.size&&a.clear(),l}),a=i.cache;return i}(function(t){var i=[];return 46===t.charCodeAt(0)&&i.push(""),t.replace(ct,function(a,l,c,p){i.push(c?p.replace(Ns,"$1"):l||a)}),i});function Vt(t){if("string"==typeof t||gt(t))return t;var i=t+"";return"0"==i&&1/t==-me?"-0":i}function Dn(t){if(null!=t){try{return Qn.call(t)}catch{}try{return t+""}catch{}}return""}function Yl(t){if(t instanceof E)return t.clone();var i=new u(t.__wrapped__,t.__chain__);return i.__actions__=tt(t.__actions__),i.__index__=t.__index__,i.__values__=t.__values__,i}var qc=W(function(t,i){return ye(t)?qi(t,Ne(i,1,ye,!0)):[]}),Hc=W(function(t,i){var a=Ct(i);return ye(a)&&(a=m),ye(t)?qi(t,Ne(i,1,ye,!0),V(a,2)):[]}),Wc=W(function(t,i){var a=Ct(i);return ye(a)&&(a=m),ye(t)?qi(t,Ne(i,1,ye,!0),m,a):[]});function zl(t,i,a){var l=null==t?0:t.length;if(!l)return-1;var c=null==a?0:z(a);return c<0&&(c=je(l+c,0)),qn(t,V(i,3),c)}function ql(t,i,a){var l=null==t?0:t.length;if(!l)return-1;var c=l-1;return a!==m&&(c=z(a),c=a<0?je(l+c,0):Me(c,l-1)),qn(t,V(i,3),c,!0)}function Hl(t){return null!=t&&t.length?Ne(t,1):[]}function Wl(t){return t&&t.length?t[0]:m}var am=W(function(t){var i=ge(t,fo);return i.length&&i[0]===t[0]?so(i):[]}),om=W(function(t){var i=Ct(t),a=ge(t,fo);return i===Ct(a)?i=m:a.pop(),a.length&&a[0]===t[0]?so(a,V(i,2)):[]}),lm=W(function(t){var i=Ct(t),a=ge(t,fo);return(i="function"==typeof i?i:m)&&a.pop(),a.length&&a[0]===t[0]?so(a,m,i):[]});function Ct(t){var i=null==t?0:t.length;return i?t[i-1]:m}var pm=W(Jl);function Jl(t,i){return t&&t.length&&i&&i.length?co(t,i):t}var gm=Ht(function(t,i){var a=null==t?0:t.length,l=to(t,i);return dl(t,ge(i,function(c){return Wt(c,a)?+c:c}).sort(vl)),l});function Oo(t){return null==t?t:Ui.call(t)}var Mm=W(function(t){return gn(Ne(t,1,ye,!0))}),wm=W(function(t){var i=Ct(t);return ye(i)&&(i=m),gn(Ne(t,1,ye,!0),V(i,2))}),Em=W(function(t){var i=Ct(t);return i="function"==typeof i?i:m,gn(Ne(t,1,ye,!0),m,i)});function Mo(t){if(!t||!t.length)return[];var i=0;return t=wt(t,function(a){if(ye(a))return i=je(a.length,i),!0}),Gi(i,function(a){return ge(t,Ni(a))})}function Ql(t,i){if(!t||!t.length)return[];var a=Mo(t);return null==i?a:ge(a,function(l){return Xe(i,m,l)})}var Gm=W(function(t,i){return ye(t)?qi(t,i):[]}),Vm=W(function(t){return go(wt(t,ye))}),Am=W(function(t){var i=Ct(t);return ye(i)&&(i=m),go(wt(t,ye),V(i,2))}),Bm=W(function(t){var i=Ct(t);return i="function"==typeof i?i:m,go(wt(t,ye),m,i)}),$m=W(Mo),Pm=W(function(t){var i=t.length,a=i>1?t[i-1]:m;return a="function"==typeof a?(t.pop(),a):m,Ql(t,a)});function Kl(t){var i=r(t);return i.__chain__=!0,i}function cs(t,i){return i(t)}var zm=Ht(function(t){var i=t.length,a=i?t[0]:0,l=this.__wrapped__,c=function(p){return to(p,t)};return!(i>1||this.__actions__.length)&&l instanceof E&&Wt(a)?((l=l.slice(a,+a+(i?1:0))).__actions__.push({func:cs,args:[c],thisArg:m}),new u(l,this.__chain__).thru(function(p){return i&&!p.length&&p.push(m),p})):this.thru(c)}),ep=ns(function(t,i,a){ie.call(t,a)?++t[a]:zt(t,a,1)}),ip=yl(zl),rp=yl(ql);function Zl(t,i){return(P(t)?Ze:hn)(t,V(i,3))}function ed(t,i){return(P(t)?fa:Jo)(t,V(i,3))}var lp=ns(function(t,i,a){ie.call(t,a)?t[a].push(i):zt(t,a,[i])}),cp=W(function(t,i,a){var l=-1,c="function"==typeof i,p=nt(t)?C(t.length):[];return hn(t,function(f){p[++l]=c?Xe(i,f,a):Hi(f,i,a)}),p}),mp=ns(function(t,i,a){zt(t,a,i)});function ms(t,i){return(P(t)?ge:il)(t,V(i,3))}var up=ns(function(t,i,a){t[a?0:1].push(i)},function(){return[[],[]]}),Tp=W(function(t,i){if(null==t)return[];var a=i.length;return a>1&&qe(t,i[0],i[1])?i=[]:a>2&&qe(i[0],i[1],i[2])&&(i=[i[0]]),ol(t,Ne(i,1),[])}),ps=Ua||function(){return Fe.Date.now()};function td(t,i,a){return i=a?m:i,qt(t,M,m,m,m,m,i=t&&null==i?t.length:i)}function nd(t,i){var a;if("function"!=typeof i)throw new et(J);return t=z(t),function(){return--t>0&&(a=i.apply(this,arguments)),t<=1&&(i=m),a}}var wo=W(function(t,i,a){var l=1;if(a.length){var c=Nt(a,li(wo));l|=32}return qt(t,l,i,a,c)}),id=W(function(t,i,a){var l=3;if(a.length){var c=Nt(a,li(id));l|=32}return qt(i,l,t,a,c)});function ad(t,i,a){var l,c,p,f,_,v,T=0,I=!1,y=!1,k=!0;if("function"!=typeof t)throw new et(J);function L(xe){var Ft=l,Kt=c;return l=c=m,T=xe,f=t.apply(Kt,Ft)}function $(xe){var Ft=xe-v;return v===m||Ft>=i||Ft<0||y&&xe-T>=p}function Q(){var xe=ps();if($(xe))return K(xe);_=Zi(Q,function H(xe){var yd=i-(xe-v);return y?Me(yd,p-(xe-T)):yd}(xe))}function K(xe){return _=m,k&&l?L(xe):(l=c=m,f)}function _t(){var xe=ps(),Ft=$(xe);if(l=arguments,c=this,v=xe,Ft){if(_===m)return function B(xe){return T=xe,_=Zi(Q,i),I?L(xe):f}(v);if(y)return fl(_),_=Zi(Q,i),L(v)}return _===m&&(_=Zi(Q,i)),f}return i=St(i)||0,ve(a)&&(I=!!a.leading,p=(y="maxWait"in a)?je(St(a.maxWait)||0,i):p,k="trailing"in a?!!a.trailing:k),_t.cancel=function ft(){_!==m&&fl(_),T=0,l=v=c=_=m},_t.flush=function He(){return _===m?f:K(ps())},_t}var Ip=W(function(t,i){return Wo(t,1,i)}),yp=W(function(t,i,a){return Wo(t,St(i)||0,a)});function us(t,i){if("function"!=typeof t||null!=i&&"function"!=typeof i)throw new et(J);var a=function(){var l=arguments,c=i?i.apply(this,l):l[0],p=a.cache;if(p.has(c))return p.get(c);var f=t.apply(this,l);return a.cache=p.set(c,f)||p,f};return a.cache=new(us.Cache||Yt),a}function hs(t){if("function"!=typeof t)throw new et(J);return function(){var i=arguments;switch(i.length){case 0:return!t.call(this);case 1:return!t.call(this,i[0]);case 2:return!t.call(this,i[0],i[1]);case 3:return!t.call(this,i[0],i[1],i[2])}return!t.apply(this,i)}}us.Cache=Yt;var Rp=hc(function(t,i){var a=(i=1==i.length&&P(i[0])?ge(i[0],Ue(V())):ge(Ne(i,1),Ue(V()))).length;return W(function(l){for(var c=-1,p=Me(l.length,a);++c<p;)l[c]=i[c].call(this,l[c]);return Xe(t,this,l)})}),Eo=W(function(t,i){var a=Nt(i,li(Eo));return qt(t,32,m,i,a)}),od=W(function(t,i){var a=Nt(i,li(od));return qt(t,64,m,i,a)}),kp=Ht(function(t,i){return qt(t,256,m,m,m,i)});function xt(t,i){return t===i||t!=t&&i!=i}var $p=as(ro),Xp=as(function(t,i){return t>=i}),Ln=el(function(){return arguments}())?el:function(t){return Se(t)&&ie.call(t,"callee")&&!zr.call(t,"callee")},P=C.isArray,Up=yr?Ue(yr):function Qd(t){return Se(t)&&ze(t)==Tn};function nt(t){return null!=t&&gs(t.length)&&!Jt(t)}function ye(t){return Se(t)&&nt(t)}var bn=Ya||Po,Yp=xr?Ue(xr):function Kd(t){return Se(t)&&ze(t)==Be};function No(t){if(!Se(t))return!1;var i=ze(t);return i==An||"[object DOMException]"==i||"string"==typeof t.message&&"string"==typeof t.name&&!er(t)}function Jt(t){if(!ve(t))return!1;var i=ze(t);return i==Bn||i==nr||"[object AsyncFunction]"==i||"[object Proxy]"==i}function ld(t){return"number"==typeof t&&t==z(t)}function gs(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=_e}function ve(t){var i=typeof t;return null!=t&&("object"==i||"function"==i)}function Se(t){return null!=t&&"object"==typeof t}var dd=Fr?Ue(Fr):function ec(t){return Se(t)&&Ae(t)==at};function cd(t){return"number"==typeof t||Se(t)&&ze(t)==Cn}function er(t){if(!Se(t)||ze(t)!=It)return!1;var i=ei(t);if(null===i)return!0;var a=ie.call(i,"constructor")&&i.constructor;return"function"==typeof a&&a instanceof a&&Qn.call(a)==Xr}var Do=Rr?Ue(Rr):function tc(t){return Se(t)&&ze(t)==rn},md=kr?Ue(kr):function nc(t){return Se(t)&&Ae(t)==ot};function fs(t){return"string"==typeof t||!P(t)&&Se(t)&&ze(t)==Sn}function gt(t){return"symbol"==typeof t||Se(t)&&ze(t)==$n}var di=Or?Ue(Or):function ic(t){return Se(t)&&gs(t.length)&&!!pe[ze(t)]},ou=as(lo),lu=as(function(t,i){return t<=i});function pd(t){if(!t)return[];if(nt(t))return fs(t)?ut(t):tt(t);if(Fn&&t[Fn])return function Oa(b){for(var S,C=[];!(S=b.next()).done;)C.push(S.value);return C}(t[Fn]());var i=Ae(t);return(i==at?Ai:i==ot?Hn:ci)(t)}function Qt(t){return t?(t=St(t))===me||t===-me?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function z(t){var i=Qt(t),a=i%1;return i==i?a?i-a:i:0}function ud(t){return t?wn(z(t),0,Je):0}function St(t){if("number"==typeof t)return t;if(gt(t))return NaN;if(ve(t)){var i="function"==typeof t.valueOf?t.valueOf():t;t=ve(i)?i+"":i}if("string"!=typeof t)return 0===t?t:+t;t=Lr(t);var a=Gs.test(t);return a||As.test(t)?ua(t.slice(2),a?2:8):Ls.test(t)?NaN:+t}function hd(t){return Gt(t,it(t))}function ae(t){return null==t?"":ht(t)}var cu=ai(function(t,i){if(Ki(i)||nt(i))Gt(i,we(i),t);else for(var a in i)ie.call(i,a)&&zi(t,a,i[a])}),gd=ai(function(t,i){Gt(i,it(i),t)}),_s=ai(function(t,i,a,l){Gt(i,it(i),t,l)}),mu=ai(function(t,i,a,l){Gt(i,we(i),t,l)}),pu=Ht(to),hu=W(function(t,i){t=oe(t);var a=-1,l=i.length,c=l>2?i[2]:m;for(c&&qe(i[0],i[1],c)&&(l=1);++a<l;)for(var p=i[a],f=it(p),_=-1,v=f.length;++_<v;){var T=f[_],I=t[T];(I===m||xt(I,cn[T])&&!ie.call(t,T))&&(t[T]=p[T])}return t}),gu=W(function(t){return t.push(m,wl),Xe(fd,m,t)});function Lo(t,i,a){var l=null==t?m:En(t,i);return l===m?a:l}function Go(t,i){return null!=t&&Dl(t,i,Hd)}var yu=Fl(function(t,i,a){null!=i&&"function"!=typeof i.toString&&(i=mn.call(i)),t[i]=a},Ao(rt)),xu=Fl(function(t,i,a){null!=i&&"function"!=typeof i.toString&&(i=mn.call(i)),ie.call(t,i)?t[i].push(a):t[i]=[a]},V),Fu=W(Hi);function we(t){return nt(t)?Yo(t):oo(t)}function it(t){return nt(t)?Yo(t,!0):function rc(t){if(!ve(t))return function Bc(t){var i=[];if(null!=t)for(var a in oe(t))i.push(a);return i}(t);var i=Ki(t),a=[];for(var l in t)"constructor"==l&&(i||!ie.call(t,l))||a.push(l);return a}(t)}var Ou=ai(function(t,i,a){Zr(t,i,a)}),fd=ai(function(t,i,a,l){Zr(t,i,a,l)}),Mu=Ht(function(t,i){var a={};if(null==t)return a;var l=!1;i=ge(i,function(p){return p=fn(p,t),l||(l=p.length>1),p}),Gt(t,To(t),a),l&&(a=bt(a,7,yc));for(var c=i.length;c--;)ho(a,i[c]);return a}),Eu=Ht(function(t,i){return null==t?{}:function ac(t,i){return ll(t,i,function(a,l){return Go(t,l)})}(t,i)});function _d(t,i){if(null==t)return{};var a=ge(To(t),function(l){return[l]});return i=V(i),ll(t,a,function(l,c){return i(l,c[0])})}var bd=Ol(we),vd=Ol(it);function ci(t){return null==t?[]:Vi(t,we(t))}var Yu=oi(function(t,i,a){return i=i.toLowerCase(),t+(a?Cd(i):i)});function Cd(t){return Vo(ae(t).toLowerCase())}function Sd(t){return(t=ae(t))&&t.replace($s,ya).replace(na,"")}var Wu=oi(function(t,i,a){return t+(a?"-":"")+i.toLowerCase()}),Ju=oi(function(t,i,a){return t+(a?" ":"")+i.toLowerCase()}),Qu=Il("toLowerCase"),rh=oi(function(t,i,a){return t+(a?"_":"")+i.toLowerCase()}),ah=oi(function(t,i,a){return t+(a?" ":"")+Vo(i)}),fh=oi(function(t,i,a){return t+(a?" ":"")+i.toUpperCase()}),Vo=Il("toUpperCase");function Td(t,i,a){return t=ae(t),(i=a?m:i)===m?function ka(b){return sa.test(b)}(t)?function La(b){return b.match(ia)||[]}(t):function Ca(b){return b.match(ws)||[]}(t):t.match(i)||[]}var jd=W(function(t,i){try{return Xe(t,m,i)}catch(a){return No(a)?a:new X(a)}}),_h=Ht(function(t,i){return Ze(i,function(a){a=Vt(a),zt(t,a,wo(t[a],t))}),t});function Ao(t){return function(){return t}}var Sh=xl(),Th=xl(!0);function rt(t){return t}function Bo(t){return nl("function"==typeof t?t:bt(t,1))}var yh=W(function(t,i){return function(a){return Hi(a,t,i)}}),xh=W(function(t,i){return function(a){return Hi(t,a,i)}});function $o(t,i,a){var l=we(i),c=Kr(i,l);null==a&&(!ve(i)||!c.length&&l.length)&&(a=i,i=t,t=this,c=Kr(i,we(i)));var p=!(ve(a)&&"chain"in a&&!a.chain),f=Jt(t);return Ze(c,function(_){var v=i[_];t[_]=v,f&&(t.prototype[_]=function(){var T=this.__chain__;if(p||T){var I=t(this.__wrapped__);return(I.__actions__=tt(this.__actions__)).push({func:v,args:arguments,thisArg:t}),I.__chain__=T,I}return v.apply(t,Et([this.value()],arguments))})}),t}function Xo(){}var kh=vo(ge),Oh=vo(Mr),Mh=vo(Ei);function Id(t){return xo(t)?Ni(Vt(t)):function oc(t){return function(i){return En(i,t)}}(t)}var Eh=Rl(),Nh=Rl(!0);function Uo(){return[]}function Po(){return!1}var $h=rs(function(t,i){return t+i},0),Xh=Co("ceil"),Uh=rs(function(t,i){return t/i},1),Ph=Co("floor"),Qh=rs(function(t,i){return t*i},1),Kh=Co("round"),Zh=rs(function(t,i){return t-i},0);return r.after=function jp(t,i){if("function"!=typeof i)throw new et(J);return t=z(t),function(){if(--t<1)return i.apply(this,arguments)}},r.ary=td,r.assign=cu,r.assignIn=gd,r.assignInWith=_s,r.assignWith=mu,r.at=pu,r.before=nd,r.bind=wo,r.bindAll=_h,r.bindKey=id,r.castArray=function Dp(){if(!arguments.length)return[];var t=arguments[0];return P(t)?t:[t]},r.chain=Kl,r.chunk=function Pc(t,i,a){i=(a?qe(t,i,a):i===m)?1:je(z(i),0);var l=null==t?0:t.length;if(!l||i<1)return[];for(var c=0,p=0,f=C(ii(l/i));c<l;)f[p++]=vt(t,c,c+=i);return f},r.compact=function Yc(t){for(var i=-1,a=null==t?0:t.length,l=0,c=[];++i<a;){var p=t[i];p&&(c[l++]=p)}return c},r.concat=function zc(){var t=arguments.length;if(!t)return[];for(var i=C(t-1),a=arguments[0],l=t;l--;)i[l-1]=arguments[l];return Et(P(a)?tt(a):[a],Ne(i,1))},r.cond=function bh(t){var i=null==t?0:t.length,a=V();return t=i?ge(t,function(l){if("function"!=typeof l[1])throw new et(J);return[a(l[0]),l[1]]}):[],W(function(l){for(var c=-1;++c<i;){var p=t[c];if(Xe(p[0],this,l))return Xe(p[1],this,l)}})},r.conforms=function vh(t){return function Pd(t){var i=we(t);return function(a){return Ho(a,t,i)}}(bt(t,1))},r.constant=Ao,r.countBy=ep,r.create=function uu(t,i){var a=d(t);return null==i?a:qo(a,i)},r.curry=function rd(t,i,a){var l=qt(t,8,m,m,m,m,m,i=a?m:i);return l.placeholder=rd.placeholder,l},r.curryRight=function sd(t,i,a){var l=qt(t,16,m,m,m,m,m,i=a?m:i);return l.placeholder=sd.placeholder,l},r.debounce=ad,r.defaults=hu,r.defaultsDeep=gu,r.defer=Ip,r.delay=yp,r.difference=qc,r.differenceBy=Hc,r.differenceWith=Wc,r.drop=function Jc(t,i,a){var l=null==t?0:t.length;return l?vt(t,(i=a||i===m?1:z(i))<0?0:i,l):[]},r.dropRight=function Qc(t,i,a){var l=null==t?0:t.length;return l?vt(t,0,(i=l-(i=a||i===m?1:z(i)))<0?0:i):[]},r.dropRightWhile=function Kc(t,i){return t&&t.length?ts(t,V(i,3),!0,!0):[]},r.dropWhile=function Zc(t,i){return t&&t.length?ts(t,V(i,3),!0):[]},r.fill=function em(t,i,a,l){var c=null==t?0:t.length;return c?(a&&"number"!=typeof a&&qe(t,i,a)&&(a=0,l=c),function zd(t,i,a,l){var c=t.length;for((a=z(a))<0&&(a=-a>c?0:c+a),(l=l===m||l>c?c:z(l))<0&&(l+=c),l=a>l?0:ud(l);a<l;)t[a++]=i;return t}(t,i,a,l)):[]},r.filter=function np(t,i){return(P(t)?wt:Qo)(t,V(i,3))},r.flatMap=function sp(t,i){return Ne(ms(t,i),1)},r.flatMapDeep=function ap(t,i){return Ne(ms(t,i),me)},r.flatMapDepth=function op(t,i,a){return a=a===m?1:z(a),Ne(ms(t,i),a)},r.flatten=Hl,r.flattenDeep=function tm(t){return null!=t&&t.length?Ne(t,me):[]},r.flattenDepth=function nm(t,i){return null!=t&&t.length?Ne(t,i=i===m?1:z(i)):[]},r.flip=function xp(t){return qt(t,512)},r.flow=Sh,r.flowRight=Th,r.fromPairs=function im(t){for(var i=-1,a=null==t?0:t.length,l={};++i<a;){var c=t[i];l[c[0]]=c[1]}return l},r.functions=function Tu(t){return null==t?[]:Kr(t,we(t))},r.functionsIn=function ju(t){return null==t?[]:Kr(t,it(t))},r.groupBy=lp,r.initial=function sm(t){return null!=t&&t.length?vt(t,0,-1):[]},r.intersection=am,r.intersectionBy=om,r.intersectionWith=lm,r.invert=yu,r.invertBy=xu,r.invokeMap=cp,r.iteratee=Bo,r.keyBy=mp,r.keys=we,r.keysIn=it,r.map=ms,r.mapKeys=function Ru(t,i){var a={};return i=V(i,3),Lt(t,function(l,c,p){zt(a,i(l,c,p),l)}),a},r.mapValues=function ku(t,i){var a={};return i=V(i,3),Lt(t,function(l,c,p){zt(a,c,i(l,c,p))}),a},r.matches=function jh(t){return rl(bt(t,1))},r.matchesProperty=function Ih(t,i){return sl(t,bt(i,1))},r.memoize=us,r.merge=Ou,r.mergeWith=fd,r.method=yh,r.methodOf=xh,r.mixin=$o,r.negate=hs,r.nthArg=function Rh(t){return t=z(t),W(function(i){return al(i,t)})},r.omit=Mu,r.omitBy=function wu(t,i){return _d(t,hs(V(i)))},r.once=function Fp(t){return nd(2,t)},r.orderBy=function pp(t,i,a,l){return null==t?[]:(P(i)||(i=null==i?[]:[i]),P(a=l?m:a)||(a=null==a?[]:[a]),ol(t,i,a))},r.over=kh,r.overArgs=Rp,r.overEvery=Oh,r.overSome=Mh,r.partial=Eo,r.partialRight=od,r.partition=up,r.pick=Eu,r.pickBy=_d,r.property=Id,r.propertyOf=function wh(t){return function(i){return null==t?m:En(t,i)}},r.pull=pm,r.pullAll=Jl,r.pullAllBy=function um(t,i,a){return t&&t.length&&i&&i.length?co(t,i,V(a,2)):t},r.pullAllWith=function hm(t,i,a){return t&&t.length&&i&&i.length?co(t,i,m,a):t},r.pullAt=gm,r.range=Eh,r.rangeRight=Nh,r.rearg=kp,r.reject=function fp(t,i){return(P(t)?wt:Qo)(t,hs(V(i,3)))},r.remove=function fm(t,i){var a=[];if(!t||!t.length)return a;var l=-1,c=[],p=t.length;for(i=V(i,3);++l<p;){var f=t[l];i(f,l,t)&&(a.push(f),c.push(l))}return dl(t,c),a},r.rest=function Op(t,i){if("function"!=typeof t)throw new et(J);return W(t,i=i===m?i:z(i))},r.reverse=Oo,r.sampleSize=function bp(t,i,a){return i=(a?qe(t,i,a):i===m)?1:z(i),(P(t)?Bd:cc)(t,i)},r.set=function Du(t,i,a){return null==t?t:Ji(t,i,a)},r.setWith=function Lu(t,i,a,l){return l="function"==typeof l?l:m,null==t?t:Ji(t,i,a,l)},r.shuffle=function vp(t){return(P(t)?$d:pc)(t)},r.slice=function _m(t,i,a){var l=null==t?0:t.length;return l?(a&&"number"!=typeof a&&qe(t,i,a)?(i=0,a=l):(i=null==i?0:z(i),a=a===m?l:z(a)),vt(t,i,a)):[]},r.sortBy=Tp,r.sortedUniq=function Im(t){return t&&t.length?ml(t):[]},r.sortedUniqBy=function ym(t,i){return t&&t.length?ml(t,V(i,2)):[]},r.split=function sh(t,i,a){return a&&"number"!=typeof a&&qe(t,i,a)&&(i=a=m),(a=a===m?Je:a>>>0)?(t=ae(t))&&("string"==typeof i||null!=i&&!Do(i))&&!(i=ht(i))&&ln(t)?_n(ut(t),0,a):t.split(i,a):[]},r.spread=function Mp(t,i){if("function"!=typeof t)throw new et(J);return i=null==i?0:je(z(i),0),W(function(a){var l=a[i],c=_n(a,0,i);return l&&Et(c,l),Xe(t,this,c)})},r.tail=function xm(t){var i=null==t?0:t.length;return i?vt(t,1,i):[]},r.take=function Fm(t,i,a){return t&&t.length?vt(t,0,(i=a||i===m?1:z(i))<0?0:i):[]},r.takeRight=function Rm(t,i,a){var l=null==t?0:t.length;return l?vt(t,(i=l-(i=a||i===m?1:z(i)))<0?0:i,l):[]},r.takeRightWhile=function km(t,i){return t&&t.length?ts(t,V(i,3),!1,!0):[]},r.takeWhile=function Om(t,i){return t&&t.length?ts(t,V(i,3)):[]},r.tap=function Ym(t,i){return i(t),t},r.throttle=function wp(t,i,a){var l=!0,c=!0;if("function"!=typeof t)throw new et(J);return ve(a)&&(l="leading"in a?!!a.leading:l,c="trailing"in a?!!a.trailing:c),ad(t,i,{leading:l,maxWait:i,trailing:c})},r.thru=cs,r.toArray=pd,r.toPairs=bd,r.toPairsIn=vd,r.toPath=function Ah(t){return P(t)?ge(t,Vt):gt(t)?[t]:tt(Pl(ae(t)))},r.toPlainObject=hd,r.transform=function Gu(t,i,a){var l=P(t),c=l||bn(t)||di(t);if(i=V(i,4),null==a){var p=t&&t.constructor;a=c?l?new p:[]:ve(t)&&Jt(p)?d(ei(t)):{}}return(c?Ze:Lt)(t,function(f,_,v){return i(a,f,_,v)}),a},r.unary=function Ep(t){return td(t,1)},r.union=Mm,r.unionBy=wm,r.unionWith=Em,r.uniq=function Nm(t){return t&&t.length?gn(t):[]},r.uniqBy=function Dm(t,i){return t&&t.length?gn(t,V(i,2)):[]},r.uniqWith=function Lm(t,i){return i="function"==typeof i?i:m,t&&t.length?gn(t,m,i):[]},r.unset=function Vu(t,i){return null==t||ho(t,i)},r.unzip=Mo,r.unzipWith=Ql,r.update=function Au(t,i,a){return null==t?t:ul(t,i,_o(a))},r.updateWith=function Bu(t,i,a,l){return l="function"==typeof l?l:m,null==t?t:ul(t,i,_o(a),l)},r.values=ci,r.valuesIn=function $u(t){return null==t?[]:Vi(t,it(t))},r.without=Gm,r.words=Td,r.wrap=function Np(t,i){return Eo(_o(i),t)},r.xor=Vm,r.xorBy=Am,r.xorWith=Bm,r.zip=$m,r.zipObject=function Xm(t,i){return gl(t||[],i||[],zi)},r.zipObjectDeep=function Um(t,i){return gl(t||[],i||[],Ji)},r.zipWith=Pm,r.entries=bd,r.entriesIn=vd,r.extend=gd,r.extendWith=_s,$o(r,r),r.add=$h,r.attempt=jd,r.camelCase=Yu,r.capitalize=Cd,r.ceil=Xh,r.clamp=function Xu(t,i,a){return a===m&&(a=i,i=m),a!==m&&(a=(a=St(a))==a?a:0),i!==m&&(i=(i=St(i))==i?i:0),wn(St(t),i,a)},r.clone=function Lp(t){return bt(t,4)},r.cloneDeep=function Vp(t){return bt(t,5)},r.cloneDeepWith=function Ap(t,i){return bt(t,5,i="function"==typeof i?i:m)},r.cloneWith=function Gp(t,i){return bt(t,4,i="function"==typeof i?i:m)},r.conformsTo=function Bp(t,i){return null==i||Ho(t,i,we(i))},r.deburr=Sd,r.defaultTo=function Ch(t,i){return null==t||t!=t?i:t},r.divide=Uh,r.endsWith=function zu(t,i,a){t=ae(t),i=ht(i);var l=t.length,c=a=a===m?l:wn(z(a),0,l);return(a-=i.length)>=0&&t.slice(a,c)==i},r.eq=xt,r.escape=function qu(t){return(t=ae(t))&&Xn.test(t)?t.replace(Ti,xa):t},r.escapeRegExp=function Hu(t){return(t=ae(t))&&mt.test(t)?t.replace($e,"\\$&"):t},r.every=function tp(t,i,a){var l=P(t)?Mr:Yd;return a&&qe(t,i,a)&&(i=m),l(t,V(i,3))},r.find=ip,r.findIndex=zl,r.findKey=function fu(t,i){return wr(t,V(i,3),Lt)},r.findLast=rp,r.findLastIndex=ql,r.findLastKey=function _u(t,i){return wr(t,V(i,3),io)},r.floor=Ph,r.forEach=Zl,r.forEachRight=ed,r.forIn=function bu(t,i){return null==t?t:no(t,V(i,3),it)},r.forInRight=function vu(t,i){return null==t?t:Ko(t,V(i,3),it)},r.forOwn=function Cu(t,i){return t&&Lt(t,V(i,3))},r.forOwnRight=function Su(t,i){return t&&io(t,V(i,3))},r.get=Lo,r.gt=$p,r.gte=Xp,r.has=function Iu(t,i){return null!=t&&Dl(t,i,qd)},r.hasIn=Go,r.head=Wl,r.identity=rt,r.includes=function dp(t,i,a,l){t=nt(t)?t:ci(t),a=a&&!l?z(a):0;var c=t.length;return a<0&&(a=je(c+a,0)),fs(t)?a<=c&&t.indexOf(i,a)>-1:!!c&&on(t,i,a)>-1},r.indexOf=function rm(t,i,a){var l=null==t?0:t.length;if(!l)return-1;var c=null==a?0:z(a);return c<0&&(c=je(l+c,0)),on(t,i,c)},r.inRange=function Uu(t,i,a){return i=Qt(i),a===m?(a=i,i=0):a=Qt(a),function Wd(t,i,a){return t>=Me(i,a)&&t<je(i,a)}(t=St(t),i,a)},r.invoke=Fu,r.isArguments=Ln,r.isArray=P,r.isArrayBuffer=Up,r.isArrayLike=nt,r.isArrayLikeObject=ye,r.isBoolean=function Pp(t){return!0===t||!1===t||Se(t)&&ze(t)==vn},r.isBuffer=bn,r.isDate=Yp,r.isElement=function zp(t){return Se(t)&&1===t.nodeType&&!er(t)},r.isEmpty=function qp(t){if(null==t)return!0;if(nt(t)&&(P(t)||"string"==typeof t||"function"==typeof t.splice||bn(t)||di(t)||Ln(t)))return!t.length;var i=Ae(t);if(i==at||i==ot)return!t.size;if(Ki(t))return!oo(t).length;for(var a in t)if(ie.call(t,a))return!1;return!0},r.isEqual=function Hp(t,i){return Wi(t,i)},r.isEqualWith=function Wp(t,i,a){var l=(a="function"==typeof a?a:m)?a(t,i):m;return l===m?Wi(t,i,m,a):!!l},r.isError=No,r.isFinite=function Jp(t){return"number"==typeof t&&Hr(t)},r.isFunction=Jt,r.isInteger=ld,r.isLength=gs,r.isMap=dd,r.isMatch=function Qp(t,i){return t===i||ao(t,i,Io(i))},r.isMatchWith=function Kp(t,i,a){return a="function"==typeof a?a:m,ao(t,i,Io(i),a)},r.isNaN=function Zp(t){return cd(t)&&t!=+t},r.isNative=function eu(t){if(Gc(t))throw new X("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return tl(t)},r.isNil=function nu(t){return null==t},r.isNull=function tu(t){return null===t},r.isNumber=cd,r.isObject=ve,r.isObjectLike=Se,r.isPlainObject=er,r.isRegExp=Do,r.isSafeInteger=function iu(t){return ld(t)&&t>=-_e&&t<=_e},r.isSet=md,r.isString=fs,r.isSymbol=gt,r.isTypedArray=di,r.isUndefined=function ru(t){return t===m},r.isWeakMap=function su(t){return Se(t)&&Ae(t)==Ot},r.isWeakSet=function au(t){return Se(t)&&"[object WeakSet]"==ze(t)},r.join=function dm(t,i){return null==t?"":za.call(t,i)},r.kebabCase=Wu,r.last=Ct,r.lastIndexOf=function cm(t,i,a){var l=null==t?0:t.length;if(!l)return-1;var c=l;return a!==m&&(c=(c=z(a))<0?je(l+c,0):Me(c,l-1)),i==i?function Ea(b,S,C){for(var w=C+1;w--;)if(b[w]===S)return w;return w}(t,i,c):qn(t,Er,c,!0)},r.lowerCase=Ju,r.lowerFirst=Qu,r.lt=ou,r.lte=lu,r.max=function Yh(t){return t&&t.length?Qr(t,rt,ro):m},r.maxBy=function zh(t,i){return t&&t.length?Qr(t,V(i,2),ro):m},r.mean=function qh(t){return Nr(t,rt)},r.meanBy=function Hh(t,i){return Nr(t,V(i,2))},r.min=function Wh(t){return t&&t.length?Qr(t,rt,lo):m},r.minBy=function Jh(t,i){return t&&t.length?Qr(t,V(i,2),lo):m},r.stubArray=Uo,r.stubFalse=Po,r.stubObject=function Dh(){return{}},r.stubString=function Lh(){return""},r.stubTrue=function Gh(){return!0},r.multiply=Qh,r.nth=function mm(t,i){return t&&t.length?al(t,z(i)):m},r.noConflict=function Fh(){return Fe._===this&&(Fe._=Ur),this},r.noop=Xo,r.now=ps,r.pad=function Ku(t,i,a){t=ae(t);var l=(i=z(i))?dn(t):0;if(!i||l>=i)return t;var c=(i-l)/2;return ss(ri(c),a)+t+ss(ii(c),a)},r.padEnd=function Zu(t,i,a){t=ae(t);var l=(i=z(i))?dn(t):0;return i&&l<i?t+ss(i-l,a):t},r.padStart=function eh(t,i,a){t=ae(t);var l=(i=z(i))?dn(t):0;return i&&l<i?ss(i-l,a)+t:t},r.parseInt=function th(t,i,a){return a||null==i?i=0:i&&(i=+i),Wa(ae(t).replace(Ii,""),i||0)},r.random=function Pu(t,i,a){if(a&&"boolean"!=typeof a&&qe(t,i,a)&&(i=a=m),a===m&&("boolean"==typeof i?(a=i,i=m):"boolean"==typeof t&&(a=t,t=m)),t===m&&i===m?(t=0,i=1):(t=Qt(t),i===m?(i=t,t=0):i=Qt(i)),t>i){var l=t;t=i,i=l}if(a||t%1||i%1){var c=Wr();return Me(t+c*(i-t+pa("1e-"+((c+"").length-1))),i)}return mo(t,i)},r.reduce=function hp(t,i,a){var l=P(t)?wi:Dr,c=arguments.length<3;return l(t,V(i,4),a,c,hn)},r.reduceRight=function gp(t,i,a){var l=P(t)?_a:Dr,c=arguments.length<3;return l(t,V(i,4),a,c,Jo)},r.repeat=function nh(t,i,a){return i=(a?qe(t,i,a):i===m)?1:z(i),po(ae(t),i)},r.replace=function ih(){var t=arguments,i=ae(t[0]);return t.length<3?i:i.replace(t[1],t[2])},r.result=function Nu(t,i,a){var l=-1,c=(i=fn(i,t)).length;for(c||(c=1,t=m);++l<c;){var p=null==t?m:t[Vt(i[l])];p===m&&(l=c,p=a),t=Jt(p)?p.call(t):p}return t},r.round=Kh,r.runInContext=b,r.sample=function _p(t){return(P(t)?zo:dc)(t)},r.size=function Cp(t){if(null==t)return 0;if(nt(t))return fs(t)?dn(t):t.length;var i=Ae(t);return i==at||i==ot?t.size:oo(t).length},r.snakeCase=rh,r.some=function Sp(t,i,a){var l=P(t)?Ei:uc;return a&&qe(t,i,a)&&(i=m),l(t,V(i,3))},r.sortedIndex=function bm(t,i){return es(t,i)},r.sortedIndexBy=function vm(t,i,a){return uo(t,i,V(a,2))},r.sortedIndexOf=function Cm(t,i){var a=null==t?0:t.length;if(a){var l=es(t,i);if(l<a&&xt(t[l],i))return l}return-1},r.sortedLastIndex=function Sm(t,i){return es(t,i,!0)},r.sortedLastIndexBy=function Tm(t,i,a){return uo(t,i,V(a,2),!0)},r.sortedLastIndexOf=function jm(t,i){if(null!=t&&t.length){var l=es(t,i,!0)-1;if(xt(t[l],i))return l}return-1},r.startCase=ah,r.startsWith=function oh(t,i,a){return t=ae(t),a=null==a?0:wn(z(a),0,t.length),i=ht(i),t.slice(a,a+i.length)==i},r.subtract=Zh,r.sum=function eg(t){return t&&t.length?Li(t,rt):0},r.sumBy=function tg(t,i){return t&&t.length?Li(t,V(i,2)):0},r.template=function lh(t,i,a){var l=r.templateSettings;a&&qe(t,i,a)&&(i=m),t=ae(t),i=_s({},i,l,Ml);var _,v,c=_s({},i.imports,l.imports,Ml),p=we(c),f=Vi(c,p),T=0,I=i.interpolate||Un,y="__p += '",k=Bi((i.escape||Un).source+"|"+I.source+"|"+(I===lt?Ds:Un).source+"|"+(i.evaluate||Un).source+"|$","g"),L="//# sourceURL="+(ie.call(i,"sourceURL")?(i.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++oa+"]")+"\n";t.replace(k,function($,Q,K,ft,He,_t){return K||(K=ft),y+=t.slice(T,_t).replace(Xs,Fa),Q&&(_=!0,y+="' +\n__e("+Q+") +\n'"),He&&(v=!0,y+="';\n"+He+";\n__p += '"),K&&(y+="' +\n((__t = ("+K+")) == null ? '' : __t) +\n'"),T=_t+$.length,$}),y+="';\n";var B=ie.call(i,"variable")&&i.variable;if(B){if(Es.test(B))throw new X("Invalid `variable` option passed into `_.template`")}else y="with (obj) {\n"+y+"\n}\n";y=(v?y.replace(js,""):y).replace(Is,"$1").replace(ys,"$1;"),y="function("+(B||"obj")+") {\n"+(B?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(_?", __e = _.escape":"")+(v?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+y+"return __p\n}";var H=jd(function(){return ee(p,L+"return "+y).apply(m,f)});if(H.source=y,No(H))throw H;return H},r.times=function Vh(t,i){if((t=z(t))<1||t>_e)return[];var a=Je,l=Me(t,Je);i=V(i),t-=Je;for(var c=Gi(l,i);++a<t;)i(a);return c},r.toFinite=Qt,r.toInteger=z,r.toLength=ud,r.toLower=function dh(t){return ae(t).toLowerCase()},r.toNumber=St,r.toSafeInteger=function du(t){return t?wn(z(t),-_e,_e):0===t?t:0},r.toString=ae,r.toUpper=function ch(t){return ae(t).toUpperCase()},r.trim=function mh(t,i,a){if((t=ae(t))&&(a||i===m))return Lr(t);if(!t||!(i=ht(i)))return t;var l=ut(t),c=ut(i);return _n(l,Gr(l,c),Vr(l,c)+1).join("")},r.trimEnd=function ph(t,i,a){if((t=ae(t))&&(a||i===m))return t.slice(0,Br(t)+1);if(!t||!(i=ht(i)))return t;var l=ut(t);return _n(l,0,Vr(l,ut(i))+1).join("")},r.trimStart=function uh(t,i,a){if((t=ae(t))&&(a||i===m))return t.replace(Ii,"");if(!t||!(i=ht(i)))return t;var l=ut(t);return _n(l,Gr(l,ut(i))).join("")},r.truncate=function hh(t,i){var a=30,l="...";if(ve(i)){var c="separator"in i?i.separator:c;a="length"in i?z(i.length):a,l="omission"in i?ht(i.omission):l}var p=(t=ae(t)).length;if(ln(t)){var f=ut(t);p=f.length}if(a>=p)return t;var _=a-dn(l);if(_<1)return l;var v=f?_n(f,0,_).join(""):t.slice(0,_);if(c===m)return v+l;if(f&&(_+=v.length-_),Do(c)){if(t.slice(_).search(c)){var T,I=v;for(c.global||(c=Bi(c.source,ae(sr.exec(c))+"g")),c.lastIndex=0;T=c.exec(I);)var y=T.index;v=v.slice(0,y===m?_:y)}}else if(t.indexOf(ht(c),_)!=_){var k=v.lastIndexOf(c);k>-1&&(v=v.slice(0,k))}return v+l},r.unescape=function gh(t){return(t=ae(t))&&ji.test(t)?t.replace(rr,Na):t},r.uniqueId=function Bh(t){var i=++Ba;return ae(t)+i},r.upperCase=fh,r.upperFirst=Vo,r.each=Zl,r.eachRight=ed,r.first=Wl,$o(r,function(){var t={};return Lt(r,function(i,a){ie.call(r.prototype,a)||(t[a]=i)}),t}(),{chain:!1}),r.VERSION="4.17.21",Ze(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){r[t].placeholder=r}),Ze(["drop","take"],function(t,i){E.prototype[t]=function(a){a=a===m?1:je(z(a),0);var l=this.__filtered__&&!i?new E(this):this.clone();return l.__filtered__?l.__takeCount__=Me(a,l.__takeCount__):l.__views__.push({size:Me(a,Je),type:t+(l.__dir__<0?"Right":"")}),l},E.prototype[t+"Right"]=function(a){return this.reverse()[t](a).reverse()}}),Ze(["filter","map","takeWhile"],function(t,i){var a=i+1,l=1==a||3==a;E.prototype[t]=function(c){var p=this.clone();return p.__iteratees__.push({iteratee:V(c,3),type:a}),p.__filtered__=p.__filtered__||l,p}}),Ze(["head","last"],function(t,i){var a="take"+(i?"Right":"");E.prototype[t]=function(){return this[a](1).value()[0]}}),Ze(["initial","tail"],function(t,i){var a="drop"+(i?"":"Right");E.prototype[t]=function(){return this.__filtered__?new E(this):this[a](1)}}),E.prototype.compact=function(){return this.filter(rt)},E.prototype.find=function(t){return this.filter(t).head()},E.prototype.findLast=function(t){return this.reverse().find(t)},E.prototype.invokeMap=W(function(t,i){return"function"==typeof t?new E(this):this.map(function(a){return Hi(a,t,i)})}),E.prototype.reject=function(t){return this.filter(hs(V(t)))},E.prototype.slice=function(t,i){t=z(t);var a=this;return a.__filtered__&&(t>0||i<0)?new E(a):(t<0?a=a.takeRight(-t):t&&(a=a.drop(t)),i!==m&&(a=(i=z(i))<0?a.dropRight(-i):a.take(i-t)),a)},E.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},E.prototype.toArray=function(){return this.take(Je)},Lt(E.prototype,function(t,i){var a=/^(?:filter|find|map|reject)|While$/.test(i),l=/^(?:head|last)$/.test(i),c=r[l?"take"+("last"==i?"Right":""):i],p=l||/^find/.test(i);c&&(r.prototype[i]=function(){var f=this.__wrapped__,_=l?[1]:arguments,v=f instanceof E,T=_[0],I=v||P(f),y=function(Q){var K=c.apply(r,Et([Q],_));return l&&k?K[0]:K};I&&a&&"function"==typeof T&&1!=T.length&&(v=I=!1);var k=this.__chain__,B=p&&!k,H=v&&!this.__actions__.length;if(!p&&I){f=H?f:new E(this);var $=t.apply(f,_);return $.__actions__.push({func:cs,args:[y],thisArg:m}),new u($,k)}return B&&H?t.apply(this,_):($=this.thru(y),B?l?$.value()[0]:$.value():$)})}),Ze(["pop","push","shift","sort","splice","unshift"],function(t){var i=Wn[t],a=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",l=/^(?:pop|shift)$/.test(t);r.prototype[t]=function(){var c=arguments;if(l&&!this.__chain__){var p=this.value();return i.apply(P(p)?p:[],c)}return this[a](function(f){return i.apply(P(f)?f:[],c)})}}),Lt(E.prototype,function(t,i){var a=r[i];if(a){var l=a.name+"";ie.call(un,l)||(un[l]=[]),un[l].push({name:i,func:a})}}),un[is(m,2).name]=[{name:"wrapper",func:m}],E.prototype.clone=function ce(){var t=new E(this.__wrapped__);return t.__actions__=tt(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=tt(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=tt(this.__views__),t},E.prototype.reverse=function le(){if(this.__filtered__){var t=new E(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},E.prototype.value=function re(){var t=this.__wrapped__.value(),i=this.__dir__,a=P(t),l=i<0,c=a?t.length:0,p=function kc(t,i,a){for(var l=-1,c=a.length;++l<c;){var p=a[l],f=p.size;switch(p.type){case"drop":t+=f;break;case"dropRight":i-=f;break;case"take":i=Me(i,t+f);break;case"takeRight":t=je(t,i-f)}}return{start:t,end:i}}(0,c,this.__views__),f=p.start,_=p.end,v=_-f,T=l?_:f-1,I=this.__iteratees__,y=I.length,k=0,L=Me(v,this.__takeCount__);if(!a||!l&&c==v&&L==v)return hl(t,this.__actions__);var B=[];e:for(;v--&&k<L;){for(var H=-1,$=t[T+=i];++H<y;){var Q=I[H],ft=Q.type,He=(0,Q.iteratee)($);if(2==ft)$=He;else if(!He){if(1==ft)continue e;break e}}B[k++]=$}return B},r.prototype.at=zm,r.prototype.chain=function qm(){return Kl(this)},r.prototype.commit=function Hm(){return new u(this.value(),this.__chain__)},r.prototype.next=function Wm(){this.__values__===m&&(this.__values__=pd(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?m:this.__values__[this.__index__++]}},r.prototype.plant=function Qm(t){for(var i,a=this;a instanceof h;){var l=Yl(a);l.__index__=0,l.__values__=m,i?c.__wrapped__=l:i=l;var c=l;a=a.__wrapped__}return c.__wrapped__=t,i},r.prototype.reverse=function Km(){var t=this.__wrapped__;if(t instanceof E){var i=t;return this.__actions__.length&&(i=new E(this)),(i=i.reverse()).__actions__.push({func:cs,args:[Oo],thisArg:m}),new u(i,this.__chain__)}return this.thru(Oo)},r.prototype.toJSON=r.prototype.valueOf=r.prototype.value=function Zm(){return hl(this.__wrapped__,this.__actions__)},r.prototype.first=r.prototype.head,Fn&&(r.prototype[Fn]=function Jm(){return this}),r}();Fe._=xn,(x=function(){return xn}.call(ke,j,ke,st))!==m&&(st.exports=x)}.call(this)}}]);
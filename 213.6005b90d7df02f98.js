(self.webpackChunkvelzon=self.webpackChunkvelzon||[]).push([[213],{12822:(Gt,lt,x)=>{"use strict";x.d(lt,{l:()=>Qt});var k=x(67569),g=x(45312),O=x(54438),fe=x(21626);let Qt=(()=>{class ue extends k.d{constructor(Ie){super(Ie,g.c.apiUrl+"Channel/")}static{this.\u0275fac=function(sn){return new(sn||ue)(O.KVO(fe.Qq))}}static{this.\u0275prov=O.jDH({token:ue,factory:ue.\u0275fac,providedIn:"root"})}}return ue})()},16229:(Gt,lt,x)=>{"use strict";x.d(lt,{m:()=>Qt});var k=x(67569),g=x(45312),O=x(54438),fe=x(21626);let Qt=(()=>{class ue extends k.d{constructor(Ie){super(Ie,g.c.apiUrl+"District/")}getByCityId(Ie){return this.http.get(this.baseUrl+"getByCityId/"+Ie)}static{this.\u0275fac=function(sn){return new(sn||ue)(O.KVO(fe.Qq))}}static{this.\u0275prov=O.jDH({token:ue,factory:ue.\u0275fac,providedIn:"root"})}}return ue})()},96402:(Gt,lt,x)=>{"use strict";x.d(lt,{N:()=>Qt});var k=x(67569),g=x(45312),O=x(54438),fe=x(21626);let Qt=(()=>{class ue extends k.d{constructor(Ie){super(Ie,g.c.apiUrl+"Service/"),this.ServiceStatus=[{name:"Published",id:1},{name:"NotPublish",id:2},{name:"Draft",id:3}]}deleteImage(Ie){return this.http.delete(this.baseUrl+"deleteImage/"+Ie,this.httpOptions)}deleteUnit(Ie){return this.http.delete(this.baseUrl+"deleteUnit/"+Ie,this.httpOptions)}getItemDropDown(){return this.http.get(this.baseUrl+"GetItemDropDown")}servicesByCategory(Ie){return this.http.post(this.baseUrl+"servicesByCategory",Ie)}GetServiceList(Ie){return this.http.get(this.baseUrl+"GetServiceList/"+Ie)}static{this.\u0275fac=function(sn){return new(sn||ue)(O.KVO(fe.Qq))}}static{this.\u0275prov=O.jDH({token:ue,factory:ue.\u0275fac,providedIn:"root"})}}return ue})()},69213:(Gt,lt,x)=>{"use strict";x.r(lt),x.d(lt,{SalesModule:()=>hm});var k=x(60177),g=x(89417),O=x(69005),fe=x(91022),Qt=x(70255),ue=x(63789),mo=x(98982),Ie=x.n(mo),sn=x(53978),F=x(8147),B=x(45286),ns=x(65430),Et=x(41631),X=x(1530),ve=x(72510),$=x(51188),e=x(54438),dt=x(21413),ze=x(70152),Mt=x(23294),Me=x(25558),R=x(56977),Y=x(37021),Z=x(35335),ee=x(45236),z=x(70980),En=x(99437),Dn=x(18810),Vn=x(7673),M=x(36158),Je=x(45312),Hi=x(84412),We=x(67569),Ue=x(21626);let Oe=(()=>{class a extends We.d{constructor(t){super(t,Je.c.apiUrl+"OfferOrder/"),this.checkValidationSource=new Hi.t(!0),this.checkValidation=this.checkValidationSource.asObservable(),this.GetOrderCountSource=new Hi.t(!0),this.GetOrderCount=this.GetOrderCountSource.asObservable(),this.removeServiceQ=new Hi.t(0),this.removeService=this.removeServiceQ.asObservable(),this.discountTypes=[{id:1,name:"Cost"},{id:2,name:"Precentage"}],this.salesOrderForm={id:null,clientLocationId:0,clientVisitDate:new Date,clientId:0,notes:"",items:[],discountAmount:0,discountAmountAdd:0,total:0,agent:{},orderLocations:{},discountType:1,discountTypeAdd:1,isPrecentage:!0,isPrecentageAdd:!1,totalAddDiscountType:0,totalAddDiscount:0,serviceCategoryCode:0}}getLookups(){return this.http.get(this.baseUrl+"Lookups")}changStatus(t){return this.http.put(this.baseUrl+"ChangeStatus/",t)}UpdateQuantity(t){return this.http.put(this.baseUrl+"UpdateQuantity",t)}updateTruck(t){return this.http.put(this.baseUrl+"updateTruck",t)}GetTrucks(t){return this.http.post(this.baseUrl+"GetTrucks/",t)}CancelOfferOrder(t){return this.http.post(this.baseUrl+"CancelOfferOrder",t)}GetOfferOrderCount(){return this.http.get(this.baseUrl+"OfferOrderCount")}GetOfferOrderStoreCount(){return this.http.get(this.baseUrl+"GetOfferOrderStoreCount")}GetAssignSalesOrder(){return this.http.get(this.baseUrl+"GetAssignSalesOrder")}GetOrderDetail(t){return this.http.get(this.baseUrl+"GetOrderDetail/"+t)}RequestChangeQuantity(t){return this.http.post(this.baseUrl+"RequestChangeQuantity/",t)}static{this.\u0275fac=function(r){return new(r||a)(e.KVO(Ue.Qq))}}static{this.\u0275prov=e.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})(),bn=(()=>{class a extends We.d{constructor(t){super(t,Je.c.apiUrl+"RequestPersonSales/")}UpdateLimit(t){return this.http.post(this.baseUrl+"UpdateLimit",t)}GetRequestLookups(){return this.http.get(this.baseUrl+"GetRequestLookups")}GetRequestCount(){return this.http.get(this.baseUrl+"GetRequestCount")}static{this.\u0275fac=function(r){return new(r||a)(e.KVO(Ue.Qq))}}static{this.\u0275prov=e.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();var ae=x(3888),Ht=x(75922),is=x(96402),ke=x(29935),ye=x(94575),et=x(38542);function po(a,m){if(1&a&&(e.j41(0,"div",17),e.nrm(1,"i",18),e.EFF(2),e.k0s()),2&a){const t=e.XpG();e.R7$(2),e.SpI(" ",null==t.clientInfo?null:t.clientInfo.alertMessage," ")}}let Ln=(()=>{class a{constructor(t,r,n){this.clientService=t,this.offerOrder=r,this.route=n,this.form={},this.keySelected="",this.notifier=new dt.B,this.mainDelay=100,this.loaderSearchShap=M.cX,this.loaderOperationShap=M.$$,this.operationLoader=M.ZW,this.isEditForm=!1,this.showEdit=!1,this.clients=[],this.paymentTypes=[],this.isClientFound=!0,this.errorMessage="",this.mediaUrl=Je.c.mediaUrl,this.setFormByOrderCode=new e.bkB,this.calacTotal=new e.bkB,this.isOrderEdit=!0,this.loading=!1,this.searchClient=new dt.B,this.clientParam={pageSize:50,pageNumber:1,search:""}}ngOnInit(){this.form=this.offerOrder.salesOrderForm,this.form.clientId&&(this.getClientSearchDropdwon(this.form.clientId),this.getClientInfo(this.form.clientId)),this.searchClient.pipe((0,ze.B)(300),(0,Mt.F)(),(0,Me.n)(t=>this.loadClient(t))).subscribe()}loadClient(t){return this.loading=!0,""==t||null==t?(this.loading=!1,(0,Vn.of)([])):this.getClientDropdwon(t)}getClientDropdwon(t){return this.clientParam.search=t,this.clientParam.pageNumber=1,this.clientService.GetClientSearch(this.clientParam).pipe((0,Me.n)(r=>(this.clients=r.data,this.loading=!1,[])))}getClientSearchDropdwon(t){this.clientParam.search=t,this.clientParam.pageNumber=1,this.clientService.GetClientSearch(this.clientParam).subscribe(r=>{this.clients=r.data})}scrollClient(){this.clientParam.pageNumber=this.clientParam.pageNumber+1,this.clientService.GetClientSearch(this.clientParam).subscribe(t=>{this.clients=[...this.clients,...t.data]})}getClientInfo(t){null!=t&&(this.offerOrder.salesOrderForm.clientId=t,this.offerOrder.salesOrderForm.clientVisitDate=this.form.clientVisitDate,this.clientService.GetClientInfo(t).subscribe(r=>{this.form.creditLimit=r.data.creditLimit,this.offerOrder.salesOrderForm.terms=r.data.terms,this.offerOrder.salesOrderForm.clientGroupId=r.data.clientGroupId,this.offerOrder.checkValidationSource.next(!0),this.clientInfo=r.data}))}setDefaultImage(t,r){t.target.src=r}ngOnDestroy(){}static{this.\u0275fac=function(r){return new(r||a)(e.rXU(Ht.X),e.rXU(Oe),e.rXU($.nX))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-client-info-salse"]],inputs:{form:"form",clients:"clients",isOrderEdit:"isOrderEdit",clientInfo:"clientInfo"},outputs:{setFormByOrderCode:"setFormByOrderCode",calacTotal:"calacTotal"},decls:32,vars:12,consts:[[1,"row"],["role","alert",1,"col-12","mt-2","alert","alert-primary","alert-dismissible","material-shadow","alert-label-icon","rounded-label","fade","show"],[1,"row","align-items-center"],[1,"col-12","col-md-1"],["width","50","height","50","alt","Image",2,"border-radius","15px",3,"error","src"],[1,"col-12","col-md-5"],["translate","sales.salesOrder.clientName"],["translate","sales.salesOrder.vatNumber"],["translate","sales.salesOrder.mobile"],["translate","sales.salesOrder.creditLimit"],["translate","sales.salesOrder.nationalAddress"],["translate","sales.salesOrder.clientGroupName"],["class","alert alert-danger alert-border-left alert-dismissible material-shadow fade show","role","alert",4,"ngIf"],[1,"row","mt-4"],[1,"col-12","mb-3"],["for","name","translate","",1,"fw-bold","form-label"],["rows","2","name","terms","type","text",1,"form-control",3,"ngModelChange","placeholder","ngModel"],["role","alert",1,"alert","alert-danger","alert-border-left","alert-dismissible","material-shadow","fade","show"],[1,"ri-alert-line","me-3","align-middle"]],template:function(r,n){1&r&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"img",4),e.bIt("error",function(p){return n.setDefaultImage(p,"assets/images/custom/no-img.jpg")}),e.k0s()(),e.j41(5,"div",5)(6,"div"),e.nrm(7,"strong",6),e.EFF(8),e.k0s(),e.j41(9,"div"),e.nrm(10,"strong",7),e.EFF(11),e.k0s(),e.j41(12,"div"),e.nrm(13,"strong",8),e.EFF(14),e.k0s()(),e.j41(15,"div",5)(16,"div"),e.nrm(17,"strong",9),e.EFF(18),e.k0s(),e.j41(19,"div"),e.nrm(20,"strong",10),e.EFF(21),e.k0s(),e.j41(22,"div"),e.nrm(23,"strong",11),e.EFF(24),e.k0s()()()(),e.DNE(25,po,3,1,"div",12),e.k0s(),e.j41(26,"div",13)(27,"div",14)(28,"label",15),e.EFF(29,"sales.salesOrder.terms"),e.k0s(),e.j41(30,"textarea",16),e.nI1(31,"translate"),e.mxI("ngModelChange",function(p){return e.DH7(n.form.terms,p)||(n.form.terms=p),p}),e.k0s()()()),2&r&&(e.R7$(4),e.Y8G("src",n.mediaUrl+(null==n.clientInfo?null:n.clientInfo.externalPhotoPath),e.B4B),e.R7$(4),e.SpI(" : ",null==n.clientInfo?null:n.clientInfo.name,""),e.R7$(3),e.SpI(" : ",null==n.clientInfo?null:n.clientInfo.vatNumber,""),e.R7$(3),e.SpI(" : ",null==n.clientInfo?null:n.clientInfo.mobile,""),e.R7$(4),e.SpI(" : ",null==n.clientInfo?null:n.clientInfo.creditLimit,""),e.R7$(3),e.SpI(" : ",null==n.clientInfo?null:n.clientInfo.nationalAddress,""),e.R7$(3),e.SpI(" : ",null==n.clientInfo?null:n.clientInfo.clientGroupName,""),e.R7$(),e.Y8G("ngIf",!1),e.R7$(5),e.Y8G("placeholder",e.bMT(31,10,"sales.salesOrder.termsPlaceholder")),e.R50("ngModel",n.form.terms))},dependencies:[k.bT,g.me,g.BC,g.vS,F.Mm,F.D9],encapsulation:2})}}return a})();var $n=x(25947),uo=x(33121),Ve=x(12260),Ke=x(15084);function rs(a,m){if(1&a){const t=e.RV6();e.qex(0),e.j41(1,"div",21)(2,"div",22)(3,"input",23),e.bIt("change",function(){const n=e.eBV(t).$implicit,o=e.XpG();return e.Njj(o.locationChange(n))}),e.k0s(),e.j41(4,"label",24)(5,"span",25),e.EFF(6),e.k0s(),e.j41(7,"span",26),e.EFF(8),e.k0s()()(),e.j41(9,"div",27)(10,"div")(11,"a",28),e.bIt("click",function(){const n=e.eBV(t).$implicit,o=e.XpG(),p=e.sdS(14);return e.Njj(o.openEditModal(n,p))}),e.nrm(12,"i",29)(13,"span",30),e.k0s()(),e.j41(14,"div")(15,"a",31),e.bIt("click",function(){const n=e.eBV(t).$implicit,o=e.XpG(),p=e.sdS(16);return e.Njj(o.confirm(n.id,p))}),e.nrm(16,"i",32)(17,"span",33),e.k0s()()()(),e.bVm()}if(2&a){const t=m.$implicit;e.R7$(3),e.Mz_("id","S",t.id,""),e.Y8G("checked",t.isSelected),e.R7$(),e.Mz_("for","S",t.id,""),e.R7$(2),e.Lme(" ",t.cityName,"- ",t.name,""),e.R7$(2),e.SpI(" ",t.address,"")}}function St(a,m){1&a&&(e.j41(0,"span",61),e.EFF(1,"general.action.register "),e.k0s())}function Bn(a,m){1&a&&(e.j41(0,"span",61),e.EFF(1,"general.action.edit "),e.k0s())}function go(a,m){1&a&&(e.j41(0,"div",62),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function Dt(a,m){1&a&&(e.j41(0,"div",62),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function ss(a,m){if(1&a){const t=e.RV6();e.j41(0,"div",34)(1,"div",35)(2,"h4",36),e.DNE(3,St,2,0,"span",37)(4,Bn,2,0,"span",37),e.k0s(),e.j41(5,"button",38),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss("Cross click"))}),e.k0s()(),e.j41(6,"div",39),e.nrm(7,"ngx-ui-loader",40),e.j41(8,"form",41,2),e.bIt("submit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.OnSubmit())}),e.j41(10,"div",42),e.nrm(11,"label",43),e.j41(12,"ng-select",44,3),e.nI1(14,"translate"),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.formEdit.cityCode,n)||(o.formEdit.cityCode=n),e.Njj(n)}),e.k0s()(),e.j41(15,"div",42),e.nrm(16,"label",45),e.j41(17,"input",46,4),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.formEdit.name,n)||(o.formEdit.name=n),e.Njj(n)}),e.k0s(),e.DNE(19,go,2,0,"div",47),e.k0s(),e.j41(20,"div",42),e.nrm(21,"label",48),e.j41(22,"textarea",49,5),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.formEdit.address,n)||(o.formEdit.address=n),e.Njj(n)}),e.k0s(),e.DNE(24,Dt,2,0,"div",47),e.k0s(),e.j41(25,"div",42),e.nrm(26,"label",50),e.j41(27,"input",51,6),e.bIt("change",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.onUrlChange(n))}),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.formEdit.mapURL,n)||(o.formEdit.mapURL=n),e.Njj(n)}),e.k0s()(),e.j41(29,"div",52)(30,"div",11),e.nrm(31,"label",53),e.j41(32,"input",54,7),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.formEdit.lat,n)||(o.formEdit.lat=n),e.Njj(n)}),e.k0s()(),e.j41(34,"div",11),e.nrm(35,"label",55),e.j41(36,"input",56,8),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.formEdit.lng,n)||(o.formEdit.lng=n),e.Njj(n)}),e.k0s()()(),e.j41(38,"div",57)(39,"button",58),e.nrm(40,"i",59)(41,"span",60),e.k0s()()()()()}if(2&a){const t=e.sdS(9),r=e.sdS(18),n=e.sdS(23),o=e.XpG();e.R7$(3),e.Y8G("ngIf",!o.isEditForm),e.R7$(),e.Y8G("ngIf",o.isEditForm),e.R7$(3),e.Y8G("hasProgressBar",!1)("fgsType",o.loaderOperationShap)("loaderId","locationOperation"),e.R7$(5),e.FS9("placeholder",e.bMT(14,17,"orderManagement.order.cityName")),e.R50("ngModel",o.formEdit.cityCode),e.Y8G("items",o.cities)("multiple",!1),e.R7$(5),e.R50("ngModel",o.formEdit.name),e.R7$(2),e.Y8G("ngIf",r.invalid&&r.touched),e.R7$(3),e.R50("ngModel",o.formEdit.address),e.R7$(2),e.Y8G("ngIf",n.invalid&&n.touched),e.R7$(3),e.R50("ngModel",o.formEdit.mapURL),e.R7$(5),e.R50("ngModel",o.formEdit.lat),e.R7$(4),e.R50("ngModel",o.formEdit.lng),e.R7$(3),e.Y8G("disabled",!t.valid)}}function _o(a,m){if(1&a){const t=e.RV6();e.j41(0,"delete-modal",63),e.bIt("deleteConfirm",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.DeleteConfirm())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}}let jt=(()=>{class a{constructor(t,r,n,o,p,c,D,ne){this.modalService=t,this.baseService=r,this.alertService=n,this.ngxLoader=o,this.whatsupService=p,this.whatsAppMessagesService=c,this.cityService=D,this.offerOrder=ne,this.submitted=!1,this.form={},this.mainDelay=20,this.notifier=new dt.B,this.operationLoader=M.ZW,this.isEditForm=!1,this.loaderOperationShap=M.$$,this.isLoad=!1,this.formEdit={},this.cities=[],this.idSelected=0,this.isOrderEdit=!0,this.modalRefs={}}ngOnInit(){this.form=this.offerOrder.salesOrderForm,this.form.clientId&&this.checkLocation(),this.form.clientLocationId&&this.checkSelected(this.form.clientLocationId),this.GetCities()}confirm(t,r){this.idSelected=t,this.modalService.open(r,{centered:!0})}openModal(t){this.ngxLoader.stopLoader(this.operationLoader),this.submitted=!1,this.modalRefs=this.modalService.open(t,{size:"md",centered:!0})}openEditModal(t,r){this.submitted=!1,this.formEdit=t,this.isEditForm=!0,this.modalRefs=this.modalService.open(r,{size:"md",centered:!0})}changeActiveTab(t){this.nav.select(t)}GetCities(){this.cityService.getDropDown().subscribe(t=>{this.cities=t.data},t=>{console.log(t)})}registerEntity(t=!1){this.ngxLoader.startLoader("locationOperation");let r=this.mapRegisterForm(this.formEdit);r.isSend=t,this.baseService.AddLocation(r).pipe((0,Y.O)(),(0,Z.c)(this.mainDelay),(0,ee.Z)(),(0,R.Q)(this.notifier),(0,z.j)(()=>this.ngxLoader.stopLoader("locationOperation")),(0,En.W)(n=>(0,Dn.$)(n))).subscribe(n=>{n.success?(this.alertService.success(),this.modalRefs.dismiss(),this.refresh()):this.alertService.error("general.message."+n.message)},n=>{this.alertService.error("general.message."+n)})}editEntity(t=!1){this.ngxLoader.startLoader("locationOperation");let r=this.mapForm(this.formEdit);r.isSend=t,this.baseService.EditLocation(r).pipe((0,Y.O)(),(0,Z.c)(this.mainDelay),(0,ee.Z)(),(0,R.Q)(this.notifier),(0,z.j)(()=>this.ngxLoader.stopLoader("locationOperation"))).subscribe(n=>{n.success?(this.alertService.success(),this.modalRefs.dismiss(),this.refresh()):this.alertService.error("general.message."+n.message)},n=>{this.alertService.error("general.message."+n)})}mapForm(t){let r={...t};return r.agentCode=this.form.clientId,r.cityCode=r.cityCode,r.agentName="",r.mobile="",r.mapURL=r.mapURL,r.lat=r.lat?r.lat.toString():"",r.lng=r.lng?r.lng.toString():"",r}mapRegisterForm(t){let r={...t};return r.id=0,r.cityCode=r.cityCode,r.agentName="",r.mobile="",r.agentCode=this.form.clientId,r.mapURL=r.mapURL,r.lat=r.lat?r.lat.toString():"",r.lng=r.lng?r.lng.toString():"",r}submitFunished(){this.alertService.success(),this.modalService?.dismissAll()}OnSubmit(t=!1){this.ngxLoader.startLoader(this.operationLoader),!0===this.isEditForm?this.editEntity(t):this.registerEntity(t)}getFromClient(){this.form.agent.mobile||this.alertService.error("orderManagement.order.mustEnterNumber"),this.isLoad=!0,this.whatsupService.GetLocationFromClient(this.form.agent.mobile).pipe((0,R.Q)(this.notifier),(0,z.j)(()=>this.isLoad=!1)).subscribe(t=>{t.success?this.alertService.success("orderManagement.order.successSendLocation"):this.alertService.error("orderManagement.order.failSendLocation")},()=>{this.alertService.error("orderManagement.order.failSendLocation")})}DeleteConfirm(){this.baseService.DeleteLocation(this.idSelected).pipe((0,Y.O)(),(0,Z.c)(this.mainDelay),(0,ee.Z)(),(0,R.Q)(this.notifier),(0,z.j)(()=>this.ngxLoader.stopLoader("deleteLoader"))).subscribe(t=>{if(t.success){const r=this.form.locations.findIndex(n=>n.id===this.idSelected);-1!==r&&this.form.locations.splice(r,1),this.alertService.success(),this.modalService.dismissAll()}else this.alertService.error("general.message."+t)},()=>{this.alertService.error()})}getClientLocations(t){this.baseService.GetClientLocations(t).subscribe(r=>{this.form.locations=r.data,this.offerOrder.salesOrderForm.locations=r.data})}refresh(){this.getClientLocations(this.offerOrder.salesOrderForm.clientId),this.checkLocation()}locationChange(t){this.form.clientLocationId=t.id;let r=this.form.locations.find(n=>n.id==t.id);r.isSelected=!r.isSelected,this.offerOrder.salesOrderForm.clientLocationId=this.form.clientLocationId,this.offerOrder.checkValidationSource.next(!0)}checkSelected(t){this.offerOrder.checkValidationSource.next(!0),this.form.locations.find(n=>n.id==t).isSelected=!0}checkLocation(){this.offerOrder.checkValidationSource.next(!0)}ngOnDestroy(){this.notifier.next(),this.notifier.complete()}onUrlChange(t){let o=new URL(t.target.value).searchParams.get("q");if(o){let[p,c]=o.split(",").map(Number);this.formEdit.lat=p,this.formEdit.lng=c}}static{this.\u0275fac=function(r){return new(r||a)(e.rXU(O.Bq),e.rXU(Ht.X),e.rXU(ae.u),e.rXU(X.eD),e.rXU($n.A),e.rXU(uo.Q),e.rXU(Ve.h),e.rXU(Oe))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["client-location-salse"]],viewQuery:function(r,n){if(1&r&&e.GBs(O.X9,5),2&r){let o;e.mGM(o=e.lsd())&&(n.nav=o.first)}},inputs:{form:"form",isOrderEdit:"isOrderEdit"},features:[e.Jv_([O.X9])],decls:17,vars:7,consts:[["content",""],["deleteModal",""],["formEntity","ngForm"],["cityCode","ngModel"],["name","ngModel"],["address","ngModel"],["mapURL","ngModel"],["lat","ngModel"],["lng","ngModel"],[1,"mt-4"],[1,"row"],[1,"col-12","col-md-6"],["for","name","translate","",1,"fw-bold","form-label"],["name","clientVisitDate","type","text","mwlFlatpickr","","altFormat","d-m-Y H:i",1,"form-control","flatpickr-input",3,"ngModelChange","ngModel","altInput","enableTime","convertModelValue","dateFormat"],[1,"d-flex","align-items-center","mb-2"],[1,"flex-grow-1"],["translate","orderManagement.order.savedAddress",1,"fs-4","mb-0"],[1,"flex-shrink-0"],["type","button","translate","orderManagement.order.sendToClient",1,"btn","fs-4","btn-sm","btn-success","mb-1",3,"click","disabled"],[1,"row","gy-3"],[4,"ngFor","ngForOf"],[1,"col-lg-4","col-sm-6"],[1,"form-check","card-radio"],["name","location","type","radio",1,"form-check-input",3,"change","id","checked"],[1,"form-check-label",3,"for"],[1,"mb-4","fw-bold","d-block","text-muted","text-uppercase"],[1,"text-muted","fw-normal","text-wrap","mb-1","d-block"],[1,"d-flex","flex-wrap","p-2","py-1","bg-light","rounded-bottom","border","mt-n1"],["href","javascript:void(0);","data-bs-toggle","modal","data-bs-target","#addAddressModal",1,"d-block","text-body","p-1","px-2",3,"click"],[1,"ri-pencil-fill","text-muted","align-bottom","me-1"],["translate","general.action.edit"],["href","javascript:void(0);","data-bs-toggle","modal","data-bs-target","#removeItemModal",1,"d-block","text-body","p-1","px-2",3,"click"],[1,"ri-delete-bin-fill","text-muted","align-bottom","me-1"],["translate","general.action.delete"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["class","fw-bold fs-4","translate","",4,"ngIf"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"hasProgressBar","fgsType","loaderId"],[3,"submit"],[1,"mb-1"],["for","name","translate","orderManagement.order.cityName",1,"required","fw-bold","form-label"],["name","cityCode","id","cityCode","bindValue","code","bindLabel","name",3,"ngModelChange","ngModel","placeholder","items","multiple"],["for","name","translate","orderManagement.order.name",1,"required","fw-bold","form-label"],["InputTirmFilter","","name","name","type","text","id","name","required","",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],["for","address","translate","orderManagement.order.address",1,"fw-bold","form-label"],["rows","2","InputTirmFilter","","name","address","type","text","id","address",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["for","mapURL","translate","orderManagement.order.mapURL",1,"fw-bold","form-label"],["InputTirmFilter","","name","mapURL","type","text","id","mapURL",1,"form-control","fs-6",3,"change","ngModelChange","ngModel"],[1,"row","my-2"],["for","lat","translate","orderManagement.order.lat",1,"fw-bold","form-label"],["disabled","","InputTirmFilter","","name","lat","type","text","id","lat",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["for","lng","translate","orderManagement.order.lng",1,"fw-bold","form-label"],["disabled","","InputTirmFilter","","name","lng","type","text","id","lng",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,"text-center"],["type","submit","type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],["translate","",1,"fw-bold","fs-4"],["translate","",1,"text-danger","text-center"],[3,"deleteConfirm","dismiss"]],template:function(r,n){if(1&r){const o=e.RV6();e.j41(0,"div",9)(1,"div",10)(2,"div",11)(3,"label",12),e.EFF(4,"sales.salesOrder.acutalVisitDate"),e.k0s(),e.j41(5,"input",13),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.form.clientVisitDate,c)||(n.form.clientVisitDate=c),e.Njj(c)}),e.k0s()()(),e.j41(6,"div",14)(7,"div",15),e.nrm(8,"h3",16),e.k0s(),e.j41(9,"div",17)(10,"button",18),e.bIt("click",function(){e.eBV(o);const c=e.sdS(14);return e.Njj(n.openModal(c))}),e.k0s()()(),e.j41(11,"div",19),e.DNE(12,rs,18,8,"ng-container",20),e.k0s()(),e.DNE(13,ss,42,19,"ng-template",null,0,e.C5r)(15,_o,1,0,"ng-template",null,1,e.C5r)}2&r&&(e.R7$(5),e.R50("ngModel",n.form.clientVisitDate),e.Y8G("altInput",!0)("enableTime",!0)("convertModelValue",!0)("dateFormat","d-m-Y H:i"),e.R7$(5),e.Y8G("disabled",n.isLoad),e.R7$(2),e.Y8G("ngForOf",n.form.locations))},dependencies:[k.Sq,k.bT,g.qT,g.me,g.BC,g.cb,g.YS,g.vS,g.cV,F.Mm,ke.m,ve.vr,fe.kL,X.Cv,Ke.w,F.D9],encapsulation:2})}}return a})();function Pn(a,m){if(1&a&&(e.j41(0,"h3",9),e.nrm(1,"span",10),e.j41(2,"a",11),e.EFF(3),e.k0s()()),2&a){const t=e.XpG();e.R7$(3),e.SpI("#SO#",t.orderCode,"")}}let li=(()=>{class a{constructor(){this.form={},this.orderCode=0,this.statusOrder=0,this.newOrder=new e.bkB,this.editOrderActiveTab=new e.bkB}ngOnDestroy(){}ngOnInit(){}newOrderAgain(){this.newOrder.next(!0)}static{this.\u0275fac=function(r){return new(r||a)}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-finish-order-salse"]],inputs:{form:"form",orderCode:"orderCode",statusOrder:"statusOrder"},outputs:{newOrder:"newOrder",editOrderActiveTab:"editOrderActiveTab"},decls:9,vars:1,consts:[[1,"text-center","py-5"],[1,"mb-4"],["src","https://cdn.lordicon.com/lupuorrc.json","trigger","loop","colors","primary:#0ab39c,secondary:#405189",2,"width","120px","height","120px"],["translate","orderManagement.order.orderSaveSuccess"],["class","fw-semibold",4,"ngIf"],[1,"d-flex","align-items-start","gap-3","mt-4"],["type","button","data-nexttab","pills-finish-tab",1,"btn","btn-primary","btn-label","right","ms-auto","nexttab",3,"click"],[1,"ri-chat-new-line","label-icon","align-middle","fs-16","ms-2"],["translate","orderManagement.order.newOrderAgain"],[1,"fw-semibold"],["translate","orderManagement.order.orderCode"],["routerLink","/ecommerce/order-details",1,"text-decoration-underline"]],template:function(r,n){1&r&&(e.j41(0,"div",0)(1,"div",1),e.nrm(2,"lord-icon",2),e.k0s(),e.nrm(3,"h5",3),e.DNE(4,Pn,4,1,"h3",4),e.k0s(),e.j41(5,"div",5)(6,"button",6),e.bIt("click",function(){return n.newOrderAgain()}),e.nrm(7,"i",7)(8,"span",8),e.k0s()()),2&r&&(e.R7$(4),e.Y8G("ngIf",10==n.statusOrder))},dependencies:[k.bT,F.Mm,$.Wk],encapsulation:2})}}return a})();const ho=a=>({" border-service ":a});function An(a,m){if(1&a){const t=e.RV6();e.j41(0,"button",19),e.bIt("click",function(){const n=e.eBV(t).$implicit,o=e.XpG();return e.Njj(o.chooseCategory(n))}),e.EFF(1),e.k0s()}if(2&a){const t=m.$implicit;e.AVh("active",!0===t.isSelected)("btn-primary",!0===t.isSelected)("btn-outline-primary",!0!==t.isSelected),e.R7$(),e.SpI(" ",t.name," ")}}function fo(a,m){if(1&a&&(e.j41(0,"span",20),e.EFF(1),e.k0s()),2&a){const t=e.XpG();e.R7$(),e.JRh(t.seviceCount)}}function Yn(a,m){1&a&&(e.j41(0,"div",21),e.nrm(1,"button",22),e.k0s())}function vn(a,m){if(1&a){const t=e.RV6();e.qex(0),e.j41(1,"div",23)(2,"div",24)(3,"div",25),e.bIt("click",function(n){const o=e.eBV(t).$implicit,p=e.XpG();return e.Njj(p.onServiceChange(o.id,n))}),e.j41(4,"div",26)(5,"div",27),e.nrm(6,"img",28),e.k0s(),e.j41(7,"div",29)(8,"h5",30),e.EFF(9),e.k0s()()(),e.j41(10,"div",31),e.nrm(11,"div",32),e.j41(12,"div",33),e.EFF(13),e.k0s()(),e.j41(14,"div",31),e.nrm(15,"div",34),e.j41(16,"div",35),e.EFF(17),e.k0s()(),e.j41(18,"div",31),e.nrm(19,"div",36),e.j41(20,"div",35),e.EFF(21),e.k0s()(),e.j41(22,"div",31),e.nrm(23,"div",37),e.j41(24,"div",35),e.EFF(25),e.nI1(26,"translate"),e.k0s()()(),e.j41(27,"div",31),e.nrm(28,"div",38),e.j41(29,"div",35)(30,"ng-select",39),e.bIt("change",function(n){const o=e.eBV(t).$implicit,p=e.XpG();return e.Njj(p.unitChange(o,n))}),e.mxI("ngModelChange",function(n){const o=e.eBV(t).$implicit;return e.DH7(o.unitId,n)||(o.unitId=n),e.Njj(n)}),e.k0s()()()()(),e.bVm()}if(2&a){const t=m.$implicit,r=e.XpG();e.R7$(2),e.Y8G("ngClass",e.eq3(13,ho,t.isSelected)),e.R7$(4),e.Y8G("src",r.serverImage+t.image,e.B4B),e.R7$(3),e.JRh(t.name),e.R7$(4),e.SpI(" ",t.categoryName," "),e.R7$(4),e.JRh(t.stock),e.R7$(4),e.JRh(t.status),e.R7$(4),e.Lme(" ",t.price," ",e.bMT(26,11,"orderManagement.order.currancy")," "),e.R7$(5),e.Y8G("clearable",!1)("items",t.units),e.R50("ngModel",t.unitId)}}let zi=(()=>{class a{constructor(t,r){this.translateService=t,this.offerOrder=r,this.form={},this.selectedServices=[],this.notifier=new dt.B,this.mainDelay=100,this.loaderSearchShap=M.cX,this.loaderOperationShap=M.$$,this.operationLoader=M.ZW,this.isEditForm=!1,this.showEdit=!1,this.serviceCategories=[],this.services=[],this.currentLang=this.translateService.currentLang,this.subtotal=0,this.total=0,this.serverImage=Je.c.mediaUrl,this.filteredServices=[],this.seviceCount=0,this.serviceSelected=[],this.allItems=this.getTranslationText("basicData.item.allItems"),this.CalcTotal=new e.bkB,this.isOrderEdit=!0,this.productsLookUp=[],this.init=0,this.responsiveOptions=[{breakpoint:"1400px",numVisible:4,numScroll:3},{breakpoint:"1220px",numVisible:4,numScroll:2},{breakpoint:"1100px",numVisible:4,numScroll:1}]}ngOnDestroy(){this.notifier.next(),this.notifier.complete()}ngOnInit(){this.getCategory(),this.getServicesByCategory(),this.offerOrder.removeServiceQ.pipe((0,R.Q)(this.notifier)).subscribe(t=>{if(0==this.init)return void(this.init=1);const r=this.filteredServices[t];r&&(r.isSelected=!r.isSelected),this.seviceCount=this.filteredServices.filter(n=>n.isSelected).length})}getCategory(){let t=this.offerOrder.salesOrderForm.serviceCategoryCode;this.serviceCategories=this.productsLookUp.categories,this.serviceCategories=this.serviceCategories.map(r=>({...r,isSelected:r.id===t}))}addService(t){const r=this.form.items.findIndex(n=>n.itemId===t.id);r>-1?this.form.items.splice(r,1):this.form.items.push({itemGroup:null,itemName:t.name,itemId:t.id,image:t.image,description:t.description,unitId:t.units[0].id,units:t.units,quantity:t.quantity,priceUnit:t.units[0].price,discount:0,discountType:1,price:t.units[0].price,net:t.price*t.quantity}),this.checkTotal(),this.offerOrder.checkValidationSource.next(!0)}updatePrice(t){const r=this.form.orderServices.find(n=>n.serviceCode===t.code);r.quantity=t.quantity,r.price=t.price}checkTotal(){this.CalcTotal.next(!0)}deleteService(t){this.form.orderServices.splice(t,1)}deletePayment(t){this.form.orderPayments.splice(t,1)}resetServiceForm(){let t=this.form.formServices;t.serviceCode=void 0,t.price=null,t.notes=null}resetPaymentForm(){let t=this.form.formPayment;t.paymentTypeCode=null,t.value=null,t.attachRecietPath=null,t.fileName=null}configRoute(){}getServicesByCategory(){this.services=this.setupUnit(this.productsLookUp.servies),this.filteredServices=this.services}setupUnit(t){return t.forEach(r=>{r.units.length>0&&(r.unitId=r.units[0].id,r.price=r.units[0].price)}),t}unitChange(t,r){if(!t.isSelected)return;let n=this.form.items.find(p=>p.itemId===t.id),o=this.filteredServices.find(p=>p.id===t.id);n.unitId=r.id,n.unitPrice=r.price,n.price=r.price,o.unitPrice=r.price,o.price=r.price,o.unitId=r.id,this.checkTotal()}checkSelected(){this.form.items.forEach(t=>{let r=this.filteredServices.find(n=>n.id===t.itemId);r&&(r.isSelected=!0)})}getTranslationText(t){let r="";return this.translateService.get(t).pipe((0,R.Q)(this.notifier)).subscribe(n=>{r=n}),r}onTimeSelected(t){this.form.orderTeams=t}chooseCategory(t){this.serviceCategories=this.serviceCategories.map(r=>({...r,isSelected:r.id===t.id})),this.offerOrder.salesOrderForm.serviceCategoryCode=t.id,this.filteredServices=0==t.id?this.services:this.services?.filter(r=>r?.categoryId===t?.id)??[]}onServiceChange(t,r){r.stopPropagation();const n=this.filteredServices.find(o=>o.id===t);n&&(n.isSelected=!n.isSelected),this.seviceCount=this.filteredServices.filter(o=>o.isSelected).length,this.addService(n)}btnPlus(t,r){r.stopPropagation();const n=this.filteredServices.find(o=>o.code===t);n&&(n.quantity++,this.updatePrice(n),this.checkTotal())}btnMinus(t,r){r.stopPropagation();const n=this.filteredServices.find(o=>o.code===t);n&&n.quantity>1?n.quantity-=1:n.quantity=1,this.updatePrice(n),this.checkTotal()}searchChange(t){const r=t.target.value.toLowerCase();this.filteredServices=""===r?[...this.services]:this.services.filter(n=>n.name.toLowerCase().includes(r)||n.sku.toLowerCase().includes(r))}static{this.\u0275fac=function(r){return new(r||a)(e.rXU(F.c$),e.rXU(Oe))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["order-products"]],inputs:{form:"form",serviceCategories:"serviceCategories",isOrderEdit:"isOrderEdit",productsLookUp:"productsLookUp"},outputs:{CalcTotal:"CalcTotal"},decls:25,vars:13,consts:[[1,"service-container"],[1,"mt-2"],[1,"p-3"],[1,"fw-bold","mb-3"],[1,"categories-slider-container"],[1,"categories-slider"],["class","btn btn-lg rounded-pill",3,"active","btn-primary","btn-outline-primary","click",4,"ngFor","ngForOf"],[1,"row","justify-content-center","align-items-center","border-bottom"],[1,"col-12","col-md-12","mx-5"],[1,"search-box","mb-3"],["type","search","id","filterValue","name","filterValue",1,"form-control","search","bg-light","rounded-pill",3,"keyup","placeholder"],[1,"ri-search-line","search-icon"],[1,"row","justify-content-between","align-items-center"],[1,"col-12","col-md-5"],[1,"mb-0","d-inline-block","position-relative"],["class","badge bg-primary mx-1",4,"ngIf"],["class","d-flex justify-content-center",4,"ngIf"],[1,"mt-3","row","row-cols-3"],[4,"ngFor","ngForOf"],[1,"btn","btn-lg","rounded-pill",3,"click"],[1,"badge","bg-primary","mx-1"],[1,"d-flex","justify-content-center"],["type","button","translate","orderManagement.order.noProduct",1,"btn","btn-sm","my-2","btn-danger","fs-4","mb-3"],[1,"col-12","col-md-4","text-center"],[1,"card","card-service","card-body",3,"ngClass"],[1,"row",3,"click"],[1,"row","align-items-center","p-0"],[1,"col-12","col-md-6"],["onerror","this.onerror=null;this.src='assets/images/custom/no-img.jpg';",1,"avatar-sm",2,"width","100%","height","120px",3,"src"],[1,"col-12","col-md-6","2"],[1,"card-title","mb-1"],[1,"row","p-1"],["translate","sales.salesOrder.category",1,"col-12","col-md-5","m-0","text-left"],[1,"col-12","col-md-7","m-0"],["translate","sales.salesOrder.stock",1,"col-12","col-md-5","text-left"],[1,"col-12","col-md-7"],["translate","sales.salesOrder.status",1,"col-12","col-md-5","text-left"],["translate","sales.salesOrder.price",1,"col-12","col-md-5","text-left"],["translate","sales.salesOrder.unit",1,"col-12","col-md-5","text-left"],["bindValue","id","bindLabel","name",2,"width","100%",3,"change","ngModelChange","clearable","items","ngModel"]],template:function(r,n){1&r&&(e.j41(0,"div",0)(1,"div",1)(2,"bdi")(3,"div",2)(4,"h4",3),e.EFF(5),e.nI1(6,"translate"),e.k0s(),e.j41(7,"div",4)(8,"div",5),e.DNE(9,An,2,7,"button",6),e.k0s()()()()(),e.j41(10,"div",7)(11,"div",8)(12,"div",9)(13,"input",10),e.nI1(14,"translate"),e.bIt("keyup",function(p){return n.searchChange(p)}),e.k0s(),e.nrm(15,"i",11),e.k0s()()(),e.j41(16,"div",12)(17,"div",13)(18,"h4",14),e.EFF(19),e.nI1(20,"translate"),e.k0s(),e.DNE(21,fo,2,1,"span",15),e.k0s()(),e.DNE(22,Yn,2,0,"div",16),e.j41(23,"div",17),e.DNE(24,vn,31,15,"ng-container",18),e.k0s()()),2&r&&(e.R7$(5),e.SpI(" ",e.bMT(6,7,"orderManagement.order.serviceProduct")," "),e.R7$(4),e.Y8G("ngForOf",n.serviceCategories),e.R7$(4),e.FS9("placeholder",e.bMT(14,9,"orderManagement.order.searchProduct")),e.R7$(6),e.SpI(" ",e.bMT(20,11,"orderManagement.order.selectedProducts")," "),e.R7$(2),e.Y8G("ngIf",n.seviceCount>0),e.R7$(),e.Y8G("ngIf",0==n.filteredServices.length),e.R7$(2),e.Y8G("ngForOf",n.filteredServices))},dependencies:[k.YU,k.Sq,k.bT,g.BC,g.vS,F.Mm,ve.vr,F.D9],styles:[".categories-slider-container[_ngcontent-%COMP%]{width:100%;overflow-x:auto;padding-bottom:10px}.categories-slider-container[_ngcontent-%COMP%]::-webkit-scrollbar{height:6px}.categories-slider-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:10px}.categories-slider-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:10px}.categories-slider-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}.categories-slider-container[_ngcontent-%COMP%]{width:100%;overflow-x:auto;-ms-overflow-style:none;scrollbar-width:none;padding-bottom:1px}.categories-slider-container[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.categories-slider[_ngcontent-%COMP%]{display:flex;gap:8px;padding:5px 0;width:max-content}"]})}}return a})();const Ji=()=>["salesOrder.editTotalDiscont"];function Wi(a,m){if(1&a){const t=e.RV6();e.j41(0,"app-client-info-salse",60),e.bIt("calacTotal",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.checkTotal())})("setFormByOrderCode",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.setFormByOrderCode(n))}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("isOrderEdit",t.isOrderEdit)("isInner",t.isInner)("clientInfo",t.clientInfo)("form",t.form)}}function Ki(a,m){if(1&a){const t=e.RV6();e.j41(0,"order-products",61),e.bIt("CalcTotal",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.checkTotal())}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("isOrderEdit",t.isOrderEdit)("productsLookUp",t.productsLookUp)("form",t.form)}}function Zi(a,m){if(1&a&&e.nrm(0,"client-location-salse",62),2&a){const t=e.XpG();e.Y8G("isOrderEdit",t.isOrderEdit)("form",t.form)}}function er(a,m){if(1&a){const t=e.RV6();e.j41(0,"app-finish-order-salse",63),e.bIt("editOrderActiveTab",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.editOrder())})("newOrder",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.newOrder())}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("statusOrder",t.statusOrder)("orderCode",t.orderCode)("form",t.form)}}function tr(a,m){if(1&a){const t=e.RV6();e.j41(0,"button",64),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.back())}),e.nrm(1,"i",65)(2,"span",66),e.k0s()}}function nr(a,m){if(1&a){const t=e.RV6();e.j41(0,"button",67),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.next())}),e.nrm(1,"i",68)(2,"span",69),e.k0s()}}function ir(a,m){if(1&a){const t=e.RV6();e.j41(0,"li",77),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.orderFinished())}),e.j41(1,"span",78),e.nrm(2,"i",79)(3,"span",80),e.k0s()()}}function bo(a,m){if(1&a){const t=e.RV6();e.j41(0,"li",77),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.orderFinished(0))}),e.j41(1,"span",78),e.nrm(2,"i",81)(3,"span",82),e.k0s()()}}function vo(a,m){if(1&a){const t=e.RV6();e.j41(0,"li",77),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2),o=e.sdS(128);return e.Njj(n.openModalRequest(o))}),e.j41(1,"span",78),e.nrm(2,"i",83)(3,"span",84),e.k0s()()}}function Co(a,m){if(1&a&&(e.j41(0,"div",30)(1,"span",70)(2,"div",71)(3,"button",72),e.nrm(4,"i",73)(5,"span",74),e.k0s(),e.j41(6,"ul",75),e.DNE(7,ir,4,0,"li",76)(8,bo,4,0,"li",76)(9,vo,4,0,"li",76),e.k0s()()()()),2&a){const t=e.XpG();e.R7$(7),e.Y8G("ngIf",t.form.creditLimit>t.VATTotal),e.R7$(),e.Y8G("ngIf",t.form.creditLimit<t.VATTotal),e.R7$(),e.Y8G("ngIf",t.form.creditLimit<t.VATTotal)}}function as(a,m){if(1&a){const t=e.RV6();e.qex(0),e.j41(1,"tr")(2,"td")(3,"div",86),e.nrm(4,"img",87),e.k0s()(),e.j41(5,"td")(6,"h5",88)(7,"a",89),e.bIt("click",function(){const n=e.eBV(t).$implicit,o=e.XpG(2);return e.Njj(o.goEdit(n.itemId))}),e.EFF(8),e.k0s()(),e.j41(9,"p",90),e.EFF(10),e.nI1(11,"translate"),e.k0s(),e.j41(12,"div",91)(13,"div",92)(14,"button",93),e.bIt("click",function(){const n=e.eBV(t).$implicit,o=e.XpG(2);return e.Njj(o.decrement(n))}),e.EFF(15," \u2013 "),e.k0s(),e.j41(16,"input",94),e.bIt("change",function(n){const o=e.eBV(t).$implicit,p=e.XpG(2);return e.Njj(p.quantityChange(n,o))}),e.k0s(),e.j41(17,"button",95),e.bIt("click",function(){const n=e.eBV(t).$implicit,o=e.XpG(2);return e.Njj(o.increment(n))}),e.EFF(18," + "),e.k0s()()()(),e.j41(19,"td"),e.EFF(20),e.nI1(21,"translate"),e.j41(22,"div",96)(23,"i",97),e.bIt("click",function(){const n=e.eBV(t).index,o=e.XpG(2);return o.removeService(n),e.Njj(o.checkTotal())}),e.k0s()()()(),e.bVm()}if(2&a){const t=m.$implicit,r=e.XpG(2);e.R7$(4),e.Y8G("src",r.serverImage+t.image,e.B4B),e.R7$(4),e.JRh(t.itemName),e.R7$(2),e.E5c(" ",t.price," ",e.bMT(11,10,"orderManagement.order.currancy")," x ",t.quantity," "),e.R7$(6),e.Mz_("id","cart-",t.code,""),e.FS9("value",t.quantity),e.R7$(4),e.Lme(" ",t.price*t.quantity-t.discount," ",e.bMT(21,12,"orderManagement.order.currancy")," ")}}function os(a,m){if(1&a&&(e.qex(0),e.DNE(1,as,24,14,"ng-container",85),e.bVm()),2&a){const t=e.XpG();e.R7$(),e.Y8G("ngForOf",t.form.items)}}function So(a,m){1&a&&(e.j41(0,"tr")(1,"td",98)(2,"div",99)(3,"div",100)(4,"div",101),e.nrm(5,"i",102),e.k0s()(),e.j41(6,"h5",103),e.EFF(7),e.nI1(8,"translate"),e.k0s()()()()),2&a&&(e.R7$(7),e.JRh(e.bMT(8,1,"orderManagement.order.noProducts")))}function jo(a,m){1&a&&(e.j41(0,"tr")(1,"td",104),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"td",105),e.EFF(5,"0"),e.k0s()()),2&a&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"orderManagement.order.ServicePrice")," "))}function Io(a,m){if(1&a){const t=e.RV6();e.j41(0,"div",106)(1,"button",107),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"div",108),e.nI1(5,"translate"),e.j41(6,"input",109),e.bIt("change",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.checkPrecentageChange(n))}),e.k0s(),e.j41(7,"span",110),e.EFF(8,"%"),e.k0s()(),e.j41(9,"input",111,3),e.bIt("change",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.checkTotal())}),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.form.discountAmount,n)||(o.form.discountAmount=n),e.Njj(n)}),e.k0s()()}if(2&a){const t=e.XpG();e.R7$(2),e.SpI(" ",e.bMT(3,4,"orderManagement.order.Discount")," "),e.R7$(2),e.FS9("pTooltip",e.bMT(5,6,"orderManagement.order.discount")),e.R7$(2),e.Y8G("checked",t.form.isPrecentage),e.R7$(3),e.R50("ngModel",t.form.discountAmount)}}function yo(a,m){1&a&&(e.j41(0,"div",128),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function ls(a,m){if(1&a){const t=e.RV6();e.j41(0,"div",112)(1,"div",113)(2,"h4",38),e.nrm(3,"span",84),e.k0s(),e.j41(4,"button",114),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss("Cross click"))}),e.k0s()(),e.j41(5,"div",115),e.nrm(6,"ngx-ui-loader",116),e.j41(7,"form",117,0),e.bIt("submit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.OnRequestSubmit())}),e.j41(9,"div",118)(10,"label",119),e.EFF(11,"sales.clientCollection.cost"),e.k0s(),e.j41(12,"input",120,4),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.formRequest.cost,n)||(o.formRequest.cost=n),e.Njj(n)}),e.k0s(),e.DNE(14,yo,2,0,"div",121),e.k0s(),e.j41(15,"div",118)(16,"label",122),e.EFF(17,"sales.clientCollection.notes"),e.k0s(),e.j41(18,"textarea",123,5),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.formRequest.notes,n)||(o.formRequest.notes=n),e.Njj(n)}),e.k0s()(),e.j41(20,"div",124)(21,"button",125),e.nrm(22,"i",126)(23,"span",127),e.k0s()()()()()}if(2&a){const t=e.sdS(8),r=e.sdS(13),n=e.XpG();e.R7$(6),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderOperationShap)("loaderId",n.operationLoader),e.R7$(6),e.R50("ngModel",n.formRequest.cost),e.R7$(2),e.Y8G("ngIf",r.invalid&&r.touched),e.R7$(4),e.R50("ngModel",n.formRequest.notes),e.R7$(3),e.Y8G("disabled",!t.valid)}}let To=(()=>{class a{constructor(t,r,n,o,p,c,D,ne,re,oe){this.translateService=t,this.baseService=r,this.requestPersonSalesService=n,this.alertService=o,this.ngxLoader=p,this.datePipe=c,this.modalService=D,this.router=ne,this.clientService=re,this.serviceService=oe,this.editOrders="orderManagement.order.editOrders",this.addOrders="orderManagement.order.addOrders",this.titleOperation="orderManagement.order.titleOperation",this.keySelected="",this.active=1,this.language=this.translateService.currentLang,this.searchForm="",this.breadCrumbItems=[],this.serverImage=Je.c.mediaUrl,this.disabledStatus=!0,this.form={clientVisitDate:new Date,id:null,cityCode:0,clientLocationId:0,clientId:0,isUrgent:!1,notes:"",items:[],discountAmount:0,discountAmountAdd:0,total:0,agent:{},orderPayments:[],orderLocations:{},discountType:1,discountTypeAdd:1,isPrecentage:!0,isPrecentageAdd:!1,totalAddDiscountType:0,totalAddDiscount:0,creditLimit:0,terms:"",serviceCategoryCode:0},this.orderCode=0,this.mobile=0,this.cityCode=0,this.agentName="",this.pendingCode=0,this.isInner=!1,this.isOrderEdit=!0,this.idForm=0,this.totalPaid=0,this.priceModel=0,this.priceModelIndex=0,this.subtotal=0,this.paidTotal=0,this.VATTotal=0,this.beforeVatTotal=0,this.total=0,this.isResolveList=!0,this.extraDiscountCalc=!1,this.employeeGroups=[],this.notifier=new dt.B,this.mainDelay=100,this.loaderSearchShap=M.cX,this.loaderOperationShap=M.$$,this.operationLoader=M.ZW,this.isEditForm=!1,this.showEdit=!1,this.orderTypes=[],this.serviceCategories=[],this.services=[],this.paymentTypes=[],this.isFinished=!1,this.isUpdate=!1,this.isReopen=!1,this.formRequest={},this.statusOrder=10,this.clients=[],this.searchClient=new dt.B,this.clientParam={pageSize:50,pageNumber:1,search:""},this.loading=!1,this.productsLookUp=[],this.form=this.baseService.salesOrderForm}OpenChangInput(t,r){this.showEdit=!0,this.priceModel=r.price,this.priceModelIndex=t}ChangInput(){this.form.orderServices[`${this.priceModelIndex}`].price=this.priceModel,this.showEdit=!1}ngOnDestroy(){this.notifier.next(),this.notifier.complete()}ngOnInit(){localStorage.getItem("isReopen")&&(this.isReopen=!0),this.resetForm(),this.breadCrumbItems=[{label:"layout.sidebar.orders"},{label:"orderManagement.order.title",active:!0,url:"order/list"},{label:this.isEditForm?"general.action.edit":"general.action.register",active:!0}],this.checkTotal(),this.baseService.checkValidation.subscribe(r=>{this.checkdisableForm()}),this.form.clientId&&(this.getClientSearchDropdwon(this.form.clientId),this.getClientInfo(this.form.clientId)),this.searchClient.pipe((0,ze.B)(300),(0,Mt.F)(),(0,Me.n)(r=>this.loadClient(r))).subscribe()}GetServiceList(t){this.serviceService.GetServiceList(t).subscribe(r=>{r.data.categories.unshift({id:0,name:this.getTranslationText("general.table.all"),isSelected:!0}),this.productsLookUp=r.data})}getTranslationText(t){let r="";return this.translateService.get(t).pipe((0,R.Q)(this.notifier)).subscribe(n=>{r=n}),r}checkTotal(){this.subtotal=this.form.items.reduce((r,n)=>r+(n.price*n.quantity-n.discount||0),0),this.form.discountAmount<0&&(this.form.discountAmount=0),this.form.discountAmountAdd<0&&(this.form.discountAmountAdd=0);let t=0;this.form.isPrecentage?(this.form.discountAmount=this.form.discountAmount>100?100:this.form.discountAmount,t=this.subtotal-this.subtotal*(+this.form.discountAmount||0)*.01):t=this.subtotal-(+this.form.discountAmount||0),this.form.isPrecentageAdd?(this.form.discountAmountAdd=this.form.discountAmountAdd>100?100:this.form.discountAmountAdd,t-=this.subtotal*(+this.form.discountAmount||0)*.01):t-=+this.form.discountAmountAdd||0,this.beforeVatTotal=t,this.VATTotal=0==t?0:t+.15*t,this.form.total=this.total=this.VATTotal}setFormByOrderCode(t){this.form=t,this.checkTotal(),this.form.isFree&&(this.form.isPrecentage=!0,this.form.discountAmount=100)}onTimeSelected(t){this.form.visitDate=t.dataVisit,this.form.orderTeams=t.selectedTimes}onNavChange(t){2===t.nextId||3===t.nextId?this.baseService.salesOrderForm.clientId||(this.alertService.error("orderManagement.order.mustSelectClient"),t.preventDefault()):4===t.nextId?this.isFinished?this.active=t.nextId:t.preventDefault():this.active=t.nextId}changeTab(){}finishedOrder(t){this.isFinished=!0,this.orderCode=t,this.active=4,this.resetForm()}finishedUpdateOrder(t){this.isFinished=!0,this.orderCode=t,this.active=6}newOrder(){this.resetForm(),this.active=1,this.total=0,this.subtotal=0,this.isFinished=!1}editOrder(){this.active=1}resetForm(){this.form=this.baseService.salesOrderForm={clientVisitDate:new Date,id:null,clientLocationId:0,clientId:0,notes:"",items:[],discountAmount:0,discountAmountAdd:0,total:0,agent:{},orderLocations:{},discountType:1,discountTypeAdd:1,isPrecentage:!0,isPrecentageAdd:!1,totalAddDiscountType:0,totalAddDiscount:0,creditLimit:0,terms:"",serviceCategoryCode:0},this.clientInfo={}}removeService(t){this.form.items.splice(t,1),this.baseService.removeServiceQ.next(t)}updatePrice(t,r){this.form.items[r].price=t.price*t.quantity}decrement(t){let r=this.form.items.find(n=>n.itemId==t.itemId);r.quantity<=1||(r&&(r.quantity=r.quantity-1),this.checkTotal())}increment(t){let r=this.form.items.find(n=>n.itemId==t.itemId);r&&(r.quantity=r.quantity+1),this.checkTotal()}quantityChange(t,r){parseInt(t.target.value)<=0&&(this.form.orderServices.find(p=>p.serviceCode==r.serviceCode).quantity=1),this.checkTotal(),this.form.orderServices=[...this.form.orderServices]}checkPrecentageChange(t){this.form.isPrecentage=t.target.checked,this.checkTotal()}checkPrecentageAddChange(t){this.form.isPrecentageAdd=t.target.checked,this.checkTotal()}onIsFreeChange(t){t?(this.form.isPrecentage=!0,this.form.discountAmount=100):(this.form.isPrecentage=!1,this.form.discountAmount=0),this.checkTotal()}orderFinished(t=20){let r={id:0,clientId:this.form.clientId,clientVisitDate:this.datePipe.transform(this.form.clientVisitDate,"yyyy-MM-ddTHH:mm:ss.000"),offerOrderStatus:t,notes:this.form.notes,terms:this.form.terms,clientLocationId:this.form.clientLocationId,totalAddDiscount:this.form.discountAmount,totalAddDiscountType:this.form.isPrecentage?2:1,offerOrderDetails:this.form.items.map(n=>({discount:n.discount,discountType:n.discountType,itemId:n.itemId,clientQuantity:n.quantity,id:0,price:n.price,unitId:n.unitId}))};this.ngxLoader.startLoader("order"),this.baseService.register(r).subscribe(n=>{n.success?(this.ngxLoader.stopLoader("order"),this.statusOrder=t,this.orderCode=n.data.id,this.finishedOrder(n.data.id),this.subtotal=0,this.beforeVatTotal=0,this.VATTotal=0,this.alertService.success(),this.checkdisableForm()):(this.alertService.error(),this.ngxLoader.stopLoader("order"))},()=>{this.alertService.error(),this.ngxLoader.stopLoader("order")})}checkdisableForm(){let t=!1;null==this.form.clientId||0==this.form.clientId||null==this.form.clientId||null==this.form.clientLocationId||0==this.form.clientLocationId||null==this.form.clientLocationId||this.form.items.length<=0?t=!0:this.form.items.length>0?(this.form.items.forEach(r=>{0!=r.itemId||(t=!0)}),t=!!t):t=!1,this.disabledStatus=t}openModalRequest(t,r="md"){this.formRequest={id:0,clientId:this.form.clientId},this.modalService.open(t,{centered:!0,size:r})}OnRequestSubmit(){this.ngxLoader.start(this.operationLoader),this.requestPersonSalesService.register(this.formRequest).pipe((0,Y.O)(),(0,Z.c)(this.mainDelay),(0,ee.Z)(),(0,R.Q)(this.notifier),(0,z.j)(()=>this.ngxLoader.stopLoader(this.operationLoader)),(0,En.W)(t=>(0,Dn.$)(t))).subscribe(t=>{t.success?(this.alertService.success(),this.modalService.dismissAll()):this.alertService.error("general.message."+t.message)},t=>{this.alertService.error("general.message."+t)})}next(){const t=this.active+1;2!==t&&3!==t||this.baseService.salesOrderForm.clientId?4===t&&!this.isFinished||(this.active=Math.min(t,3)):this.alertService.error("orderManagement.order.mustSelectClient")}back(){let t=this.active-1;this.active=t<=0?1:t}goEdit(t){this.router.navigateByUrl("/basicData/products/edit",{state:{id:t}})}getClientSearchDropdwon(t){this.clientParam.search=t,this.clientParam.pageNumber=1,this.clientService.GetClientSearch(this.clientParam).subscribe(r=>{this.clients=r.data})}scrollClient(){this.clientParam.pageNumber=this.clientParam.pageNumber+1,this.clientService.GetClientSearch(this.clientParam).subscribe(t=>{this.clients=[...this.clients,...t.data]})}getClientInfo(t){null!=t&&(this.baseService.salesOrderForm.clientId=t,this.baseService.salesOrderForm.clientVisitDate=this.form.clientVisitDate,this.clientService.GetClientInfo(t).subscribe(r=>{this.form.creditLimit=r.data.creditLimit,this.baseService.salesOrderForm.terms=r.data.terms,this.baseService.salesOrderForm.clientGroupId=r.data.clientGroupId,this.baseService.checkValidationSource.next(!0),this.clientInfo=r.data,this.GetServiceList(this.baseService.salesOrderForm.clientGroupId),this.getClientLocations(t)}))}getClientDropdwon(t){return this.clientParam.search=t,this.clientParam.pageNumber=1,this.clientService.GetClientSearch(this.clientParam).pipe((0,Me.n)(r=>(this.clients=r.data,this.loading=!1,[])))}loadClient(t){return this.loading=!0,""==t||null==t?(this.loading=!1,(0,Vn.of)([])):this.getClientDropdwon(t)}getClientLocations(t){this.clientService.GetClientLocations(t).subscribe(r=>{this.form.locations=r.data,this.baseService.salesOrderForm.locations=r.data})}static{this.\u0275fac=function(r){return new(r||a)(e.rXU(F.c$),e.rXU(Oe),e.rXU(bn),e.rXU(ae.u),e.rXU(X.eD),e.rXU(k.vh),e.rXU(O.Bq),e.rXU($.Ix),e.rXU(Ht.X),e.rXU(is.N))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["sales-operation"]],inputs:{form:"form",orderCode:"orderCode",mobile:"mobile",cityCode:"cityCode",agentName:"agentName",pendingCode:"pendingCode",isInner:"isInner",isOrderEdit:"isOrderEdit",isReopen:"isReopen",clients:"clients"},decls:129,vars:88,consts:[["formEntity","ngForm"],["customNav","ngbNav"],["RequestModal",""],["discountAmount","ngModel"],["cost","ngModel"],["notes","ngModel"],[1,"row"],[1,"col-xl-8"],[1,"card"],[1,"card-body","checkout-tab"],[1,"row","my-2"],[1,"col-12"],["for","mobile","translate","",1,"fw-bold","form-label"],["bindLabel","displayName","bindValue","id","required","",3,"scrollToEnd","ngModelChange","virtualScroll","items","typeahead","loading","multiple","ngModel","disabled"],["fgsColor","rgba(255,255,255,0)",3,"loaderId"],[1,"step-arrow-nav"],["ngbNav","","role","tablist",1,"nav","nav-pills","nav-justified","custom-nav",3,"navChange","activeId"],[3,"ngbNavItem"],["ngbNavLink","","id","pills-bill-info-tab","data-bs-toggle","pill","data-bs-target","#pills-bill-info","role","tab","aria-controls","pills-bill-info","aria-selected","true","data-position","0",1,"nav-link","fs-15","p-3"],[1,"ri-user-3-fill","fs-16","p-2","bg-primary-subtle","text-primary","rounded-circle","align-middle","mx-2"],[1,"d-inline","mt-2"],["ngbNavContent",""],["ngbNavLink","","data-bs-toggle","tab","role","tab",1,"nav-link","fs-15","p-3"],[1,"ri-shopping-cart-fill","fs-16","p-2","bg-primary-subtle","text-primary","rounded-circle","align-middle","mx-2"],[1,"ri-user-location-fill","fs-16","p-2","bg-primary-subtle","text-primary","rounded-circle","align-middle","mx-2"],[1,"ri-check-double-fill","fs-16","p-2","bg-primary-subtle","text-primary","rounded-circle","align-middle","mx-2"],[1,"tab-content"],[3,"ngbNavOutlet"],[1,"card-footer","text-center",2,"padding","0.5rem","position","relative"],[1,"row","justify-content-center"],[1,"col-12","col-md-3"],["type","button","class","btn btn-primary btn-label waves-effect waves-light rounded-pill mx-1",3,"click",4,"ngIf"],["type","button","class","btn btn-primary btn-label waves-effect right waves-light rounded-pill",3,"click",4,"ngIf"],["class","col-12 col-md-3",4,"ngIf"],[1,"col-xl-4"],[1,"card-header"],[1,"d-flex"],[1,"flex-grow-1"],[1,"card-title","mb-0"],[1,"card-body"],[1,"table-responsive","table-card"],[1,"table","table-borderless","align-middle","mb-0"],[1,"table-light","text-muted"],["scope","col",2,"width","90px"],["scope","col"],["scope","col",1,"text-end"],[4,"ngIf"],["lass","py-0",2,"border-top","hsl(226, 36%, 80%) solid 1px !important"],["colspan","3"],[1,"d-flex","justify-content-between","align-items-center","mb-2"],[1,"w-75","fw-semibold"],[1,"w-25","fw-semibold","text-end"],["class","col-6 input-group",4,"hasPermission"],[1,"d-flex","justify-content-between","align-items-center"],[1,"fw-semibold"],[1,"fw-semibold","text-end"],[1,"table-active","py-0"],[1,"py-0",2,"border-top","hsl(226, 36%, 80%) solid 1px !important"],["colspan","2",1,"fw-semibold"],[1,"fw-semibold","text-end","text-danger"],[3,"calacTotal","setFormByOrderCode","isOrderEdit","isInner","clientInfo","form"],[3,"CalcTotal","isOrderEdit","productsLookUp","form"],[3,"isOrderEdit","form"],[3,"editOrderActiveTab","newOrder","statusOrder","orderCode","form"],["type","button",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill","mx-1",3,"click"],[1,"ri-arrow-left-circle-fill","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.back"],["type","button",1,"btn","btn-primary","btn-label","waves-effect","right","waves-light","rounded-pill",3,"click"],[1,"ri-arrow-right-circle-fill","label-icon","align-middle","rounded-pill","fs-16","ms-2"],["translate","general.action.next"],[1,"d-inline-block"],[1,"dropdown-custom","d-inline-block"],["type","button",1,"btn","dropbtn","btn-primary","btn-label","waves-effect","right","waves-light","rounded-pill"],[1,"ri-more-2-fill","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.actions"],[1,"dropdown-menu","dropdown-menu-end","dropdown-content",2,"left","0"],[3,"click",4,"ngIf"],[3,"click"],[1,"dropdown-item"],[1,"text-success","ri-add-box-fill","align-bottom","me-2"],["translate","orderManagement.order.orderSaved"],[1,"text-warning","ri-add-box-fill","align-bottom","me-2"],["translate","orderManagement.order.orderSavedAsDraft"],[1,"text-info","ri-add-box-fill","align-bottom","me-2"],["translate","sales.salesOrder.addRequestLimit"],[4,"ngFor","ngForOf"],[1,"avatar-md","bg-light","rounded","p-1"],["alt","",1,"img-fluid","d-block",3,"src"],[1,"fs-14"],["href","javascript: void(0);",1,"text-body",3,"click"],[1,"text-muted","mb-0"],[1,"col-12","col-md-4","text-mute","text-center"],[1,"input-step","my-2"],["type","button",1,"minus","btn-success",3,"click"],["disabled","","type","number","min","1","max","100",1,"product-quantity",3,"change","id","value"],["type","button",1,"plus","btn-success",3,"click"],[1,"col-12","col-md-4","text-mute","text-right"],[1,"ri-close-fill","text-danger","cursor-pointer",3,"click"],["colspan","3",1,"text-center","text-danger"],["id","empty-cart",1,"text-center","empty-cart",2,"display","block"],[1,"avatar-md","mx-auto","my-3"],[1,"avatar-title","bg-info-subtle","text-info","fs-36","rounded-circle"],[1,"bx","bx-cart"],[1,"mb-3","text-danger"],[1,"text-start","text-muted","fw-semibold"],["colspan","2",1,"text-end"],[1,"col-6","input-group"],["type","button",1,"btn","btn-danger"],["tooltipPosition","top",1,"input-group-text","d-inline",3,"pTooltip"],["type","checkbox","aria-label","Checkbox for following text input",1,"form-check-input",3,"change","checked"],[1,"p-1"],["min","0","InputTirmFilter","","name","discountAmount","type","text","id","discountAmount","required","",1,"form-control","text-right",3,"change","ngModelChange","ngModel"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"hasProgressBar","fgsType","loaderId"],[3,"submit"],[1,"mb-2"],["for","cost","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","cost","type","number","id","cost",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","text-danger text-center","translate","",4,"ngIf"],["for","notes","translate","",1,"fw-bold","form-label"],["rows","2","InputTirmFilter","","name","notes","type","text","id","notes",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,"text-center"],["type","submit","type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],["translate","",1,"text-danger","text-center"]],template:function(r,n){if(1&r){const o=e.RV6();e.j41(0,"div",6)(1,"div",7)(2,"div",8)(3,"div",9)(4,"div",10)(5,"div",11)(6,"label",12),e.EFF(7,"orderManagement.order.clientSearch"),e.k0s(),e.j41(8,"ng-select",13),e.bIt("scrollToEnd",function(){return e.eBV(o),e.Njj(n.scrollClient())}),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.form.clientId,c)||(n.form.clientId=c),e.Njj(c)}),e.bIt("ngModelChange",function(c){return e.eBV(o),e.Njj(n.getClientInfo(c))}),e.k0s()()(),e.nrm(9,"ngx-ui-loader",14),e.j41(10,"form",null,0)(12,"div",15)(13,"ul",16,1),e.bIt("navChange",function(c){return e.eBV(o),e.Njj(n.onNavChange(c))}),e.j41(15,"li",17)(16,"a",18),e.nrm(17,"i",19),e.j41(18,"span",20),e.EFF(19),e.nI1(20,"translate"),e.k0s()(),e.DNE(21,Wi,1,4,"ng-template",21),e.k0s(),e.j41(22,"li",17)(23,"a",22),e.nrm(24,"i",23),e.j41(25,"span",20),e.EFF(26),e.nI1(27,"translate"),e.k0s()(),e.DNE(28,Ki,1,3,"ng-template",21),e.k0s(),e.j41(29,"li",17)(30,"a",22),e.nrm(31,"i",24),e.j41(32,"span",20),e.EFF(33),e.nI1(34,"translate"),e.k0s()(),e.DNE(35,Zi,1,2,"ng-template",21),e.k0s(),e.j41(36,"li",17)(37,"a",22),e.nrm(38,"i",25),e.j41(39,"span",20),e.EFF(40),e.nI1(41,"translate"),e.k0s()(),e.DNE(42,er,1,3,"ng-template",21),e.k0s()(),e.j41(43,"div",26),e.nrm(44,"div",27),e.k0s()()()(),e.j41(45,"div",28)(46,"div",29)(47,"div",30),e.DNE(48,tr,3,0,"button",31),e.k0s(),e.j41(49,"div",30),e.DNE(50,nr,3,0,"button",32),e.k0s(),e.DNE(51,Co,10,3,"div",33),e.k0s()()()(),e.j41(52,"div",34)(53,"div",8)(54,"div",35)(55,"div",36)(56,"div",37)(57,"h5",38),e.EFF(58),e.nI1(59,"translate"),e.k0s()()()(),e.j41(60,"div",39)(61,"div",40)(62,"table",41)(63,"thead",42)(64,"tr")(65,"th",43),e.EFF(66),e.nI1(67,"translate"),e.k0s(),e.j41(68,"th",44),e.EFF(69),e.nI1(70,"translate"),e.k0s(),e.j41(71,"th",45),e.EFF(72),e.nI1(73,"translate"),e.k0s()()(),e.j41(74,"tbody"),e.DNE(75,os,2,1,"ng-container",46)(76,So,9,3,"tr",46)(77,jo,6,3,"tr",46),e.j41(78,"tr",47)(79,"td",48)(80,"div",49)(81,"div",50),e.EFF(82),e.nI1(83,"translate"),e.k0s(),e.j41(84,"div",51),e.EFF(85),e.nI1(86,"translate"),e.k0s()(),e.DNE(87,Io,11,8,"div",52),e.k0s()(),e.j41(88,"tr",47)(89,"td",48)(90,"div",53)(91,"div",54),e.EFF(92),e.nI1(93,"translate"),e.k0s(),e.j41(94,"div",55),e.EFF(95),e.nI1(96,"translate"),e.k0s()(),e.j41(97,"div",53)(98,"div",54),e.EFF(99),e.nI1(100,"translate"),e.k0s(),e.j41(101,"div",55),e.EFF(102),e.nI1(103,"translate"),e.k0s()(),e.j41(104,"div",53)(105,"div",54),e.EFF(106),e.nI1(107,"translate"),e.k0s(),e.j41(108,"div",55),e.EFF(109),e.nI1(110,"translate"),e.k0s()()()(),e.j41(111,"tr",56)(112,"td",48)(113,"div",49)(114,"div",54),e.EFF(115),e.nI1(116,"translate"),e.k0s(),e.j41(117,"div",55),e.EFF(118),e.nI1(119,"translate"),e.k0s()()()(),e.j41(120,"tr",57)(121,"td",58),e.EFF(122),e.nI1(123,"translate"),e.k0s(),e.j41(124,"td",59),e.EFF(125),e.nI1(126,"translate"),e.k0s()()()()()()()()(),e.DNE(127,ls,24,7,"ng-template",null,2,e.C5r)}if(2&r){const o=e.sdS(14);e.R7$(8),e.Y8G("virtualScroll",!0)("items",n.clients)("typeahead",n.searchClient)("loading",n.loading)("multiple",!1),e.R50("ngModel",n.form.clientId),e.Y8G("disabled",!n.isOrderEdit),e.R7$(),e.Y8G("loaderId","order"),e.R7$(4),e.Y8G("activeId",n.active),e.R7$(2),e.Y8G("ngbNavItem",1),e.R7$(4),e.SpI(" ",e.bMT(20,47,"orderManagement.order.clientInfo")," "),e.R7$(3),e.Y8G("ngbNavItem",2),e.R7$(4),e.SpI(" ",e.bMT(27,49,"orderManagement.order.items")," "),e.R7$(3),e.Y8G("ngbNavItem",3),e.R7$(4),e.SpI(" ",e.bMT(34,51,"orderManagement.order.shipping")," "),e.R7$(3),e.Y8G("ngbNavItem",4),e.R7$(4),e.SpI(" ",e.bMT(41,53,"orderManagement.order.finish")," "),e.R7$(4),e.Y8G("ngbNavOutlet",o),e.R7$(4),e.Y8G("ngIf",n.active>1),e.R7$(2),e.Y8G("ngIf",n.active<3),e.R7$(),e.Y8G("ngIf",!n.disabledStatus&&n.form.clientId>0),e.R7$(7),e.SpI(" ",e.bMT(59,55,"orderManagement.order.orderSummary")," "),e.R7$(8),e.JRh(e.bMT(67,57,"sales.salesOrder.product")),e.R7$(3),e.JRh(e.bMT(70,59,"sales.salesOrder.productInfo")),e.R7$(3),e.JRh(e.bMT(73,61,"sales.salesOrder.price")),e.R7$(3),e.Y8G("ngIf",n.form.items.length>0),e.R7$(),e.Y8G("ngIf",0==n.form.items.length),e.R7$(),e.Y8G("ngIf",0==n.form.items.length),e.R7$(5),e.SpI(" ",e.bMT(83,63,"orderManagement.order.SubTotal")," "),e.R7$(3),e.Lme(" ",n.subtotal," ",e.bMT(86,65,"orderManagement.order.currancy")," "),e.R7$(2),e.Y8G("hasPermission",e.lJ4(87,Ji)),e.R7$(5),e.SpI(" ",e.bMT(93,67,"orderManagement.order.PriceAfterDisaccount")," "),e.R7$(3),e.Lme(" ",n.beforeVatTotal.toFixed(2)," ",e.bMT(96,69,"orderManagement.order.currancy")," "),e.R7$(4),e.SpI(" ",e.bMT(100,71,"orderManagement.order.PriceBeforeVat")," "),e.R7$(3),e.Lme(" ",n.beforeVatTotal.toFixed(2)," ",e.bMT(103,73,"orderManagement.order.currancy")," "),e.R7$(4),e.SpI(" ",e.bMT(107,75,"orderManagement.order.tax")," (15%) "),e.R7$(3),e.Lme(" ",(n.VATTotal-n.beforeVatTotal).toFixed(2)," ",e.bMT(110,77,"orderManagement.order.currancy")," "),e.R7$(6),e.SpI(" ",e.bMT(116,79,"orderManagement.order.VAT")," "),e.R7$(3),e.Lme(" ",n.VATTotal.toFixed(2)," ",e.bMT(119,81,"orderManagement.order.currancy")," "),e.R7$(4),e.SpI(" ",e.bMT(123,83,"orderManagement.order.creditLimit"),": "),e.R7$(3),e.Lme(" ",n.form.creditLimit," ",e.bMT(126,85,"orderManagement.order.currancy")," ")}},dependencies:[k.Sq,k.bT,O.Um,O.X9,O.sy,O.Gx,O.Ri,O.WA,O.m_,g.qT,g.me,g.Q0,g.BC,g.cb,g.YS,g.vS,g.cV,F.Mm,ke.m,ye.p,ve.vr,X.Cv,et.m,Ln,jt,li,zi,F.D9],encapsulation:2})}}return a})(),xo=(()=>{class a{constructor(){this.breadCrumbItems=[],this.addOrders="orderManagement.order.addOrders"}ngOnInit(){}static{this.\u0275fac=function(r){return new(r||a)}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["order-register"]],decls:1,vars:0,template:function(r,n){1&r&&e.nrm(0,"sales-operation")},dependencies:[To],encapsulation:2})}}return a})();var It=x(56701),Cn=x(26364),Ee=x(75622);let rr=(()=>{class a extends We.d{constructor(t){super(t,Je.c.apiUrl+"ShippingTruck/")}static{this.\u0275fac=function(r){return new(r||a)(e.KVO(Ue.Qq))}}static{this.\u0275prov=e.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();var qe=x(91426),tt=x(53928),Le=x(40724),$e=x(88148),Be=x(91580),Xe=x(5779);const ko=()=>["salesSetting.register"],Ro=()=>["salesSetting.edit"],ds=()=>["salesSetting.delete"];function Mo(a,m){1&a&&(e.j41(0,"tr",25)(1,"th",26),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",27),e.nrm(4,"i",28),e.EFF(5," sales.shippingTruck.name "),e.k0s(),e.j41(6,"th",29),e.nrm(7,"i",28),e.EFF(8," sales.shippingTruck.truckNumber "),e.k0s(),e.j41(9,"th",30),e.nrm(10,"i",28),e.EFF(11," sales.shippingTruck.truckDriverName "),e.k0s(),e.j41(12,"th",31),e.EFF(13," sales.shippingTruck.cityName "),e.k0s(),e.j41(14,"th",32),e.nrm(15,"i",28),e.EFF(16," general.table.isActive "),e.k0s(),e.nrm(17,"th",31),e.k0s())}function Oo(a,m){if(1&a&&(e.qex(0),e.j41(1,"span",40),e.EFF(2),e.k0s(),e.bVm()),2&a){const t=m.$implicit;e.R7$(2),e.JRh(t.cityName)}}function Fo(a,m){1&a&&e.nrm(0,"span",41)}function wo(a,m){1&a&&e.nrm(0,"span",42)}function No(a,m){if(1&a&&(e.nrm(0,"i",43),e.EFF(1),e.nI1(2,"date"),e.nrm(3,"br")(4,"i",44),e.EFF(5),e.nI1(6,"date"),e.nrm(7,"br")(8,"i",45),e.EFF(9)),2&a){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.i5U(2,3,t.createdDate,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",e.i5U(6,6,t.updatedDate,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",t.creatorName," ")}}function Go(a,m){if(1&a){const t=e.RV6();e.j41(0,"button",46),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,o=e.XpG(),p=e.sdS(20);return e.Njj(o.EditModel(n.id,p))}),e.nrm(1,"i",47),e.k0s()}}function di(a,m){if(1&a){const t=e.RV6();e.j41(0,"button",48),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,o=e.XpG(),p=e.sdS(22);return e.Njj(o.openModal(n.id,p))}),e.nrm(1,"i",49),e.k0s()}}function Eo(a,m){if(1&a&&(e.j41(0,"tr",33)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.DNE(10,Oo,3,1,"ng-container",34),e.k0s(),e.j41(11,"td"),e.DNE(12,Fo,1,0,"span",35)(13,wo,1,0,"span",36),e.k0s(),e.j41(14,"td"),e.DNE(15,No,10,9,"ng-template",null,3,e.C5r),e.nrm(17,"i",37),e.DNE(18,Go,2,0,"button",38)(19,di,2,0,"button",39),e.k0s()()),2&a){const t=m.$implicit,r=m.rowIndex,n=e.sdS(16);e.R7$(2),e.JRh(r+1),e.R7$(2),e.JRh(t.name),e.R7$(2),e.JRh(t.truckNumber),e.R7$(2),e.JRh(t.truckDriverName),e.R7$(2),e.Y8G("ngForOf",t.cities),e.R7$(2),e.Y8G("ngIf",t.isActive),e.R7$(),e.Y8G("ngIf",!t.isActive),e.R7$(4),e.Y8G("ngbTooltip",n),e.R7$(),e.Y8G("hasPermission",e.lJ4(10,Ro)),e.R7$(),e.Y8G("hasPermission",e.lJ4(11,ds))}}function ci(a,m){1&a&&(e.j41(0,"div",50),e.EFF(1," general.table.noData "),e.k0s())}function Do(a,m){if(1&a){const t=e.RV6();e.j41(0,"div",51)(1,"div",52),e.nrm(2,"ngb-pagination-info",53),e.j41(3,"table-length",54),e.bIt("lengthChange",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",55)(5,"ngb-pagination",56),e.bIt("pageChange",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.pagination.pageNumber,n)||(o.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&a){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function Vo(a,m){1&a&&(e.j41(0,"span",82),e.EFF(1,"general.action.register "),e.k0s())}function Lo(a,m){1&a&&(e.j41(0,"span",82),e.EFF(1,"general.action.edit "),e.k0s())}function cs(a,m){1&a&&(e.j41(0,"div",83),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function ms(a,m){1&a&&(e.j41(0,"div",83),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function ps(a,m){1&a&&(e.j41(0,"div",83),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function $o(a,m){if(1&a){const t=e.RV6();e.j41(0,"div",57)(1,"div",58)(2,"h4",59),e.DNE(3,Vo,2,0,"span",60)(4,Lo,2,0,"span",60),e.j41(5,"span",61),e.EFF(6),e.k0s()(),e.j41(7,"button",62),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss("Cross click"))}),e.k0s()(),e.j41(8,"div",63),e.nrm(9,"ngx-ui-loader",18),e.j41(10,"form",64,4),e.bIt("submit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.OnSubmit())}),e.j41(12,"div",65)(13,"label",66),e.EFF(14,"sales.shippingTruck.name"),e.k0s(),e.j41(15,"input",67,5),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.form.name,n)||(o.form.name=n),e.Njj(n)}),e.k0s(),e.DNE(17,cs,2,0,"div",68),e.k0s(),e.j41(18,"div",65)(19,"label",69),e.EFF(20,"sales.shippingTruck.truckNumber"),e.k0s(),e.j41(21,"input",70,6),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.form.truckNumber,n)||(o.form.truckNumber=n),e.Njj(n)}),e.k0s(),e.DNE(23,ms,2,0,"div",68),e.k0s(),e.j41(24,"div",65)(25,"label",71),e.EFF(26,"sales.shippingTruck.driver"),e.k0s(),e.j41(27,"ng-select",72,7),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.form.truckDriverId,n)||(o.form.truckDriverId=n),e.Njj(n)}),e.k0s(),e.DNE(29,ps,2,0,"div",68),e.k0s(),e.j41(30,"div",73)(31,"label",71),e.EFF(32,"sales.shippingTruck.cities"),e.k0s(),e.j41(33,"ng-select",74),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.form.cities,n)||(o.form.cities=n),e.Njj(n)}),e.k0s()(),e.j41(34,"div",75)(35,"label",76),e.EFF(36,"general.table.isActive"),e.k0s(),e.j41(37,"p-inputSwitch",77),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.form.isActive,n)||(o.form.isActive=n),e.Njj(n)}),e.k0s()(),e.j41(38,"div",78)(39,"button",79),e.nrm(40,"i",80)(41,"span",81),e.k0s()()()()()}if(2&a){const t=e.sdS(11),r=e.sdS(16),n=e.sdS(22),o=e.sdS(28),p=e.XpG();e.R7$(3),e.Y8G("ngIf",!p.isEditForm),e.R7$(),e.Y8G("ngIf",p.isEditForm),e.R7$(2),e.JRh(p.titleOperation),e.R7$(3),e.Y8G("hasProgressBar",!1)("fgsType",p.loaderOperationShap)("loaderId",p.operationLoader),e.R7$(6),e.R50("ngModel",p.form.name),e.R7$(2),e.Y8G("ngIf",r.invalid&&r.touched),e.R7$(4),e.R50("ngModel",p.form.truckNumber),e.R7$(2),e.Y8G("ngIf",n.invalid&&n.touched),e.R7$(4),e.Y8G("items",p.employees)("multiple",!1),e.R50("ngModel",p.form.truckDriverId),e.R7$(2),e.Y8G("ngIf",o.invalid&&o.touched),e.R7$(4),e.Y8G("items",p.cities)("multiple",!0),e.R50("ngModel",p.form.cities),e.R7$(4),e.R50("ngModel",p.form.isActive),e.R7$(2),e.Y8G("disabled",!t.valid)}}function Bo(a,m){if(1&a){const t=e.RV6();e.j41(0,"delete-modal",84),e.bIt("deleteConfirm",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.DeleteConfirmSoft())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}}let Xo=(()=>{class a extends Ee.w{constructor(t,r,n,o,p,c,D,ne,re,oe,se){super(t,r,D,n,o,p,c),this.baseService=n,this.excelService=re,this.employeeService=oe,this.cityService=se,this.title="sales.shippingTruck.title",this.titleOperation="sales.shippingTruck.titleOperation",this.keySelected="",this.assignUsers=[],this.times=[],this.employees=[],this.searchForm={},this.cities=[],this.configRoute(),this.getEmployees(),this.getCities()}OnSearch(t){this.ngxLoader.startLoader(M.a7),this.loadentities()}onSearch(){this.ngxLoader.startLoader(M.a7),this.loadentities()}configRoute(){this.routerActive.data.pipe((0,R.Q)(this.notifier)).subscribe(t=>{this.entities=t.data.data,this.pagination.totalItems=t.data.totalItems},()=>{this.alertService.error()})}getEmployees(){this.employeeService.getDropDown().pipe((0,R.Q)(this.notifier)).subscribe(t=>{this.employees=t.data},()=>{this.alertService.error()})}getCities(){this.cityService.getDropDown().pipe((0,R.Q)(this.notifier)).subscribe(t=>{this.cities=t.data},()=>{this.alertService.error()})}mapExcel(){let t=[];return this.entities?.forEach(r=>{t.push({workTime:r.workTime,isActive:this.getTranslationText("general.table.active")})}),t}mapRegisterForm(t){let r={...t};return r.id=0,r.cities=r.cities.map(n=>({cityId:n,shippingTruckId:0})),r}mapForm(t){let r={...t};return r.cities=r.cities.map(n=>({cityId:n,shippingTruckId:r.id})),r}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,"Service Type",[])}editEntity(){let t=this.mapForm(this.form);this.baseService.editPut(t.id,t).pipe((0,Y.O)(),(0,Z.c)(this.mainDelay),(0,ee.Z)(),(0,R.Q)(this.notifier),(0,z.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(r=>{r.success?this.submitFunished():this.alertService.error("general.message."+r.message)},r=>{this.alertService.error("general.message."+r)})}static{this.\u0275fac=function(r){return new(r||a)(e.rXU($.nX),e.rXU(F.c$),e.rXU(rr),e.rXU(ae.u),e.rXU(k.vh),e.rXU(X.eD),e.rXU(O.Bq),e.rXU(e.gRc),e.rXU(qe.V),e.rXU(tt.O),e.rXU(Ve.h))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-shipping-trucks"]],features:[e.Vt3],decls:23,vars:18,consts:[["tableMaster",""],["operation",""],["deleteModal",""],["tooltipContent",""],["formEntity","ngForm"],["name","ngModel"],["truckNumber","ngModel"],["truckDriverId","ngModel"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],[3,"reset","search","addNew","addPermission","showExport","totalItems","title"],["control",""],[1,"col-md-3","mb-2"],[1,"search-box"],["InputTirmFilter","","type","search","id","filterValue","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],[1,"card-body"],[3,"hasProgressBar","fgsType","loaderId"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["translate","",2,"width",".5%"],["pSortableColumn","name","translate","",2,"width","10%"],[1,"ri-expand-up-down-line"],["pSortableColumn","truckNumber","translate","",2,"width","10%"],["pSortableColumn","truckDriverId","translate","",2,"width","10%"],["translate","",2,"width","10%"],["pSortableColumn","isActive","translate","",2,"width","8%"],[1,"fs-5"],[4,"ngFor","ngForOf"],["class","badge bg-success-subtle text-success p-2","translate","general.table.active",4,"ngIf"],["class","badge bg-danger-subtle text-danger p-2","translate","general.table.noActive",4,"ngIf"],["tooltipPosition","top",1,"mdi","mdi-cog-outline","text-muted","fs-16","align-middle","me-1",3,"ngbTooltip"],["class","btn btn-sm btn-soft-info edit-list mx-2",3,"click",4,"hasPermission"],["class","btn btn-sm btn-soft-danger remove-list",3,"click",4,"hasPermission"],[1,"badge","badge-pill","bg-primary","mx-1"],["translate","general.table.active",1,"badge","bg-success-subtle","text-success","p-2"],["translate","general.table.noActive",1,"badge","bg-danger-subtle","text-danger","p-2"],[1,"ri-history-fill","text-warning"],[1,"ri-history-fill","text-danger"],[1,"ri-user-location-fill","text-primary"],[1,"btn","btn-sm","btn-soft-info","edit-list","mx-2",3,"click"],[1,"ri-pencil-fill","align-bottom","mx-1"],[1,"btn","btn-sm","btn-soft-danger","remove-list",3,"click"],[1,"ri-delete-bin-5-fill","align-bottom"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["class","fw-bold fs-4","translate","",4,"ngIf"],["translate",""],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"submit"],[1,"mb-3"],["for","name","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","name","type","text","id","name",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],["for","truckNumber","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","truckNumber","type","text","id","truckNumber",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["translate","",1,"required","fw-bold","form-label","w-100"],["name","truckDriverId","bindValue","code","bindLabel","name","required","",3,"ngModelChange","items","multiple","ngModel"],[1,"col-12","mb-1"],["name","cities","bindValue","code","bindLabel","name",3,"ngModelChange","items","multiple","ngModel"],[1,"form-check"],["for","isActive","translate","",1,"fw-bold","form-label","w-100"],["name","isActive","inputId","isActive",3,"ngModelChange","ngModel"],[1,"text-center"],["type","submit","type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],["translate","",1,"fw-bold","fs-4"],["translate","",1,"text-danger","text-center"],[3,"deleteConfirm","dismiss"]],template:function(r,n){if(1&r){const o=e.RV6();e.j41(0,"div",8)(1,"div",9)(2,"div",10)(3,"base-filter",11),e.bIt("reset",function(){return e.eBV(o),e.Njj(n.onReset())})("search",function(){return e.eBV(o),e.Njj(n.onSearch())})("addNew",function(){e.eBV(o);const c=e.sdS(20);return e.Njj(n.openModalTitle(c,"md"))}),e.qex(4,12),e.j41(5,"div",13)(6,"div",14)(7,"input",15),e.nI1(8,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.pagination.filterValue,c)||(n.pagination.filterValue=c),e.Njj(c)}),e.k0s(),e.nrm(9,"i",16),e.k0s()(),e.bVm(),e.k0s(),e.j41(10,"div",17),e.nrm(11,"ngx-ui-loader",18),e.j41(12,"div",19)(13,"p-table",20,0),e.bIt("onLazyLoad",function(c){return e.eBV(o),e.Njj(n.tableChange(c))})("selectionChange",function(c){return e.eBV(o),e.Njj(n.onSelectionChange(c))}),e.DNE(15,Mo,18,0,"ng-template",21)(16,Eo,20,12,"ng-template",22),e.k0s()(),e.DNE(17,ci,2,0,"div",23)(18,Do,6,8,"div",24),e.k0s()()()(),e.DNE(19,$o,42,19,"ng-template",null,1,e.C5r)(21,Bo,1,0,"ng-template",null,2,e.C5r)}2&r&&(e.R7$(3),e.Y8G("addPermission",e.lJ4(17,ko))("showExport",!1)("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(4),e.FS9("placeholder",e.bMT(8,15,"task.tasklist.subject")),e.R50("ngModel",n.pagination.filterValue),e.R7$(4),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderSearchShap)("loaderId",n.searchLoader),e.R7$(2),e.Y8G("value",n.entities)("rows",n.pagination.pageSize)("lazy",!0)("totalRecords",n.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",n.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems>0))},dependencies:[k.Sq,k.bT,g.qT,g.me,g.BC,g.cb,g.YS,g.vS,g.cV,O.s5,Le.b,Ke.w,$e.p,Be.g,F.Mm,B.XI,Xe.Ei,B.Tg,Et.HW,X.Cv,ve.vr,O.md,ke.m,ye.p,k.vh,F.D9],encapsulation:2})}}return a})();function Po(a,m){1&a&&e.nrm(0,"app-shipping-trucks")}let us=(()=>{class a{constructor(){this.title="sales.salesSetting.title"}ngOnInit(){this.breadCrumbItems=[]}static{this.\u0275fac=function(r){return new(r||a)}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-sales-setting"]],decls:15,vars:7,consts:[["Arrow","ngbNav"],[3,"title","breadcrumbItems"],[1,"col-12"],[1,"card"],[1,"card-body"],["ngbNav","",1,"nav","nav-pills","arrow-navtabs","nav-success","bg-light","mb-3",3,"activeId"],[3,"ngbNavItem"],["ngbNavLink",""],[1,"d-block","d-sm-none"],[1,"mdi","mdi-home-variant"],["translate","sales.shippingTruck.title",1,"d-sm-block"],["ngbNavContent",""],[1,"tab-content","text-muted"],[3,"ngbNavOutlet"]],template:function(r,n){if(1&r&&(e.nrm(0,"app-breadcrumbs",1),e.nI1(1,"translate"),e.j41(2,"div",2)(3,"div",3)(4,"div",4)(5,"ul",5,0)(7,"li",6)(8,"a",7)(9,"span",8),e.nrm(10,"i",9),e.k0s(),e.nrm(11,"span",10),e.k0s(),e.DNE(12,Po,1,0,"ng-template",11),e.k0s()(),e.j41(13,"div",12),e.nrm(14,"div",13),e.k0s()()()()),2&r){const o=e.sdS(6);e.FS9("title",e.bMT(1,5,n.title)),e.Y8G("breadcrumbItems",n.breadCrumbItems),e.R7$(5),e.Y8G("activeId",1),e.R7$(2),e.Y8G("ngbNavItem",1),e.R7$(7),e.Y8G("ngbNavOutlet",o)}},dependencies:[O.Um,O.X9,O.sy,O.Gx,O.Ri,O.WA,O.m_,Cn.m,F.Mm,Xo,F.D9],encapsulation:2})}}return a})();var nt=x(62984),zt=x(70053),ct=x(35419);function Ao(a,m){1&a&&(e.j41(0,"p",18),e.nrm(1,"span",19),e.k0s())}function gs(a,m){if(1&a&&(e.j41(0,"span",20),e.nrm(1,"i",21),e.EFF(2),e.k0s()),2&a){const t=e.XpG();e.R7$(2),e.SpI(" ",t.client.clientName,"")}}function mi(a,m){1&a&&(e.j41(0,"p",18),e.nrm(1,"span",19),e.k0s())}function _s(a,m){if(1&a&&(e.j41(0,"span",22),e.nrm(1,"i",21),e.EFF(2),e.k0s()),2&a){const t=e.XpG();e.R7$(2),e.SpI(" ",t.client.creditLimit,"")}}function Yo(a,m){1&a&&(e.j41(0,"p",18),e.nrm(1,"span",23),e.k0s())}function hs(a,m){if(1&a&&(e.j41(0,"span",24),e.nrm(1,"i",21),e.EFF(2),e.nI1(3,"date"),e.k0s()),2&a){const t=e.XpG();e.R7$(2),e.SpI("",e.i5U(3,1,t.client.lastTransactionDate,"yyyy-MM-dd ")," ")}}function fs(a,m){1&a&&(e.j41(0,"p",18),e.nrm(1,"span",25),e.k0s())}function sr(a,m){if(1&a&&(e.j41(0,"span",26),e.nrm(1,"i",21),e.EFF(2),e.k0s()),2&a){const t=e.XpG();e.R7$(2),e.Lme(" ",t.client.clientQuantity," - ",t.client.clientInvoiceCost," ")}}function Uo(a,m){1&a&&(e.j41(0,"p",18),e.nrm(1,"span",27),e.k0s())}function bs(a,m){if(1&a&&(e.j41(0,"span",28),e.nrm(1,"i",21),e.EFF(2),e.k0s()),2&a){const t=e.XpG();e.R7$(2),e.SpI("",t.client.totalDebt," ")}}let Jt=(()=>{class a{constructor(t){this.clientService=t,this.dismiss=new e.bkB,this.clientId=0,this.client={},this.objectKeys=Object.keys}ngOnInit(){this.getClientSummary()}getClientSummary(){0!=this.clientId&&this.clientService.GetClientSummary(this.clientId).subscribe(t=>{this.client=t.data})}dismissFn(){this.dismiss.emit(!0)}static{this.\u0275fac=function(r){return new(r||a)(e.rXU(Ht.X))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["client-summary"]],inputs:{clientId:"clientId"},outputs:{dismiss:"dismiss"},decls:28,vars:10,consts:[[1,"modal-header"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","btn-close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"row","justify-content-between","my-2"],["translate","client.client.clientName",1,"col-12","col-md-6"],[1,"col-12","col-md-6"],["class","card-text placeholder-glow",4,"ngIf"],["class","badge badge-label bg-primary fs-5",4,"ngIf"],[1,"row","justify-content-between"],["translate","client.client.CreditLimit",1,"col-12","col-md-6"],["class","badge badge-label bg-warning fs-5",4,"ngIf"],[1,"row","my-2","justify-content-between"],["translate","client.client.lastTransactionDate",1,"col-12","col-md-6"],["class","badge badge-label bg-info fs-5",4,"ngIf"],["translate","client.client.numberInvoiceQuantity",1,"col-12","col-md-6"],["class","badge badge-label bg-success fs-5",4,"ngIf"],["translate","client.client.totalDebt",1,"col-12","col-md-6"],["class","badge badge-label bg-danger fs-5",4,"ngIf"],[1,"card-text","placeholder-glow"],[1,"placeholder","col-12","bg-primary"],[1,"badge","badge-label","bg-primary","fs-5"],[1,"mdi","mdi-circle-medium"],[1,"badge","badge-label","bg-warning","fs-5"],[1,"placeholder","col-12","bg-info"],[1,"badge","badge-label","bg-info","fs-5"],[1,"placeholder","col-12","bg-success"],[1,"badge","badge-label","bg-success","fs-5"],[1,"placeholder","col-12","bg-danger"],[1,"badge","badge-label","bg-danger","fs-5"]],template:function(r,n){1&r&&(e.j41(0,"div",0)(1,"button",1),e.bIt("click",function(){return n.dismissFn()}),e.k0s()(),e.j41(2,"div",2)(3,"div",3),e.nrm(4,"div",4),e.j41(5,"div",5),e.DNE(6,Ao,2,0,"p",6)(7,gs,3,1,"span",7),e.k0s()(),e.j41(8,"div",8),e.nrm(9,"div",9),e.j41(10,"div",5),e.DNE(11,mi,2,0,"p",6)(12,_s,3,1,"span",10),e.k0s()(),e.j41(13,"div",11),e.nrm(14,"div",12),e.j41(15,"div",5),e.DNE(16,Yo,2,0,"p",6)(17,hs,4,4,"span",13),e.k0s()(),e.j41(18,"div",8),e.nrm(19,"div",14),e.j41(20,"div",5),e.DNE(21,fs,2,0,"p",6)(22,sr,3,2,"span",15),e.k0s()(),e.j41(23,"div",11),e.nrm(24,"div",16),e.j41(25,"div",5),e.DNE(26,Uo,2,0,"p",6)(27,bs,3,1,"span",17),e.k0s()()()),2&r&&(e.R7$(6),e.Y8G("ngIf",!n.client.clientName),e.R7$(),e.Y8G("ngIf",n.client.clientName),e.R7$(4),e.Y8G("ngIf",!n.client.creditLimit),e.R7$(),e.Y8G("ngIf",n.client.creditLimit),e.R7$(4),e.Y8G("ngIf",!n.client.lastTransactionDate),e.R7$(),e.Y8G("ngIf",n.client.lastTransactionDate),e.R7$(4),e.Y8G("ngIf",!n.client.clientQuantity),e.R7$(),e.Y8G("ngIf",n.client.clientQuantity),e.R7$(4),e.Y8G("ngIf",!n.client.totalDebt),e.R7$(),e.Y8G("ngIf",n.client.totalDebt))},dependencies:[k.bT,F.Mm,k.vh],encapsulation:2})}}return a})();const Wt=a=>[a];function Sn(a,m){if(1&a&&(e.j41(0,"span"),e.nrm(1,"span",62),e.k0s()),2&a){const t=e.XpG(2);e.ZvI(" badge ",t.getStatus(t.form),""),e.R7$(),e.FS9("translate","sales.salesOrder."+t.form.offerOrderStatusName)}}function vs(a,m){if(1&a){const t=e.RV6();e.j41(0,"div",15)(1,"label",22),e.EFF(2,"sales.salesOrder.clientDeliveryDate"),e.k0s(),e.j41(3,"input",63),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG(2);return e.DH7(o.form.clientVisitDate,n)||(o.form.clientVisitDate=n),e.Njj(n)}),e.k0s()()}if(2&a){const t=e.XpG(2);e.R7$(3),e.R50("ngModel",t.form.clientVisitDate),e.Y8G("altInput",!0)("enableTime",!0)("convertModelValue",!0)("dateFormat","Y-m-d H:i")}}function Cs(a,m){if(1&a){const t=e.RV6();e.j41(0,"div",15),e.EFF(1),e.nrm(2,"label",64),e.j41(3,"ng-select",65),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG(2);return e.DH7(o.form.salsePersonId,n)||(o.form.salsePersonId=n),e.Njj(n)}),e.k0s()()}if(2&a){const t=e.XpG(2);e.R7$(),e.SpI(" ",t.form.offerOrderStatus," "),e.R7$(2),e.Y8G("disabled",t.isDraft)("items",t.employees),e.R50("ngModel",t.form.salsePersonId)}}function qo(a,m){if(1&a){const t=e.RV6();e.j41(0,"div",21)(1,"label",66),e.EFF(2,"sales.salesOrder.changeQuantityMessage"),e.k0s(),e.j41(3,"textarea",67,1),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG(2);return e.DH7(o.form.changeQuantityMessage,n)||(o.form.changeQuantityMessage=n),e.Njj(n)}),e.k0s()()}if(2&a){const t=e.XpG(2);e.R7$(3),e.Y8G("disabled",t.isDraft),e.R50("ngModel",t.form.changeQuantityMessage)}}function Ss(a,m){1&a&&e.nrm(0,"th",68)}function js(a,m){1&a&&e.nrm(0,"th",69)}function Is(a,m){1&a&&e.nrm(0,"th",70)}function ys(a,m){if(1&a){const t=e.RV6();e.j41(0,"td")(1,"input",77),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG().$implicit;return e.DH7(o.clientQuantity,n)||(o.clientQuantity=n),e.Njj(n)}),e.k0s()()}if(2&a){const t=e.XpG(),r=t.$implicit,n=t.$index;e.R7$(),e.Y8G("name","clientQuantity"+e.eq3(2,Wt,n)),e.R50("ngModel",r.clientQuantity)}}function Qo(a,m){if(1&a){const t=e.RV6();e.j41(0,"td")(1,"ng-select",72),e.bIt("ngModelChange",function(n){e.eBV(t);const o=e.XpG().$index,p=e.XpG(2);return e.Njj(p.discountSelect(n,o,2))}),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG().$implicit;return e.DH7(o.discountType,n)||(o.discountType=n),e.Njj(n)}),e.k0s()()}if(2&a){const t=e.XpG(),r=t.$implicit,n=t.$index,o=e.XpG(2);e.R7$(),e.Y8G("name","discountType"+e.eq3(3,Wt,n))("items",o.discountTypes),e.R50("ngModel",r.discountType)}}function Ho(a,m){if(1&a){const t=e.RV6();e.j41(0,"td")(1,"input",78),e.bIt("ngModelChange",function(n){e.eBV(t);const o=e.XpG().$index,p=e.XpG(2);return e.Njj(p.discountSelect(n,o))}),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG().$implicit;return e.DH7(o.discount,n)||(o.discount=n),e.Njj(n)}),e.k0s()()}if(2&a){const t=e.XpG(),r=t.$implicit,n=t.$index;e.R7$(),e.Y8G("name","discount"+e.eq3(2,Wt,n)),e.R50("ngModel",r.discount)}}function zo(a,m){if(1&a){const t=e.RV6();e.j41(0,"tr")(1,"td")(2,"ng-select",71),e.bIt("change",function(n){const o=e.eBV(t).$index,p=e.XpG(2);return e.Njj(p.itemSelected(n,o))}),e.mxI("ngModelChange",function(n){const o=e.eBV(t).$implicit;return e.DH7(o.itemId,n)||(o.itemId=n),e.Njj(n)}),e.k0s()(),e.j41(3,"td")(4,"ng-select",72),e.mxI("ngModelChange",function(n){const o=e.eBV(t).$implicit;return e.DH7(o.unitId,n)||(o.unitId=n),e.Njj(n)}),e.k0s()(),e.DNE(5,ys,2,4,"td",73),e.j41(6,"td")(7,"input",74),e.bIt("ngModelChange",function(n){const o=e.eBV(t).$index,p=e.XpG(2);return e.Njj(p.quantitySelect(n,o))}),e.mxI("ngModelChange",function(n){const o=e.eBV(t).$implicit;return e.DH7(o.quantity,n)||(o.quantity=n),e.Njj(n)}),e.k0s()(),e.j41(8,"td"),e.EFF(9),e.k0s(),e.DNE(10,Qo,2,5,"td",73)(11,Ho,2,4,"td",73),e.j41(12,"td"),e.EFF(13),e.k0s(),e.j41(14,"td")(15,"span",75),e.bIt("click",function(){const n=e.eBV(t).$index,o=e.XpG(2);return e.Njj(o.deleteRow(n))}),e.nrm(16,"i",76),e.k0s()()()}if(2&a){const t=m.$implicit,r=m.$index,n=e.XpG(2);e.R7$(2),e.Y8G("name","itemId"+e.eq3(13,Wt,r))("items",n.items),e.R50("ngModel",t.itemId),e.R7$(2),e.Y8G("name","unitId"+e.eq3(15,Wt,r))("items",t.units),e.R50("ngModel",t.unitId),e.R7$(),e.Y8G("ngIf",!(0==n.form.offerOrderStatus||5==n.form.offerOrderStatus)),e.R7$(2),e.Y8G("name","quantity"+e.eq3(17,Wt,r)),e.R50("ngModel",t.quantity),e.R7$(2),e.SpI(" ",t.price," "),e.R7$(),e.Y8G("ngIf",!n.isChangeQuantity&&!n.isDraft),e.R7$(),e.Y8G("ngIf",!n.isChangeQuantity&&!n.isDraft),e.R7$(2),e.SpI("",t.net," ")}}function Ts(a,m){if(1&a){const t=e.RV6();e.j41(0,"td",51)(1,"div",79)(2,"ng-select",80),e.bIt("change",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.getTotal())}),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG(2);return e.DH7(o.form.totalAddDiscountType,n)||(o.form.totalAddDiscountType=n),e.Njj(n)}),e.k0s(),e.j41(3,"input",81),e.bIt("change",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.getTotal())}),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG(2);return e.DH7(o.form.totalAddDiscount,n)||(o.form.totalAddDiscount=n),e.Njj(n)}),e.k0s()()()}if(2&a){const t=e.XpG(2);e.R7$(2),e.Y8G("disabled",t.isChangeQuantity)("items",t.discountTypes),e.R50("ngModel",t.form.totalAddDiscountType),e.R7$(),e.Y8G("disabled",t.isChangeQuantity),e.R50("ngModel",t.form.totalAddDiscount)}}function Jo(a,m){if(1&a){const t=e.RV6();e.j41(0,"div",3)(1,"div",4)(2,"h4",5)(3,"span",6),e.EFF(4),e.k0s(),e.j41(5,"span",7),e.EFF(6),e.k0s(),e.DNE(7,Sn,2,4,"span",8),e.k0s(),e.j41(8,"button",9),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.dismissFn())}),e.k0s()(),e.j41(9,"div",10),e.nrm(10,"ngx-ui-loader",11),e.j41(11,"form",12,0),e.bIt("submit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.orderFinished())}),e.j41(13,"div",13),e.DNE(14,vs,4,5,"div",14),e.j41(15,"div",15)(16,"label",16),e.EFF(17,"sales.salesOrder.acutalDeliveryDate"),e.k0s(),e.j41(18,"input",17),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.form.acutalVisitDate,n)||(o.form.acutalVisitDate=n),e.Njj(n)}),e.k0s()(),e.j41(19,"div",15),e.nrm(20,"label",18),e.j41(21,"ng-select",19),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.form.clientLocationId,n)||(o.form.clientLocationId=n),e.Njj(n)}),e.k0s()(),e.DNE(22,Cs,4,4,"div",14)(23,qo,5,2,"div",20),e.j41(24,"div",21)(25,"label",22),e.EFF(26,"sales.salesOrder.terms"),e.k0s(),e.j41(27,"textarea",23),e.nI1(28,"translate"),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.form.terms,n)||(o.form.terms=n),e.Njj(n)}),e.k0s()()(),e.j41(29,"div",24)(30,"div",25)(31,"div",26)(32,"div",27),e.nrm(33,"h5",28),e.k0s()(),e.j41(34,"div",29)(35,"div",30)(36,"table",31)(37,"thead",32)(38,"tr"),e.nrm(39,"th",33)(40,"th",34),e.DNE(41,Ss,1,0,"th",35),e.nrm(42,"th",36)(43,"th",37),e.DNE(44,js,1,0,"th",38)(45,Is,1,0,"th",39),e.nrm(46,"th",40)(47,"th",41),e.k0s()(),e.j41(48,"tbody",42),e.Z7z(49,zo,17,19,"tr",null,e.Vm6),e.j41(51,"tr",43)(52,"td",44)(53,"span",45),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.addRow())}),e.nrm(54,"i",46)(55,"span",47),e.k0s()(),e.j41(56,"td",48)(57,"table",49)(58,"tbody")(59,"tr"),e.nrm(60,"td",50),e.j41(61,"td",51),e.EFF(62),e.k0s()(),e.j41(63,"tr"),e.nrm(64,"td",52),e.DNE(65,Ts,4,5,"td",53),e.k0s(),e.j41(66,"tr",54),e.nrm(67,"td",55),e.j41(68,"td",51),e.EFF(69),e.k0s()(),e.j41(70,"tr",56),e.nrm(71,"th",57),e.j41(72,"th",51),e.EFF(73),e.k0s()()()()()()()()()()()(),e.j41(74,"div",58)(75,"button",59),e.nrm(76,"i",60)(77,"span",61),e.k0s()()()()()}if(2&a){const t=e.sdS(12),r=e.XpG();e.R7$(4),e.SpI("#SO#",r.form.id," "),e.R7$(2),e.SpI("",r.form.clientName," "),e.R7$(),e.Y8G("ngIf",r.form.offerOrderStatus>=0),e.R7$(3),e.Y8G("hasProgressBar",!1)("fgsType",r.loaderOperationShap)("loaderId",r.operationLoader),e.R7$(4),e.Y8G("ngIf",!(0==r.form.offerOrderStatus||5==r.form.offerOrderStatus)),e.R7$(4),e.R50("ngModel",r.form.acutalVisitDate),e.Y8G("altInput",!0)("enableTime",!0)("convertModelValue",!0)("dateFormat","Y-m-d H:i"),e.R7$(3),e.Y8G("items",r.locations),e.R50("ngModel",r.form.clientLocationId),e.R7$(),e.Y8G("ngIf",!(0==r.form.offerOrderStatus||5==r.form.offerOrderStatus)),e.R7$(),e.Y8G("ngIf",5==r.form.offerOrderStatus),e.R7$(4),e.Y8G("placeholder",e.bMT(28,28,"sales.salesOrder.termsPlaceholder")),e.R50("ngModel",r.form.terms),e.R7$(14),e.Y8G("ngIf",!(0==r.form.offerOrderStatus||5==r.form.offerOrderStatus)),e.R7$(3),e.Y8G("ngIf",!r.isChangeQuantity&&!r.isDraft),e.R7$(),e.Y8G("ngIf",!r.isChangeQuantity&&!r.isDraft),e.R7$(4),e.Dyx(r.form.details),e.R7$(3),e.BMQ("colspan",0==r.form.offerOrderStatus||5==r.form.offerOrderStatus?3:4),e.R7$(4),e.BMQ("colspan",0==r.form.offerOrderStatus||5==r.form.offerOrderStatus?1:2),e.R7$(6),e.JRh(r.form.total),e.R7$(3),e.Y8G("ngIf",!(0==r.form.offerOrderStatus||5==r.form.offerOrderStatus)),e.R7$(4),e.JRh(r.form.tax),e.R7$(4),e.JRh(r.form.totalNet),e.R7$(2),e.Y8G("disabled",!t.valid)}}function Wo(a,m){1&a&&e.nrm(0,"span",83)}function Ko(a,m){if(1&a){const t=e.RV6();e.j41(0,"div",3)(1,"div",4)(2,"h4",5)(3,"p",82),e.nrm(4,"span",83),e.k0s()(),e.j41(5,"button",9),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.dismissFn())}),e.k0s()(),e.j41(6,"p",82),e.DNE(7,Wo,1,0,"span",84),e.k0s()()}if(2&a){const t=e.XpG();e.R7$(7),e.Y8G("ngForOf",t.repeat22)}}let jn=(()=>{class a{constructor(t,r,n,o,p,c,D,ne){this.translateService=t,this.offerOrderService=r,this.itemsService=n,this.clientService=o,this.employeeService=p,this.alertService=c,this.datePipe=D,this.ngxLoader=ne,this.orderSelected=0,this.isDraft=!1,this.isChangeQuantity=!1,this.isShipping=!1,this.loaderOperationShap=M.$$,this.operationLoader=M.ZW,this.form={},this.truncks=[],this.locations=[],this.discountTypes=[],this.items=[],this.employees=[],this.isHiden=!0,this.notifier=new dt.B,this.repeat22=Array.from({length:19}),this.dismiss=new e.bkB}ngOnInit(){this.GetPersones(),this.getItemsServices(),this.discountTypes=this.offerOrderService.discountTypes,this.discountTypes.forEach(t=>{t.name=this.getTranslationText("sales.salesOrder."+t.name)}),this.getOrder()}getItemsServices(){this.itemsService.getItemDropDown().subscribe(t=>{this.items=t.data})}getLocations(t){this.clientService.GetClientLocations(t).subscribe(r=>{this.locations=r.data})}GetPersones(){this.employeeService.GetAllByType(9).subscribe(t=>{this.employees=t.data})}getTranslationText(t){let r="";return this.translateService.get(t).pipe((0,R.Q)(this.notifier)).subscribe(n=>{r=n}),r}getOrder(){this.offerOrderService.GetOrderDetail(this.orderSelected).subscribe(t=>{this.isHiden=!1,this.form=t.data,this.getLocations(this.form.clientId),this.getTotal()},t=>{this.alertService.error(t)})}update(){}getTotal(){let t=0,r=0,n=0;this.form.details.forEach(o=>{o.discount<0&&(o.discoun=0);let p=o.quantity*o.price,c=0;1===o.discountType?c=o.discount:2===o.discountType&&(c=p*o.discount/100),r+=+c;let D=p-c;o.net=D.toFixed(2),t+=+D}),1===this.form.totalAddDiscountType?n=this.form.totalAddDiscount:2===this.form.totalAddDiscountType&&(n=t*this.form.totalAddDiscount/100),this.form.total=t,this.form.totalAddDiscount=this.form.totalAddDiscount,this.form.tax=15*this.form.total/100,this.form.totalNet=this.form.total-n+this.form.tax,this.form.total=this.form.total.toFixed(2),this.form.totalAddDiscount=this.form.totalAddDiscount.toFixed(2),this.form.tax=this.form.tax.toFixed(2),this.form.totalNet=this.form.totalNet.toFixed(2)}quantitySelect(t,r){t&&(t<=0&&(t=1),this.form.details[r].quantity=parseInt(t),this.form.details[r].net=this.form.details[r].price*this.form.details[r].quantity,this.discountSelect(this.form.details[r].discount,r),this.getTotal())}discountSelect(t,r,n=1){if(t){(t=parseInt(t))<=0&&(this.form.details[r].discount=0),1==n&&(this.form.details[r].discount=t);let o=0;1==this.form.details[r].discountType?o=this.form.details[r].discount:(o=this.form.details[r].price*this.form.details[r].quantity*this.form.details[r].discount/100,o=+o.toFixed(2)),this.form.details[r].net=this.form.details[r].price*this.form.details[r].quantity-o,this.form.details[r].net=this.form.details[r].net.toFixed(2),this.getTotal()}}dismissFn(){this.dismiss.emit(!0)}getStatus(t){return 10==t.offerOrderStatus||20==t.offerOrderStatus?"bg-warning-subtle text-warning":30==t.offerOrderStatus?"bg-success-subtle text-success":40==t.offerOrderStatus?"bg-danger-subtle text-danger":50==t.offerOrderStatus?"bg-danger-success text-success":"bg-warning-subtle text-warning"}addRow(){this.form.details.push({itemId:0,unitId:null,units:[],clientQuantity:1,quantity:1,priceUnit:null,discount:0,discountType:1,net:0})}itemSelected(t,r){t&&(this.form.details[r].unitId=t.units.length>0?t.units[0].id:null,this.form.details[r].units=t.units,this.form.details[r].price=t.price,this.quantitySelect(this.form.details[r].quantity,r),this.getTotal())}deleteRow(t){this.form.details.length<=1||(this.form.details.splice(t,1),this.getTotal())}orderFinished(){let t={id:this.form.id,clientId:this.form.clientId,clientVisitDate:this.datePipe.transform(this.form.clientVisitDate,"yyyy-MM-ddTHH:mm:ss.000"),acutalVisitDate:this.datePipe.transform(this.form.acutalVisitDate,"yyyy-MM-ddTHH:mm:ss.000"),offerOrderStatus:this.form.offerOrderStatus,notes:this.form.notes,terms:this.form.terms,changeQuantityMessage:this.form.changeQuantityMessage,salsePersonId:this.form.salsePersonId,clientLocationId:this.form.clientLocationId,totalAddDiscount:this.form.discountAmount,totalAddDiscountType:this.form.isPrecentage?2:1,offerOrderDetails:this.form.details.map(r=>({discount:r.discount,discountType:r.discountType,itemId:r.itemId,clientQuantity:r.clientQuantity,approvedQuantity:r.quantity,id:r.id,price:r.price,unitId:r.unitId,offerOrderMasterId:this.form.id}))};this.ngxLoader.startLoader("operationLoader"),this.offerOrderService.edit(t.id,t).subscribe(r=>{r.success?(this.ngxLoader.stopLoader("operationLoader"),this.alertService.success()):(this.alertService.error(),this.ngxLoader.stopLoader("operationLoader"))},()=>{this.alertService.error(),this.ngxLoader.stopLoader("operationLoader")})}ngOnDestroy(){this.notifier.next(),this.notifier.complete()}static{this.\u0275fac=function(r){return new(r||a)(e.rXU(F.c$),e.rXU(Oe),e.rXU(is.N),e.rXU(Ht.X),e.rXU(tt.O),e.rXU(ae.u),e.rXU(k.vh),e.rXU(X.eD))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["sales-edit-order"]],inputs:{orderSelected:"orderSelected",isDraft:"isDraft",isChangeQuantity:"isChangeQuantity",isShipping:"isShipping"},outputs:{dismiss:"dismiss"},decls:2,vars:2,consts:[["formEntity","ngForm"],["notes","ngModel"],["class","modal-content border-0  ",4,"ngIf"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-dark-subtle"],[1,"card-title","mb-0"],[1,"badge","bg-primary-subtle","text-primary","fs-4"],[1,"badge","bg-danger-subtle","text-danger","fs-4","mx-2"],[3,"class",4,"ngIf"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"hasProgressBar","fgsType","loaderId"],[3,"submit"],[1,"row"],["class","col-12 col-md-3",4,"ngIf"],[1,"col-12","col-md-3"],["for","name","translate","",1,"required","fw-bold","form-label"],["name","acutalVisitDate","type","text","mwlFlatpickr","","altFormat","Y-m-d H:i","required","",1,"form-control","flatpickr-input",3,"ngModelChange","ngModel","altInput","enableTime","convertModelValue","dateFormat"],["for","name","translate","orderManagement.order.savedAddress",1,"required","fw-bold","form-label"],["name","clientLocationId","bindValue","id","bindLabel","name","required","",2,"width","100%",3,"ngModelChange","items","ngModel"],["class","col-12 col-md-6",4,"ngIf"],[1,"col-12","col-md-6"],["for","name","translate","",1,"fw-bold","form-label"],["rows","1","name","terms","type","text",1,"form-control",3,"ngModelChange","placeholder","ngModel"],[1,"row","justify-content-center","my-0"],[1,"card"],[1,"card-header","p-0"],[1,"d-flex","align-items-center"],["translate","sales.salesRequests.items",1,"card-title","flex-grow-1","mb-0"],[1,"card-body"],[1,"table-responsive","table-card"],[1,"table","table-nowrap","align-middle","table-borderless","mb-0"],[1,"table-light","text-muted","p-1"],["translate","sales.salesRequests.itemName",2,"width","20%"],["translate","sales.salesRequests.unit",2,"width","12%"],["style","width:10%","translate","sales.salesRequests.clientQuantity",4,"ngIf"],["translate","sales.salesRequests.quantity",2,"width","12%"],["translate","sales.salesRequests.priceUnit",2,"width","12%"],["style","width:12%","translate","sales.salesRequests.discountType",4,"ngIf"],["style","width:12%","translate","sales.salesRequests.discount",4,"ngIf"],["translate","sales.salesRequests.net",2,"width","12%"],[2,"width","5%"],[1,"body-orderEdit"],[1,"border-top","border-top-dashed"],[2,"vertical-align","top"],[1,"cursor-pointer","p-2","mb-0","badge","bg-success-subtle","text-success",3,"click"],[1,"ri-add-fill"],["translate","sales.salesRequests.addItem"],[1,"fw-medium","p-0"],[1,"table","table-borderless","mb-0"],["translate","sales.salesOrder.total",1,"m-0","p-0"],[1,"text-end","m-0","p-0"],["translate","sales.salesOrder.extraDiscount",1,"m-0","p-0"],["class","text-end m-0 p-0",4,"ngIf"],[1,"m-0","p-0"],["translate","sales.salesOrder.tax",1,"m-0","p-0"],[1,"border-top","border-top-dashed","m-0","p-0"],["scope","row","translate","sales.salesOrder.net",1,"m-0","p-0"],[1,"d-flex","justify-content-center","m-0"],["type","submit","type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],[3,"translate"],["name","clientVisitDate","type","text","mwlFlatpickr","","altFormat","Y-m-d H:i","required","",1,"form-control","flatpickr-input",3,"ngModelChange","ngModel","altInput","enableTime","convertModelValue","dateFormat"],["for","name","translate","sales.salesOrder.salsePerson",1,"fw-bold","form-label"],["name","salsePersonId","bindValue","id","bindLabel","name",2,"width","100%",3,"ngModelChange","disabled","items","ngModel"],["for","changeQuantityMessage","translate","",1,"fw-bold","form-label"],["rows","1","InputTirmFilter","","name","changeQuantityMessage","type","text","id","changeQuantityMessage",1,"form-control","fs-6",3,"ngModelChange","disabled","ngModel"],["translate","sales.salesRequests.clientQuantity",2,"width","10%"],["translate","sales.salesRequests.discountType",2,"width","12%"],["translate","sales.salesRequests.discount",2,"width","12%"],["clearable","false","clearOnBackspace","false","bindValue","id","bindLabel","name",2,"width","100%",3,"change","ngModelChange","name","items","ngModel"],["clearable","false","clearOnBackspace","false","bindValue","id","bindLabel","name",2,"width","100%",3,"ngModelChange","name","items","ngModel"],[4,"ngIf"],["type","text","id","quantity",1,"form-control","fs-6",3,"ngModelChange","name","ngModel"],[1,"cursor-pointer","mb-0","p-2","badge","bg-danger-subtle","text-danger",3,"click"],[1,"ri-delete-bin-2-fill"],["type","text","id","clientQuantity",1,"form-control","fs-6",3,"ngModelChange","name","ngModel"],["InputTirmFilter","","type","text","id","discount",1,"form-control","fs-6",3,"ngModelChange","name","ngModel"],[1,"input-group","mx-4","my-1",2,"width","80%"],["clearable","false","clearOnBackspace","false","name","totalAddDiscountType","bindValue","id","bindLabel","name",3,"change","ngModelChange","disabled","items","ngModel"],["InputTirmFilter","","name","totalAddDiscount","type","text","id","totalAddDiscount",1,"form-control","fs-6",2,"width","20%",3,"change","ngModelChange","disabled","ngModel"],[1,"card-text","placeholder-glow"],[1,"placeholder","col-12"],["class","placeholder col-12",4,"ngFor","ngForOf"]],template:function(r,n){1&r&&e.DNE(0,Jo,78,30,"div",2)(1,Ko,8,1,"div",2),2&r&&(e.Y8G("ngIf",!n.isHiden),e.R7$(),e.Y8G("ngIf",n.isHiden))},dependencies:[k.Sq,k.bT,g.qT,g.me,g.BC,g.cb,g.YS,g.vS,g.cV,fe.kL,F.Mm,X.Cv,ve.vr,ke.m,F.D9],encapsulation:2})}}return a})();const ar=()=>["salesOrder.register"],Zo=()=>["salesOrder.edit"];function el(a,m){1&a&&(e.j41(0,"tr",28),e.nrm(1,"th",29),e.j41(2,"th",30),e.EFF(3,"#"),e.k0s(),e.j41(4,"th",31),e.nrm(5,"i",32),e.EFF(6," orderManagement.order.orderCode "),e.k0s(),e.j41(7,"th",33),e.nrm(8,"i",32),e.EFF(9," orderManagement.order.creation "),e.k0s(),e.j41(10,"th",34),e.EFF(11," orderManagement.order.status "),e.k0s(),e.j41(12,"th",35),e.nrm(13,"i",32),e.EFF(14," orderManagement.order.agentName "),e.k0s(),e.j41(15,"th",36),e.EFF(16," sales.salesOrder.salsePerson "),e.k0s(),e.j41(17,"th",37),e.nrm(18,"i",32),e.EFF(19," sales.salesOrder.clientVisitDate "),e.k0s(),e.j41(20,"th",38),e.nrm(21,"i",32),e.EFF(22," sales.salesOrder.totalQuantity "),e.k0s(),e.j41(23,"th",39),e.nrm(24,"i",32),e.EFF(25," sales.salesOrder.totalDiscount "),e.k0s(),e.j41(26,"th",40),e.nrm(27,"i",32),e.EFF(28," sales.salesOrder.netPrice "),e.k0s(),e.nrm(29,"th",41),e.k0s())}function tl(a,m){if(1&a){const t=e.RV6();e.j41(0,"button",51),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,o=e.XpG(),p=e.sdS(48);return e.Njj(o.openModal(n.id,p,"xl"))}),e.nrm(1,"i",52)(2,"span",53),e.k0s()}}function nl(a,m){if(1&a){const t=e.RV6();e.j41(0,"tr",42)(1,"td"),e.nrm(2,"button",43),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td",44),e.bIt("click",function(){const n=e.eBV(t).$implicit,o=e.XpG(),p=e.sdS(46);return e.Njj(o.openModalClient(n,p,"lg"))}),e.j41(6,"bdi",45),e.EFF(7),e.k0s()(),e.j41(8,"td")(9,"span",46),e.EFF(10),e.k0s(),e.EFF(11),e.nI1(12,"date"),e.k0s(),e.j41(13,"td")(14,"span"),e.nrm(15,"span",47),e.k0s()(),e.j41(16,"td",44),e.bIt("click",function(){const n=e.eBV(t).$implicit,o=e.XpG(),p=e.sdS(50);return e.Njj(o.openModal(n.clientId,p,"md"))}),e.j41(17,"a",48),e.EFF(18),e.k0s()(),e.j41(19,"td"),e.EFF(20),e.k0s(),e.j41(21,"td"),e.EFF(22),e.nI1(23,"date"),e.k0s(),e.j41(24,"td"),e.EFF(25),e.k0s(),e.j41(26,"td"),e.EFF(27),e.k0s(),e.j41(28,"td"),e.EFF(29),e.k0s(),e.j41(30,"td"),e.nrm(31,"i",49),e.DNE(32,tl,3,0,"button",50),e.k0s()()}if(2&a){const t=m.$implicit,r=m.rowIndex,n=m.expanded,o=e.XpG();e.R7$(2),e.Y8G("pRowToggler",t)("ngClass",n?" ri-arrow-down-s-line":"  ri-arrow-up-s-line"),e.R7$(2),e.JRh(r+1),e.R7$(3),e.SpI("#SO#",t.id,""),e.R7$(3),e.SpI("",t.creatorName," "),e.R7$(),e.SpI(" ",e.i5U(12,17,t.creationTime,"yyyy-MM-dd")," "),e.R7$(3),e.ZvI("badge ",o.getStatus(t),""),e.R7$(),e.FS9("translate","sales.salesOrder."+t.offerOrderStatusValue),e.R7$(3),e.SpI(" ",t.clientName," "),e.R7$(2),e.JRh(t.salsePersonName),e.R7$(2),e.SpI(" ",e.i5U(23,20,t.clientVisitDate,"yyyy-MM-dd"),""),e.R7$(3),e.JRh(t.totalQuantity),e.R7$(2),e.JRh(t.totalDiscount),e.R7$(2),e.JRh(t.netPrice),e.R7$(3),e.Y8G("hasPermission",e.lJ4(23,Zo))}}function il(a,m){if(1&a&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.nI1(11,"translate"),e.k0s(),e.j41(12,"td"),e.EFF(13),e.k0s(),e.j41(14,"td"),e.EFF(15),e.k0s()()),2&a){const t=m.$implicit;e.R7$(2),e.JRh(t.itemName),e.R7$(2),e.JRh(t.unitName),e.R7$(2),e.JRh(t.clientQuantity),e.R7$(2),e.JRh(t.approvedQuantity),e.R7$(2),e.SpI("",e.bMT(11,7,"sales.salesOrder."+t.discountTypeValue)," "),e.R7$(3),e.JRh(t.discount),e.R7$(2),e.JRh(t.price)}}function Ce(a,m){if(1&a&&(e.j41(0,"tr")(1,"td",54)(2,"div")(3,"table",55)(4,"thead")(5,"tr",56),e.nrm(6,"th",57)(7,"th",58)(8,"th",59)(9,"th",60)(10,"th",61)(11,"th",62)(12,"th",63),e.k0s()(),e.j41(13,"tbody"),e.DNE(14,il,16,9,"tr",64),e.k0s()()()()()),2&a){const t=m.$implicit;e.R7$(14),e.Y8G("ngForOf",t.offerOrderDetails)}}function be(a,m){1&a&&(e.j41(0,"div",65),e.EFF(1," general.table.noData "),e.k0s())}function rl(a,m){if(1&a){const t=e.RV6();e.j41(0,"div",66)(1,"div",67),e.nrm(2,"ngb-pagination-info",68),e.j41(3,"table-length",69),e.bIt("lengthChange",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",70)(5,"ngb-pagination",71),e.bIt("pageChange",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.pagination.pageNumber,n)||(o.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&a){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function sl(a,m){if(1&a){const t=e.RV6();e.j41(0,"delete-modal",72),e.bIt("deleteConfirm",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.DeleteConfirm())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}}function al(a,m){if(1&a){const t=e.RV6();e.j41(0,"app-all-orders-details",73),e.bIt("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("orderDetails",t.orderSelected)}}function ol(a,m){if(1&a){const t=e.RV6();e.j41(0,"sales-edit-order",74),e.bIt("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("orderSelected",t.operationId)}}function ll(a,m){if(1&a){const t=e.RV6();e.j41(0,"client-summary",75),e.bIt("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("clientId",t.operationId)}}let dl=(()=>{class a extends Ee.w{constructor(t,r,n,o,p,c,D,ne,re,oe,se,W,q,Q){super(t,r,D,n,o,p,c),this.baseService=n,this.authDaamService=ne,this.teamService=re,this.employeeService=oe,this.regionService=se,this.cityService=W,this.excelService=q,this.router=Q,this.title="orderManagement.order.title",this.titleOperation="orderManagement.order.titleOperation",this.keySelected="",this.searchForm={},this.isResolveList=!0,this.employeeGroups=[],this.activeindex="2",this.active=2,this.clientSelected=0,this.status=[],this.countLoad=2,this.isOrderEdit=!1,this.orderSelected={},this.users=[],this.statusCount={},this.salesPersons=[],this.regions=[],this.cities=[],this.setDates=(V,E,ce)=>{if(V?.from||V?.to){const Te=V.to||V.from;this.pagination[E]=this.datePipe.transform(V.from||V.to,"yyyy-MM-ddT00:00:00"),this.pagination[ce]=this.datePipe.transform(Te,"yyyy-MM-ddT23:59:59.999")}else this.pagination[E]=null,this.pagination[ce]=null},this.configRoute(),this.GetSalesPersons(),this.GetRegions(),this.GetCities()}GetRegions(){this.regionService.getDropDown().subscribe(t=>{this.regions=t.data},t=>{console.log(t)})}GetCities(){this.cityService.getDropDown().subscribe(t=>{this.cities=t.data},t=>{console.log(t)})}GetSalesPersons(){this.employeeService.GetAllByType(9).subscribe(t=>{this.salesPersons=t.data},t=>{console.log(t)})}ngOnInitMore(){}mapForm(t){return{...t}}onUpdateIsActive(t){this.baseService.updateActive(t).pipe((0,R.Q)(this.notifier)).subscribe(r=>{r?this.alertService.success():this.alertService.error("general.message."+r)},r=>{this.alertService.error()})}mapRegisterForm(t){let r={...t};return r.employeeCode=0,r}onSearch(){let t={...this.searchForm};this.ngxLoader.startLoader("allLoader"),this.setDates(t.dates,"visitDateFrom","visitDateTo"),this.setDates(t.creationDates,"creationTimeFrom","creationTimeTo"),this.loadentities()}LoadSuccess(){this.ngxLoader.stopLoader("allLoader")}onReset(){this.form={},this.searchForm={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems},this.loadentities()}configRoute(){this.routerActive.data.pipe((0,R.Q)(this.notifier)).subscribe(t=>{this.entities=t.data,this.pagination.totalItems=t.data?.totalItems},()=>{this.alertService.error()})}mapExcel(){let t=[];return this.entities.forEach(r=>{t.push({Code:r.id,CreatorName:r.creatorName,creationTime:r.creationTime,clientName:r.clientName,Status:this.getTranslationText("sales.salesOrder."+r.offerOrderStatusValue),salse_Person:r.salsePersonName,"Delivery.Date":r.acutalVisitDate,"T.Quantity":r.totalQuantity," T.Discount":r.totalDiscount,Tax:r.totalTax,Net:r.netPrice,Reason:r.cancelReasonName})}),t}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,this.translateService.instant(this.title),[])}onNavChange(t){1===t.nextId&&(this.activeindex="1"),3===t.nextId&&(this.activeindex="3")}getStatus(t){return 10==t.offerOrderStatus||20==t.offerOrderStatus?"bg-warning-subtle text-warning":30==t.offerOrderStatus?"bg-success-subtle text-success":40==t.offerOrderStatus?"bg-danger-subtle text-danger":50==t.offerOrderStatus?"bg-danger-success text-success":"bg-warning-subtle text-warning"}checkEdit(t){return!t.isCancel&&!t.isFinish}getTrnslate(t){return t.isCancel?"orderManagement.order.cancel":t.isFinish?"orderManagement.order.finish":t.isUrgent?"bg-danger-subtle text-danger":t.isReopen?"orderManagement.order.reopen":t.isAssign?"orderManagement.order.assign":t.isConfirmed?"orderManagement.order.confirmed":t.isFree?"orderManagement.order.free":"orderManagement.order.new"}openModalClient(t,r,n="xl"){this.clientSelected=t.orderCode,this.orderSelected=t,this.isOrderEdit=!1,this.modalService.open(r,{centered:!0,size:n})}copytext(t){navigator.clipboard.writeText(t),this.alertService.info(t)}goNew(){this.router.navigateByUrl("/sales/new")}static{this.\u0275fac=function(r){return new(r||a)(e.rXU($.nX),e.rXU(F.c$),e.rXU(Oe),e.rXU(ae.u),e.rXU(k.vh),e.rXU(X.eD),e.rXU(O.Bq),e.rXU(nt.J),e.rXU(zt.n),e.rXU(tt.O),e.rXU(ct.S),e.rXU(Ve.h),e.rXU(qe.V),e.rXU($.Ix))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-all-sales-order"]],features:[e.Vt3],decls:51,vars:51,consts:[["tableMaster",""],["deleteModal",""],["orderViewModel",""],["SalesEditModel",""],["ClientInfo",""],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],["overlayColor","rgba(255,255,255,0.05)","fgsColor","rgba(255,255,255,0)",3,"loaderId"],[3,"addNew","reset","search","exportXlsx","addPermission","showAdd","showExport","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","number","id","id","name","id",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["type","text","mwlFlatpickr","","id","isDate","mode","range","altFormat","d/m/Y",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],["InputTirmFilter","","type","search","id","clientName","name","clientName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["name","name","bindValue","id","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],["name","regionId","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","placeholder","ngModel"],["name","cityId","bindValue","code","bindLabel","name",3,"ngModelChange","items","multiple","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],[2,"width",".2%"],["translate","",2,"width",".5%"],["pSortableColumn","id","translate","",2,"width","6%"],[1,"ri-expand-up-down-line"],["pSortableColumn","creationTime","translate","",2,"width","12%"],["pSortableColumn","status","translate","",2,"width","6%"],["pSortableColumn","clientId","translate","",2,"width","10%"],["translate","",2,"width","8%"],["pSortableColumn","clientVisitDate","translate","",2,"width","10%"],["pSortableColumn","totalQuantity","translate","",2,"width","8%"],["pSortableColumn","totalDiscount","translate","",2,"width","8%"],["pSortableColumn","netPrice","translate","",2,"width","8%"],["translate","",2,"width","10%"],[1,"fs-5"],["type","button","pRipple","",1,"border-0","p-button-text","p-button-rounded","p-button-plain",3,"pRowToggler","ngClass"],[3,"click"],[1,"code-pointer"],[1,"badge","bg-success-subtle","text-success"],[3,"translate"],["href","javascript:void(0)",1,"link-primary","link-offset-2","text-decoration-underline","link-underline-opacity-25","link-underline-opacity-100-hover"],[1,"ri-history-fill","d-inline","text-primary","fs-16","align-middle","me-1"],["type","button","class","btn px-4 w-auto btn-sm btn-primary btn-label  waves-effect waves-light rounded-pill",3,"click",4,"hasPermission"],["type","button",1,"btn","px-4","w-auto","btn-sm","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"click"],[1,"ri-edit-2-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.edit"],["colspan","17"],["dataKey","id"],[1,"bg-light"],["translate","sales.salesOrder.itemName",2,"width","10%"],["translate","sales.salesOrder.unit",2,"width","6%"],["translate","sales.salesOrder.clientQuantity",2,"width","8%"],["translate","sales.salesOrder.approvedQuantity",2,"width","8%"],["translate","sales.salesOrder.discountType",2,"width","5%"],["translate","sales.salesOrder.discount",2,"width","5%"],["translate","sales.salesOrder.price",2,"width","5%"],[4,"ngFor","ngForOf"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[3,"deleteConfirm","dismiss"],[3,"dismiss","orderDetails"],[3,"dismiss","orderSelected"],[3,"dismiss","clientId"]],template:function(r,n){if(1&r){const o=e.RV6();e.j41(0,"div",5)(1,"div",6)(2,"div",7),e.nrm(3,"ngx-ui-loader",8),e.j41(4,"base-filter",9),e.bIt("addNew",function(){return e.eBV(o),e.Njj(n.goNew())})("reset",function(){return e.eBV(o),e.Njj(n.onReset())})("search",function(){return e.eBV(o),e.Njj(n.onSearch())})("exportXlsx",function(){return e.eBV(o),e.Njj(n.onExportXlsx())}),e.qex(5,10),e.j41(6,"div",11)(7,"div",12)(8,"input",13),e.nI1(9,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.pagination.id,c)||(n.pagination.id=c),e.Njj(c)}),e.k0s(),e.nrm(10,"i",14),e.k0s()(),e.j41(11,"div",11)(12,"input",15),e.nI1(13,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.searchForm.creationDates,c)||(n.searchForm.creationDates=c),e.Njj(c)}),e.k0s()(),e.j41(14,"div",11)(15,"div",12)(16,"input",16),e.nI1(17,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.pagination.clientName,c)||(n.pagination.clientName=c),e.Njj(c)}),e.k0s(),e.nrm(18,"i",14),e.k0s()(),e.j41(19,"div",11)(20,"div",12)(21,"ng-select",17),e.nI1(22,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.pagination.salesPersonId,c)||(n.pagination.salesPersonId=c),e.Njj(c)}),e.k0s()()(),e.j41(23,"div",11)(24,"input",15),e.nI1(25,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.searchForm.dates,c)||(n.searchForm.dates=c),e.Njj(c)}),e.k0s()(),e.j41(26,"div",11)(27,"div",12)(28,"ng-select",18),e.nI1(29,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.pagination.regionId,c)||(n.pagination.regionId=c),e.Njj(c)}),e.k0s()()(),e.j41(30,"div",11)(31,"div",12)(32,"ng-select",19),e.nI1(33,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.pagination.cityId,c)||(n.pagination.cityId=c),e.Njj(c)}),e.k0s()()(),e.bVm(),e.k0s(),e.j41(34,"div",20)(35,"div",21)(36,"p-table",22,0),e.bIt("onLazyLoad",function(c){return e.eBV(o),e.Njj(n.tableChange(c))})("selectionChange",function(c){return e.eBV(o),e.Njj(n.onSelectionChange(c))}),e.DNE(38,el,30,0,"ng-template",23)(39,nl,33,24,"ng-template",24)(40,Ce,15,1,"ng-template",25),e.k0s()(),e.DNE(41,be,2,0,"div",26)(42,rl,6,8,"div",27),e.k0s()()()(),e.DNE(43,sl,1,0,"ng-template",null,1,e.C5r)(45,al,1,1,"ng-template",null,2,e.C5r)(47,ol,1,1,"ng-template",null,3,e.C5r)(49,ll,1,1,"ng-template",null,4,e.C5r)}2&r&&(e.R7$(3),e.Y8G("loaderId","allLoader"),e.R7$(),e.Y8G("addPermission",e.lJ4(50,ar))("showAdd",!0)("showExport",!1)("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(4),e.FS9("placeholder",e.bMT(9,36,"orderManagement.order.orderCode")),e.R50("ngModel",n.pagination.id),e.R7$(4),e.FS9("placeholder",e.bMT(13,38,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.creationDates),e.R7$(4),e.FS9("placeholder",e.bMT(17,40,"orderManagement.order.agentName")),e.R50("ngModel",n.pagination.clientName),e.R7$(5),e.FS9("placeholder",e.bMT(22,42,"sales.salesOrder.salsePerson")),e.Y8G("items",n.salesPersons)("multiple",!1),e.R50("ngModel",n.pagination.salesPersonId),e.R7$(3),e.FS9("placeholder",e.bMT(25,44,"sales.salesOrder.clientVisitDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.dates),e.R7$(4),e.FS9("placeholder",e.bMT(29,46,"client.client.regionName")),e.Y8G("items",n.regions)("multiple",!1),e.R50("ngModel",n.pagination.regionId),e.R7$(4),e.FS9("placeholder",e.bMT(33,48,"client.client.cityName")),e.Y8G("items",n.cities)("multiple",!1),e.R50("ngModel",n.pagination.cityId),e.R7$(4),e.Y8G("value",n.entities)("rows",n.pagination.pageSize)("lazy",!0)("totalRecords",n.pagination.totalItems),e.R7$(5),e.Y8G("ngIf",n.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems>0))},dependencies:[k.YU,k.Sq,k.bT,g.me,g.Q0,g.BC,g.vS,O.s5,fe.kL,Le.b,Ke.w,$e.p,Be.g,Jt,F.Mm,B.XI,Xe.Ei,B.Tg,B.FP,X.Cv,ve.vr,ke.m,ye.p,jn,k.vh,F.D9],encapsulation:2})}}return a})(),In=(()=>{class a extends We.d{getTrunckStatus(){return[{id:10,name:"WaitTrunk"},{id:20,name:"ArriveStore"},{id:30,name:"GoClient"},{id:40,name:"ArriveClient"},{id:50,name:"DeliveryClient"},{id:60,name:"DelayOrder"},{id:70,name:"CancelOrder"}]}constructor(t){super(t,Je.c.apiUrl+"OrderReceived/")}GetOrderAssignTrunk(t){return this.http.post(this.baseUrl+"OrderAssignTrunk",t)}changeStatus(t){return this.http.post(this.baseUrl+"changeStatus",t)}PrintOrderReceived(t){return this.http.get(this.baseUrl+"PrintOrderReceived/"+t,{responseType:"blob"})}static{this.\u0275fac=function(r){return new(r||a)(e.KVO(Ue.Qq))}}static{this.\u0275prov=e.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();var cl=x(91020);let je=(()=>{class a{constructor(t,r,n,o){this.cancelReasonService=t,this.orderService=r,this.ngxLoader=n,this.alertService=o,this.cancelReasons=[],this.form={},this.orderId=0,this.loaderOperationShap=M.$$,this.operationLoader=M.ZW,this.notifier=new dt.B,this.success=new e.bkB,this.dismiss=new e.bkB}ngOnInit(){this.GetReturnReasons()}GetReturnReasons(){this.cancelReasonService.getDropDown().subscribe(t=>{this.cancelReasons=t.data},t=>{console.log(t)})}onCancelOrder(){let t={cancelReasonId:this.form.cancelReasonCode,id:this.orderId};this.ngxLoader.startLoader(this.operationLoader),this.orderService.CancelOfferOrder(t).pipe((0,R.Q)(this.notifier)).subscribe(r=>{this.ngxLoader.stopLoader(this.operationLoader),r.success?(this.alertService.success(),this.success.emit(!0),this.dismiss.emit(!0)):this.alertService.error()},()=>{this.alertService.error(),this.ngxLoader.stopLoader(this.operationLoader)})}dismissFn(){this.dismiss.emit(!0)}static{this.\u0275fac=function(r){return new(r||a)(e.rXU(cl.e),e.rXU(Oe),e.rXU(X.eD),e.rXU(ae.u))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["cancel-sales-model"]],inputs:{orderId:"orderId"},outputs:{success:"success",dismiss:"dismiss"},decls:19,vars:10,consts:[["formEntity","ngForm"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["translate","orderManagement.order.cancelReasonName",1,"fw-bold","fs-4"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"hasProgressBar","fgsType","loaderId"],[3,"ngSubmit"],[1,"row"],[1,"mb-3"],["for","actionMismatch","translate","",1,"required","fw-bold","form-label"],["name","name","bindValue","code","bindLabel","name","required","",3,"ngModelChange","placeholder","items","multiple","ngModel"],[1,"text-center"],["type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"]],template:function(r,n){if(1&r){const o=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"h4",3),e.nrm(3,"span",4),e.k0s(),e.j41(4,"button",5),e.bIt("click",function(){return e.eBV(o),e.Njj(n.dismissFn())}),e.k0s()(),e.j41(5,"div",6),e.nrm(6,"ngx-ui-loader",7),e.j41(7,"form",8,0),e.bIt("ngSubmit",function(){return e.eBV(o),e.Njj(n.onCancelOrder())}),e.j41(9,"div",9)(10,"div",10)(11,"label",11),e.EFF(12,"orderManagement.order.cancelReasonName"),e.k0s(),e.j41(13,"ng-select",12),e.nI1(14,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.form.cancelReasonCode,c)||(n.form.cancelReasonCode=c),e.Njj(c)}),e.k0s()()(),e.j41(15,"div",13)(16,"button",14),e.nrm(17,"i",15)(18,"span",16),e.k0s()()()()()}if(2&r){const o=e.sdS(8);e.R7$(6),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderOperationShap)("loaderId",n.operationLoader),e.R7$(7),e.FS9("placeholder",e.bMT(14,8,"orderManagement.order.cancelReasonName")),e.Y8G("items",n.cancelReasons)("multiple",!1),e.R50("ngModel",n.form.cancelReasonCode),e.R7$(3),e.Y8G("disabled",!o.valid)}},dependencies:[g.qT,g.BC,g.cb,g.YS,g.vS,g.cV,F.Mm,X.Cv,ve.vr,F.D9],encapsulation:2})}}return a})();const xs=()=>["salesOrder.register"],Un=()=>["shippingOrder.completeOrder"],ks=()=>["shippingOrder.printItem"],or=()=>["shippingOrder.sureOrder"],mt=()=>["shippingOrder.cancel"];function Rs(a,m){1&a&&(e.j41(0,"tr",29),e.nrm(1,"th",30),e.j41(2,"th",31),e.EFF(3,"#"),e.k0s(),e.j41(4,"th",32),e.nrm(5,"i",33),e.EFF(6," orderManagement.order.orderCode "),e.k0s(),e.j41(7,"th",34),e.nrm(8,"i",33),e.EFF(9," orderManagement.order.creation "),e.k0s(),e.j41(10,"th",35),e.nrm(11,"i",33),e.EFF(12," orderManagement.order.agentName "),e.k0s(),e.j41(13,"th",36),e.nrm(14,"i",33),e.EFF(15," sales.salesOrder.clientVisitDate "),e.k0s(),e.j41(16,"th",37),e.EFF(17," sales.salesOrder.salsePerson "),e.k0s(),e.j41(18,"th",38),e.nrm(19,"i",33),e.EFF(20," sales.salesOrder.shippingTruckName "),e.k0s(),e.j41(21,"th",37),e.EFF(22," sales.salesOrder.totalQuantity "),e.k0s(),e.j41(23,"th",39),e.EFF(24," sales.salesOrder.clientLocationName "),e.k0s(),e.nrm(25,"th",40),e.k0s())}function Ms(a,m){1&a&&e.nrm(0,"span",49)}function Os(a,m){if(1&a&&(e.j41(0,"a",50),e.nrm(1,"i",51),e.k0s()),2&a){const t=e.XpG().$implicit,r=e.XpG();e.Y8G("href",r.mapUrl(null==t?null:t.lng,null==t?null:t.lat),e.B4B)}}function Fs(a,m){1&a&&(e.j41(0,"td")(1,"button",52),e.nI1(2,"translate"),e.nrm(3,"i",53),e.k0s(),e.j41(4,"button",54),e.nI1(5,"translate"),e.nrm(6,"i",55),e.k0s()()),2&a&&(e.R7$(),e.FS9("pTooltip",e.bMT(2,2,"orderManagement.order.changeTeamStatus")),e.R7$(3),e.FS9("pTooltip",e.bMT(5,4,"orderManagement.order.finishOrder")))}function ws(a,m){if(1&a){const t=e.RV6();e.j41(0,"button",63),e.nI1(1,"translate"),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2).$implicit,o=e.XpG(),p=e.sdS(50);return e.Njj(o.openStatusModal(n.id,p,60,"md"))}),e.nrm(2,"i",64),e.k0s()}2&a&&e.FS9("pTooltip",e.bMT(1,1,"sales.salesOrder.finihedOrder"))}function Ns(a,m){if(1&a){const t=e.RV6();e.j41(0,"li",65),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2).$implicit,o=e.XpG();return e.Njj(o.PrintOrderReceived(n.id))}),e.j41(1,"span",66),e.nrm(2,"i",67)(3,"span",68),e.k0s()()}}function it(a,m){if(1&a){const t=e.RV6();e.j41(0,"li",65),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2).$implicit,o=e.XpG(),p=e.sdS(50);return e.Njj(o.openStatusModal(n.id,p,40,"md"))}),e.j41(1,"span",66),e.nrm(2,"i",69)(3,"span",70),e.k0s()()}}function ml(a,m){if(1&a){const t=e.RV6();e.j41(0,"li",65),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2).$implicit,o=e.XpG(),p=e.sdS(46);return e.Njj(o.openModal(n.id,p))}),e.j41(1,"span",66),e.nrm(2,"i",71)(3,"span",72),e.k0s()()}}function pt(a,m){1&a&&(e.j41(0,"td")(1,"div",56),e.DNE(2,ws,3,3,"button",57),e.j41(3,"span",56)(4,"div",58)(5,"button",59),e.nrm(6,"i",60),e.k0s(),e.j41(7,"ul",61),e.DNE(8,Ns,4,0,"li",62)(9,it,4,0,"li",62)(10,ml,4,0,"li",62),e.k0s()()()()()),2&a&&(e.R7$(2),e.Y8G("hasPermission",e.lJ4(4,Un)),e.R7$(6),e.Y8G("hasPermission",e.lJ4(5,ks)),e.R7$(),e.Y8G("hasPermission",e.lJ4(6,or)),e.R7$(),e.Y8G("hasPermission",e.lJ4(7,mt)))}function pl(a,m){if(1&a&&(e.j41(0,"tr",41)(1,"td"),e.nrm(2,"button",42),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td")(6,"bdi",43),e.EFF(7),e.k0s()(),e.j41(8,"td")(9,"span",44),e.EFF(10),e.k0s(),e.EFF(11),e.nI1(12,"date"),e.k0s(),e.j41(13,"td")(14,"span",45),e.EFF(15),e.k0s()(),e.j41(16,"td"),e.EFF(17),e.nI1(18,"date"),e.k0s(),e.j41(19,"td"),e.EFF(20),e.k0s(),e.j41(21,"td"),e.EFF(22),e.k0s(),e.j41(23,"td"),e.EFF(24),e.k0s(),e.j41(25,"td"),e.DNE(26,Ms,1,0,"span",46)(27,Os,2,1,"a",47),e.k0s(),e.DNE(28,Fs,7,6,"td",48)(29,pt,11,8,"td",48),e.k0s()),2&a){const t=m.$implicit,r=m.rowIndex,n=m.expanded,o=e.XpG();e.R7$(2),e.Y8G("pRowToggler",t)("ngClass",n?" ri-arrow-down-s-line":"  ri-arrow-up-s-line"),e.R7$(2),e.JRh(r+1),e.R7$(3),e.SpI("#SO#",t.offerOrderMasterId,""),e.R7$(3),e.SpI("",t.creatorName," "),e.R7$(),e.SpI(" ",e.i5U(12,15,t.creationTime,"yyyy-MM-dd HH:mm")," "),e.R7$(4),e.SpI("",t.clientName," "),e.R7$(2),e.SpI(" ",e.i5U(18,18,t.deliveryDate,"yyyy-MM-dd HH:mm"),""),e.R7$(3),e.JRh(t.salsePersonName),e.R7$(2),e.JRh(t.shippingTruckName),e.R7$(2),e.JRh(t.totalQuantity),e.R7$(2),e.Y8G("ngIf",""==t.lng),e.R7$(),e.Y8G("ngIf",null==t?null:t.lng),e.R7$(),e.Y8G("ngIf",o.isTrunck),e.R7$(),e.Y8G("ngIf",!o.isTrunck)}}function Gs(a,m){1&a&&(e.j41(0,"tr"),e.nrm(1,"th",77)(2,"th",78)(3,"th",79)(4,"th",80),e.k0s())}function Kt(a,m){if(1&a&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td")(8,"span"),e.EFF(9),e.k0s()()()),2&a){const t=m.$implicit;e.R7$(2),e.JRh(t.itemName),e.R7$(2),e.JRh(t.unitName),e.R7$(2),e.JRh(t.clientQuantity),e.R7$(3),e.JRh(t.approvedQuantity)}}function pi(a,m){1&a&&(e.j41(0,"tr"),e.nrm(1,"td",81),e.k0s())}function lr(a,m){if(1&a&&(e.j41(0,"tr")(1,"td",73)(2,"div",74)(3,"p-table",75),e.DNE(4,Gs,5,0,"ng-template",24)(5,Kt,10,4,"ng-template",25)(6,pi,2,0,"ng-template",76),e.k0s()()()()),2&a){const t=m.$implicit;e.R7$(3),e.Y8G("value",t.details)}}function Se(a,m){1&a&&(e.j41(0,"div",82),e.EFF(1," general.table.noData "),e.k0s())}function Zt(a,m){if(1&a){const t=e.RV6();e.j41(0,"div",83)(1,"div",84),e.nrm(2,"ngb-pagination-info",85),e.j41(3,"table-length",86),e.bIt("lengthChange",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",87)(5,"ngb-pagination",88),e.bIt("pageChange",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.pagination.pageNumber,n)||(o.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&a){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function dr(a,m){if(1&a){const t=e.RV6();e.j41(0,"form",89,5),e.bIt("ngSubmit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.cancelOrder())}),e.nrm(2,"ngx-ui-loader",90),e.j41(3,"div",91)(4,"div",92)(5,"button",93),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(6,"div",94)(7,"div",95),e.nrm(8,"lord-icon",96),e.j41(9,"div",97),e.nrm(10,"h3",98)(11,"p",99),e.k0s()(),e.j41(12,"div",100),e.nrm(13,"button",101),e.j41(14,"button",102),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()()()()()}if(2&a){const t=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",t.loaderOperationShap)("loaderId",t.deleteLoader)}}function ul(a,m){if(1&a){const t=e.RV6();e.j41(0,"cancel-sales-model",103),e.bIt("success",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.reload())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("orderId",t.orderSelected)}}function cr(a,m){if(1&a){const t=e.RV6();e.j41(0,"order-timeline",104),e.bIt("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("orderSelected",t.orderSelected)}}function gl(a,m){if(1&a){const t=e.RV6();e.j41(0,"form",89,5),e.bIt("ngSubmit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.SubmitOrder())}),e.nrm(2,"ngx-ui-loader",90),e.j41(3,"div",91)(4,"div",92)(5,"button",93),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(6,"div",94)(7,"div",95),e.nrm(8,"lord-icon",96),e.j41(9,"div",97),e.nrm(10,"h3",98)(11,"p",99),e.k0s()(),e.j41(12,"div",100),e.nrm(13,"button",101),e.j41(14,"button",102),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()()()()()}if(2&a){const t=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",t.loaderOperationShap)("loaderId",t.deleteLoader)}}let _l=(()=>{class a extends Ee.w{constructor(t,r,n,o,p,c,D,ne,re,oe,se,W,q,Q){super(t,r,ne,n,p,c,D),this.baseService=n,this.offerOrderService=o,this.authDaamService=re,this.employeeService=oe,this.regionService=se,this.cityService=W,this.router=q,this.excelService=Q,this.title="sales.salesOrder.assignOrder",this.titleOperation="sales.salesOrder.assignOrder",this.keySelected="",this.employees=[],this.searchForm={},this.roles=[],this.userTypes=[],this.clientSelected=0,this.status=[],this.countLoad=2,this.isOrderEdit=!1,this.orderSelected={},this.users=[],this.truncks=[],this.isTrunck=!1,this.salesPersons=[],this.regions=[],this.cities=[],this.setDates=(V,E,ce)=>{if(V?.from||V?.to){const Te=V.to||V.from;this.pagination[E]=this.datePipe.transform(V.from||V.to,"yyyy-MM-ddT00:00:00"),this.pagination[ce]=this.datePipe.transform(Te,"yyyy-MM-ddT23:59:59.999")}else this.pagination[E]=null,this.pagination[ce]=null},this.loadentities(),this.GetRegions(),this.GetCities()}GetRegions(){this.regionService.getDropDown().subscribe(t=>{this.regions=t.data},t=>{console.log(t)})}GetCities(){this.cityService.getDropDown().subscribe(t=>{this.cities=t.data},t=>{console.log(t)})}GetSalesPersons(){this.employeeService.GetAllByType(9).subscribe(t=>{this.salesPersons=t.data},t=>{console.log(t)})}loadentities(){this.countLoad=this.countLoad+1,(!this.isResolveList||1!==this.countLoad)&&(this.pagination.status=50,this.baseService.get(this.pagination).pipe((0,R.Q)(this.notifier)).subscribe(t=>{this.ngxLoader.stopLoader(M.a7),this.entities=t.data,this.pagination.totalItems=t.totalItems,this.LoadSuccess()},t=>{this.ngxLoader.stopLoader(M.a7),this.alertService.error(t)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[])}openModal(t,r,n="md"){this.isOrderEdit=!1,this.form={},this.orderSelected=t,this.modalService.open(r,{centered:!0,size:n})}SubmitOrder(){}cancelOrder(){}ngOnInitMore(){}mapForm(t){return{...t}}onUpdateIsActive(t){this.baseService.updateActive(t).pipe((0,R.Q)(this.notifier)).subscribe(r=>{r?this.alertService.success():this.alertService.error("general.message."+r)},r=>{this.alertService.error()})}mapRegisterForm(t){let r={...t};return r.employeeCode=0,r}onSearch(){let t={...this.searchForm};this.ngxLoader.startLoader("allLoader"),this.setDates(t.dates,"visitDateFrom","visitDateTo"),this.setDates(t.creationDates,"creationTimeFrom","creationTimeTo"),this.loadentities()}LoadSuccess(){this.ngxLoader.stopLoader("allLoader")}onReset(){this.form={},this.searchForm={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems}}configRoute(){this.routerActive.data.pipe((0,R.Q)(this.notifier)).subscribe(t=>{this.entities=t.data,this.pagination.totalItems=t.data?.totalItems},()=>{this.alertService.error()})}mapExcel(){let t=[];return this.entities.forEach(r=>{t.push({"Order Code":r.orderCode,"Created Date":r.createdDate,"City Name":r.cityName,"District Name":r.districtName?r.districtName:"--","Agent Name":r.agentName,Mobile:r.mobile,"Channel Name":r.channelName,"Assigned To":r.teamNames,Times:r.workTimes,"Visit Date":r.visitDate,Services:r.services})}),t}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,this.translateService.instant(this.title),[])}checkEdit(t){return!t.isCancel&&!t.isFinish}openStatusModal(t,r,n,o="md"){this.isEditForm=!1,this.form={},this.form={id:t,status:n},this.modalService.open(r,{centered:!0,size:o})}openModalClient(t,r,n="xl"){this.clientSelected=t.orderCode,this.form=t,this.isOrderEdit=!1,this.modalService.open(r,{centered:!0,size:n})}copytext(t){navigator.clipboard.writeText(t),this.alertService.info(t)}openEditOrderModal(t,r,n="md"){this.form={},this.isOrderEdit=!0,this.clientSelected=t,this.modalService.open(r,{centered:!0,size:n})}OpenOrderTimeLineModel(t,r,n="md"){this.orderSelected=t,this.modalService.open(r,{centered:!0,size:n})}mapUrl(t,r){return null===t||null==r?"":`https://www.google.com/maps/dir//${r},${t}/@${r},${t},17z?hl=en-US`}PrintOrderReceived(t){this.ngxLoader.startLoader("assignLoader"),this.baseService.PrintOrderReceived(t).pipe((0,Y.O)(),(0,Z.c)(100),(0,ee.Z)(),(0,R.Q)(this.notifier),(0,z.j)(()=>this.ngxLoader.stopLoader("assignLoader"))).subscribe(r=>{this.openUrl(r)},r=>{this.alertService.error("general.message."+r)})}openUrl(t){let r=new Blob([t],{type:t.type});var n=URL.createObjectURL(r);window.open(n,"_blank")}reload(){this.offerOrderService.GetOrderCountSource.next(!0),this.loadentities()}goNew(){this.router.navigateByUrl("/sales/new")}static{this.\u0275fac=function(r){return new(r||a)(e.rXU($.nX),e.rXU(F.c$),e.rXU(In),e.rXU(Oe),e.rXU(ae.u),e.rXU(k.vh),e.rXU(X.eD),e.rXU(O.Bq),e.rXU(nt.J),e.rXU(tt.O),e.rXU(ct.S),e.rXU(Ve.h),e.rXU($.Ix),e.rXU(qe.V))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["assign-order"]],inputs:{isTrunck:"isTrunck"},features:[e.Vt3],decls:51,vars:51,consts:[["tableMaster",""],["cancelOrderModal",""],["deleteModal",""],["OrderTimeLineModel",""],["StatusOrderModal",""],["formEntity","ngForm"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],["overlayColor","rgba(255,255,255,0.05)","fgsColor","rgba(255,255,255,0)",3,"loaderId"],[3,"addNew","reset","search","exportXlsx","addPermission","showAdd","showExport","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","number","id","id","name","id",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["type","text","mwlFlatpickr","","id","isDate","mode","range","altFormat","d/m/Y",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],["InputTirmFilter","","type","search","id","clientName","name","clientName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["name","name","bindValue","id","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],["name","regionId","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","placeholder","ngModel"],["name","cityId","bindValue","code","bindLabel","name",3,"ngModelChange","items","multiple","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],[2,"width",".2%"],["translate","",2,"width",".5%"],["pSortableColumn","offerOrderMasterId","translate","",2,"width","6%"],[1,"ri-expand-up-down-line"],["pSortableColumn","creationTime","translate","",2,"width","12%"],["pSortableColumn","clientId","translate","",2,"width","10%"],["pSortableColumn","clientVisitDate","translate","",2,"width","12%"],["translate","",2,"width","8%"],["pSortableColumn","shippingTruckName","translate","",2,"width","8%"],["translate","",2,"width","6%"],["translate","",2,"width","10%"],[1,"fs-5"],["type","button","pRipple","",1,"border-0","p-button-text","p-button-rounded","p-button-plain",3,"pRowToggler","ngClass"],[1,"code-pointer"],[1,"badge","bg-success-subtle","text-success"],[1,"badge","bg-primary-subtle","text-primary","my-1"],["class","badge bg-danger-subtle text-danger mx-1","translate","orderManagement.order.noMap",4,"ngIf"],["target","_blank","class","badge bg-success-subtle text-success mx-1","translate","orderManagement.order.viewMap",3,"href",4,"ngIf"],[4,"ngIf"],["translate","orderManagement.order.noMap",1,"badge","bg-danger-subtle","text-danger","mx-1"],["target","_blank","translate","orderManagement.order.viewMap",1,"badge","bg-success-subtle","text-success","mx-1",3,"href"],[1,"ri-map-pin-line"],["tooltipPosition","top",1,"btn","btn-sm","btn-warning","edit-list","mx-1",3,"pTooltip"],[1,"ri-swap-line","align-bottom"],["tooltipPosition","top",1,"btn","btn-sm","btn-success","edit-list","mx-1",3,"pTooltip"],[1,"ri-checkbox-circle-fill","align-bottom"],[1,"d-inline-block"],["class","btn btn-sm btn-primary edit-list mx-1","tooltipPosition","top",3,"pTooltip","click",4,"hasPermission"],[1,"dropdown-custom","d-inline-block"],["type","button",1,"btn","dropbtn","btn-soft-secondary","btn-sm","dropdown-custom","arrow-none"],[1,"ri-more-fill"],[1,"dropdown-menu","dropdown-menu-end","dropdown-content",2,"left","0"],[3,"click",4,"hasPermission"],["tooltipPosition","top",1,"btn","btn-sm","btn-primary","edit-list","mx-1",3,"click","pTooltip"],[1,"ri-checkbox-fill","align-bottom"],[3,"click"],[1,"dropdown-item"],[1,"text-primary","ri-printer-line","align-bottom","me-2"],["translate","sales.salesOrder.printBillOfLading"],[1,"text-warning","ri-skip-back-fill","align-bottom","me-2"],["translate","sales.salesOrder.sureOrder"],[1,"text-danger","ri-close-fill","align-bottom","me-2"],["translate","general.action.cancel"],["colspan","17"],[1,"table-detail"],["dataKey","id",3,"value"],["pTemplate","emptymessage"],["translate","sales.salesOrder.itemName",2,"width","10%"],["translate","sales.salesOrder.unit",2,"width","6%"],["translate","sales.salesOrder.clientQuantity",2,"width","8%"],["translate","sales.salesOrder.approvedQuantity",2,"width","8%"],["colspan","8"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[3,"ngSubmit"],[3,"hasProgressBar","fgsType","loaderId"],[1,"modal-content"],[1,"modal-header"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","btn-close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mt-2","text-center"],["src","https://cdn.lordicon.com/gdfrsvpt.json","stroke","bold","state","hover-oscillate","trigger","loop","colors","primary:#f7b84b,secondary:#f06548",2,"width","130px","height","130px"],[1,"pt-2","fs-15","mx-4","mx-sm-5"],["translate","orderManagement.order.AreYouSureMessage"],[1,"text-muted","mx-4","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","submit","id","save","translate","general.action.save",1,"btn","w-sm","btn-danger"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light",3,"click"],[3,"success","dismiss","orderId"],[3,"dismiss","orderSelected"]],template:function(r,n){if(1&r){const o=e.RV6();e.j41(0,"div",6)(1,"div",7)(2,"div",8),e.nrm(3,"ngx-ui-loader",9),e.j41(4,"base-filter",10),e.bIt("addNew",function(){return e.eBV(o),e.Njj(n.goNew())})("reset",function(){return e.eBV(o),e.Njj(n.onReset())})("search",function(){return e.eBV(o),e.Njj(n.onSearch())})("exportXlsx",function(){return e.eBV(o),e.Njj(n.onExportXlsx())}),e.qex(5,11),e.j41(6,"div",12)(7,"div",13)(8,"input",14),e.nI1(9,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.pagination.id,c)||(n.pagination.id=c),e.Njj(c)}),e.k0s(),e.nrm(10,"i",15),e.k0s()(),e.j41(11,"div",12)(12,"input",16),e.nI1(13,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.searchForm.creationDates,c)||(n.searchForm.creationDates=c),e.Njj(c)}),e.k0s()(),e.j41(14,"div",12)(15,"div",13)(16,"input",17),e.nI1(17,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.pagination.clientName,c)||(n.pagination.clientName=c),e.Njj(c)}),e.k0s(),e.nrm(18,"i",15),e.k0s()(),e.j41(19,"div",12)(20,"div",13)(21,"ng-select",18),e.nI1(22,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.pagination.salesPersonId,c)||(n.pagination.salesPersonId=c),e.Njj(c)}),e.k0s()()(),e.j41(23,"div",12)(24,"input",16),e.nI1(25,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.searchForm.dates,c)||(n.searchForm.dates=c),e.Njj(c)}),e.k0s()(),e.j41(26,"div",12)(27,"div",13)(28,"ng-select",19),e.nI1(29,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.pagination.regionId,c)||(n.pagination.regionId=c),e.Njj(c)}),e.k0s()()(),e.j41(30,"div",12)(31,"div",13)(32,"ng-select",20),e.nI1(33,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.pagination.cityId,c)||(n.pagination.cityId=c),e.Njj(c)}),e.k0s()()(),e.bVm(),e.k0s(),e.j41(34,"div",21)(35,"div",22)(36,"p-table",23,0),e.bIt("onLazyLoad",function(c){return e.eBV(o),e.Njj(n.tableChange(c))})("selectionChange",function(c){return e.eBV(o),e.Njj(n.onSelectionChange(c))}),e.DNE(38,Rs,26,0,"ng-template",24)(39,pl,30,21,"ng-template",25)(40,lr,7,1,"ng-template",26),e.k0s()(),e.DNE(41,Se,2,0,"div",27)(42,Zt,6,8,"div",28),e.k0s()()()(),e.DNE(43,dr,15,3,"ng-template",null,1,e.C5r)(45,ul,1,1,"ng-template",null,2,e.C5r)(47,cr,1,1,"ng-template",null,3,e.C5r)(49,gl,15,3,"ng-template",null,4,e.C5r)}2&r&&(e.R7$(3),e.Y8G("loaderId","assignLoader"),e.R7$(),e.Y8G("addPermission",e.lJ4(50,xs))("showAdd",!0)("showExport",!1)("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(4),e.FS9("placeholder",e.bMT(9,36,"orderManagement.order.orderCode")),e.R50("ngModel",n.pagination.id),e.R7$(4),e.FS9("placeholder",e.bMT(13,38,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.creationDates),e.R7$(4),e.FS9("placeholder",e.bMT(17,40,"orderManagement.order.agentName")),e.R50("ngModel",n.pagination.clientName),e.R7$(5),e.FS9("placeholder",e.bMT(22,42,"sales.salesOrder.salsePerson")),e.Y8G("items",n.salesPersons)("multiple",!1),e.R50("ngModel",n.pagination.salesPersonId),e.R7$(3),e.FS9("placeholder",e.bMT(25,44,"sales.salesOrder.clientVisitDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.dates),e.R7$(4),e.FS9("placeholder",e.bMT(29,46,"client.client.regionName")),e.Y8G("items",n.regions)("multiple",!1),e.R50("ngModel",n.pagination.regionId),e.R7$(4),e.FS9("placeholder",e.bMT(33,48,"client.client.cityName")),e.Y8G("items",n.cities)("multiple",!1),e.R50("ngModel",n.pagination.cityId),e.R7$(4),e.Y8G("value",n.entities)("rows",n.pagination.pageSize)("lazy",!0)("totalRecords",n.pagination.totalItems),e.R7$(5),e.Y8G("ngIf",n.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems>0))},dependencies:[k.YU,k.bT,g.qT,g.me,g.Q0,g.BC,g.cb,g.vS,g.cV,O.s5,fe.kL,Le.b,$e.p,Be.g,F.Mm,B.XI,Xe.Ei,B.Tg,B.FP,X.Cv,ve.vr,ke.m,ye.p,et.m,je,k.vh,F.D9],encapsulation:2})}}return a})();var ui=x(79284),gi=x(16229),an=x(12822);const yn=()=>["salesOrder.register"],hl=()=>["smApprove.sureOrder"],Es=()=>["smApprove.salesChangeQTY"],Ds=()=>["smApprove.cancel"];function mr(a,m){1&a&&(e.j41(0,"tr",30),e.nrm(1,"th",31),e.j41(2,"th",32),e.EFF(3,"#"),e.k0s(),e.j41(4,"th",33),e.nrm(5,"i",34),e.EFF(6," orderManagement.order.orderCode "),e.k0s(),e.j41(7,"th",35),e.nrm(8,"i",34),e.EFF(9," orderManagement.order.creation "),e.k0s(),e.j41(10,"th",36),e.nrm(11,"i",34),e.EFF(12," orderManagement.order.agentName "),e.k0s(),e.j41(13,"th",37),e.EFF(14," sales.salesOrder.salsePerson "),e.k0s(),e.j41(15,"th",38),e.nrm(16,"i",34),e.EFF(17," sales.salesOrder.clientVisitDate "),e.k0s(),e.j41(18,"th",39),e.nrm(19,"i",34),e.EFF(20," sales.salesOrder.totalQuantity "),e.k0s(),e.j41(21,"th",40),e.nrm(22,"i",34),e.EFF(23," sales.salesOrder.netPrice "),e.k0s(),e.nrm(24,"th",41),e.k0s())}function pr(a,m){if(1&a){const t=e.RV6();e.j41(0,"button",53),e.nI1(1,"translate"),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,o=e.XpG(),p=e.sdS(44);return e.Njj(o.openModal(n.id,p))}),e.nrm(2,"i",54),e.k0s()}2&a&&e.FS9("pTooltip",e.bMT(1,1,"sales.salesOrder.approved"))}function Vs(a,m){if(1&a){const t=e.RV6();e.j41(0,"button",55),e.nI1(1,"translate"),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,o=e.XpG(),p=e.sdS(50);return e.Njj(o.openModal(n.id,p))}),e.nrm(2,"i",56),e.k0s()}2&a&&e.FS9("pTooltip",e.bMT(1,1,"sales.salesOrder.backToSales"))}function fl(a,m){if(1&a){const t=e.RV6();e.j41(0,"button",57),e.nI1(1,"translate"),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,o=e.XpG(),p=e.sdS(46);return e.Njj(o.openModal(n.id,p))}),e.nrm(2,"i",58),e.k0s()}2&a&&e.FS9("pTooltip",e.bMT(1,1,"general.action.cancel"))}function ur(a,m){if(1&a){const t=e.RV6();e.j41(0,"tr",42)(1,"td"),e.nrm(2,"button",43),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td")(6,"bdi",44),e.EFF(7),e.k0s()(),e.j41(8,"td")(9,"span",45),e.EFF(10),e.k0s(),e.EFF(11),e.nI1(12,"date"),e.k0s(),e.j41(13,"td",46),e.bIt("click",function(){const n=e.eBV(t).$implicit,o=e.XpG(),p=e.sdS(48);return e.Njj(o.openModal(n.clientId,p,"md"))}),e.j41(14,"a",47),e.EFF(15),e.k0s()(),e.j41(16,"td"),e.EFF(17),e.k0s(),e.j41(18,"td"),e.EFF(19),e.nI1(20,"date"),e.k0s(),e.j41(21,"td"),e.EFF(22),e.k0s(),e.j41(23,"td"),e.EFF(24),e.k0s(),e.j41(25,"td")(26,"div",48),e.nrm(27,"i",49),e.DNE(28,pr,3,3,"button",50)(29,Vs,3,3,"button",51)(30,fl,3,3,"button",52),e.k0s()()()}if(2&a){const t=m.$implicit,r=m.rowIndex,n=m.expanded;e.R7$(2),e.Y8G("pRowToggler",t)("ngClass",n?" ri-arrow-down-s-line":"  ri-arrow-up-s-line"),e.R7$(2),e.JRh(r+1),e.R7$(3),e.SpI("#SO#",t.id,""),e.R7$(3),e.SpI("",t.creatorName," "),e.R7$(),e.SpI(" ",e.i5U(12,14,t.creationTime,"yyyy-MM-dd HH:mm")," "),e.R7$(4),e.SpI(" ",t.clientName," "),e.R7$(2),e.JRh(t.salsePersonName),e.R7$(2),e.SpI(" ",e.i5U(20,17,t.acutalVisitDate,"yyyy-MM-dd HH:mm"),""),e.R7$(3),e.JRh(t.totalQuantity),e.R7$(2),e.JRh(t.netPrice),e.R7$(4),e.Y8G("hasPermission",e.lJ4(20,hl)),e.R7$(),e.Y8G("hasPermission",e.lJ4(21,Es)),e.R7$(),e.Y8G("hasPermission",e.lJ4(22,Ds))}}function gr(a,m){1&a&&(e.j41(0,"tr"),e.nrm(1,"th",63)(2,"th",64)(3,"th",65)(4,"th",66)(5,"th",67)(6,"th",68),e.k0s())}function bl(a,m){if(1&a&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&a){const t=e.XpG().$implicit;e.R7$(),e.JRh(t.approvedQuantity)}}function Ls(a,m){if(1&a){const t=e.RV6();e.j41(0,"input",72),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG().$implicit;return e.DH7(o.approvedQuantity,n)||(o.approvedQuantity=n),e.Njj(n)}),e.k0s()}if(2&a){const t=e.XpG().$implicit;e.R50("ngModel",t.approvedQuantity)}}function rt(a,m){if(1&a){const t=e.RV6();e.j41(0,"button",53),e.nI1(1,"translate"),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,o=e.XpG(2);return e.Njj(o.saveQuantity(n.id,n))}),e.nrm(2,"i",54),e.k0s()}2&a&&e.FS9("pTooltip",e.bMT(1,1,"general.action.save"))}function _r(a,m){if(1&a&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.DNE(8,bl,2,1,"span",69)(9,Ls,1,1,"input",70),e.k0s(),e.j41(10,"td"),e.EFF(11),e.k0s(),e.j41(12,"td"),e.DNE(13,rt,3,3,"button",71),e.k0s()()),2&a){const t=m.$implicit;e.R7$(2),e.JRh(t.itemName),e.R7$(2),e.JRh(t.unitName),e.R7$(2),e.JRh(t.clientQuantity),e.R7$(2),e.Y8G("ngIf",!t.isEdit),e.R7$(),e.Y8G("ngIf",t.isEdit),e.R7$(2),e.JRh(t.price),e.R7$(2),e.Y8G("ngIf",t.isEdit)}}function qn(a,m){1&a&&(e.j41(0,"tr"),e.nrm(1,"td",73),e.k0s())}function $s(a,m){if(1&a&&(e.j41(0,"tr")(1,"td",59)(2,"div",60)(3,"p-table",61),e.DNE(4,gr,7,0,"ng-template",25)(5,_r,14,7,"ng-template",26)(6,qn,2,0,"ng-template",62),e.k0s()()()()),2&a){const t=m.$implicit;e.R7$(3),e.Y8G("value",t.offerOrderDetails)}}function Bs(a,m){1&a&&(e.j41(0,"div",74),e.EFF(1," general.table.noData "),e.k0s())}function vl(a,m){if(1&a){const t=e.RV6();e.j41(0,"div",75)(1,"div",76),e.nrm(2,"ngb-pagination-info",77),e.j41(3,"table-length",78),e.bIt("lengthChange",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",79)(5,"ngb-pagination",80),e.bIt("pageChange",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.pagination.pageNumber,n)||(o.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&a){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function Cl(a,m){if(1&a){const t=e.RV6();e.j41(0,"form",81,5),e.bIt("ngSubmit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.SubmitOrder())}),e.nrm(2,"ngx-ui-loader",82),e.j41(3,"div",83)(4,"div",84)(5,"button",85),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(6,"div",86)(7,"div",87),e.nrm(8,"lord-icon",88),e.j41(9,"div",89),e.nrm(10,"h3",90)(11,"p",91),e.k0s()(),e.j41(12,"div",92),e.nrm(13,"button",93),e.j41(14,"button",94),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()()()()()}if(2&a){const t=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",t.loaderOperationShap)("loaderId",t.deleteLoader)}}function Sl(a,m){if(1&a){const t=e.RV6();e.j41(0,"cancel-sales-model",95),e.bIt("success",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.reload())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("orderId",t.operationId)}}function jl(a,m){if(1&a){const t=e.RV6();e.j41(0,"client-summary",96),e.bIt("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("clientId",t.operationId)}}function Il(a,m){1&a&&(e.j41(0,"div",102),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function Tn(a,m){if(1&a){const t=e.RV6();e.j41(0,"form",81,5),e.bIt("ngSubmit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.RequestChangeQuantity())}),e.nrm(2,"ngx-ui-loader",82),e.j41(3,"div",83)(4,"div",84)(5,"button",85),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(6,"div",86)(7,"div",97)(8,"label",98),e.EFF(9,"sales.salesOrder.changeQuantityMessage"),e.k0s(),e.j41(10,"textarea",99,6),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.form.changeQuantityMessage,n)||(o.form.changeQuantityMessage=n),e.Njj(n)}),e.k0s(),e.DNE(12,Il,2,0,"div",100),e.k0s(),e.j41(13,"div",92),e.nrm(14,"button",101),e.j41(15,"button",94),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()()()()()}if(2&a){const t=e.sdS(1),r=e.sdS(11),n=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderOperationShap)("loaderId",n.deleteLoader),e.R7$(8),e.R50("ngModel",n.form.changeQuantityMessage),e.R7$(2),e.Y8G("ngIf",r.invalid&&r.touched),e.R7$(2),e.Y8G("disabled",!t.valid)}}let yl=(()=>{class a extends Ee.w{constructor(t,r,n,o,p,c,D,ne,re,oe,se,W,q,Q,V,E,ce){super(t,r,D,n,o,p,c),this.baseService=n,this.authDaamService=ne,this.teamService=re,this.workTimeService=oe,this.excelService=se,this.cityService=W,this.districtService=q,this.employeeService=Q,this.regionService=V,this.channelService=E,this.router=ce,this.title="sales.salesOrder.newOrders",this.titleOperation="sales.salesOrder.newOrders",this.keySelected="",this.employees=[],this.searchForm={},this.isResolveList=!0,this.activeindex="2",this.active=2,this.clientSelected=0,this.status=[],this.countLoad=2,this.isOrderEdit=!1,this.orderSelected={},this.users=[],this.salesPersons=[],this.regions=[],this.cities=[],this.setDates=(le,Te,at)=>{if(le?.from||le?.to){const es=le.to||le.from;this.pagination[Te]=this.datePipe.transform(le.from||le.to,"yyyy-MM-ddT00:00:00"),this.pagination[at]=this.datePipe.transform(es,"yyyy-MM-ddT23:59:59.999")}else this.pagination[Te]=null,this.pagination[at]=null},this.loadentities(),this.GetSalesPersons(),this.GetRegions(),this.GetCities()}GetRegions(){this.regionService.getDropDown().subscribe(t=>{this.regions=t.data},t=>{console.log(t)})}GetCities(){this.cityService.getDropDown().subscribe(t=>{this.cities=t.data},t=>{console.log(t)})}GetSalesPersons(){this.employeeService.GetAllByType(9).subscribe(t=>{this.salesPersons=t.data},t=>{console.log(t)})}loadentities(){this.countLoad=this.countLoad+1,(!this.isResolveList||1!==this.countLoad)&&(this.pagination.status=20,this.baseService.get(this.pagination).pipe((0,R.Q)(this.notifier)).subscribe(t=>{this.ngxLoader.stopLoader(M.a7),this.entities=t.data,this.pagination.totalItems=t.totalItems,this.LoadSuccess()},t=>{this.ngxLoader.stopLoader(M.a7),this.alertService.error(t)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[])}SubmitOrder(){this.ngxLoader.startLoader(M.Fq),console.log(this.operationId),this.baseService.changStatus({id:this.operationId,status:30}).pipe((0,Y.O)(),(0,Z.c)(this.mainDelay),(0,ee.Z)(),(0,R.Q)(this.notifier),(0,z.j)(()=>this.ngxLoader.stopLoader(M.Fq))).subscribe({next:r=>{this.modalService.dismissAll(),this.reload(),this.alertService.success()}})}cancelOrder(){this.ngxLoader.startLoader(M.Fq),console.log(this.operationId),this.baseService.changStatus({id:this.operationId,status:40}).pipe((0,Y.O)(),(0,Z.c)(this.mainDelay),(0,ee.Z)(),(0,R.Q)(this.notifier),(0,z.j)(()=>this.ngxLoader.stopLoader(M.Fq))).subscribe({next:r=>{this.modalService.dismissAll(),this.loadentities(),this.alertService.success()}})}ngOnInitMore(){}mapForm(t){return{...t}}onUpdateIsActive(t){this.baseService.updateActive(t).pipe((0,R.Q)(this.notifier)).subscribe(r=>{r?this.alertService.success():this.alertService.error("general.message."+r)},r=>{this.alertService.error()})}mapRegisterForm(t){let r={...t};return r.employeeCode=0,r}onSearch(){let t={...this.searchForm};this.ngxLoader.startLoader("allLoader"),this.setDates(t.dates,"visitDateFrom","visitDateTo"),this.setDates(t.creationDates,"creationTimeFrom","creationTimeTo"),this.loadentities()}LoadSuccess(){this.ngxLoader.stopLoader("allLoader")}onReset(){this.form={},this.searchForm={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems}}mapExcel(){let t=[];return this.entities.forEach(r=>{t.push({"Order Code":r.orderCode,"Created Date":r.createdDate,"City Name":r.cityName,"District Name":r.districtName?r.districtName:"--",Status:this.translateService.instant(this.getTrnslate(r)),"Agent Name":r.agentName,Mobile:r.mobile,"Channel Name":r.channelName,"Assigned To":r.teamNames,Times:r.workTimes,"Visit Date":r.visitDate,Services:r.services})}),t}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,this.translateService.instant(this.title),[])}onNavChange(t){1===t.nextId&&(this.activeindex="1"),3===t.nextId&&(this.activeindex="3")}goRegister(){this.router.navigateByUrl("/managment/order/new")}goEdit(t){this.router.navigateByUrl("/managment/order/new")}getStatus(t){return 10==t.offerOrderStatus||20==t.offerOrderStatus?"bg-warning-subtle text-warning":30==t.offerOrderStatus?"bg-success-subtle text-success":40==t.offerOrderStatus?"bg-danger-subtle text-danger":50==t.offerOrderStatus?"bg-danger-success text-success":"bg-warning-subtle text-warning"}checkEdit(t){return!t.isCancel&&!t.isFinish}getTrnslate(t){return t.isCancel?"orderManagement.order.cancel":t.isFinish?"orderManagement.order.finish":t.isUrgent?"bg-danger-subtle text-danger":t.isReopen?"orderManagement.order.reopen":t.isAssign?"orderManagement.order.assign":t.isConfirmed?"orderManagement.order.confirmed":t.isFree?"orderManagement.order.free":"orderManagement.order.new"}openModalClient(t,r,n="xl"){this.clientSelected=t.orderCode,this.orderSelected=t,this.isOrderEdit=!1,this.modalService.open(r,{centered:!0,size:n})}copytext(t){navigator.clipboard.writeText(t),this.alertService.info(t)}openEditOrderModal(t,r,n="md"){this.form={},this.isOrderEdit=!0,this.clientSelected=t,this.modalService.open(r,{centered:!0,size:n})}OpenOrderTimeLineModel(t,r,n="md"){this.orderSelected=t,this.modalService.open(r,{centered:!0,size:n})}saveQuantity(t,r){this.baseService.UpdateQuantity({id:t,quantity:r.approvedQuantity}).pipe((0,R.Q)(this.notifier)).subscribe(o=>{o.success?(this.alertService.success(),this.loadentities()):this.alertService.error("general.message."+o)},o=>{this.alertService.error()}),console.log("Saved Quantity:",r.approvedQuantity)}openModalSummaryClient(t,r,n="xl"){this.clientSelected=t,this.isOrderEdit=!1,this.modalService.open(r,{centered:!0,size:n})}RequestChangeQuantity(){this.ngxLoader.startLoader(M.Fq),console.log(this.operationId),this.baseService.RequestChangeQuantity({id:this.operationId,changeQuantityMessage:this.form.changeQuantityMessage}).pipe((0,Y.O)(),(0,Z.c)(this.mainDelay),(0,ee.Z)(),(0,R.Q)(this.notifier),(0,z.j)(()=>this.ngxLoader.stopLoader(M.Fq))).subscribe({next:r=>{this.modalService.dismissAll(),this.reload(),this.alertService.success()}})}reload(){this.baseService.GetOrderCountSource.next(!0),this.loadentities()}goNew(){this.router.navigateByUrl("/sales/new")}static{this.\u0275fac=function(r){return new(r||a)(e.rXU($.nX),e.rXU(F.c$),e.rXU(Oe),e.rXU(ae.u),e.rXU(k.vh),e.rXU(X.eD),e.rXU(O.Bq),e.rXU(nt.J),e.rXU(zt.n),e.rXU(ui.G),e.rXU(qe.V),e.rXU(Ve.h),e.rXU(gi.m),e.rXU(tt.O),e.rXU(ct.S),e.rXU(an.l),e.rXU($.Ix))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-new-order"]],features:[e.Vt3],decls:51,vars:51,consts:[["tableMaster",""],["SubmitOrderModal",""],["deleteModal",""],["ClientInfo",""],["SubmitChangeQuantityModal",""],["formEntity","ngForm"],["changeQuantityMessage","ngModel"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],["overlayColor","rgba(255,255,255,0.05)","fgsColor","rgba(255,255,255,0)",3,"loaderId"],[3,"addNew","reset","search","exportXlsx","addPermission","showAdd","showExport","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","number","id","id","name","id",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["type","text","mwlFlatpickr","","id","isDate","mode","range","altFormat","d/m/Y",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],["InputTirmFilter","","type","search","id","clientName","name","clientName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["name","name","bindValue","id","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],["name","regionId","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","placeholder","ngModel"],["name","cityId","bindValue","code","bindLabel","name",3,"ngModelChange","items","multiple","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],[2,"width",".2%"],["translate","",2,"width",".5%"],["pSortableColumn","id","translate","",2,"width","6%"],[1,"ri-expand-up-down-line"],["pSortableColumn","creationTime","translate","",2,"width","12%"],["pSortableColumn","clientId","translate","",2,"width","10%"],["translate","",2,"width","8%"],["pSortableColumn","clientVisitDate","translate","",2,"width","8%"],["pSortableColumn","totalQuantity","translate","",2,"width","8%"],["pSortableColumn","netPrice","translate","",2,"width","6%"],["translate","",2,"width","10%"],[1,"fs-5"],["type","button","pRipple","",1,"border-0","p-button-text","p-button-rounded","p-button-plain",3,"pRowToggler","ngClass"],[1,"code-pointer"],[1,"badge","bg-success-subtle","text-success"],[3,"click"],["href","javascript:void(0)",1,"link-primary","link-offset-2","text-decoration-underline","link-underline-opacity-25","link-underline-opacity-100-hover"],[1,"d-inline"],[1,"ri-history-fill","d-inline","text-primary","fs-16","align-middle","me-1"],["class","btn btn-sm btn-success edit-list mx-1","tooltipPosition","top",3,"pTooltip","click",4,"hasPermission"],["class","btn btn-sm btn-warning edit-list mx-1","tooltipPosition","top",3,"pTooltip","click",4,"hasPermission"],["class","btn btn-sm btn-danger edit-list mx-1","tooltipPosition","top",3,"pTooltip","click",4,"hasPermission"],["tooltipPosition","top",1,"btn","btn-sm","btn-success","edit-list","mx-1",3,"click","pTooltip"],[1,"ri-check-double-fill","align-bottom"],["tooltipPosition","top",1,"btn","btn-sm","btn-warning","edit-list","mx-1",3,"click","pTooltip"],[1,"ri-logout-circle-r-line","align-bottom"],["tooltipPosition","top",1,"btn","btn-sm","btn-danger","edit-list","mx-1",3,"click","pTooltip"],[1,"ri-close-fill","align-bottom"],["colspan","17"],[1,"table-detail"],["dataKey","id",3,"value"],["pTemplate","emptymessage"],["translate","sales.salesOrder.itemName",2,"width","10%"],["translate","sales.salesOrder.unit",2,"width","6%"],["translate","sales.salesOrder.clientQuantity",2,"width","8%"],["translate","sales.salesOrder.approvedQuantity",2,"width","8%"],["translate","sales.salesOrder.price",2,"width","5%"],[2,"width","5%"],[4,"ngIf"],["type","number","class","form-control fs-6",3,"ngModel","ngModelChange",4,"ngIf"],["class","btn btn-sm btn-success edit-list mx-1","tooltipPosition","top",3,"pTooltip","click",4,"ngIf"],["type","number",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["colspan","8"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[3,"ngSubmit"],[3,"hasProgressBar","fgsType","loaderId"],[1,"modal-content"],[1,"modal-header"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","btn-close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mt-2","text-center"],["src","https://cdn.lordicon.com/gdfrsvpt.json","stroke","bold","state","hover-oscillate","trigger","loop","colors","primary:#f7b84b,secondary:#f06548",2,"width","130px","height","130px"],[1,"pt-2","fs-15","mx-4","mx-sm-5"],["translate","orderManagement.order.AreYouSureMessage"],[1,"text-muted","mx-4","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","submit","id","save","translate","general.action.save",1,"btn","w-sm","btn-danger"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light",3,"click"],[3,"success","dismiss","orderId"],[3,"dismiss","clientId"],[1,"mb-2"],["for","changeQuantityMessage","translate","",1,"required","text-bold","form-label"],["rows","5","InputTirmFilter","","name","changeQuantityMessage","type","text","id","changeQuantityMessage",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],["t","","type","submit","id","save","translate","general.action.save",1,"btn","w-sm","btn-danger",3,"disabled"],["translate","",1,"text-danger","text-center"]],template:function(r,n){if(1&r){const o=e.RV6();e.j41(0,"div",7)(1,"div",8)(2,"div",9),e.nrm(3,"ngx-ui-loader",10),e.j41(4,"base-filter",11),e.bIt("addNew",function(){return e.eBV(o),e.Njj(n.goNew())})("reset",function(){return e.eBV(o),e.Njj(n.onReset())})("search",function(){return e.eBV(o),e.Njj(n.onSearch())})("exportXlsx",function(){return e.eBV(o),e.Njj(n.onExportXlsx())}),e.qex(5,12),e.j41(6,"div",13)(7,"div",14)(8,"input",15),e.nI1(9,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.pagination.id,c)||(n.pagination.id=c),e.Njj(c)}),e.k0s(),e.nrm(10,"i",16),e.k0s()(),e.j41(11,"div",13)(12,"input",17),e.nI1(13,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.searchForm.creationDates,c)||(n.searchForm.creationDates=c),e.Njj(c)}),e.k0s()(),e.j41(14,"div",13)(15,"div",14)(16,"input",18),e.nI1(17,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.pagination.clientName,c)||(n.pagination.clientName=c),e.Njj(c)}),e.k0s(),e.nrm(18,"i",16),e.k0s()(),e.j41(19,"div",13)(20,"div",14)(21,"ng-select",19),e.nI1(22,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.pagination.salesPersonId,c)||(n.pagination.salesPersonId=c),e.Njj(c)}),e.k0s()()(),e.j41(23,"div",13)(24,"input",17),e.nI1(25,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.searchForm.dates,c)||(n.searchForm.dates=c),e.Njj(c)}),e.k0s()(),e.j41(26,"div",13)(27,"div",14)(28,"ng-select",20),e.nI1(29,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.pagination.regionId,c)||(n.pagination.regionId=c),e.Njj(c)}),e.k0s()()(),e.j41(30,"div",13)(31,"div",14)(32,"ng-select",21),e.nI1(33,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.pagination.cityId,c)||(n.pagination.cityId=c),e.Njj(c)}),e.k0s()()(),e.bVm(),e.k0s(),e.j41(34,"div",22)(35,"div",23)(36,"p-table",24,0),e.bIt("onLazyLoad",function(c){return e.eBV(o),e.Njj(n.tableChange(c))})("selectionChange",function(c){return e.eBV(o),e.Njj(n.onSelectionChange(c))}),e.DNE(38,mr,25,0,"ng-template",25)(39,ur,31,23,"ng-template",26)(40,$s,7,1,"ng-template",27),e.k0s()(),e.DNE(41,Bs,2,0,"div",28)(42,vl,6,8,"div",29),e.k0s()()()(),e.DNE(43,Cl,15,3,"ng-template",null,1,e.C5r)(45,Sl,1,1,"ng-template",null,2,e.C5r)(47,jl,1,1,"ng-template",null,3,e.C5r)(49,Tn,16,6,"ng-template",null,4,e.C5r)}2&r&&(e.R7$(3),e.Y8G("loaderId","newLoader"),e.R7$(),e.Y8G("addPermission",e.lJ4(50,yn))("showAdd",!0)("showExport",!1)("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(4),e.FS9("placeholder",e.bMT(9,36,"orderManagement.order.orderCode")),e.R50("ngModel",n.pagination.id),e.R7$(4),e.FS9("placeholder",e.bMT(13,38,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.creationDates),e.R7$(4),e.FS9("placeholder",e.bMT(17,40,"orderManagement.order.agentName")),e.R50("ngModel",n.pagination.clientName),e.R7$(5),e.FS9("placeholder",e.bMT(22,42,"sales.salesOrder.salsePerson")),e.Y8G("items",n.salesPersons)("multiple",!1),e.R50("ngModel",n.pagination.salesPersonId),e.R7$(3),e.FS9("placeholder",e.bMT(25,44,"sales.salesOrder.clientVisitDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.dates),e.R7$(4),e.FS9("placeholder",e.bMT(29,46,"client.client.regionName")),e.Y8G("items",n.regions)("multiple",!1),e.R50("ngModel",n.pagination.regionId),e.R7$(4),e.FS9("placeholder",e.bMT(33,48,"client.client.cityName")),e.Y8G("items",n.cities)("multiple",!1),e.R50("ngModel",n.pagination.cityId),e.R7$(4),e.Y8G("value",n.entities)("rows",n.pagination.pageSize)("lazy",!0)("totalRecords",n.pagination.totalItems),e.R7$(5),e.Y8G("ngIf",n.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems>0))},dependencies:[k.YU,k.bT,g.qT,g.me,g.Q0,g.BC,g.cb,g.vS,g.cV,O.s5,fe.kL,Le.b,$e.p,Be.g,Jt,F.Mm,B.XI,Xe.Ei,B.Tg,B.FP,X.Cv,ve.vr,ke.m,ye.p,et.m,je,k.vh,F.D9],encapsulation:2})}}return a})();const Tl=()=>["salesOrder.register"],hr=()=>["storePrepare.editTrunk"],Xs=()=>["storePrepare.shippingOrder"],en=()=>["storePrepare.newOrder"],_i=()=>["storePrepare.cancel"],Ps=a=>[a];function xl(a,m){1&a&&(e.j41(0,"tr",31),e.nrm(1,"th",32),e.j41(2,"th",33),e.EFF(3,"#"),e.k0s(),e.j41(4,"th",34),e.nrm(5,"i",35),e.EFF(6," orderManagement.order.orderCode "),e.k0s(),e.j41(7,"th",36),e.nrm(8,"i",35),e.EFF(9," orderManagement.order.creation "),e.k0s(),e.j41(10,"th",37),e.nrm(11,"i",35),e.EFF(12," orderManagement.order.agentName "),e.k0s(),e.j41(13,"th",38),e.EFF(14," sales.salesOrder.salsePerson "),e.k0s(),e.j41(15,"th",39),e.nrm(16,"i",35),e.EFF(17," sales.salesOrder.clientVisitDate "),e.k0s(),e.j41(18,"th",40),e.EFF(19," sales.salesOrder.deliveryStatus "),e.k0s(),e.j41(20,"th",41),e.nrm(21,"i",35),e.EFF(22," sales.salesOrder.totalQuantity "),e.k0s(),e.j41(23,"th",42),e.EFF(24," sales.salesOrder.clientLocationName "),e.k0s(),e.nrm(25,"th",40),e.k0s())}function kl(a,m){1&a&&e.nrm(0,"span",60)}function xn(a,m){1&a&&e.nrm(0,"span",61)}function yt(a,m){1&a&&e.nrm(0,"span",62)}function As(a,m){1&a&&e.nrm(0,"span",63)}function Rl(a,m){if(1&a&&(e.j41(0,"a",64),e.nrm(1,"i",65),e.k0s()),2&a){const t=e.XpG().$implicit,r=e.XpG();e.Y8G("href",r.mapUrl(null==t?null:t.lng,null==t?null:t.lat),e.B4B)}}function Ml(a,m){if(1&a){const t=e.RV6();e.j41(0,"button",67),e.nI1(1,"translate"),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2).$implicit,o=e.XpG(),p=e.sdS(46);return e.Njj(o.openShippingModal(n.id,p,"lg"))}),e.nrm(2,"i",68),e.k0s()}2&a&&e.FS9("pTooltip",e.bMT(1,1,"sales.salesOrder.shipping"))}function Ol(a,m){if(1&a&&(e.qex(0),e.DNE(1,Ml,3,3,"button",66),e.bVm()),2&a){const t=e.XpG().$implicit;e.R7$(),e.Y8G("ngIf",!(t.totalQuantityDelivery>0&&t.totalQuantityDelivery==t.totalQuantity))}}function Fl(a,m){if(1&a){const t=e.RV6();e.j41(0,"li",69),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,o=e.XpG(),p=e.sdS(52);return e.Njj(o.openStatusModal(n.id,p,50,"md"))}),e.j41(1,"span",70),e.nrm(2,"i",71)(3,"span",72),e.k0s()()}}function wl(a,m){if(1&a){const t=e.RV6();e.j41(0,"li",69),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,o=e.XpG(),p=e.sdS(52);return e.Njj(o.openStatusModal(n.id,p,10,"md"))}),e.j41(1,"span",70),e.nrm(2,"i",73)(3,"span",74),e.k0s()()}}function hi(a,m){if(1&a){const t=e.RV6();e.j41(0,"li",69),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,o=e.XpG(),p=e.sdS(48);return e.Njj(o.openModal(n.id,p))}),e.j41(1,"span",70),e.nrm(2,"i",75)(3,"span",76),e.k0s()()}}function v(a,m){if(1&a&&(e.j41(0,"tr",43)(1,"td"),e.nrm(2,"button",44),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td")(6,"bdi",45),e.EFF(7),e.k0s()(),e.j41(8,"td")(9,"span",46),e.EFF(10),e.k0s(),e.EFF(11),e.nI1(12,"date"),e.k0s(),e.j41(13,"td")(14,"span",47),e.EFF(15),e.k0s()(),e.j41(16,"td"),e.EFF(17),e.k0s(),e.j41(18,"td"),e.DNE(19,kl,1,0,"span",48)(20,xn,1,0,"span",49)(21,yt,1,0,"span",50),e.k0s(),e.j41(22,"td"),e.EFF(23),e.nI1(24,"date"),e.k0s(),e.j41(25,"td"),e.EFF(26),e.k0s(),e.j41(27,"td"),e.DNE(28,As,1,0,"span",51)(29,Rl,2,1,"a",52),e.k0s(),e.j41(30,"td")(31,"div",53),e.DNE(32,Ol,2,1,"ng-container",54),e.j41(33,"span",53)(34,"div",55)(35,"button",56),e.nrm(36,"i",57),e.k0s(),e.j41(37,"ul",58),e.DNE(38,Fl,4,0,"li",59)(39,wl,4,0,"li",59)(40,hi,4,0,"li",59),e.k0s()()()()()()),2&a){const t=m.$implicit,r=m.rowIndex,n=m.expanded;e.R7$(2),e.Y8G("pRowToggler",t)("ngClass",n?" ri-arrow-down-s-line":"  ri-arrow-up-s-line"),e.R7$(2),e.JRh(r+1),e.R7$(3),e.SpI("#SO#",t.id,""),e.R7$(3),e.SpI("",t.creatorName," "),e.R7$(),e.SpI(" ",e.i5U(12,19,t.creationTime,"yyyy-MM-dd HH:mm")," "),e.R7$(4),e.SpI("",t.clientName," "),e.R7$(2),e.JRh(t.salsePersonName),e.R7$(2),e.Y8G("ngIf",t.totalQuantityDelivery<=0),e.R7$(),e.Y8G("ngIf",t.totalQuantityDelivery>0&&t.totalQuantityDelivery==t.totalQuantity),e.R7$(),e.Y8G("ngIf",t.totalQuantityDelivery>0&&t.totalQuantityDelivery<t.totalQuantity),e.R7$(2),e.SpI(" ",e.i5U(24,22,t.acutalVisitDate,"yyyy-MM-dd HH:mm"),""),e.R7$(3),e.JRh(t.totalQuantity),e.R7$(2),e.Y8G("ngIf",""==t.lng),e.R7$(),e.Y8G("ngIf",null==t?null:t.lng),e.R7$(3),e.Y8G("hasPermission",e.lJ4(25,hr)),e.R7$(6),e.Y8G("hasPermission",e.lJ4(26,Xs)),e.R7$(),e.Y8G("hasPermission",e.lJ4(27,en)),e.R7$(),e.Y8G("hasPermission",e.lJ4(28,_i))}}function j(a,m){1&a&&(e.j41(0,"tr"),e.nrm(1,"th",81)(2,"th",82)(3,"th",83)(4,"th",84)(5,"th",85),e.k0s())}function S(a,m){if(1&a&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td")(8,"span"),e.EFF(9),e.k0s()(),e.j41(10,"td")(11,"span"),e.EFF(12),e.k0s()()()),2&a){const t=m.$implicit;e.R7$(2),e.JRh(t.itemName),e.R7$(2),e.JRh(t.unitName),e.R7$(2),e.JRh(t.clientQuantity),e.R7$(3),e.JRh(t.approvedQuantity),e.R7$(3),e.JRh(t.deliveryQuantity)}}function N(a,m){1&a&&(e.j41(0,"tr"),e.nrm(1,"td",86),e.k0s())}function U(a,m){if(1&a&&(e.j41(0,"tr")(1,"td",77)(2,"div",78)(3,"p-table",79),e.DNE(4,j,6,0,"ng-template",26)(5,S,13,5,"ng-template",27)(6,N,2,0,"ng-template",80),e.k0s()()()()),2&a){const t=m.$implicit;e.R7$(3),e.Y8G("value",t.offerOrderDetails)}}function pe(a,m){1&a&&(e.j41(0,"div",87),e.EFF(1," general.table.noData "),e.k0s())}function Fe(a,m){if(1&a){const t=e.RV6();e.j41(0,"div",88)(1,"div",89),e.nrm(2,"ngb-pagination-info",90),e.j41(3,"table-length",91),e.bIt("lengthChange",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",92)(5,"ngb-pagination",93),e.bIt("pageChange",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.pagination.pageNumber,n)||(o.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&a){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function he(a,m){if(1&a){const t=e.RV6();e.j41(0,"form",94,7),e.bIt("ngSubmit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.cancelOrder())}),e.nrm(2,"ngx-ui-loader",95),e.j41(3,"div",96)(4,"div",97)(5,"button",98),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(6,"div",99)(7,"div",100),e.nrm(8,"lord-icon",101),e.j41(9,"div",102),e.nrm(10,"h3",103)(11,"p",104),e.k0s()(),e.j41(12,"div",105),e.nrm(13,"button",106),e.j41(14,"button",107),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()()()()()}if(2&a){const t=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",t.loaderOperationShap)("loaderId",t.deleteLoader)}}function fr(a,m){if(1&a){const t=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td")(4,"ng-select",137),e.mxI("ngModelChange",function(n){const o=e.eBV(t).$implicit;return e.DH7(o.unitId,n)||(o.unitId=n),e.Njj(n)}),e.k0s()(),e.j41(5,"td")(6,"input",138),e.bIt("ngModelChange",function(n){const o=e.eBV(t).$index,p=e.XpG(2);return e.Njj(p.quantitySelect(n,o))}),e.mxI("ngModelChange",function(n){const o=e.eBV(t).$implicit;return e.DH7(o.quantity,n)||(o.quantity=n),e.Njj(n)}),e.k0s()()()}if(2&a){const t=m.$implicit,r=m.$index;e.R7$(2),e.SpI(" ",t.itemName," "),e.R7$(2),e.Y8G("name","unitId"+e.eq3(6,Ps,r))("items",t.units),e.R50("ngModel",t.unitId),e.R7$(2),e.Y8G("name","quantity"+e.eq3(8,Ps,r)),e.R50("ngModel",t.quantity)}}function Nl(a,m){if(1&a){const t=e.RV6();e.j41(0,"tr",139),e.nrm(1,"td",140),e.j41(2,"td",141)(3,"table",142)(4,"tbody")(5,"tr"),e.nrm(6,"td",143),e.j41(7,"td",144),e.EFF(8),e.nI1(9,"translate"),e.k0s()(),e.j41(10,"tr"),e.nrm(11,"td",145),e.j41(12,"td",144)(13,"div",146)(14,"ng-select",147),e.bIt("change",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.getTotal())}),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG(2);return e.DH7(o.form.totalAddDiscountType,n)||(o.form.totalAddDiscountType=n),e.Njj(n)}),e.k0s(),e.j41(15,"input",148),e.bIt("change",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.getTotal())}),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG(2);return e.DH7(o.form.totalAddDiscount,n)||(o.form.totalAddDiscount=n),e.Njj(n)}),e.k0s()()()(),e.j41(16,"tr",149),e.nrm(17,"td",150),e.j41(18,"td",144),e.EFF(19),e.nI1(20,"translate"),e.k0s()(),e.j41(21,"tr",151),e.nrm(22,"th",152),e.j41(23,"th",144),e.EFF(24),e.nI1(25,"translate"),e.k0s()()()()()()}if(2&a){const t=e.XpG(2);e.R7$(8),e.Lme("",t.form.total," ",e.bMT(9,9,"orderManagement.order.currancy"),""),e.R7$(6),e.Y8G("items",t.discountTypes),e.R50("ngModel",t.form.totalAddDiscountType),e.R7$(),e.R50("ngModel",t.form.totalAddDiscount),e.R7$(4),e.Lme("",t.form.tax," ",e.bMT(20,11,"orderManagement.order.currancy"),""),e.R7$(5),e.Lme("",t.form.totalNet," ",e.bMT(25,13,"orderManagement.order.currancy"),"")}}function ut(a,m){if(1&a){const t=e.RV6();e.j41(0,"div",108)(1,"div",109)(2,"h4",110),e.nrm(3,"span",111),e.k0s(),e.j41(4,"button",112),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss("Cross click"))}),e.k0s()(),e.j41(5,"div",99),e.nrm(6,"ngx-ui-loader",95),e.j41(7,"form",113,7),e.bIt("submit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.updateTruck())}),e.j41(9,"div",8)(10,"div",114)(11,"label",115),e.EFF(12,"sales.salesOrder.acutalDeliveryDate"),e.k0s(),e.j41(13,"input",116),e.bIt("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.dateChangeModal(n))}),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.form.acutalVisitDate,n)||(o.form.acutalVisitDate=n),e.Njj(n)}),e.k0s()(),e.j41(14,"div",114),e.nrm(15,"label",117),e.j41(16,"ng-select",118),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.form.clientLocationId,n)||(o.form.clientLocationId=n),e.Njj(n)}),e.k0s()(),e.j41(17,"div",119)(18,"label",115),e.EFF(19,"sales.salesOrder.truncks"),e.k0s(),e.j41(20,"ng-select",120),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.form.shippingTruckId,n)||(o.form.shippingTruckId=n),e.Njj(n)}),e.k0s()()(),e.j41(21,"div",121)(22,"div",122)(23,"div",123)(24,"div",124),e.nrm(25,"h5",125),e.k0s()(),e.j41(26,"div",23)(27,"div",126)(28,"table",127)(29,"thead",128)(30,"tr"),e.nrm(31,"th",129)(32,"th",130)(33,"th",131),e.k0s()(),e.j41(34,"tbody"),e.Z7z(35,fr,7,10,"tr",null,e.Vm6),e.DNE(37,Nl,26,15,"tr",132),e.k0s()()()()()(),e.j41(38,"div",133)(39,"button",134),e.nrm(40,"i",135)(41,"span",136),e.k0s()()()()()}if(2&a){const t=e.sdS(8),r=e.XpG();e.R7$(6),e.Y8G("hasProgressBar",!1)("fgsType",r.loaderOperationShap)("loaderId",r.operationLoader),e.R7$(7),e.R50("ngModel",r.form.acutalVisitDate),e.Y8G("altInput",!0)("enableTime",!0)("convertModelValue",!0)("dateFormat","d-m-Y H:i"),e.R7$(3),e.Y8G("disabled",!0)("items",r.locations),e.R50("ngModel",r.form.clientLocationId),e.R7$(4),e.Y8G("items",r.truncks),e.R50("ngModel",r.form.shippingTruckId),e.R7$(15),e.Dyx(r.form.details),e.R7$(2),e.Y8G("ngIf",!1),e.R7$(2),e.Y8G("disabled",!t.valid)}}function fi(a,m){if(1&a){const t=e.RV6();e.j41(0,"cancel-sales-model",153),e.bIt("success",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.loadentities())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("orderId",t.orderSelected)}}function Gl(a,m){if(1&a){const t=e.RV6();e.j41(0,"order-timeline",154),e.bIt("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("orderSelected",t.orderSelected)}}function kn(a,m){if(1&a){const t=e.RV6();e.j41(0,"form",94,7),e.bIt("ngSubmit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.SubmitOrder())}),e.nrm(2,"ngx-ui-loader",95),e.j41(3,"div",96)(4,"div",97)(5,"button",98),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(6,"div",99)(7,"div",100),e.nrm(8,"lord-icon",101),e.j41(9,"div",102),e.nrm(10,"h3",103)(11,"p",104),e.k0s()(),e.j41(12,"div",105),e.nrm(13,"button",106),e.j41(14,"button",107),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()()()()()}if(2&a){const t=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",t.loaderOperationShap)("loaderId",t.deleteLoader)}}function bi(a,m){if(1&a){const t=e.RV6();e.j41(0,"sales-edit-order",154),e.bIt("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("orderSelected",t.operationId)}}let vi=(()=>{class a extends Ee.w{constructor(t,r,n,o,p,c,D,ne,re,oe,se,W,q,Q,V){super(t,r,D,n,o,p,c),this.baseService=n,this.authDaamService=ne,this.teamService=re,this.excelService=oe,this.employeeService=se,this.regionService=W,this.cityService=q,this.router=Q,this.orderReceivedService=V,this.title="sales.salesOrder.sureOrder",this.titleOperation="sales.salesOrder.sureOrder",this.keySelected="",this.searchForm={},this.isResolveList=!0,this.activeindex="2",this.active=2,this.status=[],this.countLoad=2,this.isOrderEdit=!1,this.orderSelected={},this.users=[],this.truncks=[],this.locations=[],this.salesPersons=[],this.clientSelected=0,this.discountTypes=[],this.regions=[],this.cities=[],this.setDates=(E,ce,le)=>{if(E?.from||E?.to){const at=E.to||E.from;this.pagination[ce]=this.datePipe.transform(E.from||E.to,"yyyy-MM-ddT00:00:00"),this.pagination[le]=this.datePipe.transform(at,"yyyy-MM-ddT23:59:59.999")}else this.pagination[ce]=null,this.pagination[le]=null},this.loadentities(),this.GetSalesPersons(),this.discountTypes=this.baseService.discountTypes,this.discountTypes.forEach(E=>{E.name=this.getTranslationText("sales.salesOrder."+E.name)}),this.GetRegions(),this.GetCities()}GetRegions(){this.regionService.getDropDown().subscribe(t=>{this.regions=t.data},t=>{console.log(t)})}GetCities(){this.cityService.getDropDown().subscribe(t=>{this.cities=t.data},t=>{console.log(t)})}GetSalesPersons(){this.employeeService.GetAllByType(9).subscribe(t=>{this.salesPersons=t.data},t=>{console.log(t)})}loadentities(){this.countLoad=this.countLoad+1,(!this.isResolveList||1!==this.countLoad)&&(this.pagination.status=30,this.baseService.get(this.pagination).pipe((0,R.Q)(this.notifier)).subscribe(t=>{this.ngxLoader.stopLoader(M.a7),this.entities=t.data,this.pagination.totalItems=t.totalItems,this.LoadSuccess()},t=>{this.ngxLoader.stopLoader(M.a7),this.alertService.error(t)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[])}openModal(t,r,n="md"){this.isOrderEdit=!1,this.form={},this.orderSelected=t,this.modalService.open(r,{centered:!0,size:n})}SubmitOrder(){this.ngxLoader.startLoader(M.Fq),this.baseService.changStatus({id:this.form.id,status:this.form.status}).pipe((0,Y.O)(),(0,Z.c)(this.mainDelay),(0,ee.Z)(),(0,R.Q)(this.notifier),(0,z.j)(()=>this.ngxLoader.stopLoader(M.Fq))).subscribe({next:r=>{this.modalService.dismissAll(),this.loadentities(),this.alertService.success()}})}cancelOrder(){this.ngxLoader.startLoader(M.Fq),console.log(this.operationId),this.baseService.changStatus({id:this.operationId,status:40}).pipe((0,Y.O)(),(0,Z.c)(this.mainDelay),(0,ee.Z)(),(0,R.Q)(this.notifier),(0,z.j)(()=>this.ngxLoader.stopLoader(M.Fq))).subscribe({next:r=>{this.modalService.dismissAll(),this.loadentities(),this.alertService.success()}})}ngOnInitMore(){}mapForm(t){return{...t}}onUpdateIsActive(t){this.baseService.updateActive(t).pipe((0,R.Q)(this.notifier)).subscribe(r=>{r?this.alertService.success():this.alertService.error("general.message."+r)},r=>{this.alertService.error()})}mapRegisterForm(t){let r={...t};return r.employeeCode=0,r}onSearch(){let t={...this.searchForm};this.ngxLoader.startLoader("allLoader"),this.setDates(t.dates,"visitDateFrom","visitDateTo"),this.setDates(t.creationDates,"creationTimeFrom","creationTimeTo"),this.loadentities()}LoadSuccess(){this.ngxLoader.stopLoader("allLoader")}onReset(){this.form={},this.searchForm={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems}}configRoute(){this.routerActive.data.pipe((0,R.Q)(this.notifier)).subscribe(t=>{this.entities=t.data,this.pagination.totalItems=t.data?.totalItems},()=>{this.alertService.error()})}mapExcel(){let t=[];return this.entities.forEach(r=>{t.push({"Order Code":r.orderCode,"Created Date":r.createdDate,"City Name":r.cityName,"District Name":r.districtName?r.districtName:"--","Agent Name":r.agentName,Mobile:r.mobile,"Channel Name":r.channelName,"Assigned To":r.teamNames,Times:r.workTimes,"Visit Date":r.visitDate,Services:r.services})}),t}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,this.translateService.instant(this.title),[])}onNavChange(t){1===t.nextId&&(this.activeindex="1"),3===t.nextId&&(this.activeindex="3")}goRegister(){this.router.navigateByUrl("/managment/order/new")}goEdit(t){this.router.navigateByUrl("/managment/order/new")}getStatus(t){return 10==t.offerOrderStatus||20==t.offerOrderStatus?"bg-warning-subtle text-warning":30==t.offerOrderStatus?"bg-success-subtle text-success":40==t.offerOrderStatus?"bg-danger-subtle text-danger":50==t.offerOrderStatus?"bg-danger-success text-success":"bg-warning-subtle text-warning"}checkEdit(t){return!t.isCancel&&!t.isFinish}openStatusModal(t,r,n,o="md"){this.isEditForm=!1,this.form={},this.form={id:t,status:n},this.modalService.open(r,{centered:!0,size:o})}openModalClient(t,r,n="xl"){this.clientSelected=t.orderCode,this.form=t,this.isOrderEdit=!1,this.modalService.open(r,{centered:!0,size:n})}copytext(t){navigator.clipboard.writeText(t),this.alertService.info(t)}openEditOrderModal(t,r,n="md"){this.form={},this.isOrderEdit=!0,this.clientSelected=t,this.modalService.open(r,{centered:!0,size:n})}OpenOrderTimeLineModel(t,r,n="md"){this.orderSelected=t,this.modalService.open(r,{centered:!0,size:n})}selectTruck(t){this.truncks=this.truncks.map(r=>({...r,isSelected:r.id===t}))}getSelectedTruckId(){const t=this.truncks.find(r=>r.isSelected);return t?t.id:null}convertToISO(t){if(t instanceof Date)return t.toISOString();if("string"==typeof t){const[r,n,o,p,c]=t.split(/[-\s:]/);return`${o}-${n}-${r}T${p}:${c}:00`}}updateTruck(){this.form.acutalVisitDate=new Date(this.convertToISO(this.form.acutalVisitDate));let t={shippingTruckId:this.form.shippingTruckId,clientLocationId:this.form.clientLocationId,offerOrderMasterId:this.form.id,Notes:this.form.notes,terms:this.form.terms,deliveryDate:this.datePipe.transform(this.form.acutalVisitDate,"yyyy-MM-ddTHH:mm:00.000"),details:this.form.details.map(r=>({id:0,itemId:r.itemId,itemName:r.itemName,quantity:r.quantity,unitId:r.unitId,price:r.price,discount:r.discount,discountType:r.discountType,clientQuantity:r.clientQuantity,approvedQuantity:r.approvedQuantity}))};this.ngxLoader.startLoader(this.operationLoader),this.orderReceivedService.register(t).pipe((0,Y.O)(),(0,Z.c)(this.mainDelay),(0,ee.Z)(),(0,R.Q)(this.notifier),(0,z.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(r=>{r.success?this.submitFunished():this.alertService.error("general.message."+r.message)},r=>{this.alertService.error("general.message."+r)})}openShippingModal(t,r,n="md"){this.baseService.GetTrucks({id:t,acutalVisitDate:null}).subscribe(p=>{p.success?(this.form=p.data.order,this.getTotal(),this.form.clientVisitDate=this.formatDate(this.form.clientVisitDate),this.form.acutalVisitDate=this.formatDate(this.form.acutalVisitDate),this.truncks=p.data.truncks,this.locations=p.data.locations,this.modalService.open(r,{centered:!0,size:n})):this.alertService.error("general.message."+p.message)},p=>{this.alertService.error("general.message."+p)})}dateChangeModal(t){t=new Date(t);let r={id:this.form.id,acutalVisitDate:this.datePipe.transform(t,"yyyy-MM-ddT00:00:00.000")};this.baseService.GetTrucks(r).subscribe(n=>{n.success?this.truncks=n.data.truncks:this.alertService.error("general.message."+n.message)},n=>{this.alertService.error("general.message."+n)})}formatDate(t){if(!t)return"";const r=new Date(t);return r.getDate().toString().padStart(2,"0")+"-"+(r.getMonth()+1).toString().padStart(2,"0")+"-"+r.getFullYear()+" "+r.getHours().toString().padStart(2,"0")+":"+r.getMinutes().toString().padStart(2,"0")}getTotal(){let t=0,r=0,n=0;this.form.details.forEach(o=>{o.discount<0&&(o.discoun=0);let p=o.quantity*o.price,c=0;1===o.discountType?c=o.discount:2===o.discountType&&(c=p*o.discount/100),r=+c;let D=p-c;o.net=D,t=+D}),1===this.form.totalAddDiscountType?n=this.form.totalAddDiscount:2===this.form.totalAddDiscountType&&(n=t*this.form.totalAddDiscount/100),this.form.total=t,this.form.totalAddDiscount=this.form.totalAddDiscount,this.form.tax=15*this.form.total/100,this.form.totalNet=this.form.total-n+this.form.tax}quantitySelect(t,r){t&&(t<=0&&(t=1),this.form.details[r].quantity=parseInt(t),this.form.details[r].net=this.form.details[r].price*this.form.details[r].quantity,this.discountSelect(this.form.details[r].discount,r),this.getTotal())}discountSelect(t,r,n=1){if(t){(t=parseInt(t))<=0&&(this.form.details[r].discount=0),1==n&&(this.form.details[r].discount=t);let o=0;1==this.form.details[r].discountType?o=this.form.details[r].discount:(o=this.form.details[r].price*this.form.details[r].quantity*this.form.details[r].discount/100,o=+o.toFixed(2)),this.form.details[r].net=this.form.details[r].price*this.form.details[r].quantity-o,this.form.details[r].net=this.form.details[r].net.toFixed(2),this.getTotal()}}goNew(){this.router.navigateByUrl("/sales/new")}mapUrl(t,r){return null===t||null==r?"":`https://www.google.com/maps/dir//${r},${t}/@${r},${t},17z?hl=en-US`}static{this.\u0275fac=function(r){return new(r||a)(e.rXU($.nX),e.rXU(F.c$),e.rXU(Oe),e.rXU(ae.u),e.rXU(k.vh),e.rXU(X.eD),e.rXU(O.Bq),e.rXU(nt.J),e.rXU(zt.n),e.rXU(qe.V),e.rXU(tt.O),e.rXU(ct.S),e.rXU(Ve.h),e.rXU($.Ix),e.rXU(In))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-sure-order"]],features:[e.Vt3],decls:55,vars:51,consts:[["tableMaster",""],["cancelOrderModal",""],["SubmitOrderModal",""],["deleteModal",""],["OrderTimeLineModel",""],["StatusOrderModal",""],["SalesEditModel",""],["formEntity","ngForm"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],["overlayColor","rgba(255,255,255,0.05)","fgsColor","rgba(255,255,255,0)",3,"loaderId"],[3,"addNew","reset","search","exportXlsx","addPermission","showAdd","showExport","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","number","id","id","name","id",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["type","text","mwlFlatpickr","","id","isDate","mode","range","altFormat","d/m/Y",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],["InputTirmFilter","","type","search","id","clientName","name","clientName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["name","name","bindValue","id","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],["name","regionId","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","placeholder","ngModel"],["name","cityId","bindValue","code","bindLabel","name",3,"ngModelChange","items","multiple","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],[2,"width",".2%"],["translate","",2,"width",".5%"],["pSortableColumn","id","translate","",2,"width","6%"],[1,"ri-expand-up-down-line"],["pSortableColumn","creationTime","translate","",2,"width","12%"],["pSortableColumn","clientId","translate","",2,"width","10%"],["translate","",2,"width","8%"],["pSortableColumn","clientVisitDate","translate","",2,"width","8%"],["translate","",2,"width","10%"],["pSortableColumn","totalQuantity","translate","",2,"width","8%"],["translate","",2,"width","5%"],[1,"fs-5"],["type","button","pRipple","",1,"border-0","p-button-text","p-button-rounded","p-button-plain",3,"pRowToggler","ngClass"],[1,"code-pointer"],[1,"badge","bg-success-subtle","text-success"],[1,"badge","bg-primary-subtle","text-primary","my-1"],["class","badge bg-warning-subtle text-warning my-1","translate","sales.salesOrder.noDelivery",4,"ngIf"],["class","badge bg-success-subtle text-success my-1","translate","sales.salesOrder.fullDelivery",4,"ngIf"],["class","badge bg-info-subtle text-info my-1","translate","sales.salesOrder.partialDelivery",4,"ngIf"],["class","badge bg-danger-subtle text-danger mx-1","translate","orderManagement.order.noMap",4,"ngIf"],["target","_blank","class","badge bg-success-subtle text-success mx-1","translate","orderManagement.order.viewMap",3,"href",4,"ngIf"],[1,"d-inline-block"],[4,"hasPermission"],[1,"dropdown-custom","d-inline-block"],["type","button",1,"btn","dropbtn","btn-soft-secondary","btn-sm","dropdown-custom","arrow-none"],[1,"ri-more-fill"],[1,"dropdown-menu","dropdown-menu-end","dropdown-content",2,"left","0"],[3,"click",4,"hasPermission"],["translate","sales.salesOrder.noDelivery",1,"badge","bg-warning-subtle","text-warning","my-1"],["translate","sales.salesOrder.fullDelivery",1,"badge","bg-success-subtle","text-success","my-1"],["translate","sales.salesOrder.partialDelivery",1,"badge","bg-info-subtle","text-info","my-1"],["translate","orderManagement.order.noMap",1,"badge","bg-danger-subtle","text-danger","mx-1"],["target","_blank","translate","orderManagement.order.viewMap",1,"badge","bg-success-subtle","text-success","mx-1",3,"href"],[1,"ri-map-pin-line"],["class","btn btn-sm btn-primary edit-list mx-1","tooltipPosition","top",3,"pTooltip","click",4,"ngIf"],["tooltipPosition","top",1,"btn","btn-sm","btn-primary","edit-list","mx-1",3,"click","pTooltip"],[1,"ri-truck-line","align-bottom"],[3,"click"],[1,"dropdown-item"],[1,"text-primary","ri-check-double-fill","align-bottom","me-2"],["translate","sales.shippingOrder.title"],[1,"text-warning","ri-skip-back-fill","align-bottom","me-2"],["translate","sales.smApprove.title"],[1,"text-danger","ri-close-fill","align-bottom","me-2"],["translate","general.action.cancel"],["colspan","17"],[1,"table-detail"],["dataKey","id",3,"value"],["pTemplate","emptymessage"],["translate","sales.salesOrder.itemName",2,"width","10%"],["translate","sales.salesOrder.unit",2,"width","6%"],["translate","sales.salesOrder.clientQuantity",2,"width","8%"],["translate","sales.salesOrder.approvedQuantity",2,"width","8%"],["translate","sales.salesOrder.deliveryQuantity",2,"width","8%"],["colspan","8"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[3,"ngSubmit"],[3,"hasProgressBar","fgsType","loaderId"],[1,"modal-content"],[1,"modal-header"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","btn-close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mt-2","text-center"],["src","https://cdn.lordicon.com/gdfrsvpt.json","stroke","bold","state","hover-oscillate","trigger","loop","colors","primary:#f7b84b,secondary:#f06548",2,"width","130px","height","130px"],[1,"pt-2","fs-15","mx-4","mx-sm-5"],["translate","orderManagement.order.AreYouSureMessage"],[1,"text-muted","mx-4","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","submit","id","save","translate","general.action.save",1,"btn","w-sm","btn-danger"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light",3,"click"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["translate","sales.salesOrder.truckUpdate"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[3,"submit"],[1,"col-12","col-md-3"],["for","name","translate","",1,"required","fw-bold","form-label"],["name","acutalVisitDate","type","text","mwlFlatpickr","","altFormat","d-m-Y H:i","required","",1,"form-control","flatpickr-input",3,"ngModelChange","ngModel","altInput","enableTime","convertModelValue","dateFormat"],["for","name","translate","orderManagement.order.savedAddress",1,"required","fw-bold","form-label"],["name","clientLocationId","bindValue","id","bindLabel","name","required","",2,"width","100%",3,"ngModelChange","disabled","items","ngModel"],[1,"col-12","col-md-6"],["name","shippingTruckId","bindValue","id","bindLabel","name","required","",2,"width","100%",3,"ngModelChange","items","ngModel"],[1,"row","justify-content-center","my-0"],[1,"card"],[1,"card-header","p-0"],[1,"d-flex","align-items-center"],["translate","sales.salesRequests.items",1,"card-title","flex-grow-1","mb-0"],[1,"table-responsive","table-card",2,"overflow","visible"],[1,"table","table-nowrap","align-middle","table-borderless","mb-0"],[1,"table-light","text-muted","p-1"],["translate","sales.salesRequests.itemName",2,"width","20%"],["translate","sales.salesRequests.unit",2,"width","25%"],["translate","sales.salesRequests.quantity",2,"width","25%"],["class","border-top border-top-dashed",4,"ngIf"],[1,"d-flex","justify-content-center","m-0"],["type","submit","type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],["clearable","false","clearOnBackspace","false","bindValue","id","bindLabel","name",2,"width","100%",3,"ngModelChange","name","items","ngModel"],["type","text","id","quantity",1,"form-control","fs-6",3,"ngModelChange","name","ngModel"],[1,"border-top","border-top-dashed"],["colspan","3"],["colspan","4",1,"fw-medium","p-0"],[1,"table","table-borderless","mb-0"],["translate","sales.salesOrder.total",1,"m-0","p-0"],[1,"text-end","m-0","p-0"],["translate","sales.salesOrder.extraDiscount",1,"m-0","p-0"],[1,"input-group","mx-4",2,"width","80%"],["clearable","false","clearOnBackspace","false","name","totalAddDiscountType","bindValue","id","bindLabel","name",3,"change","ngModelChange","items","ngModel"],["InputTirmFilter","","name","totalAddDiscount","type","text","id","totalAddDiscount",1,"form-control","fs-6",2,"width","30%",3,"change","ngModelChange","ngModel"],[1,"m-0","p-0"],["translate","sales.salesOrder.tax",1,"m-0","p-0"],[1,"border-top","border-top-dashed","m-0","p-0"],["scope","row","translate","sales.salesOrder.net",1,"m-0","p-0"],[3,"success","dismiss","orderId"],[3,"dismiss","orderSelected"]],template:function(r,n){if(1&r){const o=e.RV6();e.j41(0,"div",8)(1,"div",9)(2,"div",10),e.nrm(3,"ngx-ui-loader",11),e.j41(4,"base-filter",12),e.bIt("addNew",function(){return e.eBV(o),e.Njj(n.goNew())})("reset",function(){return e.eBV(o),e.Njj(n.onReset())})("search",function(){return e.eBV(o),e.Njj(n.onSearch())})("exportXlsx",function(){return e.eBV(o),e.Njj(n.onExportXlsx())}),e.qex(5,13),e.j41(6,"div",14)(7,"div",15)(8,"input",16),e.nI1(9,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.pagination.id,c)||(n.pagination.id=c),e.Njj(c)}),e.k0s(),e.nrm(10,"i",17),e.k0s()(),e.j41(11,"div",14)(12,"input",18),e.nI1(13,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.searchForm.creationDates,c)||(n.searchForm.creationDates=c),e.Njj(c)}),e.k0s()(),e.j41(14,"div",14)(15,"div",15)(16,"input",19),e.nI1(17,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.pagination.clientName,c)||(n.pagination.clientName=c),e.Njj(c)}),e.k0s(),e.nrm(18,"i",17),e.k0s()(),e.j41(19,"div",14)(20,"div",15)(21,"ng-select",20),e.nI1(22,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.pagination.salesPersonId,c)||(n.pagination.salesPersonId=c),e.Njj(c)}),e.k0s()()(),e.j41(23,"div",14)(24,"input",18),e.nI1(25,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.searchForm.dates,c)||(n.searchForm.dates=c),e.Njj(c)}),e.k0s()(),e.j41(26,"div",14)(27,"div",15)(28,"ng-select",21),e.nI1(29,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.pagination.regionId,c)||(n.pagination.regionId=c),e.Njj(c)}),e.k0s()()(),e.j41(30,"div",14)(31,"div",15)(32,"ng-select",22),e.nI1(33,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.pagination.cityId,c)||(n.pagination.cityId=c),e.Njj(c)}),e.k0s()()(),e.bVm(),e.k0s(),e.j41(34,"div",23)(35,"div",24)(36,"p-table",25,0),e.bIt("onLazyLoad",function(c){return e.eBV(o),e.Njj(n.tableChange(c))})("selectionChange",function(c){return e.eBV(o),e.Njj(n.onSelectionChange(c))}),e.DNE(38,xl,26,0,"ng-template",26)(39,v,41,29,"ng-template",27)(40,U,7,1,"ng-template",28),e.k0s()(),e.DNE(41,pe,2,0,"div",29)(42,Fe,6,8,"div",30),e.k0s()()()(),e.DNE(43,he,15,3,"ng-template",null,1,e.C5r)(45,ut,42,15,"ng-template",null,2,e.C5r)(47,fi,1,1,"ng-template",null,3,e.C5r)(49,Gl,1,1,"ng-template",null,4,e.C5r)(51,kn,15,3,"ng-template",null,5,e.C5r)(53,bi,1,1,"ng-template",null,6,e.C5r)}2&r&&(e.R7$(3),e.Y8G("loaderId","sureLoader"),e.R7$(),e.Y8G("addPermission",e.lJ4(50,Tl))("showAdd",!0)("showExport",!1)("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(4),e.FS9("placeholder",e.bMT(9,36,"orderManagement.order.orderCode")),e.R50("ngModel",n.pagination.id),e.R7$(4),e.FS9("placeholder",e.bMT(13,38,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.creationDates),e.R7$(4),e.FS9("placeholder",e.bMT(17,40,"orderManagement.order.agentName")),e.R50("ngModel",n.pagination.clientName),e.R7$(5),e.FS9("placeholder",e.bMT(22,42,"sales.salesOrder.salsePerson")),e.Y8G("items",n.salesPersons)("multiple",!1),e.R50("ngModel",n.pagination.salesPersonId),e.R7$(3),e.FS9("placeholder",e.bMT(25,44,"sales.salesOrder.clientVisitDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.dates),e.R7$(4),e.FS9("placeholder",e.bMT(29,46,"client.client.regionName")),e.Y8G("items",n.regions)("multiple",!1),e.R50("ngModel",n.pagination.regionId),e.R7$(4),e.FS9("placeholder",e.bMT(33,48,"client.client.cityName")),e.Y8G("items",n.cities)("multiple",!1),e.R50("ngModel",n.pagination.cityId),e.R7$(4),e.Y8G("value",n.entities)("rows",n.pagination.pageSize)("lazy",!0)("totalRecords",n.pagination.totalItems),e.R7$(5),e.Y8G("ngIf",n.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems>0))},dependencies:[k.YU,k.bT,g.qT,g.me,g.Q0,g.BC,g.cb,g.YS,g.vS,g.cV,O.s5,fe.kL,Le.b,$e.p,Be.g,F.Mm,B.XI,Xe.Ei,B.Tg,B.FP,X.Cv,ve.vr,ke.m,ye.p,et.m,je,jn,k.vh,F.D9],encapsulation:2})}}return a})();var ge=x(50204);const El=()=>["completeOrder.print"];function Ys(a,m){1&a&&(e.j41(0,"tr",31),e.nrm(1,"th",32),e.j41(2,"th",33),e.EFF(3,"#"),e.k0s(),e.j41(4,"th",34),e.nrm(5,"i",35),e.EFF(6," orderManagement.order.orderCode "),e.k0s(),e.j41(7,"th",36),e.nrm(8,"i",35),e.EFF(9," orderManagement.order.creation "),e.k0s(),e.j41(10,"th",37),e.nrm(11,"i",35),e.EFF(12," orderManagement.order.agentName "),e.k0s(),e.j41(13,"th",38),e.EFF(14," sales.salesOrder.salsePerson "),e.k0s(),e.j41(15,"th",39),e.nrm(16,"i",35),e.EFF(17," sales.salesOrder.clientVisitDate "),e.k0s(),e.j41(18,"th",40),e.nrm(19,"i",35),e.EFF(20," sales.salesOrder.totalQuantity "),e.k0s(),e.j41(21,"th",41),e.nrm(22,"i",35),e.EFF(23," sales.salesOrder.totalDiscount "),e.k0s(),e.j41(24,"th",42),e.nrm(25,"i",35),e.EFF(26," sales.salesOrder.netPrice "),e.k0s(),e.nrm(27,"th",43),e.k0s())}function Ci(a,m){1&a&&(e.j41(0,"button",51),e.nI1(1,"translate"),e.nrm(2,"i",52),e.k0s()),2&a&&e.FS9("pTooltip",e.bMT(1,1,"sales.salesOrder.printOrder"))}function Dl(a,m){if(1&a){const t=e.RV6();e.j41(0,"tr",44)(1,"td"),e.nrm(2,"button",45),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td",46),e.bIt("click",function(){const n=e.eBV(t).$implicit,o=e.XpG(),p=e.sdS(50);return e.Njj(o.openModalClient(n,p,"lg"))}),e.j41(6,"bdi",47),e.EFF(7),e.k0s()(),e.j41(8,"td")(9,"span",48),e.EFF(10),e.k0s(),e.EFF(11),e.nI1(12,"date"),e.k0s(),e.j41(13,"td",46),e.bIt("click",function(){const n=e.eBV(t).$implicit,o=e.XpG(),p=e.sdS(48);return e.Njj(o.openModalClient(n,p))}),e.j41(14,"span",49),e.EFF(15),e.k0s()(),e.j41(16,"td"),e.EFF(17),e.k0s(),e.j41(18,"td"),e.EFF(19),e.nI1(20,"date"),e.k0s(),e.j41(21,"td"),e.EFF(22),e.k0s(),e.j41(23,"td"),e.EFF(24),e.k0s(),e.j41(25,"td"),e.EFF(26),e.k0s(),e.j41(27,"td"),e.DNE(28,Ci,3,3,"button",50),e.k0s()()}if(2&a){const t=m.$implicit,r=m.rowIndex,n=m.expanded;e.R7$(2),e.Y8G("pRowToggler",t)("ngClass",n?" ri-arrow-down-s-line":"  ri-arrow-up-s-line"),e.R7$(2),e.JRh(r+1),e.R7$(3),e.SpI("#SO#",t.id,""),e.R7$(3),e.SpI("",t.creatorName," "),e.R7$(),e.SpI(" ",e.i5U(12,13,t.creationTime,"yyyy-MM-dd")," "),e.R7$(4),e.SpI("",t.clientName," "),e.R7$(2),e.JRh(t.salsePersonName),e.R7$(2),e.SpI(" ",e.i5U(20,16,t.clientVisitDate,"yyyy-MM-dd"),""),e.R7$(3),e.JRh(t.totalQuantity),e.R7$(2),e.JRh(t.totalDiscount),e.R7$(2),e.JRh(t.netPrice),e.R7$(2),e.Y8G("hasPermission",e.lJ4(19,El))}}function Vl(a,m){1&a&&(e.j41(0,"tr"),e.nrm(1,"th",56)(2,"th",57)(3,"th",58)(4,"th",59)(5,"th",60)(6,"th",61)(7,"th",62),e.k0s())}function Ll(a,m){if(1&a&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.nI1(11,"translate"),e.k0s(),e.j41(12,"td"),e.EFF(13),e.k0s(),e.j41(14,"td"),e.EFF(15),e.k0s()()),2&a){const t=m.$implicit;e.R7$(2),e.JRh(t.itemName),e.R7$(2),e.JRh(t.unitName),e.R7$(2),e.JRh(t.clientQuantity),e.R7$(2),e.JRh(t.approvedQuantity),e.R7$(2),e.JRh(e.bMT(11,7,"sales.salesOrder."+t.discountTypeValue)),e.R7$(3),e.JRh(t.discount),e.R7$(2),e.JRh(t.price)}}function Si(a,m){1&a&&(e.j41(0,"tr"),e.nrm(1,"td",63),e.k0s())}function tn(a,m){if(1&a&&(e.j41(0,"tr")(1,"td",53)(2,"div")(3,"p-table",54),e.DNE(4,Vl,8,0,"ng-template",26)(5,Ll,16,9,"ng-template",27)(6,Si,2,0,"ng-template",55),e.k0s()()()()),2&a){const t=m.$implicit;e.R7$(3),e.Y8G("value",t.offerOrderDetails)}}function ji(a,m){1&a&&(e.j41(0,"div",64),e.EFF(1," general.table.noData "),e.k0s())}function Us(a,m){if(1&a){const t=e.RV6();e.j41(0,"div",65)(1,"div",66),e.nrm(2,"ngb-pagination-info",67),e.j41(3,"table-length",68),e.bIt("lengthChange",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",69)(5,"ngb-pagination",70),e.bIt("pageChange",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.pagination.pageNumber,n)||(o.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&a){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function Ii(a,m){if(1&a){const t=e.RV6();e.j41(0,"form",71,7),e.bIt("ngSubmit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.SubmitOrder())}),e.nrm(2,"ngx-ui-loader",72),e.j41(3,"div",73)(4,"div",74)(5,"button",75),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(6,"div",76)(7,"div",77),e.nrm(8,"lord-icon",78),e.j41(9,"div",79),e.nrm(10,"h3",80)(11,"p",81),e.k0s()(),e.j41(12,"div",82),e.nrm(13,"button",83),e.j41(14,"button",84),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()()()()()}if(2&a){const t=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",t.loaderOperationShap)("loaderId",t.deleteLoader)}}function qs(a,m){if(1&a){const t=e.RV6();e.j41(0,"delete-modal",85),e.bIt("deleteConfirm",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.DeleteConfirm())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}}function Qs(a,m){}function yi(a,m){if(1&a){const t=e.RV6();e.j41(0,"app-all-orders-details",86),e.bIt("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("orderDetails",t.orderSelected)}}function Hs(a,m){if(1&a&&e.nrm(0,"order-operation",87),2&a){const t=e.XpG();e.Y8G("isOrderEdit",t.isOrderEdit)("isInner",!0)("orderCode",t.clientSelected)}}function Qn(a,m){if(1&a){const t=e.RV6();e.j41(0,"order-timeline",88),e.bIt("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("orderSelected",t.orderSelected)}}let on=(()=>{class a extends Ee.w{constructor(t,r,n,o,p,c,D,ne,re,oe,se,W,q,Q){super(t,r,D,n,o,p,c),this.baseService=n,this.authDaamService=ne,this.workTimeService=re,this.excelService=oe,this.employeeService=se,this.regionService=W,this.cityService=q,this.router=Q,this.title="sales.salesOrder.completeOrder",this.titleOperation="sales.salesOrder.completeOrder",this.keySelected="",this.assignUsers=[],this.times=[],this.employees=[],this.searchForm={},this.isResolveList=!0,this.employeeTypes=[{id:1,name:"employeeTeam"},{id:2,name:"managment"},{id:3,name:"customerService"}],this.employeeGroups=[],this.activeindex="2",this.active=2,this.formPassword={},this.roles=[],this.teams=[],this.workTimes=[],this.userTypes=[],this.actives=[{id:!0,name:"active"},{id:!1,name:"noActive"}],this.clientSelected=0,this.districts=[],this.channels=[],this.status=[],this.countLoad=2,this.isOrderEdit=!1,this.orderSelected={},this.salesPersons=[],this.regions=[],this.cities=[],this.setDates=(V,E,ce)=>{if(V?.from||V?.to){const Te=V.to||V.from;this.pagination[E]=this.datePipe.transform(V.from||V.to,"yyyy-MM-ddT00:00:00"),this.pagination[ce]=this.datePipe.transform(Te,"yyyy-MM-ddT23:59:59.999")}else this.pagination[E]=null,this.pagination[ce]=null},this.loadentities(),this.GetSalesPersons(),this.GetRegions(),this.GetCities()}GetRegions(){this.regionService.getDropDown().subscribe(t=>{this.regions=t.data},t=>{console.log(t)})}GetCities(){this.cityService.getDropDown().subscribe(t=>{this.cities=t.data},t=>{console.log(t)})}GetSalesPersons(){this.employeeService.GetAllByType(9).subscribe(t=>{this.salesPersons=t.data},t=>{console.log(t)})}loadentities(){this.countLoad=this.countLoad+1,(!this.isResolveList||1!==this.countLoad)&&(this.pagination.status=60,this.baseService.get(this.pagination).pipe((0,R.Q)(this.notifier)).subscribe(t=>{this.ngxLoader.stopLoader(M.a7),this.entities=t.data,this.pagination.totalItems=t.totalItems,this.LoadSuccess()},t=>{this.ngxLoader.stopLoader(M.a7),this.alertService.error(t)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[])}SubmitOrder(){}ngOnInitMore(){}mapForm(t){return{...t}}onUpdateIsActive(t){this.baseService.updateActive(t).pipe((0,R.Q)(this.notifier)).subscribe(r=>{r?this.alertService.success():this.alertService.error("general.message."+r)},r=>{this.alertService.error()})}mapRegisterForm(t){let r={...t};return r.employeeCode=0,r}onSearch(){let t={...this.searchForm};this.ngxLoader.startLoader("allLoader"),this.setDates(t.dates,"visitDateFrom","visitDateTo"),this.setDates(t.creationDates,"creationTimeFrom","creationTimeTo"),this.loadentities()}LoadSuccess(){this.ngxLoader.stopLoader("allLoader")}onReset(){this.form={},this.searchForm={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems}}configRoute(){this.routerActive.data.pipe((0,R.Q)(this.notifier)).subscribe(t=>{this.entities=t.data,this.pagination.totalItems=t.data?.totalItems},()=>{this.alertService.error()})}mapExcel(){let t=[];return this.entities.forEach(r=>{t.push({"Order Code":r.orderCode,"Created Date":r.createdDate,"City Name":r.cityName,"District Name":r.districtName?r.districtName:"--",Status:this.translateService.instant(this.getTrnslate(r)),"Agent Name":r.agentName,Mobile:r.mobile,"Channel Name":r.channelName,"Assigned To":r.teamNames,Times:r.workTimes,"Visit Date":r.visitDate,Services:r.services})}),t}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,this.translateService.instant(this.title),[])}onNavChange(t){1===t.nextId&&(this.activeindex="1"),3===t.nextId&&(this.activeindex="3")}goRegister(){this.router.navigateByUrl("/managment/order/new")}goEdit(t){this.router.navigateByUrl("/managment/order/new")}getStatus(t){return 10==t.offerOrderStatus||20==t.offerOrderStatus?"bg-warning-subtle text-warning":30==t.offerOrderStatus?"bg-success-subtle text-success":40==t.offerOrderStatus?"bg-danger-subtle text-danger":50==t.offerOrderStatus?"bg-danger-success text-success":"bg-warning-subtle text-warning"}checkEdit(t){return!t.isCancel&&!t.isFinish}getTrnslate(t){return t.isCancel?"orderManagement.order.cancel":t.isFinish?"orderManagement.order.finish":t.isUrgent?"bg-danger-subtle text-danger":t.isReopen?"orderManagement.order.reopen":t.isAssign?"orderManagement.order.assign":t.isConfirmed?"orderManagement.order.confirmed":t.isFree?"orderManagement.order.free":"orderManagement.order.new"}openModalClient(t,r,n="xl"){this.clientSelected=t.orderCode,this.orderSelected=t,this.isOrderEdit=!1,this.modalService.open(r,{centered:!0,size:n})}copytext(t){navigator.clipboard.writeText(t),this.alertService.info(t)}openEditOrderModal(t,r,n="md"){this.form={},this.isOrderEdit=!0,this.clientSelected=t,this.modalService.open(r,{centered:!0,size:n})}OpenOrderTimeLineModel(t,r,n="md"){this.orderSelected=t,this.modalService.open(r,{centered:!0,size:n})}static{this.\u0275fac=function(r){return new(r||a)(e.rXU($.nX),e.rXU(F.c$),e.rXU(Oe),e.rXU(ae.u),e.rXU(k.vh),e.rXU(X.eD),e.rXU(O.Bq),e.rXU(nt.J),e.rXU(ui.G),e.rXU(qe.V),e.rXU(tt.O),e.rXU(ct.S),e.rXU(Ve.h),e.rXU($.Ix))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-complete-order"]],features:[e.Vt3],decls:55,vars:49,consts:[["tableMaster",""],["SubmitOrderModal",""],["deleteModal",""],["clientProfile",""],["orderViewModel",""],["orderModel",""],["OrderTimeLineModel",""],["formEntity","ngForm"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],["overlayColor","rgba(255,255,255,0.05)","fgsColor","rgba(255,255,255,0)",3,"loaderId"],[3,"reset","search","exportXlsx","showAdd","showExport","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","number","id","id","name","id",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["type","text","mwlFlatpickr","","id","isDate","mode","range","altFormat","d/m/Y",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],["InputTirmFilter","","type","search","id","clientName","name","clientName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["name","name","bindValue","id","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],["name","regionId","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","placeholder","ngModel"],["name","cityId","bindValue","code","bindLabel","name",3,"ngModelChange","items","multiple","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],[2,"width",".2%"],["translate","",2,"width",".5%"],["pSortableColumn","id","translate","",2,"width","6%"],[1,"ri-expand-up-down-line"],["pSortableColumn","creationTime","translate","",2,"width","12%"],["pSortableColumn","clientId","translate","",2,"width","10%"],["translate","",2,"width","8%"],["pSortableColumn","clientVisitDate","translate","",2,"width","10%"],["pSortableColumn","totalQuantity","translate","",2,"width","8%"],["pSortableColumn","totalDiscount","translate","",2,"width","8%"],["pSortableColumn","netPrice","translate","",2,"width","8%"],["translate","",2,"width","5%"],[1,"fs-5"],["type","button","pRipple","",1,"border-0","p-button-text","p-button-rounded","p-button-plain",3,"pRowToggler","ngClass"],[3,"click"],[1,"code-pointer"],[1,"badge","bg-success-subtle","text-success"],[1,"badge","bg-primary-subtle","text-primary","my-1"],["class","btn btn-sm btn-warning edit-list mx-1","tooltipPosition","top",3,"pTooltip",4,"hasPermission"],["tooltipPosition","top",1,"btn","btn-sm","btn-warning","edit-list","mx-1",3,"pTooltip"],[1,"ri-printer-line","align-bottom"],["colspan","17",1,"table-detail"],["dataKey","id",3,"value"],["pTemplate","emptymessage"],["translate","sales.salesOrder.itemName",2,"width","10%"],["translate","sales.salesOrder.unit",2,"width","6%"],["translate","sales.salesOrder.clientQuantity",2,"width","8%"],["translate","sales.salesOrder.approvedQuantity",2,"width","8%"],["translate","sales.salesOrder.discountType",2,"width","5%"],["translate","sales.salesOrder.discount",2,"width","5%"],["translate","sales.salesOrder.price",2,"width","5%"],["colspan","8"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[3,"ngSubmit"],[3,"hasProgressBar","fgsType","loaderId"],[1,"modal-content"],[1,"modal-header"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","btn-close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mt-2","text-center"],["src","https://cdn.lordicon.com/gdfrsvpt.json","stroke","bold","state","hover-oscillate","trigger","loop","colors","primary:#f7b84b,secondary:#f06548",2,"width","130px","height","130px"],[1,"pt-2","fs-15","mx-4","mx-sm-5"],["translate","orderManagement.order.AreYouSureMessage"],[1,"text-muted","mx-4","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","submit","id","save","translate","general.action.save",1,"btn","w-sm","btn-danger"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light",3,"click"],[3,"deleteConfirm","dismiss"],[3,"dismiss","orderDetails"],[3,"isOrderEdit","isInner","orderCode"],[3,"dismiss","orderSelected"]],template:function(r,n){if(1&r){const o=e.RV6();e.j41(0,"div",8)(1,"div",9)(2,"div",10),e.nrm(3,"ngx-ui-loader",11),e.j41(4,"base-filter",12),e.bIt("reset",function(){return e.eBV(o),e.Njj(n.onReset())})("search",function(){return e.eBV(o),e.Njj(n.onSearch())})("exportXlsx",function(){return e.eBV(o),e.Njj(n.onExportXlsx())}),e.qex(5,13),e.j41(6,"div",14)(7,"div",15)(8,"input",16),e.nI1(9,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.pagination.id,c)||(n.pagination.id=c),e.Njj(c)}),e.k0s(),e.nrm(10,"i",17),e.k0s()(),e.j41(11,"div",14)(12,"input",18),e.nI1(13,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.searchForm.creationDates,c)||(n.searchForm.creationDates=c),e.Njj(c)}),e.k0s()(),e.j41(14,"div",14)(15,"div",15)(16,"input",19),e.nI1(17,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.pagination.clientName,c)||(n.pagination.clientName=c),e.Njj(c)}),e.k0s(),e.nrm(18,"i",17),e.k0s()(),e.j41(19,"div",14)(20,"div",15)(21,"ng-select",20),e.nI1(22,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.pagination.salesPersonId,c)||(n.pagination.salesPersonId=c),e.Njj(c)}),e.k0s()()(),e.j41(23,"div",14)(24,"input",18),e.nI1(25,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.searchForm.dates,c)||(n.searchForm.dates=c),e.Njj(c)}),e.k0s()(),e.j41(26,"div",14)(27,"div",15)(28,"ng-select",21),e.nI1(29,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.pagination.regionId,c)||(n.pagination.regionId=c),e.Njj(c)}),e.k0s()()(),e.j41(30,"div",14)(31,"div",15)(32,"ng-select",22),e.nI1(33,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.pagination.cityId,c)||(n.pagination.cityId=c),e.Njj(c)}),e.k0s()()(),e.bVm(),e.k0s(),e.j41(34,"div",23)(35,"div",24)(36,"p-table",25,0),e.bIt("onLazyLoad",function(c){return e.eBV(o),e.Njj(n.tableChange(c))})("selectionChange",function(c){return e.eBV(o),e.Njj(n.onSelectionChange(c))}),e.DNE(38,Ys,28,0,"ng-template",26)(39,Dl,29,20,"ng-template",27)(40,tn,7,1,"ng-template",28),e.k0s()(),e.DNE(41,ji,2,0,"div",29)(42,Us,6,8,"div",30),e.k0s()()()(),e.DNE(43,Ii,15,3,"ng-template",null,1,e.C5r)(45,qs,1,0,"ng-template",null,2,e.C5r)(47,Qs,0,0,"ng-template",null,3,e.C5r)(49,yi,1,1,"ng-template",null,4,e.C5r)(51,Hs,1,3,"ng-template",null,5,e.C5r)(53,Qn,1,1,"ng-template",null,6,e.C5r)}2&r&&(e.R7$(3),e.Y8G("loaderId","CompleteLoader"),e.R7$(),e.Y8G("showAdd",!1)("showExport",!1)("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(4),e.FS9("placeholder",e.bMT(9,35,"orderManagement.order.orderCode")),e.R50("ngModel",n.pagination.id),e.R7$(4),e.FS9("placeholder",e.bMT(13,37,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.creationDates),e.R7$(4),e.FS9("placeholder",e.bMT(17,39,"orderManagement.order.agentName")),e.R50("ngModel",n.pagination.clientName),e.R7$(5),e.FS9("placeholder",e.bMT(22,41,"sales.salesOrder.salsePerson")),e.Y8G("items",n.salesPersons)("multiple",!1),e.R50("ngModel",n.pagination.salesPersonId),e.R7$(3),e.FS9("placeholder",e.bMT(25,43,"sales.salesOrder.clientVisitDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.dates),e.R7$(4),e.FS9("placeholder",e.bMT(29,45,"client.client.regionName")),e.Y8G("items",n.regions)("multiple",!1),e.R50("ngModel",n.pagination.regionId),e.R7$(4),e.FS9("placeholder",e.bMT(33,47,"client.client.cityName")),e.Y8G("items",n.cities)("multiple",!1),e.R50("ngModel",n.pagination.cityId),e.R7$(4),e.Y8G("value",n.entities)("rows",n.pagination.pageSize)("lazy",!0)("totalRecords",n.pagination.totalItems),e.R7$(5),e.Y8G("ngIf",n.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems>0))},dependencies:[k.YU,k.bT,g.qT,g.me,g.Q0,g.BC,g.cb,g.vS,g.cV,O.s5,fe.kL,Le.b,ge.L,Ke.w,$e.p,Be.g,F.Mm,B.XI,Xe.Ei,B.Tg,B.FP,X.Cv,ve.vr,ke.m,ye.p,et.m,k.vh,F.D9],encapsulation:2})}}return a})();function Ti(a,m){1&a&&(e.j41(0,"tr",31),e.nrm(1,"th",32),e.j41(2,"th",33),e.EFF(3,"#"),e.k0s(),e.j41(4,"th",34),e.nrm(5,"i",35),e.EFF(6," orderManagement.order.orderCode "),e.k0s(),e.j41(7,"th",36),e.nrm(8,"i",35),e.EFF(9," orderManagement.order.creation "),e.k0s(),e.j41(10,"th",37),e.nrm(11,"i",35),e.EFF(12," orderManagement.order.agentName "),e.k0s(),e.j41(13,"th",38),e.nrm(14,"i",35),e.EFF(15," sales.salesOrder.clientVisitDate "),e.k0s(),e.j41(16,"th",39),e.nrm(17,"i",35),e.EFF(18," sales.salesOrder.totalQuantity "),e.k0s(),e.j41(19,"th",40),e.nrm(20,"i",35),e.EFF(21," sales.salesOrder.totalDiscount "),e.k0s(),e.j41(22,"th",41),e.nrm(23,"i",35),e.EFF(24," sales.salesOrder.netPrice "),e.k0s(),e.j41(25,"th",42),e.nrm(26,"i",35),e.EFF(27," sales.salesOrder.cancelReasonName "),e.k0s()())}function $l(a,m){if(1&a){const t=e.RV6();e.j41(0,"tr",43)(1,"td"),e.nrm(2,"button",44),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td",45),e.bIt("click",function(){const n=e.eBV(t).$implicit,o=e.XpG(),p=e.sdS(50);return e.Njj(o.openModalClient(n,p,"lg"))}),e.j41(6,"bdi",46),e.EFF(7),e.k0s()(),e.j41(8,"td")(9,"span",47),e.EFF(10),e.k0s(),e.EFF(11),e.nI1(12,"date"),e.k0s(),e.j41(13,"td")(14,"span",48),e.EFF(15),e.k0s()(),e.j41(16,"td"),e.EFF(17),e.nI1(18,"date"),e.k0s(),e.j41(19,"td"),e.EFF(20),e.k0s(),e.j41(21,"td"),e.EFF(22),e.k0s(),e.j41(23,"td"),e.EFF(24),e.k0s(),e.j41(25,"td")(26,"span",49),e.EFF(27),e.k0s()()()}if(2&a){const t=m.$implicit,r=m.rowIndex,n=m.expanded;e.R7$(2),e.Y8G("pRowToggler",t)("ngClass",n?" ri-arrow-down-s-line":"  ri-arrow-up-s-line"),e.R7$(2),e.JRh(r+1),e.R7$(3),e.SpI("#SO#",t.id,""),e.R7$(3),e.SpI("",t.creatorName," "),e.R7$(),e.SpI(" ",e.i5U(12,12,t.creationTime,"yyyy-MM-dd")," "),e.R7$(4),e.SpI("",t.clientName," "),e.R7$(2),e.SpI(" ",e.i5U(18,15,t.acutalVisitDate,"yyyy-MM-dd"),""),e.R7$(3),e.JRh(t.totalQuantity),e.R7$(2),e.JRh(t.totalDiscount),e.R7$(2),e.JRh(t.netPrice),e.R7$(3),e.SpI("",t.cancelReasonName," ")}}function Bl(a,m){1&a&&(e.j41(0,"tr"),e.nrm(1,"th",54)(2,"th",55)(3,"th",56)(4,"th",57)(5,"th",58)(6,"th",59)(7,"th",60),e.k0s())}function Xl(a,m){if(1&a&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.nI1(11,"translate"),e.k0s(),e.j41(12,"td"),e.EFF(13),e.k0s(),e.j41(14,"td"),e.EFF(15),e.k0s()()),2&a){const t=m.$implicit;e.R7$(2),e.JRh(t.itemName),e.R7$(2),e.JRh(t.unitName),e.R7$(2),e.JRh(t.clientQuantity),e.R7$(2),e.JRh(t.approvedQuantity),e.R7$(2),e.JRh(e.bMT(11,7,"sales.salesOrder."+t.discountTypeValue)),e.R7$(3),e.JRh(t.discount),e.R7$(2),e.JRh(t.price)}}function xi(a,m){1&a&&(e.j41(0,"tr"),e.nrm(1,"td",61),e.k0s())}function ki(a,m){if(1&a&&(e.j41(0,"tr")(1,"td",50)(2,"div",51)(3,"p-table",52),e.DNE(4,Bl,8,0,"ng-template",26)(5,Xl,16,9,"ng-template",27)(6,xi,2,0,"ng-template",53),e.k0s()()()()),2&a){const t=m.$implicit;e.R7$(3),e.Y8G("value",t.offerOrderDetails)}}function br(a,m){1&a&&(e.j41(0,"div",62),e.EFF(1," general.table.noData "),e.k0s())}function Pl(a,m){if(1&a){const t=e.RV6();e.j41(0,"div",63)(1,"div",64),e.nrm(2,"ngb-pagination-info",65),e.j41(3,"table-length",66),e.bIt("lengthChange",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",67)(5,"ngb-pagination",68),e.bIt("pageChange",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.pagination.pageNumber,n)||(o.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&a){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function zs(a,m){if(1&a){const t=e.RV6();e.j41(0,"form",69,7),e.bIt("ngSubmit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.SubmitOrder())}),e.nrm(2,"ngx-ui-loader",70),e.j41(3,"div",71)(4,"div",72)(5,"button",73),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(6,"div",74)(7,"div",75),e.nrm(8,"lord-icon",76),e.j41(9,"div",77),e.nrm(10,"h3",78)(11,"p",79),e.k0s()(),e.j41(12,"div",80),e.nrm(13,"button",81),e.j41(14,"button",82),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()()()()()}if(2&a){const t=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",t.loaderOperationShap)("loaderId",t.deleteLoader)}}function Al(a,m){if(1&a){const t=e.RV6();e.j41(0,"delete-modal",83),e.bIt("deleteConfirm",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.DeleteConfirm())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}}function Yl(a,m){}function we(a,m){if(1&a){const t=e.RV6();e.j41(0,"app-all-orders-details",84),e.bIt("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("orderDetails",t.orderSelected)}}function Pe(a,m){if(1&a&&e.nrm(0,"order-operation",85),2&a){const t=e.XpG();e.Y8G("isOrderEdit",t.isOrderEdit)("isInner",!0)("orderCode",t.clientSelected)}}function Ul(a,m){if(1&a){const t=e.RV6();e.j41(0,"order-timeline",86),e.bIt("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("orderSelected",t.orderSelected)}}let ql=(()=>{class a extends Ee.w{constructor(t,r,n,o,p,c,D,ne,re,oe,se,W,q,Q){super(t,r,D,n,o,p,c),this.baseService=n,this.authDaamService=ne,this.excelService=re,this.employeeService=oe,this.channelService=se,this.regionService=W,this.cityService=q,this.router=Q,this.title="sales.salesOrder.cancelOrder",this.titleOperation="sales.salesOrder.cancelOrder",this.keySelected="",this.employees=[],this.isResolveList=!0,this.activeindex="2",this.active=2,this.clientSelected=0,this.status=[],this.countLoad=2,this.isOrderEdit=!1,this.orderSelected={},this.users=[],this.salesPersons=[],this.searchForm={},this.regions=[],this.cities=[],this.setDates=(V,E,ce)=>{if(V?.from||V?.to){const Te=V.to||V.from;this.pagination[E]=this.datePipe.transform(V.from||V.to,"yyyy-MM-ddT00:00:00"),this.pagination[ce]=this.datePipe.transform(Te,"yyyy-MM-ddT23:59:59.999")}else this.pagination[E]=null,this.pagination[ce]=null},this.loadentities(),this.GetSalesPersons(),this.GetRegions(),this.GetCities()}GetRegions(){this.regionService.getDropDown().subscribe(t=>{this.regions=t.data},t=>{console.log(t)})}GetCities(){this.cityService.getDropDown().subscribe(t=>{this.cities=t.data},t=>{console.log(t)})}loadentities(){this.countLoad=this.countLoad+1,(!this.isResolveList||1!==this.countLoad)&&(this.pagination.status=40,this.baseService.get(this.pagination).pipe((0,R.Q)(this.notifier)).subscribe(t=>{this.ngxLoader.stopLoader(M.a7),this.entities=t.data,this.pagination.totalItems=t.totalItems,this.LoadSuccess()},t=>{this.ngxLoader.stopLoader(M.a7),this.alertService.error(t)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[])}SubmitOrder(){}GetSalesPersons(){this.employeeService.GetAllByType(9).subscribe(t=>{this.salesPersons=t.data},t=>{console.log(t)})}ngOnInitMore(){}mapForm(t){return{...t}}onUpdateIsActive(t){this.baseService.updateActive(t).pipe((0,R.Q)(this.notifier)).subscribe(r=>{r?this.alertService.success():this.alertService.error("general.message."+r)},r=>{this.alertService.error()})}mapRegisterForm(t){let r={...t};return r.employeeCode=0,r}onSearch(){let t={...this.searchForm};this.ngxLoader.startLoader("allLoader"),this.setDates(t.dates,"visitDateFrom","visitDateTo"),this.setDates(t.creationDates,"creationTimeFrom","creationTimeTo"),this.loadentities()}LoadSuccess(){this.ngxLoader.stopLoader("allLoader")}onReset(){this.form={},this.searchForm={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems}}configRoute(){this.routerActive.data.pipe((0,R.Q)(this.notifier)).subscribe(t=>{this.entities=t.data,this.pagination.totalItems=t.data?.totalItems},()=>{this.alertService.error()})}mapExcel(){let t=[];return this.entities.forEach(r=>{t.push({})}),t}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,this.translateService.instant(this.title),[])}onNavChange(t){1===t.nextId&&(this.activeindex="1"),3===t.nextId&&(this.activeindex="3")}goRegister(){this.router.navigateByUrl("/managment/order/new")}goEdit(t){this.router.navigateByUrl("/managment/order/new")}getStatus(t){return 10==t.offerOrderStatus||5==t.offerOrderStatus||20==t.offerOrderStatus?"bg-warning-subtle text-warning":30==t.offerOrderStatus?"bg-success-subtle text-success":40==t.offerOrderStatus?"bg-danger-subtle text-danger":50==t.offerOrderStatus?"bg-danger-success text-success":"bg-warning-subtle text-warning"}checkEdit(t){return!t.isCancel&&!t.isFinish}openModalClient(t,r,n="xl"){this.clientSelected=t.orderCode,this.orderSelected=t,this.isOrderEdit=!1,this.modalService.open(r,{centered:!0,size:n})}copytext(t){navigator.clipboard.writeText(t),this.alertService.info(t)}openEditOrderModal(t,r,n="md"){this.form={},this.isOrderEdit=!0,this.clientSelected=t,this.modalService.open(r,{centered:!0,size:n})}OpenOrderTimeLineModel(t,r,n="md"){this.orderSelected=t,this.modalService.open(r,{centered:!0,size:n})}static{this.\u0275fac=function(r){return new(r||a)(e.rXU($.nX),e.rXU(F.c$),e.rXU(Oe),e.rXU(ae.u),e.rXU(k.vh),e.rXU(X.eD),e.rXU(O.Bq),e.rXU(nt.J),e.rXU(qe.V),e.rXU(tt.O),e.rXU(an.l),e.rXU(ct.S),e.rXU(Ve.h),e.rXU($.Ix))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-cancel-order"]],features:[e.Vt3],decls:55,vars:49,consts:[["tableMaster",""],["SubmitOrderModal",""],["deleteModal",""],["clientProfile",""],["orderViewModel",""],["orderModel",""],["OrderTimeLineModel",""],["formEntity","ngForm"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],["overlayColor","rgba(255,255,255,0.05)","fgsColor","rgba(255,255,255,0)",3,"loaderId"],[3,"reset","search","exportXlsx","showAdd","showExport","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","number","id","id","name","id",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["type","text","mwlFlatpickr","","id","isDate","mode","range","altFormat","d/m/Y",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],["InputTirmFilter","","type","search","id","clientName","name","clientName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["name","name","bindValue","id","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],["name","regionId","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","placeholder","ngModel"],["name","cityId","bindValue","code","bindLabel","name",3,"ngModelChange","items","multiple","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],[2,"width",".2%"],["translate","",2,"width",".5%"],["pSortableColumn","id","translate","",2,"width","6%"],[1,"ri-expand-up-down-line"],["pSortableColumn","creationTime","translate","",2,"width","12%"],["pSortableColumn","clientId","translate","",2,"width","10%"],["pSortableColumn","clientVisitDate","translate","",2,"width","10%"],["pSortableColumn","totalQuantity","translate","",2,"width","8%"],["pSortableColumn","totalDiscount","translate","",2,"width","8%"],["pSortableColumn","netPrice","translate","",2,"width","8%"],["pSortableColumn","cancelReasonName","translate","",2,"width","15%"],[1,"fs-5"],["type","button","pRipple","",1,"border-0","p-button-text","p-button-rounded","p-button-plain",3,"pRowToggler","ngClass"],[3,"click"],[1,"code-pointer"],[1,"badge","bg-success-subtle","text-success"],[1,"badge","bg-primary-subtle","text-primary","my-1"],[1,"badge","bg-danger-subtle","text-danger"],["colspan","17"],[1,"table-detail"],["dataKey","id",3,"value"],["pTemplate","emptymessage"],["translate","sales.salesOrder.itemName",2,"width","10%"],["translate","sales.salesOrder.unit",2,"width","6%"],["translate","sales.salesOrder.clientQuantity",2,"width","8%"],["translate","sales.salesOrder.approvedQuantity",2,"width","8%"],["translate","sales.salesOrder.discountType",2,"width","5%"],["translate","sales.salesOrder.discount",2,"width","5%"],["translate","sales.salesOrder.price",2,"width","5%"],["colspan","8"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[3,"ngSubmit"],[3,"hasProgressBar","fgsType","loaderId"],[1,"modal-content"],[1,"modal-header"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","btn-close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mt-2","text-center"],["src","https://cdn.lordicon.com/gdfrsvpt.json","stroke","bold","state","hover-oscillate","trigger","loop","colors","primary:#f7b84b,secondary:#f06548",2,"width","130px","height","130px"],[1,"pt-2","fs-15","mx-4","mx-sm-5"],["translate","orderManagement.order.AreYouSureMessage"],[1,"text-muted","mx-4","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","submit","id","save","translate","general.action.save",1,"btn","w-sm","btn-danger"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light",3,"click"],[3,"deleteConfirm","dismiss"],[3,"dismiss","orderDetails"],[3,"isOrderEdit","isInner","orderCode"],[3,"dismiss","orderSelected"]],template:function(r,n){if(1&r){const o=e.RV6();e.j41(0,"div",8)(1,"div",9)(2,"div",10),e.nrm(3,"ngx-ui-loader",11),e.j41(4,"base-filter",12),e.bIt("reset",function(){return e.eBV(o),e.Njj(n.onReset())})("search",function(){return e.eBV(o),e.Njj(n.onSearch())})("exportXlsx",function(){return e.eBV(o),e.Njj(n.onExportXlsx())}),e.qex(5,13),e.j41(6,"div",14)(7,"div",15)(8,"input",16),e.nI1(9,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.pagination.id,c)||(n.pagination.id=c),e.Njj(c)}),e.k0s(),e.nrm(10,"i",17),e.k0s()(),e.j41(11,"div",14)(12,"input",18),e.nI1(13,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.searchForm.creationDates,c)||(n.searchForm.creationDates=c),e.Njj(c)}),e.k0s()(),e.j41(14,"div",14)(15,"div",15)(16,"input",19),e.nI1(17,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.pagination.clientName,c)||(n.pagination.clientName=c),e.Njj(c)}),e.k0s(),e.nrm(18,"i",17),e.k0s()(),e.j41(19,"div",14)(20,"div",15)(21,"ng-select",20),e.nI1(22,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.pagination.salesPersonId,c)||(n.pagination.salesPersonId=c),e.Njj(c)}),e.k0s()()(),e.j41(23,"div",14)(24,"input",18),e.nI1(25,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.searchForm.dates,c)||(n.searchForm.dates=c),e.Njj(c)}),e.k0s()(),e.j41(26,"div",14)(27,"div",15)(28,"ng-select",21),e.nI1(29,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.pagination.regionId,c)||(n.pagination.regionId=c),e.Njj(c)}),e.k0s()()(),e.j41(30,"div",14)(31,"div",15)(32,"ng-select",22),e.nI1(33,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.pagination.cityId,c)||(n.pagination.cityId=c),e.Njj(c)}),e.k0s()()(),e.bVm(),e.k0s(),e.j41(34,"div",23)(35,"div",24)(36,"p-table",25,0),e.bIt("onLazyLoad",function(c){return e.eBV(o),e.Njj(n.tableChange(c))})("selectionChange",function(c){return e.eBV(o),e.Njj(n.onSelectionChange(c))}),e.DNE(38,Ti,28,0,"ng-template",26)(39,$l,28,18,"ng-template",27)(40,ki,7,1,"ng-template",28),e.k0s()(),e.DNE(41,br,2,0,"div",29)(42,Pl,6,8,"div",30),e.k0s()()()(),e.DNE(43,zs,15,3,"ng-template",null,1,e.C5r)(45,Al,1,0,"ng-template",null,2,e.C5r)(47,Yl,0,0,"ng-template",null,3,e.C5r)(49,we,1,1,"ng-template",null,4,e.C5r)(51,Pe,1,3,"ng-template",null,5,e.C5r)(53,Ul,1,1,"ng-template",null,6,e.C5r)}2&r&&(e.R7$(3),e.Y8G("loaderId","cancelLoader"),e.R7$(),e.Y8G("showAdd",!1)("showExport",!1)("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(4),e.FS9("placeholder",e.bMT(9,35,"orderManagement.order.orderCode")),e.R50("ngModel",n.pagination.id),e.R7$(4),e.FS9("placeholder",e.bMT(13,37,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.creationDates),e.R7$(4),e.FS9("placeholder",e.bMT(17,39,"orderManagement.order.agentName")),e.R50("ngModel",n.pagination.clientName),e.R7$(5),e.FS9("placeholder",e.bMT(22,41,"sales.salesOrder.salsePerson")),e.Y8G("items",n.salesPersons)("multiple",!1),e.R50("ngModel",n.pagination.salesPersonId),e.R7$(3),e.FS9("placeholder",e.bMT(25,43,"sales.salesOrder.clientVisitDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.dates),e.R7$(4),e.FS9("placeholder",e.bMT(29,45,"client.client.regionName")),e.Y8G("items",n.regions)("multiple",!1),e.R50("ngModel",n.pagination.regionId),e.R7$(4),e.FS9("placeholder",e.bMT(33,47,"client.client.cityName")),e.Y8G("items",n.cities)("multiple",!1),e.R50("ngModel",n.pagination.cityId),e.R7$(4),e.Y8G("value",n.entities)("rows",n.pagination.pageSize)("lazy",!0)("totalRecords",n.pagination.totalItems),e.R7$(5),e.Y8G("ngIf",n.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems>0))},dependencies:[k.YU,k.bT,g.qT,g.me,g.Q0,g.BC,g.cb,g.vS,g.cV,O.s5,fe.kL,Le.b,ge.L,Ke.w,$e.p,Be.g,F.Mm,B.XI,Xe.Ei,B.Tg,B.FP,X.Cv,ve.vr,ke.m,k.vh,F.D9],encapsulation:2})}}return a})();const Js=()=>["salesOrder.register"],Ql=()=>["orderDraft.newOrder"],vr=()=>["orderDraft.edit"],Hn=()=>["orderDraft.cancel"];function Cr(a,m){1&a&&(e.j41(0,"tr",27),e.nrm(1,"th",28),e.j41(2,"th",29),e.EFF(3,"#"),e.k0s(),e.j41(4,"th",30),e.nrm(5,"i",31),e.EFF(6," orderManagement.order.orderCode "),e.k0s(),e.j41(7,"th",32),e.nrm(8,"i",31),e.EFF(9," orderManagement.order.creation "),e.k0s(),e.j41(10,"th",33),e.nrm(11,"i",31),e.EFF(12," orderManagement.order.agentName "),e.k0s(),e.j41(13,"th",34),e.EFF(14," sales.salesOrder.salsePerson "),e.k0s(),e.j41(15,"th",35),e.nrm(16,"i",31),e.EFF(17," sales.salesOrder.clientVisitDate "),e.k0s(),e.j41(18,"th",36),e.nrm(19,"i",31),e.EFF(20," sales.salesOrder.totalQuantity "),e.k0s(),e.j41(21,"th",37),e.nrm(22,"i",31),e.EFF(23," sales.salesOrder.totalDiscount "),e.k0s(),e.j41(24,"th",38),e.EFF(25," orderManagement.order.totalTax "),e.k0s(),e.j41(26,"th",39),e.nrm(27,"i",31),e.EFF(28," sales.salesOrder.netPrice "),e.k0s(),e.nrm(29,"th",40),e.k0s())}function Rn(a,m){if(1&a){const t=e.RV6();e.j41(0,"button",54),e.nI1(1,"translate"),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,o=e.XpG(),p=e.sdS(36);return e.Njj(o.openStatusModal(n.id,p,10,"md"))}),e.nrm(2,"i",55),e.k0s()}2&a&&e.FS9("pTooltip",e.bMT(1,1,"sales.salesOrder.sendApproval"))}function zn(a,m){if(1&a){const t=e.RV6();e.j41(0,"li",45),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,o=e.XpG(),p=e.sdS(38);return e.Njj(o.openModal(n.id,p,"xl"))}),e.j41(1,"span",56),e.nrm(2,"i",57)(3,"span",58),e.k0s()()}}function Jn(a,m){if(1&a){const t=e.RV6();e.j41(0,"li",45),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,o=e.XpG(),p=e.sdS(32);return e.Njj(o.openModal(n.id,p))}),e.j41(1,"span",56),e.nrm(2,"i",59)(3,"span",60),e.k0s()()}}function Ri(a,m){if(1&a){const t=e.RV6();e.j41(0,"tr",41)(1,"td"),e.nrm(2,"button",42),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td")(6,"bdi",43),e.EFF(7),e.k0s()(),e.j41(8,"td")(9,"span",44),e.EFF(10),e.k0s(),e.EFF(11),e.nI1(12,"date"),e.k0s(),e.j41(13,"td",45),e.bIt("click",function(){const n=e.eBV(t).$implicit,o=e.XpG(),p=e.sdS(40);return e.Njj(o.openModal(n.clientId,p,"md"))}),e.j41(14,"a",46),e.EFF(15),e.k0s()(),e.j41(16,"td"),e.EFF(17),e.k0s(),e.j41(18,"td"),e.EFF(19),e.nI1(20,"date"),e.k0s(),e.j41(21,"td"),e.EFF(22),e.k0s(),e.j41(23,"td"),e.EFF(24),e.k0s(),e.j41(25,"td"),e.EFF(26),e.k0s(),e.j41(27,"td"),e.EFF(28),e.k0s(),e.j41(29,"td")(30,"div",47),e.DNE(31,Rn,3,3,"button",48),e.j41(32,"span",47)(33,"div",49)(34,"button",50),e.nrm(35,"i",51),e.k0s(),e.j41(36,"ul",52),e.DNE(37,zn,4,0,"li",53)(38,Jn,4,0,"li",53),e.k0s()()()()()()}if(2&a){const t=m.$implicit,r=m.rowIndex,n=m.expanded;e.R7$(2),e.Y8G("pRowToggler",t)("ngClass",n?" ri-arrow-down-s-line":"  ri-arrow-up-s-line"),e.R7$(2),e.JRh(r+1),e.R7$(3),e.SpI("#DO#",t.id,""),e.R7$(3),e.SpI("",t.creatorName," "),e.R7$(),e.SpI(" ",e.i5U(12,16,t.creationTime,"yyyy-MM-dd HH:mm")," "),e.R7$(4),e.SpI(" ",t.clientName," "),e.R7$(2),e.JRh(t.salsePersonName),e.R7$(2),e.SpI(" ",e.i5U(20,19,t.acutalVisitDate,"yyyy-MM-dd HH:mm"),""),e.R7$(3),e.JRh(t.totalQuantity),e.R7$(2),e.JRh(t.totalDiscount),e.R7$(2),e.JRh(t.totalTax),e.R7$(2),e.JRh(t.netPrice),e.R7$(3),e.Y8G("hasPermission",e.lJ4(22,Ql)),e.R7$(6),e.Y8G("hasPermission",e.lJ4(23,vr)),e.R7$(),e.Y8G("hasPermission",e.lJ4(24,Hn))}}function Mn(a,m){1&a&&(e.j41(0,"tr"),e.nrm(1,"th",65)(2,"th",66)(3,"th",67)(4,"th",68)(5,"th",69)(6,"th",70)(7,"th",71),e.k0s())}function Hl(a,m){if(1&a&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td")(8,"span"),e.EFF(9),e.k0s()(),e.j41(10,"td"),e.EFF(11),e.nI1(12,"translate"),e.k0s(),e.j41(13,"td"),e.EFF(14),e.k0s(),e.j41(15,"td"),e.EFF(16),e.k0s()()),2&a){const t=m.$implicit;e.R7$(2),e.JRh(t.itemName),e.R7$(2),e.JRh(t.unitName),e.R7$(2),e.JRh(t.clientQuantity),e.R7$(3),e.JRh(t.approvedQuantity),e.R7$(2),e.JRh(e.bMT(12,7,"sales.salesOrder."+t.discountTypeValue)),e.R7$(3),e.SpI(" ",t.discount," "),e.R7$(2),e.JRh(t.price)}}function zl(a,m){1&a&&(e.j41(0,"tr"),e.nrm(1,"td",72),e.k0s())}function Jl(a,m){if(1&a&&(e.j41(0,"tr")(1,"td",61)(2,"div",62)(3,"p-table",63),e.DNE(4,Mn,8,0,"ng-template",22)(5,Hl,17,9,"ng-template",23)(6,zl,2,0,"ng-template",64),e.k0s()()()()),2&a){const t=m.$implicit;e.R7$(3),e.Y8G("value",t.offerOrderDetails)}}function Wl(a,m){1&a&&(e.j41(0,"div",73),e.EFF(1," general.table.noData "),e.k0s())}function Kl(a,m){if(1&a){const t=e.RV6();e.j41(0,"div",74)(1,"div",75),e.nrm(2,"ngb-pagination-info",76),e.j41(3,"table-length",77),e.bIt("lengthChange",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",78)(5,"ngb-pagination",79),e.bIt("pageChange",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.pagination.pageNumber,n)||(o.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&a){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function Mi(a,m){if(1&a){const t=e.RV6();e.j41(0,"cancel-sales-model",80),e.bIt("success",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.successCancel())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("orderId",t.orderSelected)}}function Wn(a,m){if(1&a){const t=e.RV6();e.j41(0,"order-timeline",81),e.bIt("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("orderSelected",t.orderSelected)}}function Ws(a,m){if(1&a){const t=e.RV6();e.j41(0,"form",82,6),e.bIt("ngSubmit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.SubmitOrder())}),e.nrm(2,"ngx-ui-loader",83),e.j41(3,"div",84)(4,"div",85)(5,"button",86),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(6,"div",87)(7,"div",88),e.nrm(8,"lord-icon",89),e.j41(9,"div",90),e.nrm(10,"h3",91)(11,"p",92),e.k0s()(),e.j41(12,"div",93),e.nrm(13,"button",94),e.j41(14,"button",95),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()()()()()}if(2&a){const t=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",t.loaderOperationShap)("loaderId",t.deleteLoader)}}function _(a,m){if(1&a){const t=e.RV6();e.j41(0,"sales-edit-order",96),e.bIt("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("isChangeQuantity",!0)("isDraft",!0)("orderSelected",t.orderSelected)}}function On(a,m){if(1&a){const t=e.RV6();e.j41(0,"client-summary",97),e.bIt("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("clientId",t.orderSelected)}}let Oi=(()=>{class a extends Ee.w{constructor(t,r,n,o,p,c,D,ne,re,oe,se,W,q,Q,V){super(t,r,D,n,o,p,c),this.baseService=n,this.authDaamService=ne,this.teamService=re,this.workTimeService=oe,this.excelService=se,this.cityService=W,this.districtService=q,this.channelService=Q,this.router=V,this.title="sales.salesOrder.draftOrder",this.titleOperation="sales.salesOrder.draftOrder",this.keySelected="",this.assignUsers=[],this.times=[],this.employees=[],this.searchForm={},this.isResolveList=!0,this.employeeTypes=[{id:1,name:"employeeTeam"},{id:2,name:"managment"},{id:3,name:"customerService"}],this.employeeGroups=[],this.activeindex="2",this.active=2,this.formPassword={},this.roles=[],this.teams=[],this.workTimes=[],this.userTypes=[],this.actives=[{id:!0,name:"active"},{id:!1,name:"noActive"}],this.clientSelected=0,this.cities=[],this.districts=[],this.channels=[],this.status=[],this.countLoad=2,this.isOrderEdit=!1,this.orderSelected={},this.users=[],this.truncks=[],this.setDates=(E,ce,le)=>{if(E?.from||E?.to){const at=E.to||E.from;this.pagination[ce]=this.datePipe.transform(E.from||E.to,"yyyy-MM-ddT00:00:00"),this.pagination[le]=this.datePipe.transform(at,"yyyy-MM-ddT23:59:59.999")}else this.pagination[ce]=null,this.pagination[le]=null},this.loadentities()}loadentities(){this.countLoad=this.countLoad+1,(!this.isResolveList||1!==this.countLoad)&&(this.pagination.status=0,this.baseService.get(this.pagination).pipe((0,R.Q)(this.notifier)).subscribe(t=>{this.ngxLoader.stopLoader(M.a7),this.entities=t.data,this.pagination.totalItems=t.totalItems,this.LoadSuccess()},t=>{this.ngxLoader.stopLoader(M.a7),this.alertService.error(t)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[])}openModal(t,r,n="md"){this.isOrderEdit=!1,this.form={},this.orderSelected=t,this.modalService.open(r,{centered:!0,size:n})}SubmitOrder(){this.ngxLoader.startLoader(M.Fq),this.baseService.changStatus({id:this.form.id,status:this.form.status}).pipe((0,Y.O)(),(0,Z.c)(this.mainDelay),(0,ee.Z)(),(0,R.Q)(this.notifier),(0,z.j)(()=>this.ngxLoader.stopLoader(M.Fq))).subscribe({next:r=>{this.modalService.dismissAll(),this.loadentities(),this.baseService.GetOrderCountSource.next(!0),this.alertService.success()}})}cancelOrder(){this.ngxLoader.startLoader(M.Fq),console.log(this.operationId),this.baseService.changStatus({id:this.operationId,status:40}).pipe((0,Y.O)(),(0,Z.c)(this.mainDelay),(0,ee.Z)(),(0,R.Q)(this.notifier),(0,z.j)(()=>this.ngxLoader.stopLoader(M.Fq))).subscribe({next:r=>{this.modalService.dismissAll(),this.loadentities(),this.alertService.success()}})}ngOnInitMore(){}mapForm(t){return{...t}}onUpdateIsActive(t){this.baseService.updateActive(t).pipe((0,R.Q)(this.notifier)).subscribe(r=>{r?this.alertService.success():this.alertService.error("general.message."+r)},r=>{this.alertService.error()})}mapRegisterForm(t){let r={...t};return r.employeeCode=0,r}onSearch(){let t={...this.searchForm};this.ngxLoader.startLoader("allLoader"),this.setDates(t.dates,"visitDateFrom","visitDateTo"),this.setDates(t.creationDates,"creationTimeFrom","creationTimeTo"),this.loadentities()}LoadSuccess(){this.ngxLoader.stopLoader("allLoader")}onReset(){this.form={},this.searchForm={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems}}configRoute(){this.routerActive.data.pipe((0,R.Q)(this.notifier)).subscribe(t=>{this.entities=t.data,this.pagination.totalItems=t.data?.totalItems},()=>{this.alertService.error()})}mapExcel(){let t=[];return this.entities.forEach(r=>{t.push({"Order Code":r.orderCode,"Created Date":r.createdDate,"City Name":r.cityName,"District Name":r.districtName?r.districtName:"--","Agent Name":r.agentName,Mobile:r.mobile,"Channel Name":r.channelName,"Assigned To":r.teamNames,Times:r.workTimes,"Visit Date":r.visitDate,Services:r.services})}),t}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,this.translateService.instant(this.title),[])}onNavChange(t){1===t.nextId&&(this.activeindex="1"),3===t.nextId&&(this.activeindex="3")}goRegister(){this.router.navigateByUrl("/managment/order/new")}goEdit(t){this.router.navigateByUrl("/managment/order/new")}getStatus(t){return 10==t.offerOrderStatus||20==t.offerOrderStatus?"bg-warning-subtle text-warning":30==t.offerOrderStatus?"bg-success-subtle text-success":40==t.offerOrderStatus?"bg-danger-subtle text-danger":50==t.offerOrderStatus?"bg-danger-success text-success":"bg-warning-subtle text-warning"}checkEdit(t){return!t.isCancel&&!t.isFinish}openStatusModal(t,r,n,o="md"){this.isEditForm=!1,this.form={},this.form={id:t,status:n},this.modalService.open(r,{centered:!0,size:o})}openModalClient(t,r,n="xl"){this.clientSelected=t.orderCode,this.form=t,this.isOrderEdit=!1,this.modalService.open(r,{centered:!0,size:n})}copytext(t){navigator.clipboard.writeText(t),this.alertService.info(t)}openEditOrderModal(t,r,n="md"){this.form={},this.isOrderEdit=!0,this.clientSelected=t,this.modalService.open(r,{centered:!0,size:n})}OpenOrderTimeLineModel(t,r,n="md"){this.orderSelected=t,this.modalService.open(r,{centered:!0,size:n})}successCancel(){this.baseService.GetOrderCountSource.next(!0),this.loadentities()}goNew(){this.router.navigateByUrl("/sales/new")}static{this.\u0275fac=function(r){return new(r||a)(e.rXU($.nX),e.rXU(F.c$),e.rXU(Oe),e.rXU(ae.u),e.rXU(k.vh),e.rXU(X.eD),e.rXU(O.Bq),e.rXU(nt.J),e.rXU(zt.n),e.rXU(ui.G),e.rXU(qe.V),e.rXU(Ve.h),e.rXU(gi.m),e.rXU(an.l),e.rXU($.Ix))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["draft-order"]],features:[e.Vt3],decls:41,vars:34,consts:[["tableMaster",""],["deleteModal",""],["OrderTimeLineModel",""],["StatusOrderModal",""],["SalesEditModel",""],["ClientInfo",""],["formEntity","ngForm"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],["overlayColor","rgba(255,255,255,0.05)","fgsColor","rgba(255,255,255,0)",3,"loaderId"],[3,"addNew","reset","search","exportXlsx","addPermission","showAdd","showExport","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","number","id","id","name","id",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["InputTirmFilter","","type","search","id","clientName","name","clientName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["type","text","mwlFlatpickr","","id","isDate","mode","range","altFormat","d/m/Y",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],[2,"width",".2%"],["translate","",2,"width",".5%"],["pSortableColumn","id","translate","",2,"width","6%"],[1,"ri-expand-up-down-line"],["pSortableColumn","creationTime","translate","",2,"width","12%"],["pSortableColumn","clientId","translate","",2,"width","10%"],["translate","",2,"width","8%"],["pSortableColumn","clientVisitDate","translate","",2,"width","8%"],["pSortableColumn","totalQuantity","translate","",2,"width","8%"],["pSortableColumn","totalDiscount","translate","",2,"width","7%"],["translate","",2,"width","6%"],["pSortableColumn","netPrice","translate","",2,"width","6%"],["translate","",2,"width","10%"],[1,"fs-5"],["type","button","pRipple","",1,"border-0","p-button-text","p-button-rounded","p-button-plain",3,"pRowToggler","ngClass"],[1,"code-pointer"],[1,"badge","bg-success-subtle","text-success"],[3,"click"],["href","javascript:void(0)",1,"link-primary","link-offset-2","text-decoration-underline","link-underline-opacity-25","link-underline-opacity-100-hover"],[1,"d-inline-block"],["class","btn btn-sm btn-warning edit-list mx-1","tooltipPosition","top",3,"pTooltip","click",4,"hasPermission"],[1,"dropdown-custom","d-inline-block"],["type","button",1,"btn","dropbtn","btn-soft-secondary","btn-sm","dropdown-custom","arrow-none"],[1,"ri-more-fill"],[1,"dropdown-menu","dropdown-menu-end","dropdown-content",2,"left","0"],[3,"click",4,"hasPermission"],["tooltipPosition","top",1,"btn","btn-sm","btn-warning","edit-list","mx-1",3,"click","pTooltip"],[1,"ri-checkbox-fill","align-bottom"],[1,"dropdown-item"],[1,"text-success","ri-pencil-fill","align-bottom","me-2"],["translate","general.action.edit"],[1,"text-danger","ri-close-fill","align-bottom","me-2"],["translate","general.action.cancel"],["colspan","17"],[1,"table-detail"],["dataKey","id",3,"value"],["pTemplate","emptymessage"],["translate","sales.salesOrder.itemName",2,"width","10%"],["translate","sales.salesOrder.unit",2,"width","6%"],["translate","sales.salesOrder.clientQuantity",2,"width","8%"],["translate","sales.salesOrder.approvedQuantity",2,"width","8%"],["translate","sales.salesOrder.discountType",2,"width","5%"],["translate","sales.salesOrder.discount",2,"width","5%"],["translate","sales.salesOrder.price",2,"width","5%"],["colspan","8"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[3,"success","dismiss","orderId"],[3,"dismiss","orderSelected"],[3,"ngSubmit"],[3,"hasProgressBar","fgsType","loaderId"],[1,"modal-content"],[1,"modal-header"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","btn-close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mt-2","text-center"],["src","https://cdn.lordicon.com/gdfrsvpt.json","stroke","bold","state","hover-oscillate","trigger","loop","colors","primary:#f7b84b,secondary:#f06548",2,"width","130px","height","130px"],[1,"pt-2","fs-15","mx-4","mx-sm-5"],["translate","orderManagement.order.AreYouSureMessage"],[1,"text-muted","mx-4","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","submit","id","save","translate","general.action.save",1,"btn","w-sm","btn-danger"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light",3,"click"],[3,"dismiss","isChangeQuantity","isDraft","orderSelected"],[3,"dismiss","clientId"]],template:function(r,n){if(1&r){const o=e.RV6();e.j41(0,"div",7)(1,"div",8)(2,"div",9),e.nrm(3,"ngx-ui-loader",10),e.j41(4,"base-filter",11),e.bIt("addNew",function(){return e.eBV(o),e.Njj(n.goNew())})("reset",function(){return e.eBV(o),e.Njj(n.onReset())})("search",function(){return e.eBV(o),e.Njj(n.onSearch())})("exportXlsx",function(){return e.eBV(o),e.Njj(n.onExportXlsx())}),e.qex(5,12),e.j41(6,"div",13)(7,"div",14)(8,"input",15),e.nI1(9,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.pagination.id,c)||(n.pagination.id=c),e.Njj(c)}),e.k0s(),e.nrm(10,"i",16),e.k0s()(),e.j41(11,"div",13)(12,"div",14)(13,"input",17),e.nI1(14,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.pagination.clientName,c)||(n.pagination.clientName=c),e.Njj(c)}),e.k0s(),e.nrm(15,"i",16),e.k0s()(),e.j41(16,"div",13)(17,"input",18),e.nI1(18,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.searchForm.dates,c)||(n.searchForm.dates=c),e.Njj(c)}),e.k0s()(),e.j41(19,"div",13)(20,"input",18),e.nI1(21,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.searchForm.creationDates,c)||(n.searchForm.creationDates=c),e.Njj(c)}),e.k0s()(),e.bVm(),e.k0s(),e.j41(22,"div",19)(23,"div",20)(24,"p-table",21,0),e.bIt("onLazyLoad",function(c){return e.eBV(o),e.Njj(n.tableChange(c))})("selectionChange",function(c){return e.eBV(o),e.Njj(n.onSelectionChange(c))}),e.DNE(26,Cr,30,0,"ng-template",22)(27,Ri,39,25,"ng-template",23)(28,Jl,7,1,"ng-template",24),e.k0s()(),e.DNE(29,Wl,2,0,"div",25)(30,Kl,6,8,"div",26),e.k0s()()(),e.DNE(31,Mi,1,1,"ng-template",null,1,e.C5r)(33,Wn,1,1,"ng-template",null,2,e.C5r)(35,Ws,15,3,"ng-template",null,3,e.C5r)(37,_,1,3,"ng-template",null,4,e.C5r)(39,On,1,1,"ng-template",null,5,e.C5r),e.k0s()}2&r&&(e.R7$(3),e.Y8G("loaderId","sureLoader"),e.R7$(),e.Y8G("addPermission",e.lJ4(33,Js))("showAdd",!0)("showAdd",!1)("showExport",!1)("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(4),e.FS9("placeholder",e.bMT(9,25,"orderManagement.order.orderCode")),e.R50("ngModel",n.pagination.id),e.R7$(5),e.FS9("placeholder",e.bMT(14,27,"orderManagement.order.agentName")),e.R50("ngModel",n.pagination.clientName),e.R7$(4),e.FS9("placeholder",e.bMT(18,29,"orderManagement.order.visitDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.dates),e.R7$(3),e.FS9("placeholder",e.bMT(21,31,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.creationDates),e.R7$(4),e.Y8G("value",n.entities)("rows",n.pagination.pageSize)("lazy",!0)("totalRecords",n.pagination.totalItems),e.R7$(5),e.Y8G("ngIf",n.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems>0))},dependencies:[k.YU,k.bT,g.qT,g.me,g.Q0,g.BC,g.cb,g.vS,g.cV,O.s5,fe.kL,Le.b,$e.p,Be.g,Jt,F.Mm,B.XI,Xe.Ei,B.Tg,B.FP,X.Cv,ke.m,ye.p,et.m,je,jn,k.vh,F.D9],encapsulation:2})}}return a})();const gt=()=>["salesOrder.register"],ie=()=>["changeQTY.newOrder"],Zl=()=>["changeQTY.edit"],ed=()=>["changeQTY.cancel"];function td(a,m){1&a&&(e.j41(0,"tr",31),e.nrm(1,"th",32),e.j41(2,"th",33),e.EFF(3,"#"),e.k0s(),e.j41(4,"th",34),e.nrm(5,"i",35),e.EFF(6," orderManagement.order.orderCode "),e.k0s(),e.j41(7,"th",36),e.nrm(8,"i",35),e.EFF(9," orderManagement.order.creation "),e.k0s(),e.j41(10,"th",37),e.nrm(11,"i",35),e.EFF(12," orderManagement.order.agentName "),e.k0s(),e.j41(13,"th",38),e.EFF(14," sales.salesOrder.salsePerson "),e.k0s(),e.j41(15,"th",39),e.nrm(16,"i",35),e.EFF(17," sales.salesOrder.clientVisitDate "),e.k0s(),e.j41(18,"th",40),e.EFF(19," sales.salesOrder.changeQuantityMessage "),e.k0s(),e.j41(20,"th",41),e.nrm(21,"i",35),e.EFF(22," sales.salesOrder.netPrice "),e.k0s(),e.nrm(23,"th",42),e.k0s())}function ln(a,m){if(1&a){const t=e.RV6();e.j41(0,"button",56),e.nI1(1,"translate"),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,o=e.XpG(),p=e.sdS(50);return e.Njj(o.openStatusModal(n.id,p,10,"md"))}),e.nrm(2,"i",57),e.k0s()}2&a&&e.FS9("pTooltip",e.bMT(1,1,"sales.salesOrder.sendApproval"))}function nd(a,m){if(1&a){const t=e.RV6();e.j41(0,"li",47),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,o=e.XpG(),p=e.sdS(52);return e.Njj(o.openModal(n.id,p,"xl"))}),e.j41(1,"span",58),e.nrm(2,"i",59)(3,"span",60),e.k0s()()}}function id(a,m){if(1&a){const t=e.RV6();e.j41(0,"li",47),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,o=e.XpG(),p=e.sdS(46);return e.Njj(o.openModal(n.id,p))}),e.j41(1,"span",58),e.nrm(2,"i",61)(3,"span",62),e.k0s()()}}function rd(a,m){if(1&a){const t=e.RV6();e.j41(0,"tr",43)(1,"td"),e.nrm(2,"button",44),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td")(6,"bdi",45),e.EFF(7),e.k0s()(),e.j41(8,"td")(9,"span",46),e.EFF(10),e.k0s(),e.EFF(11),e.nI1(12,"date"),e.k0s(),e.j41(13,"td",47),e.bIt("click",function(){const n=e.eBV(t).$implicit,o=e.XpG(),p=e.sdS(54);return e.Njj(o.openModal(n.clientId,p,"md"))}),e.j41(14,"a",48),e.EFF(15),e.k0s()(),e.j41(16,"td"),e.EFF(17),e.k0s(),e.j41(18,"td"),e.EFF(19),e.nI1(20,"date"),e.k0s(),e.j41(21,"td"),e.EFF(22),e.k0s(),e.j41(23,"td"),e.EFF(24),e.k0s(),e.j41(25,"td")(26,"div",49),e.DNE(27,ln,3,3,"button",50),e.j41(28,"span",49)(29,"div",51)(30,"button",52),e.nrm(31,"i",53),e.k0s(),e.j41(32,"ul",54),e.DNE(33,nd,4,0,"li",55)(34,id,4,0,"li",55),e.k0s()()()()()()}if(2&a){const t=m.$implicit,r=m.rowIndex,n=m.expanded;e.R7$(2),e.Y8G("pRowToggler",t)("ngClass",n?" ri-arrow-down-s-line":"  ri-arrow-up-s-line"),e.R7$(2),e.JRh(r+1),e.R7$(3),e.SpI("#SO#",t.id,""),e.R7$(3),e.SpI("",t.creatorName," "),e.R7$(),e.SpI(" ",e.i5U(12,14,t.creationTime,"yyyy-MM-dd HH:mm")," "),e.R7$(4),e.SpI(" ",t.clientName," "),e.R7$(2),e.JRh(t.salsePersonName),e.R7$(2),e.SpI(" ",e.i5U(20,17,t.acutalVisitDate,"yyyy-MM-dd HH:mm"),""),e.R7$(3),e.JRh(t.changeQuantityMessage),e.R7$(2),e.JRh(t.netPrice),e.R7$(3),e.Y8G("hasPermission",e.lJ4(20,ie)),e.R7$(6),e.Y8G("hasPermission",e.lJ4(21,Zl)),e.R7$(),e.Y8G("hasPermission",e.lJ4(22,ed))}}function sd(a,m){1&a&&(e.j41(0,"tr"),e.nrm(1,"th",67)(2,"th",68)(3,"th",69)(4,"th",70)(5,"th",71)(6,"th",72)(7,"th",73),e.k0s())}function ad(a,m){if(1&a&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td")(8,"span"),e.EFF(9),e.k0s()(),e.j41(10,"td"),e.EFF(11),e.nI1(12,"translate"),e.k0s(),e.j41(13,"td"),e.EFF(14),e.k0s(),e.j41(15,"td"),e.EFF(16),e.k0s()()),2&a){const t=m.$implicit;e.R7$(2),e.JRh(t.itemName),e.R7$(2),e.JRh(t.unitName),e.R7$(2),e.JRh(t.clientQuantity),e.R7$(3),e.JRh(t.approvedQuantity),e.R7$(2),e.JRh(e.bMT(12,7,"sales.salesOrder."+t.discountTypeValue)),e.R7$(3),e.SpI(" ",t.discount," "),e.R7$(2),e.JRh(t.price)}}function Vt(a,m){1&a&&(e.j41(0,"tr"),e.nrm(1,"td",74),e.k0s())}function od(a,m){if(1&a&&(e.j41(0,"tr")(1,"td",63)(2,"div",64)(3,"p-table",65),e.DNE(4,sd,8,0,"ng-template",26)(5,ad,17,9,"ng-template",27)(6,Vt,2,0,"ng-template",66),e.k0s()()()()),2&a){const t=m.$implicit;e.R7$(3),e.Y8G("value",t.offerOrderDetails)}}function ld(a,m){1&a&&(e.j41(0,"div",75),e.EFF(1," general.table.noData "),e.k0s())}function dd(a,m){if(1&a){const t=e.RV6();e.j41(0,"div",76)(1,"div",77),e.nrm(2,"ngb-pagination-info",78),e.j41(3,"table-length",79),e.bIt("lengthChange",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",80)(5,"ngb-pagination",81),e.bIt("pageChange",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.pagination.pageNumber,n)||(o.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&a){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function cd(a,m){if(1&a){const t=e.RV6();e.j41(0,"form",82,7),e.bIt("ngSubmit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.cancelOrder())}),e.nrm(2,"ngx-ui-loader",83),e.j41(3,"div",84)(4,"div",85)(5,"button",86),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(6,"div",87)(7,"div",88),e.nrm(8,"lord-icon",89),e.j41(9,"div",90),e.nrm(10,"h3",91)(11,"p",92),e.k0s()(),e.j41(12,"div",93),e.nrm(13,"button",94),e.j41(14,"button",95),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()()()()()}if(2&a){const t=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",t.loaderOperationShap)("loaderId",t.deleteLoader)}}function md(a,m){if(1&a){const t=e.RV6();e.j41(0,"cancel-sales-model",96),e.bIt("success",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.reload())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("orderId",t.orderSelected)}}function Lt(a,m){if(1&a){const t=e.RV6();e.j41(0,"order-timeline",97),e.bIt("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("orderSelected",t.orderSelected)}}function pd(a,m){if(1&a){const t=e.RV6();e.j41(0,"form",82,7),e.bIt("ngSubmit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.SubmitOrder())}),e.nrm(2,"ngx-ui-loader",83),e.j41(3,"div",84)(4,"div",85)(5,"button",86),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(6,"div",87)(7,"div",88),e.nrm(8,"lord-icon",89),e.j41(9,"div",90),e.nrm(10,"h3",91)(11,"p",92),e.k0s()(),e.j41(12,"div",93),e.nrm(13,"button",94),e.j41(14,"button",95),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()()()()()}if(2&a){const t=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",t.loaderOperationShap)("loaderId",t.deleteLoader)}}function ud(a,m){if(1&a){const t=e.RV6();e.j41(0,"sales-edit-order",98),e.bIt("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("isChangeQuantity",!0)("isDraft",!0)("orderSelected",t.orderSelected)}}function gd(a,m){if(1&a){const t=e.RV6();e.j41(0,"client-summary",99),e.bIt("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("clientId",t.orderSelected)}}let _d=(()=>{class a extends Ee.w{constructor(t,r,n,o,p,c,D,ne,re,oe,se,W,q,Q,V,E,ce){super(t,r,D,n,o,p,c),this.baseService=n,this.authDaamService=ne,this.teamService=re,this.workTimeService=oe,this.excelService=se,this.districtService=W,this.channelService=q,this.router=Q,this.employeeService=V,this.regionService=E,this.cityService=ce,this.title="sales.salesOrder.changeQuantity",this.titleOperation="sales.salesOrder.changeQuantity",this.keySelected="",this.searchForm={},this.isResolveList=!0,this.activeindex="2",this.active=2,this.countLoad=2,this.isOrderEdit=!1,this.orderSelected={},this.users=[],this.truncks=[],this.clientSelected={},this.salesPersons=[],this.regions=[],this.cities=[],this.setDates=(le,Te,at)=>{if(le?.from||le?.to){const es=le.to||le.from;this.pagination[Te]=this.datePipe.transform(le.from||le.to,"yyyy-MM-ddT00:00:00"),this.pagination[at]=this.datePipe.transform(es,"yyyy-MM-ddT23:59:59.999")}else this.pagination[Te]=null,this.pagination[at]=null},this.loadentities(),this.GetSalesPersons(),this.GetRegions(),this.GetCities()}GetRegions(){this.regionService.getDropDown().subscribe(t=>{this.regions=t.data},t=>{console.log(t)})}GetCities(){this.cityService.getDropDown().subscribe(t=>{this.cities=t.data},t=>{console.log(t)})}GetSalesPersons(){this.employeeService.GetAllByType(9).subscribe(t=>{this.salesPersons=t.data},t=>{console.log(t)})}loadentities(){this.countLoad=this.countLoad+1,(!this.isResolveList||1!==this.countLoad)&&(this.pagination.status=5,this.baseService.get(this.pagination).pipe((0,R.Q)(this.notifier)).subscribe(t=>{this.ngxLoader.stopLoader(M.a7),this.entities=t.data,this.pagination.totalItems=t.totalItems,this.LoadSuccess()},t=>{this.ngxLoader.stopLoader(M.a7),this.alertService.error(t)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[])}openModal(t,r,n="md"){this.isOrderEdit=!1,this.form={},this.orderSelected=t,this.modalService.open(r,{centered:!0,size:n})}SubmitOrder(){this.ngxLoader.startLoader(M.Fq),this.baseService.changStatus({id:this.form.id,status:this.form.status}).pipe((0,Y.O)(),(0,Z.c)(this.mainDelay),(0,ee.Z)(),(0,R.Q)(this.notifier),(0,z.j)(()=>this.ngxLoader.stopLoader(M.Fq))).subscribe({next:r=>{this.modalService.dismissAll(),this.reload(),this.alertService.success()}})}cancelOrder(){this.ngxLoader.startLoader(M.Fq),console.log(this.operationId),this.baseService.changStatus({id:this.operationId,status:40}).pipe((0,Y.O)(),(0,Z.c)(this.mainDelay),(0,ee.Z)(),(0,R.Q)(this.notifier),(0,z.j)(()=>this.ngxLoader.stopLoader(M.Fq))).subscribe({next:r=>{this.modalService.dismissAll(),this.loadentities(),this.alertService.success()}})}ngOnInitMore(){}mapForm(t){return{...t}}onUpdateIsActive(t){this.baseService.updateActive(t).pipe((0,R.Q)(this.notifier)).subscribe(r=>{r?this.alertService.success():this.alertService.error("general.message."+r)},r=>{this.alertService.error()})}mapRegisterForm(t){let r={...t};return r.employeeCode=0,r}onSearch(){let t={...this.searchForm};this.ngxLoader.startLoader("allLoader"),this.setDates(t.dates,"visitDateFrom","visitDateTo"),this.setDates(t.creationDates,"creationTimeFrom","creationTimeTo"),this.loadentities()}LoadSuccess(){this.ngxLoader.stopLoader("allLoader")}onReset(){this.form={},this.searchForm={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems}}configRoute(){this.routerActive.data.pipe((0,R.Q)(this.notifier)).subscribe(t=>{this.entities=t.data,this.pagination.totalItems=t.data?.totalItems},()=>{this.alertService.error()})}mapExcel(){let t=[];return this.entities.forEach(r=>{t.push({"Order Code":r.orderCode,"Created Date":r.createdDate,"City Name":r.cityName,"District Name":r.districtName?r.districtName:"--","Agent Name":r.agentName,Mobile:r.mobile,"Channel Name":r.channelName,"Assigned To":r.teamNames,Times:r.workTimes,"Visit Date":r.visitDate,Services:r.services})}),t}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,this.translateService.instant(this.title),[])}onNavChange(t){1===t.nextId&&(this.activeindex="1"),3===t.nextId&&(this.activeindex="3")}goRegister(){this.router.navigateByUrl("/managment/order/new")}goEdit(t){this.router.navigateByUrl("/managment/order/new")}getStatus(t){return 10==t.offerOrderStatus||20==t.offerOrderStatus?"bg-warning-subtle text-warning":30==t.offerOrderStatus?"bg-success-subtle text-success":40==t.offerOrderStatus?"bg-danger-subtle text-danger":50==t.offerOrderStatus?"bg-danger-success text-success":"bg-warning-subtle text-warning"}checkEdit(t){return!t.isCancel&&!t.isFinish}openStatusModal(t,r,n,o="md"){this.isEditForm=!1,this.form={},this.form={id:t,status:n},this.modalService.open(r,{centered:!0,size:o})}openModalClient(t,r,n="xl"){this.clientSelected=t.orderCode,this.form=t,this.isOrderEdit=!1,this.modalService.open(r,{centered:!0,size:n})}copytext(t){navigator.clipboard.writeText(t),this.alertService.info(t)}openEditOrderModal(t,r,n="md"){this.form={},this.isOrderEdit=!0,this.clientSelected=t,this.modalService.open(r,{centered:!0,size:n})}OpenOrderTimeLineModel(t,r,n="md"){this.orderSelected=t,this.modalService.open(r,{centered:!0,size:n})}reload(){this.baseService.GetOrderCountSource.next(!0),this.loadentities()}goNew(){this.router.navigateByUrl("/sales/new")}static{this.\u0275fac=function(r){return new(r||a)(e.rXU($.nX),e.rXU(F.c$),e.rXU(Oe),e.rXU(ae.u),e.rXU(k.vh),e.rXU(X.eD),e.rXU(O.Bq),e.rXU(nt.J),e.rXU(zt.n),e.rXU(ui.G),e.rXU(qe.V),e.rXU(gi.m),e.rXU(an.l),e.rXU($.Ix),e.rXU(tt.O),e.rXU(ct.S),e.rXU(Ve.h))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["change-quantity-order"]],features:[e.Vt3],decls:55,vars:52,consts:[["tableMaster",""],["cancelOrderModal",""],["deleteModal",""],["OrderTimeLineModel",""],["StatusOrderModal",""],["SalesEditModel",""],["ClientInfo",""],["formEntity","ngForm"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],["overlayColor","rgba(255,255,255,0.05)","fgsColor","rgba(255,255,255,0)",3,"addNew","addPermission","showAdd","loaderId"],[3,"reset","search","exportXlsx","showAdd","showExport","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","number","id","id","name","id",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["InputTirmFilter","","type","search","id","clientName","name","clientName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["type","text","mwlFlatpickr","","id","isDate","mode","range","altFormat","d/m/Y",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],["name","name","bindValue","id","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],["name","regionId","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","placeholder","ngModel"],["name","cityId","bindValue","code","bindLabel","name",3,"ngModelChange","items","multiple","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],[2,"width",".2%"],["translate","",2,"width",".5%"],["pSortableColumn","id","translate","",2,"width","6%"],[1,"ri-expand-up-down-line"],["pSortableColumn","creationTime","translate","",2,"width","12%"],["pSortableColumn","clientId","translate","",2,"width","10%"],["translate","",2,"width","8%"],["pSortableColumn","clientVisitDate","translate","",2,"width","8%"],["translate","",2,"width","20%"],["pSortableColumn","netPrice","translate","",2,"width","5%"],["translate","",2,"width","10%"],[1,"fs-5"],["type","button","pRipple","",1,"border-0","p-button-text","p-button-rounded","p-button-plain",3,"pRowToggler","ngClass"],[1,"code-pointer"],[1,"badge","bg-success-subtle","text-success"],[3,"click"],["href","javascript:void(0)",1,"link-primary","link-offset-2","text-decoration-underline","link-underline-opacity-25","link-underline-opacity-100-hover"],[1,"d-inline-block"],["class","btn btn-sm btn-warning edit-list mx-1","tooltipPosition","top",3,"pTooltip","click",4,"hasPermission"],[1,"dropdown-custom","d-inline-block"],["type","button",1,"btn","dropbtn","btn-soft-secondary","btn-sm","dropdown-custom","arrow-none"],[1,"ri-more-fill"],[1,"dropdown-menu","dropdown-menu-end","dropdown-content",2,"left","0"],[3,"click",4,"hasPermission"],["tooltipPosition","top",1,"btn","btn-sm","btn-warning","edit-list","mx-1",3,"click","pTooltip"],[1,"ri-checkbox-fill","align-bottom"],[1,"dropdown-item"],[1,"text-success","ri-pencil-fill","align-bottom","me-2"],["translate","general.action.edit"],[1,"text-danger","ri-close-fill","align-bottom","me-2"],["translate","general.action.cancel"],["colspan","17"],[1,"table-detail"],["dataKey","id",3,"value"],["pTemplate","emptymessage"],["translate","sales.salesOrder.itemName",2,"width","10%"],["translate","sales.salesOrder.unit",2,"width","6%"],["translate","sales.salesOrder.clientQuantity",2,"width","8%"],["translate","sales.salesOrder.approvedQuantity",2,"width","8%"],["translate","sales.salesOrder.discountType",2,"width","5%"],["translate","sales.salesOrder.discount",2,"width","5%"],["translate","sales.salesOrder.price",2,"width","5%"],["colspan","8"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[3,"ngSubmit"],[3,"hasProgressBar","fgsType","loaderId"],[1,"modal-content"],[1,"modal-header"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","btn-close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mt-2","text-center"],["src","https://cdn.lordicon.com/gdfrsvpt.json","stroke","bold","state","hover-oscillate","trigger","loop","colors","primary:#f7b84b,secondary:#f06548",2,"width","130px","height","130px"],[1,"pt-2","fs-15","mx-4","mx-sm-5"],["translate","orderManagement.order.AreYouSureMessage"],[1,"text-muted","mx-4","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","submit","id","save","translate","general.action.save",1,"btn","w-sm","btn-danger"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light",3,"click"],[3,"success","dismiss","orderId"],[3,"dismiss","orderSelected"],[3,"dismiss","isChangeQuantity","isDraft","orderSelected"],[3,"dismiss","clientId"]],template:function(r,n){if(1&r){const o=e.RV6();e.j41(0,"div",8)(1,"div",9)(2,"div",10)(3,"ngx-ui-loader",11),e.bIt("addNew",function(){return e.eBV(o),e.Njj(n.goNew())}),e.k0s(),e.j41(4,"base-filter",12),e.bIt("reset",function(){return e.eBV(o),e.Njj(n.onReset())})("search",function(){return e.eBV(o),e.Njj(n.onSearch())})("exportXlsx",function(){return e.eBV(o),e.Njj(n.onExportXlsx())}),e.qex(5,13),e.j41(6,"div",14)(7,"div",15)(8,"input",16),e.nI1(9,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.pagination.id,c)||(n.pagination.id=c),e.Njj(c)}),e.k0s(),e.nrm(10,"i",17),e.k0s()(),e.j41(11,"div",14)(12,"div",15)(13,"input",18),e.nI1(14,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.pagination.clientName,c)||(n.pagination.clientName=c),e.Njj(c)}),e.k0s(),e.nrm(15,"i",17),e.k0s()(),e.j41(16,"div",14)(17,"input",19),e.nI1(18,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.searchForm.creationDates,c)||(n.searchForm.creationDates=c),e.Njj(c)}),e.k0s()(),e.j41(19,"div",14)(20,"div",15)(21,"ng-select",20),e.nI1(22,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.pagination.salesPersonId,c)||(n.pagination.salesPersonId=c),e.Njj(c)}),e.k0s()()(),e.j41(23,"div",14)(24,"input",19),e.nI1(25,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.searchForm.dates,c)||(n.searchForm.dates=c),e.Njj(c)}),e.k0s()(),e.j41(26,"div",14)(27,"div",15)(28,"ng-select",21),e.nI1(29,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.pagination.regionId,c)||(n.pagination.regionId=c),e.Njj(c)}),e.k0s()()(),e.j41(30,"div",14)(31,"div",15)(32,"ng-select",22),e.nI1(33,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.pagination.cityId,c)||(n.pagination.cityId=c),e.Njj(c)}),e.k0s()()(),e.bVm(),e.k0s(),e.j41(34,"div",23)(35,"div",24)(36,"p-table",25,0),e.bIt("onLazyLoad",function(c){return e.eBV(o),e.Njj(n.tableChange(c))})("selectionChange",function(c){return e.eBV(o),e.Njj(n.onSelectionChange(c))}),e.DNE(38,td,24,0,"ng-template",26)(39,rd,35,23,"ng-template",27)(40,od,7,1,"ng-template",28),e.k0s()(),e.DNE(41,ld,2,0,"div",29)(42,dd,6,8,"div",30),e.k0s()()()(),e.DNE(43,cd,15,3,"ng-template",null,1,e.C5r)(45,md,1,1,"ng-template",null,2,e.C5r)(47,Lt,1,1,"ng-template",null,3,e.C5r)(49,pd,15,3,"ng-template",null,4,e.C5r)(51,ud,1,3,"ng-template",null,5,e.C5r)(53,gd,1,1,"ng-template",null,6,e.C5r)}2&r&&(e.R7$(3),e.Y8G("addPermission",e.lJ4(51,gt))("showAdd",!0)("loaderId","sureLoader"),e.R7$(),e.Y8G("showAdd",!1)("showExport",!1)("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(4),e.FS9("placeholder",e.bMT(9,37,"orderManagement.order.orderCode")),e.R50("ngModel",n.pagination.id),e.R7$(5),e.FS9("placeholder",e.bMT(14,39,"orderManagement.order.agentName")),e.R50("ngModel",n.pagination.clientName),e.R7$(4),e.FS9("placeholder",e.bMT(18,41,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.creationDates),e.R7$(4),e.FS9("placeholder",e.bMT(22,43,"sales.salesOrder.salsePerson")),e.Y8G("items",n.salesPersons)("multiple",!1),e.R50("ngModel",n.pagination.salesPersonId),e.R7$(3),e.FS9("placeholder",e.bMT(25,45,"sales.salesOrder.clientVisitDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.dates),e.R7$(4),e.FS9("placeholder",e.bMT(29,47,"client.client.regionName")),e.Y8G("items",n.regions)("multiple",!1),e.R50("ngModel",n.pagination.regionId),e.R7$(4),e.FS9("placeholder",e.bMT(33,49,"client.client.cityName")),e.Y8G("items",n.cities)("multiple",!1),e.R50("ngModel",n.pagination.cityId),e.R7$(4),e.Y8G("value",n.entities)("rows",n.pagination.pageSize)("lazy",!0)("totalRecords",n.pagination.totalItems),e.R7$(5),e.Y8G("ngIf",n.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems>0))},dependencies:[k.YU,k.bT,g.qT,g.me,g.Q0,g.BC,g.cb,g.vS,g.cV,O.s5,fe.kL,Le.b,$e.p,Be.g,Jt,F.Mm,B.XI,Xe.Ei,B.Tg,B.FP,X.Cv,ve.vr,ke.m,ye.p,et.m,je,jn,k.vh,F.D9],encapsulation:2})}}return a})();const hd=()=>["salesOrder.view"],dn=()=>["orderDraft.view"],fd=()=>["changeQTY.view"],bd=()=>["smApprove.view"],Tt=()=>["storePrepare.view"],vd=()=>["shippingOrder.view"],Cd=()=>["completeOrder.view"],Sd=()=>["cancelOrder.view"];function jd(a,m){1&a&&e.nrm(0,"app-all-sales-order")}function Id(a,m){1&a&&(e.j41(0,"li",6)(1,"a",7),e.nrm(2,"span",8),e.k0s(),e.DNE(3,jd,1,0,"ng-template",9),e.k0s()),2&a&&e.Y8G("ngbNavItem",1)}function Ks(a,m){1&a&&e.nrm(0,"draft-order")}function Zs(a,m){if(1&a&&(e.j41(0,"li",6)(1,"a",7),e.nrm(2,"span",10),e.j41(3,"span",11),e.EFF(4),e.k0s()(),e.DNE(5,Ks,1,0,"ng-template",9),e.k0s()),2&a){const t=e.XpG();e.Y8G("ngbNavItem",2),e.R7$(4),e.JRh(null==t.count?null:t.count.draft)}}function yd(a,m){1&a&&e.nrm(0,"change-quantity-order")}function Td(a,m){if(1&a&&(e.j41(0,"li",6)(1,"a",7),e.nrm(2,"span",12),e.j41(3,"span",11),e.EFF(4),e.k0s()(),e.DNE(5,yd,1,0,"ng-template",9),e.k0s()),2&a){const t=e.XpG();e.Y8G("ngbNavItem",2),e.R7$(4),e.JRh(null==t.count?null:t.count.changeQuantity)}}function Sr(a,m){1&a&&e.nrm(0,"app-new-order")}function Kn(a,m){if(1&a&&(e.j41(0,"li",6)(1,"a",7),e.nrm(2,"span",13),e.j41(3,"span",11),e.EFF(4),e.k0s()(),e.DNE(5,Sr,1,0,"ng-template",9),e.k0s()),2&a){const t=e.XpG();e.Y8G("ngbNavItem",4),e.R7$(4),e.JRh(null==t.count?null:t.count.underReview)}}function Fi(a,m){1&a&&e.nrm(0,"app-sure-order")}function xd(a,m){if(1&a&&(e.j41(0,"li",6)(1,"a",7),e.nrm(2,"span",14),e.j41(3,"span",11),e.EFF(4),e.k0s()(),e.DNE(5,Fi,1,0,"ng-template",9),e.k0s()),2&a){const t=e.XpG();e.Y8G("ngbNavItem",5),e.R7$(4),e.JRh(null==t.count?null:t.count.approved)}}function ea(a,m){1&a&&e.nrm(0,"assign-order")}function kd(a,m){if(1&a&&(e.j41(0,"li",6)(1,"a",7),e.nrm(2,"span",15),e.j41(3,"span",11),e.EFF(4),e.k0s()(),e.DNE(5,ea,1,0,"ng-template",9),e.k0s()),2&a){const t=e.XpG();e.Y8G("ngbNavItem",6),e.R7$(4),e.JRh(null==t.count?null:t.count.assign)}}function $t(a,m){1&a&&e.nrm(0,"app-complete-order")}function jr(a,m){1&a&&(e.j41(0,"li",6)(1,"a",7),e.nrm(2,"span",16),e.k0s(),e.DNE(3,$t,1,0,"ng-template",9),e.k0s()),2&a&&e.Y8G("ngbNavItem",7)}function cn(a,m){1&a&&e.nrm(0,"app-cancel-order")}function _t(a,m){1&a&&(e.j41(0,"li",6)(1,"a",7),e.nrm(2,"span",17),e.k0s(),e.DNE(3,cn,1,0,"ng-template",9),e.k0s()),2&a&&e.Y8G("ngbNavItem",8)}let Rd=(()=>{class a extends Ee.w{constructor(t,r,n,o,p,c,D,ne){super(t,r,D,n,o,p,c),this.baseService=n,this.authDaamService=ne,this.title="orderManagement.order.title",this.titleOperation="orderManagement.order.titleOperation",this.active=1,this.activeindex="1",this.count={}}ngOnInitMore(){this.baseService.GetOrderCount.subscribe(()=>{this.GetOfferOrderCount()})}onNavChange(t){}GetOfferOrderCount(){this.baseService.GetOfferOrderCount().subscribe(t=>{this.count=t.data})}static{this.\u0275fac=function(r){return new(r||a)(e.rXU($.nX),e.rXU(F.c$),e.rXU(Oe),e.rXU(ae.u),e.rXU(k.vh),e.rXU(X.eD),e.rXU(O.Bq),e.rXU(nt.J))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-order-layout"]],features:[e.Vt3],decls:13,vars:18,consts:[["nav","ngbNav"],[1,"row"],[1,"col-lg-12"],["ngbNav","",1,"nav","nav-tabs-custom","card-header-tabs","border-bottom-0","justify-content-center",3,"activeIdChange","navChange","activeId"],[3,"ngbNavItem",4,"hasPermission"],[1,"mt-2",3,"ngbNavOutlet"],[3,"ngbNavItem"],["ngbNavLink",""],["translate","sales.salesOrder.allOrders"],["ngbNavContent",""],["translate","sales.salesOrder.draftOrder"],[1,"ms-2","badge","bg-warning"],["translate","sales.salesOrder.changeQuantity"],["translate","sales.salesOrder.newOrders"],["translate","sales.salesOrder.sureOrder"],["translate","sales.salesOrder.assignTrunk"],["translate","sales.salesOrder.completeOrder"],["translate","sales.salesOrder.cancelOrder"]],template:function(r,n){if(1&r){const o=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"ul",3,0),e.mxI("activeIdChange",function(c){return e.eBV(o),e.DH7(n.active,c)||(n.active=c),e.Njj(c)}),e.bIt("navChange",function(c){return e.eBV(o),e.Njj(n.onNavChange(c))}),e.DNE(4,Id,4,1,"li",4)(5,Zs,6,2,"li",4)(6,Td,6,2,"li",4)(7,Kn,6,2,"li",4)(8,xd,6,2,"li",4)(9,kd,6,2,"li",4)(10,jr,4,1,"li",4)(11,_t,4,1,"li",4),e.k0s(),e.nrm(12,"div",5),e.k0s()()}if(2&r){const o=e.sdS(3);e.R7$(2),e.R50("activeId",n.active),e.R7$(2),e.Y8G("hasPermission",e.lJ4(10,hd)),e.R7$(),e.Y8G("hasPermission",e.lJ4(11,dn)),e.R7$(),e.Y8G("hasPermission",e.lJ4(12,fd)),e.R7$(),e.Y8G("hasPermission",e.lJ4(13,bd)),e.R7$(),e.Y8G("hasPermission",e.lJ4(14,Tt)),e.R7$(),e.Y8G("hasPermission",e.lJ4(15,vd)),e.R7$(),e.Y8G("hasPermission",e.lJ4(16,Cd)),e.R7$(),e.Y8G("hasPermission",e.lJ4(17,Sd)),e.R7$(),e.Y8G("ngbNavOutlet",o)}},dependencies:[O.Um,O.X9,O.sy,O.Gx,O.Ri,O.WA,O.m_,F.Mm,ye.p,dl,_l,yl,vi,on,ql,Oi,_d],encapsulation:2})}}return a})(),wi=(()=>{class a extends We.d{constructor(t){super(t,Je.c.apiUrl+"InvoiceMaster/")}register(t){return this.http.post(this.baseUrl+"AddPaymentToInvoice",t)}edit(t){return this.http.post(this.baseUrl+"EditPayment",t)}softDelete(t){return this.http.delete(this.baseUrl+`SoftDelete/${t}`)}finishOrder(t){return this.http.post(this.baseUrl+"finishOrder",t)}getInvoiceAttachments(t){return this.http.get(this.baseUrl+"GetInvoiceAttachments/"+t)}static{this.\u0275fac=function(r){return new(r||a)(e.KVO(Ue.Qq))}}static{this.\u0275prov=e.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})(),Ir=(()=>{class a extends We.d{constructor(t){super(t,Je.c.apiUrl+"PaymentType/")}getLookups(){return this.http.get(this.baseUrl+"Lookups")}changStatus(t){return this.http.put(this.baseUrl+"ChangeStatus/",t)}static{this.\u0275fac=function(r){return new(r||a)(e.KVO(Ue.Qq))}}static{this.\u0275prov=e.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();var mn=x(99902),Bt=x(3200);const ta=()=>["salesInvoices.register"],Md=()=>["salesInvoices.odooSync","salesInvoices.printPill"],Ni=()=>["salesInvoices.odooSync"],Od=()=>["salesInvoices.printPill"];function na(a,m){1&a&&(e.j41(0,"tr",36)(1,"th",37),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",38),e.nrm(4,"i",39),e.EFF(5," orderManagement.order.invoiceCode "),e.k0s(),e.j41(6,"th",40),e.nrm(7,"i",39),e.EFF(8," orderManagement.order.clientName "),e.k0s(),e.j41(9,"th",41),e.nrm(10,"i",39),e.EFF(11," orderManagement.order.orderCode "),e.k0s(),e.j41(12,"th",42),e.nrm(13,"i",39),e.EFF(14," orderManagement.order.creation "),e.k0s(),e.j41(15,"th",43),e.EFF(16," sales.salesOrder.salsePerson "),e.k0s(),e.j41(17,"th",44),e.nrm(18,"i",39),e.EFF(19," sales.salesInvoices.total "),e.k0s(),e.j41(20,"th",45),e.nrm(21,"i",39),e.EFF(22," sales.salesOrder.totalDiscount "),e.k0s(),e.j41(23,"th",46),e.nrm(24,"i",39),e.EFF(25," sales.salesInvoices.tax "),e.k0s(),e.j41(26,"th",47),e.nrm(27,"i",39),e.EFF(28," sales.salesOrder.netPrice "),e.k0s(),e.j41(29,"th",48),e.nrm(30,"i",39),e.EFF(31," sales.salesOrder.invoiceStatus "),e.k0s(),e.j41(32,"th",49),e.nrm(33,"i",39),e.EFF(34," sales.salesOrder.isSync "),e.k0s(),e.j41(35,"th",50),e.nrm(36,"i",39),e.EFF(37," sales.salesInvoices.notes "),e.k0s(),e.nrm(38,"th",51),e.k0s())}function De(a,m){if(1&a&&(e.j41(0,"span",65),e.EFF(1),e.k0s()),2&a){const t=e.XpG().$implicit;e.R7$(),e.JRh(t.creatorName)}}function yr(a,m){1&a&&e.nrm(0,"span",66)}function ia(a,m){1&a&&e.nrm(0,"span",67)}function Ot(a,m){1&a&&e.nrm(0,"span",68)}function Tr(a,m){1&a&&e.nrm(0,"span",69)}function Gi(a,m){1&a&&e.nrm(0,"span",70)}function pn(a,m){1&a&&(e.j41(0,"li")(1,"span",76),e.nrm(2,"i",77)(3,"span",78),e.k0s()())}function ra(a,m){1&a&&(e.j41(0,"li")(1,"span",76),e.nrm(2,"i",77)(3,"span",79),e.k0s()())}function Qe(a,m){1&a&&(e.j41(0,"span",63)(1,"div",71)(2,"button",72),e.nrm(3,"i",73),e.k0s(),e.j41(4,"ul",74),e.DNE(5,pn,4,0,"li",75)(6,ra,4,0,"li",75),e.k0s()()()),2&a&&(e.R7$(5),e.Y8G("hasPermission",e.lJ4(2,Ni)),e.R7$(),e.Y8G("hasPermission",e.lJ4(3,Od)))}function xr(a,m){if(1&a){const t=e.RV6();e.j41(0,"tr",52)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td",53),e.bIt("click",function(){const n=e.eBV(t).$implicit,o=e.XpG(),p=e.sdS(52);return e.Njj(o.getInvoiceAttachments(n.id,p))}),e.j41(4,"bdi",54),e.EFF(5),e.k0s()(),e.j41(6,"td"),e.EFF(7),e.k0s(),e.j41(8,"td")(9,"bdi",54),e.EFF(10),e.k0s(),e.nrm(11,"i",55),e.k0s(),e.j41(12,"td"),e.DNE(13,De,2,1,"span",56),e.EFF(14),e.nI1(15,"date"),e.k0s(),e.j41(16,"td"),e.EFF(17),e.k0s(),e.j41(18,"td"),e.EFF(19),e.k0s(),e.j41(20,"td"),e.EFF(21),e.k0s(),e.j41(22,"td"),e.EFF(23),e.k0s(),e.j41(24,"td")(25,"span",57),e.EFF(26),e.k0s()(),e.j41(27,"td"),e.DNE(28,yr,1,0,"span",58)(29,ia,1,0,"span",59)(30,Ot,1,0,"span",60),e.k0s(),e.j41(31,"td"),e.DNE(32,Tr,1,0,"span",61)(33,Gi,1,0,"span",62),e.k0s(),e.j41(34,"td"),e.EFF(35),e.k0s(),e.j41(36,"td")(37,"div",63),e.DNE(38,Qe,7,4,"span",64),e.k0s()()()}if(2&a){const t=m.$implicit,r=m.rowIndex;e.R7$(2),e.JRh(r+1),e.R7$(3),e.SpI("#INV#",t.id,""),e.R7$(2),e.JRh(t.clientName),e.R7$(3),e.SpI("#SO#",t.offerOrderId," "),e.R7$(3),e.Y8G("ngIf",t.creatorName),e.R7$(),e.SpI(" ",e.i5U(15,18,t.creationTime,"yyyy-MM-dd")," "),e.R7$(3),e.JRh(t.salsePersonName),e.R7$(2),e.JRh(t.total),e.R7$(2),e.JRh(t.totalDiscount),e.R7$(2),e.JRh(t.tax),e.R7$(3),e.JRh(t.net),e.R7$(2),e.Y8G("ngIf",0==t.status),e.R7$(),e.Y8G("ngIf",2==t.status),e.R7$(),e.Y8G("ngIf",3==t.status),e.R7$(2),e.Y8G("ngIf",t.isSync),e.R7$(),e.Y8G("ngIf",!t.isSync),e.R7$(2),e.JRh(t.notes),e.R7$(3),e.Y8G("hasPermission",e.lJ4(21,Md))}}function Fd(a,m){1&a&&(e.j41(0,"div",80),e.EFF(1," general.table.noData "),e.k0s())}function wd(a,m){if(1&a){const t=e.RV6();e.j41(0,"div",81)(1,"div",82),e.nrm(2,"ngb-pagination-info",83),e.j41(3,"table-length",84),e.bIt("lengthChange",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",85)(5,"ngb-pagination",86),e.bIt("pageChange",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.pagination.pageNumber,n)||(o.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&a){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function Nd(a,m){1&a&&(e.j41(0,"span",112),e.EFF(1,"general.action.register "),e.k0s())}function kr(a,m){1&a&&(e.j41(0,"span",112),e.EFF(1,"general.action.edit "),e.k0s())}function Gd(a,m){1&a&&(e.j41(0,"div",113),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function Zn(a,m){1&a&&(e.j41(0,"div",113),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function sa(a,m){if(1&a){const t=e.RV6();e.j41(0,"div",116)(1,"i",117),e.bIt("click",function(){e.eBV(t);const n=e.XpG().index,o=e.XpG(2);return e.Njj(o.removeFile(n))}),e.k0s(),e.j41(2,"p-image",118),e.bIt("error",function(n){e.eBV(t);const o=e.XpG(3);return e.Njj(o.setDefaultImage(n,"assets/images/custom/no-img.jpg"))}),e.k0s()()}2&a&&(e.R7$(2),e.Y8G("src","assets/images/PDF.png")("preview",!1)("alt","pdf"))}function Ed(a,m){if(1&a){const t=e.RV6();e.j41(0,"div",116)(1,"i",117),e.bIt("click",function(){e.eBV(t);const n=e.XpG().index,o=e.XpG(2);return e.Njj(o.removeFile(n))}),e.k0s(),e.j41(2,"p-image",118),e.bIt("error",function(n){e.eBV(t);const o=e.XpG(3);return e.Njj(o.setDefaultImage(n,"assets/images/custom/no-img.jpg"))}),e.k0s()()}if(2&a){const t=e.XpG().$implicit,r=e.XpG(2);e.R7$(2),e.Y8G("src",t.isNew?t.attachment:r.serverPath+t.attachment)("preview",!0)("alt","image")}}function Dd(a,m){if(1&a&&(e.j41(0,"div",114),e.DNE(1,sa,3,3,"div",115)(2,Ed,3,3,"div",115),e.k0s()),2&a){const t=m.index,r=e.XpG(2);e.R7$(),e.Y8G("ngIf","application/pdf"===r.filesNames[t]),e.R7$(),e.Y8G("ngIf","application/pdf"!==r.filesNames[t])}}function ei(a,m){if(1&a){const t=e.RV6();e.j41(0,"div",87)(1,"div",88)(2,"h4",89),e.DNE(3,Nd,2,0,"span",90)(4,kr,2,0,"span",90),e.j41(5,"span",91),e.EFF(6),e.k0s()(),e.j41(7,"button",92),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss("Cross click"))}),e.k0s()(),e.j41(8,"div",93),e.nrm(9,"ngx-ui-loader",29),e.j41(10,"form",94,4),e.bIt("submit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.OnSubmit())}),e.j41(12,"div",95)(13,"label",96),e.EFF(14,"sales.salesInvoices.paymentTypeName"),e.k0s(),e.j41(15,"ng-select",97,5),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.form.paymentTypeId,n)||(o.form.paymentTypeId=n),e.Njj(n)}),e.k0s(),e.DNE(17,Gd,2,0,"div",98),e.k0s(),e.j41(18,"div",95)(19,"label",99),e.EFF(20,"sales.salesInvoices.cost"),e.k0s(),e.j41(21,"input",100,6),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.form.cost,n)||(o.form.cost=n),e.Njj(n)}),e.k0s(),e.DNE(23,Zn,2,0,"div",101),e.k0s(),e.j41(24,"div",95)(25,"label",102),e.EFF(26,"general.table.notes"),e.k0s(),e.j41(27,"textarea",103),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.form.notes,n)||(o.form.notes=n),e.Njj(n)}),e.EFF(28,"                    "),e.k0s()(),e.j41(29,"div",9)(30,"div",104)(31,"label",96),e.EFF(32," orderManagement.order.attachment"),e.k0s(),e.j41(33,"input",105,7),e.bIt("change",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.onFileSelected(n))}),e.k0s()(),e.j41(35,"div",106),e.DNE(36,Dd,3,2,"div",107),e.k0s()(),e.j41(37,"div",108)(38,"button",109),e.nrm(39,"i",110)(40,"span",111),e.k0s()()()()()}if(2&a){const t=e.sdS(11),r=e.sdS(16),n=e.sdS(22),o=e.XpG();e.R7$(3),e.Y8G("ngIf",!o.isEditForm),e.R7$(),e.Y8G("ngIf",o.isEditForm),e.R7$(2),e.JRh(o.titleOperation),e.R7$(3),e.Y8G("hasProgressBar",!1)("fgsType",o.loaderOperationShap)("loaderId",o.operationLoader),e.R7$(6),e.Y8G("items",o.paymentMethods)("multiple",!1),e.R50("ngModel",o.form.paymentTypeId),e.R7$(2),e.Y8G("ngIf",r.invalid&&r.touched),e.R7$(4),e.R50("ngModel",o.form.cost),e.R7$(2),e.Y8G("ngIf",n.invalid&&n.touched),e.R7$(4),e.R50("ngModel",o.form.notes),e.R7$(9),e.Y8G("ngForOf",o.filesToShow),e.R7$(2),e.Y8G("disabled",!t.valid)}}function Vd(a,m){if(1&a){const t=e.RV6();e.j41(0,"delete-modal",119),e.bIt("deleteConfirm",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.DeleteConfirmSoft())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}}function Ld(a,m){if(1&a){const t=e.RV6();e.j41(0,"div",122)(1,"p-image",123),e.bIt("error",function(n){e.eBV(t);const o=e.XpG(2);return e.Njj(o.setDefaultImage(n,"assets/images/custom/no-img.jpg"))}),e.k0s()()}if(2&a){const t=m.$implicit,r=e.XpG(2);e.R7$(),e.Y8G("src",r.serverPath+t.path)("preview",!0)}}function Rr(a,m){if(1&a){const t=e.RV6();e.j41(0,"div",87)(1,"div",88)(2,"button",92),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss("Cross click"))}),e.k0s()(),e.j41(3,"div",120)(4,"div",9),e.DNE(5,Ld,2,2,"div",121),e.k0s()()()}if(2&a){const t=e.XpG();e.R7$(5),e.Y8G("ngForOf",t.images)}}let aa=(()=>{class a extends Ee.w{constructor(t,r,n,o,p,c,D,ne,re,oe,se,W){super(t,r,D,n,o,p,c),this.baseService=n,this.paymentTypesService=ne,this.formData=re,this.employeeService=oe,this.regionService=se,this.cityService=W,this.title="sales.salesInvoices.title",this.titleOperation="sales.salesInvoices.payment",this.paymentMethods=[],this.searchForm={},this.form={file:""},this.filesToSend=[],this.filesToShow=[],this.filesNames=[],this.isResolveList=!0,this.serverPath=Je.c.mediaUrl,this.countLoad=0,this.isOrderEdit=!1,this.images=[],this.salesPersons=[],this.regions=[],this.cities=[],this.setDates=(q,Q,V)=>{if(q?.from||q?.to){const ce=q.to||q.from;this.pagination[Q]=this.datePipe.transform(q.from||q.to,"yyyy-MM-ddT00:00:00"),this.pagination[V]=this.datePipe.transform(ce,"yyyy-MM-ddT23:59:59.999")}else this.pagination[Q]=null,this.pagination[V]=null},this.configRoute(),this.GetSalesPersons(),this.GetRegions(),this.GetCities()}GetRegions(){this.regionService.getDropDown().subscribe(t=>{this.regions=t.data},t=>{console.log(t)})}GetCities(){this.cityService.getDropDown().subscribe(t=>{this.cities=t.data},t=>{console.log(t)})}GetSalesPersons(){this.employeeService.GetAllByType(9).subscribe(t=>{this.salesPersons=t.data},t=>{console.log(t)})}configRoute(){this.routerActive.data.pipe((0,R.Q)(this.notifier)).subscribe(t=>{this.entities=t.data.data,this.pagination.totalItems=t.data.totalItems},()=>{this.alertService.error()})}getInvoiceAttachments(t,r){this.baseService.getInvoiceAttachments(t).subscribe({next:n=>{this.images=n.data,this.modalService.open(r,{centered:!0,size:"md"})}})}onSearch(){let t={...this.searchForm};this.ngxLoader.startLoader(M.a7),this.setDates(t.dates,"visitDateFrom","visitDateTo"),this.setDates(t.creationDates,"creationTimeFrom","creationTimeTo"),this.loadentities()}LoadSuccess(){this.ngxLoader.stopLoader(M.a7)}onReset(){this.form={},this.searchForm={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems}}openInvoiceModal(t,r,n="md",o){if(this.isEditForm=o,this.form={},this.clearFiles(),this.operationId=t.id,o){this.form=t,console.log(this.form);let p="";t.path&&(p=t.path.split(".")[1]),this.filesToSend.push({id:0,isNew:!1,attachment:t.path}),this.filesToShow.push({id:0,isNew:!1,attachment:t.path}),this.filesNames.push("pdf"===p?"application/pdf":p),this.modalService.open(r,{centered:!0,size:n})}else this.form.invoiceMasterId=t.id,this.modalService.open(r,{centered:!0,size:n})}onFileSelected(t){this.clearFiles();const r=t.target;if(t.target.files&&t.target.files[0]){let n=t.target.files.length;for(let o=0;o<n;o++){let p=new FileReader;this.filesToSend.push({id:0,isNew:!0,attachment:t.target.files.item(o)}),this.filesNames.push(t.target.files[o].type),p.onload=c=>{this.filesToShow.push({id:0,isNew:!0,attachment:c.target.result}),console.log(this.filesToShow)},p.readAsDataURL(t.target?.files[o])}r.value=""}}setDefaultImage(t,r){t.target.src=r}checkExtension(t){const n=t.split("/").pop().split(".").pop();return console.log(),n}checkUrl(t){return null==t||""==t?"":t.startsWith("/upload")?t.replace("/upload","upload"):t}removeFile(t){this.filesToShow.splice(t,1),this.filesNames.splice(t,1),this.filesToSend.splice(t,1)}clearFiles(){this.filesNames=[],this.filesToShow=[],this.filesToSend=[]}registerEntity(){let t=this.mapRegisterForm(this.form);t.file=this.filesToSend&&this.filesToSend.length>0?this.filesToSend[0].attachment:null,this.baseService.register(this.formData.formatFormData(t)).pipe((0,Y.O)(),(0,Z.c)(this.mainDelay),(0,ee.Z)(),(0,R.Q)(this.notifier),(0,z.j)(()=>this.ngxLoader.stopLoader(M.ZW)),(0,En.W)(r=>(0,Dn.$)(r))).subscribe(r=>{r.success?(this.modalService.dismissAll(),this.submitFunished()):this.alertService.error("general.message."+r.message)},r=>{this.alertService.error("general.message."+r)})}editEntity(){let t=this.mapForm(this.form);t.file=this.filesToSend&&this.filesToSend.length>0?this.filesToSend[0].attachment:null,this.baseService.edit(this.formData.formatFormData(t)).pipe((0,Y.O)(),(0,Z.c)(this.mainDelay),(0,ee.Z)(),(0,R.Q)(this.notifier),(0,z.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(r=>{r.success?this.submitFunished():this.alertService.error("general.message."+r.message)},r=>{this.alertService.error("general.message."+r)})}static{this.\u0275fac=function(r){return new(r||a)(e.rXU($.nX),e.rXU(F.c$),e.rXU(wi),e.rXU(ae.u),e.rXU(k.vh),e.rXU(X.eD),e.rXU(O.Bq),e.rXU(Ir),e.rXU(mn.Q),e.rXU(tt.O),e.rXU(ct.S),e.rXU(Ve.h))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-sales-invoices"]],features:[e.Vt3],decls:53,vars:56,consts:[["tableMaster",""],["addPaymentModal",""],["deleteModal",""],["viewMedia",""],["formEntity","ngForm"],["paymentTypeId","ngModel"],["cost","ngModel"],["fileInput",""],[3,"title","breadcrumbItems"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],["overlayColor","rgba(255,255,255,0.05)","fgsColor","rgba(255,255,255,0)",3,"loaderId"],[3,"reset","search","addPermission","showAdd","showExport","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","number","id","id","name","id",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["InputTirmFilter","","type","search","id","clientName","name","clientName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["name","name","bindValue","id","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],["type","text","mwlFlatpickr","","id","isDate","mode","range","altFormat","d/m/Y",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],["name","regionId","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","placeholder","ngModel"],["name","cityId","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","placeholder","ngModel"],["name","customerSize","id","customerSize","aria-label","Floating label select example",1,"form-select",3,"ngModelChange","ngModel"],["translate","sales.salesInvoices.Unpaid",3,"value"],["translate","sales.salesInvoices.PartiallyPaid",3,"value"],["translate","sales.salesInvoices.Paid",3,"value"],[1,"card-body"],[3,"hasProgressBar","fgsType","loaderId"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["translate","",2,"width",".3%"],["pSortableColumn","id","translate","",2,"width","3%"],[1,"ri-expand-up-down-line"],["pSortableColumn","clientId","translate","",2,"width","10%"],["pSortableColumn","id","translate","",2,"width","6%"],["pSortableColumn","creationTime","translate","",2,"width","5%"],["translate","",2,"width","8%"],["pSortableColumn","total","translate","",2,"width","5%"],["pSortableColumn","totalDiscount","translate","",2,"width","5%"],["pSortableColumn","tax","translate","",2,"width","4%"],["pSortableColumn","net","translate","",2,"width","4%"],["pSortableColumn","invoiceStatus","translate","",2,"width","6%"],["pSortableColumn","isSync","translate","",2,"width","5%"],["pSortableColumn","notes","translate","",2,"width","5%"],[2,"width","3%"],[1,"fs-5"],[3,"click"],[1,"code-pointer"],[1,"ri-share-circle-fill","label-icon","align-middle","rounded-pill","fs-16","me-2"],["class","badge bg-success-subtle text-success",4,"ngIf"],[1,"badge","fs-5","bg-success-subtle","text-success","badge-border"],["class","badge bg-danger","translate","sales.salesInvoices.Unpaid",4,"ngIf"],["class","badge bg-warning","translate","sales.salesInvoices.PartiallyPaid",4,"ngIf"],["class","badge bg-success","translate","sales.salesInvoices.Paid",4,"ngIf"],["class","badge bg-success","translate","sales.salesOrder.syncSend",4,"ngIf"],["class","badge bg-warning","translate","sales.salesOrder.syncNotSend",4,"ngIf"],[1,"d-inline-block"],["class","d-inline-block",4,"hasPermission"],[1,"badge","bg-success-subtle","text-success"],["translate","sales.salesInvoices.Unpaid",1,"badge","bg-danger"],["translate","sales.salesInvoices.PartiallyPaid",1,"badge","bg-warning"],["translate","sales.salesInvoices.Paid",1,"badge","bg-success"],["translate","sales.salesOrder.syncSend",1,"badge","bg-success"],["translate","sales.salesOrder.syncNotSend",1,"badge","bg-warning"],[1,"dropdown-custom","d-inline-block"],["type","button",1,"btn","dropbtn","btn-soft-secondary","btn-sm","dropdown-custom","arrow-none"],[1,"ri-more-fill"],[1,"dropdown-menu","dropdown-menu-end","dropdown-content",2,"left","0"],[4,"hasPermission"],[1,"dropdown-item"],[1,"ri-printer-line","align-bottom","me-2","text-muted"],["translate","sales.salesOrder.isSync"],["translate","orderManagement.order.printPill"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["class","fw-bold fs-4","translate","",4,"ngIf"],["translate",""],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"submit"],[1,"mb-3"],["translate","",1,"required","fw-bold","form-label","w-100"],["name","paymentTypeId","bindValue","code","bindLabel","name","required","",3,"ngModelChange","items","multiple","ngModel"],["class","text-danger text-center","translate","",4,"ngIf"],["for","cost","translate","",1,"required","fw-bold","form-label"],["InputTirmFilter","","name","cost","type","text","id","employeeName","required","",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],["for","notes","translate","",1,"fw-bold","form-label"],["rows","3","name","notes","type","text","id","notes",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,"col-12","mb-2"],["accept","image/*, application/pdf","type","file","placeholder","dfd",1,"form-control","fs-6",3,"change"],[1,"my-3","row","row-cols-5"],["class","col",4,"ngFor","ngForOf"],[1,"text-center"],["type","submit","type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],["translate","",1,"fw-bold","fs-4"],["translate","",1,"text-danger","text-center"],[1,"col"],["class","position-relative",4,"ngIf"],[1,"position-relative"],[1,"ri-close-fill","position-absolute",2,"border-radius","50%","background-color","red","inset-inline-start","-14px","top","-8px","color","white",3,"click"],["width","50","height","50",3,"error","src","preview","alt"],[3,"deleteConfirm","dismiss"],[1,"modal-body","p-4"],["class","col-12 col-md-3",4,"ngFor","ngForOf"],[1,"col-12","col-md-3"],["width","80","height","100",3,"error","src","preview"]],template:function(r,n){if(1&r){const o=e.RV6();e.nrm(0,"app-breadcrumbs",8),e.nI1(1,"translate"),e.j41(2,"div",9)(3,"div",10)(4,"div",11),e.nrm(5,"ngx-ui-loader",12),e.j41(6,"base-filter",13),e.bIt("reset",function(){return e.eBV(o),e.Njj(n.onReset())})("search",function(){return e.eBV(o),e.Njj(n.onSearch())}),e.qex(7,14),e.j41(8,"div",15)(9,"div",16)(10,"input",17),e.nI1(11,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.pagination.id,c)||(n.pagination.id=c),e.Njj(c)}),e.k0s(),e.nrm(12,"i",18),e.k0s()(),e.j41(13,"div",15)(14,"div",16)(15,"input",19),e.nI1(16,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.pagination.clientName,c)||(n.pagination.clientName=c),e.Njj(c)}),e.k0s(),e.nrm(17,"i",18),e.k0s()(),e.j41(18,"div",15)(19,"div",16)(20,"ng-select",20),e.nI1(21,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.pagination.salesPersonId,c)||(n.pagination.salesPersonId=c),e.Njj(c)}),e.k0s()()(),e.j41(22,"div",15)(23,"input",21),e.nI1(24,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.searchForm.creationDates,c)||(n.searchForm.creationDates=c),e.Njj(c)}),e.k0s()(),e.j41(25,"div",15)(26,"div",16)(27,"ng-select",22),e.nI1(28,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.pagination.regionId,c)||(n.pagination.regionId=c),e.Njj(c)}),e.k0s()()(),e.j41(29,"div",15)(30,"div",16)(31,"ng-select",23),e.nI1(32,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.pagination.cityId,c)||(n.pagination.cityId=c),e.Njj(c)}),e.k0s()()(),e.j41(33,"div",15)(34,"select",24),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.pagination.status,c)||(n.pagination.status=c),e.Njj(c)}),e.nrm(35,"option",25)(36,"option",26)(37,"option",27),e.k0s()(),e.bVm(),e.k0s(),e.j41(38,"div",28),e.nrm(39,"ngx-ui-loader",29),e.j41(40,"div",30)(41,"p-table",31,0),e.bIt("onLazyLoad",function(c){return e.eBV(o),e.Njj(n.tableChange(c))})("selectionChange",function(c){return e.eBV(o),e.Njj(n.onSelectionChange(c))}),e.DNE(43,na,39,0,"ng-template",32)(44,xr,39,22,"ng-template",33),e.k0s()(),e.DNE(45,Fd,2,0,"div",34)(46,wd,6,8,"div",35),e.k0s()()()(),e.DNE(47,ei,41,15,"ng-template",null,1,e.C5r)(49,Vd,1,0,"ng-template",null,2,e.C5r)(51,Rr,6,1,"ng-template",null,3,e.C5r)}2&r&&(e.FS9("title",e.bMT(1,41,n.title)),e.Y8G("breadcrumbItems",n.breadCrumbItems),e.R7$(5),e.Y8G("loaderId","newLoader"),e.R7$(),e.Y8G("addPermission",e.lJ4(55,ta))("showAdd",!1)("showExport",!1)("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(4),e.FS9("placeholder",e.bMT(11,43,"orderManagement.order.orderCode")),e.R50("ngModel",n.pagination.id),e.R7$(5),e.FS9("placeholder",e.bMT(16,45,"orderManagement.order.agentName")),e.R50("ngModel",n.pagination.clientName),e.R7$(5),e.FS9("placeholder",e.bMT(21,47,"sales.salesOrder.salsePerson")),e.Y8G("items",n.salesPersons)("multiple",!1),e.R50("ngModel",n.pagination.salesPersonId),e.R7$(3),e.FS9("placeholder",e.bMT(24,49,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.creationDates),e.R7$(4),e.FS9("placeholder",e.bMT(28,51,"client.client.regionName")),e.Y8G("items",n.regions)("multiple",!1),e.R50("ngModel",n.pagination.regionId),e.R7$(4),e.FS9("placeholder",e.bMT(32,53,"client.client.cityName")),e.Y8G("items",n.cities)("multiple",!1),e.R50("ngModel",n.pagination.cityId),e.R7$(3),e.R50("ngModel",n.pagination.status),e.R7$(),e.Y8G("value",0),e.R7$(),e.Y8G("value",2),e.R7$(),e.Y8G("value",3),e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderSearchShap)("loaderId",n.searchLoader),e.R7$(2),e.Y8G("value",n.entities)("rows",n.pagination.pageSize)("lazy",!0)("totalRecords",n.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",n.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems>0))},dependencies:[k.Sq,k.bT,g.qT,g.xH,g.y7,g.me,g.Q0,g.wz,g.BC,g.cb,g.YS,g.vS,g.cV,O.s5,fe.kL,Cn.m,Le.b,Ke.w,$e.p,Be.g,F.Mm,B.XI,Xe.Ei,B.Tg,X.Cv,ve.vr,ke.m,ye.p,Bt._,k.vh,F.D9],encapsulation:2})}}return a})();var Ei=x(56131);let $d=(()=>{class a extends Ei.E{constructor(t,r,n){super(t,r,n)}static{this.\u0275fac=function(r){return new(r||a)(e.KVO($.Ix),e.KVO(wi),e.KVO(ae.u))}}static{this.\u0275prov=e.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();x(67376);let Mr=(()=>{class a extends We.d{constructor(t){super(t,Je.c.apiUrl+"ClientCollection/")}static{this.\u0275fac=function(r){return new(r||a)(e.KVO(Ue.Qq))}}static{this.\u0275prov=e.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();const Or=()=>["clientCollection.register"],Bd=()=>["clientCollection.edit"],Fr=()=>["clientCollection.delete"];function la(a,m){1&a&&(e.j41(0,"tr",33)(1,"th",34),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",35),e.nrm(4,"i",36),e.EFF(5," sales.clientCollection.clientName "),e.k0s(),e.j41(6,"th",37),e.nrm(7,"i",36),e.EFF(8," sales.clientCollection.paymentTypeName "),e.k0s(),e.j41(9,"th",38),e.nrm(10,"i",36),e.EFF(11," orderManagement.order.creation "),e.k0s(),e.j41(12,"th",39),e.nrm(13,"i",36),e.EFF(14," sales.clientCollection.cost "),e.k0s(),e.j41(15,"th",40),e.nrm(16,"i",36),e.EFF(17," sales.clientCollection.depositNumber "),e.k0s(),e.j41(18,"th",41),e.nrm(19,"i",36),e.EFF(20," sales.clientCollection.isSyncOdoo "),e.k0s(),e.j41(21,"th",42),e.nrm(22,"i",36),e.EFF(23," sales.clientCollection.syncDate "),e.k0s(),e.j41(24,"th",43),e.nrm(25,"i",36),e.EFF(26," sales.clientCollection.notes "),e.k0s(),e.nrm(27,"th",44),e.k0s())}function da(a,m){1&a&&e.nrm(0,"span",54)}function ca(a,m){1&a&&e.nrm(0,"span",55)}function Di(a,m){if(1&a&&(e.nrm(0,"i",56),e.EFF(1),e.nI1(2,"date"),e.nrm(3,"br")(4,"i",57),e.EFF(5),e.nI1(6,"date"),e.nrm(7,"br")(8,"i",58),e.EFF(9)),2&a){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.i5U(2,3,t.creationTime,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",e.i5U(6,6,t.lastModificationTime,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",t.creatorName," ")}}function Xd(a,m){if(1&a){const t=e.RV6();e.j41(0,"button",59),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,o=e.XpG(),p=e.sdS(29);return e.Njj(o.EditModel(n.id,p))}),e.nrm(1,"i",60),e.k0s()}}function ma(a,m){if(1&a){const t=e.RV6();e.j41(0,"button",61),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,o=e.XpG(),p=e.sdS(31);return e.Njj(o.openModal(n.id,p))}),e.nrm(1,"i",62),e.k0s()}}function pa(a,m){if(1&a&&(e.j41(0,"tr",45)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td")(8,"span",46),e.EFF(9),e.k0s(),e.EFF(10),e.nI1(11,"date"),e.k0s(),e.j41(12,"td"),e.EFF(13),e.k0s(),e.j41(14,"td"),e.EFF(15),e.k0s(),e.j41(16,"td"),e.DNE(17,da,1,0,"span",47)(18,ca,1,0,"span",48),e.k0s(),e.j41(19,"td"),e.EFF(20),e.nI1(21,"date"),e.k0s(),e.j41(22,"td"),e.EFF(23),e.k0s(),e.j41(24,"td"),e.DNE(25,Di,10,9,"ng-template",null,3,e.C5r),e.nrm(27,"i",49),e.j41(28,"button",50),e.nrm(29,"i",51),e.k0s(),e.DNE(30,Xd,2,0,"button",52)(31,ma,2,0,"button",53),e.k0s()()),2&a){const t=m.$implicit,r=m.rowIndex,n=e.sdS(26);e.R7$(2),e.JRh(r+1),e.R7$(2),e.JRh(t.clientName),e.R7$(2),e.JRh(t.paymentTypeName),e.R7$(3),e.SpI("",t.creatorName," "),e.R7$(),e.SpI(" ",e.i5U(11,14,t.creationTime,"yyyy-MM-dd")," "),e.R7$(3),e.JRh(t.cost),e.R7$(2),e.JRh(t.depositNumber),e.R7$(2),e.Y8G("ngIf",t.isSyncOdoo),e.R7$(),e.Y8G("ngIf",!t.isSyncOdoo),e.R7$(2),e.JRh(e.i5U(21,17,t.syncDate,"yyyy-MM-dd HH:mm:ss")),e.R7$(3),e.JRh(t.notes),e.R7$(4),e.Y8G("ngbTooltip",n),e.R7$(3),e.Y8G("hasPermission",e.lJ4(20,Bd)),e.R7$(),e.Y8G("hasPermission",e.lJ4(21,Fr))}}function Pd(a,m){1&a&&(e.j41(0,"div",63),e.EFF(1," general.table.noData"),e.k0s())}function ua(a,m){if(1&a){const t=e.RV6();e.j41(0,"div",64)(1,"div",65),e.nrm(2,"ngb-pagination-info",66),e.j41(3,"table-length",67),e.bIt("lengthChange",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",68)(5,"ngb-pagination",69),e.bIt("pageChange",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.pagination.pageNumber,n)||(o.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&a){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function Ad(a,m){1&a&&(e.j41(0,"span",108),e.EFF(1,"general.action.register "),e.k0s())}function wr(a,m){1&a&&(e.j41(0,"span",108),e.EFF(1,"general.action.edit "),e.k0s())}function ga(a,m){if(1&a){const t=e.RV6();e.j41(0,"i",109),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.removeMainImage())}),e.k0s()}}function Nr(a,m){1&a&&(e.j41(0,"div",110),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function Yd(a,m){1&a&&(e.j41(0,"div",110),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function Gr(a,m){if(1&a){const t=e.RV6();e.j41(0,"div",70)(1,"div",71)(2,"h4",72),e.DNE(3,Ad,2,0,"span",73)(4,wr,2,0,"span",73),e.j41(5,"span",74),e.EFF(6),e.k0s()(),e.j41(7,"button",75),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss("Cross click"))}),e.k0s()(),e.j41(8,"div",76),e.nrm(9,"ngx-ui-loader",26),e.j41(10,"form",77,4),e.bIt("submit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.OnSubmit())}),e.j41(12,"div",78)(13,"div",79)(14,"div",80)(15,"div",81)(16,"label",82),e.bIt("click",function(){e.eBV(t);const n=e.sdS(21);return e.Njj(n.click())}),e.j41(17,"div",83)(18,"div",84),e.nrm(19,"i",85),e.k0s()()(),e.j41(20,"input",86,5),e.bIt("change",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.onFileChangedMain(n))}),e.k0s()(),e.j41(22,"div",87)(23,"div",88),e.DNE(24,ga,1,0,"i",89),e.j41(25,"div",90),e.nrm(26,"img",91),e.k0s()()()()()(),e.j41(27,"div",78)(28,"label",92),e.EFF(29,"sales.clientCollection.clientName"),e.k0s(),e.j41(30,"ng-select",93),e.bIt("scrollToEnd",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.scrollClient())}),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.form.clientId,n)||(o.form.clientId=n),e.Njj(n)}),e.k0s()(),e.j41(31,"div",78)(32,"label",94),e.EFF(33,"sales.salesInvoices.paymentTypeName"),e.k0s(),e.j41(34,"ng-select",95,6),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.form.paymentTypeId,n)||(o.form.paymentTypeId=n),e.Njj(n)}),e.k0s(),e.DNE(36,Nr,2,0,"div",96),e.k0s(),e.j41(37,"div",97)(38,"label",98),e.EFF(39,"sales.clientCollection.cost"),e.k0s(),e.j41(40,"input",99,7),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.form.cost,n)||(o.form.cost=n),e.Njj(n)}),e.k0s(),e.DNE(42,Yd,2,0,"div",100),e.k0s(),e.j41(43,"div",97)(44,"label",101),e.EFF(45,"sales.clientCollection.depositNumber"),e.k0s(),e.j41(46,"input",102,8),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.form.depositNumber,n)||(o.form.depositNumber=n),e.Njj(n)}),e.k0s()(),e.j41(48,"div",97)(49,"label",103),e.EFF(50,"sales.clientCollection.notes"),e.k0s(),e.j41(51,"textarea",104,9),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.form.notes,n)||(o.form.notes=n),e.Njj(n)}),e.k0s()(),e.j41(53,"div",79)(54,"button",105),e.nrm(55,"i",106)(56,"span",107),e.k0s()()()()()}if(2&a){const t=e.sdS(11),r=e.sdS(35),n=e.sdS(41),o=e.XpG();e.R7$(3),e.Y8G("ngIf",!o.isEditForm),e.R7$(),e.Y8G("ngIf",o.isEditForm),e.R7$(2),e.JRh(o.titleOperation),e.R7$(3),e.Y8G("hasProgressBar",!1)("fgsType",o.loaderOperationShap)("loaderId",o.operationLoader),e.R7$(15),e.Y8G("ngIf",o.image.path),e.R7$(2),e.Y8G("src",o.image.isApi?o.serverPath+o.image.path:o.image.path,e.B4B),e.R7$(4),e.Y8G("virtualScroll",!0)("items",o.clients)("typeahead",o.searchClient)("loading",o.loading)("multiple",!1),e.R50("ngModel",o.form.clientId),e.R7$(4),e.Y8G("items",o.paymentMethods)("multiple",!1),e.R50("ngModel",o.form.paymentTypeId),e.R7$(2),e.Y8G("ngIf",r.invalid&&r.touched),e.R7$(4),e.R50("ngModel",o.form.cost),e.R7$(2),e.Y8G("ngIf",n.invalid&&n.touched),e.R7$(4),e.R50("ngModel",o.form.depositNumber),e.R7$(5),e.R50("ngModel",o.form.notes),e.R7$(3),e.Y8G("disabled",!t.valid)}}function J(a,m){if(1&a){const t=e.RV6();e.j41(0,"delete-modal",111),e.bIt("deleteConfirm",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.DeleteConfirmSoft())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}}let Ud=(()=>{class a extends Ee.w{constructor(t,r,n,o,p,c,D,ne,re,oe,se,W){super(t,r,D,n,o,p,c),this.baseService=n,this.excelService=re,this.clientService=oe,this.paymentTypesService=se,this._formDataService=W,this.title="sales.clientCollection.title",this.titleOperation="sales.clientCollection.titleOperation",this.keySelected="",this.assignUsers=[],this.times=[],this.employees=[],this.searchForm={},this.isResolveList=!0,this.countLoad=2,this.clientParam={pageSize:50,pageNumber:1,search:"",clientId:null},this.clients=[],this.loading=!1,this.searchClient=new dt.B,this.paymentMethods=[],this.image={},this.serverPath=Je.c.mediaUrl,this.setDates=(q,Q,V)=>{if(q?.from||q?.to){const ce=q.to||q.from;this.pagination[Q]=this.datePipe.transform(q.from||q.to,"yyyy-MM-ddT00:00:00"),this.pagination[V]=this.datePipe.transform(ce,"yyyy-MM-ddT23:59:59.999")}else this.pagination[Q]=null,this.pagination[V]=null},this.configRoute()}ngOnInitMore(){this.searchClient.pipe((0,ze.B)(300),(0,Mt.F)(),(0,Me.n)(t=>this.loadClient(t))).subscribe(),this.getPaymentTypes()}getPaymentTypes(){this.paymentTypesService.getDropDown().subscribe({next:t=>{this.paymentMethods=t.data}})}onSearch(){this.ngxLoader.startLoader(M.a7);let t={...this.searchForm};this.pagination.depositNumber&&(this.pagination.depositNumber=this.pagination.depositNumber.toString()),this.setDates(t.creationDates,"dateFrom","dateTo"),this.loadentities()}loadClient(t){return this.loading=!0,""==t||null==t?(this.loading=!1,(0,Vn.of)([])):this.getClientDropdwon(t)}getClientDropdwon(t=""){return this.clientParam.search=t,this.clientParam.clientId=null,this.clientParam.pageNumber=1,this.clientService.GetClientSearch(this.clientParam).pipe((0,Me.n)(r=>(this.clients=r.data,this.loading=!1,[])))}mapForm(t){let r={...t};return this._formDataService.formatFormData(r)}mapRegisterForm(t){let r={...t};return r.id=0,this._formDataService.formatFormData(r)}OnSearch(t){this.ngxLoader.startLoader(M.a7),this.loadentities()}configRoute(){}EditModel(t,r,n="md"){this.isEditForm=!0,this.image={},this.baseService.getById(t).pipe((0,R.Q)(this.notifier)).subscribe(o=>{o.success?(this.clientParam.clientId=o.data.clientId,this.clientParam.search="",this.clientService.GetClientSearch(this.clientParam).subscribe(p=>{this.clients=p.data}),this.image.path=o.data.path,this.image.isApi=!0,this.form=o.data):this.alertService.error("general.message."+o.message),this.modalService.open(r,{centered:!0,size:n})},o=>{this.alertService.error()})}mapExcel(){let t=[];return this.entities?.forEach(r=>{t.push({Client_Name:r.clientName,Date:this.datePipe.transform(r.creationTime,"yyyy-MM-dd HH:mm"),User:r.creatorName,Payment_Name:r.paymentTypeName,Cost:r.cost,DepositNumber:r.depositNumber,Sync_Odoo:this.getTranslationText(r.isSyncOdoo?"sales.salesOrder.syncSend":"sales.salesOrder.syncNotSend"),Notes:r.notes})}),t}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,this.getTranslationText(this.title),[])}editEntity(){let t=this.mapForm(this.form);this.baseService.editPut(this.form.id,t).pipe((0,Y.O)(),(0,Z.c)(this.mainDelay),(0,ee.Z)(),(0,R.Q)(this.notifier),(0,z.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(r=>{r.success?this.submitFunished():this.alertService.error("general.message."+r.message)},r=>{this.alertService.error("general.message."+r)})}scrollClient(){this.clientParam.pageNumber=this.clientParam.pageNumber+1,this.clientService.GetClientSearch(this.clientParam).subscribe(t=>{this.clients=[...this.clients,...t.data]})}onFileChangedMain(t){if(t.target.files&&t.target.files[0]){let r=t.target.files.length;for(let n=0;n<r;n++){let o=new FileReader;this.form.image=t.target.files.item(n),o.onload=p=>{this.image={isApi:!1,path:p.target.result}},o.readAsDataURL(t.target.files[n]),console.log(this.image)}}}removeMainImage(){this.form.image="",this.image={isApi:!1,path:""}}static{this.\u0275fac=function(r){return new(r||a)(e.rXU($.nX),e.rXU(F.c$),e.rXU(Mr),e.rXU(ae.u),e.rXU(k.vh),e.rXU(X.eD),e.rXU(O.Bq),e.rXU(e.gRc),e.rXU(qe.V),e.rXU(Ht.X),e.rXU(Ir),e.rXU(mn.Q))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-clientCollection"]],features:[e.Vt3],decls:32,vars:33,consts:[["tableMaster",""],["operation",""],["deleteModal",""],["tooltipContent",""],["formEntity","ngForm"],["FileInputMain",""],["paymentTypeId","ngModel"],["cost","ngModel"],["depositNumber","ngModel"],["notes","ngModel"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],[3,"reset","search","exportXlsx","addNew","addPermission","totalItems","title"],["control",""],[1,"col-md-3","mb-2"],[1,"search-box"],["type","search","id","name","name","name",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],[1,"col-12","col-md-2","mb-2"],["type","text","mwlFlatpickr","","id","isDate","mode","range","altFormat","d/m/Y",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"col-12","col-md-2"],["name","paymentTypeId","bindValue","code","bindLabel","name","required","",3,"ngModelChange","items","multiple","placeholder","ngModel"],[1,"col-md-2","mb-2"],["type","number","id","depositNumber","name","depositNumber",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"card-body"],[3,"hasProgressBar","fgsType","loaderId"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["translate","",2,"width",".5%"],["pSortableColumn","clientId","translate","",2,"width","10%"],[1,"ri-expand-up-down-line"],["pSortableColumn","paymentTypeName","translate","",2,"width","8%"],["pSortableColumn","creationTime","translate","",2,"width","12%"],["pSortableColumn","cost","translate","",2,"width","5%"],["pSortableColumn","depositNumber","translate","",2,"width","8%"],["pSortableColumn","isSyncOdoo","translate","",2,"width","6%"],["pSortableColumn","syncDate","translate","",2,"width","8%"],["pSortableColumn","notes","translate","",2,"width","8%"],["translate","",2,"width","12%"],[1,"fs-5"],[1,"badge","bg-success-subtle","text-success"],["class","badge bg-success","translate","sales.salesOrder.syncSend",4,"ngIf"],["class","badge bg-warning","translate","sales.salesOrder.syncNotSend",4,"ngIf"],["tooltipPosition","top",1,"mdi","mdi-cog-outline","text-muted","fs-16","align-middle","me-1",3,"ngbTooltip"],[1,"btn","btn-sm","btn-soft-warning","edit-list","mx-2"],[1,"ri-refresh-fill","align-bottom","mx-1"],["class","btn btn-sm btn-soft-info edit-list mx-2",3,"click",4,"hasPermission"],["class","btn btn-sm btn-soft-danger remove-list",3,"click",4,"hasPermission"],["translate","sales.salesOrder.syncSend",1,"badge","bg-success"],["translate","sales.salesOrder.syncNotSend",1,"badge","bg-warning"],[1,"ri-history-fill","text-warning"],[1,"ri-history-fill","text-danger"],[1,"ri-user-location-fill","text-primary"],[1,"btn","btn-sm","btn-soft-info","edit-list","mx-2",3,"click"],[1,"ri-pencil-fill","align-bottom","mx-1"],[1,"btn","btn-sm","btn-soft-danger","remove-list",3,"click"],[1,"ri-delete-bin-5-fill","align-bottom"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["class","fw-bold fs-4","translate","",4,"ngIf"],["translate",""],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"submit"],[1,"mb-3"],[1,"text-center"],[1,"position-relative","d-inline-block"],[1,"position-absolute","top-100","start-100","translate-middle"],["placement","right","ngbTooltip","Select Image",1,"mb-0",3,"click"],[1,"avatar-xs"],[1,"avatar-title","bg-light","border","rounded-circle","text-muted","cursor-pointer"],[1,"ri-image-fill"],["value","","type","file","accept","image/png, image/gif, image/jpeg",1,"form-control","d-none",3,"change"],[1,"d-flex"],[1,"avatar-lg","mx-2","position-relative"],["class","position-absolute bx bx-x-circle text-white","style","background: red; top: 1px; right: -4px; font-size: 1rem;\n                                                        border-radius: 50% ",3,"click",4,"ngIf"],[1,"avatar-title","bg-light","rounded"],["id","product-img2","alt","",1,"avatar-md","h-auto",3,"src"],["for","nameAr","translate","",1,"required","fw-bold","form-label"],["bindLabel","displayName","bindValue","id","name","clientId","required","",3,"scrollToEnd","ngModelChange","virtualScroll","items","typeahead","loading","multiple","ngModel"],["translate","",1,"required","fw-bold","form-label","w-100"],["name","paymentTypeId","bindValue","code","bindLabel","name","required","",3,"ngModelChange","items","multiple","ngModel"],["class","text-danger text-center","translate","",4,"ngIf"],[1,"mb-2"],["for","cost","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","cost","type","text","id","cost",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],["for","depositNumber","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","depositNumber","type","text","id","depositNumber",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["for","notes","translate","",1,"fw-bold","form-label"],["rows","2","InputTirmFilter","","name","notes","type","text","id","notes",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["type","submit","type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],["translate","",1,"fw-bold","fs-4"],[1,"position-absolute","bx","bx-x-circle","text-white",2,"background","red","top","1px","right","-4px","font-size","1rem","border-radius","50%",3,"click"],["translate","",1,"text-danger","text-center"],[3,"deleteConfirm","dismiss"]],template:function(r,n){if(1&r){const o=e.RV6();e.j41(0,"div",10)(1,"div",11)(2,"div",12)(3,"base-filter",13),e.bIt("reset",function(){return e.eBV(o),e.Njj(n.onReset())})("search",function(){return e.eBV(o),e.Njj(n.onSearch())})("exportXlsx",function(){return e.eBV(o),e.Njj(n.onExportXlsx())})("addNew",function(){e.eBV(o);const c=e.sdS(29);return e.Njj(n.openModalTitle(c,"md"))}),e.qex(4,14),e.j41(5,"div",15)(6,"div",16)(7,"input",17),e.nI1(8,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.pagination.name,c)||(n.pagination.name=c),e.Njj(c)}),e.k0s(),e.nrm(9,"i",18),e.k0s()(),e.j41(10,"div",19)(11,"input",20),e.nI1(12,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.searchForm.creationDates,c)||(n.searchForm.creationDates=c),e.Njj(c)}),e.k0s()(),e.j41(13,"div",21)(14,"ng-select",22),e.nI1(15,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.pagination.paymentTypeId,c)||(n.pagination.paymentTypeId=c),e.Njj(c)}),e.k0s()(),e.j41(16,"div",23)(17,"input",24),e.nI1(18,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.pagination.depositNumber,c)||(n.pagination.depositNumber=c),e.Njj(c)}),e.k0s()(),e.bVm(),e.k0s(),e.j41(19,"div",25),e.nrm(20,"ngx-ui-loader",26),e.j41(21,"div",27)(22,"p-table",28,0),e.bIt("onLazyLoad",function(c){return e.eBV(o),e.Njj(n.tableChange(c))})("selectionChange",function(c){return e.eBV(o),e.Njj(n.onSelectionChange(c))}),e.DNE(24,la,28,0,"ng-template",29)(25,pa,32,22,"ng-template",30),e.k0s()(),e.DNE(26,Pd,2,0,"div",31)(27,ua,6,8,"div",32),e.k0s()()()(),e.DNE(28,Gr,57,23,"ng-template",null,1,e.C5r)(30,J,1,0,"ng-template",null,2,e.C5r)}2&r&&(e.R7$(3),e.Y8G("addPermission",e.lJ4(32,Or))("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(4),e.FS9("placeholder",e.bMT(8,24,"general.table.name")),e.R50("ngModel",n.pagination.name),e.R7$(4),e.FS9("placeholder",e.bMT(12,26,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.creationDates),e.R7$(3),e.FS9("placeholder",e.bMT(15,28,"sales.salesInvoices.paymentTypeName")),e.Y8G("items",n.paymentMethods)("multiple",!1),e.R50("ngModel",n.pagination.paymentTypeId),e.R7$(3),e.FS9("placeholder",e.bMT(18,30,"sales.clientCollection.depositNumber")),e.R50("ngModel",n.pagination.depositNumber),e.R7$(3),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderSearchShap)("loaderId",n.searchLoader),e.R7$(2),e.Y8G("value",n.entities)("rows",n.pagination.pageSize)("lazy",!0)("totalRecords",n.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",n.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems>0))},dependencies:[k.bT,g.qT,g.me,g.Q0,g.BC,g.cb,g.YS,g.vS,g.cV,O.s5,fe.kL,Le.b,Ke.w,$e.p,Be.g,F.Mm,B.XI,Xe.Ei,B.Tg,X.Cv,ve.vr,O.md,ke.m,ye.p,k.vh,F.D9],encapsulation:2})}}return a})();const qd=()=>["requestPersonSales.register"],ti=()=>["requestPersonSales.changeStatus"],_a=()=>["requestPersonSales.edit"],Qd=()=>["requestPersonSales.delete"];function Hd(a,m){1&a&&(e.j41(0,"tr",46)(1,"th",47),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",48),e.nrm(4,"i",49),e.EFF(5," sales.clientCollection.clientName "),e.k0s(),e.j41(6,"th",50),e.nrm(7,"i",49),e.EFF(8," orderManagement.order.creation "),e.k0s(),e.j41(9,"th",51),e.EFF(10," sales.salesOrder.salsePerson "),e.k0s(),e.j41(11,"th",52),e.nrm(12,"i",49),e.EFF(13," sales.clientCollection.cost "),e.k0s(),e.j41(14,"th",53),e.nrm(15,"i",49),e.EFF(16," sales.requestPersonSales.requestPersonStatus "),e.k0s(),e.j41(17,"th",54),e.nrm(18,"i",49),e.EFF(19," sales.clientCollection.notes "),e.k0s(),e.nrm(20,"th",55),e.k0s())}function ht(a,m){if(1&a&&(e.nrm(0,"i",61),e.EFF(1),e.nI1(2,"date"),e.nrm(3,"br")(4,"i",62),e.EFF(5),e.nI1(6,"date"),e.nrm(7,"br")(8,"i",63),e.EFF(9)),2&a){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.i5U(2,3,t.creationTime,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",e.i5U(6,6,t.lastModificationTime,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",t.creatorName," ")}}function zd(a,m){if(1&a){const t=e.RV6();e.j41(0,"button",64),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,o=e.XpG(),p=e.sdS(83);return e.Njj(o.openModal(n.id,p))}),e.nrm(1,"i",65),e.k0s()}}function Vi(a,m){if(1&a){const t=e.RV6();e.j41(0,"button",68),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2).$implicit,o=e.XpG(),p=e.sdS(79);return e.Njj(o.EditModel(n.id,p))}),e.nrm(1,"i",69),e.k0s()}}function Er(a,m){if(1&a){const t=e.RV6();e.j41(0,"button",70),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2).$implicit,o=e.XpG(),p=e.sdS(81);return e.Njj(o.openModal(n.id,p))}),e.nrm(1,"i",71),e.k0s()}}function ha(a,m){1&a&&(e.qex(0),e.DNE(1,Vi,2,0,"button",66)(2,Er,2,0,"button",67),e.bVm()),2&a&&(e.R7$(),e.Y8G("hasPermission",e.lJ4(2,_a)),e.R7$(),e.Y8G("hasPermission",e.lJ4(3,Qd)))}function fa(a,m){if(1&a&&(e.j41(0,"tr",56)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.nI1(7,"date"),e.k0s(),e.j41(8,"td"),e.EFF(9),e.k0s(),e.j41(10,"td"),e.EFF(11),e.k0s(),e.j41(12,"td")(13,"span"),e.nrm(14,"span",57),e.k0s()(),e.j41(15,"td"),e.EFF(16),e.k0s(),e.j41(17,"td"),e.DNE(18,ht,10,9,"ng-template",null,4,e.C5r),e.nrm(20,"i",58),e.DNE(21,zd,2,0,"button",59)(22,ha,3,4,"ng-container",60),e.k0s()()),2&a){const t=m.$implicit,r=m.rowIndex,n=e.sdS(19),o=e.XpG();e.R7$(2),e.JRh(r+1),e.R7$(2),e.JRh(t.clientName),e.R7$(2),e.SpI(" ",e.i5U(7,13,t.creationTime,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(3),e.JRh(t.creatorName),e.R7$(2),e.JRh(t.cost),e.R7$(2),e.ZvI("badge ",o.getStatus(t.requestPersonStatus),""),e.R7$(),e.FS9("translate","sales.salesOrder."+t.requestPersonStatusName),e.R7$(2),e.JRh(t.notes),e.R7$(4),e.Y8G("ngbTooltip",n),e.R7$(),e.Y8G("hasPermission",e.lJ4(16,ti)),e.R7$(),e.Y8G("ngIf",30!=t.requestPersonStatus)}}function st(a,m){1&a&&(e.j41(0,"div",72),e.EFF(1," general.table.noData"),e.k0s())}function nn(a,m){if(1&a){const t=e.RV6();e.j41(0,"div",73)(1,"div",74),e.nrm(2,"ngb-pagination-info",75),e.j41(3,"table-length",76),e.bIt("lengthChange",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",77)(5,"ngb-pagination",78),e.bIt("pageChange",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.pagination.pageNumber,n)||(o.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&a){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function Dr(a,m){1&a&&(e.j41(0,"span",101),e.EFF(1,"general.action.register "),e.k0s())}function ba(a,m){1&a&&(e.j41(0,"span",101),e.EFF(1,"general.action.edit "),e.k0s())}function Li(a,m){1&a&&(e.j41(0,"div",102),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function va(a,m){if(1&a){const t=e.RV6();e.j41(0,"div",79)(1,"div",80)(2,"h4",81),e.DNE(3,Dr,2,0,"span",82)(4,ba,2,0,"span",82),e.j41(5,"span",83),e.EFF(6),e.k0s()(),e.j41(7,"button",84),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss("Cross click"))}),e.k0s()(),e.j41(8,"div",85),e.nrm(9,"ngx-ui-loader",86),e.j41(10,"form",87,5),e.bIt("submit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.OnSubmit())}),e.j41(12,"div",88)(13,"label",89),e.EFF(14,"sales.clientCollection.clientName"),e.k0s(),e.j41(15,"ng-select",90),e.bIt("scrollToEnd",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.scrollClient())}),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.form.clientId,n)||(o.form.clientId=n),e.Njj(n)}),e.k0s()(),e.j41(16,"div",91)(17,"label",92),e.EFF(18,"sales.clientCollection.cost"),e.k0s(),e.j41(19,"input",93,6),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.form.cost,n)||(o.form.cost=n),e.Njj(n)}),e.k0s(),e.DNE(21,Li,2,0,"div",94),e.k0s(),e.j41(22,"div",91)(23,"label",95),e.EFF(24,"sales.clientCollection.notes"),e.k0s(),e.j41(25,"textarea",96,7),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.form.notes,n)||(o.form.notes=n),e.Njj(n)}),e.k0s()(),e.j41(27,"div",97)(28,"button",98),e.nrm(29,"i",99)(30,"span",100),e.k0s()()()()()}if(2&a){const t=e.sdS(11),r=e.sdS(20),n=e.XpG();e.R7$(3),e.Y8G("ngIf",!n.isEditForm),e.R7$(),e.Y8G("ngIf",n.isEditForm),e.R7$(2),e.JRh(n.titleOperation),e.R7$(3),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderOperationShap)("loaderId",n.operationLoader),e.R7$(6),e.Y8G("virtualScroll",!0)("items",n.clients)("typeahead",n.searchClient)("loading",n.loading)("multiple",!1),e.R50("ngModel",n.form.clientId),e.R7$(4),e.R50("ngModel",n.form.cost),e.R7$(2),e.Y8G("ngIf",r.invalid&&r.touched),e.R7$(4),e.R50("ngModel",n.form.notes),e.R7$(3),e.Y8G("disabled",!t.valid)}}function Vr(a,m){if(1&a){const t=e.RV6();e.j41(0,"delete-modal",103),e.bIt("deleteConfirm",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.DeleteConfirmSoft())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}}function Ca(a,m){if(1&a){const t=e.RV6();e.j41(0,"div",88)(1,"label",108),e.EFF(2,"sales.clientCollection.cost"),e.k0s(),e.j41(3,"input",109),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG(2);return e.DH7(o.form.cost,n)||(o.form.cost=n),e.Njj(n)}),e.k0s()()}if(2&a){const t=e.XpG(2);e.R7$(3),e.R50("ngModel",t.form.cost)}}function Lr(a,m){if(1&a){const t=e.RV6();e.j41(0,"div",79)(1,"div",80)(2,"h4",81)(3,"span",83),e.EFF(4),e.k0s()(),e.j41(5,"button",84),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss("Cross click"))}),e.k0s()(),e.j41(6,"div",85),e.nrm(7,"ngx-ui-loader",86),e.j41(8,"form",87,5),e.bIt("submit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.OnStatusSubmit())}),e.j41(10,"div",27)(11,"div",88)(12,"label",104),e.EFF(13,"sales.requestPersonSales.requestPersonStatus"),e.k0s(),e.j41(14,"ng-select",105),e.nI1(15,"translate"),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.form.requestPersonStatus,n)||(o.form.requestPersonStatus=n),e.Njj(n)}),e.k0s()(),e.DNE(16,Ca,4,1,"div",106),e.k0s(),e.j41(17,"div",97)(18,"button",107),e.nrm(19,"i",99)(20,"span",100),e.k0s()()()()()}if(2&a){const t=e.sdS(9),r=e.XpG();e.R7$(4),e.JRh(r.titleOperation),e.R7$(3),e.Y8G("hasProgressBar",!1)("fgsType",r.loaderOperationShap)("loaderId",r.operationLoader),e.R7$(7),e.FS9("placeholder",e.bMT(15,10,"sales.requestPersonSales.requestPersonStatus")),e.Y8G("items",r.status)("multiple",!1),e.R50("ngModel",r.form.requestPersonStatus),e.R7$(2),e.Y8G("ngIf",30==r.form.requestPersonStatus),e.R7$(2),e.Y8G("disabled",!t.valid)}}let $r=(()=>{class a extends Ee.w{constructor(t,r,n,o,p,c,D,ne,re,oe,se){super(t,r,D,n,o,p,c),this.baseService=n,this.excelService=re,this.clientService=oe,this.employeeService=se,this.title="sales.requestPersonSales.title",this.titleOperation="sales.requestPersonSales.titleOperation",this.searchForm={},this.isResolveList=!0,this.countLoad=2,this.clientParam={pageSize:50,pageNumber:1,search:"",clientId:null},this.clients=[],this.loading=!1,this.searchClient=new dt.B,this.status=[],this.requestStatus={all:0,pending:0,underReview:0,accept:0,reject:0},this.option={startVal:0,useEasing:!0,duration:2,decimalPlaces:0},this.salesPersons=[],this.setDates=(W,q,Q)=>{if(W?.from||W?.to){const E=W.to||W.from;this.pagination[q]=this.datePipe.transform(W.from||W.to,"yyyy-MM-ddT00:00:00"),this.pagination[Q]=this.datePipe.transform(E,"yyyy-MM-ddT23:59:59.999")}else this.pagination[q]=null,this.pagination[Q]=null},this.configRoute(),this.GetSalesPersons()}ngOnInitMore(){this.GetRequestCount(),this.searchClient.pipe((0,ze.B)(300),(0,Mt.F)(),(0,Me.n)(t=>this.loadClient(t))).subscribe(),this.GetRequestLookups()}GetSalesPersons(){this.employeeService.GetAllByType(9).subscribe(t=>{this.salesPersons=t.data},t=>{console.log(t)})}GetRequestCount(){this.baseService.GetRequestCount().pipe((0,R.Q)(this.notifier)).subscribe(t=>{this.requestStatus=t.data})}GetRequestLookups(){this.baseService.GetRequestLookups().pipe((0,R.Q)(this.notifier)).subscribe(t=>{let r=t.data.status;r.forEach(n=>{n.name=this.getTranslationText("sales.salesOrder."+n.name)}),this.status=r})}onSearch(){let t={...this.searchForm};this.ngxLoader.startLoader("allLoader"),this.setDates(t.creationDates,"dateFrom","dateTo"),this.loadentities()}loadClient(t){return this.loading=!0,""==t||null==t?(this.loading=!1,(0,Vn.of)([])):this.getClientDropdwon(t)}getClientDropdwon(t=""){return this.clientParam.search=t,this.clientParam.clientId=null,this.clientParam.pageNumber=1,this.clientService.GetClientSearch(this.clientParam).pipe((0,Me.n)(r=>(this.clients=r.data,this.loading=!1,[])),(0,R.Q)(this.notifier))}mapForm(t){return{...t}}mapRegisterForm(t){let r={...t};return r.id=0,r}OnSearch(t){this.ngxLoader.startLoader(M.a7),this.loadentities()}configRoute(){}EditModel(t,r,n="md"){this.isEditForm=!0,this.baseService.getById(t).pipe((0,R.Q)(this.notifier)).subscribe(o=>{o.success?(this.clientParam.clientId=o.data.clientId,this.clientParam.search="",this.clientService.GetClientSearch(this.clientParam).pipe((0,R.Q)(this.notifier)).subscribe(p=>{this.clients=p.data}),this.form=o.data):this.alertService.error("general.message."+o.message),this.modalService.open(r,{centered:!0,size:n})},o=>{this.alertService.error()})}mapExcel(){let t=[];return this.entities?.forEach(r=>{t.push({nameAr:r.nameAr,nameEn:r.nameEn,isActive:this.getTranslationText("general.table.active"),notes:r.notes})}),t}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,this.getTranslationText(this.title),[])}editEntity(){let t=this.mapForm(this.form);this.baseService.editPut(t.id,t).pipe((0,Y.O)(),(0,Z.c)(this.mainDelay),(0,ee.Z)(),(0,R.Q)(this.notifier),(0,z.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(r=>{r.success?this.submitFunished():this.alertService.error("general.message."+r.message)},r=>{this.alertService.error("general.message."+r)})}scrollClient(){this.clientParam.pageNumber=this.clientParam.pageNumber+1,this.clientService.GetClientSearch(this.clientParam).subscribe(t=>{this.clients=[...this.clients,...t.data]})}getStatus(t){return 10==t||20==t?"bg-warning-subtle text-warning":30==t?"bg-success-subtle text-success":40==t?"bg-danger-subtle text-danger":"bg-warning-subtle text-warning"}OnStatusSubmit(){let t={requestPersonStatus:this.form.requestPersonStatus,id:this.operationId,cost:this.form.cost?this.form.cost:0};this.ngxLoader.start(M.ZW),this.baseService.UpdateLimit(t).pipe((0,Y.O)(),(0,Z.c)(this.mainDelay),(0,ee.Z)(),(0,R.Q)(this.notifier),(0,z.j)(()=>this.ngxLoader.stopLoader(M.ZW))).subscribe(r=>{r.success?(this.alertService.success(),this.modalService.dismissAll(),this.loadentities(),this.GetRequestCount()):this.alertService.error("general.message."+r.message)},r=>{this.alertService.error("general.message."+r)})}onStatusSelect(t){this.pagination.requestPersonStatus=0==t?null:t,this.loadentities()}static{this.\u0275fac=function(r){return new(r||a)(e.rXU($.nX),e.rXU(F.c$),e.rXU(bn),e.rXU(ae.u),e.rXU(k.vh),e.rXU(X.eD),e.rXU(O.Bq),e.rXU(e.gRc),e.rXU(qe.V),e.rXU(Ht.X),e.rXU(tt.O))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-requestPersonSales"]],features:[e.Vt3],decls:84,vars:44,consts:[["tableMaster",""],["operation",""],["deleteModal",""],["operationStatus",""],["tooltipContent",""],["formEntity","ngForm"],["cost","ngModel"],["notes","ngModel"],[3,"title","breadcrumbItems"],[1,"row","justify-content-around"],[1,"col-12","col-md-3","cursor-pointer"],[1,"card","card-animate",3,"click"],[1,"card-body"],[1,"d-flex","justify-content-between"],["translate","sales.salesOrder.all",1,"fw-medium","text-muted","mb-0"],[1,"mt-4","ff-secondary","fw-semibold"],[1,"counter-value",3,"countUp","options"],[1,"avatar-sm","flex-shrink-0"],[1,"avatar-title","bg-primary-subtle","text-primary","rounded-circle","fs-4"],[1,"ri-ticket-2-line"],[1,"col-12","col-md-2","cursor-pointer"],["translate","sales.salesOrder.UnderReview",1,"fw-medium","text-muted","mb-0"],[1,"avatar-title","bg-warning-subtle","text-warning","rounded-circle","fs-4"],["translate","sales.salesOrder.Accept",1,"fw-medium","text-muted","mb-0"],[1,"avatar-title","bg-success-subtle","text-success","rounded-circle","fs-4"],["translate","sales.salesOrder.Reject",1,"fw-medium","text-muted","mb-0"],[1,"avatar-title","bg-danger-subtle","text-danger","rounded-circle","fs-4"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],[3,"reset","search","exportXlsx","addNew","addPermission","totalItems","title"],["control",""],[1,"col-md-3","mb-2"],[1,"search-box"],["type","search","id","name","name","name",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],[1,"col-12","col-md-3","mb-2"],["type","text","mwlFlatpickr","","id","isDate","mode","range","altFormat","d/m/Y",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"col-12","col-md-2","mb-2"],["name","name","bindValue","id","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["translate","",2,"width",".5%"],["pSortableColumn","clientId","translate","",2,"width","15%"],[1,"ri-expand-up-down-line"],["pSortableColumn","creationTime","translate","",2,"width","12%"],["translate","",2,"width","8%"],["pSortableColumn","cost","translate","",2,"width","5%"],["pSortableColumn","requestPersonStatus","translate","",2,"width","8%"],["pSortableColumn","notes","translate","",2,"width","10%"],["translate","",2,"width","15%"],[1,"fs-5"],[3,"translate"],["tooltipPosition","top",1,"mdi","mdi-cog-outline","text-muted","fs-16","align-middle","me-1",3,"ngbTooltip"],["class","btn btn-sm btn-soft-warning edit-list mx-2 ",3,"click",4,"hasPermission"],[4,"ngIf"],[1,"ri-history-fill","text-warning"],[1,"ri-history-fill","text-danger"],[1,"ri-user-location-fill","text-primary"],[1,"btn","btn-sm","btn-soft-warning","edit-list","mx-2",3,"click"],[1,"ri-exchange-line","align-bottom","mx-1"],["class","btn btn-sm btn-soft-info edit-list mx-2",3,"click",4,"hasPermission"],["class","btn btn-sm btn-soft-danger remove-list",3,"click",4,"hasPermission"],[1,"btn","btn-sm","btn-soft-info","edit-list","mx-2",3,"click"],[1,"ri-pencil-fill","align-bottom","mx-1"],[1,"btn","btn-sm","btn-soft-danger","remove-list",3,"click"],[1,"ri-delete-bin-5-fill","align-bottom"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["class","fw-bold fs-4","translate","",4,"ngIf"],["translate",""],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"hasProgressBar","fgsType","loaderId"],[3,"submit"],[1,"mb-3"],["for","nameAr","translate","",1,"required","fw-bold","form-label"],["bindLabel","displayName","bindValue","id","name","clientId","required","",3,"scrollToEnd","ngModelChange","virtualScroll","items","typeahead","loading","multiple","ngModel"],[1,"mb-2"],["for","cost","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","cost","type","text","id","cost",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],["for","notes","translate","",1,"fw-bold","form-label"],["rows","2","InputTirmFilter","","name","notes","type","text","id","notes",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,"text-center"],["type","submit","type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],["translate","",1,"fw-bold","fs-4"],["translate","",1,"text-danger","text-center"],[3,"deleteConfirm","dismiss"],["for","status","translate","",1,"required","fw-bold","form-label"],["name","name","bindValue","id","bindLabel","name","required","",3,"ngModelChange","placeholder","items","multiple","ngModel"],["class","mb-3",4,"ngIf"],["type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],["for","cost","translate","",1,"required","fw-bold","form-label"],["type","numbers","id","cost","name","cost",1,"form-control",3,"ngModelChange","ngModel"]],template:function(r,n){if(1&r){const o=e.RV6();e.nrm(0,"app-breadcrumbs",8),e.nI1(1,"translate"),e.j41(2,"div",9)(3,"div",10)(4,"div",11),e.bIt("click",function(){return e.eBV(o),e.Njj(n.onStatusSelect(0))}),e.j41(5,"div",12)(6,"div",13)(7,"div"),e.nrm(8,"p",14),e.j41(9,"h2",15),e.nrm(10,"span",16),e.k0s()(),e.j41(11,"div")(12,"div",17)(13,"span",18),e.nrm(14,"i",19),e.k0s()()()()()()(),e.j41(15,"div",20)(16,"div",11),e.bIt("click",function(){return e.eBV(o),e.Njj(n.onStatusSelect(20))}),e.j41(17,"div",12)(18,"div",13)(19,"div"),e.nrm(20,"p",21),e.j41(21,"h2",15),e.nrm(22,"span",16),e.k0s()(),e.j41(23,"div")(24,"div",17)(25,"span",22),e.nrm(26,"i",19),e.k0s()()()()()()(),e.j41(27,"div",20)(28,"div",11),e.bIt("click",function(){return e.eBV(o),e.Njj(n.onStatusSelect(30))}),e.j41(29,"div",12)(30,"div",13)(31,"div"),e.nrm(32,"p",23),e.j41(33,"h2",15),e.nrm(34,"span",16),e.k0s()(),e.j41(35,"div")(36,"div",17)(37,"span",24),e.nrm(38,"i",19),e.k0s()()()()()()(),e.j41(39,"div",20)(40,"div",11),e.bIt("click",function(){return e.eBV(o),e.Njj(n.onStatusSelect(40))}),e.j41(41,"div",12)(42,"div",13)(43,"div"),e.nrm(44,"p",25),e.j41(45,"h2",15),e.nrm(46,"span",16),e.k0s()(),e.j41(47,"div")(48,"div",17)(49,"span",26),e.nrm(50,"i",19),e.k0s()()()()()()()(),e.j41(51,"div",27)(52,"div",28)(53,"div",29)(54,"base-filter",30),e.bIt("reset",function(){return e.eBV(o),e.Njj(n.onReset())})("search",function(){return e.eBV(o),e.Njj(n.onSearch())})("exportXlsx",function(){return e.eBV(o),e.Njj(n.onExportXlsx())})("addNew",function(){e.eBV(o);const c=e.sdS(79);return e.Njj(n.openModalTitle(c,"md"))}),e.qex(55,31),e.j41(56,"div",32)(57,"div",33)(58,"input",34),e.nI1(59,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.pagination.name,c)||(n.pagination.name=c),e.Njj(c)}),e.k0s(),e.nrm(60,"i",35),e.k0s()(),e.j41(61,"div",36)(62,"input",37),e.nI1(63,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.searchForm.creationDates,c)||(n.searchForm.creationDates=c),e.Njj(c)}),e.k0s()(),e.j41(64,"div",38)(65,"ng-select",39),e.nI1(66,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.pagination.salesPersonId,c)||(n.pagination.salesPersonId=c),e.Njj(c)}),e.k0s()(),e.j41(67,"div",38)(68,"ng-select",39),e.nI1(69,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.pagination.requestPersonStatus,c)||(n.pagination.requestPersonStatus=c),e.Njj(c)}),e.k0s()(),e.bVm(),e.k0s(),e.j41(70,"div",12)(71,"div",40)(72,"p-table",41,0),e.bIt("onLazyLoad",function(c){return e.eBV(o),e.Njj(n.tableChange(c))})("selectionChange",function(c){return e.eBV(o),e.Njj(n.onSelectionChange(c))}),e.DNE(74,Hd,21,0,"ng-template",42)(75,fa,23,17,"ng-template",43),e.k0s()(),e.DNE(76,st,2,0,"div",44)(77,nn,6,8,"div",45),e.k0s()()()(),e.DNE(78,va,31,16,"ng-template",null,1,e.C5r)(80,Vr,1,0,"ng-template",null,2,e.C5r)(82,Lr,21,12,"ng-template",null,3,e.C5r)}2&r&&(e.FS9("title",e.bMT(1,33,n.title)),e.Y8G("breadcrumbItems",n.breadCrumbItems),e.R7$(10),e.Y8G("countUp",null==n.requestStatus?null:n.requestStatus.all)("options",n.option),e.R7$(12),e.Y8G("countUp",null==n.requestStatus?null:n.requestStatus.underReview)("options",n.option),e.R7$(12),e.Y8G("countUp",null==n.requestStatus?null:n.requestStatus.accept)("options",n.option),e.R7$(12),e.Y8G("countUp",null==n.requestStatus?null:n.requestStatus.reject)("options",n.option),e.R7$(8),e.Y8G("addPermission",e.lJ4(43,qd))("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(4),e.FS9("placeholder",e.bMT(59,35,"general.table.name")),e.R50("ngModel",n.pagination.name),e.R7$(4),e.FS9("placeholder",e.bMT(63,37,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.creationDates),e.R7$(3),e.FS9("placeholder",e.bMT(66,39,"sales.salesOrder.salsePerson")),e.Y8G("items",n.salesPersons)("multiple",!1),e.R50("ngModel",n.pagination.salesPersonId),e.R7$(3),e.FS9("placeholder",e.bMT(69,41,"sales.requestPersonSales.requestPersonStatus")),e.Y8G("items",n.status)("multiple",!1),e.R50("ngModel",n.pagination.requestPersonStatus),e.R7$(4),e.Y8G("value",n.entities)("rows",n.pagination.pageSize)("lazy",!0)("totalRecords",n.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",n.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems>0))},dependencies:[k.bT,g.qT,g.me,g.BC,g.cb,g.YS,g.vS,g.cV,O.s5,fe.kL,Qt.G,Cn.m,Le.b,Ke.w,$e.p,Be.g,F.Mm,B.XI,Xe.Ei,B.Tg,X.Cv,ve.vr,O.md,ke.m,ye.p,k.vh,F.D9],encapsulation:2})}}return a})();x(39974),x(85343),x(54360),x(58750);let ni=(()=>{class a extends We.d{constructor(t){super(t,Je.c.apiUrl+"PriceList/")}UpdatePriceListItemUnit(t){return this.http.get(this.baseUrl+"UpdatePriceListItemUnit/"+t)}GetPriceListWithUnits(t){return this.http.get(this.baseUrl+"GetPriceListWithUnits/"+t)}EditPriceListItem(t){return this.http.post(this.baseUrl+"EditPriceListItem/",t)}static{this.\u0275fac=function(r){return new(r||a)(e.KVO(Ue.Qq))}}static{this.\u0275prov=e.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();var Ia=x(84205);const Wd=()=>["priceList.register"],Kd=()=>["priceList.edit"],ya=()=>["priceList.delete"];function Ta(a,m){1&a&&(e.j41(0,"tr",28)(1,"th",29),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",30),e.nrm(4,"i",31),e.EFF(5," sales.priceList.name "),e.k0s(),e.j41(6,"th",32),e.nrm(7,"i",31),e.EFF(8," sales.priceList.clientGroupName "),e.k0s(),e.j41(9,"th",33),e.nrm(10,"i",31),e.EFF(11," general.table.isActive "),e.k0s(),e.j41(12,"th",34),e.nrm(13,"i",31),e.EFF(14," sales.clientCollection.notes "),e.k0s(),e.nrm(15,"th",35),e.k0s())}function Zd(a,m){1&a&&e.nrm(0,"span",43)}function xa(a,m){1&a&&e.nrm(0,"span",44)}function ka(a,m){if(1&a&&(e.nrm(0,"i",45),e.EFF(1),e.nI1(2,"date"),e.nrm(3,"br")(4,"i",46),e.EFF(5),e.nI1(6,"date"),e.nrm(7,"br")(8,"i",47),e.EFF(9)),2&a){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.i5U(2,3,t.creationTime,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",e.i5U(6,6,t.lastModificationTime,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",t.creatorName," ")}}function Ze(a,m){if(1&a){const t=e.RV6();e.j41(0,"button",48),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,o=e.XpG();return e.Njj(o.goList(n.id))}),e.nrm(1,"i",49),e.k0s()}}function Ft(a,m){if(1&a){const t=e.RV6();e.j41(0,"button",50),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,o=e.XpG(),p=e.sdS(24);return e.Njj(o.openModal(n.id,p))}),e.nrm(1,"i",51),e.k0s()}}function ec(a,m){if(1&a){const t=e.RV6();e.j41(0,"tr",36)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td",37),e.bIt("click",function(){const n=e.eBV(t).$implicit,o=e.XpG();return e.Njj(o.goList(n.id))}),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.DNE(8,Zd,1,0,"span",38)(9,xa,1,0,"span",39),e.k0s(),e.j41(10,"td"),e.EFF(11),e.k0s(),e.j41(12,"td"),e.DNE(13,ka,10,9,"ng-template",null,3,e.C5r),e.nrm(15,"i",40),e.DNE(16,Ze,2,0,"button",41)(17,Ft,2,0,"button",42),e.k0s()()}if(2&a){const t=m.$implicit,r=m.rowIndex,n=e.sdS(14);e.R7$(2),e.JRh(r+1),e.R7$(2),e.JRh(t.name),e.R7$(2),e.JRh(t.clientGroupName),e.R7$(2),e.Y8G("ngIf",t.isActive),e.R7$(),e.Y8G("ngIf",!t.isActive),e.R7$(2),e.JRh(t.notes),e.R7$(4),e.Y8G("ngbTooltip",n),e.R7$(),e.Y8G("hasPermission",e.lJ4(9,Kd)),e.R7$(),e.Y8G("hasPermission",e.lJ4(10,ya))}}function tc(a,m){1&a&&(e.j41(0,"div",52),e.EFF(1," general.table.noData"),e.k0s())}function $i(a,m){if(1&a){const t=e.RV6();e.j41(0,"div",53)(1,"div",54),e.nrm(2,"ngb-pagination-info",55),e.j41(3,"table-length",56),e.bIt("lengthChange",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",57)(5,"ngb-pagination",58),e.bIt("pageChange",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.pagination.pageNumber,n)||(o.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&a){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function Fn(a,m){1&a&&(e.j41(0,"span",90),e.EFF(1,"general.action.register "),e.k0s())}function Ra(a,m){1&a&&(e.j41(0,"span",90),e.EFF(1,"general.action.edit "),e.k0s())}function Ma(a,m){1&a&&(e.j41(0,"div",91),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function nc(a,m){1&a&&(e.j41(0,"div",91),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function Oa(a,m){if(1&a){const t=e.RV6();e.j41(0,"div",59)(1,"div",60)(2,"h4",61),e.DNE(3,Fn,2,0,"span",62)(4,Ra,2,0,"span",62),e.j41(5,"span",63),e.EFF(6),e.k0s()(),e.j41(7,"button",64),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss("Cross click"))}),e.k0s()(),e.j41(8,"div",65),e.nrm(9,"ngx-ui-loader",66),e.j41(10,"form",67,4),e.bIt("submit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.OnSubmit())}),e.j41(12,"div",10)(13,"div",68)(14,"label",69),e.EFF(15,"sales.priceList.name"),e.k0s(),e.j41(16,"input",70,5),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.form.name,n)||(o.form.name=n),e.Njj(n)}),e.k0s(),e.DNE(18,Ma,2,0,"div",71),e.k0s(),e.j41(19,"div",72)(20,"label",73),e.EFF(21,"sales.priceList.clientGroupName"),e.k0s(),e.j41(22,"ng-select",74,6),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.form.clientGroupId,n)||(o.form.clientGroupId=n),e.Njj(n)}),e.k0s(),e.DNE(24,nc,2,0,"div",75),e.k0s(),e.j41(25,"div",76)(26,"label",73),e.EFF(27,"sales.priceList.discountType"),e.k0s(),e.j41(28,"ng-select",77,7),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.form.discountType,n)||(o.form.discountType=n),e.Njj(n)}),e.k0s()(),e.j41(30,"div",76)(31,"label",78),e.EFF(32,"sales.priceList.discount"),e.k0s(),e.j41(33,"input",79,8),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.form.discount,n)||(o.form.discount=n),e.Njj(n)}),e.k0s()(),e.j41(35,"div",72)(36,"label",80),e.EFF(37,"sales.clientCollection.clientName"),e.k0s(),e.j41(38,"ng-select",81),e.bIt("scrollToEnd",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.scrollClient())}),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.form.clientId,n)||(o.form.clientId=n),e.Njj(n)}),e.k0s()(),e.j41(39,"div",76)(40,"label",82),e.EFF(41,"stores.storesUnits.isActive"),e.k0s(),e.j41(42,"p-inputSwitch",83),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.form.isActive,n)||(o.form.isActive=n),e.Njj(n)}),e.k0s()(),e.j41(43,"div",72)(44,"label",84),e.EFF(45,"sales.clientCollection.notes"),e.k0s(),e.j41(46,"textarea",85,9),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.form.notes,n)||(o.form.notes=n),e.Njj(n)}),e.k0s()(),e.j41(48,"div",86)(49,"button",87),e.nrm(50,"i",88)(51,"span",89),e.k0s()()()()()()}if(2&a){const t=e.sdS(11),r=e.sdS(17),n=e.sdS(23),o=e.XpG();e.R7$(3),e.Y8G("ngIf",!o.isEditForm),e.R7$(),e.Y8G("ngIf",o.isEditForm),e.R7$(2),e.JRh(o.titleOperation),e.R7$(3),e.Y8G("hasProgressBar",!1)("fgsType",o.loaderOperationShap)("loaderId",o.operationLoader),e.R7$(7),e.R50("ngModel",o.form.name),e.R7$(2),e.Y8G("ngIf",r.invalid&&r.touched),e.R7$(4),e.Y8G("items",o.clientGroups)("multiple",!1),e.R50("ngModel",o.form.clientGroupId),e.R7$(2),e.Y8G("ngIf",n.invalid&&n.touched),e.R7$(4),e.Y8G("items",o.discountTypes),e.R50("ngModel",o.form.discountType),e.R7$(5),e.R50("ngModel",o.form.discount),e.R7$(5),e.Y8G("virtualScroll",!0)("items",o.clients)("typeahead",o.searchClient)("loading",o.loading)("multiple",!1),e.R50("ngModel",o.form.clientId),e.R7$(4),e.R50("ngModel",o.form.isActive),e.R7$(4),e.R50("ngModel",o.form.notes),e.R7$(3),e.Y8G("disabled",!t.valid)}}function wn(a,m){if(1&a){const t=e.RV6();e.j41(0,"delete-modal",92),e.bIt("deleteConfirm",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.DeleteConfirmSoft())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}}let ii=(()=>{class a extends Ee.w{constructor(t,r,n,o,p,c,D,ne,re,oe,se,W,q){super(t,r,D,n,o,p,c),this.baseService=n,this.excelService=re,this.clientService=oe,this.clientGroupsService=se,this.offerOrderService=W,this.router=q,this.title="sales.priceList.title",this.titleOperation="sales.priceList.titleOperation",this.keySelected="",this.assignUsers=[],this.times=[],this.employees=[],this.searchForm={},this.isResolveList=!0,this.countLoad=2,this.clientParam={pageSize:50,pageNumber:1,search:"",clientId:null},this.clients=[],this.loading=!1,this.searchClient=new dt.B,this.clientGroups=[],this.discountTypes=[],this.setDates=(Q,V,E)=>{if(Q?.from||Q?.to){const le=Q.to||Q.from;this.pagination[V]=this.datePipe.transform(Q.from||Q.to,"yyyy-MM-ddT00:00:00"),this.pagination[E]=this.datePipe.transform(le,"yyyy-MM-ddT23:59:59.999")}else this.pagination[V]=null,this.pagination[E]=null},this.configRoute(),this.discountTypes=this.offerOrderService.discountTypes,this.discountTypes.forEach(Q=>{Q.name=this.getTranslationText("sales.salesOrder."+Q.name)})}ngOnInitMore(){this.searchClient.pipe((0,ze.B)(300),(0,Mt.F)(),(0,Me.n)(t=>this.loadClient(t))).subscribe(),this.getClientGroups()}getClientGroups(){this.clientGroupsService.getDropDown().subscribe({next:t=>{this.clientGroups=t.data}})}onSearch(){let t={...this.searchForm};this.ngxLoader.startLoader("allLoader"),this.setDates(t.creationDates,"dateFrom","dateTo"),this.loadentities()}loadClient(t){return this.loading=!0,""==t||null==t?(this.loading=!1,(0,Vn.of)([])):this.getClientDropdwon(t)}getClientDropdwon(t=""){return this.clientParam.search=t,this.clientParam.clientId=null,this.clientParam.pageNumber=1,this.clientService.GetClientSearch(this.clientParam).pipe((0,Me.n)(r=>(this.clients=r.data,this.loading=!1,[])))}mapForm(t){let r={...t};return r.clientId>0&&(r.clientGroupId=null),r}mapRegisterForm(t){let r={...t};return r.clientId>0&&(r.clientGroupId=null),r.id=0,r}OnSearch(t){this.ngxLoader.startLoader(M.a7),this.loadentities()}configRoute(){}EditModel(t,r,n="md"){this.isEditForm=!0,this.baseService.getById(t).pipe((0,R.Q)(this.notifier)).subscribe(o=>{o.success?(this.clientParam.clientId=o.data.clientId,this.clientParam.search="",this.clientService.GetClientSearch(this.clientParam).subscribe(p=>{this.clients=p.data}),this.form=o.data):this.alertService.error("general.message."+o.message),this.modalService.open(r,{centered:!0,size:n})},o=>{this.alertService.error()})}mapExcel(){let t=[];return this.entities?.forEach(r=>{t.push({nameAr:r.nameAr,nameEn:r.nameEn,isActive:this.getTranslationText("general.table.active"),notes:r.notes})}),t}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,this.getTranslationText(this.title),[])}editEntity(){let t=this.mapForm(this.form);this.baseService.editPut(t.id,t).pipe((0,Y.O)(),(0,Z.c)(this.mainDelay),(0,ee.Z)(),(0,R.Q)(this.notifier),(0,z.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(r=>{r.success?this.submitFunished():this.alertService.error("general.message."+r.message)},r=>{this.alertService.error("general.message."+r)})}scrollClient(){this.clientParam.pageNumber=this.clientParam.pageNumber+1,this.clientService.GetClientSearch(this.clientParam).subscribe(t=>{this.clients=[...this.clients,...t.data]})}goList(t){this.router.navigateByUrl("/sales/PriceListItems/"+t)}goRegister(){this.router.navigateByUrl("/sales/PriceListItems")}static{this.\u0275fac=function(r){return new(r||a)(e.rXU($.nX),e.rXU(F.c$),e.rXU(ni),e.rXU(ae.u),e.rXU(k.vh),e.rXU(X.eD),e.rXU(O.Bq),e.rXU(e.gRc),e.rXU(qe.V),e.rXU(Ht.X),e.rXU(Ia.t),e.rXU(Oe),e.rXU($.Ix))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-priceList"]],features:[e.Vt3],decls:25,vars:20,consts:[["tableMaster",""],["operation",""],["deleteModal",""],["tooltipContent",""],["formEntity","ngForm"],["name","ngModel"],["clientGroupId","ngModel"],["discountType","ngModel"],["discount","ngModel"],["notes","ngModel"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],[3,"reset","search","exportXlsx","addNew","addPermission","totalItems","title"],["control",""],[1,"col-md-4","mb-2"],[1,"search-box"],["type","search","id","name","name","name",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],[1,"col-12","col-md-3","mb-2"],["type","text","mwlFlatpickr","","id","isDate","mode","range","altFormat","d/m/Y",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["translate","",2,"width",".5%"],["pSortableColumn","paymentTypeName","translate","",2,"width","10%"],[1,"ri-expand-up-down-line"],["pSortableColumn","clientGroupId","translate","",2,"width","12%"],["pSortableColumn","isActive","translate","",2,"width","6%"],["pSortableColumn","notes","translate","",2,"width","8%"],["translate","",2,"width","12%"],[1,"fs-5"],[3,"click"],["class","badge bg-success-subtle text-success p-2","translate","general.table.active",4,"ngIf"],["class","badge bg-danger-subtle text-danger p-2","translate","general.table.noActive",4,"ngIf"],["tooltipPosition","top",1,"mdi","mdi-cog-outline","text-muted","fs-16","align-middle","me-1",3,"ngbTooltip"],["class","btn btn-sm btn-soft-info edit-list mx-2",3,"click",4,"hasPermission"],["class","btn btn-sm btn-soft-danger remove-list",3,"click",4,"hasPermission"],["translate","general.table.active",1,"badge","bg-success-subtle","text-success","p-2"],["translate","general.table.noActive",1,"badge","bg-danger-subtle","text-danger","p-2"],[1,"ri-history-fill","text-warning"],[1,"ri-history-fill","text-danger"],[1,"ri-user-location-fill","text-primary"],[1,"btn","btn-sm","btn-soft-info","edit-list","mx-2",3,"click"],[1,"ri-pencil-fill","align-bottom","mx-1"],[1,"btn","btn-sm","btn-soft-danger","remove-list",3,"click"],[1,"ri-delete-bin-5-fill","align-bottom"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["class","fw-bold fs-4","translate","",4,"ngIf"],["translate",""],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"hasProgressBar","fgsType","loaderId"],[3,"submit"],[1,"col-12"],["for","name","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","name","type","text","id","name","required","",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],[1,"col-12","my-1"],["translate","",1,"fw-bold","form-label","w-100"],["name","clientGroupId","id","clientGroupId","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","ngModel"],["class","text-danger text-center","translate","",4,"ngIf"],[1,"col-12","col-md-6"],["clearable","false","clearOnBackspace","false","name","discountType","bindValue","id","bindLabel","name",2,"width","100%",3,"ngModelChange","items","ngModel"],["for","discount","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","name","type","number","id","discount",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["for","nameAr","translate","",1,"fw-bold","form-label"],["bindLabel","displayName","bindValue","id","name","clientId",3,"scrollToEnd","ngModelChange","virtualScroll","items","typeahead","loading","multiple","ngModel"],["for","isActive","translate","",1,"fw-bold","form-label","d-block"],["id","isActive","name","isActive","inputId","isActive",3,"ngModelChange","ngModel"],["for","notes","translate","",1,"fw-bold","form-label"],["rows","1","InputTirmFilter","","name","notes","type","text","id","notes",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,"text-center"],["type","submit","type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],["translate","",1,"fw-bold","fs-4"],["translate","",1,"text-danger","text-center"],[3,"deleteConfirm","dismiss"]],template:function(r,n){if(1&r){const o=e.RV6();e.j41(0,"div",10)(1,"div",11)(2,"div",12)(3,"base-filter",13),e.bIt("reset",function(){return e.eBV(o),e.Njj(n.onReset())})("search",function(){return e.eBV(o),e.Njj(n.onSearch())})("exportXlsx",function(){return e.eBV(o),e.Njj(n.onExportXlsx())})("addNew",function(){return e.eBV(o),e.Njj(n.goRegister())}),e.qex(4,14),e.j41(5,"div",15)(6,"div",16)(7,"input",17),e.nI1(8,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.pagination.name,c)||(n.pagination.name=c),e.Njj(c)}),e.k0s(),e.nrm(9,"i",18),e.k0s()(),e.j41(10,"div",19)(11,"input",20),e.nI1(12,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.searchForm.creationDates,c)||(n.searchForm.creationDates=c),e.Njj(c)}),e.k0s()(),e.bVm(),e.k0s(),e.j41(13,"div",21)(14,"div",22)(15,"p-table",23,0),e.bIt("onLazyLoad",function(c){return e.eBV(o),e.Njj(n.tableChange(c))})("selectionChange",function(c){return e.eBV(o),e.Njj(n.onSelectionChange(c))}),e.DNE(17,Ta,16,0,"ng-template",24)(18,ec,18,11,"ng-template",25),e.k0s()(),e.DNE(19,tc,2,0,"div",26)(20,$i,6,8,"div",27),e.k0s()()()(),e.DNE(21,Oa,52,24,"ng-template",null,1,e.C5r)(23,wn,1,0,"ng-template",null,2,e.C5r)}2&r&&(e.R7$(3),e.Y8G("addPermission",e.lJ4(19,Wd))("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(4),e.FS9("placeholder",e.bMT(8,15,"general.table.name")),e.R50("ngModel",n.pagination.name),e.R7$(4),e.FS9("placeholder",e.bMT(12,17,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.creationDates),e.R7$(4),e.Y8G("value",n.entities)("rows",n.pagination.pageSize)("lazy",!0)("totalRecords",n.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",n.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems>0))},dependencies:[k.bT,g.qT,g.me,g.Q0,g.BC,g.cb,g.YS,g.vS,g.cV,O.s5,fe.kL,Le.b,Ke.w,$e.p,Be.g,F.Mm,B.XI,Xe.Ei,B.Tg,Et.HW,X.Cv,ve.vr,O.md,ke.m,ye.p,k.vh,F.D9],encapsulation:2})}}return a})(),ic=(()=>{class a extends Ei.E{constructor(t,r,n){super(t,r,n)}static{this.\u0275fac=function(r){return new(r||a)(e.KVO($.Ix),e.KVO(Mr),e.KVO(ae.u))}}static{this.\u0275prov=e.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();const Fa=()=>["assignTruckOrder.changeStatus"],wa=()=>["assignTruckOrder.print"],Bi=()=>["assignTruckOrder.finish"];function Na(a,m){1&a&&e.nrm(0,"span",45)}function Xi(a,m){if(1&a&&(e.j41(0,"a",46),e.nrm(1,"i",47),e.k0s()),2&a){const t=e.XpG().$implicit,r=e.XpG();e.Y8G("href",r.mapUrl(null==t?null:t.lng,null==t?null:t.lat),e.B4B)}}function Br(a,m){if(1&a&&(e.qex(0),e.j41(1,"div",48)(2,"div",49)(3,"div",50),e.EFF(4),e.k0s(),e.j41(5,"div",51)(6,"span",52),e.EFF(7),e.k0s(),e.j41(8,"span",53),e.EFF(9),e.k0s()()()(),e.bVm()),2&a){const t=m.$implicit,r=m.index;e.R7$(4),e.Lme(" ",r+1," - ",t.itemName," "),e.R7$(3),e.SpI("",t.unitName," "),e.R7$(2),e.SpI("",t.quantity," ")}}function Pi(a,m){if(1&a){const t=e.RV6();e.j41(0,"div",51)(1,"span",54),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,o=e.XpG(),p=e.sdS(28);return e.Njj(o.openChangeStatusModal(n,p))}),e.nrm(2,"i",55)(3,"span",56),e.k0s()()}}function rc(a,m){if(1&a){const t=e.RV6();e.j41(0,"div",51)(1,"span",57),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,o=e.XpG();return e.Njj(o.PrintOrderReceived(n.id))}),e.nrm(2,"i",58)(3,"span",59),e.k0s()()}}function Ga(a,m){if(1&a){const t=e.RV6();e.j41(0,"div",51)(1,"span",60),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,o=e.XpG(),p=e.sdS(30);return e.Njj(o.openFinishedModal(n.id,p,"md"))}),e.nrm(2,"i",61)(3,"span",62),e.k0s()()}}function Ai(a,m){if(1&a){const t=e.RV6();e.j41(0,"div",21)(1,"div",22)(2,"div",23)(3,"bdi")(4,"span")(5,"span"),e.EFF(6),e.nI1(7,"translate"),e.k0s()()(),e.j41(8,"div",24)(9,"p",25),e.nrm(10,"i",26),e.EFF(11),e.k0s(),e.j41(12,"p",25),e.nrm(13,"i",27),e.EFF(14),e.k0s()(),e.j41(15,"div",28)(16,"p",25),e.nrm(17,"i",29),e.EFF(18),e.nI1(19,"date"),e.k0s(),e.j41(20,"p",30),e.nrm(21,"i",31),e.EFF(22),e.k0s()(),e.j41(23,"div",28)(24,"h5",32),e.nrm(25,"i",33),e.EFF(26),e.k0s(),e.j41(27,"p",30),e.nrm(28,"i",34),e.EFF(29),e.k0s()(),e.j41(30,"div",35),e.DNE(31,Na,1,0,"span",36)(32,Xi,2,1,"a",37),e.j41(33,"div"),e.nrm(34,"i",38),e.j41(35,"span",39),e.bIt("click",function(){const n=e.eBV(t).$implicit,o=e.XpG();return e.Njj(o.copytext(n.mobile))}),e.EFF(36),e.nrm(37,"i",40),e.k0s()()(),e.nrm(38,"hr"),e.j41(39,"div",41),e.DNE(40,Br,10,4,"ng-container",42),e.k0s(),e.j41(41,"div",43),e.DNE(42,Pi,4,0,"div",44)(43,rc,4,0,"div",44)(44,Ga,4,0,"div",44),e.k0s()()()()}if(2&a){const t=m.$implicit;e.R7$(4),e.ZvI("ribbon ",t.trunckStatusName," round-shape "),e.R7$(2),e.JRh(e.bMT(7,17,"sales.salesOrder."+t.trunckStatusName)),e.R7$(5),e.SpI(" ",t.shippingTruckName," "),e.R7$(3),e.SpI(" ",t.shippingTruckNumber," "),e.R7$(4),e.SpI(" ",e.i5U(19,19,t.deliveryDate,"yyyy-MM-dd HH:mm")," "),e.R7$(4),e.SpI(" #SHO#",t.id," "),e.R7$(4),e.SpI(" ",t.clientName," "),e.R7$(3),e.SpI(" #SO#",t.offerOrderMasterId," "),e.R7$(2),e.Y8G("ngIf",""==t.lng),e.R7$(),e.Y8G("ngIf",null==t?null:t.lng),e.R7$(4),e.SpI("",t.mobile," "),e.R7$(4),e.Y8G("ngForOf",t.details),e.R7$(2),e.Y8G("hasPermission",e.lJ4(22,Fa)),e.R7$(),e.Y8G("hasPermission",e.lJ4(23,wa)),e.R7$(),e.Y8G("hasPermission",e.lJ4(24,Bi))}}function Ea(a,m){1&a&&(e.j41(0,"div",63),e.EFF(1," general.table.noData "),e.k0s())}function Xr(a,m){if(1&a){const t=e.RV6();e.j41(0,"div",64)(1,"div",65),e.nrm(2,"ngb-pagination-info",66),e.j41(3,"table-length",67),e.bIt("lengthChange",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",68)(5,"ngb-pagination",69),e.bIt("pageChange",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.pagination.pageNumber,n)||(o.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&a){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function sc(a,m){if(1&a){const t=e.RV6();e.j41(0,"div",70)(1,"div",71)(2,"h4",72),e.nrm(3,"span",73),e.k0s(),e.j41(4,"button",74),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(5,"div",75),e.nrm(6,"ngx-ui-loader",76),e.j41(7,"form",77,2),e.bIt("ngSubmit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.changeStatus())}),e.j41(9,"div",17)(10,"div",78)(11,"label",79),e.EFF(12,"sales.salesOrder.trunckStatus"),e.k0s(),e.j41(13,"ng-select",80),e.nI1(14,"translate"),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.form.trunckStatus,n)||(o.form.trunckStatus=n),e.Njj(n)}),e.k0s()()(),e.j41(15,"div",32)(16,"button",81),e.nrm(17,"i",82)(18,"span",83),e.k0s()()()()()}if(2&a){const t=e.sdS(8),r=e.XpG();e.R7$(6),e.Y8G("hasProgressBar",!1)("fgsType",r.loaderOperationShap)("loaderId",r.operationLoader),e.R7$(7),e.FS9("placeholder",e.bMT(14,8,"orderManagement.order.changeTeamStatus")),e.Y8G("items",r.statusList)("multiple",!1),e.R50("ngModel",r.form.trunckStatus),e.R7$(3),e.Y8G("disabled",!t.valid)}}function Da(a,m){if(1&a){const t=e.RV6();e.j41(0,"div",96)(1,"i",97),e.bIt("click",function(){const n=e.eBV(t),o=n.$implicit,p=n.index,c=e.XpG(2);return e.Njj(c.removeImage(o.id,p))}),e.k0s(),e.j41(2,"div",98),e.nrm(3,"img",99),e.k0s()()}if(2&a){const t=m.$implicit,r=e.XpG(2);e.R7$(3),e.Y8G("src",0==t.id?t.path:r.serverPath+t.path,e.B4B)}}function Pt(a,m){if(1&a){const t=e.RV6();e.j41(0,"div",71)(1,"h4",72),e.nrm(2,"span",84),e.k0s(),e.j41(3,"button",74),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(4,"div",75)(5,"form",null,2),e.nrm(7,"ngx-ui-loader",76),e.j41(8,"div",85)(9,"div",86)(10,"div",87)(11,"div",88)(12,"button",89),e.bIt("click",function(){e.eBV(t);const n=e.sdS(17);return e.Njj(n.click())}),e.EFF(13," orderManagement.order.assignedOrders.select "),e.k0s(),e.j41(14,"div",90),e.DNE(15,Da,4,1,"div",91),e.k0s()(),e.j41(16,"input",92,3),e.bIt("change",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.onFileChanged(n))}),e.k0s()(),e.j41(18,"div",93)(19,"button",94),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.finishOrder())}),e.k0s(),e.j41(20,"button",95),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()()()()()()}if(2&a){const t=e.XpG();e.R7$(7),e.Y8G("hasProgressBar",!1)("fgsType",t.loaderOperationShap)("loaderId",t.deleteLoader),e.R7$(8),e.Y8G("ngForOf",t.images)}}let Va=(()=>{class a extends Ee.w{constructor(t,r,n,o,p,c,D,ne,re,oe,se){super(t,r,ne,n,p,c,D),this.baseService=n,this.salesInvoicesService=o,this.authDaamService=re,this.excelService=oe,this._formDataService=se,this.title="sales.assignTruckOrder.title",this.titleOperation="sales.assignTruckOrder.title",this.config={infinite:!0,slidesToShow:5,slidesToScroll:1,autoplay:!1,arrows:!1},this.trunks=[],this.isFlagTime=!0,this.searchForm={},this.statusList=[],this.pagination={pageNumber:1,pageSize:30},this.images=[],this.serverPath=Je.c.mediaUrl,this.form={orderId:0,attachmens:[]},this.setDates=(W,q,Q)=>{if(W?.from||W?.to){const E=W.to||W.from;this.pagination[q]=this.datePipe.transform(W.from||W.to,"yyyy-MM-ddT00:00:00"),this.pagination[Q]=this.datePipe.transform(E,"yyyy-MM-ddT23:59:59.999")}else this.pagination[q]=null,this.pagination[Q]=null}}loadentities(){this.ngxLoader.startLoader(M.a7),this.baseService.GetOrderAssignTrunk(this.pagination).pipe((0,R.Q)(this.notifier)).subscribe(t=>{this.ngxLoader.stopLoader(M.a7),this.entities=t.data,this.pagination.totalItems=t.totalItems,this.LoadSuccess()},t=>{this.ngxLoader.stopLoader(M.a7),this.alertService.error(t)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[]}ngOnInitMore(){this.loadentities(),this.checkStatus()}checkStatus(){let t=this.baseService.getTrunckStatus();t.forEach(r=>{r.name=this.getTranslationText("sales.salesOrder."+r.name)}),this.statusList=t}mapExcel(){let t=[];return this.entities.forEach(r=>{t.push({"Order Code":r.orderCode,"Created Date":r.createdDate,"City Name":r.cityName,"District Name":r.districtName?r.districtName:"--","Agent Name":r.agentName,Mobile:r.mobile,"Channel Name":r.channelName,"Assigned To":r.teamNames,Times:r.workTimes,"Visit Date":r.visitDate,Services:r.services})}),t}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,this.translateService.instant(this.title),[])}onSearch(){let t={...this.searchForm};this.ngxLoader.startLoader("allLoader"),this.setDates(t.dates,"visitDateFrom","visitDateTo"),this.setDates(t.creationDates,"creationTimeFrom","creationTimeTo"),this.loadentities()}copytext(t){navigator.clipboard.writeText(t),this.alertService.info(t)}openChangeStatusModal(t,r,n="md"){this.form={},this.form.trunckStatus=t.trunckStatus,this.form.id=t.id,this.modalService.open(r,{centered:!0,size:n})}changeStatus(){this.ngxLoader.startLoader(this.operationLoader),this.baseService.changeStatus({trunckStatus:this.form.trunckStatus,id:this.form.id}).pipe((0,R.Q)(this.notifier),(0,z.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(r=>{this.loadentities(),this.alertService.success(),this.modalService.dismissAll()},()=>{this.alertService.error()})}mapUrl(t,r){return null===t||null==r?"":`https://www.google.com/maps/dir//${r},${t}/@${r},${t},17z?hl=en-US`}SubmitFinishOrder(){this.ngxLoader.startLoader(this.operationLoader),this.salesInvoicesService.finishOrder(this.form.id).pipe((0,R.Q)(this.notifier),(0,z.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(t=>{this.loadentities(),this.alertService.success(),this.modalService.dismissAll()},()=>{this.alertService.error()})}PrintOrderReceived(t){this.ngxLoader.startLoader("searchLoader"),this.baseService.PrintOrderReceived(t).pipe((0,Y.O)(),(0,Z.c)(100),(0,ee.Z)(),(0,R.Q)(this.notifier),(0,z.j)(()=>this.ngxLoader.stopLoader("searchLoader"))).subscribe(r=>{this.openUrl(r)},r=>{this.alertService.error("general.message."+r)})}openUrl(t){let r=new Blob([t],{type:t.type});var n=URL.createObjectURL(r);window.open(n,"_blank")}onFileChanged(t){if(t.target.files&&t.target.files[0]){let r=t.target.files.length;for(let n=0;n<r;n++){let o=new FileReader;this.form.attachmens.push({attachImage:t.target.files.item(n),type:"file"}),o.onload=p=>{this.images.push({id:0,path:p.target.result,completePath:p.target.result})},o.readAsDataURL(t.target.files[n])}}}removeImage(t,r){this.form.attachmens.splice(r,1),this.images.splice(r,1)}openFinishedModal(t,r,n="md"){this.form={},this.form.orderId=t,this.images=[],this.form.attachmens=[],this.modalService.open(r,{centered:!0,size:n})}finishOrder(){const t=new FormData;t.append("OrderId",this.form.orderId.toString()),this.form.attachmens.forEach(r=>{t.append("Attachmens",r.attachImage)}),this.ngxLoader.startLoader(M.Fq),this.salesInvoicesService.finishOrder(t).subscribe(r=>{this.ngxLoader.stopLoader(M.Fq),this.loadentities(),this.modalService.dismissAll()},r=>{console.log(r),this.ngxLoader.stopLoader(M.Fq)})}static{this.\u0275fac=function(r){return new(r||a)(e.rXU($.nX),e.rXU(F.c$),e.rXU(In),e.rXU(wi),e.rXU(ae.u),e.rXU(k.vh),e.rXU(X.eD),e.rXU(O.Bq),e.rXU(nt.J),e.rXU(qe.V),e.rXU(mn.Q))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["assign-truck-order"]],features:[e.Vt3],decls:31,vars:26,consts:[["changeStatusModal",""],["finishOrderModal",""],["formEntity","ngForm"],["FileInput",""],[1,"card"],["overlayColor","rgba(255,255,255,0.05)","fgsColor","rgba(255,255,255,0)",3,"loaderId"],[1,"card-body","p-0"],[3,"reset","search","exportXlsx","showAdd","showExport","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","number","id","filterValue","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["InputTirmFilter","","type","search","id","agentName","name","agentName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["InputTirmFilter","","type","tel","id","filterValue","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"col-12","col-md-4","mb-2"],["type","text","mwlFlatpickr","","id","isDate","mode","range",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"row"],["class","col-12 col-md-4 my-2",4,"ngFor","ngForOf"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row text-center px-1 py-1 overflow-hidden",4,"ngIf"],[1,"col-12","col-md-4","my-2"],[1,"card","ribbon-box","border","shadow-none","mb-lg-0","material-shadow","card-item"],[1,"card-body","p-1"],[1,"d-flex","justify-content-between","mt-5"],[1,"text-muted"],[1,"ri-police-car-line","text-muted","me-1","align-bottom"],[1,"ri-truck-line","text-muted","me-1","align-bottom"],[1,"d-flex","justify-content-between"],[1,"ri-calendar-2-fill","text-muted","me-1","align-bottom"],[1,"text-muted","ms-2","text-muted","text-decoration-underline"],[1,"ri-order-play-fill","text-muted","me-1","align-bottom"],[1,"text-center"],[1,"ri-user-2-fill","text-muted","me-1","align-bottom"],[1,"ri-shopping-cart-fill","text-muted","me-1","align-bottom"],[1,"d-flex","gap-4","mb-1","justify-content-between"],["class","badge bg-danger-subtle text-danger mx-1","translate","orderManagement.order.noMap",4,"ngIf"],["target","_blank","class","badge bg-success-subtle text-success mx-1","translate","orderManagement.order.viewMap",3,"href",4,"ngIf"],[1,"ri-phone-fill","text-info","me-1","align-bottom"],[1,"cursor-pointer","badge","bg-info-subtle","text-info","fs-6",3,"click"],[1,"ri-clipboard-line"],[1,""],[4,"ngFor","ngForOf"],[1,"row","mt-3","justify-content-between"],["class","col-12 col-md-4",4,"hasPermission"],["translate","orderManagement.order.noMap",1,"badge","bg-danger-subtle","text-danger","mx-1"],["target","_blank","translate","orderManagement.order.viewMap",1,"badge","bg-success-subtle","text-success","mx-1",3,"href"],[1,"ri-map-pin-line"],[1,"card","p-0","m-0","card-item"],[1,"card-body","row","p-0"],[1,"col-12","col-md-8","fs-4"],[1,"col-12","col-md-4"],[1,"badge","bg-primary-subtle","text-primary","mx-2","fs-6"],[1,"badge","bg-danger-subtle","text-danger","fs-6"],[1,"btn","btn-sm","btn-soft-success",3,"click"],[1,"ri-swap-line","label-icon","align-bottom","rounded-pill","fs-16","me-2"],["translate","orderManagement.order.changeTeamStatus"],[1,"btn","btn-sm","btn-soft-info",3,"click"],[1,"ri-printer-fill","label-icon","align-bottom","rounded-pill","fs-16","me-2"],["translate","general.action.print"],[1,"btn","btn-sm","btn-soft-primary",3,"click"],[1,"ri-checkbox-circle-fill","align-bottom"],["translate","orderManagement.order.finishOrder"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","text-center","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["translate","orderManagement.order.changeTeamStatus",1,"fw-bold","fs-4"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"hasProgressBar","fgsType","loaderId"],[3,"ngSubmit"],[1,"mb-3"],["for","trunckStatus","translate","",1,"fw-bold","form-label"],["name","trunckStatus","bindValue","id","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],["type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],["translate","orderManagement.order.finishOrder",1,"fw-bold","fs-4"],[1,"modal-content"],[1,"modal-body","p-1"],[1,"col-12","col-lg-12","d-flex"],[1,"w-75"],["translate","",1,"btn","btn-warning","px-5",3,"click"],[1,"my-3","d-flex"],["class","avatar-lg mx-2 position-relative",4,"ngFor","ngForOf"],["multiple","","value","","type","file","accept","image/png, image/gif, image/jpeg",1,"form-control","d-none",3,"change"],[1,"d-flex","gap-2","justify-content-center","my-2"],["type","submit","id","save","translate","general.action.save",1,"btn","w-sm","btn-danger",3,"click"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light",3,"click"],[1,"avatar-lg","mx-2","position-relative"],[1,"position-absolute","bx","bx-x-circle","text-white",2,"background","red","top","1px","right","-4px","font-size","1rem","border-radius","50%",3,"click"],[1,"avatar-title","bg-light","rounded"],["id","product-img1","alt","",1,"avatar-md","h-auto",3,"src"]],template:function(r,n){if(1&r){const o=e.RV6();e.j41(0,"div",4),e.nrm(1,"ngx-ui-loader",5),e.j41(2,"div",6)(3,"base-filter",7),e.bIt("reset",function(){return e.eBV(o),e.Njj(n.onReset())})("search",function(){return e.eBV(o),e.Njj(n.onSearch())})("exportXlsx",function(){return e.eBV(o),e.Njj(n.onExportXlsx())}),e.qex(4,8),e.j41(5,"div",9)(6,"div",10)(7,"input",11),e.nI1(8,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.pagination.orderCode,c)||(n.pagination.orderCode=c),e.Njj(c)}),e.k0s(),e.nrm(9,"i",12),e.k0s()(),e.j41(10,"div",9)(11,"div",10)(12,"input",13),e.nI1(13,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.pagination.agentName,c)||(n.pagination.agentName=c),e.Njj(c)}),e.k0s(),e.nrm(14,"i",12),e.k0s()(),e.j41(15,"div",9)(16,"div",10)(17,"input",14),e.nI1(18,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.pagination.mobile,c)||(n.pagination.mobile=c),e.Njj(c)}),e.k0s(),e.nrm(19,"i",12),e.k0s()(),e.j41(20,"div",15)(21,"input",16),e.nI1(22,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.searchForm.creationDates,c)||(n.searchForm.creationDates=c),e.Njj(c)}),e.k0s()(),e.bVm(),e.k0s()()(),e.j41(23,"div",17),e.DNE(24,Ai,45,25,"div",18),e.k0s(),e.DNE(25,Ea,2,0,"div",19)(26,Xr,6,8,"div",20)(27,sc,19,10,"ng-template",null,0,e.C5r)(29,Pt,21,4,"ng-template",null,1,e.C5r)}2&r&&(e.R7$(),e.Y8G("loaderId","searchLoader"),e.R7$(2),e.Y8G("showAdd",!1)("showExport",!1)("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(4),e.FS9("placeholder",e.bMT(8,18,"orderManagement.order.orderCode")),e.R50("ngModel",n.pagination.orderCode),e.R7$(5),e.FS9("placeholder",e.bMT(13,20,"orderManagement.order.agentName")),e.R50("ngModel",n.pagination.agentName),e.R7$(5),e.FS9("placeholder",e.bMT(18,22,"orderManagement.order.mobile")),e.R50("ngModel",n.pagination.mobile),e.R7$(4),e.FS9("placeholder",e.bMT(22,24,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.creationDates),e.R7$(3),e.Y8G("ngForOf",n.entities),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems>0))},dependencies:[k.Sq,k.bT,g.qT,g.me,g.Q0,g.BC,g.cb,g.vS,g.cV,O.s5,fe.kL,Le.b,$e.p,Be.g,F.Mm,X.Cv,ve.vr,ke.m,ye.p,k.vh,F.D9],encapsulation:2})}}return a})();var La=x(54384);function ac(a,m){1&a&&(e.j41(0,"div",36),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function $a(a,m){1&a&&(e.j41(0,"div",36),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function oc(a,m){if(1&a){const t=e.RV6();e.j41(0,"button",37),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.addAllItems())}),e.nrm(1,"i",32)(2,"span",38),e.k0s()}if(2&a){e.XpG();const t=e.sdS(7);e.Y8G("disabled",!t.valid)}}function lc(a,m){1&a&&(e.j41(0,"tr",49)(1,"th",50),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",51),e.EFF(4," sales.priceList.itemName "),e.k0s(),e.j41(5,"th",51),e.EFF(6," sales.priceList.unitName "),e.k0s(),e.j41(7,"th",52),e.EFF(8," sales.priceList.itemPrice "),e.k0s(),e.j41(9,"th",52),e.EFF(10," sales.priceList.listPrice "),e.k0s()())}function At(a,m){if(1&a){const t=e.RV6();e.j41(0,"tr",53)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td")(10,"input",54),e.nI1(11,"translate"),e.mxI("ngModelChange",function(n){const o=e.eBV(t).rowIndex,p=e.XpG(2);return e.DH7(p.form[o].price,n)||(p.form[o].price=n),e.Njj(n)}),e.k0s()()()}if(2&a){const t=m.$implicit,r=m.rowIndex,n=e.XpG(2);e.R7$(2),e.JRh(r+1),e.R7$(2),e.JRh(t.itemName),e.R7$(2),e.JRh(t.unitName),e.R7$(2),e.JRh(t.itemPrice),e.R7$(2),e.FS9("placeholder",e.bMT(11,6,"sales.priceList.price")),e.R50("ngModel",n.form[r].price)}}function Pr(a,m){1&a&&(e.j41(0,"div",55),e.EFF(1," general.table.noData "),e.k0s())}function Ar(a,m){if(1&a){const t=e.RV6();e.j41(0,"div",46)(1,"a",56),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.Save())}),e.nrm(2,"i",48),e.j41(3,"span"),e.EFF(4),e.nI1(5,"translate"),e.k0s()()()}2&a&&(e.R7$(4),e.JRh(e.bMT(5,1,"general.action.save")))}function Yr(a,m){if(1&a){const t=e.RV6();e.j41(0,"div",8)(1,"div",9)(2,"div",10),e.nrm(3,"ngx-ui-loader",11),e.j41(4,"div",39)(5,"p-table",40,6),e.DNE(7,lc,11,0,"ng-template",41)(8,At,12,8,"ng-template",42),e.k0s()(),e.DNE(9,Pr,2,0,"div",43),e.j41(10,"div",44),e.DNE(11,Ar,6,3,"div",45),e.j41(12,"div",46)(13,"a",47),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.back())}),e.nrm(14,"i",48),e.j41(15,"span"),e.EFF(16),e.nI1(17,"translate"),e.k0s()()()()()()()}if(2&a){const t=e.XpG();e.R7$(3),e.Y8G("loaderId",t.searchLoader),e.R7$(2),e.Y8G("value",t.form)("rows",null==t.form?null:t.form.length),e.R7$(4),e.Y8G("ngIf",(null==t.form?null:t.form.length)<=0),e.R7$(2),e.Y8G("ngIf",(null==t.form?null:t.form.length)>0),e.R7$(5),e.JRh(e.bMT(17,6,"general.action.back"))}}let ri=(()=>{class a extends Ee.w{constructor(t,r,n,o,p,c,D,ne,re,oe,se){super(t,r,D,p,n,o,c),this.baseService=p,this.service=ne,this.clientGroupsService=re,this.offerOrderService=oe,this.router=se,this.title="sales.priceList.priceListItems",this.submitted=!1,this.pagination={pageNumber:1,pageSize:1e3},this.form=[],this.formMaster={},this.listId=0,this.clientGroups=[],this.discountTypes=[]}ngOnInitMore(){this.listId=this.routerActive.snapshot.paramMap.get("id"),this.listId&&this.GetById(),this.loadentities(),this.getClientGroups(),this.discountTypes=this.offerOrderService.discountTypes,this.discountTypes.forEach(t=>{t.name=this.getTranslationText("sales.salesOrder."+t.name)})}GetById(){this.baseService.getById(this.listId).pipe((0,R.Q)(this.notifier)).subscribe(t=>{t.success?(this.isEditForm=!0,this.formMaster=t.data):this.alertService.error("general.message."+t.message)},t=>{this.alertService.error()})}getClientGroups(){this.clientGroupsService.getDropDown().subscribe({next:t=>{this.clientGroups=t.data}})}addAllItems(){this.ngxLoader.startLoader(M.a7),this.baseService.UpdatePriceListItemUnit(this.listId).pipe((0,R.Q)(this.notifier)).subscribe(t=>{this.LoadSuccess(),this.loadentities(),this.ngxLoader.stopLoader(M.a7)},t=>{this.ngxLoader.stopLoader(M.a7),this.alertService.error(t)})}Save(){let t=[];this.form.forEach(r=>{t.push({id:r.id,UnitId:r.unitId,itemId:r.itemId,priceListMasterId:r.priceListMasterId,price:r.price})}),this.ngxLoader.startLoader(this.searchLoader),this.baseService.EditPriceListItem(t).pipe((0,Y.O)(),(0,Z.c)(this.mainDelay),(0,ee.Z)(),(0,R.Q)(this.notifier),(0,z.j)(()=>this.ngxLoader.stopLoader(this.searchLoader)),(0,En.W)(r=>(0,Dn.$)(r))).subscribe(r=>{r.success?this.submitFunished():this.alertService.error("general.message."+r.message)},r=>{this.alertService.error("general.message."+r)})}loadentities(){this.baseService.GetPriceListWithUnits(this.listId).pipe((0,R.Q)(this.notifier)).subscribe(t=>{this.ngxLoader.stopLoader(M.a7),this.form=t.data,this.LoadSuccess()},t=>{this.ngxLoader.stopLoader(M.a7),this.alertService.error(t)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[]}back(){this.router.navigate(["/sales/Prices-List/"])}OnSubmit(){this.ngxLoader.startLoader(this.operationLoader),!0===this.isEditForm?this.editEntity():this.registerEntity()}submitFunished(){this.alertService.success(),this.ngxLoader.stop(M.a7),this.ngxLoader.stop(M.ZW),this.btnDisabled=!0}registerEntity(){this.ngxLoader.startLoader(this.operationLoader);let t=this.mapRegisterForm(this.formMaster);this.baseService.register(t).pipe((0,Y.O)(),(0,Z.c)(this.mainDelay),(0,ee.Z)(),(0,R.Q)(this.notifier),(0,z.j)(()=>this.ngxLoader.stopLoader(this.operationLoader)),(0,En.W)(r=>(0,Dn.$)(r))).subscribe(r=>{r.success?(this.goList(r.data),this.submitFunished()):this.alertService.error("general.message."+r.message)},r=>{this.alertService.error("general.message."+r)})}editEntity(){this.ngxLoader.startLoader(this.operationLoader);let t=this.mapForm(this.formMaster);this.baseService.edit(t.id,t).pipe((0,Y.O)(),(0,Z.c)(this.mainDelay),(0,ee.Z)(),(0,R.Q)(this.notifier),(0,z.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(r=>{r.success?this.submitFunished():this.alertService.error("general.message."+r.message)},r=>{this.alertService.error("general.message."+r)})}goList(t){this.router.navigateByUrl("/sales/PriceListItems/"+t)}static{this.\u0275fac=function(r){return new(r||a)(e.rXU($.nX),e.rXU(F.c$),e.rXU(ae.u),e.rXU(k.vh),e.rXU(ni),e.rXU(X.eD),e.rXU(O.Bq),e.rXU(La.m),e.rXU(Ia.t),e.rXU(Oe),e.rXU($.Ix))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-priceList-operation"]],features:[e.Vt3],decls:46,vars:19,consts:[["formEntity","ngForm"],["name","ngModel"],["clientGroupId","ngModel"],["discountType","ngModel"],["discount","ngModel"],["notes","ngModel"],["tableMaster",""],[3,"title","breadcrumbItems"],[1,"row"],[1,"card","grid"],[1,"card-body"],["overlayColor","rgba(255,255,255,0.05)","fgsColor","rgba(255,255,255,0)",3,"loaderId"],[3,"submit"],[1,"col-12","col-md-3"],["for","name","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","name","type","text","id","name","required","",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],[1,"col-12","col-md-2"],["translate","",1,"fw-bold","form-label","w-100"],["name","clientGroupId","id","clientGroupId","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","ngModel"],["class","text-danger text-center","translate","",4,"ngIf"],["clearable","false","clearOnBackspace","false","name","discountType","bindValue","id","bindLabel","name",2,"width","100%",3,"ngModelChange","items","ngModel"],[1,"col-12","col-md-1"],["for","discount","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","name","type","number","id","discount",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["for","isActive","translate","",1,"fw-bold","form-label","d-block"],["id","isActive","name","isActive","inputId","isActive",3,"ngModelChange","ngModel"],[1,"col-12","col-md-2","my-1"],["for","notes","translate","",1,"fw-bold","form-label"],["rows","1","InputTirmFilter","","name","notes","type","text","id","notes",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,"text-center"],["type","submit","type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],["type","submit","class","btn btn-success btn-label waves-effect waves-light rounded-pill mx-2",3,"disabled","click",4,"ngIf"],["class","row",4,"ngIf"],["translate","",1,"text-danger","text-center"],["type","submit",1,"btn","btn-success","btn-label","waves-effect","waves-light","rounded-pill","mx-2",3,"click","disabled"],["translate","sales.priceList.UpdateItems"],[1,"table-responsive"],["dataKey","id",3,"value","rows"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],[1,"row","justify-content-center","py-2"],["class","text-center text-danger text-bold fs-6  col-2",4,"ngIf"],[1,"text-center","text-danger","text-bold","fs-6","col-2"],[1,"btn","btn-dark",3,"click"],[1,"ri-check-double-fill","align-bottom"],[1,""],["translate","",2,"width",".5%"],["translate","",2,"width","30%"],["translate","",2,"width","10%"],[1,"fs-5"],["type","number",1,"form-control","text-center",3,"ngModelChange","placeholder","ngModel"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],["href","javascript:void(0);",1,"btn","btn-success",3,"click"]],template:function(r,n){if(1&r){const o=e.RV6();e.nrm(0,"app-breadcrumbs",7),e.nI1(1,"translate"),e.j41(2,"div",8)(3,"div",9)(4,"div",10),e.nrm(5,"ngx-ui-loader",11),e.j41(6,"form",12,0),e.bIt("submit",function(){return e.eBV(o),e.Njj(n.OnSubmit())}),e.j41(8,"div",8)(9,"div",13)(10,"label",14),e.EFF(11,"sales.priceList.name"),e.k0s(),e.j41(12,"input",15,1),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.formMaster.name,c)||(n.formMaster.name=c),e.Njj(c)}),e.k0s(),e.DNE(14,ac,2,0,"div",16),e.k0s(),e.j41(15,"div",17)(16,"label",18),e.EFF(17,"sales.priceList.clientGroupName"),e.k0s(),e.j41(18,"ng-select",19,2),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.formMaster.clientGroupId,c)||(n.formMaster.clientGroupId=c),e.Njj(c)}),e.k0s(),e.DNE(20,$a,2,0,"div",20),e.k0s(),e.j41(21,"div",17)(22,"label",18),e.EFF(23,"sales.priceList.discountType"),e.k0s(),e.j41(24,"ng-select",21,3),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.formMaster.discountType,c)||(n.formMaster.discountType=c),e.Njj(c)}),e.k0s()(),e.j41(26,"div",22)(27,"label",23),e.EFF(28,"sales.priceList.discount"),e.k0s(),e.j41(29,"input",24,4),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.formMaster.discount,c)||(n.formMaster.discount=c),e.Njj(c)}),e.k0s()(),e.j41(31,"div",22)(32,"label",25),e.EFF(33,"stores.storesUnits.isActive"),e.k0s(),e.j41(34,"p-inputSwitch",26),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.formMaster.isActive,c)||(n.formMaster.isActive=c),e.Njj(c)}),e.k0s()(),e.j41(35,"div",27)(36,"label",28),e.EFF(37,"sales.clientCollection.notes"),e.k0s(),e.j41(38,"textarea",29,5),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.formMaster.notes,c)||(n.formMaster.notes=c),e.Njj(c)}),e.k0s()(),e.j41(40,"div",30)(41,"button",31),e.nrm(42,"i",32)(43,"span",33),e.k0s(),e.DNE(44,oc,3,1,"button",34),e.k0s()()()()()(),e.DNE(45,Yr,18,8,"div",35)}if(2&r){const o=e.sdS(7),p=e.sdS(13),c=e.sdS(19);e.FS9("title",e.bMT(1,17,n.title)),e.Y8G("breadcrumbItems",n.breadCrumbItems),e.R7$(5),e.Y8G("loaderId",n.operationLoader),e.R7$(7),e.R50("ngModel",n.formMaster.name),e.R7$(2),e.Y8G("ngIf",p.invalid&&p.touched),e.R7$(4),e.Y8G("items",n.clientGroups)("multiple",!1),e.R50("ngModel",n.formMaster.clientGroupId),e.R7$(2),e.Y8G("ngIf",c.invalid&&c.touched),e.R7$(4),e.Y8G("items",n.discountTypes),e.R50("ngModel",n.formMaster.discountType),e.R7$(5),e.R50("ngModel",n.formMaster.discount),e.R7$(5),e.R50("ngModel",n.formMaster.isActive),e.R7$(4),e.R50("ngModel",n.formMaster.notes),e.R7$(3),e.Y8G("disabled",!o.valid),e.R7$(3),e.Y8G("ngIf",n.listId),e.R7$(),e.Y8G("ngIf",n.listId)}},dependencies:[k.bT,g.qT,g.me,g.Q0,g.BC,g.cb,g.YS,g.vS,g.cV,Cn.m,F.Mm,B.XI,Xe.Ei,Et.HW,X.Cv,ve.vr,ke.m,F.D9],encapsulation:2})}}return a})(),Nn=(()=>{class a extends Ei.E{constructor(t,r,n){super(t,r,n)}static{this.\u0275fac=function(r){return new(r||a)(e.KVO($.Ix),e.KVO(bn),e.KVO(ae.u))}}static{this.\u0275prov=e.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})(),L=(()=>{class a extends Ei.E{constructor(t,r,n){super(t,r,n)}static{this.\u0275fac=function(r){return new(r||a)(e.KVO($.Ix),e.KVO(ni),e.KVO(ae.u))}}static{this.\u0275prov=e.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();const Yi=()=>["salesOrder.viewOrderCount"],Ur=()=>["salesOrder.register"],un=()=>["salesOrderStore.assignTrunk"],dc=()=>["salesOrder.sendApproval"],qr=()=>["salesOrder.sendStore"],Ba=()=>["salesOrder.printPill"],Ae=()=>["salesOrder.edit"],cc=()=>["salesOrder.changeQuantity"],mc=()=>["salesOrder.reopenOrder"],Xa=()=>["salesOrder.printItem"],pc=()=>["salesOrder.cancel"],Qr=a=>[a];function uc(a,m){if(1&a){const t=e.RV6();e.j41(0,"div",38),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.onSelectStatus(-1))}),e.j41(1,"div",39)(2,"div",49)(3,"div",41)(4,"div",50),e.nrm(5,"i",43),e.k0s()(),e.j41(6,"div",44)(7,"h5",45),e.EFF(8),e.k0s(),e.nrm(9,"p",51),e.k0s()()()()}if(2&a){const t=e.XpG(2);e.R7$(2),e.AVh("bg-primary-subtle",null==t.pagination.status),e.R7$(6),e.JRh(t.count.all)}}function gc(a,m){if(1&a){const t=e.RV6();e.j41(0,"div",38),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.onSelectStatus(0))}),e.j41(1,"div",39)(2,"div",40)(3,"div",41)(4,"div",52),e.nrm(5,"i",43),e.k0s()(),e.j41(6,"div",44)(7,"h5",45),e.EFF(8),e.k0s(),e.nrm(9,"p",53),e.k0s()()()()}if(2&a){const t=e.XpG(2);e.R7$(),e.AVh("bg-primary-subtle",0==t.pagination.status),e.R7$(7),e.JRh(t.count.draft)}}function _c(a,m){if(1&a){const t=e.RV6();e.j41(0,"div",38),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.onSelectStatus(5))}),e.j41(1,"div",39)(2,"div",40)(3,"div",41)(4,"div",52),e.nrm(5,"i",43),e.k0s()(),e.j41(6,"div",44)(7,"h5",45),e.EFF(8),e.k0s(),e.nrm(9,"p",54),e.k0s()()()()}if(2&a){const t=e.XpG(2);e.R7$(),e.AVh("bg-primary-subtle",5==t.pagination.status),e.R7$(7),e.JRh(t.count.changeQuantity)}}function Yt(a,m){if(1&a){const t=e.RV6();e.j41(0,"div",38),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.onSelectStatus(20))}),e.j41(1,"div",39)(2,"div",40)(3,"div",41)(4,"div",55),e.nrm(5,"i",43),e.k0s()(),e.j41(6,"div",44)(7,"h5",45),e.EFF(8),e.k0s(),e.nrm(9,"p",56),e.k0s()()()()}if(2&a){const t=e.XpG(2);e.R7$(),e.AVh("bg-primary-subtle",20==t.pagination.status),e.R7$(7),e.JRh(t.count.underReview)}}function He(a,m){if(1&a){const t=e.RV6();e.j41(0,"div",38),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.onSelectStatus(30))}),e.j41(1,"div",39)(2,"div",40)(3,"div",41)(4,"div",57),e.nrm(5,"i",43),e.k0s()(),e.j41(6,"div",44)(7,"h5",45),e.EFF(8),e.k0s(),e.nrm(9,"p",58),e.k0s()()()()}if(2&a){const t=e.XpG(2);e.R7$(),e.AVh("bg-primary-subtle",30==t.pagination.status),e.R7$(7),e.JRh(t.count.repareOrder)}}function Hr(a,m){if(1&a){const t=e.RV6();e.j41(0,"div",38),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.onSelectStatus(50))}),e.j41(1,"div",39)(2,"div",40)(3,"div",41)(4,"div",59),e.nrm(5,"i",43),e.k0s()(),e.j41(6,"div",44)(7,"h5",45),e.EFF(8),e.k0s(),e.nrm(9,"p",60),e.k0s()()()()}if(2&a){const t=e.XpG(2);e.R7$(),e.AVh("bg-primary-subtle",50==t.pagination.status),e.R7$(7),e.JRh(t.count.assign)}}function hc(a,m){if(1&a){const t=e.RV6();e.j41(0,"div",36),e.DNE(1,uc,10,3,"div",37)(2,gc,10,3,"div",37)(3,_c,10,3,"div",37)(4,Yt,10,3,"div",37)(5,He,10,3,"div",37)(6,Hr,10,3,"div",37),e.j41(7,"div",38),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.onSelectStatus(60))}),e.j41(8,"div",39)(9,"div",40)(10,"div",41)(11,"div",42),e.nrm(12,"i",43),e.k0s()(),e.j41(13,"div",44)(14,"h5",45),e.EFF(15),e.k0s(),e.nrm(16,"p",46),e.k0s()()()(),e.j41(17,"div",38),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.onSelectStatus(40))}),e.j41(18,"div",39)(19,"div",40)(20,"div",41)(21,"div",47),e.nrm(22,"i",43),e.k0s()(),e.j41(23,"div",44)(24,"h5",45),e.EFF(25),e.k0s(),e.nrm(26,"p",48),e.k0s()()()()()}if(2&a){const t=e.XpG();e.R7$(),e.Y8G("ngIf",12!=t.user.userType),e.R7$(),e.Y8G("ngIf",1==t.user.userType||9==t.user.userType),e.R7$(),e.Y8G("ngIf",1==t.user.userType||9==t.user.userType),e.R7$(),e.Y8G("ngIf",1==t.user.userType||12==t.user.userType),e.R7$(),e.Y8G("ngIf",1==t.user.userType),e.R7$(),e.Y8G("ngIf",1==t.user.userType),e.R7$(2),e.AVh("bg-primary-subtle",60==t.pagination.status),e.R7$(7),e.JRh(t.count.finished),e.R7$(3),e.AVh("bg-primary-subtle",40==t.pagination.status),e.R7$(7),e.JRh(t.count.cancel)}}function zr(a,m){1&a&&(e.j41(0,"th",77),e.EFF(1," sales.salesOrder.cancelReasonName "),e.k0s())}function fc(a,m){if(1&a&&(e.j41(0,"tr",61),e.nrm(1,"th",62),e.j41(2,"th",63),e.EFF(3,"#"),e.k0s(),e.j41(4,"th",64),e.nrm(5,"i",65),e.EFF(6," orderManagement.order.orderCode "),e.k0s(),e.j41(7,"th",66),e.nrm(8,"i",65),e.EFF(9," orderManagement.order.creation "),e.k0s(),e.j41(10,"th",67),e.EFF(11," orderManagement.order.status "),e.k0s(),e.j41(12,"th",68),e.nrm(13,"i",65),e.EFF(14," orderManagement.order.agentName "),e.k0s(),e.j41(15,"th",69),e.EFF(16," sales.salesOrder.clientLocationName "),e.k0s(),e.j41(17,"th",70),e.EFF(18," sales.salesOrder.salsePerson "),e.k0s(),e.j41(19,"th",71),e.nrm(20,"i",65),e.EFF(21," sales.salesOrder.clientVisitDate "),e.k0s(),e.j41(22,"th",72),e.nrm(23,"i",65),e.EFF(24," sales.salesOrder.totalQuantity "),e.k0s(),e.j41(25,"th",73),e.nrm(26,"i",65),e.EFF(27," sales.salesOrder.totalDiscount "),e.k0s(),e.j41(28,"th",74),e.EFF(29," orderManagement.order.totalTax "),e.k0s(),e.j41(30,"th",75),e.nrm(31,"i",65),e.EFF(32," sales.salesOrder.netPrice "),e.k0s(),e.DNE(33,zr,2,0,"th",76),e.nrm(34,"th",70),e.k0s()),2&a){const t=e.XpG();e.R7$(33),e.Y8G("ngIf",40==t.pagination.status||5==t.pagination.status)}}function bc(a,m){1&a&&e.nrm(0,"span",94)}function si(a,m){if(1&a&&(e.j41(0,"a",95),e.nrm(1,"i",96),e.k0s()),2&a){const t=e.XpG().$implicit,r=e.XpG();e.Y8G("href",r.mapUrl(null==t?null:t.lng,null==t?null:t.lat),e.B4B)}}function Pa(a,m){if(1&a&&(e.j41(0,"td")(1,"span",97),e.EFF(2),e.k0s()()),2&a){const t=e.XpG().$implicit;e.R7$(2),e.SpI("",t.cancelReasonName," ")}}function Aa(a,m){if(1&a&&(e.j41(0,"td")(1,"span",97),e.EFF(2),e.k0s()()),2&a){const t=e.XpG().$implicit;e.R7$(2),e.SpI("",t.changeQuantityMessage," ")}}function vc(a,m){if(1&a){const t=e.RV6();e.j41(0,"button",99),e.nI1(1,"translate"),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2).$implicit,o=e.XpG(),p=e.sdS(61);return e.Njj(o.openShippingModal(n.id,p,"lg"))}),e.nrm(2,"i",100),e.k0s()}2&a&&e.FS9("pTooltip",e.bMT(1,1,"sales.salesOrder.shipping"))}function Cc(a,m){if(1&a&&(e.qex(0),e.DNE(1,vc,3,3,"button",98),e.bVm()),2&a){const t=e.XpG().$implicit;e.R7$(),e.Y8G("ngIf",30==t.offerOrderStatus)}}function Sc(a,m){if(1&a){const t=e.RV6();e.j41(0,"button",102),e.nI1(1,"translate"),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2).$implicit,o=e.XpG(),p=e.sdS(55);return e.Njj(o.openStatusModal(n.id,p,20,"md"))}),e.nrm(2,"i",103),e.k0s()}2&a&&e.FS9("pTooltip",e.bMT(1,1,"general.action.send"))}function jc(a,m){if(1&a&&(e.qex(0),e.DNE(1,Sc,3,3,"button",101),e.bVm()),2&a){const t=e.XpG().$implicit;e.R7$(),e.Y8G("ngIf",0==t.offerOrderStatus||5==t.offerOrderStatus)}}function Ya(a,m){if(1&a){const t=e.RV6();e.j41(0,"button",105),e.nI1(1,"translate"),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2).$implicit,o=e.XpG(),p=e.sdS(55);return e.Njj(o.openStatusModal(n.id,p,30,"md"))}),e.nrm(2,"i",103),e.k0s()}2&a&&e.FS9("pTooltip",e.bMT(1,1,"general.action.send"))}function Ua(a,m){if(1&a&&(e.qex(0),e.DNE(1,Ya,3,3,"button",104),e.bVm()),2&a){const t=e.XpG().$implicit;e.R7$(),e.Y8G("ngIf",20==t.offerOrderStatus)}}function Ic(a,m){1&a&&(e.j41(0,"button",107),e.nI1(1,"translate"),e.nrm(2,"i",108),e.k0s()),2&a&&e.FS9("pTooltip",e.bMT(1,1,"general.action.print"))}function Jr(a,m){if(1&a&&(e.qex(0),e.DNE(1,Ic,3,3,"button",106),e.bVm()),2&a){const t=e.XpG().$implicit;e.R7$(),e.Y8G("ngIf",60==t.offerOrderStatus)}}function qa(a,m){if(1&a){const t=e.RV6();e.j41(0,"li",82),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2).$implicit,o=e.XpG(),p=e.sdS(49);return e.Njj(o.openModal(n.id,p,"xl"))}),e.j41(1,"span",109),e.nrm(2,"i",110)(3,"span",111),e.k0s()()}}function ai(a,m){if(1&a&&(e.qex(0),e.DNE(1,qa,4,0,"li",93),e.bVm()),2&a){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",null==t.pagination.status)}}function Wr(a,m){if(1&a){const t=e.RV6();e.j41(0,"li",82),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2).$implicit,o=e.XpG(),p=e.sdS(49);return e.Njj(o.openModal(n.id,p,"xl"))}),e.j41(1,"span",109),e.nrm(2,"i",110)(3,"span",111),e.k0s()()}}function Qa(a,m){if(1&a){const t=e.RV6();e.j41(0,"li",82),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2).$implicit,o=e.XpG(),p=e.sdS(51);return e.Njj(o.openModal(n.id,p,"xl"))}),e.j41(1,"span",109),e.nrm(2,"i",110)(3,"span",111),e.k0s()()}}function Ha(a,m){if(1&a&&(e.qex(0),e.DNE(1,Wr,4,0,"li",93)(2,Qa,4,0,"li",93),e.bVm()),2&a){const t=e.XpG().$implicit;e.R7$(),e.Y8G("ngIf",0==t.offerOrderStatus),e.R7$(),e.Y8G("ngIf",5==t.offerOrderStatus)}}function Ui(a,m){if(1&a){const t=e.RV6();e.j41(0,"li",82),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2).$implicit,o=e.XpG(),p=e.sdS(57);return e.Njj(o.openModal(n.id,p))}),e.j41(1,"span",109),e.nrm(2,"i",112)(3,"span",113),e.k0s()()}}function za(a,m){if(1&a&&(e.qex(0),e.DNE(1,Ui,4,0,"li",93),e.bVm()),2&a){const t=e.XpG().$implicit;e.R7$(),e.Y8G("ngIf",20==t.offerOrderStatus)}}function wt(a,m){if(1&a){const t=e.RV6();e.j41(0,"li",82),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2).$implicit,o=e.XpG();return e.Njj(o.PrintOrderReceived(n.id))}),e.j41(1,"span",109),e.nrm(2,"i",114)(3,"span",115),e.k0s()()}}function gn(a,m){if(1&a&&(e.qex(0),e.DNE(1,wt,4,0,"li",93),e.bVm()),2&a){const t=e.XpG().$implicit;e.R7$(),e.Y8G("ngIf",50==t.offerOrderStatus)}}function yc(a,m){if(1&a){const t=e.RV6();e.j41(0,"li",82),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2).$implicit,o=e.XpG(),p=e.sdS(59);return e.Njj(o.openModal(n.id,p))}),e.j41(1,"span",109),e.nrm(2,"i",116)(3,"span",117),e.k0s()()}}function Ja(a,m){if(1&a&&(e.qex(0),e.DNE(1,yc,4,0,"li",93),e.bVm()),2&a){const t=e.XpG().$implicit;e.R7$(),e.Y8G("ngIf",t.offerOrderStatus>0)}}function Tc(a,m){if(1&a){const t=e.RV6();e.j41(0,"li",82),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,o=e.XpG(),p=e.sdS(45);return e.Njj(o.openModal(n.id,p))}),e.j41(1,"span",109),e.nrm(2,"i",116)(3,"span",118),e.k0s()()}}function xc(a,m){if(1&a){const t=e.RV6();e.j41(0,"tr",78)(1,"td"),e.nrm(2,"button",79),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td")(6,"bdi",80),e.EFF(7),e.k0s()(),e.j41(8,"td"),e.EFF(9),e.nI1(10,"date"),e.k0s(),e.j41(11,"td")(12,"span"),e.nrm(13,"span",81),e.k0s()(),e.j41(14,"td",82),e.bIt("click",function(){const n=e.eBV(t).$implicit,o=e.XpG(),p=e.sdS(53);return e.Njj(o.openModal(n.clientId,p,"md"))}),e.j41(15,"a",83),e.EFF(16),e.k0s()(),e.j41(17,"td"),e.DNE(18,bc,1,0,"span",84)(19,si,2,1,"a",85),e.k0s(),e.j41(20,"td"),e.EFF(21),e.k0s(),e.j41(22,"td"),e.EFF(23),e.nI1(24,"date"),e.k0s(),e.j41(25,"td"),e.EFF(26),e.k0s(),e.j41(27,"td"),e.EFF(28),e.k0s(),e.j41(29,"td"),e.EFF(30),e.k0s(),e.j41(31,"td"),e.EFF(32),e.k0s(),e.DNE(33,Pa,3,1,"td",86)(34,Aa,3,1,"td",86),e.j41(35,"td"),e.DNE(36,Cc,2,1,"ng-container",87)(37,jc,2,1,"ng-container",87)(38,Ua,2,1,"ng-container",87)(39,Jr,2,1,"ng-container",87),e.j41(40,"span",88)(41,"div",89)(42,"button",90),e.nrm(43,"i",91),e.k0s(),e.j41(44,"ul",92),e.DNE(45,ai,2,1,"ng-container",87)(46,Ha,3,2,"ng-container",87)(47,za,2,1,"ng-container",87)(48,gn,2,1,"ng-container",87)(49,Ja,2,1,"ng-container",87)(50,Tc,4,0,"li",93),e.k0s()()()()()}if(2&a){const t=m.$implicit,r=m.rowIndex,n=m.expanded,o=e.XpG();e.R7$(2),e.Y8G("pRowToggler",t)("ngClass",n?" ri-arrow-down-s-line":"  ri-arrow-up-s-line"),e.R7$(2),e.JRh(r+1),e.R7$(3),e.SpI("#SO#",t.id,""),e.R7$(2),e.SpI(" ",e.i5U(10,30,t.creationTime,"yyyy-MM-dd HH:mm")," "),e.R7$(3),e.ZvI("badge ",o.getStatus(t),""),e.R7$(),e.FS9("translate","sales.salesOrder."+t.offerOrderStatusValue),e.R7$(3),e.SpI(" ",t.clientName," "),e.R7$(2),e.Y8G("ngIf",""==t.lng),e.R7$(),e.Y8G("ngIf",null==t?null:t.lng),e.R7$(2),e.JRh(t.salsePersonName),e.R7$(2),e.SpI(" ",e.i5U(24,33,t.acutalVisitDate,"yyyy-MM-dd HH:mm"),""),e.R7$(3),e.JRh(t.totalQuantity),e.R7$(2),e.JRh(t.totalDiscount),e.R7$(2),e.JRh(t.totalTax),e.R7$(2),e.JRh(t.netPrice),e.R7$(),e.Y8G("ngIf",40==o.pagination.status),e.R7$(),e.Y8G("ngIf",5==o.pagination.status),e.R7$(2),e.Y8G("hasPermission",e.lJ4(36,un)),e.R7$(),e.Y8G("hasPermission",e.lJ4(37,dc)),e.R7$(),e.Y8G("hasPermission",e.lJ4(38,qr)),e.R7$(),e.Y8G("hasPermission",e.lJ4(39,Ba)),e.R7$(6),e.Y8G("hasPermission",e.lJ4(40,Ae)),e.R7$(),e.Y8G("hasPermission",e.lJ4(41,cc)),e.R7$(),e.Y8G("hasPermission",e.lJ4(42,mc)),e.R7$(),e.Y8G("hasPermission",e.lJ4(43,Xa)),e.R7$(),e.Y8G("hasPermission",e.lJ4(44,pc)),e.R7$(),e.Y8G("ngIf",0==t.offerOrderStatus)}}function kc(a,m){if(1&a&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.nI1(11,"translate"),e.k0s(),e.j41(12,"td"),e.EFF(13),e.k0s(),e.j41(14,"td"),e.EFF(15),e.k0s()()),2&a){const t=m.$implicit;e.R7$(2),e.JRh(t.itemName),e.R7$(2),e.JRh(t.unitName),e.R7$(2),e.JRh(t.clientQuantity),e.R7$(2),e.JRh(t.approvedQuantity),e.R7$(2),e.SpI("",e.bMT(11,7,"sales.salesOrder."+t.discountTypeValue)," "),e.R7$(3),e.JRh(t.discount),e.R7$(2),e.JRh(t.price)}}function Rc(a,m){if(1&a&&(e.j41(0,"tr")(1,"td",119)(2,"div")(3,"table",120)(4,"thead")(5,"tr",121),e.nrm(6,"th",122)(7,"th",123)(8,"th",124)(9,"th",125)(10,"th",126)(11,"th",127)(12,"th",128),e.k0s()(),e.j41(13,"tbody"),e.DNE(14,kc,16,9,"tr",129),e.k0s()()()()()),2&a){const t=m.$implicit;e.R7$(14),e.Y8G("ngForOf",t.offerOrderDetails)}}function Mc(a,m){1&a&&(e.j41(0,"div",130),e.EFF(1," general.table.noData "),e.k0s())}function Oc(a,m){if(1&a){const t=e.RV6();e.j41(0,"div",131)(1,"div",132),e.nrm(2,"ngb-pagination-info",133),e.j41(3,"table-length",134),e.bIt("lengthChange",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",135)(5,"ngb-pagination",136),e.bIt("pageChange",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.pagination.pageNumber,n)||(o.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&a){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function Fc(a,m){if(1&a){const t=e.RV6();e.j41(0,"delete-modal",137),e.bIt("deleteConfirm",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.DeleteConfirm())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}}function wc(a,m){if(1&a){const t=e.RV6();e.j41(0,"app-all-orders-details",138),e.bIt("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("orderDetails",t.operationId)}}function Nc(a,m){if(1&a){const t=e.RV6();e.j41(0,"sales-edit-order",139),e.bIt("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("isChangeQuantity",!0)("isDraft",!0)("orderSelected",t.operationId)}}function Gc(a,m){if(1&a){const t=e.RV6();e.j41(0,"sales-edit-order",139),e.bIt("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("isChangeQuantity",!0)("isDraft",!0)("orderSelected",t.operationId)}}function Ec(a,m){if(1&a){const t=e.RV6();e.j41(0,"client-summary",140),e.bIt("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("clientId",t.operationId)}}function Wa(a,m){if(1&a){const t=e.RV6();e.j41(0,"form",141,10),e.bIt("ngSubmit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.SubmitOrder())}),e.nrm(2,"ngx-ui-loader",142),e.j41(3,"div",143)(4,"div",144)(5,"button",145),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(6,"div",146)(7,"div",147),e.nrm(8,"lord-icon",148),e.j41(9,"div",149),e.nrm(10,"h3",150)(11,"p",151),e.k0s()(),e.j41(12,"div",152),e.nrm(13,"button",153),e.j41(14,"button",154),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()()()()()}if(2&a){const t=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",t.loaderOperationShap)("loaderId",t.deleteLoader)}}function Ka(a,m){1&a&&(e.j41(0,"div",161),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function Za(a,m){if(1&a){const t=e.RV6();e.j41(0,"form",141,10),e.bIt("ngSubmit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.RequestChangeQuantity())}),e.nrm(2,"ngx-ui-loader",142),e.j41(3,"div",143)(4,"div",144)(5,"button",145),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(6,"div",146)(7,"div",155)(8,"label",156),e.EFF(9,"sales.salesOrder.changeQuantityMessage"),e.k0s(),e.j41(10,"textarea",157,11),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.form.changeQuantityMessage,n)||(o.form.changeQuantityMessage=n),e.Njj(n)}),e.k0s(),e.DNE(12,Ka,2,0,"div",158),e.k0s(),e.j41(13,"div",152),e.nrm(14,"button",159),e.j41(15,"button",160),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()()()()()}if(2&a){const t=e.sdS(1),r=e.sdS(11),n=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderOperationShap)("loaderId",n.deleteLoader),e.R7$(8),e.R50("ngModel",n.form.changeQuantityMessage),e.R7$(2),e.Y8G("ngIf",r.invalid&&r.touched),e.R7$(2),e.Y8G("disabled",!t.valid)}}function Dc(a,m){if(1&a){const t=e.RV6();e.j41(0,"cancel-sales-model",162),e.bIt("success",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.reload())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("orderId",t.operationId)}}function Vc(a,m){if(1&a){const t=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td")(4,"ng-select",191),e.mxI("ngModelChange",function(n){const o=e.eBV(t).$implicit;return e.DH7(o.unitId,n)||(o.unitId=n),e.Njj(n)}),e.k0s()(),e.j41(5,"td")(6,"input",192),e.bIt("ngModelChange",function(n){const o=e.eBV(t).$index,p=e.XpG(2);return e.Njj(p.quantitySelect(n,o))}),e.mxI("ngModelChange",function(n){const o=e.eBV(t).$implicit;return e.DH7(o.quantity,n)||(o.quantity=n),e.Njj(n)}),e.k0s()()()}if(2&a){const t=m.$implicit,r=m.$index;e.R7$(2),e.SpI(" ",t.itemName," "),e.R7$(2),e.Y8G("name","unitId"+e.eq3(6,Qr,r))("items",t.units),e.R50("ngModel",t.unitId),e.R7$(2),e.Y8G("name","quantity"+e.eq3(8,Qr,r)),e.R50("ngModel",t.quantity)}}function Lc(a,m){if(1&a){const t=e.RV6();e.j41(0,"tr",193),e.nrm(1,"td",194),e.j41(2,"td",195)(3,"table",196)(4,"tbody")(5,"tr"),e.nrm(6,"td",197),e.j41(7,"td",198),e.EFF(8),e.nI1(9,"translate"),e.k0s()(),e.j41(10,"tr"),e.nrm(11,"td",199),e.j41(12,"td",198)(13,"div",200)(14,"ng-select",201),e.bIt("change",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.getTotal())}),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG(2);return e.DH7(o.form.totalAddDiscountType,n)||(o.form.totalAddDiscountType=n),e.Njj(n)}),e.k0s(),e.j41(15,"input",202),e.bIt("change",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.getTotal())}),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG(2);return e.DH7(o.form.totalAddDiscount,n)||(o.form.totalAddDiscount=n),e.Njj(n)}),e.k0s()()()(),e.j41(16,"tr",203),e.nrm(17,"td",204),e.j41(18,"td",198),e.EFF(19),e.nI1(20,"translate"),e.k0s()(),e.j41(21,"tr",205),e.nrm(22,"th",206),e.j41(23,"th",198),e.EFF(24),e.nI1(25,"translate"),e.k0s()()()()()()}if(2&a){const t=e.XpG(2);e.R7$(8),e.Lme("",t.form.total," ",e.bMT(9,9,"orderManagement.order.currancy"),""),e.R7$(6),e.Y8G("items",t.discountTypes),e.R50("ngModel",t.form.totalAddDiscountType),e.R7$(),e.R50("ngModel",t.form.totalAddDiscount),e.R7$(4),e.Lme("",t.form.tax," ",e.bMT(20,11,"orderManagement.order.currancy"),""),e.R7$(5),e.Lme("",t.form.totalNet," ",e.bMT(25,13,"orderManagement.order.currancy"),"")}}function eo(a,m){if(1&a){const t=e.RV6();e.j41(0,"div",163)(1,"div",164)(2,"h4",165),e.nrm(3,"span",166),e.k0s(),e.j41(4,"button",167),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss("Cross click"))}),e.k0s()(),e.j41(5,"div",146),e.nrm(6,"ngx-ui-loader",142),e.j41(7,"form",168,10),e.bIt("submit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.updateTruck())}),e.j41(9,"div",13)(10,"div",169)(11,"label",170),e.EFF(12,"sales.salesOrder.acutalDeliveryDate"),e.k0s(),e.j41(13,"input",171),e.bIt("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.dateChangeModal(n))}),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.form.acutalVisitDate,n)||(o.form.acutalVisitDate=n),e.Njj(n)}),e.k0s()(),e.j41(14,"div",169),e.nrm(15,"label",172),e.j41(16,"ng-select",173),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.form.clientLocationId,n)||(o.form.clientLocationId=n),e.Njj(n)}),e.k0s()(),e.j41(17,"div",174)(18,"label",170),e.EFF(19,"sales.salesOrder.truncks"),e.k0s(),e.j41(20,"ng-select",175),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.form.shippingTruckId,n)||(o.form.shippingTruckId=n),e.Njj(n)}),e.k0s()()(),e.j41(21,"div",176)(22,"div",39)(23,"div",177)(24,"div",178),e.nrm(25,"h5",179),e.k0s()(),e.j41(26,"div",28)(27,"div",180)(28,"table",181)(29,"thead",182)(30,"tr"),e.nrm(31,"th",183)(32,"th",184)(33,"th",185),e.k0s()(),e.j41(34,"tbody"),e.Z7z(35,Vc,7,10,"tr",null,e.Vm6),e.DNE(37,Lc,26,15,"tr",186),e.k0s()()()()()(),e.j41(38,"div",187)(39,"button",188),e.nrm(40,"i",189)(41,"span",190),e.k0s()()()()()}if(2&a){const t=e.sdS(8),r=e.XpG();e.R7$(6),e.Y8G("hasProgressBar",!1)("fgsType",r.loaderOperationShap)("loaderId",r.operationLoader),e.R7$(7),e.R50("ngModel",r.form.acutalVisitDate),e.Y8G("altInput",!0)("enableTime",!0)("convertModelValue",!0)("dateFormat","d-m-Y H:i"),e.R7$(3),e.Y8G("disabled",!0)("items",r.locations),e.R50("ngModel",r.form.clientLocationId),e.R7$(4),e.Y8G("items",r.truncks),e.R50("ngModel",r.form.shippingTruckId),e.R7$(15),e.Dyx(r.form.details),e.R7$(2),e.Y8G("ngIf",!1),e.R7$(2),e.Y8G("disabled",!t.valid)}}let $c=(()=>{class a extends Ee.w{constructor(t,r,n,o,p,c,D,ne,re,oe,se,W,q,Q,V){super(t,r,D,n,o,p,c),this.baseService=n,this.authDaamService=ne,this.teamService=re,this.employeeService=oe,this.regionService=se,this.cityService=W,this.excelService=q,this.router=Q,this.orderReceivedService=V,this.title="sales.salesOrder.title",this.titleOperation="sales.salesOrder.titleOperation",this.keySelected="",this.searchForm={},this.isResolveList=!0,this.employeeGroups=[],this.activeindex="2",this.active=2,this.clientSelected=0,this.status=[],this.countLoad=2,this.isOrderEdit=!1,this.orderSelected={},this.users=[],this.statusCount={},this.salesPersons=[],this.regions=[],this.cities=[],this.count={},this.truncks=[],this.locations=[],this.discountTypes=[],this.user=JSON.parse(localStorage.getItem("user")),this.setDates=(E,ce,le)=>{if(E?.from||E?.to){const at=E.to||E.from;this.pagination[ce]=this.datePipe.transform(E.from||E.to,"yyyy-MM-ddT00:00:00"),this.pagination[le]=this.datePipe.transform(at,"yyyy-MM-ddT23:59:59.999")}else this.pagination[ce]=null,this.pagination[le]=null},this.configRoute(),this.GetSalesPersons(),this.GetRegions(),this.GetCities(),this.GetOfferOrderCount()}GetOfferOrderCount(){this.baseService.GetOfferOrderCount().subscribe(t=>{this.count=t.data})}GetRegions(){this.regionService.getDropDown().subscribe(t=>{this.regions=t.data},t=>{console.log(t)})}GetCities(){this.cityService.getDropDown().subscribe(t=>{this.cities=t.data},t=>{console.log(t)})}GetSalesPersons(){this.employeeService.GetAllByType(9).subscribe(t=>{this.salesPersons=t.data},t=>{console.log(t)})}ngOnInitMore(){this.discountTypes=this.baseService.discountTypes,this.discountTypes.forEach(t=>{t.name=this.getTranslationText("sales.salesOrder."+t.name)})}mapForm(t){return{...t}}onUpdateIsActive(t){this.baseService.updateActive(t).pipe((0,R.Q)(this.notifier)).subscribe(r=>{r?this.alertService.success():this.alertService.error("general.message."+r)},r=>{this.alertService.error()})}mapRegisterForm(t){let r={...t};return r.employeeCode=0,r}onSearch(){let t={...this.searchForm};this.ngxLoader.startLoader("allLoader"),this.setDates(t.dates,"visitDateFrom","visitDateTo"),this.setDates(t.creationDates,"creationTimeFrom","creationTimeTo"),this.loadentities()}LoadSuccess(){this.ngxLoader.stopLoader("allLoader")}onReset(){this.form={},this.searchForm={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems},this.loadentities()}configRoute(){this.routerActive.data.pipe((0,R.Q)(this.notifier)).subscribe(t=>{this.entities=t.data,this.pagination.totalItems=t.data?.totalItems},()=>{this.alertService.error()})}mapExcel(){let t=[];return this.entities.forEach(r=>{t.push({Code:r.id,CreatorName:r.creatorName,creationTime:r.creationTime,clientName:r.clientName,Status:this.getTranslationText("sales.salesOrder."+r.offerOrderStatusValue),salse_Person:r.salsePersonName,"Delivery.Date":r.acutalVisitDate,"T.Quantity":r.totalQuantity," T.Discount":r.totalDiscount,Tax:r.totalTax,Net:r.netPrice,Reason:r.cancelReasonName})}),t}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,this.translateService.instant(this.title),[])}onNavChange(t){1===t.nextId&&(this.activeindex="1"),3===t.nextId&&(this.activeindex="3")}getStatus(t){return 10==t.offerOrderStatus||5==t.offerOrderStatus?"bg-warning":20==t.offerOrderStatus?"bg-secondary ":30==t.offerOrderStatus?"bg-info":60==t.offerOrderStatus?"bg-success":40==t.offerOrderStatus?"bg-danger":50==t.offerOrderStatus?"bg-info":"bg-warning"}checkEdit(t){return!t.isCancel&&!t.isFinish}openModalClient(t,r,n="xl"){this.clientSelected=t.orderCode,this.orderSelected=t,this.isOrderEdit=!1,this.modalService.open(r,{centered:!0,size:n})}copytext(t){navigator.clipboard.writeText(t),this.alertService.info(t)}goNew(){this.router.navigateByUrl("/sales/new")}onSelectStatus(t){-1===t?(this.pagination.status=null,this.pagination.statusList=[]):30===t?(this.pagination.status=null,this.pagination.statusList=[30,32]):(this.pagination.status=t,this.pagination.statusList=[]),this.onSearch()}openStatusModal(t,r,n,o="md"){this.isEditForm=!1,this.form={},this.form={id:t,status:n},this.modalService.open(r,{centered:!0,size:o})}SubmitOrder(){this.ngxLoader.startLoader(M.Fq),this.baseService.changStatus({id:this.form.id,status:this.form.status}).pipe((0,Y.O)(),(0,Z.c)(this.mainDelay),(0,ee.Z)(),(0,R.Q)(this.notifier),(0,z.j)(()=>this.ngxLoader.stopLoader(M.Fq))).subscribe({next:r=>{r.success?(this.modalService.dismissAll(),this.reload(),this.alertService.success()):this.alertService.error("general.message."+r.message)}})}cancelOrder(){this.ngxLoader.startLoader(M.Fq),console.log(this.operationId),this.baseService.changStatus({id:this.operationId,status:40}).pipe((0,Y.O)(),(0,Z.c)(this.mainDelay),(0,ee.Z)(),(0,R.Q)(this.notifier),(0,z.j)(()=>this.ngxLoader.stopLoader(M.Fq))).subscribe({next:r=>{this.modalService.dismissAll(),this.reload(),this.alertService.success()}})}RequestChangeQuantity(){this.ngxLoader.startLoader(M.Fq),console.log(this.operationId),this.baseService.RequestChangeQuantity({id:this.operationId,changeQuantityMessage:this.form.changeQuantityMessage}).pipe((0,Y.O)(),(0,Z.c)(this.mainDelay),(0,ee.Z)(),(0,R.Q)(this.notifier),(0,z.j)(()=>this.ngxLoader.stopLoader(M.Fq))).subscribe({next:r=>{this.modalService.dismissAll(),this.reload(),this.alertService.success()}})}reload(){this.modalService.dismissAll(),this.GetOfferOrderCount(),this.loadentities()}formatDate(t){if(!t)return"";const r=new Date(t);return r.getDate().toString().padStart(2,"0")+"-"+(r.getMonth()+1).toString().padStart(2,"0")+"-"+r.getFullYear()+" "+r.getHours().toString().padStart(2,"0")+":"+r.getMinutes().toString().padStart(2,"0")}openShippingModal(t,r,n="md"){this.baseService.GetTrucks({id:t,acutalVisitDate:null}).subscribe(p=>{p.success?(this.form=p.data.order,this.getTotal(),this.form.clientVisitDate=this.formatDate(this.form.clientVisitDate),this.form.acutalVisitDate=this.formatDate(this.form.acutalVisitDate),this.truncks=p.data.truncks,this.locations=p.data.locations,this.modalService.open(r,{centered:!0,size:n})):this.alertService.error("general.message."+p.message)},p=>{this.alertService.error("general.message."+p)})}getTotal(){let t=0,r=0,n=0;this.form.details.forEach(o=>{o.discount<0&&(o.discoun=0);let p=o.quantity*o.price,c=0;1===o.discountType?c=o.discount:2===o.discountType&&(c=p*o.discount/100),r=+c;let D=p-c;o.net=D,t=+D}),1===this.form.totalAddDiscountType?n=this.form.totalAddDiscount:2===this.form.totalAddDiscountType&&(n=t*this.form.totalAddDiscount/100),this.form.total=t,this.form.totalAddDiscount=this.form.totalAddDiscount,this.form.tax=15*this.form.total/100,this.form.totalNet=this.form.total-n+this.form.tax}updateTruck(){this.form.acutalVisitDate=new Date(this.convertToISO(this.form.acutalVisitDate));let t={shippingTruckId:this.form.shippingTruckId,clientLocationId:this.form.clientLocationId,offerOrderMasterId:this.form.id,Notes:this.form.notes,terms:this.form.terms,deliveryDate:this.datePipe.transform(this.form.acutalVisitDate,"yyyy-MM-ddTHH:mm:00.000"),details:this.form.details.map(r=>({id:0,itemId:r.itemId,itemName:r.itemName,quantity:r.quantity,unitId:r.unitId,price:r.price,discount:r.discount,discountType:r.discountType,clientQuantity:r.clientQuantity,approvedQuantity:r.approvedQuantity}))};this.ngxLoader.startLoader(this.operationLoader),this.orderReceivedService.register(t).pipe((0,Y.O)(),(0,Z.c)(this.mainDelay),(0,ee.Z)(),(0,R.Q)(this.notifier),(0,z.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(r=>{r.success?this.reload():this.alertService.error("general.message."+r.message)},r=>{this.alertService.error("general.message."+r)})}convertToISO(t){if(t instanceof Date)return t.toISOString();if("string"==typeof t){const[r,n,o,p,c]=t.split(/[-\s:]/);return`${o}-${n}-${r}T${p}:${c}:00`}}dateChangeModal(t){t=new Date(t);let r={id:this.form.id,acutalVisitDate:this.datePipe.transform(t,"yyyy-MM-ddT00:00:00.000")};this.baseService.GetTrucks(r).subscribe(n=>{n.success?this.truncks=n.data.truncks:this.alertService.error("general.message."+n.message)},n=>{this.alertService.error("general.message."+n)})}quantitySelect(t,r){t&&(t<=0&&(t=1),this.form.details[r].quantity=parseInt(t),this.form.details[r].net=this.form.details[r].price*this.form.details[r].quantity,this.discountSelect(this.form.details[r].discount,r),this.getTotal())}discountSelect(t,r,n=1){if(t){(t=parseInt(t))<=0&&(this.form.details[r].discount=0),1==n&&(this.form.details[r].discount=t);let o=0;1==this.form.details[r].discountType?o=this.form.details[r].discount:(o=this.form.details[r].price*this.form.details[r].quantity*this.form.details[r].discount/100,o=+o.toFixed(2)),this.form.details[r].net=this.form.details[r].price*this.form.details[r].quantity-o,this.form.details[r].net=this.form.details[r].net.toFixed(2),this.getTotal()}}PrintOrderReceived(t){this.ngxLoader.startLoader("allLoader"),this.orderReceivedService.PrintOrderReceived(t).pipe((0,Y.O)(),(0,ee.Z)(),(0,R.Q)(this.notifier),(0,z.j)(()=>this.ngxLoader.stopLoader("allLoader"))).subscribe(r=>{this.openUrl(r)},r=>{this.alertService.error("general.message."+r)})}openUrl(t){let r=new Blob([t],{type:t.type});var n=URL.createObjectURL(r);window.open(n,"_blank")}mapUrl(t,r){return null===t||null==r?"":`https://www.google.com/maps/dir//${r},${t}/@${r},${t},17z?hl=en-US`}static{this.\u0275fac=function(r){return new(r||a)(e.rXU($.nX),e.rXU(F.c$),e.rXU(Oe),e.rXU(ae.u),e.rXU(k.vh),e.rXU(X.eD),e.rXU(O.Bq),e.rXU(nt.J),e.rXU(zt.n),e.rXU(tt.O),e.rXU(ct.S),e.rXU(Ve.h),e.rXU(qe.V),e.rXU($.Ix),e.rXU(In))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-sales-order"]],features:[e.Vt3],decls:62,vars:53,consts:[["tableMaster",""],["deleteModal",""],["orderViewModel",""],["SalesEditModel",""],["SalesChangeModel",""],["ClientInfo",""],["StatusOrderModal",""],["SubmitChangeQuantityModal",""],["cancelModal",""],["SubmitOrderModal",""],["formEntity","ngForm"],["changeQuantityMessage","ngModel"],["class","row justify-content-center",4,"hasPermission"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],["overlayColor","rgba(255,255,255,0.05)","fgsColor","rgba(255,255,255,0)",3,"loaderId"],[3,"addNew","reset","search","exportXlsx","addPermission","showAdd","showExport","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","number","id","id","name","id",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["type","text","mwlFlatpickr","","id","isDate","mode","range","altFormat","d/m/Y",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],["InputTirmFilter","","type","search","id","clientName","name","clientName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["name","name","bindValue","id","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],["name","regionId","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","placeholder","ngModel"],["name","cityId","bindValue","code","bindLabel","name",3,"ngModelChange","items","multiple","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,"row","justify-content-center"],["class","col-sm-12 col-custom-7 cursor-pointer ",3,"click",4,"ngIf"],[1,"col-sm-12","col-custom-7","cursor-pointer",3,"click"],[1,"card"],[1,"card-body","d-flex","gap-3","align-items-center"],[1,"avatar-sm"],[1,"avatar-title","border","bg-success","border-opacity-25","rounded-2","fs-17"],[1,"ri-shopping-cart-2-fill"],[1,"flex-grow-1"],[1,"fs-15"],["translate","sales.salesOrder.completeOrder",1,"mb-0","text-muted"],[1,"avatar-title","border","bg-danger","border-opacity-25","rounded-2","fs-17"],["translate","sales.salesOrder.cancelOrder",1,"mb-0","text-muted"],[1,"card-body","bg-primary-subtle","d-flex","gap-3","align-items-center"],[1,"avatar-title","border","border-opacity-25","rounded-2","fs-17"],["translate","general.table.all",1,"mb-0","text-muted"],[1,"avatar-title","border","bg-warning","border-opacity-25","rounded-2","fs-17"],["translate","sales.salesOrder.draft",1,"mb-0","text-muted"],["translate","sales.salesOrder.reopen",1,"mb-0","text-muted"],[1,"avatar-title","bg-secondary","border","border-opacity-25","rounded-2","fs-17"],["translate","sales.salesOrder.approveMangerSM",1,"mb-0","text-muted"],[1,"avatar-title","bg-info","border","border-opacity-25","rounded-2","fs-17"],["translate","sales.salesOrder.storeRepeare",1,"mb-0","text-muted"],[1,"avatar-title","border","bg-info","border-opacity-25","rounded-2","fs-17"],["translate","sales.salesOrder.orderShipping",1,"mb-0","text-muted"],[1,""],[2,"width",".2%"],["translate","",2,"width",".5%"],["pSortableColumn","id","translate","",2,"width","6%"],[1,"ri-expand-up-down-line"],["pSortableColumn","creationTime","translate","",2,"width","10%"],["pSortableColumn","status","translate","",2,"width","6%"],["pSortableColumn","clientId","translate","",2,"width","10%"],["translate","",2,"width","3%"],["translate","",2,"width","8%"],["pSortableColumn","clientVisitDate","translate","",2,"width","10%"],["pSortableColumn","totalQuantity","translate","",2,"width","8%"],["pSortableColumn","totalDiscount","translate","",2,"width","8%"],["translate","",2,"width","6%"],["pSortableColumn","netPrice","translate","",2,"width","8%"],["style","width:10%","translate","",4,"ngIf"],["translate","",2,"width","10%"],[1,"fs-5"],["type","button","pRipple","",1,"border-0","p-button-text","p-button-rounded","p-button-plain",3,"pRowToggler","ngClass"],[1,"code-pointer"],[3,"translate"],[3,"click"],["href","javascript:void(0)",1,"link-primary","link-offset-2","text-decoration-underline","link-underline-opacity-25","link-underline-opacity-100-hover"],["class","badge bg-danger-subtle text-danger mx-1","translate","orderManagement.order.noMap",4,"ngIf"],["target","_blank","class","badge bg-success-subtle text-success mx-1","translate","orderManagement.order.viewMap",3,"href",4,"ngIf"],[4,"ngIf"],[4,"hasPermission"],[1,"d-inline-block"],[1,"dropdown-custom","d-inline-block"],["type","button",1,"btn","dropbtn","btn-soft-secondary","btn-sm","dropdown-custom","arrow-none"],[1,"ri-more-fill"],[1,"dropdown-menu","dropdown-menu-end","dropdown-content",2,"left","0"],[3,"click",4,"ngIf"],["translate","orderManagement.order.noMap",1,"badge","bg-danger-subtle","text-danger","mx-1"],["target","_blank","translate","orderManagement.order.viewMap",1,"badge","bg-success-subtle","text-success","mx-1",3,"href"],[1,"ri-map-pin-line"],[1,"badge","bg-danger-subtle","text-danger"],["class","btn btn-sm btn-primary edit-list mx-1","tooltipPosition","top",3,"pTooltip","click",4,"ngIf"],["tooltipPosition","top",1,"btn","btn-sm","btn-primary","edit-list","mx-1",3,"click","pTooltip"],[1,"ri-truck-line","align-bottom"],["class","btn btn-sm btn-warning edit-list mx-1","tooltipPosition","top",3,"pTooltip","click",4,"ngIf"],["tooltipPosition","top",1,"btn","btn-sm","btn-warning","edit-list","mx-1",3,"click","pTooltip"],[1,"ri-send-plane-fill","align-bottom"],["class","btn btn-sm btn-success edit-list mx-1","tooltipPosition","top",3,"pTooltip","click",4,"ngIf"],["tooltipPosition","top",1,"btn","btn-sm","btn-success","edit-list","mx-1",3,"click","pTooltip"],["class","btn btn-sm btn-success edit-list mx-1","tooltipPosition","top",3,"pTooltip",4,"ngIf"],["tooltipPosition","top",1,"btn","btn-sm","btn-success","edit-list","mx-1",3,"pTooltip"],[1,"ri-printer-cloud-fill","align-bottom"],[1,"dropdown-item"],[1,"text-success","ri-pencil-fill","align-bottom","me-2"],["translate","general.action.edit"],[1,"text-primary","ri-check-double-fill","align-bottom","me-2"],["translate","sales.salesOrder.backToSales"],[1,"text-primary","ri-printer-line","align-bottom","me-2"],["translate","sales.salesOrder.printItem"],[1,"text-danger","ri-close-fill","align-bottom","me-2"],["translate","general.action.cancel"],["translate","general.action.delete"],["colspan","17"],["dataKey","id"],[1,"bg-light"],["translate","sales.salesOrder.itemName",2,"width","10%"],["translate","sales.salesOrder.unit",2,"width","6%"],["translate","sales.salesOrder.clientQuantity",2,"width","8%"],["translate","sales.salesOrder.approvedQuantity",2,"width","8%"],["translate","sales.salesOrder.discountType",2,"width","5%"],["translate","sales.salesOrder.discount",2,"width","5%"],["translate","sales.salesOrder.price",2,"width","5%"],[4,"ngFor","ngForOf"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[3,"deleteConfirm","dismiss"],[3,"dismiss","orderDetails"],[3,"dismiss","isChangeQuantity","isDraft","orderSelected"],[3,"dismiss","clientId"],[3,"ngSubmit"],[3,"hasProgressBar","fgsType","loaderId"],[1,"modal-content"],[1,"modal-header"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","btn-close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mt-2","text-center"],["src","https://cdn.lordicon.com/gdfrsvpt.json","stroke","bold","state","hover-oscillate","trigger","loop","colors","primary:#f7b84b,secondary:#f06548",2,"width","130px","height","130px"],[1,"pt-2","fs-15","mx-4","mx-sm-5"],["translate","orderManagement.order.AreYouSureMessage"],[1,"text-muted","mx-4","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","submit","id","save","translate","general.action.send",1,"btn","w-sm","btn-danger","fs-4"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light","fs-4",3,"click"],[1,"mb-2"],["for","changeQuantityMessage","translate","",1,"required","text-bold","form-label"],["rows","5","InputTirmFilter","","name","changeQuantityMessage","type","text","id","changeQuantityMessage",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],["t","","type","submit","id","save","translate","general.action.save",1,"btn","w-sm","btn-danger",3,"disabled"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light",3,"click"],["translate","",1,"text-danger","text-center"],[3,"success","dismiss","orderId"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["translate","sales.salesOrder.truckUpdate"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[3,"submit"],[1,"col-12","col-md-3"],["for","name","translate","",1,"required","fw-bold","form-label"],["name","acutalVisitDate","type","text","mwlFlatpickr","","altFormat","d-m-Y H:i","required","",1,"form-control","flatpickr-input",3,"ngModelChange","ngModel","altInput","enableTime","convertModelValue","dateFormat"],["for","name","translate","orderManagement.order.savedAddress",1,"required","fw-bold","form-label"],["name","clientLocationId","bindValue","id","bindLabel","name","required","",2,"width","100%",3,"ngModelChange","disabled","items","ngModel"],[1,"col-12","col-md-6"],["name","shippingTruckId","bindValue","id","bindLabel","name","required","",2,"width","100%",3,"ngModelChange","items","ngModel"],[1,"row","justify-content-center","my-0"],[1,"card-header","p-0"],[1,"d-flex","align-items-center"],["translate","sales.salesRequests.items",1,"card-title","flex-grow-1","mb-0"],[1,"table-responsive","table-card",2,"overflow","visible"],[1,"table","table-nowrap","align-middle","table-borderless","mb-0"],[1,"table-light","text-muted","p-1"],["translate","sales.salesRequests.itemName",2,"width","20%"],["translate","sales.salesRequests.unit",2,"width","25%"],["translate","sales.salesRequests.quantity",2,"width","25%"],["class","border-top border-top-dashed",4,"ngIf"],[1,"d-flex","justify-content-center","m-0"],["type","submit","type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],["clearable","false","clearOnBackspace","false","bindValue","id","bindLabel","name",2,"width","100%",3,"ngModelChange","name","items","ngModel"],["type","text","id","quantity",1,"form-control","fs-6",3,"ngModelChange","name","ngModel"],[1,"border-top","border-top-dashed"],["colspan","3"],["colspan","4",1,"fw-medium","p-0"],[1,"table","table-borderless","mb-0"],["translate","sales.salesOrder.total",1,"m-0","p-0"],[1,"text-end","m-0","p-0"],["translate","sales.salesOrder.extraDiscount",1,"m-0","p-0"],[1,"input-group","mx-4",2,"width","80%"],["clearable","false","clearOnBackspace","false","name","totalAddDiscountType","bindValue","id","bindLabel","name",3,"change","ngModelChange","items","ngModel"],["InputTirmFilter","","name","totalAddDiscount","type","text","id","totalAddDiscount",1,"form-control","fs-6",2,"width","30%",3,"change","ngModelChange","ngModel"],[1,"m-0","p-0"],["translate","sales.salesOrder.tax",1,"m-0","p-0"],[1,"border-top","border-top-dashed","m-0","p-0"],["scope","row","translate","sales.salesOrder.net",1,"m-0","p-0"]],template:function(r,n){if(1&r){const o=e.RV6();e.DNE(0,hc,27,12,"div",12),e.j41(1,"div",13)(2,"div",14)(3,"div",15),e.nrm(4,"ngx-ui-loader",16),e.j41(5,"base-filter",17),e.bIt("addNew",function(){return e.eBV(o),e.Njj(n.goNew())})("reset",function(){return e.eBV(o),e.Njj(n.onReset())})("search",function(){return e.eBV(o),e.Njj(n.onSearch())})("exportXlsx",function(){return e.eBV(o),e.Njj(n.onExportXlsx())}),e.qex(6,18),e.j41(7,"div",19)(8,"div",20)(9,"input",21),e.nI1(10,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.pagination.id,c)||(n.pagination.id=c),e.Njj(c)}),e.k0s(),e.nrm(11,"i",22),e.k0s()(),e.j41(12,"div",19)(13,"input",23),e.nI1(14,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.searchForm.creationDates,c)||(n.searchForm.creationDates=c),e.Njj(c)}),e.k0s()(),e.j41(15,"div",19)(16,"div",20)(17,"input",24),e.nI1(18,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.pagination.clientName,c)||(n.pagination.clientName=c),e.Njj(c)}),e.k0s(),e.nrm(19,"i",22),e.k0s()(),e.j41(20,"div",19)(21,"div",20)(22,"ng-select",25),e.nI1(23,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.pagination.salesPersonId,c)||(n.pagination.salesPersonId=c),e.Njj(c)}),e.k0s()()(),e.j41(24,"div",19)(25,"input",23),e.nI1(26,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.searchForm.dates,c)||(n.searchForm.dates=c),e.Njj(c)}),e.k0s()(),e.j41(27,"div",19)(28,"div",20)(29,"ng-select",26),e.nI1(30,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.pagination.regionId,c)||(n.pagination.regionId=c),e.Njj(c)}),e.k0s()()(),e.j41(31,"div",19)(32,"div",20)(33,"ng-select",27),e.nI1(34,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.pagination.cityId,c)||(n.pagination.cityId=c),e.Njj(c)}),e.k0s()()(),e.bVm(),e.k0s(),e.j41(35,"div",28)(36,"div",29)(37,"p-table",30,0),e.bIt("onLazyLoad",function(c){return e.eBV(o),e.Njj(n.tableChange(c))})("selectionChange",function(c){return e.eBV(o),e.Njj(n.onSelectionChange(c))}),e.DNE(39,fc,35,1,"ng-template",31)(40,xc,51,45,"ng-template",32)(41,Rc,15,1,"ng-template",33),e.k0s()(),e.DNE(42,Mc,2,0,"div",34)(43,Oc,6,8,"div",35),e.k0s()()()(),e.DNE(44,Fc,1,0,"ng-template",null,1,e.C5r)(46,wc,1,1,"ng-template",null,2,e.C5r)(48,Nc,1,3,"ng-template",null,3,e.C5r)(50,Gc,1,3,"ng-template",null,4,e.C5r)(52,Ec,1,1,"ng-template",null,5,e.C5r)(54,Wa,15,3,"ng-template",null,6,e.C5r)(56,Za,16,6,"ng-template",null,7,e.C5r)(58,Dc,1,1,"ng-template",null,8,e.C5r)(60,eo,42,15,"ng-template",null,9,e.C5r)}2&r&&(e.Y8G("hasPermission",e.lJ4(51,Yi)),e.R7$(4),e.Y8G("loaderId","allLoader"),e.R7$(),e.Y8G("addPermission",e.lJ4(52,Ur))("showAdd",!0)("showExport",!0)("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(4),e.FS9("placeholder",e.bMT(10,37,"orderManagement.order.orderCode")),e.R50("ngModel",n.pagination.id),e.R7$(4),e.FS9("placeholder",e.bMT(14,39,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.creationDates),e.R7$(4),e.FS9("placeholder",e.bMT(18,41,"orderManagement.order.agentName")),e.R50("ngModel",n.pagination.clientName),e.R7$(5),e.FS9("placeholder",e.bMT(23,43,"sales.salesOrder.salsePerson")),e.Y8G("items",n.salesPersons)("multiple",!1),e.R50("ngModel",n.pagination.salesPersonId),e.R7$(3),e.FS9("placeholder",e.bMT(26,45,"sales.salesOrder.clientVisitDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.dates),e.R7$(4),e.FS9("placeholder",e.bMT(30,47,"client.client.regionName")),e.Y8G("items",n.regions)("multiple",!1),e.R50("ngModel",n.pagination.regionId),e.R7$(4),e.FS9("placeholder",e.bMT(34,49,"client.client.cityName")),e.Y8G("items",n.cities)("multiple",!1),e.R50("ngModel",n.pagination.cityId),e.R7$(4),e.Y8G("value",n.entities)("rows",n.pagination.pageSize)("lazy",!0)("totalRecords",n.pagination.totalItems),e.R7$(5),e.Y8G("ngIf",n.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems>0))},dependencies:[k.YU,k.Sq,k.bT,g.qT,g.me,g.Q0,g.BC,g.cb,g.YS,g.vS,g.cV,O.s5,fe.kL,Le.b,Ke.w,$e.p,Be.g,Jt,F.Mm,B.XI,Xe.Ei,B.Tg,B.FP,X.Cv,ve.vr,ke.m,ye.p,et.m,je,jn,k.vh,F.D9],encapsulation:2})}}return a})();const Bc=()=>["salesOrder.register"],Xc=()=>["salesOrderStore.assignTrunk"],Pc=()=>["salesOrderStore.prepare"],to=a=>[a];function Ac(a,m){1&a&&(e.j41(0,"tr",49),e.nrm(1,"th",50),e.j41(2,"th",51),e.EFF(3,"#"),e.k0s(),e.j41(4,"th",52),e.nrm(5,"i",53),e.EFF(6," orderManagement.order.orderCode "),e.k0s(),e.j41(7,"th",54),e.nrm(8,"i",53),e.EFF(9," orderManagement.order.creation "),e.k0s(),e.j41(10,"th",55),e.EFF(11," orderManagement.order.status "),e.k0s(),e.j41(12,"th",56),e.nrm(13,"i",53),e.EFF(14," orderManagement.order.agentName "),e.k0s(),e.j41(15,"th",57),e.EFF(16," sales.salesOrder.clientLocationName "),e.k0s(),e.j41(17,"th",58),e.EFF(18," sales.salesOrder.salsePerson "),e.k0s(),e.j41(19,"th",59),e.nrm(20,"i",53),e.EFF(21," sales.salesOrder.clientVisitDate "),e.k0s(),e.j41(22,"th",60),e.nrm(23,"i",53),e.EFF(24," sales.salesOrder.totalQuantity "),e.k0s(),e.j41(25,"th",61),e.nrm(26,"i",53),e.EFF(27," sales.salesOrder.netPrice "),e.k0s(),e.nrm(28,"th",58),e.k0s())}function ft(a,m){1&a&&e.nrm(0,"span",71)}function Yc(a,m){if(1&a&&(e.j41(0,"a",72),e.nrm(1,"i",73),e.k0s()),2&a){const t=e.XpG().$implicit,r=e.XpG();e.Y8G("href",r.mapUrl(null==t?null:t.lng,null==t?null:t.lat),e.B4B)}}function Uc(a,m){if(1&a){const t=e.RV6();e.j41(0,"button",75),e.nI1(1,"translate"),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2).$implicit,o=e.XpG(),p=e.sdS(91);return e.Njj(o.openShippingModal(n.id,p,"lg"))}),e.nrm(2,"i",76),e.k0s()}2&a&&e.FS9("pTooltip",e.bMT(1,1,"sales.salesOrderStore.trunkAssign"))}function qc(a,m){if(1&a&&(e.qex(0),e.DNE(1,Uc,3,3,"button",74),e.bVm()),2&a){const t=e.XpG().$implicit;e.R7$(),e.Y8G("ngIf",32==t.offerOrderStatus)}}function no(a,m){if(1&a){const t=e.RV6();e.j41(0,"button",78),e.nI1(1,"translate"),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2).$implicit,o=e.XpG(),p=e.sdS(85);return e.Njj(o.openStatusModal(n.id,p,32,"md"))}),e.nrm(2,"i",79),e.k0s()}2&a&&e.FS9("pTooltip",e.bMT(1,1,"general.action.send"))}function Qc(a,m){if(1&a&&(e.qex(0),e.DNE(1,no,3,3,"button",77),e.bVm()),2&a){const t=e.XpG().$implicit;e.R7$(),e.Y8G("ngIf",30==t.offerOrderStatus)}}function Hc(a,m){if(1&a){const t=e.RV6();e.j41(0,"tr",62)(1,"td"),e.nrm(2,"button",63),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td")(6,"bdi",64),e.EFF(7),e.k0s()(),e.j41(8,"td"),e.EFF(9),e.nI1(10,"date"),e.k0s(),e.j41(11,"td")(12,"span"),e.nrm(13,"span",65),e.k0s()(),e.j41(14,"td",66),e.bIt("click",function(){const n=e.eBV(t).$implicit,o=e.XpG(),p=e.sdS(83);return e.Njj(o.openModal(n.clientId,p,"md"))}),e.j41(15,"a",67),e.EFF(16),e.k0s()(),e.j41(17,"td"),e.DNE(18,ft,1,0,"span",68)(19,Yc,2,1,"a",69),e.k0s(),e.j41(20,"td"),e.EFF(21),e.k0s(),e.j41(22,"td"),e.EFF(23),e.nI1(24,"date"),e.k0s(),e.j41(25,"td"),e.EFF(26),e.k0s(),e.j41(27,"td"),e.EFF(28),e.k0s(),e.j41(29,"td"),e.DNE(30,qc,2,1,"ng-container",70)(31,Qc,2,1,"ng-container",70),e.k0s()()}if(2&a){const t=m.$implicit,r=m.rowIndex,n=m.expanded,o=e.XpG();e.R7$(2),e.Y8G("pRowToggler",t)("ngClass",n?" ri-arrow-down-s-line":"  ri-arrow-up-s-line"),e.R7$(2),e.JRh(r+1),e.R7$(3),e.SpI("#SO#",t.id,""),e.R7$(2),e.SpI(" ",e.i5U(10,18,t.creationTime,"yyyy-MM-dd HH:mm")," "),e.R7$(3),e.ZvI("badge ",o.getStatus(t),""),e.R7$(),e.FS9("translate","sales.salesOrder."+t.offerOrderStatusValue),e.R7$(3),e.SpI(" ",t.clientName," "),e.R7$(2),e.Y8G("ngIf",""==t.lng),e.R7$(),e.Y8G("ngIf",null==t?null:t.lng),e.R7$(2),e.JRh(t.salsePersonName),e.R7$(2),e.SpI(" ",e.i5U(24,21,t.acutalVisitDate,"yyyy-MM-dd HH:mm"),""),e.R7$(3),e.JRh(t.totalQuantity),e.R7$(2),e.JRh(t.netPrice),e.R7$(2),e.Y8G("hasPermission",e.lJ4(24,Xc)),e.R7$(),e.Y8G("hasPermission",e.lJ4(25,Pc))}}function zc(a,m){if(1&a&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s()()),2&a){const t=m.$implicit;e.R7$(2),e.JRh(t.itemName),e.R7$(2),e.JRh(t.unitName),e.R7$(2),e.JRh(t.approvedQuantity),e.R7$(2),e.JRh(t.price)}}function Jc(a,m){if(1&a&&(e.j41(0,"tr")(1,"td",80)(2,"div")(3,"table",81)(4,"thead")(5,"tr",82),e.nrm(6,"th",83)(7,"th",84)(8,"th",85)(9,"th",86),e.k0s()(),e.j41(10,"tbody"),e.DNE(11,zc,9,4,"tr",87),e.k0s()()()()()),2&a){const t=m.$implicit;e.R7$(11),e.Y8G("ngForOf",t.offerOrderDetails)}}function Kr(a,m){1&a&&(e.j41(0,"div",88),e.EFF(1," general.table.noData "),e.k0s())}function Wc(a,m){if(1&a){const t=e.RV6();e.j41(0,"div",89)(1,"div",90),e.nrm(2,"ngb-pagination-info",91),e.j41(3,"table-length",92),e.bIt("lengthChange",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",93)(5,"ngb-pagination",94),e.bIt("pageChange",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.pagination.pageNumber,n)||(o.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&a){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function Kc(a,m){if(1&a){const t=e.RV6();e.j41(0,"delete-modal",95),e.bIt("deleteConfirm",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.DeleteConfirm())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}}function Zc(a,m){if(1&a){const t=e.RV6();e.j41(0,"app-all-orders-details",96),e.bIt("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("orderDetails",t.operationId)}}function em(a,m){if(1&a){const t=e.RV6();e.j41(0,"sales-edit-order",97),e.bIt("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("isChangeQuantity",!0)("isDraft",!0)("orderSelected",t.operationId)}}function tm(a,m){if(1&a){const t=e.RV6();e.j41(0,"sales-edit-order",97),e.bIt("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("isChangeQuantity",!0)("isDraft",!0)("orderSelected",t.operationId)}}function nm(a,m){if(1&a){const t=e.RV6();e.j41(0,"client-summary",98),e.bIt("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("clientId",t.operationId)}}function im(a,m){if(1&a){const t=e.RV6();e.j41(0,"form",99,10),e.bIt("ngSubmit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.SubmitOrder())}),e.nrm(2,"ngx-ui-loader",100),e.j41(3,"div",101)(4,"div",102)(5,"button",103),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(6,"div",104)(7,"div",105),e.nrm(8,"lord-icon",106),e.j41(9,"div",107),e.nrm(10,"h3",108)(11,"p",109),e.k0s()(),e.j41(12,"div",110),e.nrm(13,"button",111),e.j41(14,"button",112),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()()()()()}if(2&a){const t=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",t.loaderOperationShap)("loaderId",t.deleteLoader)}}function rm(a,m){1&a&&(e.j41(0,"div",119),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function sm(a,m){if(1&a){const t=e.RV6();e.j41(0,"form",99,10),e.bIt("ngSubmit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.RequestChangeQuantity())}),e.nrm(2,"ngx-ui-loader",100),e.j41(3,"div",101)(4,"div",102)(5,"button",103),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(6,"div",104)(7,"div",113)(8,"label",114),e.EFF(9,"sales.salesOrder.changeQuantityMessage"),e.k0s(),e.j41(10,"textarea",115,11),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.form.changeQuantityMessage,n)||(o.form.changeQuantityMessage=n),e.Njj(n)}),e.k0s(),e.DNE(12,rm,2,0,"div",116),e.k0s(),e.j41(13,"div",110),e.nrm(14,"button",117),e.j41(15,"button",118),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()()()()()}if(2&a){const t=e.sdS(1),r=e.sdS(11),n=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderOperationShap)("loaderId",n.deleteLoader),e.R7$(8),e.R50("ngModel",n.form.changeQuantityMessage),e.R7$(2),e.Y8G("ngIf",r.invalid&&r.touched),e.R7$(2),e.Y8G("disabled",!t.valid)}}function am(a,m){if(1&a){const t=e.RV6();e.j41(0,"cancel-sales-model",120),e.bIt("success",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.reload())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}if(2&a){const t=e.XpG();e.Y8G("orderId",t.operationId)}}function om(a,m){if(1&a){const t=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td")(4,"ng-select",149),e.mxI("ngModelChange",function(n){const o=e.eBV(t).$implicit;return e.DH7(o.unitId,n)||(o.unitId=n),e.Njj(n)}),e.k0s()(),e.j41(5,"td")(6,"input",150),e.bIt("ngModelChange",function(n){const o=e.eBV(t).$index,p=e.XpG(2);return e.Njj(p.quantitySelect(n,o))}),e.mxI("ngModelChange",function(n){const o=e.eBV(t).$implicit;return e.DH7(o.quantity,n)||(o.quantity=n),e.Njj(n)}),e.k0s()()()}if(2&a){const t=m.$implicit,r=m.$index;e.R7$(2),e.SpI(" ",t.itemName," "),e.R7$(2),e.Y8G("name","unitId"+e.eq3(6,to,r))("items",t.units),e.R50("ngModel",t.unitId),e.R7$(2),e.Y8G("name","quantity"+e.eq3(8,to,r)),e.R50("ngModel",t.quantity)}}function lm(a,m){if(1&a){const t=e.RV6();e.j41(0,"tr",151),e.nrm(1,"td",152),e.j41(2,"td",153)(3,"table",154)(4,"tbody")(5,"tr"),e.nrm(6,"td",155),e.j41(7,"td",156),e.EFF(8),e.nI1(9,"translate"),e.k0s()(),e.j41(10,"tr"),e.nrm(11,"td",157),e.j41(12,"td",156)(13,"div",158)(14,"ng-select",159),e.bIt("change",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.getTotal())}),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG(2);return e.DH7(o.form.totalAddDiscountType,n)||(o.form.totalAddDiscountType=n),e.Njj(n)}),e.k0s(),e.j41(15,"input",160),e.bIt("change",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.getTotal())}),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG(2);return e.DH7(o.form.totalAddDiscount,n)||(o.form.totalAddDiscount=n),e.Njj(n)}),e.k0s()()()(),e.j41(16,"tr",161),e.nrm(17,"td",162),e.j41(18,"td",156),e.EFF(19),e.nI1(20,"translate"),e.k0s()(),e.j41(21,"tr",163),e.nrm(22,"th",164),e.j41(23,"th",156),e.EFF(24),e.nI1(25,"translate"),e.k0s()()()()()()}if(2&a){const t=e.XpG(2);e.R7$(8),e.Lme("",t.form.total," ",e.bMT(9,9,"orderManagement.order.currancy"),""),e.R7$(6),e.Y8G("items",t.discountTypes),e.R50("ngModel",t.form.totalAddDiscountType),e.R7$(),e.R50("ngModel",t.form.totalAddDiscount),e.R7$(4),e.Lme("",t.form.tax," ",e.bMT(20,11,"orderManagement.order.currancy"),""),e.R7$(5),e.Lme("",t.form.totalNet," ",e.bMT(25,13,"orderManagement.order.currancy"),"")}}function dm(a,m){if(1&a){const t=e.RV6();e.j41(0,"div",121)(1,"div",122)(2,"h4",123),e.nrm(3,"span",124),e.k0s(),e.j41(4,"button",125),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss("Cross click"))}),e.k0s()(),e.j41(5,"div",104),e.nrm(6,"ngx-ui-loader",100),e.j41(7,"form",126,10),e.bIt("submit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.updateTruck())}),e.j41(9,"div",26)(10,"div",127)(11,"label",128),e.EFF(12,"sales.salesOrder.acutalDeliveryDate"),e.k0s(),e.j41(13,"input",129),e.bIt("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.dateChangeModal(n))}),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.form.acutalVisitDate,n)||(o.form.acutalVisitDate=n),e.Njj(n)}),e.k0s()(),e.j41(14,"div",127),e.nrm(15,"label",130),e.j41(16,"ng-select",131),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.form.clientLocationId,n)||(o.form.clientLocationId=n),e.Njj(n)}),e.k0s()(),e.j41(17,"div",132)(18,"label",128),e.EFF(19,"sales.salesOrder.truncks"),e.k0s(),e.j41(20,"ng-select",133),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.form.shippingTruckId,n)||(o.form.shippingTruckId=n),e.Njj(n)}),e.k0s()()(),e.j41(21,"div",134)(22,"div",14)(23,"div",135)(24,"div",136),e.nrm(25,"h5",137),e.k0s()(),e.j41(26,"div",41)(27,"div",138)(28,"table",139)(29,"thead",140)(30,"tr"),e.nrm(31,"th",141)(32,"th",142)(33,"th",143),e.k0s()(),e.j41(34,"tbody"),e.Z7z(35,om,7,10,"tr",null,e.Vm6),e.DNE(37,lm,26,15,"tr",144),e.k0s()()()()()(),e.j41(38,"div",145)(39,"button",146),e.nrm(40,"i",147)(41,"span",148),e.k0s()()()()()}if(2&a){const t=e.sdS(8),r=e.XpG();e.R7$(6),e.Y8G("hasProgressBar",!1)("fgsType",r.loaderOperationShap)("loaderId",r.operationLoader),e.R7$(7),e.R50("ngModel",r.form.acutalVisitDate),e.Y8G("altInput",!0)("enableTime",!0)("convertModelValue",!0)("dateFormat","d-m-Y H:i"),e.R7$(3),e.Y8G("disabled",!0)("items",r.locations),e.R50("ngModel",r.form.clientLocationId),e.R7$(4),e.Y8G("items",r.truncks),e.R50("ngModel",r.form.shippingTruckId),e.R7$(15),e.Dyx(r.form.details),e.R7$(2),e.Y8G("ngIf",!1),e.R7$(2),e.Y8G("disabled",!t.valid)}}const mm=[{path:"sales-orders",component:Rd,canActivate:[It.g],data:{permission:["salesOrder.view"]}},{path:"sales-order-store",component:(()=>{class a extends Ee.w{constructor(t,r,n,o,p,c,D,ne,re,oe,se,W,q,Q,V){super(t,r,D,n,o,p,c),this.baseService=n,this.authDaamService=ne,this.teamService=re,this.employeeService=oe,this.regionService=se,this.cityService=W,this.excelService=q,this.router=Q,this.orderReceivedService=V,this.title="sales.salesOrderStore.title",this.titleOperation="sales.salesOrderStore.titleOperation",this.keySelected="",this.searchForm={},this.isResolveList=!0,this.employeeGroups=[],this.activeindex="2",this.active=2,this.clientSelected=0,this.status=[],this.countLoad=2,this.isOrderEdit=!1,this.orderSelected={},this.users=[],this.statusCount={},this.salesPersons=[],this.regions=[],this.cities=[],this.count={},this.truncks=[],this.locations=[],this.discountTypes=[],this.pagination={pageNumber:1,pageSize:10,status:30},this.setDates=(E,ce,le)=>{if(E?.from||E?.to){const at=E.to||E.from;this.pagination[ce]=this.datePipe.transform(E.from||E.to,"yyyy-MM-ddT00:00:00"),this.pagination[le]=this.datePipe.transform(at,"yyyy-MM-ddT23:59:59.999")}else this.pagination[ce]=null,this.pagination[le]=null},this.configRoute(),this.GetSalesPersons(),this.GetRegions(),this.GetCities(),this.GetOfferOrderCount()}GetOfferOrderCount(){this.baseService.GetOfferOrderStoreCount().subscribe(t=>{this.count=t.data})}GetRegions(){this.regionService.getDropDown().subscribe(t=>{this.regions=t.data},t=>{console.log(t)})}GetCities(){this.cityService.getDropDown().subscribe(t=>{this.cities=t.data},t=>{console.log(t)})}GetSalesPersons(){this.employeeService.GetAllByType(9).subscribe(t=>{this.salesPersons=t.data},t=>{console.log(t)})}ngOnInitMore(){this.discountTypes=this.baseService.discountTypes,this.discountTypes.forEach(t=>{t.name=this.getTranslationText("sales.salesOrder."+t.name)})}mapForm(t){return{...t}}onUpdateIsActive(t){this.baseService.updateActive(t).pipe((0,R.Q)(this.notifier)).subscribe(r=>{r?this.alertService.success():this.alertService.error("general.message."+r)},r=>{this.alertService.error()})}mapRegisterForm(t){let r={...t};return r.employeeCode=0,r}onSearch(){let t={...this.searchForm};this.ngxLoader.startLoader("allLoader"),this.setDates(t.dates,"visitDateFrom","visitDateTo"),this.setDates(t.creationDates,"creationTimeFrom","creationTimeTo"),this.loadentities()}LoadSuccess(){this.ngxLoader.stopLoader("allLoader")}onReset(){this.form={},this.searchForm={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems},this.loadentities()}configRoute(){this.routerActive.data.pipe((0,R.Q)(this.notifier)).subscribe(t=>{this.entities=t.data,this.pagination.totalItems=t.data?.totalItems},()=>{this.alertService.error()})}mapExcel(){let t=[];return this.entities.forEach(r=>{t.push({Code:r.id,CreatorName:r.creatorName,creationTime:r.creationTime,clientName:r.clientName,Status:this.getTranslationText("sales.salesOrder."+r.offerOrderStatusValue),salse_Person:r.salsePersonName,"Delivery.Date":r.acutalVisitDate,"T.Quantity":r.totalQuantity," T.Discount":r.totalDiscount,Tax:r.totalTax,Net:r.netPrice,Reason:r.cancelReasonName})}),t}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,this.translateService.instant(this.title),[])}onNavChange(t){1===t.nextId&&(this.activeindex="1"),3===t.nextId&&(this.activeindex="3")}getStatus(t){return 10==t.offerOrderStatus||5==t.offerOrderStatus?"bg-warning":20==t.offerOrderStatus?"bg-secondary ":30==t.offerOrderStatus?"bg-info":60==t.offerOrderStatus?"bg-success":40==t.offerOrderStatus?"bg-danger":50==t.offerOrderStatus?"bg-info":"bg-warning"}checkEdit(t){return!t.isCancel&&!t.isFinish}openModalClient(t,r,n="xl"){this.clientSelected=t.orderCode,this.orderSelected=t,this.isOrderEdit=!1,this.modalService.open(r,{centered:!0,size:n})}copytext(t){navigator.clipboard.writeText(t),this.alertService.info(t)}goNew(){this.router.navigateByUrl("/sales/new")}onSelectStatus(t){this.pagination.status=-1==t?null:t,this.onSearch()}openStatusModal(t,r,n,o="md"){this.isEditForm=!1,this.form={},this.form={id:t,status:n},this.modalService.open(r,{centered:!0,size:o})}SubmitOrder(){this.ngxLoader.startLoader(M.Fq),this.baseService.changStatus({id:this.form.id,status:this.form.status}).pipe((0,Y.O)(),(0,Z.c)(this.mainDelay),(0,ee.Z)(),(0,R.Q)(this.notifier),(0,z.j)(()=>this.ngxLoader.stopLoader(M.Fq))).subscribe({next:r=>{this.modalService.dismissAll(),this.reload(),this.alertService.success()}})}cancelOrder(){this.ngxLoader.startLoader(M.Fq),console.log(this.operationId),this.baseService.changStatus({id:this.operationId,status:40}).pipe((0,Y.O)(),(0,Z.c)(this.mainDelay),(0,ee.Z)(),(0,R.Q)(this.notifier),(0,z.j)(()=>this.ngxLoader.stopLoader(M.Fq))).subscribe({next:r=>{this.modalService.dismissAll(),this.reload(),this.alertService.success()}})}RequestChangeQuantity(){this.ngxLoader.startLoader(M.Fq),console.log(this.operationId),this.baseService.RequestChangeQuantity({id:this.operationId,changeQuantityMessage:this.form.changeQuantityMessage}).pipe((0,Y.O)(),(0,Z.c)(this.mainDelay),(0,ee.Z)(),(0,R.Q)(this.notifier),(0,z.j)(()=>this.ngxLoader.stopLoader(M.Fq))).subscribe({next:r=>{this.modalService.dismissAll(),this.reload(),this.alertService.success()}})}reload(){this.modalService.dismissAll(),this.GetOfferOrderCount(),this.loadentities()}formatDate(t){if(!t)return"";const r=new Date(t);return r.getDate().toString().padStart(2,"0")+"-"+(r.getMonth()+1).toString().padStart(2,"0")+"-"+r.getFullYear()+" "+r.getHours().toString().padStart(2,"0")+":"+r.getMinutes().toString().padStart(2,"0")}openShippingModal(t,r,n="md"){this.baseService.GetTrucks({id:t,acutalVisitDate:null}).subscribe(p=>{p.success?(this.form=p.data.order,this.getTotal(),this.form.clientVisitDate=this.formatDate(this.form.clientVisitDate),this.form.acutalVisitDate=this.formatDate(this.form.acutalVisitDate),this.truncks=p.data.truncks,this.locations=p.data.locations,this.modalService.open(r,{centered:!0,size:n})):this.alertService.error("general.message."+p.message)},p=>{this.alertService.error("general.message."+p)})}getTotal(){let t=0,r=0,n=0;this.form.details.forEach(o=>{o.discount<0&&(o.discoun=0);let p=o.quantity*o.price,c=0;1===o.discountType?c=o.discount:2===o.discountType&&(c=p*o.discount/100),r=+c;let D=p-c;o.net=D,t=+D}),1===this.form.totalAddDiscountType?n=this.form.totalAddDiscount:2===this.form.totalAddDiscountType&&(n=t*this.form.totalAddDiscount/100),this.form.total=t,this.form.totalAddDiscount=this.form.totalAddDiscount,this.form.tax=15*this.form.total/100,this.form.totalNet=this.form.total-n+this.form.tax}updateTruck(){this.form.acutalVisitDate=new Date(this.convertToISO(this.form.acutalVisitDate));let t={shippingTruckId:this.form.shippingTruckId,clientLocationId:this.form.clientLocationId,offerOrderMasterId:this.form.id,Notes:this.form.notes,terms:this.form.terms,deliveryDate:this.datePipe.transform(this.form.acutalVisitDate,"yyyy-MM-ddTHH:mm:00.000"),details:this.form.details.map(r=>({id:0,itemId:r.itemId,itemName:r.itemName,quantity:r.quantity,unitId:r.unitId,price:r.price,discount:r.discount,discountType:r.discountType,clientQuantity:r.clientQuantity,approvedQuantity:r.approvedQuantity}))};this.ngxLoader.startLoader(this.operationLoader),this.orderReceivedService.register(t).pipe((0,Y.O)(),(0,Z.c)(this.mainDelay),(0,ee.Z)(),(0,R.Q)(this.notifier),(0,z.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(r=>{r.success?this.reload():this.alertService.error("general.message."+r.message)},r=>{this.alertService.error("general.message."+r)})}convertToISO(t){if(t instanceof Date)return t.toISOString();if("string"==typeof t){const[r,n,o,p,c]=t.split(/[-\s:]/);return`${o}-${n}-${r}T${p}:${c}:00`}}dateChangeModal(t){t=new Date(t);let r={id:this.form.id,acutalVisitDate:this.datePipe.transform(t,"yyyy-MM-ddT00:00:00.000")};this.baseService.GetTrucks(r).subscribe(n=>{n.success?this.truncks=n.data.truncks:this.alertService.error("general.message."+n.message)},n=>{this.alertService.error("general.message."+n)})}quantitySelect(t,r){t&&(t<=0&&(t=1),this.form.details[r].quantity=parseInt(t),this.form.details[r].net=this.form.details[r].price*this.form.details[r].quantity,this.discountSelect(this.form.details[r].discount,r),this.getTotal())}discountSelect(t,r,n=1){if(t){(t=parseInt(t))<=0&&(this.form.details[r].discount=0),1==n&&(this.form.details[r].discount=t);let o=0;1==this.form.details[r].discountType?o=this.form.details[r].discount:(o=this.form.details[r].price*this.form.details[r].quantity*this.form.details[r].discount/100,o=+o.toFixed(2)),this.form.details[r].net=this.form.details[r].price*this.form.details[r].quantity-o,this.form.details[r].net=this.form.details[r].net.toFixed(2),this.getTotal()}}PrintOrderReceived(t){this.ngxLoader.startLoader("allLoader"),this.orderReceivedService.PrintOrderReceived(t).pipe((0,Y.O)(),(0,ee.Z)(),(0,R.Q)(this.notifier),(0,z.j)(()=>this.ngxLoader.stopLoader("allLoader"))).subscribe(r=>{this.openUrl(r)},r=>{this.alertService.error("general.message."+r)})}openUrl(t){let r=new Blob([t],{type:t.type});var n=URL.createObjectURL(r);window.open(n,"_blank")}mapUrl(t,r){return null===t||null==r?"":`https://www.google.com/maps/dir//${r},${t}/@${r},${t},17z?hl=en-US`}static{this.\u0275fac=function(r){return new(r||a)(e.rXU($.nX),e.rXU(F.c$),e.rXU(Oe),e.rXU(ae.u),e.rXU(k.vh),e.rXU(X.eD),e.rXU(O.Bq),e.rXU(nt.J),e.rXU(zt.n),e.rXU(tt.O),e.rXU(ct.S),e.rXU(Ve.h),e.rXU(qe.V),e.rXU($.Ix),e.rXU(In))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-sales-order-store"]],features:[e.Vt3],decls:92,vars:60,consts:[["tableMaster",""],["deleteModal",""],["orderViewModel",""],["SalesEditModel",""],["SalesChangeModel",""],["ClientInfo",""],["StatusOrderModal",""],["SubmitChangeQuantityModal",""],["cancelModal",""],["SubmitOrderModal",""],["formEntity","ngForm"],["changeQuantityMessage","ngModel"],[1,"row","justify-content-center"],[1,"col-sm-12","col-md-3","cursor-pointer",3,"click"],[1,"card"],[1,"card-body","d-flex","gap-3","align-items-center"],[1,"avatar-sm"],[1,"avatar-title","bg-warning","border","border-opacity-25","rounded-2","fs-17"],[1,"ri-shopping-cart-2-fill"],[1,"flex-grow-1"],[1,"fs-15"],["translate","sales.salesOrderStore.deliveries",1,"mb-0","text-muted"],[1,"avatar-title","border","bg-success","border-opacity-25","rounded-2","fs-17"],["translate","sales.salesOrderStore.ready",1,"mb-0","text-muted"],[1,"avatar-title","border","bg-danger","border-opacity-25","rounded-2","fs-17"],["translate","sales.salesOrderStore.return",1,"mb-0","text-muted"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],["overlayColor","rgba(255,255,255,0.05)","fgsColor","rgba(255,255,255,0)",3,"loaderId"],[3,"addNew","reset","search","exportXlsx","addPermission","showAdd","showExport","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","number","id","id","name","id",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["type","text","mwlFlatpickr","","id","isDate","mode","range","altFormat","d/m/Y",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],["InputTirmFilter","","type","search","id","clientName","name","clientName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["name","name","bindValue","id","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],["name","regionId","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","placeholder","ngModel"],["name","cityId","bindValue","code","bindLabel","name",3,"ngModelChange","items","multiple","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],[2,"width",".2%"],["translate","",2,"width",".5%"],["pSortableColumn","id","translate","",2,"width","6%"],[1,"ri-expand-up-down-line"],["pSortableColumn","creationTime","translate","",2,"width","10%"],["pSortableColumn","status","translate","",2,"width","6%"],["pSortableColumn","clientId","translate","",2,"width","10%"],["translate","",2,"width","3%"],["translate","",2,"width","8%"],["pSortableColumn","clientVisitDate","translate","",2,"width","10%"],["pSortableColumn","totalQuantity","translate","",2,"width","8%"],["pSortableColumn","netPrice","translate","",2,"width","8%"],[1,"fs-5"],["type","button","pRipple","",1,"border-0","p-button-text","p-button-rounded","p-button-plain",3,"pRowToggler","ngClass"],[1,"code-pointer"],[3,"translate"],[3,"click"],["href","javascript:void(0)",1,"link-primary","link-offset-2","text-decoration-underline","link-underline-opacity-25","link-underline-opacity-100-hover"],["class","badge bg-danger-subtle text-danger mx-1","translate","orderManagement.order.noMap",4,"ngIf"],["target","_blank","class","badge bg-success-subtle text-success mx-1","translate","orderManagement.order.viewMap",3,"href",4,"ngIf"],[4,"hasPermission"],["translate","orderManagement.order.noMap",1,"badge","bg-danger-subtle","text-danger","mx-1"],["target","_blank","translate","orderManagement.order.viewMap",1,"badge","bg-success-subtle","text-success","mx-1",3,"href"],[1,"ri-map-pin-line"],["class","btn btn-sm btn-primary edit-list mx-1","tooltipPosition","top",3,"pTooltip","click",4,"ngIf"],["tooltipPosition","top",1,"btn","btn-sm","btn-primary","edit-list","mx-1",3,"click","pTooltip"],[1,"ri-truck-line","align-bottom"],["class","btn btn-sm btn-warning edit-list mx-1","tooltipPosition","top",3,"pTooltip","click",4,"ngIf"],["tooltipPosition","top",1,"btn","btn-sm","btn-warning","edit-list","mx-1",3,"click","pTooltip"],[1,"ri-send-plane-fill","align-bottom"],["colspan","17"],["dataKey","id"],[1,"bg-light"],["translate","sales.salesOrder.itemName",2,"width","10%"],["translate","sales.salesOrder.unit",2,"width","6%"],["translate","sales.salesOrder.approvedQuantity",2,"width","8%"],["translate","sales.salesOrder.price",2,"width","5%"],[4,"ngFor","ngForOf"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[3,"deleteConfirm","dismiss"],[3,"dismiss","orderDetails"],[3,"dismiss","isChangeQuantity","isDraft","orderSelected"],[3,"dismiss","clientId"],[3,"ngSubmit"],[3,"hasProgressBar","fgsType","loaderId"],[1,"modal-content"],[1,"modal-header"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","btn-close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mt-2","text-center"],["src","https://cdn.lordicon.com/gdfrsvpt.json","stroke","bold","state","hover-oscillate","trigger","loop","colors","primary:#f7b84b,secondary:#f06548",2,"width","130px","height","130px"],[1,"pt-2","fs-15","mx-4","mx-sm-5"],["translate","orderManagement.order.AreYouSureMessage"],[1,"text-muted","mx-4","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","submit","id","save","translate","general.action.send",1,"btn","w-sm","btn-danger","fs-4"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light","fs-4",3,"click"],[1,"mb-2"],["for","changeQuantityMessage","translate","",1,"required","text-bold","form-label"],["rows","5","InputTirmFilter","","name","changeQuantityMessage","type","text","id","changeQuantityMessage",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],["t","","type","submit","id","save","translate","general.action.save",1,"btn","w-sm","btn-danger",3,"disabled"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light",3,"click"],["translate","",1,"text-danger","text-center"],[3,"success","dismiss","orderId"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["translate","sales.salesOrder.truckUpdate"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[3,"submit"],[1,"col-12","col-md-3"],["for","name","translate","",1,"required","fw-bold","form-label"],["name","acutalVisitDate","type","text","mwlFlatpickr","","altFormat","d-m-Y H:i","required","",1,"form-control","flatpickr-input",3,"ngModelChange","ngModel","altInput","enableTime","convertModelValue","dateFormat"],["for","name","translate","orderManagement.order.savedAddress",1,"required","fw-bold","form-label"],["name","clientLocationId","bindValue","id","bindLabel","name","required","",2,"width","100%",3,"ngModelChange","disabled","items","ngModel"],[1,"col-12","col-md-6"],["name","shippingTruckId","bindValue","id","bindLabel","name","required","",2,"width","100%",3,"ngModelChange","items","ngModel"],[1,"row","justify-content-center","my-0"],[1,"card-header","p-0"],[1,"d-flex","align-items-center"],["translate","sales.salesRequests.items",1,"card-title","flex-grow-1","mb-0"],[1,"table-responsive","table-card",2,"overflow","visible"],[1,"table","table-nowrap","align-middle","table-borderless","mb-0"],[1,"table-light","text-muted","p-1"],["translate","sales.salesRequests.itemName",2,"width","20%"],["translate","sales.salesRequests.unit",2,"width","25%"],["translate","sales.salesRequests.quantity",2,"width","25%"],["class","border-top border-top-dashed",4,"ngIf"],[1,"d-flex","justify-content-center","m-0"],["type","submit","type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],["clearable","false","clearOnBackspace","false","bindValue","id","bindLabel","name",2,"width","100%",3,"ngModelChange","name","items","ngModel"],["type","text","id","quantity",1,"form-control","fs-6",3,"ngModelChange","name","ngModel"],[1,"border-top","border-top-dashed"],["colspan","3"],["colspan","4",1,"fw-medium","p-0"],[1,"table","table-borderless","mb-0"],["translate","sales.salesOrder.total",1,"m-0","p-0"],[1,"text-end","m-0","p-0"],["translate","sales.salesOrder.extraDiscount",1,"m-0","p-0"],[1,"input-group","mx-4",2,"width","80%"],["clearable","false","clearOnBackspace","false","name","totalAddDiscountType","bindValue","id","bindLabel","name",3,"change","ngModelChange","items","ngModel"],["InputTirmFilter","","name","totalAddDiscount","type","text","id","totalAddDiscount",1,"form-control","fs-6",2,"width","30%",3,"change","ngModelChange","ngModel"],[1,"m-0","p-0"],["translate","sales.salesOrder.tax",1,"m-0","p-0"],[1,"border-top","border-top-dashed","m-0","p-0"],["scope","row","translate","sales.salesOrder.net",1,"m-0","p-0"]],template:function(r,n){if(1&r){const o=e.RV6();e.j41(0,"div",12)(1,"div",13),e.bIt("click",function(){return e.eBV(o),e.Njj(n.onSelectStatus(30))}),e.j41(2,"div",14)(3,"div",15)(4,"div",16)(5,"div",17),e.nrm(6,"i",18),e.k0s()(),e.j41(7,"div",19)(8,"h5",20),e.EFF(9),e.k0s(),e.nrm(10,"p",21),e.k0s()()()(),e.j41(11,"div",13),e.bIt("click",function(){return e.eBV(o),e.Njj(n.onSelectStatus(32))}),e.j41(12,"div",14)(13,"div",15)(14,"div",16)(15,"div",22),e.nrm(16,"i",18),e.k0s()(),e.j41(17,"div",19)(18,"h5",20),e.EFF(19),e.k0s(),e.nrm(20,"p",23),e.k0s()()()(),e.j41(21,"div",13),e.bIt("click",function(){return e.eBV(o),e.Njj(n.onSelectStatus(100))}),e.j41(22,"div",14)(23,"div",15)(24,"div",16)(25,"div",24),e.nrm(26,"i",18),e.k0s()(),e.j41(27,"div",19)(28,"h5",20),e.EFF(29),e.k0s(),e.nrm(30,"p",25),e.k0s()()()()(),e.j41(31,"div",26)(32,"div",27)(33,"div",28),e.nrm(34,"ngx-ui-loader",29),e.j41(35,"base-filter",30),e.bIt("addNew",function(){return e.eBV(o),e.Njj(n.goNew())})("reset",function(){return e.eBV(o),e.Njj(n.onReset())})("search",function(){return e.eBV(o),e.Njj(n.onSearch())})("exportXlsx",function(){return e.eBV(o),e.Njj(n.onExportXlsx())}),e.qex(36,31),e.j41(37,"div",32)(38,"div",33)(39,"input",34),e.nI1(40,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.pagination.id,c)||(n.pagination.id=c),e.Njj(c)}),e.k0s(),e.nrm(41,"i",35),e.k0s()(),e.j41(42,"div",32)(43,"input",36),e.nI1(44,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.searchForm.creationDates,c)||(n.searchForm.creationDates=c),e.Njj(c)}),e.k0s()(),e.j41(45,"div",32)(46,"div",33)(47,"input",37),e.nI1(48,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.pagination.clientName,c)||(n.pagination.clientName=c),e.Njj(c)}),e.k0s(),e.nrm(49,"i",35),e.k0s()(),e.j41(50,"div",32)(51,"div",33)(52,"ng-select",38),e.nI1(53,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.pagination.salesPersonId,c)||(n.pagination.salesPersonId=c),e.Njj(c)}),e.k0s()()(),e.j41(54,"div",32)(55,"input",36),e.nI1(56,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.searchForm.dates,c)||(n.searchForm.dates=c),e.Njj(c)}),e.k0s()(),e.j41(57,"div",32)(58,"div",33)(59,"ng-select",39),e.nI1(60,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.pagination.regionId,c)||(n.pagination.regionId=c),e.Njj(c)}),e.k0s()()(),e.j41(61,"div",32)(62,"div",33)(63,"ng-select",40),e.nI1(64,"translate"),e.mxI("ngModelChange",function(c){return e.eBV(o),e.DH7(n.pagination.cityId,c)||(n.pagination.cityId=c),e.Njj(c)}),e.k0s()()(),e.bVm(),e.k0s(),e.j41(65,"div",41)(66,"div",42)(67,"p-table",43,0),e.bIt("onLazyLoad",function(c){return e.eBV(o),e.Njj(n.tableChange(c))})("selectionChange",function(c){return e.eBV(o),e.Njj(n.onSelectionChange(c))}),e.DNE(69,Ac,29,0,"ng-template",44)(70,Hc,32,26,"ng-template",45)(71,Jc,12,1,"ng-template",46),e.k0s()(),e.DNE(72,Kr,2,0,"div",47)(73,Wc,6,8,"div",48),e.k0s()()()(),e.DNE(74,Kc,1,0,"ng-template",null,1,e.C5r)(76,Zc,1,1,"ng-template",null,2,e.C5r)(78,em,1,3,"ng-template",null,3,e.C5r)(80,tm,1,3,"ng-template",null,4,e.C5r)(82,nm,1,1,"ng-template",null,5,e.C5r)(84,im,15,3,"ng-template",null,6,e.C5r)(86,sm,16,6,"ng-template",null,7,e.C5r)(88,am,1,1,"ng-template",null,8,e.C5r)(90,dm,42,15,"ng-template",null,9,e.C5r)}2&r&&(e.R7$(2),e.AVh("bg-primary-subtle",30==n.pagination.status),e.R7$(7),e.JRh(n.count.storeDeliveryOrder),e.R7$(3),e.AVh("bg-primary-subtle",32==n.pagination.status),e.R7$(7),e.JRh(n.count.repareOrder),e.R7$(3),e.AVh("bg-primary-subtle",100==n.pagination.status),e.R7$(7),e.JRh(n.count.return),e.R7$(5),e.Y8G("loaderId","allLoader"),e.R7$(),e.Y8G("addPermission",e.lJ4(59,Bc))("showAdd",!1)("showExport",!1)("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(4),e.FS9("placeholder",e.bMT(40,45,"orderManagement.order.orderCode")),e.R50("ngModel",n.pagination.id),e.R7$(4),e.FS9("placeholder",e.bMT(44,47,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.creationDates),e.R7$(4),e.FS9("placeholder",e.bMT(48,49,"orderManagement.order.agentName")),e.R50("ngModel",n.pagination.clientName),e.R7$(5),e.FS9("placeholder",e.bMT(53,51,"sales.salesOrder.salsePerson")),e.Y8G("items",n.salesPersons)("multiple",!1),e.R50("ngModel",n.pagination.salesPersonId),e.R7$(3),e.FS9("placeholder",e.bMT(56,53,"sales.salesOrder.clientVisitDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.dates),e.R7$(4),e.FS9("placeholder",e.bMT(60,55,"client.client.regionName")),e.Y8G("items",n.regions)("multiple",!1),e.R50("ngModel",n.pagination.regionId),e.R7$(4),e.FS9("placeholder",e.bMT(64,57,"client.client.cityName")),e.Y8G("items",n.cities)("multiple",!1),e.R50("ngModel",n.pagination.cityId),e.R7$(4),e.Y8G("value",n.entities)("rows",n.pagination.pageSize)("lazy",!0)("totalRecords",n.pagination.totalItems),e.R7$(5),e.Y8G("ngIf",n.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems>0))},dependencies:[k.YU,k.Sq,k.bT,g.qT,g.me,g.Q0,g.BC,g.cb,g.YS,g.vS,g.cV,O.s5,fe.kL,Le.b,Ke.w,$e.p,Be.g,Jt,F.Mm,B.XI,Xe.Ei,B.Tg,B.FP,X.Cv,ve.vr,ke.m,ye.p,et.m,je,jn,k.vh,F.D9]})}}return a})(),canActivate:[It.g],data:{permission:["salesOrder.view"]}},{path:"sales-order",component:$c,canActivate:[It.g],data:{permission:["salesOrder.view"]}},{path:"setting",component:us,canActivate:[It.g],data:{permission:["salesSetting.view"]}},{path:"new",component:xo},{path:"sales-invoices",component:aa,resolve:{data:$d},canActivate:[It.g],data:{permission:["salesInvoices.view"]}},{path:"Client-Collections",component:Ud,resolve:{data:ic},canActivate:[It.g],data:{permission:["clientCollection.view"]}},{path:"Requests-Limit",component:$r,resolve:{data:Nn},canActivate:[It.g],data:{permission:["requestPersonSales.view"]}},{path:"Prices-List",component:ii,resolve:{data:L},canActivate:[It.g],data:{permission:["priceList.view"]}},{path:"PriceListItems",component:ri,canActivate:[It.g],data:{permission:["priceList.view"]}},{path:"PriceListItems/:id",component:ri,canActivate:[It.g],data:{permission:["priceList.view"]}},{path:"assign-truck-orders",component:Va,canActivate:[It.g],data:{permission:["assignTruckOrder.view"]}}];let pm=(()=>{class a{static{this.\u0275fac=function(r){return new(r||a)}}static{this.\u0275mod=e.$C({type:a})}static{this.\u0275inj=e.G2t({imports:[$.iI.forChild(mm),$.iI]})}}return a})();var um=x(71144),gm=x(81141),_m=x(41198);let hm=(()=>{class a{constructor(){(0,ue.eV)(Ie().loadAnimation)}static{this.\u0275fac=function(r){return new(r||a)}}static{this.\u0275mod=e.$C({type:a})}static{this.\u0275inj=e.G2t({imports:[k.MD,g.YN,O.zH,O.Pv,O.c9,fe.ND,Qt.r,pm,sn.G,F.h,B.bG,ns.q4,Et.H_,O.c9,X.th,ve.MQ,O.n8,um.j,O._f,et.S,Bt.U,gm.tm,_m.TV,g.X1]})}}return a})()},67376:function(Gt,lt,x){var k;Gt=x.nmd(Gt),function(){var g,ue="Expected a function",Ie="__lodash_hash_undefined__",F="__lodash_placeholder__",Y=128,We=1/0,Ue=9007199254740991,ae=4294967295,ke=[["ary",Y],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],ye="[object Arguments]",et="[object Array]",Ln="[object Boolean]",$n="[object Date]",Ve="[object Error]",Ke="[object Function]",rs="[object GeneratorFunction]",St="[object Map]",Bn="[object Number]",Dt="[object Object]",ss="[object Promise]",Xn="[object RegExp]",jt="[object Set]",Pn="[object String]",li="[object Symbol]",An="[object WeakMap]",Yn="[object ArrayBuffer]",vn="[object DataView]",zi="[object Float32Array]",Ji="[object Float64Array]",Wi="[object Int8Array]",Ki="[object Int16Array]",Zi="[object Int32Array]",er="[object Uint8Array]",tr="[object Uint8ClampedArray]",nr="[object Uint16Array]",ir="[object Uint32Array]",bo=/\b__p \+= '';/g,vo=/\b(__p \+=) '' \+/g,Co=/(__e\(.*?\)|\b__t\)) \+\n'';/g,as=/&(?:amp|lt|gt|quot|#39);/g,os=/[&<>"']/g,So=RegExp(as.source),jo=RegExp(os.source),Io=/<%-([\s\S]+?)%>/g,yo=/<%([\s\S]+?)%>/g,ls=/<%=([\s\S]+?)%>/g,To=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,xo=/^\w*$/,It=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Cn=/[\\^$.*+?()[\]{}|]/g,Ee=RegExp(Cn.source),rr=/^\s+/,qe=/\s/,tt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Le=/\{\n\/\* \[wrapped with (.+)\] \*/,$e=/,? & /,Be=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Xe=/[()=,{}\[\]\/\s]/,ko=/\\(\\)?/g,Ro=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ds=/\w*$/,Mo=/^[-+]0x[0-9a-f]+$/i,Oo=/^0b[01]+$/i,Fo=/^\[object .+?Constructor\]$/,wo=/^0o[0-7]+$/i,No=/^(?:0|[1-9]\d*)$/,Go=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,di=/($^)/,Eo=/['\n\r\u2028\u2029\\]/g,ci="\\ud800-\\udfff",cs="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",ms="\\u2700-\\u27bf",ps="a-z\\xdf-\\xf6\\xf8-\\xff",us="A-Z\\xc0-\\xd6\\xd8-\\xde",nt="\\ufe0e\\ufe0f",zt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ao="["+ci+"]",gs="["+zt+"]",mi="["+cs+"]",_s="\\d+",Yo="["+ms+"]",hs="["+ps+"]",fs="[^"+ci+zt+_s+ms+ps+us+"]",sr="\\ud83c[\\udffb-\\udfff]",bs="[^"+ci+"]",Jt="(?:\\ud83c[\\udde6-\\uddff]){2}",Wt="[\\ud800-\\udbff][\\udc00-\\udfff]",Sn="["+us+"]",Cs="(?:"+hs+"|"+fs+")",qo="(?:"+Sn+"|"+fs+")",Ss="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",js="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Is="(?:"+mi+"|"+sr+")?",ys="["+nt+"]?",Ts=ys+Is+"(?:\\u200d(?:"+[bs,Jt,Wt].join("|")+")"+ys+Is+")*",Jo="(?:"+[Yo,Jt,Wt].join("|")+")"+Ts,Wo="(?:"+[bs+mi+"?",mi,Jt,Wt,Ao].join("|")+")",Ko=RegExp("['\u2019]","g"),jn=RegExp(mi,"g"),ar=RegExp(sr+"(?="+sr+")|"+Wo+Ts,"g"),Zo=RegExp([Sn+"?"+hs+"+"+Ss+"(?="+[gs,Sn,"$"].join("|")+")",qo+"+"+js+"(?="+[gs,Sn+Cs,"$"].join("|")+")",Sn+"?"+Cs+"+"+Ss,Sn+"+"+js,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",_s,Jo].join("|"),"g"),el=RegExp("[\\u200d"+ci+cs+nt+"]"),tl=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,nl=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],il=-1,Ce={};Ce[zi]=Ce[Ji]=Ce[Wi]=Ce[Ki]=Ce[Zi]=Ce[er]=Ce[tr]=Ce[nr]=Ce[ir]=!0,Ce[ye]=Ce[et]=Ce[Yn]=Ce[Ln]=Ce[vn]=Ce[$n]=Ce[Ve]=Ce[Ke]=Ce[St]=Ce[Bn]=Ce[Dt]=Ce[Xn]=Ce[jt]=Ce[Pn]=Ce[An]=!1;var be={};be[ye]=be[et]=be[Yn]=be[vn]=be[Ln]=be[$n]=be[zi]=be[Ji]=be[Wi]=be[Ki]=be[Zi]=be[St]=be[Bn]=be[Dt]=be[Xn]=be[jt]=be[Pn]=be[li]=be[er]=be[tr]=be[nr]=be[ir]=!0,be[Ve]=be[Ke]=be[An]=!1;var ol={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ll=parseFloat,dl=parseInt,In="object"==typeof global&&global&&global.Object===Object&&global,cl="object"==typeof self&&self&&self.Object===Object&&self,je=In||cl||Function("return this")(),xs=lt&&!lt.nodeType&&lt,Un=xs&&Gt&&!Gt.nodeType&&Gt,ks=Un&&Un.exports===xs,or=ks&&In.process,mt=function(){try{return Un&&Un.require&&Un.require("util").types||or&&or.binding&&or.binding("util")}catch{}}(),Rs=mt&&mt.isArrayBuffer,Ms=mt&&mt.isDate,Os=mt&&mt.isMap,Fs=mt&&mt.isRegExp,ws=mt&&mt.isSet,Ns=mt&&mt.isTypedArray;function it(v,j,S){switch(S.length){case 0:return v.call(j);case 1:return v.call(j,S[0]);case 2:return v.call(j,S[0],S[1]);case 3:return v.call(j,S[0],S[1],S[2])}return v.apply(j,S)}function ml(v,j,S,N){for(var U=-1,pe=null==v?0:v.length;++U<pe;){var Fe=v[U];j(N,Fe,S(Fe),v)}return N}function pt(v,j){for(var S=-1,N=null==v?0:v.length;++S<N&&!1!==j(v[S],S,v););return v}function pl(v,j){for(var S=null==v?0:v.length;S--&&!1!==j(v[S],S,v););return v}function Gs(v,j){for(var S=-1,N=null==v?0:v.length;++S<N;)if(!j(v[S],S,v))return!1;return!0}function Kt(v,j){for(var S=-1,N=null==v?0:v.length,U=0,pe=[];++S<N;){var Fe=v[S];j(Fe,S,v)&&(pe[U++]=Fe)}return pe}function pi(v,j){return!(null==v||!v.length)&&yn(v,j,0)>-1}function lr(v,j,S){for(var N=-1,U=null==v?0:v.length;++N<U;)if(S(j,v[N]))return!0;return!1}function Se(v,j){for(var S=-1,N=null==v?0:v.length,U=Array(N);++S<N;)U[S]=j(v[S],S,v);return U}function Zt(v,j){for(var S=-1,N=j.length,U=v.length;++S<N;)v[U+S]=j[S];return v}function dr(v,j,S,N){var U=-1,pe=null==v?0:v.length;for(N&&pe&&(S=v[++U]);++U<pe;)S=j(S,v[U],U,v);return S}function ul(v,j,S,N){var U=null==v?0:v.length;for(N&&U&&(S=v[--U]);U--;)S=j(S,v[U],U,v);return S}function cr(v,j){for(var S=-1,N=null==v?0:v.length;++S<N;)if(j(v[S],S,v))return!0;return!1}var gl=mr("length");function gi(v,j,S){var N;return S(v,function(U,pe,Fe){if(j(U,pe,Fe))return N=pe,!1}),N}function an(v,j,S,N){for(var U=v.length,pe=S+(N?1:-1);N?pe--:++pe<U;)if(j(v[pe],pe,v))return pe;return-1}function yn(v,j,S){return j==j?function xl(v,j,S){for(var N=S-1,U=v.length;++N<U;)if(v[N]===j)return N;return-1}(v,j,S):an(v,Es,S)}function hl(v,j,S,N){for(var U=S-1,pe=v.length;++U<pe;)if(N(v[U],j))return U;return-1}function Es(v){return v!=v}function Ds(v,j){var S=null==v?0:v.length;return S?ur(v,j)/S:NaN}function mr(v){return function(j){return null==j?g:j[v]}}function pr(v){return function(j){return null==v?g:v[j]}}function Vs(v,j,S,N,U){return U(v,function(pe,Fe,he){S=N?(N=!1,pe):j(S,pe,Fe,he)}),S}function ur(v,j){for(var S,N=-1,U=v.length;++N<U;){var pe=j(v[N]);pe!==g&&(S=S===g?pe:S+pe)}return S}function gr(v,j){for(var S=-1,N=Array(v);++S<v;)N[S]=j(S);return N}function Ls(v){return v&&v.slice(0,As(v)+1).replace(rr,"")}function rt(v){return function(j){return v(j)}}function _r(v,j){return Se(j,function(S){return v[S]})}function qn(v,j){return v.has(j)}function $s(v,j){for(var S=-1,N=v.length;++S<N&&yn(j,v[S],0)>-1;);return S}function Bs(v,j){for(var S=v.length;S--&&yn(j,v[S],0)>-1;);return S}var Cl=pr({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),Sl=pr({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function jl(v){return"\\"+ol[v]}function Tn(v){return el.test(v)}function hr(v){var j=-1,S=Array(v.size);return v.forEach(function(N,U){S[++j]=[U,N]}),S}function Xs(v,j){return function(S){return v(j(S))}}function en(v,j){for(var S=-1,N=v.length,U=0,pe=[];++S<N;){var Fe=v[S];(Fe===j||Fe===F)&&(v[S]=F,pe[U++]=S)}return pe}function _i(v){var j=-1,S=Array(v.size);return v.forEach(function(N){S[++j]=N}),S}function xn(v){return Tn(v)?function Ml(v){for(var j=ar.lastIndex=0;ar.test(v);)++j;return j}(v):gl(v)}function yt(v){return Tn(v)?function Ol(v){return v.match(ar)||[]}(v):function _l(v){return v.split("")}(v)}function As(v){for(var j=v.length;j--&&qe.test(v.charAt(j)););return j}var Rl=pr({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),hi=function v(j){var i,S=(j=null==j?je:hi.defaults(je.Object(),j,hi.pick(je,nl))).Array,N=j.Date,U=j.Error,pe=j.Function,Fe=j.Math,he=j.Object,fr=j.RegExp,Nl=j.String,ut=j.TypeError,fi=S.prototype,kn=he.prototype,bi=j["__core-js_shared__"],vi=pe.prototype.toString,ge=kn.hasOwnProperty,El=0,Ys=(i=/[^.]+$/.exec(bi&&bi.keys&&bi.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"",Ci=kn.toString,Dl=vi.call(he),Vl=je._,Ll=fr("^"+vi.call(ge).replace(Cn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Si=ks?j.Buffer:g,tn=j.Symbol,ji=j.Uint8Array,Us=Si?Si.allocUnsafe:g,Ii=Xs(he.getPrototypeOf,he),qs=he.create,Qs=kn.propertyIsEnumerable,yi=fi.splice,Hs=tn?tn.isConcatSpreadable:g,Qn=tn?tn.iterator:g,on=tn?tn.toStringTag:g,Ti=function(){try{var i=un(he,"defineProperty");return i({},"",{}),i}catch{}}(),$l=j.clearTimeout!==je.clearTimeout&&j.clearTimeout,Bl=N&&N.now!==je.Date.now&&N.now,Xl=j.setTimeout!==je.setTimeout&&j.setTimeout,xi=Fe.ceil,ki=Fe.floor,br=he.getOwnPropertySymbols,Pl=Si?Si.isBuffer:g,zs=j.isFinite,Al=fi.join,Yl=Xs(he.keys,he),we=Fe.max,Pe=Fe.min,Ul=N.now,ql=j.parseInt,Js=Fe.random,Ql=fi.reverse,vr=un(j,"DataView"),Hn=un(j,"Map"),Cr=un(j,"Promise"),Rn=un(j,"Set"),zn=un(j,"WeakMap"),Jn=un(he,"create"),Ri=zn&&new zn,Mn={},Hl=gn(vr),zl=gn(Hn),Jl=gn(Cr),Wl=gn(Rn),Kl=gn(zn),Mi=tn?tn.prototype:g,Wn=Mi?Mi.valueOf:g,Ws=Mi?Mi.toString:g;function _(i){if(Re(i)&&!H(i)&&!(i instanceof ie)){if(i instanceof gt)return i;if(ge.call(i,"__wrapped__"))return Ja(i)}return new gt(i)}var On=function(){function i(){}return function(s){if(!xe(s))return{};if(qs)return qs(s);i.prototype=s;var l=new i;return i.prototype=g,l}}();function Oi(){}function gt(i,s){this.__wrapped__=i,this.__actions__=[],this.__chain__=!!s,this.__index__=0,this.__values__=g}function ie(i){this.__wrapped__=i,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ae,this.__views__=[]}function ln(i){var s=-1,l=null==i?0:i.length;for(this.clear();++s<l;){var d=i[s];this.set(d[0],d[1])}}function Vt(i){var s=-1,l=null==i?0:i.length;for(this.clear();++s<l;){var d=i[s];this.set(d[0],d[1])}}function Lt(i){var s=-1,l=null==i?0:i.length;for(this.clear();++s<l;){var d=i[s];this.set(d[0],d[1])}}function dn(i){var s=-1,l=null==i?0:i.length;for(this.__data__=new Lt;++s<l;)this.add(i[s])}function Tt(i){var s=this.__data__=new Vt(i);this.size=s.size}function Ks(i,s){var l=H(i),d=!l&&oi(i),u=!l&&!d&&Gn(i),h=!l&&!d&&!u&&qi(i),f=l||d||u||h,b=f?gr(i.length,Nl):[],C=b.length;for(var I in i)(s||ge.call(i,I))&&(!f||!("length"==I||u&&("offset"==I||"parent"==I)||h&&("buffer"==I||"byteLength"==I||"byteOffset"==I)||Yt(I,C)))&&b.push(I);return b}function Zs(i){var s=i.length;return s?i[Nr(0,s-1)]:g}function yd(i,s){return Ui(Ze(i),cn(s,0,i.length))}function Td(i){return Ui(Ze(i))}function Sr(i,s,l){(l!==g&&!Ut(i[s],l)||l===g&&!(s in i))&&$t(i,s,l)}function Kn(i,s,l){var d=i[s];(!ge.call(i,s)||!Ut(d,l)||l===g&&!(s in i))&&$t(i,s,l)}function Fi(i,s){for(var l=i.length;l--;)if(Ut(i[l][0],s))return l;return-1}function xd(i,s,l,d){return Bt(i,function(u,h,f){s(d,u,l(u),f)}),d}function ea(i,s){return i&&Ft(s,Ye(s),i)}function $t(i,s,l){"__proto__"==s&&Ti?Ti(i,s,{configurable:!0,enumerable:!0,value:l,writable:!0}):i[s]=l}function jr(i,s){for(var l=-1,d=s.length,u=S(d),h=null==i;++l<d;)u[l]=h?g:Sm(i,s[l]);return u}function cn(i,s,l){return i==i&&(l!==g&&(i=i<=l?i:l),s!==g&&(i=i>=s?i:s)),i}function _t(i,s,l,d,u,h){var f,b=1&s,C=2&s,I=4&s;if(l&&(f=u?l(i,d,u,h):l(i)),f!==g)return f;if(!xe(i))return i;var y=H(i);if(y){if(f=function pc(i){var s=i.length,l=new i.constructor(s);return s&&"string"==typeof i[0]&&ge.call(i,"index")&&(l.index=i.index,l.input=i.input),l}(i),!b)return Ze(i,f)}else{var T=Ae(i),w=T==Ke||T==rs;if(Gn(i))return ja(i,b);if(T==Dt||T==ye||w&&!u){if(f=C||w?{}:Qr(i),!b)return C?function tc(i,s){return Ft(i,Ba(i),s)}(i,function kd(i,s){return i&&Ft(s,vt(s),i)}(f,i)):function ec(i,s){return Ft(i,qr(i),s)}(i,ea(f,i))}else{if(!be[T])return u?i:{};f=function uc(i,s,l){var d=i.constructor;switch(s){case Yn:return ni(i);case Ln:case $n:return new d(+i);case vn:return function Ia(i,s){var l=s?ni(i.buffer):i.buffer;return new i.constructor(l,i.byteOffset,i.byteLength)}(i,l);case zi:case Ji:case Wi:case Ki:case Zi:case er:case tr:case nr:case ir:return ya(i,l);case St:return new d;case Bn:case Pn:return new d(i);case Xn:return function Wd(i){var s=new i.constructor(i.source,ds.exec(i));return s.lastIndex=i.lastIndex,s}(i);case jt:return new d;case li:return function Kd(i){return Wn?he(Wn.call(i)):{}}(i)}}(i,T,b)}}h||(h=new Tt);var G=h.get(i);if(G)return G;h.set(i,f),Pm(i)?i.forEach(function(A){f.add(_t(A,s,l,A,i,h))}):Bm(i)&&i.forEach(function(A,de){f.set(de,_t(A,s,l,de,i,h))});var te=y?g:(I?C?Ar:Pr:C?vt:Ye)(i);return pt(te||i,function(A,de){te&&(A=i[de=A]),Kn(f,de,_t(A,s,l,de,i,h))}),f}function wi(i,s,l){var d=l.length;if(null==i)return!d;for(i=he(i);d--;){var u=l[d],f=i[u];if(f===g&&!(u in i)||!(0,s[u])(f))return!1}return!0}function Ir(i,s,l){if("function"!=typeof i)throw new ut(ue);return ai(function(){i.apply(g,l)},s)}function mn(i,s,l,d){var u=-1,h=pi,f=!0,b=i.length,C=[],I=s.length;if(!b)return C;l&&(s=Se(s,rt(l))),d?(h=lr,f=!1):s.length>=200&&(h=qn,f=!1,s=new dn(s));e:for(;++u<b;){var y=i[u],T=null==l?y:l(y);if(y=d||0!==y?y:0,f&&T==T){for(var w=I;w--;)if(s[w]===T)continue e;C.push(y)}else h(s,T,d)||C.push(y)}return C}_.templateSettings={escape:Io,evaluate:yo,interpolate:ls,variable:"",imports:{_}},(_.prototype=Oi.prototype).constructor=_,(gt.prototype=On(Oi.prototype)).constructor=gt,(ie.prototype=On(Oi.prototype)).constructor=ie,ln.prototype.clear=function nd(){this.__data__=Jn?Jn(null):{},this.size=0},ln.prototype.delete=function id(i){var s=this.has(i)&&delete this.__data__[i];return this.size-=s?1:0,s},ln.prototype.get=function rd(i){var s=this.__data__;if(Jn){var l=s[i];return l===Ie?g:l}return ge.call(s,i)?s[i]:g},ln.prototype.has=function sd(i){var s=this.__data__;return Jn?s[i]!==g:ge.call(s,i)},ln.prototype.set=function ad(i,s){var l=this.__data__;return this.size+=this.has(i)?0:1,l[i]=Jn&&s===g?Ie:s,this},Vt.prototype.clear=function od(){this.__data__=[],this.size=0},Vt.prototype.delete=function ld(i){var s=this.__data__,l=Fi(s,i);return!(l<0||(l==s.length-1?s.pop():yi.call(s,l,1),--this.size,0))},Vt.prototype.get=function dd(i){var s=this.__data__,l=Fi(s,i);return l<0?g:s[l][1]},Vt.prototype.has=function cd(i){return Fi(this.__data__,i)>-1},Vt.prototype.set=function md(i,s){var l=this.__data__,d=Fi(l,i);return d<0?(++this.size,l.push([i,s])):l[d][1]=s,this},Lt.prototype.clear=function pd(){this.size=0,this.__data__={hash:new ln,map:new(Hn||Vt),string:new ln}},Lt.prototype.delete=function ud(i){var s=Yi(this,i).delete(i);return this.size-=s?1:0,s},Lt.prototype.get=function gd(i){return Yi(this,i).get(i)},Lt.prototype.has=function _d(i){return Yi(this,i).has(i)},Lt.prototype.set=function hd(i,s){var l=Yi(this,i),d=l.size;return l.set(i,s),this.size+=l.size==d?0:1,this},dn.prototype.add=dn.prototype.push=function fd(i){return this.__data__.set(i,Ie),this},dn.prototype.has=function bd(i){return this.__data__.has(i)},Tt.prototype.clear=function vd(){this.__data__=new Vt,this.size=0},Tt.prototype.delete=function Cd(i){var s=this.__data__,l=s.delete(i);return this.size=s.size,l},Tt.prototype.get=function Sd(i){return this.__data__.get(i)},Tt.prototype.has=function jd(i){return this.__data__.has(i)},Tt.prototype.set=function Id(i,s){var l=this.__data__;if(l instanceof Vt){var d=l.__data__;if(!Hn||d.length<199)return d.push([i,s]),this.size=++l.size,this;l=this.__data__=new Lt(d)}return l.set(i,s),this.size=l.size,this};var Bt=Ra(Ot),ta=Ra(Tr,!0);function Md(i,s){var l=!0;return Bt(i,function(d,u,h){return l=!!s(d,u,h)}),l}function Ni(i,s,l){for(var d=-1,u=i.length;++d<u;){var h=i[d],f=s(h);if(null!=f&&(b===g?f==f&&!xt(f):l(f,b)))var b=f,C=h}return C}function na(i,s){var l=[];return Bt(i,function(d,u,h){s(d,u,h)&&l.push(d)}),l}function De(i,s,l,d,u){var h=-1,f=i.length;for(l||(l=_c),u||(u=[]);++h<f;){var b=i[h];s>0&&l(b)?s>1?De(b,s-1,l,d,u):Zt(u,b):d||(u[u.length]=b)}return u}var yr=Ma(),ia=Ma(!0);function Ot(i,s){return i&&yr(i,s,Ye)}function Tr(i,s){return i&&ia(i,s,Ye)}function Gi(i,s){return Kt(s,function(l){return _n(i[l])})}function pn(i,s){for(var l=0,d=(s=rn(s,i)).length;null!=i&&l<d;)i=i[wt(s[l++])];return l&&l==d?i:g}function ra(i,s,l){var d=s(i);return H(i)?d:Zt(d,l(i))}function Qe(i){return null==i?i===g?"[object Undefined]":"[object Null]":on&&on in he(i)?function dc(i){var s=ge.call(i,on),l=i[on];try{i[on]=g;var d=!0}catch{}var u=Ci.call(i);return d&&(s?i[on]=l:delete i[on]),u}(i):function jc(i){return Ci.call(i)}(i)}function xr(i,s){return i>s}function Fd(i,s){return null!=i&&ge.call(i,s)}function wd(i,s){return null!=i&&s in he(i)}function kr(i,s,l){for(var d=l?lr:pi,u=i[0].length,h=i.length,f=h,b=S(h),C=1/0,I=[];f--;){var y=i[f];f&&s&&(y=Se(y,rt(s))),C=Pe(y.length,C),b[f]=!l&&(s||u>=120&&y.length>=120)?new dn(f&&y):g}y=i[0];var T=-1,w=b[0];e:for(;++T<u&&I.length<C;){var G=y[T],P=s?s(G):G;if(G=l||0!==G?G:0,!(w?qn(w,P):d(I,P,l))){for(f=h;--f;){var te=b[f];if(!(te?qn(te,P):d(i[f],P,l)))continue e}w&&w.push(P),I.push(G)}}return I}function Zn(i,s,l){var d=null==(i=Ua(i,s=rn(s,i)))?i:i[wt(ft(s))];return null==d?g:it(d,i,l)}function sa(i){return Re(i)&&Qe(i)==ye}function ei(i,s,l,d,u){return i===s||(null==i||null==s||!Re(i)&&!Re(s)?i!=i&&s!=s:function Vd(i,s,l,d,u,h){var f=H(i),b=H(s),C=f?et:Ae(i),I=b?et:Ae(s),y=(C=C==ye?Dt:C)==Dt,T=(I=I==ye?Dt:I)==Dt,w=C==I;if(w&&Gn(i)){if(!Gn(s))return!1;f=!0,y=!1}if(w&&!y)return h||(h=new Tt),f||qi(i)?$a(i,s,l,d,u,h):function oc(i,s,l,d,u,h,f){switch(l){case vn:if(i.byteLength!=s.byteLength||i.byteOffset!=s.byteOffset)return!1;i=i.buffer,s=s.buffer;case Yn:return!(i.byteLength!=s.byteLength||!h(new ji(i),new ji(s)));case Ln:case $n:case Bn:return Ut(+i,+s);case Ve:return i.name==s.name&&i.message==s.message;case Xn:case Pn:return i==s+"";case St:var b=hr;case jt:if(b||(b=_i),i.size!=s.size&&!(1&d))return!1;var I=f.get(i);if(I)return I==s;d|=2,f.set(i,s);var y=$a(b(i),b(s),d,u,h,f);return f.delete(i),y;case li:if(Wn)return Wn.call(i)==Wn.call(s)}return!1}(i,s,C,l,d,u,h);if(!(1&l)){var G=y&&ge.call(i,"__wrapped__"),P=T&&ge.call(s,"__wrapped__");if(G||P){var te=G?i.value():i,A=P?s.value():s;return h||(h=new Tt),u(te,A,l,d,h)}}return!!w&&(h||(h=new Tt),function lc(i,s,l,d,u,h){var f=1&l,b=Pr(i),C=b.length;if(C!=Pr(s).length&&!f)return!1;for(var T=C;T--;){var w=b[T];if(!(f?w in s:ge.call(s,w)))return!1}var G=h.get(i),P=h.get(s);if(G&&P)return G==s&&P==i;var te=!0;h.set(i,s),h.set(s,i);for(var A=f;++T<C;){var de=i[w=b[T]],me=s[w];if(d)var kt=f?d(me,de,w,s,i,h):d(de,me,w,i,s,h);if(!(kt===g?de===me||u(de,me,l,d,h):kt)){te=!1;break}A||(A="constructor"==w)}if(te&&!A){var ot=i.constructor,Rt=s.constructor;ot!=Rt&&"constructor"in i&&"constructor"in s&&!("function"==typeof ot&&ot instanceof ot&&"function"==typeof Rt&&Rt instanceof Rt)&&(te=!1)}return h.delete(i),h.delete(s),te}(i,s,l,d,u,h))}(i,s,l,d,ei,u))}function Rr(i,s,l,d){var u=l.length,h=u,f=!d;if(null==i)return!h;for(i=he(i);u--;){var b=l[u];if(f&&b[2]?b[1]!==i[b[0]]:!(b[0]in i))return!1}for(;++u<h;){var C=(b=l[u])[0],I=i[C],y=b[1];if(f&&b[2]){if(I===g&&!(C in i))return!1}else{var T=new Tt;if(d)var w=d(I,y,C,i,s,T);if(!(w===g?ei(y,I,3,d,T):w))return!1}}return!0}function aa(i){return!(!xe(i)||function fc(i){return!!Ys&&Ys in i}(i))&&(_n(i)?Ll:Fo).test(gn(i))}function Mr(i){return"function"==typeof i?i:null==i?Ct:"object"==typeof i?H(i)?ca(i[0],i[1]):da(i):tp(i)}function Or(i){if(!si(i))return Yl(i);var s=[];for(var l in he(i))ge.call(i,l)&&"constructor"!=l&&s.push(l);return s}function Fr(i,s){return i<s}function la(i,s){var l=-1,d=bt(i)?S(i.length):[];return Bt(i,function(u,h,f){d[++l]=s(u,h,f)}),d}function da(i){var s=Ur(i);return 1==s.length&&s[0][2]?Aa(s[0][0],s[0][1]):function(l){return l===i||Rr(l,i,s)}}function ca(i,s){return Hr(i)&&Pa(s)?Aa(wt(i),s):function(l){var d=Sm(l,i);return d===g&&d===s?jm(l,i):ei(s,d,3)}}function Di(i,s,l,d,u){i!==s&&yr(s,function(h,f){if(u||(u=new Tt),xe(h))!function Xd(i,s,l,d,u,h,f){var b=Jr(i,l),C=Jr(s,l),I=f.get(C);if(I)Sr(i,l,I);else{var y=h?h(b,C,l+"",i,s,f):g,T=y===g;if(T){var w=H(C),G=!w&&Gn(C),P=!w&&!G&&qi(C);y=C,w||G||P?H(b)?y=b:Ne(b)?y=Ze(b):G?(T=!1,y=ja(C,!0)):P?(T=!1,y=ya(C,!0)):y=[]:ts(C)||oi(C)?(y=b,oi(b)?y=Um(b):(!xe(b)||_n(b))&&(y=Qr(C))):T=!1}T&&(f.set(C,y),u(y,C,d,h,f),f.delete(C)),Sr(i,l,y)}}(i,s,f,l,Di,d,u);else{var b=d?d(Jr(i,f),h,f+"",i,s,u):g;b===g&&(b=h),Sr(i,f,b)}},vt)}function ma(i,s){var l=i.length;if(l)return Yt(s+=s<0?l:0,l)?i[s]:g}function pa(i,s,l){s=s.length?Se(s,function(h){return H(h)?function(f){return pn(f,1===h.length?h[0]:h)}:h}):[Ct];var d=-1;return s=Se(s,rt(L())),function fl(v,j){var S=v.length;for(v.sort(j);S--;)v[S]=v[S].value;return v}(la(i,function(h,f,b){return{criteria:Se(s,function(I){return I(h)}),index:++d,value:h}}),function(h,f){return function Zd(i,s,l){for(var d=-1,u=i.criteria,h=s.criteria,f=u.length,b=l.length;++d<f;){var C=Ta(u[d],h[d]);if(C)return d>=b?C:C*("desc"==l[d]?-1:1)}return i.index-s.index}(h,f,l)})}function ua(i,s,l){for(var d=-1,u=s.length,h={};++d<u;){var f=s[d],b=pn(i,f);l(b,f)&&ti(h,rn(f,i),b)}return h}function wr(i,s,l,d){var u=d?hl:yn,h=-1,f=s.length,b=i;for(i===s&&(s=Ze(s)),l&&(b=Se(i,rt(l)));++h<f;)for(var C=0,I=s[h],y=l?l(I):I;(C=u(b,y,C,d))>-1;)b!==i&&yi.call(b,C,1),yi.call(i,C,1);return i}function ga(i,s){for(var l=i?s.length:0,d=l-1;l--;){var u=s[l];if(l==d||u!==h){var h=u;Yt(u)?yi.call(i,u,1):Dr(i,u)}}return i}function Nr(i,s){return i+ki(Js()*(s-i+1))}function Gr(i,s){var l="";if(!i||s<1||s>Ue)return l;do{s%2&&(l+=i),(s=ki(s/2))&&(i+=i)}while(s);return l}function J(i,s){return Wr(Ya(i,s,Ct),i+"")}function Ud(i){return Zs(Qi(i))}function qd(i,s){var l=Qi(i);return Ui(l,cn(s,0,l.length))}function ti(i,s,l,d){if(!xe(i))return i;for(var u=-1,h=(s=rn(s,i)).length,f=h-1,b=i;null!=b&&++u<h;){var C=wt(s[u]),I=l;if("__proto__"===C||"constructor"===C||"prototype"===C)return i;if(u!=f){var y=b[C];(I=d?d(y,C,b):g)===g&&(I=xe(y)?y:Yt(s[u+1])?[]:{})}Kn(b,C,I),b=b[C]}return i}var _a=Ri?function(i,s){return Ri.set(i,s),i}:Ct,Qd=Ti?function(i,s){return Ti(i,"toString",{configurable:!0,enumerable:!1,value:ym(s),writable:!0})}:Ct;function Hd(i){return Ui(Qi(i))}function ht(i,s,l){var d=-1,u=i.length;s<0&&(s=-s>u?0:u+s),(l=l>u?u:l)<0&&(l+=u),u=s>l?0:l-s>>>0,s>>>=0;for(var h=S(u);++d<u;)h[d]=i[d+s];return h}function zd(i,s){var l;return Bt(i,function(d,u,h){return!(l=s(d,u,h))}),!!l}function Vi(i,s,l){var d=0,u=null==i?d:i.length;if("number"==typeof s&&s==s&&u<=2147483647){for(;d<u;){var h=d+u>>>1,f=i[h];null!==f&&!xt(f)&&(l?f<=s:f<s)?d=h+1:u=h}return u}return Er(i,s,Ct,l)}function Er(i,s,l,d){var u=0,h=null==i?0:i.length;if(0===h)return 0;for(var f=(s=l(s))!=s,b=null===s,C=xt(s),I=s===g;u<h;){var y=ki((u+h)/2),T=l(i[y]),w=T!==g,G=null===T,P=T==T,te=xt(T);if(f)var A=d||P;else A=I?P&&(d||w):b?P&&w&&(d||!G):C?P&&w&&!G&&(d||!te):!G&&!te&&(d?T<=s:T<s);A?u=y+1:h=y}return Pe(h,4294967294)}function ha(i,s){for(var l=-1,d=i.length,u=0,h=[];++l<d;){var f=i[l],b=s?s(f):f;if(!l||!Ut(b,C)){var C=b;h[u++]=0===f?0:f}}return h}function fa(i){return"number"==typeof i?i:xt(i)?NaN:+i}function st(i){if("string"==typeof i)return i;if(H(i))return Se(i,st)+"";if(xt(i))return Ws?Ws.call(i):"";var s=i+"";return"0"==s&&1/i==-We?"-0":s}function nn(i,s,l){var d=-1,u=pi,h=i.length,f=!0,b=[],C=b;if(l)f=!1,u=lr;else if(h>=200){var I=s?null:sc(i);if(I)return _i(I);f=!1,u=qn,C=new dn}else C=s?[]:b;e:for(;++d<h;){var y=i[d],T=s?s(y):y;if(y=l||0!==y?y:0,f&&T==T){for(var w=C.length;w--;)if(C[w]===T)continue e;s&&C.push(T),b.push(y)}else u(C,T,l)||(C!==b&&C.push(T),b.push(y))}return b}function Dr(i,s){return null==(i=Ua(i,s=rn(s,i)))||delete i[wt(ft(s))]}function ba(i,s,l,d){return ti(i,s,l(pn(i,s)),d)}function Li(i,s,l,d){for(var u=i.length,h=d?u:-1;(d?h--:++h<u)&&s(i[h],h,i););return l?ht(i,d?0:h,d?h+1:u):ht(i,d?h+1:0,d?u:h)}function va(i,s){var l=i;return l instanceof ie&&(l=l.value()),dr(s,function(d,u){return u.func.apply(u.thisArg,Zt([d],u.args))},l)}function Vr(i,s,l){var d=i.length;if(d<2)return d?nn(i[0]):[];for(var u=-1,h=S(d);++u<d;)for(var f=i[u],b=-1;++b<d;)b!=u&&(h[u]=mn(h[u]||f,i[b],s,l));return nn(De(h,1),s,l)}function Ca(i,s,l){for(var d=-1,u=i.length,h=s.length,f={};++d<u;)l(f,i[d],d<h?s[d]:g);return f}function Lr(i){return Ne(i)?i:[]}function $r(i){return"function"==typeof i?i:Ct}function rn(i,s){return H(i)?i:Hr(i,s)?[i]:za(_e(i))}var Jd=J;function Xt(i,s,l){var d=i.length;return l=l===g?d:l,!s&&l>=d?i:ht(i,s,l)}var Sa=$l||function(i){return je.clearTimeout(i)};function ja(i,s){if(s)return i.slice();var l=i.length,d=Us?Us(l):new i.constructor(l);return i.copy(d),d}function ni(i){var s=new i.constructor(i.byteLength);return new ji(s).set(new ji(i)),s}function ya(i,s){var l=s?ni(i.buffer):i.buffer;return new i.constructor(l,i.byteOffset,i.length)}function Ta(i,s){if(i!==s){var l=i!==g,d=null===i,u=i==i,h=xt(i),f=s!==g,b=null===s,C=s==s,I=xt(s);if(!b&&!I&&!h&&i>s||h&&f&&C&&!b&&!I||d&&f&&C||!l&&C||!u)return 1;if(!d&&!h&&!I&&i<s||I&&l&&u&&!d&&!h||b&&l&&u||!f&&u||!C)return-1}return 0}function xa(i,s,l,d){for(var u=-1,h=i.length,f=l.length,b=-1,C=s.length,I=we(h-f,0),y=S(C+I),T=!d;++b<C;)y[b]=s[b];for(;++u<f;)(T||u<h)&&(y[l[u]]=i[u]);for(;I--;)y[b++]=i[u++];return y}function ka(i,s,l,d){for(var u=-1,h=i.length,f=-1,b=l.length,C=-1,I=s.length,y=we(h-b,0),T=S(y+I),w=!d;++u<y;)T[u]=i[u];for(var G=u;++C<I;)T[G+C]=s[C];for(;++f<b;)(w||u<h)&&(T[G+l[f]]=i[u++]);return T}function Ze(i,s){var l=-1,d=i.length;for(s||(s=S(d));++l<d;)s[l]=i[l];return s}function Ft(i,s,l,d){var u=!l;l||(l={});for(var h=-1,f=s.length;++h<f;){var b=s[h],C=d?d(l[b],i[b],b,l,i):g;C===g&&(C=i[b]),u?$t(l,b,C):Kn(l,b,C)}return l}function $i(i,s){return function(l,d){var u=H(l)?ml:xd,h=s?s():{};return u(l,i,L(d,2),h)}}function Fn(i){return J(function(s,l){var d=-1,u=l.length,h=u>1?l[u-1]:g,f=u>2?l[2]:g;for(h=i.length>3&&"function"==typeof h?(u--,h):g,f&&He(l[0],l[1],f)&&(h=u<3?g:h,u=1),s=he(s);++d<u;){var b=l[d];b&&i(s,b,d,h)}return s})}function Ra(i,s){return function(l,d){if(null==l)return l;if(!bt(l))return i(l,d);for(var u=l.length,h=s?u:-1,f=he(l);(s?h--:++h<u)&&!1!==d(f[h],h,f););return l}}function Ma(i){return function(s,l,d){for(var u=-1,h=he(s),f=d(s),b=f.length;b--;){var C=f[i?b:++u];if(!1===l(h[C],C,h))break}return s}}function Oa(i){return function(s){var l=Tn(s=_e(s))?yt(s):g,d=l?l[0]:s.charAt(0),u=l?Xt(l,1).join(""):s.slice(1);return d[i]()+u}}function wn(i){return function(s){return dr(Zm(Km(s).replace(Ko,"")),i,"")}}function ii(i){return function(){var s=arguments;switch(s.length){case 0:return new i;case 1:return new i(s[0]);case 2:return new i(s[0],s[1]);case 3:return new i(s[0],s[1],s[2]);case 4:return new i(s[0],s[1],s[2],s[3]);case 5:return new i(s[0],s[1],s[2],s[3],s[4]);case 6:return new i(s[0],s[1],s[2],s[3],s[4],s[5]);case 7:return new i(s[0],s[1],s[2],s[3],s[4],s[5],s[6])}var l=On(i.prototype),d=i.apply(l,s);return xe(d)?d:l}}function Fa(i){return function(s,l,d){var u=he(s);if(!bt(s)){var h=L(l,3);s=Ye(s),l=function(b){return h(u[b],b,u)}}var f=i(s,l,d);return f>-1?u[h?s[f]:f]:g}}function wa(i){return At(function(s){var l=s.length,d=l,u=gt.prototype.thru;for(i&&s.reverse();d--;){var h=s[d];if("function"!=typeof h)throw new ut(ue);if(u&&!f&&"wrapper"==ri(h))var f=new gt([],!0)}for(d=f?d:l;++d<l;){var b=ri(h=s[d]),C="wrapper"==b?Yr(h):g;f=C&&zr(C[0])&&424==C[1]&&!C[4].length&&1==C[9]?f[ri(C[0])].apply(f,C[3]):1==h.length&&zr(h)?f[b]():f.thru(h)}return function(){var I=arguments,y=I[0];if(f&&1==I.length&&H(y))return f.plant(y).value();for(var T=0,w=l?s[T].apply(this,I):y;++T<l;)w=s[T].call(this,w);return w}})}function Bi(i,s,l,d,u,h,f,b,C,I){var y=s&Y,T=1&s,w=2&s,G=24&s,P=512&s,te=w?g:ii(i);return function A(){for(var de=arguments.length,me=S(de),kt=de;kt--;)me[kt]=arguments[kt];if(G)var ot=Nn(A),Rt=function vl(v,j){for(var S=v.length,N=0;S--;)v[S]===j&&++N;return N}(me,ot);if(d&&(me=xa(me,d,u,G)),h&&(me=ka(me,h,f,G)),de-=Rt,G&&de<I){var Ge=en(me,ot);return Ea(i,s,Bi,A.placeholder,l,me,Ge,b,C,I-de)}var qt=T?l:this,fn=w?qt[i]:i;return de=me.length,b?me=function Ic(i,s){for(var l=i.length,d=Pe(s.length,l),u=Ze(i);d--;){var h=s[d];i[d]=Yt(h,l)?u[h]:g}return i}(me,b):P&&de>1&&me.reverse(),y&&C<de&&(me.length=C),this&&this!==je&&this instanceof A&&(fn=te||ii(fn)),fn.apply(qt,me)}}function Na(i,s){return function(l,d){return function Gd(i,s,l,d){return Ot(i,function(u,h,f){s(d,l(u),h,f)}),d}(l,i,s(d),{})}}function Xi(i,s){return function(l,d){var u;if(l===g&&d===g)return s;if(l!==g&&(u=l),d!==g){if(u===g)return d;"string"==typeof l||"string"==typeof d?(l=st(l),d=st(d)):(l=fa(l),d=fa(d)),u=i(l,d)}return u}}function Br(i){return At(function(s){return s=Se(s,rt(L())),J(function(l){var d=this;return i(s,function(u){return it(u,d,l)})})})}function Pi(i,s){var l=(s=s===g?" ":st(s)).length;if(l<2)return l?Gr(s,i):s;var d=Gr(s,xi(i/xn(s)));return Tn(s)?Xt(yt(d),0,i).join(""):d.slice(0,i)}function Ga(i){return function(s,l,d){return d&&"number"!=typeof d&&He(s,l,d)&&(l=d=g),s=hn(s),l===g?(l=s,s=0):l=hn(l),function Yd(i,s,l,d){for(var u=-1,h=we(xi((s-i)/(l||1)),0),f=S(h);h--;)f[d?h:++u]=i,i+=l;return f}(s,l,d=d===g?s<l?1:-1:hn(d),i)}}function Ai(i){return function(s,l){return"string"==typeof s&&"string"==typeof l||(s=Nt(s),l=Nt(l)),i(s,l)}}function Ea(i,s,l,d,u,h,f,b,C,I){var y=8&s;s|=y?32:64,4&(s&=~(y?64:32))||(s&=-4);var te=[i,s,u,y?h:g,y?f:g,y?g:h,y?g:f,b,C,I],A=l.apply(g,te);return zr(i)&&qa(A,te),A.placeholder=d,Qa(A,i,s)}function Xr(i){var s=Fe[i];return function(l,d){if(l=Nt(l),(d=null==d?0:Pe(K(d),292))&&zs(l)){var u=(_e(l)+"e").split("e");return+((u=(_e(s(u[0]+"e"+(+u[1]+d)))+"e").split("e"))[0]+"e"+(+u[1]-d))}return s(l)}}var sc=Rn&&1/_i(new Rn([,-0]))[1]==We?function(i){return new Rn(i)}:km;function Da(i){return function(s){var l=Ae(s);return l==St?hr(s):l==jt?function Ps(v){var j=-1,S=Array(v.size);return v.forEach(function(N){S[++j]=[N,N]}),S}(s):function bl(v,j){return Se(j,function(S){return[S,v[S]]})}(s,i(s))}}function Pt(i,s,l,d,u,h,f,b){var C=2&s;if(!C&&"function"!=typeof i)throw new ut(ue);var I=d?d.length:0;if(I||(s&=-97,d=u=g),f=f===g?f:we(K(f),0),b=b===g?b:K(b),I-=u?u.length:0,64&s){var y=d,T=u;d=u=g}var w=C?g:Yr(i),G=[i,s,l,d,u,y,T,h,f,b];if(w&&function Cc(i,s){var l=i[1],d=s[1],u=l|d;if(!(u<131)&&!(d==Y&&8==l||d==Y&&256==l&&i[7].length<=s[8]||384==d&&s[7].length<=s[8]&&8==l))return i;1&d&&(i[2]=s[2],u|=1&l?0:4);var b=s[3];if(b){var C=i[3];i[3]=C?xa(C,b,s[4]):b,i[4]=C?en(i[3],F):s[4]}(b=s[5])&&(i[5]=(C=i[5])?ka(C,b,s[6]):b,i[6]=C?en(i[5],F):s[6]),(b=s[7])&&(i[7]=b),d&Y&&(i[8]=null==i[8]?s[8]:Pe(i[8],s[8])),null==i[9]&&(i[9]=s[9]),i[0]=s[0],i[1]=u}(G,w),i=G[0],s=G[1],l=G[2],d=G[3],u=G[4],!(b=G[9]=G[9]===g?C?0:i.length:we(G[9]-I,0))&&24&s&&(s&=-25),s&&1!=s)P=8==s||16==s?function ic(i,s,l){var d=ii(i);return function u(){for(var h=arguments.length,f=S(h),b=h,C=Nn(u);b--;)f[b]=arguments[b];var I=h<3&&f[0]!==C&&f[h-1]!==C?[]:en(f,C);return(h-=I.length)<l?Ea(i,s,Bi,u.placeholder,g,f,I,g,g,l-h):it(this&&this!==je&&this instanceof u?d:i,this,f)}}(i,s,b):32!=s&&33!=s||u.length?Bi.apply(g,G):function rc(i,s,l,d){var u=1&s,h=ii(i);return function f(){for(var b=-1,C=arguments.length,I=-1,y=d.length,T=S(y+C),w=this&&this!==je&&this instanceof f?h:i;++I<y;)T[I]=d[I];for(;C--;)T[I++]=arguments[++b];return it(w,u?l:this,T)}}(i,s,l,d);else var P=function nc(i,s,l){var d=1&s,u=ii(i);return function h(){return(this&&this!==je&&this instanceof h?u:i).apply(d?l:this,arguments)}}(i,s,l);return Qa((w?_a:qa)(P,G),i,s)}function Va(i,s,l,d){return i===g||Ut(i,kn[l])&&!ge.call(d,l)?s:i}function La(i,s,l,d,u,h){return xe(i)&&xe(s)&&(h.set(s,i),Di(i,s,g,La,h),h.delete(s)),i}function ac(i){return ts(i)?g:i}function $a(i,s,l,d,u,h){var f=1&l,b=i.length,C=s.length;if(b!=C&&!(f&&C>b))return!1;var I=h.get(i),y=h.get(s);if(I&&y)return I==s&&y==i;var T=-1,w=!0,G=2&l?new dn:g;for(h.set(i,s),h.set(s,i);++T<b;){var P=i[T],te=s[T];if(d)var A=f?d(te,P,T,s,i,h):d(P,te,T,i,s,h);if(A!==g){if(A)continue;w=!1;break}if(G){if(!cr(s,function(de,me){if(!qn(G,me)&&(P===de||u(P,de,l,d,h)))return G.push(me)})){w=!1;break}}else if(P!==te&&!u(P,te,l,d,h)){w=!1;break}}return h.delete(i),h.delete(s),w}function At(i){return Wr(Ya(i,g,Za),i+"")}function Pr(i){return ra(i,Ye,qr)}function Ar(i){return ra(i,vt,Ba)}var Yr=Ri?function(i){return Ri.get(i)}:km;function ri(i){for(var s=i.name+"",l=Mn[s],d=ge.call(Mn,s)?l.length:0;d--;){var u=l[d],h=u.func;if(null==h||h==i)return u.name}return s}function Nn(i){return(ge.call(_,"placeholder")?_:i).placeholder}function L(){var i=_.iteratee||Tm;return i=i===Tm?Mr:i,arguments.length?i(arguments[0],arguments[1]):i}function Yi(i,s){var l=i.__data__;return function hc(i){var s=typeof i;return"string"==s||"number"==s||"symbol"==s||"boolean"==s?"__proto__"!==i:null===i}(s)?l["string"==typeof s?"string":"hash"]:l.map}function Ur(i){for(var s=Ye(i),l=s.length;l--;){var d=s[l],u=i[d];s[l]=[d,u,Pa(u)]}return s}function un(i,s){var l=function Il(v,j){return null==v?g:v[j]}(i,s);return aa(l)?l:g}var qr=br?function(i){return null==i?[]:(i=he(i),Kt(br(i),function(s){return Qs.call(i,s)}))}:Rm,Ba=br?function(i){for(var s=[];i;)Zt(s,qr(i)),i=Ii(i);return s}:Rm,Ae=Qe;function Xa(i,s,l){for(var d=-1,u=(s=rn(s,i)).length,h=!1;++d<u;){var f=wt(s[d]);if(!(h=null!=i&&l(i,f)))break;i=i[f]}return h||++d!=u?h:!!(u=null==i?0:i.length)&&oo(u)&&Yt(f,u)&&(H(i)||oi(i))}function Qr(i){return"function"!=typeof i.constructor||si(i)?{}:On(Ii(i))}function _c(i){return H(i)||oi(i)||!!(Hs&&i&&i[Hs])}function Yt(i,s){var l=typeof i;return!!(s=s??Ue)&&("number"==l||"symbol"!=l&&No.test(i))&&i>-1&&i%1==0&&i<s}function He(i,s,l){if(!xe(l))return!1;var d=typeof s;return!!("number"==d?bt(l)&&Yt(s,l.length):"string"==d&&s in l)&&Ut(l[s],i)}function Hr(i,s){if(H(i))return!1;var l=typeof i;return!("number"!=l&&"symbol"!=l&&"boolean"!=l&&null!=i&&!xt(i))||xo.test(i)||!To.test(i)||null!=s&&i in he(s)}function zr(i){var s=ri(i),l=_[s];if("function"!=typeof l||!(s in ie.prototype))return!1;if(i===l)return!0;var d=Yr(l);return!!d&&i===d[0]}(vr&&Ae(new vr(new ArrayBuffer(1)))!=vn||Hn&&Ae(new Hn)!=St||Cr&&Ae(Cr.resolve())!=ss||Rn&&Ae(new Rn)!=jt||zn&&Ae(new zn)!=An)&&(Ae=function(i){var s=Qe(i),l=s==Dt?i.constructor:g,d=l?gn(l):"";if(d)switch(d){case Hl:return vn;case zl:return St;case Jl:return ss;case Wl:return jt;case Kl:return An}return s});var bc=bi?_n:Mm;function si(i){var s=i&&i.constructor;return i===("function"==typeof s&&s.prototype||kn)}function Pa(i){return i==i&&!xe(i)}function Aa(i,s){return function(l){return null!=l&&l[i]===s&&(s!==g||i in he(l))}}function Ya(i,s,l){return s=we(s===g?i.length-1:s,0),function(){for(var d=arguments,u=-1,h=we(d.length-s,0),f=S(h);++u<h;)f[u]=d[s+u];u=-1;for(var b=S(s+1);++u<s;)b[u]=d[u];return b[s]=l(f),it(i,this,b)}}function Ua(i,s){return s.length<2?i:pn(i,ht(s,0,-1))}function Jr(i,s){if(("constructor"!==s||"function"!=typeof i[s])&&"__proto__"!=s)return i[s]}var qa=Ha(_a),ai=Xl||function(i,s){return je.setTimeout(i,s)},Wr=Ha(Qd);function Qa(i,s,l){var d=s+"";return Wr(i,function gc(i,s){var l=s.length;if(!l)return i;var d=l-1;return s[d]=(l>1?"& ":"")+s[d],s=s.join(l>2?", ":" "),i.replace(tt,"{\n/* [wrapped with "+s+"] */\n")}(d,function yc(i,s){return pt(ke,function(l){var d="_."+l[0];s&l[1]&&!pi(i,d)&&i.push(d)}),i.sort()}(function mc(i){var s=i.match(Le);return s?s[1].split($e):[]}(d),l)))}function Ha(i){var s=0,l=0;return function(){var d=Ul(),u=16-(d-l);if(l=d,u>0){if(++s>=800)return arguments[0]}else s=0;return i.apply(g,arguments)}}function Ui(i,s){var l=-1,d=i.length,u=d-1;for(s=s===g?d:s;++l<s;){var h=Nr(l,u),f=i[h];i[h]=i[l],i[l]=f}return i.length=s,i}var za=function vc(i){var s=so(i,function(d){return 500===l.size&&l.clear(),d}),l=s.cache;return s}(function(i){var s=[];return 46===i.charCodeAt(0)&&s.push(""),i.replace(It,function(l,d,u,h){s.push(u?h.replace(ko,"$1"):d||l)}),s});function wt(i){if("string"==typeof i||xt(i))return i;var s=i+"";return"0"==s&&1/i==-We?"-0":s}function gn(i){if(null!=i){try{return vi.call(i)}catch{}try{return i+""}catch{}}return""}function Ja(i){if(i instanceof ie)return i.clone();var s=new gt(i.__wrapped__,i.__chain__);return s.__actions__=Ze(i.__actions__),s.__index__=i.__index__,s.__values__=i.__values__,s}var Rc=J(function(i,s){return Ne(i)?mn(i,De(s,1,Ne,!0)):[]}),Mc=J(function(i,s){var l=ft(s);return Ne(l)&&(l=g),Ne(i)?mn(i,De(s,1,Ne,!0),L(l,2)):[]}),Oc=J(function(i,s){var l=ft(s);return Ne(l)&&(l=g),Ne(i)?mn(i,De(s,1,Ne,!0),g,l):[]});function Wa(i,s,l){var d=null==i?0:i.length;if(!d)return-1;var u=null==l?0:K(l);return u<0&&(u=we(d+u,0)),an(i,L(s,3),u)}function Ka(i,s,l){var d=null==i?0:i.length;if(!d)return-1;var u=d-1;return l!==g&&(u=K(l),u=l<0?we(d+u,0):Pe(u,d-1)),an(i,L(s,3),u,!0)}function Za(i){return null!=i&&i.length?De(i,1):[]}function eo(i){return i&&i.length?i[0]:g}var Xc=J(function(i){var s=Se(i,Lr);return s.length&&s[0]===i[0]?kr(s):[]}),Pc=J(function(i){var s=ft(i),l=Se(i,Lr);return s===ft(l)?s=g:l.pop(),l.length&&l[0]===i[0]?kr(l,L(s,2)):[]}),to=J(function(i){var s=ft(i),l=Se(i,Lr);return(s="function"==typeof s?s:g)&&l.pop(),l.length&&l[0]===i[0]?kr(l,g,s):[]});function ft(i){var s=null==i?0:i.length;return s?i[s-1]:g}var qc=J(no);function no(i,s){return i&&i.length&&s&&s.length?wr(i,s):i}var zc=At(function(i,s){var l=null==i?0:i.length,d=jr(i,s);return ga(i,Se(s,function(u){return Yt(u,l)?+u:u}).sort(Ta)),d});function Kr(i){return null==i?i:Ql.call(i)}var mm=J(function(i){return nn(De(i,1,Ne,!0))}),pm=J(function(i){var s=ft(i);return Ne(s)&&(s=g),nn(De(i,1,Ne,!0),L(s,2))}),um=J(function(i){var s=ft(i);return s="function"==typeof s?s:g,nn(De(i,1,Ne,!0),g,s)});function a(i){if(!i||!i.length)return[];var s=0;return i=Kt(i,function(l){if(Ne(l))return s=we(l.length,s),!0}),gr(s,function(l){return Se(i,mr(l))})}function m(i,s){if(!i||!i.length)return[];var l=a(i);return null==s?l:Se(l,function(d){return it(s,g,d)})}var t=J(function(i,s){return Ne(i)?mn(i,s):[]}),r=J(function(i){return Vr(Kt(i,Ne))}),n=J(function(i){var s=ft(i);return Ne(s)&&(s=g),Vr(Kt(i,Ne),L(s,2))}),o=J(function(i){var s=ft(i);return s="function"==typeof s?s:g,Vr(Kt(i,Ne),g,s)}),p=J(a),ne=J(function(i){var s=i.length,l=s>1?i[s-1]:g;return l="function"==typeof l?(i.pop(),l):g,m(i,l)});function re(i){var s=_(i);return s.__chain__=!0,s}function se(i,s){return s(i)}var W=At(function(i){var s=i.length,l=s?i[0]:0,d=this.__wrapped__,u=function(h){return jr(h,i)};return!(s>1||this.__actions__.length)&&d instanceof ie&&Yt(l)?((d=d.slice(l,+l+(s?1:0))).__actions__.push({func:se,args:[u],thisArg:g}),new gt(d,this.__chain__).thru(function(h){return s&&!h.length&&h.push(g),h})):this.thru(u)}),at=$i(function(i,s,l){ge.call(i,l)?++i[l]:$t(i,l,1)}),ip=Fa(Wa),rp=Fa(Ka);function Om(i,s){return(H(i)?pt:Bt)(i,L(s,3))}function Fm(i,s){return(H(i)?pl:ta)(i,L(s,3))}var lp=$i(function(i,s,l){ge.call(i,l)?i[l].push(s):$t(i,l,[s])}),cp=J(function(i,s,l){var d=-1,u="function"==typeof s,h=bt(i)?S(i.length):[];return Bt(i,function(f){h[++d]=u?it(s,f,l):Zn(f,s,l)}),h}),mp=$i(function(i,s,l){$t(i,l,s)});function io(i,s){return(H(i)?Se:la)(i,L(s,3))}var up=$i(function(i,s,l){i[l?0:1].push(s)},function(){return[[],[]]}),jp=J(function(i,s){if(null==i)return[];var l=s.length;return l>1&&He(i,s[0],s[1])?s=[]:l>2&&He(s[0],s[1],s[2])&&(s=[s[0]]),pa(i,De(s,1),[])}),ro=Bl||function(){return je.Date.now()};function wm(i,s,l){return s=l?g:s,Pt(i,Y,g,g,g,g,s=i&&null==s?i.length:s)}function Nm(i,s){var l;if("function"!=typeof s)throw new ut(ue);return i=K(i),function(){return--i>0&&(l=s.apply(this,arguments)),i<=1&&(s=g),l}}var fm=J(function(i,s,l){var d=1;if(l.length){var u=en(l,Nn(fm));d|=32}return Pt(i,d,s,l,u)}),Gm=J(function(i,s,l){var d=3;if(l.length){var u=en(l,Nn(Gm));d|=32}return Pt(s,d,i,l,u)});function Vm(i,s,l){var d,u,h,f,b,C,I=0,y=!1,T=!1,w=!0;if("function"!=typeof i)throw new ut(ue);function G(Ge){var qt=d,fn=u;return d=u=g,I=Ge,f=i.apply(fn,qt)}function A(Ge){var qt=Ge-C;return C===g||qt>=s||qt<0||T&&Ge-I>=h}function de(){var Ge=ro();if(A(Ge))return me(Ge);b=ai(de,function te(Ge){var np=s-(Ge-C);return T?Pe(np,h-(Ge-I)):np}(Ge))}function me(Ge){return b=g,w&&d?G(Ge):(d=u=g,f)}function Rt(){var Ge=ro(),qt=A(Ge);if(d=arguments,u=this,C=Ge,qt){if(b===g)return function P(Ge){return I=Ge,b=ai(de,s),y?G(Ge):f}(C);if(T)return Sa(b),b=ai(de,s),G(C)}return b===g&&(b=ai(de,s)),f}return s=Nt(s)||0,xe(l)&&(y=!!l.leading,h=(T="maxWait"in l)?we(Nt(l.maxWait)||0,s):h,w="trailing"in l?!!l.trailing:w),Rt.cancel=function kt(){b!==g&&Sa(b),I=0,d=C=u=b=g},Rt.flush=function ot(){return b===g?f:me(ro())},Rt}var yp=J(function(i,s){return Ir(i,1,s)}),Tp=J(function(i,s,l){return Ir(i,Nt(s)||0,l)});function so(i,s){if("function"!=typeof i||null!=s&&"function"!=typeof s)throw new ut(ue);var l=function(){var d=arguments,u=s?s.apply(this,d):d[0],h=l.cache;if(h.has(u))return h.get(u);var f=i.apply(this,d);return l.cache=h.set(u,f)||h,f};return l.cache=new(so.Cache||Lt),l}function ao(i){if("function"!=typeof i)throw new ut(ue);return function(){var s=arguments;switch(s.length){case 0:return!i.call(this);case 1:return!i.call(this,s[0]);case 2:return!i.call(this,s[0],s[1]);case 3:return!i.call(this,s[0],s[1],s[2])}return!i.apply(this,s)}}so.Cache=Lt;var Rp=Jd(function(i,s){var l=(s=1==s.length&&H(s[0])?Se(s[0],rt(L())):Se(De(s,1),rt(L()))).length;return J(function(d){for(var u=-1,h=Pe(d.length,l);++u<h;)d[u]=s[u].call(this,d[u]);return it(i,this,d)})}),bm=J(function(i,s){var l=en(s,Nn(bm));return Pt(i,32,g,s,l)}),Lm=J(function(i,s){var l=en(s,Nn(Lm));return Pt(i,64,g,s,l)}),Mp=At(function(i,s){return Pt(i,256,g,g,g,s)});function Ut(i,s){return i===s||i!=i&&s!=s}var Xp=Ai(xr),Pp=Ai(function(i,s){return i>=s}),oi=sa(function(){return arguments}())?sa:function(i){return Re(i)&&ge.call(i,"callee")&&!Qs.call(i,"callee")},H=S.isArray,Ap=Rs?rt(Rs):function Ed(i){return Re(i)&&Qe(i)==Yn};function bt(i){return null!=i&&oo(i.length)&&!_n(i)}function Ne(i){return Re(i)&&bt(i)}var Gn=Pl||Mm,Up=Ms?rt(Ms):function Dd(i){return Re(i)&&Qe(i)==$n};function vm(i){if(!Re(i))return!1;var s=Qe(i);return s==Ve||"[object DOMException]"==s||"string"==typeof i.message&&"string"==typeof i.name&&!ts(i)}function _n(i){if(!xe(i))return!1;var s=Qe(i);return s==Ke||s==rs||"[object AsyncFunction]"==s||"[object Proxy]"==s}function $m(i){return"number"==typeof i&&i==K(i)}function oo(i){return"number"==typeof i&&i>-1&&i%1==0&&i<=Ue}function xe(i){var s=typeof i;return null!=i&&("object"==s||"function"==s)}function Re(i){return null!=i&&"object"==typeof i}var Bm=Os?rt(Os):function Ld(i){return Re(i)&&Ae(i)==St};function Xm(i){return"number"==typeof i||Re(i)&&Qe(i)==Bn}function ts(i){if(!Re(i)||Qe(i)!=Dt)return!1;var s=Ii(i);if(null===s)return!0;var l=ge.call(s,"constructor")&&s.constructor;return"function"==typeof l&&l instanceof l&&vi.call(l)==Dl}var Cm=Fs?rt(Fs):function Ei(i){return Re(i)&&Qe(i)==Xn},Pm=ws?rt(ws):function $d(i){return Re(i)&&Ae(i)==jt};function lo(i){return"string"==typeof i||!H(i)&&Re(i)&&Qe(i)==Pn}function xt(i){return"symbol"==typeof i||Re(i)&&Qe(i)==li}var qi=Ns?rt(Ns):function oa(i){return Re(i)&&oo(i.length)&&!!Ce[Qe(i)]},ou=Ai(Fr),lu=Ai(function(i,s){return i<=s});function Am(i){if(!i)return[];if(bt(i))return lo(i)?yt(i):Ze(i);if(Qn&&i[Qn])return function Tl(v){for(var j,S=[];!(j=v.next()).done;)S.push(j.value);return S}(i[Qn]());var s=Ae(i);return(s==St?hr:s==jt?_i:Qi)(i)}function hn(i){return i?(i=Nt(i))===We||i===-We?17976931348623157e292*(i<0?-1:1):i==i?i:0:0===i?i:0}function K(i){var s=hn(i),l=s%1;return s==s?l?s-l:s:0}function Ym(i){return i?cn(K(i),0,ae):0}function Nt(i){if("number"==typeof i)return i;if(xt(i))return NaN;if(xe(i)){var s="function"==typeof i.valueOf?i.valueOf():i;i=xe(s)?s+"":s}if("string"!=typeof i)return 0===i?i:+i;i=Ls(i);var l=Oo.test(i);return l||wo.test(i)?dl(i.slice(2),l?2:8):Mo.test(i)?NaN:+i}function Um(i){return Ft(i,vt(i))}function _e(i){return null==i?"":st(i)}var cu=Fn(function(i,s){if(si(s)||bt(s))Ft(s,Ye(s),i);else for(var l in s)ge.call(s,l)&&Kn(i,l,s[l])}),qm=Fn(function(i,s){Ft(s,vt(s),i)}),co=Fn(function(i,s,l,d){Ft(s,vt(s),i,d)}),mu=Fn(function(i,s,l,d){Ft(s,Ye(s),i,d)}),pu=At(jr),gu=J(function(i,s){i=he(i);var l=-1,d=s.length,u=d>2?s[2]:g;for(u&&He(s[0],s[1],u)&&(d=1);++l<d;)for(var h=s[l],f=vt(h),b=-1,C=f.length;++b<C;){var I=f[b],y=i[I];(y===g||Ut(y,kn[I])&&!ge.call(i,I))&&(i[I]=h[I])}return i}),_u=J(function(i){return i.push(g,La),it(Qm,g,i)});function Sm(i,s,l){var d=null==i?g:pn(i,s);return d===g?l:d}function jm(i,s){return null!=i&&Xa(i,s,wd)}var Tu=Na(function(i,s,l){null!=s&&"function"!=typeof s.toString&&(s=Ci.call(s)),i[s]=l},ym(Ct)),xu=Na(function(i,s,l){null!=s&&"function"!=typeof s.toString&&(s=Ci.call(s)),ge.call(i,s)?i[s].push(l):i[s]=[l]},L),ku=J(Zn);function Ye(i){return bt(i)?Ks(i):Or(i)}function vt(i){return bt(i)?Ks(i,!0):function Bd(i){if(!xe(i))return function Sc(i){var s=[];if(null!=i)for(var l in he(i))s.push(l);return s}(i);var s=si(i),l=[];for(var d in i)"constructor"==d&&(s||!ge.call(i,d))||l.push(d);return l}(i)}var Ou=Fn(function(i,s,l){Di(i,s,l)}),Qm=Fn(function(i,s,l,d){Di(i,s,l,d)}),Fu=At(function(i,s){var l={};if(null==i)return l;var d=!1;s=Se(s,function(h){return h=rn(h,i),d||(d=h.length>1),h}),Ft(i,Ar(i),l),d&&(l=_t(l,7,ac));for(var u=s.length;u--;)Dr(l,s[u]);return l}),Nu=At(function(i,s){return null==i?{}:function Pd(i,s){return ua(i,s,function(l,d){return jm(i,d)})}(i,s)});function Hm(i,s){if(null==i)return{};var l=Se(Ar(i),function(d){return[d]});return s=L(s),ua(i,l,function(d,u){return s(d,u[0])})}var zm=Da(Ye),Jm=Da(vt);function Qi(i){return null==i?[]:_r(i,Ye(i))}var Uu=wn(function(i,s,l){return s=s.toLowerCase(),i+(l?Wm(s):s)});function Wm(i){return Im(_e(i).toLowerCase())}function Km(i){return(i=_e(i))&&i.replace(Go,Cl).replace(jn,"")}var zu=wn(function(i,s,l){return i+(l?"-":"")+s.toLowerCase()}),Ju=wn(function(i,s,l){return i+(l?" ":"")+s.toLowerCase()}),Wu=Oa("toLowerCase"),rg=wn(function(i,s,l){return i+(l?"_":"")+s.toLowerCase()}),ag=wn(function(i,s,l){return i+(l?" ":"")+Im(s)}),hg=wn(function(i,s,l){return i+(l?" ":"")+s.toUpperCase()}),Im=Oa("toUpperCase");function Zm(i,s,l){return i=_e(i),(s=l?g:s)===g?function yl(v){return tl.test(v)}(i)?function Fl(v){return v.match(Zo)||[]}(i):function ui(v){return v.match(Be)||[]}(i):i.match(s)||[]}var ep=J(function(i,s){try{return it(i,g,s)}catch(l){return vm(l)?l:new U(l)}}),fg=At(function(i,s){return pt(s,function(l){l=wt(l),$t(i,l,fm(i[l],i))}),i});function ym(i){return function(){return i}}var Sg=wa(),jg=wa(!0);function Ct(i){return i}function Tm(i){return Mr("function"==typeof i?i:_t(i,1))}var Tg=J(function(i,s){return function(l){return Zn(l,i,s)}}),xg=J(function(i,s){return function(l){return Zn(i,l,s)}});function xm(i,s,l){var d=Ye(s),u=Gi(s,d);null==l&&(!xe(s)||!u.length&&d.length)&&(l=s,s=i,i=this,u=Gi(s,Ye(s)));var h=!(xe(l)&&"chain"in l&&!l.chain),f=_n(i);return pt(u,function(b){var C=s[b];i[b]=C,f&&(i.prototype[b]=function(){var I=this.__chain__;if(h||I){var y=i(this.__wrapped__);return(y.__actions__=Ze(this.__actions__)).push({func:C,args:arguments,thisArg:i}),y.__chain__=I,y}return C.apply(i,Zt([this.value()],arguments))})}),i}function km(){}var Mg=Br(Se),Og=Br(Gs),Fg=Br(cr);function tp(i){return Hr(i)?mr(wt(i)):function Ad(i){return function(s){return pn(s,i)}}(i)}var Ng=Ga(),Gg=Ga(!0);function Rm(){return[]}function Mm(){return!1}var Xg=Xi(function(i,s){return i+s},0),Pg=Xr("ceil"),Ag=Xi(function(i,s){return i/s},1),Yg=Xr("floor"),Wg=Xi(function(i,s){return i*s},1),Kg=Xr("round"),Zg=Xi(function(i,s){return i-s},0);return _.after=function Ip(i,s){if("function"!=typeof s)throw new ut(ue);return i=K(i),function(){if(--i<1)return s.apply(this,arguments)}},_.ary=wm,_.assign=cu,_.assignIn=qm,_.assignInWith=co,_.assignWith=mu,_.at=pu,_.before=Nm,_.bind=fm,_.bindAll=fg,_.bindKey=Gm,_.castArray=function Ep(){if(!arguments.length)return[];var i=arguments[0];return H(i)?i:[i]},_.chain=re,_.chunk=function Tc(i,s,l){s=(l?He(i,s,l):s===g)?1:we(K(s),0);var d=null==i?0:i.length;if(!d||s<1)return[];for(var u=0,h=0,f=S(xi(d/s));u<d;)f[h++]=ht(i,u,u+=s);return f},_.compact=function xc(i){for(var s=-1,l=null==i?0:i.length,d=0,u=[];++s<l;){var h=i[s];h&&(u[d++]=h)}return u},_.concat=function kc(){var i=arguments.length;if(!i)return[];for(var s=S(i-1),l=arguments[0],d=i;d--;)s[d-1]=arguments[d];return Zt(H(l)?Ze(l):[l],De(s,1))},_.cond=function bg(i){var s=null==i?0:i.length,l=L();return i=s?Se(i,function(d){if("function"!=typeof d[1])throw new ut(ue);return[l(d[0]),d[1]]}):[],J(function(d){for(var u=-1;++u<s;){var h=i[u];if(it(h[0],this,d))return it(h[1],this,d)}})},_.conforms=function vg(i){return function Rd(i){var s=Ye(i);return function(l){return wi(l,i,s)}}(_t(i,1))},_.constant=ym,_.countBy=at,_.create=function uu(i,s){var l=On(i);return null==s?l:ea(l,s)},_.curry=function Em(i,s,l){var d=Pt(i,8,g,g,g,g,g,s=l?g:s);return d.placeholder=Em.placeholder,d},_.curryRight=function Dm(i,s,l){var d=Pt(i,16,g,g,g,g,g,s=l?g:s);return d.placeholder=Dm.placeholder,d},_.debounce=Vm,_.defaults=gu,_.defaultsDeep=_u,_.defer=yp,_.delay=Tp,_.difference=Rc,_.differenceBy=Mc,_.differenceWith=Oc,_.drop=function Fc(i,s,l){var d=null==i?0:i.length;return d?ht(i,(s=l||s===g?1:K(s))<0?0:s,d):[]},_.dropRight=function wc(i,s,l){var d=null==i?0:i.length;return d?ht(i,0,(s=d-(s=l||s===g?1:K(s)))<0?0:s):[]},_.dropRightWhile=function Nc(i,s){return i&&i.length?Li(i,L(s,3),!0,!0):[]},_.dropWhile=function Gc(i,s){return i&&i.length?Li(i,L(s,3),!0):[]},_.fill=function Ec(i,s,l,d){var u=null==i?0:i.length;return u?(l&&"number"!=typeof l&&He(i,s,l)&&(l=0,d=u),function Od(i,s,l,d){var u=i.length;for((l=K(l))<0&&(l=-l>u?0:u+l),(d=d===g||d>u?u:K(d))<0&&(d+=u),d=l>d?0:Ym(d);l<d;)i[l++]=s;return i}(i,s,l,d)):[]},_.filter=function es(i,s){return(H(i)?Kt:na)(i,L(s,3))},_.flatMap=function sp(i,s){return De(io(i,s),1)},_.flatMapDeep=function ap(i,s){return De(io(i,s),We)},_.flatMapDepth=function op(i,s,l){return l=l===g?1:K(l),De(io(i,s),l)},_.flatten=Za,_.flattenDeep=function Dc(i){return null!=i&&i.length?De(i,We):[]},_.flattenDepth=function Vc(i,s){return null!=i&&i.length?De(i,s=s===g?1:K(s)):[]},_.flip=function xp(i){return Pt(i,512)},_.flow=Sg,_.flowRight=jg,_.fromPairs=function Lc(i){for(var s=-1,l=null==i?0:i.length,d={};++s<l;){var u=i[s];d[u[0]]=u[1]}return d},_.functions=function ju(i){return null==i?[]:Gi(i,Ye(i))},_.functionsIn=function Iu(i){return null==i?[]:Gi(i,vt(i))},_.groupBy=lp,_.initial=function Bc(i){return null!=i&&i.length?ht(i,0,-1):[]},_.intersection=Xc,_.intersectionBy=Pc,_.intersectionWith=to,_.invert=Tu,_.invertBy=xu,_.invokeMap=cp,_.iteratee=Tm,_.keyBy=mp,_.keys=Ye,_.keysIn=vt,_.map=io,_.mapKeys=function Ru(i,s){var l={};return s=L(s,3),Ot(i,function(d,u,h){$t(l,s(d,u,h),d)}),l},_.mapValues=function Mu(i,s){var l={};return s=L(s,3),Ot(i,function(d,u,h){$t(l,u,s(d,u,h))}),l},_.matches=function Ig(i){return da(_t(i,1))},_.matchesProperty=function yg(i,s){return ca(i,_t(s,1))},_.memoize=so,_.merge=Ou,_.mergeWith=Qm,_.method=Tg,_.methodOf=xg,_.mixin=xm,_.negate=ao,_.nthArg=function Rg(i){return i=K(i),J(function(s){return ma(s,i)})},_.omit=Fu,_.omitBy=function wu(i,s){return Hm(i,ao(L(s)))},_.once=function kp(i){return Nm(2,i)},_.orderBy=function pp(i,s,l,d){return null==i?[]:(H(s)||(s=null==s?[]:[s]),H(l=d?g:l)||(l=null==l?[]:[l]),pa(i,s,l))},_.over=Mg,_.overArgs=Rp,_.overEvery=Og,_.overSome=Fg,_.partial=bm,_.partialRight=Lm,_.partition=up,_.pick=Nu,_.pickBy=Hm,_.property=tp,_.propertyOf=function wg(i){return function(s){return null==i?g:pn(i,s)}},_.pull=qc,_.pullAll=no,_.pullAllBy=function Qc(i,s,l){return i&&i.length&&s&&s.length?wr(i,s,L(l,2)):i},_.pullAllWith=function Hc(i,s,l){return i&&i.length&&s&&s.length?wr(i,s,g,l):i},_.pullAt=zc,_.range=Ng,_.rangeRight=Gg,_.rearg=Mp,_.reject=function hp(i,s){return(H(i)?Kt:na)(i,ao(L(s,3)))},_.remove=function Jc(i,s){var l=[];if(!i||!i.length)return l;var d=-1,u=[],h=i.length;for(s=L(s,3);++d<h;){var f=i[d];s(f,d,i)&&(l.push(f),u.push(d))}return ga(i,u),l},_.rest=function Op(i,s){if("function"!=typeof i)throw new ut(ue);return J(i,s=s===g?s:K(s))},_.reverse=Kr,_.sampleSize=function bp(i,s,l){return s=(l?He(i,s,l):s===g)?1:K(s),(H(i)?yd:qd)(i,s)},_.set=function Eu(i,s,l){return null==i?i:ti(i,s,l)},_.setWith=function Du(i,s,l,d){return d="function"==typeof d?d:g,null==i?i:ti(i,s,l,d)},_.shuffle=function vp(i){return(H(i)?Td:Hd)(i)},_.slice=function Wc(i,s,l){var d=null==i?0:i.length;return d?(l&&"number"!=typeof l&&He(i,s,l)?(s=0,l=d):(s=null==s?0:K(s),l=l===g?d:K(l)),ht(i,s,l)):[]},_.sortBy=jp,_.sortedUniq=function rm(i){return i&&i.length?ha(i):[]},_.sortedUniqBy=function sm(i,s){return i&&i.length?ha(i,L(s,2)):[]},_.split=function sg(i,s,l){return l&&"number"!=typeof l&&He(i,s,l)&&(s=l=g),(l=l===g?ae:l>>>0)?(i=_e(i))&&("string"==typeof s||null!=s&&!Cm(s))&&!(s=st(s))&&Tn(i)?Xt(yt(i),0,l):i.split(s,l):[]},_.spread=function Fp(i,s){if("function"!=typeof i)throw new ut(ue);return s=null==s?0:we(K(s),0),J(function(l){var d=l[s],u=Xt(l,0,s);return d&&Zt(u,d),it(i,this,u)})},_.tail=function am(i){var s=null==i?0:i.length;return s?ht(i,1,s):[]},_.take=function om(i,s,l){return i&&i.length?ht(i,0,(s=l||s===g?1:K(s))<0?0:s):[]},_.takeRight=function lm(i,s,l){var d=null==i?0:i.length;return d?ht(i,(s=d-(s=l||s===g?1:K(s)))<0?0:s,d):[]},_.takeRightWhile=function dm(i,s){return i&&i.length?Li(i,L(s,3),!1,!0):[]},_.takeWhile=function cm(i,s){return i&&i.length?Li(i,L(s,3)):[]},_.tap=function oe(i,s){return s(i),i},_.throttle=function wp(i,s,l){var d=!0,u=!0;if("function"!=typeof i)throw new ut(ue);return xe(l)&&(d="leading"in l?!!l.leading:d,u="trailing"in l?!!l.trailing:u),Vm(i,s,{leading:d,maxWait:s,trailing:u})},_.thru=se,_.toArray=Am,_.toPairs=zm,_.toPairsIn=Jm,_.toPath=function $g(i){return H(i)?Se(i,wt):xt(i)?[i]:Ze(za(_e(i)))},_.toPlainObject=Um,_.transform=function Vu(i,s,l){var d=H(i),u=d||Gn(i)||qi(i);if(s=L(s,4),null==l){var h=i&&i.constructor;l=u?d?new h:[]:xe(i)&&_n(h)?On(Ii(i)):{}}return(u?pt:Ot)(i,function(f,b,C){return s(l,f,b,C)}),l},_.unary=function Np(i){return wm(i,1)},_.union=mm,_.unionBy=pm,_.unionWith=um,_.uniq=function gm(i){return i&&i.length?nn(i):[]},_.uniqBy=function _m(i,s){return i&&i.length?nn(i,L(s,2)):[]},_.uniqWith=function hm(i,s){return s="function"==typeof s?s:g,i&&i.length?nn(i,g,s):[]},_.unset=function Lu(i,s){return null==i||Dr(i,s)},_.unzip=a,_.unzipWith=m,_.update=function $u(i,s,l){return null==i?i:ba(i,s,$r(l))},_.updateWith=function Bu(i,s,l,d){return d="function"==typeof d?d:g,null==i?i:ba(i,s,$r(l),d)},_.values=Qi,_.valuesIn=function Xu(i){return null==i?[]:_r(i,vt(i))},_.without=t,_.words=Zm,_.wrap=function Gp(i,s){return bm($r(s),i)},_.xor=r,_.xorBy=n,_.xorWith=o,_.zip=p,_.zipObject=function c(i,s){return Ca(i||[],s||[],Kn)},_.zipObjectDeep=function D(i,s){return Ca(i||[],s||[],ti)},_.zipWith=ne,_.entries=zm,_.entriesIn=Jm,_.extend=qm,_.extendWith=co,xm(_,_),_.add=Xg,_.attempt=ep,_.camelCase=Uu,_.capitalize=Wm,_.ceil=Pg,_.clamp=function Pu(i,s,l){return l===g&&(l=s,s=g),l!==g&&(l=(l=Nt(l))==l?l:0),s!==g&&(s=(s=Nt(s))==s?s:0),cn(Nt(i),s,l)},_.clone=function Dp(i){return _t(i,4)},_.cloneDeep=function Lp(i){return _t(i,5)},_.cloneDeepWith=function $p(i,s){return _t(i,5,s="function"==typeof s?s:g)},_.cloneWith=function Vp(i,s){return _t(i,4,s="function"==typeof s?s:g)},_.conformsTo=function Bp(i,s){return null==s||wi(i,s,Ye(s))},_.deburr=Km,_.defaultTo=function Cg(i,s){return null==i||i!=i?s:i},_.divide=Ag,_.endsWith=function qu(i,s,l){i=_e(i),s=st(s);var d=i.length,u=l=l===g?d:cn(K(l),0,d);return(l-=s.length)>=0&&i.slice(l,u)==s},_.eq=Ut,_.escape=function Qu(i){return(i=_e(i))&&jo.test(i)?i.replace(os,Sl):i},_.escapeRegExp=function Hu(i){return(i=_e(i))&&Ee.test(i)?i.replace(Cn,"\\$&"):i},_.every=function Zr(i,s,l){var d=H(i)?Gs:Md;return l&&He(i,s,l)&&(s=g),d(i,L(s,3))},_.find=ip,_.findIndex=Wa,_.findKey=function hu(i,s){return gi(i,L(s,3),Ot)},_.findLast=rp,_.findLastIndex=Ka,_.findLastKey=function fu(i,s){return gi(i,L(s,3),Tr)},_.floor=Yg,_.forEach=Om,_.forEachRight=Fm,_.forIn=function bu(i,s){return null==i?i:yr(i,L(s,3),vt)},_.forInRight=function vu(i,s){return null==i?i:ia(i,L(s,3),vt)},_.forOwn=function Cu(i,s){return i&&Ot(i,L(s,3))},_.forOwnRight=function Su(i,s){return i&&Tr(i,L(s,3))},_.get=Sm,_.gt=Xp,_.gte=Pp,_.has=function yu(i,s){return null!=i&&Xa(i,s,Fd)},_.hasIn=jm,_.head=eo,_.identity=Ct,_.includes=function dp(i,s,l,d){i=bt(i)?i:Qi(i),l=l&&!d?K(l):0;var u=i.length;return l<0&&(l=we(u+l,0)),lo(i)?l<=u&&i.indexOf(s,l)>-1:!!u&&yn(i,s,l)>-1},_.indexOf=function $c(i,s,l){var d=null==i?0:i.length;if(!d)return-1;var u=null==l?0:K(l);return u<0&&(u=we(d+u,0)),yn(i,s,u)},_.inRange=function Au(i,s,l){return s=hn(s),l===g?(l=s,s=0):l=hn(l),function Nd(i,s,l){return i>=Pe(s,l)&&i<we(s,l)}(i=Nt(i),s,l)},_.invoke=ku,_.isArguments=oi,_.isArray=H,_.isArrayBuffer=Ap,_.isArrayLike=bt,_.isArrayLikeObject=Ne,_.isBoolean=function Yp(i){return!0===i||!1===i||Re(i)&&Qe(i)==Ln},_.isBuffer=Gn,_.isDate=Up,_.isElement=function qp(i){return Re(i)&&1===i.nodeType&&!ts(i)},_.isEmpty=function Qp(i){if(null==i)return!0;if(bt(i)&&(H(i)||"string"==typeof i||"function"==typeof i.splice||Gn(i)||qi(i)||oi(i)))return!i.length;var s=Ae(i);if(s==St||s==jt)return!i.size;if(si(i))return!Or(i).length;for(var l in i)if(ge.call(i,l))return!1;return!0},_.isEqual=function Hp(i,s){return ei(i,s)},_.isEqualWith=function zp(i,s,l){var d=(l="function"==typeof l?l:g)?l(i,s):g;return d===g?ei(i,s,g,l):!!d},_.isError=vm,_.isFinite=function Jp(i){return"number"==typeof i&&zs(i)},_.isFunction=_n,_.isInteger=$m,_.isLength=oo,_.isMap=Bm,_.isMatch=function Wp(i,s){return i===s||Rr(i,s,Ur(s))},_.isMatchWith=function Kp(i,s,l){return l="function"==typeof l?l:g,Rr(i,s,Ur(s),l)},_.isNaN=function Zp(i){return Xm(i)&&i!=+i},_.isNative=function eu(i){if(bc(i))throw new U("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return aa(i)},_.isNil=function nu(i){return null==i},_.isNull=function tu(i){return null===i},_.isNumber=Xm,_.isObject=xe,_.isObjectLike=Re,_.isPlainObject=ts,_.isRegExp=Cm,_.isSafeInteger=function iu(i){return $m(i)&&i>=-Ue&&i<=Ue},_.isSet=Pm,_.isString=lo,_.isSymbol=xt,_.isTypedArray=qi,_.isUndefined=function ru(i){return i===g},_.isWeakMap=function su(i){return Re(i)&&Ae(i)==An},_.isWeakSet=function au(i){return Re(i)&&"[object WeakSet]"==Qe(i)},_.join=function Ac(i,s){return null==i?"":Al.call(i,s)},_.kebabCase=zu,_.last=ft,_.lastIndexOf=function Yc(i,s,l){var d=null==i?0:i.length;if(!d)return-1;var u=d;return l!==g&&(u=(u=K(l))<0?we(d+u,0):Pe(u,d-1)),s==s?function kl(v,j,S){for(var N=S+1;N--;)if(v[N]===j)return N;return N}(i,s,u):an(i,Es,u,!0)},_.lowerCase=Ju,_.lowerFirst=Wu,_.lt=ou,_.lte=lu,_.max=function Ug(i){return i&&i.length?Ni(i,Ct,xr):g},_.maxBy=function qg(i,s){return i&&i.length?Ni(i,L(s,2),xr):g},_.mean=function Qg(i){return Ds(i,Ct)},_.meanBy=function Hg(i,s){return Ds(i,L(s,2))},_.min=function zg(i){return i&&i.length?Ni(i,Ct,Fr):g},_.minBy=function Jg(i,s){return i&&i.length?Ni(i,L(s,2),Fr):g},_.stubArray=Rm,_.stubFalse=Mm,_.stubObject=function Eg(){return{}},_.stubString=function Dg(){return""},_.stubTrue=function Vg(){return!0},_.multiply=Wg,_.nth=function Uc(i,s){return i&&i.length?ma(i,K(s)):g},_.noConflict=function kg(){return je._===this&&(je._=Vl),this},_.noop=km,_.now=ro,_.pad=function Ku(i,s,l){i=_e(i);var d=(s=K(s))?xn(i):0;if(!s||d>=s)return i;var u=(s-d)/2;return Pi(ki(u),l)+i+Pi(xi(u),l)},_.padEnd=function Zu(i,s,l){i=_e(i);var d=(s=K(s))?xn(i):0;return s&&d<s?i+Pi(s-d,l):i},_.padStart=function eg(i,s,l){i=_e(i);var d=(s=K(s))?xn(i):0;return s&&d<s?Pi(s-d,l)+i:i},_.parseInt=function tg(i,s,l){return l||null==s?s=0:s&&(s=+s),ql(_e(i).replace(rr,""),s||0)},_.random=function Yu(i,s,l){if(l&&"boolean"!=typeof l&&He(i,s,l)&&(s=l=g),l===g&&("boolean"==typeof s?(l=s,s=g):"boolean"==typeof i&&(l=i,i=g)),i===g&&s===g?(i=0,s=1):(i=hn(i),s===g?(s=i,i=0):s=hn(s)),i>s){var d=i;i=s,s=d}if(l||i%1||s%1){var u=Js();return Pe(i+u*(s-i+ll("1e-"+((u+"").length-1))),s)}return Nr(i,s)},_.reduce=function gp(i,s,l){var d=H(i)?dr:Vs,u=arguments.length<3;return d(i,L(s,4),l,u,Bt)},_.reduceRight=function _p(i,s,l){var d=H(i)?ul:Vs,u=arguments.length<3;return d(i,L(s,4),l,u,ta)},_.repeat=function ng(i,s,l){return s=(l?He(i,s,l):s===g)?1:K(s),Gr(_e(i),s)},_.replace=function ig(){var i=arguments,s=_e(i[0]);return i.length<3?s:s.replace(i[1],i[2])},_.result=function Gu(i,s,l){var d=-1,u=(s=rn(s,i)).length;for(u||(u=1,i=g);++d<u;){var h=null==i?g:i[wt(s[d])];h===g&&(d=u,h=l),i=_n(h)?h.call(i):h}return i},_.round=Kg,_.runInContext=v,_.sample=function fp(i){return(H(i)?Zs:Ud)(i)},_.size=function Cp(i){if(null==i)return 0;if(bt(i))return lo(i)?xn(i):i.length;var s=Ae(i);return s==St||s==jt?i.size:Or(i).length},_.snakeCase=rg,_.some=function Sp(i,s,l){var d=H(i)?cr:zd;return l&&He(i,s,l)&&(s=g),d(i,L(s,3))},_.sortedIndex=function Kc(i,s){return Vi(i,s)},_.sortedIndexBy=function Zc(i,s,l){return Er(i,s,L(l,2))},_.sortedIndexOf=function em(i,s){var l=null==i?0:i.length;if(l){var d=Vi(i,s);if(d<l&&Ut(i[d],s))return d}return-1},_.sortedLastIndex=function tm(i,s){return Vi(i,s,!0)},_.sortedLastIndexBy=function nm(i,s,l){return Er(i,s,L(l,2),!0)},_.sortedLastIndexOf=function im(i,s){if(null!=i&&i.length){var d=Vi(i,s,!0)-1;if(Ut(i[d],s))return d}return-1},_.startCase=ag,_.startsWith=function og(i,s,l){return i=_e(i),l=null==l?0:cn(K(l),0,i.length),s=st(s),i.slice(l,l+s.length)==s},_.subtract=Zg,_.sum=function e1(i){return i&&i.length?ur(i,Ct):0},_.sumBy=function t1(i,s){return i&&i.length?ur(i,L(s,2)):0},_.template=function lg(i,s,l){var d=_.templateSettings;l&&He(i,s,l)&&(s=g),i=_e(i),s=co({},s,d,Va);var b,C,u=co({},s.imports,d.imports,Va),h=Ye(u),f=_r(u,h),I=0,y=s.interpolate||di,T="__p += '",w=fr((s.escape||di).source+"|"+y.source+"|"+(y===ls?Ro:di).source+"|"+(s.evaluate||di).source+"|$","g"),G="//# sourceURL="+(ge.call(s,"sourceURL")?(s.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++il+"]")+"\n";i.replace(w,function(A,de,me,kt,ot,Rt){return me||(me=kt),T+=i.slice(I,Rt).replace(Eo,jl),de&&(b=!0,T+="' +\n__e("+de+") +\n'"),ot&&(C=!0,T+="';\n"+ot+";\n__p += '"),me&&(T+="' +\n((__t = ("+me+")) == null ? '' : __t) +\n'"),I=Rt+A.length,A}),T+="';\n";var P=ge.call(s,"variable")&&s.variable;if(P){if(Xe.test(P))throw new U("Invalid `variable` option passed into `_.template`")}else T="with (obj) {\n"+T+"\n}\n";T=(C?T.replace(bo,""):T).replace(vo,"$1").replace(Co,"$1;"),T="function("+(P||"obj")+") {\n"+(P?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(b?", __e = _.escape":"")+(C?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+T+"return __p\n}";var te=ep(function(){return pe(h,G+"return "+T).apply(g,f)});if(te.source=T,vm(te))throw te;return te},_.times=function Lg(i,s){if((i=K(i))<1||i>Ue)return[];var l=ae,d=Pe(i,ae);s=L(s),i-=ae;for(var u=gr(d,s);++l<i;)s(l);return u},_.toFinite=hn,_.toInteger=K,_.toLength=Ym,_.toLower=function dg(i){return _e(i).toLowerCase()},_.toNumber=Nt,_.toSafeInteger=function du(i){return i?cn(K(i),-Ue,Ue):0===i?i:0},_.toString=_e,_.toUpper=function cg(i){return _e(i).toUpperCase()},_.trim=function mg(i,s,l){if((i=_e(i))&&(l||s===g))return Ls(i);if(!i||!(s=st(s)))return i;var d=yt(i),u=yt(s);return Xt(d,$s(d,u),Bs(d,u)+1).join("")},_.trimEnd=function pg(i,s,l){if((i=_e(i))&&(l||s===g))return i.slice(0,As(i)+1);if(!i||!(s=st(s)))return i;var d=yt(i);return Xt(d,0,Bs(d,yt(s))+1).join("")},_.trimStart=function ug(i,s,l){if((i=_e(i))&&(l||s===g))return i.replace(rr,"");if(!i||!(s=st(s)))return i;var d=yt(i);return Xt(d,$s(d,yt(s))).join("")},_.truncate=function gg(i,s){var l=30,d="...";if(xe(s)){var u="separator"in s?s.separator:u;l="length"in s?K(s.length):l,d="omission"in s?st(s.omission):d}var h=(i=_e(i)).length;if(Tn(i)){var f=yt(i);h=f.length}if(l>=h)return i;var b=l-xn(d);if(b<1)return d;var C=f?Xt(f,0,b).join(""):i.slice(0,b);if(u===g)return C+d;if(f&&(b+=C.length-b),Cm(u)){if(i.slice(b).search(u)){var I,y=C;for(u.global||(u=fr(u.source,_e(ds.exec(u))+"g")),u.lastIndex=0;I=u.exec(y);)var T=I.index;C=C.slice(0,T===g?b:T)}}else if(i.indexOf(st(u),b)!=b){var w=C.lastIndexOf(u);w>-1&&(C=C.slice(0,w))}return C+d},_.unescape=function _g(i){return(i=_e(i))&&So.test(i)?i.replace(as,Rl):i},_.uniqueId=function Bg(i){var s=++El;return _e(i)+s},_.upperCase=hg,_.upperFirst=Im,_.each=Om,_.eachRight=Fm,_.first=eo,xm(_,function(){var i={};return Ot(_,function(s,l){ge.call(_.prototype,l)||(i[l]=s)}),i}(),{chain:!1}),_.VERSION="4.17.21",pt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(i){_[i].placeholder=_}),pt(["drop","take"],function(i,s){ie.prototype[i]=function(l){l=l===g?1:we(K(l),0);var d=this.__filtered__&&!s?new ie(this):this.clone();return d.__filtered__?d.__takeCount__=Pe(l,d.__takeCount__):d.__views__.push({size:Pe(l,ae),type:i+(d.__dir__<0?"Right":"")}),d},ie.prototype[i+"Right"]=function(l){return this.reverse()[i](l).reverse()}}),pt(["filter","map","takeWhile"],function(i,s){var l=s+1,d=1==l||3==l;ie.prototype[i]=function(u){var h=this.clone();return h.__iteratees__.push({iteratee:L(u,3),type:l}),h.__filtered__=h.__filtered__||d,h}}),pt(["head","last"],function(i,s){var l="take"+(s?"Right":"");ie.prototype[i]=function(){return this[l](1).value()[0]}}),pt(["initial","tail"],function(i,s){var l="drop"+(s?"":"Right");ie.prototype[i]=function(){return this.__filtered__?new ie(this):this[l](1)}}),ie.prototype.compact=function(){return this.filter(Ct)},ie.prototype.find=function(i){return this.filter(i).head()},ie.prototype.findLast=function(i){return this.reverse().find(i)},ie.prototype.invokeMap=J(function(i,s){return"function"==typeof i?new ie(this):this.map(function(l){return Zn(l,i,s)})}),ie.prototype.reject=function(i){return this.filter(ao(L(i)))},ie.prototype.slice=function(i,s){i=K(i);var l=this;return l.__filtered__&&(i>0||s<0)?new ie(l):(i<0?l=l.takeRight(-i):i&&(l=l.drop(i)),s!==g&&(l=(s=K(s))<0?l.dropRight(-s):l.take(s-i)),l)},ie.prototype.takeRightWhile=function(i){return this.reverse().takeWhile(i).reverse()},ie.prototype.toArray=function(){return this.take(ae)},Ot(ie.prototype,function(i,s){var l=/^(?:filter|find|map|reject)|While$/.test(s),d=/^(?:head|last)$/.test(s),u=_[d?"take"+("last"==s?"Right":""):s],h=d||/^find/.test(s);u&&(_.prototype[s]=function(){var f=this.__wrapped__,b=d?[1]:arguments,C=f instanceof ie,I=b[0],y=C||H(f),T=function(de){var me=u.apply(_,Zt([de],b));return d&&w?me[0]:me};y&&l&&"function"==typeof I&&1!=I.length&&(C=y=!1);var w=this.__chain__,P=h&&!w,te=C&&!this.__actions__.length;if(!h&&y){f=te?f:new ie(this);var A=i.apply(f,b);return A.__actions__.push({func:se,args:[T],thisArg:g}),new gt(A,w)}return P&&te?i.apply(this,b):(A=this.thru(T),P?d?A.value()[0]:A.value():A)})}),pt(["pop","push","shift","sort","splice","unshift"],function(i){var s=fi[i],l=/^(?:push|sort|unshift)$/.test(i)?"tap":"thru",d=/^(?:pop|shift)$/.test(i);_.prototype[i]=function(){var u=arguments;if(d&&!this.__chain__){var h=this.value();return s.apply(H(h)?h:[],u)}return this[l](function(f){return s.apply(H(f)?f:[],u)})}}),Ot(ie.prototype,function(i,s){var l=_[s];if(l){var d=l.name+"";ge.call(Mn,d)||(Mn[d]=[]),Mn[d].push({name:s,func:l})}}),Mn[Bi(g,2).name]=[{name:"wrapper",func:g}],ie.prototype.clone=function Zl(){var i=new ie(this.__wrapped__);return i.__actions__=Ze(this.__actions__),i.__dir__=this.__dir__,i.__filtered__=this.__filtered__,i.__iteratees__=Ze(this.__iteratees__),i.__takeCount__=this.__takeCount__,i.__views__=Ze(this.__views__),i},ie.prototype.reverse=function ed(){if(this.__filtered__){var i=new ie(this);i.__dir__=-1,i.__filtered__=!0}else(i=this.clone()).__dir__*=-1;return i},ie.prototype.value=function td(){var i=this.__wrapped__.value(),s=this.__dir__,l=H(i),d=s<0,u=l?i.length:0,h=function cc(i,s,l){for(var d=-1,u=l.length;++d<u;){var h=l[d],f=h.size;switch(h.type){case"drop":i+=f;break;case"dropRight":s-=f;break;case"take":s=Pe(s,i+f);break;case"takeRight":i=we(i,s-f)}}return{start:i,end:s}}(0,u,this.__views__),f=h.start,b=h.end,C=b-f,I=d?b:f-1,y=this.__iteratees__,T=y.length,w=0,G=Pe(C,this.__takeCount__);if(!l||!d&&u==C&&G==C)return va(i,this.__actions__);var P=[];e:for(;C--&&w<G;){for(var te=-1,A=i[I+=s];++te<T;){var de=y[te],kt=de.type,ot=(0,de.iteratee)(A);if(2==kt)A=ot;else if(!ot){if(1==kt)continue e;break e}}P[w++]=A}return P},_.prototype.at=W,_.prototype.chain=function q(){return re(this)},_.prototype.commit=function Q(){return new gt(this.value(),this.__chain__)},_.prototype.next=function V(){this.__values__===g&&(this.__values__=Am(this.value()));var i=this.__index__>=this.__values__.length;return{done:i,value:i?g:this.__values__[this.__index__++]}},_.prototype.plant=function ce(i){for(var s,l=this;l instanceof Oi;){var d=Ja(l);d.__index__=0,d.__values__=g,s?u.__wrapped__=d:s=d;var u=d;l=l.__wrapped__}return u.__wrapped__=i,s},_.prototype.reverse=function le(){var i=this.__wrapped__;if(i instanceof ie){var s=i;return this.__actions__.length&&(s=new ie(this)),(s=s.reverse()).__actions__.push({func:se,args:[Kr],thisArg:g}),new gt(s,this.__chain__)}return this.thru(Kr)},_.prototype.toJSON=_.prototype.valueOf=_.prototype.value=function Te(){return va(this.__wrapped__,this.__actions__)},_.prototype.first=_.prototype.head,Qn&&(_.prototype[Qn]=function E(){return this}),_}();je._=hi,(k=function(){return hi}.call(lt,x,lt,Gt))!==g&&(Gt.exports=k)}.call(this)}}]);
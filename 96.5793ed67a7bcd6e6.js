"use strict";(self.webpackChunkvelzon=self.webpackChunkvelzon||[]).push([[96],{56701:(L,D,o)=>{o.d(D,{g:()=>R});var t=o(54438),m=o(62984),v=o(51188),C=o(3888);let R=(()=>{class _{constructor(y,T,h){this.authservice=y,this.router=T,this.alertService=h}canActivate(y){return!!this.authservice.permissionMatch(y.data.permission)||(this.alertService.error("general.notAllow.notAllowPageMessage"),this.router.navigate(["/"]),!1)}static{this.\u0275fac=function(T){return new(T||_)(t.KVO(m.J),t.KVO(v.Ix),t.KVO(C.u))}}static{this.\u0275prov=t.jDH({token:_,factory:_.\u0275fac,providedIn:"root"})}}return _})()},56131:(L,D,o)=>{o.d(D,{E:()=>v});var t=o(7673),m=o(99437);class v{constructor(R,_,I){this.router=R,this.BaseService=_,this.alertService=I,this.pagination={pageNumber:1,pageSize:10}}resolve(R,_){return this.BaseService.get(this.pagination).pipe((0,m.W)(I=>(this.router.navigate([""]),this.alertService.error(I),(0,t.of)(null))))}}},39096:(L,D,o)=>{o.r(D),o.d(D,{marketingModule:()=>Ze});var t=o(60177),m=o(89417),v=o(69005),C=o(91022),R=o(70255),_=o(63789),I=o(98982),y=o.n(I),T=o(53978),h=o(8147),O=o(45286),P=o(65430),B=o(41631),F=o(1530),X=o(72510),f=o(51188),E=o(56977),u=o(37021),x=o(35335),b=o(45236),k=o(70980),l=o(99437),c=o(18810),M=o(75622),j=o(36158),e=o(54438),N=o(3888),V=o(67569),K=o(45312),z=o(21626);let Y=(()=>{class s extends V.d{constructor(n){super(n,K.c.apiUrl+"ProductOffer/")}GetLookups(){return this.http.get(this.baseUrl+"GetLookups")}static{this.\u0275fac=function(i){return new(i||s)(e.KVO(z.Qq))}}static{this.\u0275prov=e.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();var H=o(54384),Q=o(84205),J=o(75922),Z=o(26364),q=o(29935);function ee(s,p){1&s&&(e.j41(0,"div",70),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function te(s,p){1&s&&(e.j41(0,"div",70),e.EFF(1," general.message.filedIdRequired"),e.k0s())}function ne(s,p){1&s&&(e.j41(0,"div",70),e.EFF(1," general.message.filedIdRequired"),e.k0s())}function re(s,p){1&s&&(e.j41(0,"div",71),e.nrm(1,"span",72)(2,"span",73),e.k0s())}function ie(s,p){1&s&&(e.j41(0,"div",71),e.nrm(1,"span",72)(2,"span",74),e.k0s())}function se(s,p){if(1&s){const n=e.RV6();e.j41(0,"div",22),e.nrm(1,"label",75),e.j41(2,"div",30)(3,"input",76,6),e.mxI("ngModelChange",function(r){e.eBV(n);const a=e.XpG();return e.DH7(a.form.discountAmount,r)||(a.form.discountAmount=r),e.Njj(r)}),e.k0s(),e.j41(5,"span",77),e.EFF(6,"%"),e.k0s()()()}if(2&s){const n=e.XpG();e.R7$(3),e.R50("ngModel",n.form.discountAmount)}}function oe(s,p){if(1&s){const n=e.RV6();e.j41(0,"div",22),e.nrm(1,"label",78),e.j41(2,"div",30)(3,"input",79,7),e.mxI("ngModelChange",function(r){e.eBV(n);const a=e.XpG();return e.DH7(a.form.discountRate,r)||(a.form.discountRate=r),e.Njj(r)}),e.k0s(),e.nrm(5,"span",80),e.k0s()()}if(2&s){const n=e.XpG();e.R7$(3),e.R50("ngModel",n.form.discountRate)}}function ae(s,p){if(1&s){const n=e.RV6();e.j41(0,"div",22),e.nrm(1,"label",81),e.j41(2,"div",30)(3,"input",82,8),e.mxI("ngModelChange",function(r){e.eBV(n);const a=e.XpG();return e.DH7(a.form.quantityX,r)||(a.form.quantityX=r),e.Njj(r)}),e.k0s()(),e.nrm(5,"label",83),e.k0s()}if(2&s){const n=e.XpG();e.R7$(3),e.R50("ngModel",n.form.quantityX)}}function le(s,p){if(1&s){const n=e.RV6();e.j41(0,"tr",84)(1,"td",85),e.EFF(2),e.k0s(),e.j41(3,"td",85),e.EFF(4),e.k0s(),e.j41(5,"td",85),e.EFF(6),e.k0s(),e.j41(7,"td",85)(8,"button",86),e.bIt("click",function(){const r=e.eBV(n).index,a=e.XpG();return e.Njj(a.onDelete(a.typeX,r))}),e.nrm(9,"i",87),e.k0s()()()}if(2&s){const n=p.$implicit,i=p.index;e.R7$(2),e.JRh(i+1),e.R7$(2),e.JRh(n.serviceCategoryName),e.R7$(2),e.JRh(n.serviceName)}}function de(s,p){1&s&&(e.j41(0,"tr")(1,"td",88)(2,"div",89),e.EFF(3," general.table.noData "),e.k0s()()())}function ce(s,p){if(1&s){const n=e.RV6();e.j41(0,"div",22),e.nrm(1,"label",81),e.j41(2,"div",30)(3,"input",91,9),e.mxI("ngModelChange",function(r){e.eBV(n);const a=e.XpG(2);return e.DH7(a.form.quantityY,r)||(a.form.quantityY=r),e.Njj(r)}),e.k0s()(),e.nrm(5,"label",83),e.k0s()}if(2&s){const n=e.XpG(2);e.R7$(3),e.R50("ngModel",n.form.quantityY)}}function me(s,p){if(1&s){const n=e.RV6();e.j41(0,"div",21)(1,"div",71),e.nrm(2,"span",72)(3,"span",90),e.k0s(),e.j41(4,"div",38)(5,"div",22),e.nrm(6,"label",75),e.j41(7,"div",30)(8,"input",76,6),e.mxI("ngModelChange",function(r){e.eBV(n);const a=e.XpG();return e.DH7(a.form.discountAmount,r)||(a.form.discountAmount=r),e.Njj(r)}),e.k0s(),e.j41(10,"span",77),e.EFF(11,"%"),e.k0s()()()(),e.DNE(12,ce,6,1,"div",39),e.k0s()}if(2&s){const n=e.XpG();e.R7$(8),e.R50("ngModel",n.form.discountAmount),e.R7$(4),e.Y8G("ngIf",1==n.form.offerType)}}function fe(s,p){if(1&s){const n=e.RV6();e.j41(0,"tr",84)(1,"td",85),e.EFF(2),e.k0s(),e.j41(3,"td",85),e.EFF(4),e.k0s(),e.j41(5,"td",85),e.EFF(6),e.k0s(),e.j41(7,"td",85)(8,"button",86),e.bIt("click",function(){const r=e.eBV(n).index,a=e.XpG(2);return e.Njj(a.onDelete(a.typeY,r))}),e.nrm(9,"i",87),e.k0s()()()}if(2&s){const n=p.$implicit,i=p.index;e.R7$(2),e.JRh(i+1),e.R7$(2),e.JRh(n.serviceCategoryName),e.R7$(2),e.JRh(n.serviceName)}}function pe(s,p){1&s&&(e.j41(0,"tr")(1,"td",88)(2,"div",89),e.EFF(3," general.table.noData "),e.k0s()()())}function ge(s,p){if(1&s){const n=e.RV6();e.j41(0,"div")(1,"div",40)(2,"div",41),e.nrm(3,"label",42),e.j41(4,"ng-select",92,10),e.bIt("ngModelChange",function(r){e.eBV(n);const a=e.XpG();return e.Njj(a.onCategoryChange(a.typeY,r))}),e.mxI("ngModelChange",function(r){e.eBV(n);const a=e.XpG();return e.DH7(a.form.categoryIdY,r)||(a.form.categoryIdY=r),e.Njj(r)}),e.k0s()(),e.j41(6,"div",43),e.nrm(7,"label",44),e.j41(8,"button",45),e.bIt("click",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.addCategory(r.typeY))}),e.nrm(9,"i",46)(10,"span",47),e.k0s()(),e.j41(11,"div",41),e.nrm(12,"label",48),e.j41(13,"ng-select",93,11),e.mxI("ngModelChange",function(r){e.eBV(n);const a=e.XpG();return e.DH7(a.form.servicesY,r)||(a.form.servicesY=r),e.Njj(r)}),e.k0s()(),e.j41(15,"div",43),e.nrm(16,"label",44),e.j41(17,"button",50),e.bIt("click",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.addService(r.typeY))}),e.nrm(18,"i",46)(19,"span",47),e.k0s()()(),e.j41(20,"div",51)(21,"div",52)(22,"table",53)(23,"thead",54)(24,"tr")(25,"th",55),e.EFF(26,"#"),e.k0s(),e.nrm(27,"th",56)(28,"th",57)(29,"th",58),e.k0s()(),e.j41(30,"tbody"),e.DNE(31,fe,10,3,"tr",59)(32,pe,4,0,"tr",60),e.k0s()()()()()}if(2&s){const n=e.XpG();e.R7$(4),e.Y8G("items",n.categories),e.R50("ngModel",n.form.categoryIdY),e.R7$(9),e.Y8G("items",n.servicesFilterY),e.R50("ngModel",n.form.servicesY),e.R7$(18),e.Y8G("ngForOf",n.form.productOfferServicesY),e.R7$(),e.Y8G("ngIf",n.form.productOfferServicesY.length<=0)}}function he(s,p){if(1&s){const n=e.RV6();e.j41(0,"div",22),e.nrm(1,"label",75),e.j41(2,"div",30)(3,"input",99,13),e.mxI("ngModelChange",function(r){e.eBV(n);const a=e.XpG(2);return e.DH7(a.form.minPurchaseAmount,r)||(a.form.minPurchaseAmount=r),e.Njj(r)}),e.k0s(),e.nrm(5,"span",80),e.k0s()()}if(2&s){const n=e.XpG(2);e.R7$(3),e.R50("ngModel",n.form.minPurchaseAmount)}}function ue(s,p){if(1&s){const n=e.RV6();e.j41(0,"div",100),e.nrm(1,"label",44),e.j41(2,"div",30)(3,"input",101,14),e.mxI("ngModelChange",function(r){e.eBV(n);const a=e.XpG(2);return e.DH7(a.form.minPurchaseQuantity,r)||(a.form.minPurchaseQuantity=r),e.Njj(r)}),e.k0s()()()}if(2&s){const n=e.XpG(2);e.R7$(3),e.R50("ngModel",n.form.minPurchaseQuantity)}}function _e(s,p){if(1&s){const n=e.RV6();e.j41(0,"div",94)(1,"div",71),e.nrm(2,"span",72)(3,"span",95),e.k0s(),e.j41(4,"div",38)(5,"div",22),e.nrm(6,"label",96),e.j41(7,"ng-select",97,12),e.mxI("ngModelChange",function(r){e.eBV(n);const a=e.XpG();return e.DH7(a.form.paymentTypeCode,r)||(a.form.paymentTypeCode=r),e.Njj(r)}),e.k0s()(),e.DNE(9,he,6,1,"div",39)(10,ue,5,1,"div",98),e.k0s()()}if(2&s){const n=e.XpG();e.R7$(7),e.Y8G("items",n.typePayment),e.R50("ngModel",n.form.paymentTypeCode),e.R7$(2),e.Y8G("ngIf",1==n.form.paymentTypeCode),e.R7$(),e.Y8G("ngIf",2==n.form.paymentTypeCode)}}function ve(s,p){if(1&s){const n=e.RV6();e.j41(0,"button",102),e.bIt("click",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.OnSubmit())}),e.k0s()}if(2&s){e.XpG();const n=e.sdS(9);e.Y8G("disabled",!n.valid)}}function be(s,p){1&s&&(e.j41(0,"button",103)(1,"span",104)(2,"span",105),e.nrm(3,"span",106),e.k0s(),e.nrm(4,"span",107),e.k0s()())}let $=(()=>{class s extends M.w{constructor(n,i,r,a,g,d,A,w,U,S,G){super(n,i,A,g,r,a,d),this.baseService=g,this.service=w,this.clientGroupsService=U,this.clientService=S,this.router=G,this.editPaln="marketing.productOffer.editOffer",this.addPlan="marketing.productOffer.addOffer",this.titleOperation="marketing.productOffer.titleOperation",this.submitted=!1,this.pagination={pageNumber:1,pageSize:1e3},this.formMaster={id:0,visits:[]},this.listId=0,this.clients=[],this.formClient={},this.offerTypes=[{id:1,name:"BuyXGetYFree"},{id:2,name:"FixedAmountDiscount"},{id:3,name:"PercentageDiscount"}],this.typePayment=[{id:1,name:"limitLessBuy"},{id:2,name:"limitLessQuantity"}],this.categories=[],this.services=[],this.servicesFilterX=[],this.servicesFilterY=[],this.form={productOfferServicesX:[],productOfferServicesY:[]},this.typeX="x",this.typeY="y",this.showTable=!1,this.selectedServices=[],this.ngxLoader.startLoader(j.ZW)}ngOnInitMore(){this.listId=this.routerActive.snapshot.paramMap.get("id"),this.configRoute(),this.breadCrumbItems=[{label:"layout.sidebar.marketing"},{label:"marketing.productOffer.title",active:!0,url:"/marketing/productOffers"},{label:this.isEditForm?"general.action.edit":"general.action.register",active:!0}],this.configTypes(),this.GetLookups()}configTypes(){this.offerTypes.forEach(n=>{n.name=this.getTranslationText("marketing.productOffer."+n.name)}),this.typePayment.forEach(n=>{n.name=this.getTranslationText("marketing.productOffer."+n.name)})}GetLookups(){this.baseService.GetLookups().pipe((0,E.Q)(this.notifier)).subscribe(n=>{n.success?(this.categories=n.data.categories,this.servicesFilterY=this.servicesFilterX=this.services=n.data.services):this.alertService.error("general.message."+n.message)},n=>{this.alertService.error()})}GetById(){this.baseService.getById(this.listId).pipe((0,E.Q)(this.notifier)).subscribe(n=>{n.success?(this.isEditForm=!0,this.formMaster=n.data):this.alertService.error("general.message."+n.message)},n=>{this.alertService.error()})}back(){this.router.navigate(["/marketing/productOffers"])}mapForm(n){let i=structuredClone(n);return i.startDate=this.datePipe.transform(i.startDate,"yyyy-MM-ddT00:00:00.000"),i.endDate=this.datePipe.transform(i.endDate,"yyyy-MM-ddT00:00:00.000"),i.productOfferServices=[...i.productOfferServicesX,...i.productOfferServicesY],delete i.productOfferServicesX,delete i.productOfferServicesY,delete i.offerServices,i}mapRegisterForm(n){let i=structuredClone(n);return i.startDate=this.datePipe.transform(i.startDate,"yyyy-MM-ddT00:00:00.000"),i.endDate=this.datePipe.transform(i.endDate,"yyyy-MM-ddT00:00:00.000"),i.productOfferServices=[...i.productOfferServicesX,...i.productOfferServicesY],delete i.productOfferServicesX,delete i.productOfferServicesY,i}OnSubmit(){this.validForm()&&(this.loader=!0,!0===this.isEditForm?this.editEntity():this.registerEntity())}validForm(){return 1==this.form.offerType?!!(this.form.productOfferServicesX.length>0&&this.form.productOfferServicesY.length)||(this.alertService.error("marketing.productOffer.mustEnterServiceXAnDServiceY"),!1):2!=this.form.offerType&&3!=this.form.offerType||this.form.productOfferServicesX.length>0||(this.alertService.error("marketing.productOffer.mustEnterServiceX"),!1)}submitFunished(){this.alertService.success(),this.ngxLoader.stop(j.a7),this.ngxLoader.stop(j.ZW),this.btnDisabled=!0}registerEntity(){this.ngxLoader.startLoader(j.ZW);let n=this.mapRegisterForm(this.form);this.baseService.register(n).pipe((0,u.O)(),(0,x.c)(this.mainDelay),(0,b.Z)(),(0,E.Q)(this.notifier),(0,k.j)(()=>this.loader=!1),(0,l.W)(i=>(0,c.$)(i))).subscribe(i=>{i.success?(this.alertService.success(),this.back()):this.alertService.error("general.message."+i.message)},i=>{this.alertService.error("general.message."+i)})}editEntity(){let n=this.mapForm({...this.form});this.baseService.editPut(n.id,n).pipe((0,u.O)(),(0,x.c)(this.mainDelay),(0,b.Z)(),(0,E.Q)(this.notifier),(0,k.j)(()=>this.loader=!1)).subscribe(i=>{i.success?this.alertService.success():this.alertService.error("general.message."+i.message)},i=>{this.alertService.error("general.message."+i)})}goList(n){this.router.navigateByUrl("/sales/visit-plans/")}controlDateFormat(n){"dateFrom"===n?this.form[n]=this.datePipe.transform(this.form[n],"yyyy-MM-ddT00:00:00"):"dateTo"===n&&(this.form[n]=this.datePipe.transform(this.form[n],"yyyy-MM-ddT23:59:59.999"))}configRoute(){this.routerActive.data.pipe((0,E.Q)(this.notifier)).subscribe(n=>{if(n.data?.success){this.isEditForm=!0;let i=n.data.data;i.productOfferServicesX=i.offerServices.filter(r=>1==r.serviceType),i.productOfferServicesY=i.offerServices.filter(r=>2==r.serviceType),this.form=i}},()=>{this.alertService.error()})}onDelete(n,i){"x"==n?this.form.productOfferServicesX.splice(i,1):this.form.productOfferServicesY.splice(i,1)}onCategoryChange(n,i){"x"==n?this.servicesFilterX=this.services.filter(r=>r.categoryId==i):this.servicesFilterY=this.services.filter(r=>r.categoryId==i)}addCategory(n){"x"==n?(this.servicesFilterX=this.services.filter(i=>i.categoryId==this.form.categoryIdX),this.addServices(n,this.servicesFilterX)):(this.servicesFilterY=this.services.filter(i=>i.categoryId==this.form.categoryIdY),this.addServices(n,this.servicesFilterY))}addService(n){if("x"==n){let i=this.services.filter(r=>r.id==this.form.servicesX);this.addServices(n,[...i])}else{let i=this.services.filter(r=>r.id==this.form.servicesY);this.addServices(n,[...i])}}addServices(n,i){i.forEach(r=>{"x"===n?this.form.productOfferServicesX.find(g=>g.serviceId==r.id)||this.form.productOfferServicesX.push({id:0,productOfferId:0,serviceType:1,serviceId:r.id,serviceName:r.name,serviceCategoryName:r.serviceCategoryName}):this.form.productOfferServicesY.find(g=>g.serviceId==r.id)||this.form.productOfferServicesY.push({id:0,productOfferId:0,serviceType:2,serviceId:r.id,serviceName:r.name,serviceCategoryName:r.serviceCategoryName})})}static{this.\u0275fac=function(i){return new(i||s)(e.rXU(f.nX),e.rXU(h.c$),e.rXU(N.u),e.rXU(t.vh),e.rXU(Y),e.rXU(F.eD),e.rXU(v.Bq),e.rXU(H.m),e.rXU(Q.t),e.rXU(J.X),e.rXU(f.Ix))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["product-offer"]],features:[e.Vt3],decls:98,vars:42,consts:[["formEntity","ngForm"],["offerType","ngModel"],["title","ngModel"],["startDate","ngModel"],["endDate","ngModel"],["servicesX","ngModel"],["discountAmount","ngModel"],["discountRate","ngModel"],["quantityX","ngModel"],["quantityY","ngModel"],["categoryIdY","ngModel"],["servicesY","ngModel"],["paymentTypeCode","ngModel"],["minPurchaseAmount","ngModel"],["minPurchaseQuantity","ngModel"],[3,"title","breadcrumbItems"],[1,"row"],[1,"card","grid"],[1,"modal-header","p-0"],[1,"fs-3"],["translate","marketing.productOffer.displayData",1,"badge","rounded-pill","bg-primary"],[1,"card-body"],[1,"col-12","col-md-3"],["translate","marketing.productOffer.offerType",1,"fw-bold","form-label","w-100"],["clearable","true","clearable","false","clearOnBackspace","false","name","offerType","bindValue","id","bindLabel","name",2,"width","100%",3,"ngModelChange","items","ngModel"],["for","title","translate","marketing.productOffer.offerTitle",1,"required","fw-bold","form-label"],["InputTirmFilter","","name","title","type","text","id","name","required","",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],[1,"col-12","col-md-2","mb-3"],["for","startDate","translate","marketing.productOffer.startDate",1,"fw-bold","form-label","required"],[1,"input-group"],["type","text","mwlFlatpickr","","name","startDate","id","startDate","altFormat","d/m/Y","required","",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],["for","endDate","translate","marketing.productOffer.endDate",1,"fw-bold","form-label","required"],["type","text","mwlFlatpickr","","name","endDate","id","dateFrom","altFormat","d/m/Y","required","",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],["for","isActive","translate","marketing.productOffer.isActive",1,"fw-bold","form-label","d-block"],["id","isActive","name","isActive","inputId","isActive",3,"ngModelChange","ngModel"],["translate","marketing.productOffer.offerSetting",1,"badge","rounded-pill","bg-primary"],["class","mt-1",4,"ngIf"],[1,"row","mt-3"],["class","col-12  col-md-3",4,"ngIf"],[1,"row","my-1","justify-content-center","align-items-center"],[1,"col-12","col-md-4"],["translate","marketing.productOffer.category",1,"fw-bold","form-label","w-100"],[1,"col-12","col-md-2"],[1,"fw-bold","form-label","w-100"],["href","javascript:void(0);",1,"btn","btn-primary","mt-1",3,"click"],[1,"ri-checkbox-circle-fill","align-bottom"],["translate","general.action.add"],["translate","marketing.productOffer.services",1,"fw-bold","form-label","w-100"],["clearable","true","clearable","false","clearOnBackspace","false","name","servicesFilterX","bindValue","id","bindLabel","name",2,"width","100%",3,"ngModelChange","items","ngModel"],["href","javascript:void(0);",1,"btn","btn-success","mt-1",3,"click"],[1,"col-12","col-md-10"],[1,"table-responsive"],[1,"table","table-border","table-centered","align-middle","table-nowrap","mb-0"],[1,"text-muted","table-light"],["scope","col","translate",""],["scope","col","translate","marketing.productOffer.categoryName"],["scope","col","translate","marketing.productOffer.serviceName"],["scope","col"],["class","fs-5",4,"ngFor","ngForOf"],[4,"ngIf"],["class","card-body",4,"ngIf"],["class","row mt-4",4,"ngIf"],[1,"row","justify-content-center","py-2"],[1,"text-center","text-danger","text-bold","fs-6","col-2"],[1,"text-end","mb-3"],["type","submit","class","btn btn-success w-md btn-load","translate","general.action.save",3,"disabled","click",4,"ngIf"],["type","button","class","btn btn-success w-sm btn-load",4,"ngIf"],[1,"btn","btn-dark",3,"click"],[1,"ri-check-double-fill","align-bottom"],["translate","",1,"text-danger","text-center"],[1,"mt-1"],[1,"ri-checkbox-multiple-fill","text-primary","mx-2"],["translate","marketing.productOffer.putPercentageDiscount",1,"fs-5","fw-bold"],["translate","marketing.productOffer.buyQuantity",1,"fs-5","fw-bold"],["translate","marketing.productOffer.discountValue",1,"fw-bold","form-label","w-100"],["name","discountAmount","type","number","id","name",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["id","basic-addon2",1,"input-group-text"],["translate","marketing.productOffer.maxDiscountValue",1,"fw-bold","form-label","w-100"],["name","discountRate","type","number","id","name",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["id","basic-addon2","translate","orderManagement.order.currancy",1,"input-group-text"],["translate","marketing.productOffer.qauntity",1,"text-danger","fw-bold","form-label","w-100"],["name","quantityX","type","number","id","quantityX",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["translate","marketing.productOffer.formServices",1,"text-danger","fw-bold","form-label","w-100"],[1,"fs-5"],[1,"col"],[1,"btn","btn-sm","btn-soft-danger","remove-list",3,"click"],[1,"ri-delete-bin-5-fill","align-bottom"],["colspan","4"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],["translate","marketing.productOffer.discountOnServices",1,"fs-5","fw-bold"],["name","quantityY","type","number","id","quantityY",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["clearable","true","clearable","false","clearOnBackspace","false","name","categoryIdY","bindValue","id","bindLabel","name",2,"width","100%",3,"ngModelChange","items","ngModel"],["clearable","true","clearable","false","clearOnBackspace","false","name","servicesY","bindValue","id","bindLabel","name",2,"width","100%",3,"ngModelChange","items","ngModel"],[1,"row","mt-4"],["translate","marketing.productOffer.lessLimitOffer",1,"fs-5","fw-bold"],["translate","marketing.productOffer.type",1,"required","fw-bold","form-label","w-100"],["clearable","true","clearable","false","clearOnBackspace","false","name","paymentTypeCode","bindValue","id","bindLabel","name","required","",2,"width","100%",3,"ngModelChange","items","ngModel"],["class","col-12  col-md-3  mt-2",4,"ngIf"],["name","minPurchaseAmount","type","number","id","minPurchaseAmount",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,"col-12","col-md-3","mt-2"],["name","minPurchaseQuantity","type","number","id","minPurchaseQuantity",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["type","submit","translate","general.action.save",1,"btn","btn-success","w-md","btn-load",3,"click","disabled"],["type","button",1,"btn","btn-success","w-sm","btn-load"],[1,"d-flex","align-items-center"],["role","status",1,"spinner-border","flex-shrink-0"],["translate","general.action.loading",1,"visually-hidden"],["translate","general.action.loading",1,"flex-grow-1","ms-2"]],template:function(i,r){if(1&i){const a=e.RV6();e.nrm(0,"app-breadcrumbs",15),e.nI1(1,"translate"),e.j41(2,"div",16)(3,"div",17)(4,"div",18)(5,"h6",19),e.nrm(6,"span",20),e.k0s()(),e.j41(7,"div",21)(8,"form",null,0)(10,"div",16)(11,"div",22),e.nrm(12,"label",23),e.j41(13,"ng-select",24,1),e.mxI("ngModelChange",function(d){return e.eBV(a),e.DH7(r.form.offerType,d)||(r.form.offerType=d),e.Njj(d)}),e.k0s()(),e.j41(15,"div",22),e.nrm(16,"label",25),e.j41(17,"input",26,2),e.mxI("ngModelChange",function(d){return e.eBV(a),e.DH7(r.form.title,d)||(r.form.title=d),e.Njj(d)}),e.k0s(),e.DNE(19,ee,2,0,"div",27),e.k0s(),e.j41(20,"div",28),e.nrm(21,"label",29),e.j41(22,"div",30)(23,"input",31,3),e.nI1(25,"translate"),e.mxI("ngModelChange",function(d){return e.eBV(a),e.DH7(r.form.startDate,d)||(r.form.startDate=d),e.Njj(d)}),e.k0s()(),e.DNE(26,te,2,0,"div",27),e.k0s(),e.j41(27,"div",28),e.nrm(28,"label",32),e.j41(29,"div",30)(30,"input",33,4),e.nI1(32,"translate"),e.mxI("ngModelChange",function(d){return e.eBV(a),e.DH7(r.form.endDate,d)||(r.form.endDate=d),e.Njj(d)}),e.k0s()(),e.DNE(33,ne,2,0,"div",27),e.k0s(),e.j41(34,"div",28),e.nrm(35,"label",34),e.j41(36,"p-inputSwitch",35),e.mxI("ngModelChange",function(d){return e.eBV(a),e.DH7(r.form.isActive,d)||(r.form.isActive=d),e.Njj(d)}),e.k0s()()()()()(),e.j41(37,"div",17)(38,"div",18)(39,"h6",19),e.nrm(40,"span",36),e.k0s()(),e.j41(41,"div",21),e.DNE(42,re,3,0,"div",37)(43,ie,3,0,"div",37),e.j41(44,"div",38),e.DNE(45,se,7,1,"div",39)(46,oe,6,1,"div",39)(47,ae,6,1,"div",39),e.k0s()()(),e.j41(48,"div",16)(49,"div",17)(50,"div",21)(51,"div")(52,"div",40)(53,"div",41),e.nrm(54,"label",42),e.j41(55,"ng-select",24,1),e.bIt("ngModelChange",function(d){return e.eBV(a),e.Njj(r.onCategoryChange(r.typeX,d))}),e.mxI("ngModelChange",function(d){return e.eBV(a),e.DH7(r.form.categoryIdX,d)||(r.form.categoryIdX=d),e.Njj(d)}),e.k0s()(),e.j41(57,"div",43),e.nrm(58,"label",44),e.j41(59,"button",45),e.bIt("click",function(){return e.eBV(a),e.Njj(r.addCategory(r.typeX))}),e.nrm(60,"i",46)(61,"span",47),e.k0s()(),e.j41(62,"div",41),e.nrm(63,"label",48),e.j41(64,"ng-select",49,5),e.mxI("ngModelChange",function(d){return e.eBV(a),e.DH7(r.form.servicesX,d)||(r.form.servicesX=d),e.Njj(d)}),e.k0s()(),e.j41(66,"div",43),e.nrm(67,"label",44),e.j41(68,"button",50),e.bIt("click",function(){return e.eBV(a),e.Njj(r.addService(r.typeX))}),e.nrm(69,"i",46)(70,"span",47),e.k0s()()(),e.j41(71,"div",51)(72,"div",52)(73,"table",53)(74,"thead",54)(75,"tr")(76,"th",55),e.EFF(77,"#"),e.k0s(),e.nrm(78,"th",56)(79,"th",57)(80,"th",58),e.k0s()(),e.j41(81,"tbody"),e.DNE(82,le,10,3,"tr",59)(83,de,4,0,"tr",60),e.k0s()()()()(),e.DNE(84,me,13,2,"div",61)(85,ge,33,6,"div",60),e.k0s(),e.DNE(86,_e,11,4,"div",62),e.j41(87,"div",63)(88,"div",64)(89,"div",65),e.DNE(90,ve,1,1,"button",66)(91,be,5,0,"button",67),e.k0s()(),e.j41(92,"div",64)(93,"a",68),e.bIt("click",function(){return e.eBV(a),e.Njj(r.back())}),e.nrm(94,"i",69),e.j41(95,"span"),e.EFF(96),e.nI1(97,"translate"),e.k0s()()()()()()()}if(2&i){const a=e.sdS(18),g=e.sdS(24),d=e.sdS(31);e.FS9("title",0==r.isEditForm?r.addPlan:e.bMT(1,34,r.editPaln)),e.Y8G("breadcrumbItems",r.breadCrumbItems),e.R7$(13),e.Y8G("items",r.offerTypes),e.R50("ngModel",r.form.offerType),e.R7$(4),e.R50("ngModel",r.form.title),e.R7$(2),e.Y8G("ngIf",a.invalid&&a.touched),e.R7$(4),e.FS9("placeholder",e.bMT(25,36,"hr.target.dateFrom")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",r.form.startDate),e.R7$(3),e.Y8G("ngIf",g.invalid&&g.touched),e.R7$(4),e.FS9("placeholder",e.bMT(32,38,"hr.target.dateFrom")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",r.form.endDate),e.R7$(3),e.Y8G("ngIf",d.invalid&&d.touched),e.R7$(3),e.R50("ngModel",r.form.isActive),e.R7$(6),e.Y8G("ngIf",3==r.form.offerType||2==r.form.offerType),e.R7$(),e.Y8G("ngIf",1==r.form.offerType),e.R7$(2),e.Y8G("ngIf",3==r.form.offerType||2==r.form.offerType),e.R7$(),e.Y8G("ngIf",3==r.form.offerType),e.R7$(),e.Y8G("ngIf",1==r.form.offerType),e.R7$(8),e.Y8G("items",r.categories),e.R50("ngModel",r.form.categoryIdX),e.R7$(9),e.Y8G("items",r.servicesFilterX),e.R50("ngModel",r.form.servicesX),e.R7$(18),e.Y8G("ngForOf",r.form.productOfferServicesX),e.R7$(),e.Y8G("ngIf",r.form.productOfferServicesX.length<=0),e.R7$(),e.Y8G("ngIf",1==r.form.offerType),e.R7$(),e.Y8G("ngIf",1==r.form.offerType),e.R7$(),e.Y8G("ngIf",1!=r.form.offerType),e.R7$(4),e.Y8G("ngIf",!r.loader),e.R7$(),e.Y8G("ngIf",r.loader),e.R7$(5),e.JRh(e.bMT(97,40,"general.action.back"))}},dependencies:[t.Sq,t.bT,m.qT,m.me,m.Q0,m.BC,m.cb,m.YS,m.vS,m.cV,C.kL,Z.m,h.Mm,B.HW,X.vr,q.m,h.D9]})}}return s})();var ye=o(91426),Ce=o(40724),Oe=o(15084),Me=o(88148),je=o(91580),Ie=o(5779),Te=o(94575);const Re=()=>["productOffer.register"],Ee=()=>["productOffer.edit"],De=()=>["productOffer.delete"];function xe(s,p){1&s&&(e.j41(0,"tr",21)(1,"th",22),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",23),e.nrm(4,"i",24),e.EFF(5," general.table.id "),e.k0s(),e.j41(6,"th",25),e.nrm(7,"i",24),e.EFF(8," marketing.productOffer.offerTitle "),e.k0s(),e.j41(9,"th",26),e.nrm(10,"i",24),e.EFF(11," marketing.productOffer.offerType "),e.k0s(),e.j41(12,"th",27),e.nrm(13,"i",24),e.EFF(14," marketing.productOffer.startDate "),e.k0s(),e.j41(15,"th",28),e.nrm(16,"i",24),e.EFF(17," marketing.productOffer.endDate "),e.k0s(),e.j41(18,"th",29),e.nrm(19,"i",24),e.EFF(20," general.table.isActive "),e.k0s(),e.nrm(21,"th",30),e.k0s())}function Se(s,p){1&s&&e.nrm(0,"span",41)}function Pe(s,p){1&s&&e.nrm(0,"span",42)}function Fe(s,p){if(1&s&&(e.nrm(0,"i",43),e.EFF(1),e.nI1(2,"date"),e.nrm(3,"br")(4,"i",44),e.EFF(5),e.nI1(6,"date"),e.nrm(7,"br")(8,"i",45),e.EFF(9)),2&s){const n=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.i5U(2,3,n.creationTime,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",e.i5U(6,6,n.lastModificationTime,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",n.creatorName," ")}}function ke(s,p){if(1&s){const n=e.RV6();e.j41(0,"li",46),e.bIt("click",function(){e.eBV(n);const r=e.XpG().$implicit,a=e.XpG();return e.Njj(a.goEdit(r.id))}),e.j41(1,"span",47),e.nrm(2,"i",48)(3,"span",49),e.k0s()()}}function Le(s,p){if(1&s){const n=e.RV6();e.j41(0,"li",46),e.bIt("click",function(){e.eBV(n);const r=e.XpG().$implicit,a=e.XpG(),g=e.sdS(22);return e.Njj(a.openModal(r.id,g))}),e.j41(1,"a",50),e.nrm(2,"i",51)(3,"span",52),e.k0s()()}}function Be(s,p){if(1&s&&(e.j41(0,"tr",31)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.nI1(9,"translate"),e.k0s(),e.j41(10,"td"),e.EFF(11),e.nI1(12,"date"),e.k0s(),e.j41(13,"td"),e.EFF(14),e.nI1(15,"date"),e.k0s(),e.j41(16,"td"),e.DNE(17,Se,1,0,"span",32)(18,Pe,1,0,"span",33),e.k0s(),e.j41(19,"td"),e.DNE(20,Fe,10,9,"ng-template",null,2,e.C5r),e.j41(22,"span",34)(23,"div",35),e.nrm(24,"i",36),e.j41(25,"button",37),e.nrm(26,"i",38),e.k0s(),e.j41(27,"ul",39),e.DNE(28,ke,4,0,"li",40)(29,Le,4,0,"li",40),e.k0s()()()()()),2&s){const n=p.$implicit,i=p.rowIndex,r=e.sdS(21);e.R7$(2),e.JRh(i+1),e.R7$(2),e.JRh(n.id),e.R7$(2),e.JRh(n.title),e.R7$(2),e.JRh(e.bMT(9,11,"marketing.productOffer."+n.offerTypeValue)),e.R7$(3),e.JRh(e.i5U(12,13,n.startDate,"yyyy-MM-dd")),e.R7$(3),e.JRh(e.i5U(15,16,n.endDate,"yyyy-MM-dd")),e.R7$(3),e.Y8G("ngIf",n.isActive),e.R7$(),e.Y8G("ngIf",!n.isActive),e.R7$(6),e.Y8G("ngbTooltip",r),e.R7$(4),e.Y8G("hasPermission",e.lJ4(19,Ee)),e.R7$(),e.Y8G("hasPermission",e.lJ4(20,De))}}function Xe(s,p){1&s&&(e.j41(0,"div",53),e.EFF(1," general.table.noData"),e.k0s())}function Ne(s,p){if(1&s){const n=e.RV6();e.j41(0,"div",54)(1,"div",55),e.nrm(2,"ngb-pagination-info",56),e.j41(3,"table-length",57),e.bIt("lengthChange",function(r){e.eBV(n);const a=e.XpG();return e.Njj(a.ListItemChange(r))}),e.k0s()(),e.j41(4,"div",58)(5,"ngb-pagination",59),e.bIt("pageChange",function(r){e.eBV(n);const a=e.XpG();return e.Njj(a.pageChanged(r))}),e.mxI("pageChange",function(r){e.eBV(n);const a=e.XpG();return e.DH7(a.pagination.pageNumber,r)||(a.pagination.pageNumber=r),e.Njj(r)}),e.k0s()()()}if(2&s){const n=e.XpG();e.R7$(2),e.Y8G("pagination",n.pagination),e.R7$(),e.Y8G("lengthTable",n.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",n.pagination.pageSize)("collectionSize",n.pagination.totalItems),e.R50("page",n.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function Ge(s,p){if(1&s){const n=e.RV6();e.j41(0,"delete-modal",60),e.bIt("deleteConfirm",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.DeleteConfirmSoft())})("dismiss",function(){const r=e.eBV(n).$implicit;return e.Njj(r.dismiss())}),e.k0s()}}let Ve=(()=>{class s extends M.w{constructor(n,i,r,a,g,d,A,w,U){super(n,i,A,r,a,g,d),this.baseService=r,this.excelService=w,this.router=U,this.title="marketing.productOffer.title",this.titleOperation="marketing.productOffer.titleOperation",this.keySelected="",this.assignUsers=[],this.times=[],this.employees=[],this.searchForm={},this.isResolveList=!0,this.countLoad=2,this.clientParam={pageSize:50,pageNumber:1,search:""},this.clients=[],this.loading=!1,this.salesPersons=[],this.setDates=(S,G,W)=>{if(S?.from||S?.to){const et=S.to||S.from;this.pagination[G]=this.datePipe.transform(S.from||S.to,"yyyy-MM-ddT00:00:00"),this.pagination[W]=this.datePipe.transform(et,"yyyy-MM-ddT23:59:59.999")}else this.pagination[G]=null,this.pagination[W]=null},this.configRoute()}onSearch(){let n={...this.searchForm};this.ngxLoader.startLoader("allLoader"),this.setDates(n.creationDates,"dateFrom","dateTo"),this.loadentities()}OnSearch(n){this.ngxLoader.startLoader(j.a7),this.loadentities()}configRoute(){}mapExcel(){let n=[];return this.entities?.forEach(i=>{n.push({Name:i.name,Sales_Man:i.salesPersonName,Datefrom:this.datePipe.transform(i.dateFrom,"yyyy-MM-ddd"),Dateto:this.datePipe.transform(i.dateTo,"yyyy-MM-ddd"),notes:i.notes})}),n}onExportXlsx(){let n=this.mapExcel();this.excelService.exportAsExcelFile(n,this.getTranslationText(this.title),[])}goEdit(n){this.router.navigateByUrl("/marketing/productOffers/edit",{state:{id:n}})}goRegister(){this.router.navigateByUrl("/marketing/productOffers/register")}DeleteConfirmSoft(){console.log(this.selectedRow,"selectedRow"),this.ngxLoader.startLoader(j.Fq),this.baseService.delete(this.selectedRow[0].id).pipe((0,u.O)(),(0,x.c)(this.mainDelay),(0,b.Z)(),(0,E.Q)(this.notifier),(0,k.j)(()=>this.ngxLoader.stopLoader(j.Fq))).subscribe(n=>{n.success?(this.alertService.success(),this.loadentities(),this.modalService.dismissAll(),this.resetSelected()):this.alertService.error("general.message."+n)},()=>{this.alertService.error()})}static{this.\u0275fac=function(i){return new(i||s)(e.rXU(f.nX),e.rXU(h.c$),e.rXU(Y),e.rXU(N.u),e.rXU(t.vh),e.rXU(F.eD),e.rXU(v.Bq),e.rXU(ye.V),e.rXU(f.Ix))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-productOfferList"]],features:[e.Vt3],decls:23,vars:20,consts:[["tableMaster",""],["deleteModal",""],["tooltipContent",""],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],[3,"reset","search","exportXlsx","addNew","addPermission","totalItems","title"],["control",""],[1,"col-md-4","mb-2"],[1,"search-box"],["type","search","id","name","name","name",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],[1,"col-12","col-md-3","mb-2"],["type","text","mwlFlatpickr","","id","isDate","mode","range","altFormat","d/m/Y",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-4 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["translate","",2,"width",".5%"],["pSortableColumn","code","translate","",2,"width","3%"],[1,"ri-expand-up-down-line"],["pSortableColumn","name","translate","",2,"width","15%"],["pSortableColumn","offerType","translate","",2,"width","15%"],["pSortableColumn","startDate","translate","",2,"width","10%"],["pSortableColumn","endDate","translate","",2,"width","10%"],["pSortableColumn","isActive","translate","",2,"width","8%"],["translate","",2,"width","4%"],[1,"fs-5"],["class","badge bg-success-subtle text-success p-2","translate","general.table.active",4,"ngIf"],["class","badge bg-danger-subtle text-danger p-2","translate","general.table.noActive",4,"ngIf"],[1,"d-inline"],[1,"dropdown-custom"],["tooltipPosition","top",1,"mdi","mdi-cog-outline","text-muted","fs-16","align-middle","me-1","d-inline",3,"ngbTooltip"],["type","button",1,"btn","dropbtn","btn-soft-secondary","btn-sm","dropdown-custom","arrow-none"],[1,"ri-more-fill"],[1,"dropdown-menu","dropdown-menu-end","dropdown-content"],[3,"click",4,"hasPermission"],["translate","general.table.active",1,"badge","bg-success-subtle","text-success","p-2"],["translate","general.table.noActive",1,"badge","bg-danger-subtle","text-danger","p-2"],[1,"ri-history-fill","text-warning"],[1,"ri-history-fill","text-danger"],[1,"ri-user-location-fill","text-primary"],[3,"click"],[1,"dropdown-item"],[1,"ri-pencil-fill","align-bottom","me-2","text-muted"],["translate","general.action.edit"],["href","javascript:void(0);",1,"dropdown-item"],[1,"ri-delete-bin-fill","align-bottom","me-2","text-muted"],["translate","general.action.delete"],["translate","",1,"text-center","text-danger","text-bold","fs-4","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[3,"deleteConfirm","dismiss"]],template:function(i,r){if(1&i){const a=e.RV6();e.j41(0,"div",3)(1,"div",4)(2,"div",5)(3,"base-filter",6),e.bIt("reset",function(){return e.eBV(a),e.Njj(r.onReset())})("search",function(){return e.eBV(a),e.Njj(r.onSearch())})("exportXlsx",function(){return e.eBV(a),e.Njj(r.onExportXlsx())})("addNew",function(){return e.eBV(a),e.Njj(r.goRegister())}),e.qex(4,7),e.j41(5,"div",8)(6,"div",9)(7,"input",10),e.nI1(8,"translate"),e.mxI("ngModelChange",function(d){return e.eBV(a),e.DH7(r.pagination.name,d)||(r.pagination.name=d),e.Njj(d)}),e.k0s(),e.nrm(9,"i",11),e.k0s()(),e.j41(10,"div",12)(11,"input",13),e.nI1(12,"translate"),e.mxI("ngModelChange",function(d){return e.eBV(a),e.DH7(r.searchForm.creationDates,d)||(r.searchForm.creationDates=d),e.Njj(d)}),e.k0s()(),e.bVm(),e.k0s(),e.j41(13,"div",14)(14,"div",15)(15,"p-table",16,0),e.bIt("onLazyLoad",function(d){return e.eBV(a),e.Njj(r.tableChange(d))})("selectionChange",function(d){return e.eBV(a),e.Njj(r.onSelectionChange(d))}),e.DNE(17,xe,22,0,"ng-template",17)(18,Be,30,21,"ng-template",18),e.k0s()(),e.DNE(19,Xe,2,0,"div",19)(20,Ne,6,8,"div",20),e.k0s()()()(),e.DNE(21,Ge,1,0,"ng-template",null,1,e.C5r)}2&i&&(e.R7$(3),e.Y8G("addPermission",e.lJ4(19,Re))("totalItems",r.pagination.totalItems)("title",r.title),e.R7$(4),e.FS9("placeholder",e.bMT(8,15,"general.table.name")),e.R50("ngModel",r.pagination.name),e.R7$(4),e.FS9("placeholder",e.bMT(12,17,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",r.searchForm.creationDates),e.R7$(4),e.Y8G("value",r.entities)("rows",r.pagination.pageSize)("lazy",!0)("totalRecords",r.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",r.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",r.pagination.totalItems>0))},dependencies:[t.bT,m.me,m.BC,m.vS,v.s5,C.kL,Ce.b,Oe.w,Me.p,je.g,h.Mm,O.XI,Ie.Ei,O.Tg,v.md,Te.p,t.vh,h.D9]})}}return s})();var Ye=o(56131),Ae=o(7673);let we=(()=>{class s extends Ye.E{constructor(n,i,r){super(n,i,r),this.baseService=i}resolve(n,i){const a=this.router.getCurrentNavigation()?.extras?.state?.id;return this.baseService.getById(a).pipe((0,l.W)(g=>(this.router.navigate(["/marketing/productOffers"]),this.alertService.error(g),(0,Ae.of)(null))))}static{this.\u0275fac=function(i){return new(i||s)(e.KVO(f.Ix),e.KVO(Y),e.KVO(N.u))}}static{this.\u0275prov=e.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();const $e=[{path:"productOffers",component:Ve,canActivate:[o(56701).g],data:{permission:["productOffer.view"]}},{path:"productOffers/register",component:$,data:{permission:["productOffer.register"]}},{path:"productOffers/edit",component:$,resolve:{data:we},data:{permission:["productOffer.edit"]}}];let We=(()=>{class s{static{this.\u0275fac=function(i){return new(i||s)}}static{this.\u0275mod=e.$C({type:s})}static{this.\u0275inj=e.G2t({imports:[f.iI.forChild($e),f.iI]})}}return s})();var Ke=o(71144),ze=o(38542),He=o(3200),Qe=o(81141),Je=o(41198);let Ze=(()=>{class s{constructor(){(0,_.eV)(y().loadAnimation)}static{this.\u0275fac=function(i){return new(i||s)}}static{this.\u0275mod=e.$C({type:s})}static{this.\u0275inj=e.G2t({imports:[t.MD,m.YN,v.zH,v.Pv,v.c9,C.ND,R.r,We,T.G,h.h,O.bG,P.q4,B.H_,v.c9,F.th,X.MQ,v.n8,Ke.j,v._f,ze.S,He.U,Qe.tm,Je.TV,m.X1]})}}return s})()},40724:(L,D,o)=>{o.d(D,{b:()=>X});var t=o(54438),m=o(8147),v=o(60177),C=o(69005),R=o(94575);const _=[[["","menuBtn",""]],[["","control",""]]],I=["[menuBtn]","[control]"];function y(f,E){1&f&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&f&&(t.R7$(),t.JRh(t.bMT(2,1,"general.table.all")))}function T(f,E){if(1&f){const u=t.RV6();t.j41(0,"a",17),t.bIt("click",function(){t.eBV(u),t.XpG(2);const b=t.sdS(11);return t.Njj(b.toggle())}),t.nrm(1,"i",18)(2,"span",19),t.k0s()}if(2&f){const u=t.XpG(2);t.BMQ("aria-expanded",!u.isCollapsed)}}function h(f,E){if(1&f){const u=t.RV6();t.j41(0,"div",21)(1,"button",22),t.nrm(2,"i",23)(3,"span",24),t.k0s(),t.j41(4,"ul",25)(5,"li",26),t.bIt("click",function(){t.eBV(u);const b=t.XpG(3);return t.Njj(b.onExportXlsx())}),t.j41(6,"a",27),t.nrm(7,"span",28),t.k0s()(),t.j41(8,"li",26),t.bIt("click",function(){t.eBV(u);const b=t.XpG(3);return t.Njj(b.onExportPDF())}),t.j41(9,"a",27),t.nrm(10,"span",29),t.k0s()()()()}if(2&f){const u=t.XpG(3);t.FS9("placement","en"===u.lang?"bottom-start":"bottom-end"),t.R7$(),t.Y8G("disabled",u.totalItems<=0)}}function O(f,E){if(1&f&&(t.qex(0),t.DNE(1,h,11,2,"div",20),t.bVm()),2&f){const u=t.XpG(2);t.R7$(),t.Y8G("hasPermission",u.exportPermission)}}function P(f,E){if(1&f){const u=t.RV6();t.j41(0,"a",31),t.bIt("click",function(){t.eBV(u);const b=t.XpG(3);return t.Njj(b.onAddNew())}),t.nrm(1,"i",32),t.j41(2,"span"),t.EFF(3),t.nI1(4,"translate"),t.k0s()()}if(2&f){const u=t.XpG(3);t.R7$(3),t.JRh(t.bMT(4,1,u.newLocal))}}function B(f,E){if(1&f&&(t.qex(0),t.DNE(1,P,5,3,"a",30),t.bVm()),2&f){const u=t.XpG(2);t.R7$(),t.Y8G("hasPermission",u.addPermission)}}function F(f,E){if(1&f&&(t.j41(0,"div",15),t.DNE(1,T,3,1,"a",16)(2,O,2,1,"ng-container",4)(3,B,2,1,"ng-container",4),t.k0s()),2&f){const u=t.XpG();t.R7$(),t.Y8G("ngIf",u.showSearch),t.R7$(),t.Y8G("ngIf",u.showExport),t.R7$(),t.Y8G("ngIf",u.showAdd)}}let X=(()=>{class f{constructor(u){this.translateService=u,this.totalItems=0,this.title="",this.titleMore="",this.newLocal="general.action.addNew",this.data=[],this.addPermission=[],this.exportPermission=[],this.showSearch=!0,this.showExport=!0,this.showAdd=!0,this.showAllStr=!0,this.addNew=new t.bkB,this.exportXlsx=new t.bkB,this.exportPDF=new t.bkB,this.search=new t.bkB,this.reset=new t.bkB,this.showAction=!0,this.isCollapsed=!0,this.lang=this.translateService.currentLang}ngOnInit(){}onAddNew(){this.addNew.emit(!0)}onSearch(){this.search.emit(!0)}onExportXlsx(){this.exportXlsx.emit(!0)}onExportPDF(){this.exportPDF.emit(!0)}onReset(){this.reset.emit(!0)}static{this.\u0275fac=function(x){return new(x||f)(t.rXU(m.c$))}}static{this.\u0275cmp=t.VBU({type:f,selectors:[["base-filter"]],inputs:{totalItems:"totalItems",title:"title",titleMore:"titleMore",newLocal:"newLocal",data:"data",addPermission:"addPermission",exportPermission:"exportPermission",showSearch:"showSearch",showExport:"showExport",showAdd:"showAdd",showAllStr:"showAllStr",showAction:"showAction"},outputs:{addNew:"addNew",exportXlsx:"exportXlsx",exportPDF:"exportPDF",search:"search",reset:"reset"},ngContentSelectors:I,decls:21,vars:7,consts:[["collapse","ngbCollapse"],[1,"card-header","border-0"],[1,"row","align-items-center","mb-2","justify-content-between"],[1,"col-12","col-md-3","card-title","mb-0","flex-grow-1"],[4,"ngIf"],["class","col-12 col-md-6 text-right",4,"ngIf"],["id","collapseExample",1,"collaps","show",3,"ngbCollapseChange","ngbCollapse"],[1,"row"],[1,"col-12","col-md-2","text-center","mb-2","d-flex","text-sm-center","text-md-left"],["type","button",1,"btn","w-sm-100","w-md-auto","btn-primary","btn-sm",3,"click"],[1,"ri-file-search-fill","me-1","align-bottom"],["translate","general.action.search"],["type","button",1,"btn","btn-danger","w-sm-100","w-md-auto","mx-1","btn-sm",3,"click"],[1,"ri-equalizer-fill","me-1","align-bottom"],["translate","general.action.clear"],[1,"col-12","col-md-6","text-right"],["class","btn btn-success  mx-1","data-bs-toggle","collapse","href","javascript:void(0);",3,"click",4,"ngIf"],["data-bs-toggle","collapse","href","javascript:void(0);",1,"btn","btn-success","mx-1",3,"click"],[1,"ri-filter-2-line","align-bottom"],["translate","general.action.filter"],["class","dropdown d-inline","ngbDropdown","",3,"placement",4,"hasPermission"],["ngbDropdown","",1,"dropdown","d-inline",3,"placement"],["ngbDropdownToggle","","type","button",1,"btn","btn-info","mx-2","me-4",3,"disabled"],[1,"ri-chat-download-line","me-1","align-bottom"],["translate","general.action.export"],["aria-labelledby","dropdownMenuButton1","ngbDropdownMenu","",1,"dropdown-menu"],[3,"click"],["href","javascript:void(0);",1,"dropdown-item"],["translate","general.action.xlxs"],["translate","general.action.pdf"],["class","btn btn-danger","href","javascript:void(0);",3,"click",4,"hasPermission"],["href","javascript:void(0);",1,"btn","btn-danger",3,"click"],[1,"ri-add-line","align-bottom"]],template:function(x,b){if(1&x){const k=t.RV6();t.NAR(_),t.j41(0,"div",1)(1,"div",2)(2,"h5",3)(3,"span"),t.SdG(4),t.k0s(),t.j41(5,"span"),t.DNE(6,y,3,3,"span",4),t.EFF(7),t.nI1(8,"translate"),t.k0s()(),t.DNE(9,F,4,3,"div",5),t.k0s(),t.j41(10,"div",6,0),t.mxI("ngbCollapseChange",function(c){return t.eBV(k),t.DH7(b.isCollapsed,c)||(b.isCollapsed=c),t.Njj(c)}),t.j41(12,"div",7),t.SdG(13,1),t.j41(14,"div",8)(15,"button",9),t.bIt("click",function(){return t.eBV(k),t.Njj(b.onSearch())}),t.nrm(16,"i",10)(17,"span",11),t.k0s(),t.j41(18,"button",12),t.bIt("click",function(){return t.eBV(k),t.Njj(b.onReset())}),t.nrm(19,"i",13)(20,"span",14),t.k0s()()()()()}2&x&&(t.R7$(6),t.Y8G("ngIf",b.showAllStr),t.R7$(),t.Lme(" ",t.bMT(8,5,b.title)," ",b.titleMore,""),t.R7$(2),t.Y8G("ngIf",b.showAction),t.R7$(),t.R50("ngbCollapse",b.isCollapsed))},dependencies:[v.bT,C.tg,C.do,C.U0,m.Mm,C.$G,R.p,m.D9],encapsulation:2})}}return f})()},75622:(L,D,o)=>{o.d(D,{w:()=>x});var t=o(21413),m=o(56977),v=o(37021),C=o(35335),R=o(45236),_=o(70980),I=o(99437),y=o(18810),T=o(45286),h=o(36158),O=o(54438),P=o(51188),B=o(8147),F=o(69005),X=o(67569),f=o(3888),E=o(60177),u=o(1530);let x=(()=>{class b{constructor(l,c,M,j,e,N,V){this.routerActive=l,this.translateService=c,this.modalService=M,this.baseService=j,this.alertService=e,this.datePipe=N,this.ngxLoader=V,this.title="",this.mainDelay=50,this.operationId=0,this.entities=[],this.selectedRow=[],this.pagination={pageNumber:1,pageSize:10},this.notifier=new t.B,this.checkAll=!1,this.checkOne=!1,this.checkMore=!1,this.loader=!1,this.form={},this.isEditForm=!1,this.draw=1,this.index=0,this.lengthSelect=0,this.screenName="",this.filterToggle=!0,this.start=1,this.startFirstLoad=!0,this.btnDisabled=!0,this.loaderSearchShap=h.cX,this.loaderOperationShap=h.$$,this.operationLoader=h.ZW,this.loaderDeleteShap=h.jg,this.mainTable=h.uG,this.searchLoader=h.a7,this.deleteLoader=h.Fq,this.langArabic="ar",this.paymentTypes=[],this.tableLengthSelect=[10,20,30,50,100,500,1e3],this.maxSizePagination=10,this.isResolveList=!1,this.countLoad=0,this.activeList=[{id:1,name:"active"},{id:2,name:"noActive"}],this.pagination.pageSize=10,this.pagination.pageNumber=1}ngOnInit(){this.activeList.forEach(l=>{l.name=this.getTranslationText("general.table."+l.name)}),this.lang=this.translateService.currentLang,this.translateConfig(),this.ngOnInitMore()}ngOnInitMore(){}routeDataConfig(){this.routerActive.data.pipe((0,m.Q)(this.notifier)).subscribe(l=>{this.entities=l.data.result,this.pagination=l.data.pagination,this.pagination.pageNumber=1,this.pagination.pageSize=10,this.ngxLoader.stopLoader(h.a7)},l=>{this.alertService.error()})}translateConfig(){this.translateService.onLangChange.pipe((0,m.Q)(this.notifier)).subscribe(l=>{this.lang=l.lang})}getTranslationText(l){let c="";return this.translateService.get(l).pipe((0,m.Q)(this.notifier)).subscribe(M=>{c=M}),c}ngAfterViewInit(){this.ngAfterViewInitMore()}ngAfterViewInitMore(){}getRenderString(l){return null!=l?l.substring(0,10)+"...":""}getRenderIndex(l){return this.index++,this.index}successDataTable(l){this.ngxLoader.stopLoader(h.a7),this.pagination.totalItems=l.data.pagination.totalItems,this.startFirstLoad=!1}errorDataTable(){this.ngxLoader.stopLoader(h.a7),this.alertService.error()}openModalTitle(l,c="md"){this.isEditForm=!1,this.form={},this.modalService.open(l,{centered:!0,size:c})}openModal(l,c,M="md"){this.isEditForm=!1,this.form={},this.selectedRow=[{id:l}],this.operationId=l,this.modalService.open(c,{centered:!0,size:M})}openModalMoreOperation(l){this.isEditForm=!1,this.moreIdSelected=this.selectedRow.map(c=>c.id)}closeModelDeleted(){this.modalRef?.hide(),this.loader=!1,this.btnDisabled=!0}OnSearch(l){this.ngxLoader.startLoader("allLoader"),this.loadentities()}OnSubmit(){this.ngxLoader.startLoader(this.operationLoader),!0===this.isEditForm?this.editEntity():this.registerEntity()}loadentities(){this.baseService.get(this.pagination).pipe((0,m.Q)(this.notifier)).subscribe(l=>{this.ngxLoader.stopLoader(h.a7),this.entities=l.data,this.pagination.totalItems=l.totalItems,this.LoadSuccess()},l=>{this.ngxLoader.stopLoader(h.a7),this.alertService.error(l)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[]}LoadSuccess(){}tableChange(l){this.pagination.filterType=l.sortField,this.pagination.sortType=1==l.sortOrder?"asc":"desc",this.loadentities()}registerEntity(){let l=this.mapRegisterForm(this.form);this.baseService.register(l).pipe((0,v.O)(),(0,C.c)(this.mainDelay),(0,R.Z)(),(0,m.Q)(this.notifier),(0,_.j)(()=>this.ngxLoader.stopLoader(this.operationLoader)),(0,I.W)(c=>(0,y.$)(c))).subscribe(c=>{c.success?this.submitFunished():this.alertService.error("general.message."+c.message)},c=>{this.alertService.error("general.message."+c)})}editEntity(){let l=this.mapForm(this.form);this.baseService.edit(l.id,l).pipe((0,v.O)(),(0,C.c)(this.mainDelay),(0,R.Z)(),(0,m.Q)(this.notifier),(0,_.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(c=>{c.success?this.submitFunished():this.alertService.error("general.message."+c.message)},c=>{this.alertService.error("general.message."+c)})}mapForm(l){return l}mapRegisterForm(l){return l.id=0,l}submitFunished(){this.loadentities(),this.alertService.success(),this.modalService?.dismissAll(),this.ngxLoader.stop(h.a7),this.btnDisabled=!0}EditModel(l,c,M="md"){this.isEditForm=!0,this.baseService.getById(l).pipe((0,m.Q)(this.notifier)).subscribe(j=>{j.success?this.form=j.data:this.alertService.error("general.message."+j.message),this.modalService.open(c,{centered:!0,size:M})},j=>{this.alertService.error()})}EditModelTilte(l){this.isEditForm=!0,this.baseService.getById(this.selectedRow[0].id).pipe((0,m.Q)(this.notifier)).subscribe(M=>{M?this.form=M:this.alertService.error("general.message."+M)},M=>{this.alertService.error()})}onSelectionChange(l){this.selectedRow=l,this.lengthSelect=l.length}resetSelected(){this.selectedRow=[],this.lengthSelect=0}pageChanged(l){this.pagination.pageNumber=l,this.loadentities()}ListItemChange(l){this.pagination.pageSize=l.target.value,this.loadentities()}searchChange(l){this.pagination.filterValue=l,this.loadentities()}DeleteConfirm(){this.ngxLoader.startLoader(h.Fq);let l=this.selectedRow.map(c=>c.id);this.baseService.deleteRange(l).pipe((0,v.O)(),(0,C.c)(this.mainDelay),(0,R.Z)(),(0,m.Q)(this.notifier),(0,_.j)(()=>this.ngxLoader.stopLoader(h.Fq))).subscribe(c=>{c.success?(this.alertService.success(),this.loadentities(),this.modalService.dismissAll(),this.resetSelected()):this.alertService.error("general.message."+c)},()=>{this.alertService.error()})}DeleteConfirmSoft(){console.log(this.selectedRow,"selectedRow"),this.ngxLoader.startLoader(h.Fq),this.baseService.softDelete(this.selectedRow[0].id).pipe((0,v.O)(),(0,C.c)(this.mainDelay),(0,R.Z)(),(0,m.Q)(this.notifier),(0,_.j)(()=>this.ngxLoader.stopLoader(h.Fq))).subscribe(l=>{l.success?(this.alertService.success(),this.loadentities(),this.modalService.dismissAll(),this.resetSelected()):this.alertService.error("general.message."+l)},()=>{this.alertService.error()})}getIds(){return this.selectedRow.map(l=>l.id)}isEmpty(l){return(void 0===l||null==l||l.length)<=0}OnReset(l){this.form={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems}}onReset(){this.form={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems}}closeModel(l){this.modalRef?.hide()}ngOnDestroy(){this.notifier.next(),this.notifier.complete(),this.OnDestroyMore()}OnDestroyMore(){}static{this.\u0275fac=function(c){return new(c||b)(O.rXU(P.nX),O.rXU(B.c$),O.rXU(F.Bq),O.rXU(X.d),O.rXU(f.u),O.rXU(E.vh),O.rXU(u.eD))}}static{this.\u0275cmp=O.VBU({type:b,selectors:[["app-base"]],viewQuery:function(c,M){if(1&c&&O.GBs(T.XI,5),2&c){let j;O.mGM(j=O.lsd())&&(M.tableMaster=j.first)}},decls:0,vars:0,template:function(c,M){},encapsulation:2})}}return b})()},88148:(L,D,o)=>{o.d(D,{p:()=>v});var t=o(54438),m=o(8147);let v=(()=>{class C{static{this.\u0275fac=function(I){return new(I||C)}}static{this.\u0275cmp=t.VBU({type:C,selectors:[["ngb-pagination-info"]],inputs:{pagination:"pagination"},decls:6,vars:2,consts:[[1,"d-inline-block","mx-1","text-pInfo"],["translate","general.table.pFrom",1,"text-pInfo"],["translate","general.table.item",1,"text-pInfo"]],template:function(I,y){1&I&&(t.j41(0,"span",0),t.EFF(1),t.k0s(),t.nrm(2,"span",1),t.j41(3,"span",0),t.EFF(4),t.k0s(),t.nrm(5,"span",2)),2&I&&(t.R7$(),t.JRh(y.pagination.totalItems>y.pagination.pageNumber*y.pagination.pageSize?y.pagination.pageNumber*y.pagination.pageSize:y.pagination.totalItems),t.R7$(3),t.JRh(y.pagination.totalItems))},dependencies:[m.Mm],styles:[".text-pInfo[_ngcontent-%COMP%]{font-size:.7rem;color:#8a96a0}"]})}}return C})()},91580:(L,D,o)=>{o.d(D,{g:()=>R});var t=o(54438),m=o(60177),v=o(89417);function C(_,I){if(1&_&&(t.j41(0,"option"),t.EFF(1),t.k0s()),2&_){const y=I.$implicit;t.R7$(),t.JRh(y)}}let R=(()=>{class _{constructor(){this.lengthChange=new t.bkB}ListItemChange(y){this.lengthChange.emit(y)}static{this.\u0275fac=function(T){return new(T||_)}}static{this.\u0275cmp=t.VBU({type:_,selectors:[["table-length"]],inputs:{lengthTable:"lengthTable"},outputs:{lengthChange:"lengthChange"},decls:4,vars:1,consts:[[1,"card-toolbar","mx-2"],[1,"fs-2","text-primary"],[1,"form-select","mx-2","d-inline","form-select-sm","w-auto",3,"change"],[4,"ngFor","ngForOf"]],template:function(T,h){1&T&&(t.j41(0,"div",0),t.nrm(1,"span",1),t.j41(2,"select",2),t.bIt("change",function(P){return h.ListItemChange(P)}),t.DNE(3,C,2,1,"option",3),t.k0s()()),2&T&&(t.R7$(3),t.Y8G("ngForOf",h.lengthTable))},dependencies:[m.Sq,v.xH,v.y7],encapsulation:2})}}return _})()}}]);
"use strict";(self.webpackChunkvelzon=self.webpackChunkvelzon||[]).push([[195],{195:(Vi,se,l)=>{l.r(se),l.d(se,{ApprovalsModule:()=>qi});var g=l(60177),d=l(89417),m=l(69005),ae=l(91022),ye=l(70255),Ie=l(63789),Re=l(98982),je=l.n(Re),Te=l(53978),_=l(8147),y=l(45286),ke=l(65430),O=l(41631),f=l(1530),G=l(72510),Ee=l(71144),A=l(38542),C=l(51188),c=l(56977),v=l(37021),x=l(35335),b=l(45236),h=l(70980),q=l(75622),e=l(54438),R=l(3888),U=l(67569),D=l(45312),Y=l(21626);let W=(()=>{class i extends U.d{constructor(t){super(t,D.c.apiUrl+"ApprovalTransactionType/")}deleteTarget(t){return this.http.delete(this.baseUrl+t)}edit(t,s){return this.http.put(this.baseUrl+"Edit/"+t,s)}GetRequestType(){return this.http.get(this.baseUrl+"GetRequestType")}static{this.\u0275fac=function(s){return new(s||i)(e.KVO(Y.Qq))}}static{this.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Z=l(54384),L=l(91426),z=l(26364),P=l(40724),V=l(15084),$=l(88148),B=l(91580),F=l(5779),H=l(29935);function we(i,o){1&i&&(e.j41(0,"tr",25)(1,"th",26),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",27),e.nrm(4,"i",28),e.EFF(5," approvals.approval-types.nameEn "),e.k0s(),e.j41(6,"th",29),e.nrm(7,"i",28),e.EFF(8," approvals.approval-types.nameAr "),e.k0s(),e.j41(9,"th",30),e.nrm(10,"i",28),e.EFF(11," approvals.approval-types.isActive "),e.k0s(),e.nrm(12,"th",31),e.k0s())}function De(i,o){1&i&&e.nrm(0,"span",40)}function Fe(i,o){1&i&&e.nrm(0,"span",41)}function Ne(i,o){if(1&i&&(e.nrm(0,"i",42),e.EFF(1),e.nI1(2,"date"),e.nrm(3,"br")(4,"i",43),e.EFF(5),e.nI1(6,"date"),e.nrm(7,"br")(8,"i",44),e.EFF(9),e.nrm(10,"br")(11,"i",44),e.EFF(12)),2&i){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.i5U(2,4,t.creationTime,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",e.i5U(6,7,t.lastModificationTime,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",t.creatorName,""),e.R7$(3),e.SpI(" ",t.lastModificationName," ")}}function Me(i,o){if(1&i){const t=e.RV6();e.j41(0,"tr",32)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.DNE(8,De,1,0,"span",33)(9,Fe,1,0,"span",34),e.k0s(),e.DNE(10,Ne,13,10,"ng-template",null,3,e.C5r),e.j41(12,"td"),e.nrm(13,"i",35),e.j41(14,"button",36),e.nI1(15,"translate"),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),r=e.sdS(23);return e.Njj(a.editModal(n.id,r))}),e.nrm(16,"i",37),e.k0s(),e.j41(17,"button",38),e.nI1(18,"translate"),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),r=e.sdS(25);return e.Njj(a.openModal(n.id,r))}),e.nrm(19,"i",39),e.k0s()()()}if(2&i){const t=o.$implicit,s=o.rowIndex,n=e.sdS(11);e.R7$(2),e.JRh(s+1),e.R7$(2),e.JRh(t.nameEn),e.R7$(2),e.JRh(t.nameAr),e.R7$(2),e.Y8G("ngIf",t.isActive),e.R7$(),e.Y8G("ngIf",!t.isActive),e.R7$(4),e.Y8G("ngbTooltip",n),e.R7$(),e.FS9("pTooltip",e.bMT(15,8,"general.edit")),e.R7$(3),e.FS9("pTooltip",e.bMT(18,10,"general.delete"))}}function Ge(i,o){1&i&&(e.j41(0,"div",45),e.EFF(1," general.table.noData"),e.k0s())}function Ae(i,o){if(1&i){const t=e.RV6();e.j41(0,"div",46)(1,"div",47),e.nrm(2,"ngb-pagination-info",48),e.j41(3,"table-length",49),e.bIt("lengthChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",50)(5,"ngb-pagination",51),e.bIt("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.pagination.pageNumber,n)||(a.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&i){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function qe(i,o){1&i&&(e.j41(0,"span",76),e.EFF(1,"general.action.register "),e.k0s())}function Le(i,o){1&i&&(e.j41(0,"span",76),e.EFF(1,"general.action.edit "),e.k0s())}function Pe(i,o){1&i&&(e.j41(0,"div",77),e.EFF(1," general.message.filedIdRequired"),e.k0s())}function Ve(i,o){1&i&&(e.j41(0,"div",77),e.EFF(1," general.message.filedIdRequired"),e.k0s())}function $e(i,o){1&i&&(e.j41(0,"div",77),e.EFF(1," general.message.filedIdRequired"),e.k0s())}function Be(i,o){if(1&i){const t=e.RV6();e.j41(0,"div",52)(1,"h4",53),e.DNE(2,qe,2,0,"span",54)(3,Le,2,0,"span",54),e.nrm(4,"span",55),e.k0s(),e.j41(5,"button",56),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(6,"form",57,4),e.bIt("ngSubmit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.onSubmit())}),e.nrm(8,"ngx-ui-loader",18),e.j41(9,"div",58)(10,"div",59)(11,"div",60)(12,"div",9)(13,"div",61)(14,"label",62),e.EFF(15,"approvals.approval-types.nameEn"),e.k0s(),e.j41(16,"div",63)(17,"input",64,5),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.nameEn,n)||(a.form.nameEn=n),e.Njj(n)}),e.k0s(),e.DNE(19,Pe,2,0,"div",65),e.k0s()(),e.j41(20,"div",61)(21,"label",66),e.EFF(22,"approvals.approval-types.nameAr"),e.k0s(),e.j41(23,"div",63)(24,"input",67,6),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.nameAr,n)||(a.form.nameAr=n),e.Njj(n)}),e.k0s(),e.DNE(26,Ve,2,0,"div",65),e.k0s()(),e.j41(27,"div",68)(28,"label",69),e.EFF(29,"approvals.approval-types.type"),e.k0s(),e.j41(30,"ng-select",70,7),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.type,n)||(a.form.type=n),e.Njj(n)}),e.k0s(),e.DNE(32,$e,2,0,"div",65),e.k0s(),e.j41(33,"div",68)(34,"label",71),e.EFF(35,"approvals.approval-types.isActive"),e.k0s(),e.j41(36,"p-inputSwitch",72),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.isActive,n)||(a.form.isActive=n),e.Njj(n)}),e.k0s()()(),e.j41(37,"div",73),e.nrm(38,"button",74),e.j41(39,"button",75),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()()()()()()}if(2&i){const t=e.sdS(7),s=e.sdS(18),n=e.sdS(25),a=e.sdS(31),r=e.XpG();e.R7$(2),e.Y8G("ngIf",!r.isEditForm),e.R7$(),e.Y8G("ngIf",r.isEditForm),e.R7$(5),e.Y8G("hasProgressBar",!1)("fgsType",r.loaderOperationShap)("loaderId",r.operationLoader),e.R7$(9),e.R50("ngModel",r.form.nameEn),e.R7$(2),e.Y8G("ngIf",s.invalid&&s.touched),e.R7$(5),e.R50("ngModel",r.form.nameAr),e.R7$(2),e.Y8G("ngIf",n.invalid&&n.touched),e.R7$(4),e.Y8G("items",r.types)("multiple",!1),e.R50("ngModel",r.form.type),e.R7$(2),e.Y8G("ngIf",a.invalid&&a.touched),e.R7$(4),e.R50("ngModel",r.form.isActive),e.R7$(2),e.Y8G("disabled",!t.valid)}}function Xe(i,o){if(1&i){const t=e.RV6();e.j41(0,"delete-modal",78),e.bIt("deleteConfirm",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.DeleteConfirm())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}}let Oe=(()=>{class i extends q.w{constructor(t,s,n,a,r,p,S,w,j,T){super(t,s,S,r,n,a,p),this.baseService=r,this.service=w,this.excelService=j,this.router=T,this.title="approvals.approval-types.title",this.submitted=!1,this.isResolveList=!0,this.types=[],this.configRoute(),this.getTypes()}configRoute(){this.routerActive.data.pipe((0,c.Q)(this.notifier)).subscribe(t=>{this.entities=t.data.data,this.pagination.totalItems=t.data.totalItems},()=>{this.alertService.error()})}getTypes(){this.baseService.GetRequestType().pipe((0,c.Q)(this.notifier)).subscribe(t=>{let s=t.data;s.forEach(n=>{n.name=this.getTranslationText("approvals.approval-types."+n.name)}),this.types=s})}onSubmit(){this.ngxLoader.startLoader(this.operationLoader),!0===this.isEditForm?this.editEntity():this.registerEntity()}onSearch(){this.ngxLoader.startLoader(this.searchLoader),this.loadentities()}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,"Service Type",[])}mapExcel(){let t=[];return this.entities?.forEach(s=>{t.push({title:s.title,body:s.body,type:s.type,isActive:this.getTranslationText("general.table.active")})}),t}editModal(t,s,n="md"){this.isEditForm=!0,this.baseService.getById(t).subscribe({next:a=>{this.form=a.data}}),this.modalService.open(s,{centered:!0,size:n})}DeleteConfirm(){console.log(this.selectedRow),this.ngxLoader.startLoader(this.deleteLoader),this.baseService.delete(this.selectedRow[0].id).pipe((0,v.O)(),(0,x.c)(this.mainDelay),(0,b.Z)(),(0,c.Q)(this.notifier),(0,h.j)(()=>this.ngxLoader.stopLoader(this.deleteLoader))).subscribe(s=>{s.success?(this.alertService.success(),this.loadentities(),this.modalService.dismissAll(),this.resetSelected()):this.alertService.error("general.message."+s)},()=>{this.alertService.error()})}onReset(){this.form={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems},this.loadentities()}static{this.\u0275fac=function(s){return new(s||i)(e.rXU(C.nX),e.rXU(_.c$),e.rXU(R.u),e.rXU(g.vh),e.rXU(W),e.rXU(f.eD),e.rXU(m.Bq),e.rXU(Z.m),e.rXU(L.V),e.rXU(C.Ix))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-approval-types"]],features:[e.Vt3],decls:26,vars:24,consts:[["tableMaster",""],["AddModal",""],["deleteModal",""],["tooltipContent",""],["formEntity","ngForm"],["nameEn","ngModel"],["nameAr","ngModel"],["type","ngModel"],[3,"title","breadcrumbItems"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],[3,"reset","search","exportXlsx","addNew","showExport","totalItems","title"],["control",""],[1,"col-12","col-md-3","mb-2"],["InputTirmFilter","","name","nameEn","type","text",1,"form-control","fs-6",3,"ngModelChange","ngModel","placeholder"],["InputTirmFilter","","name","nameAr","type","text",1,"form-control","fs-6",3,"ngModelChange","ngModel","placeholder"],[1,"card-body"],[3,"hasProgressBar","fgsType","loaderId"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["translate","",2,"width",".5%"],["pSortableColumn","nameEn","translate","",2,"width","10%"],[1,"ri-expand-up-down-line"],["pSortableColumn","nameAr","translate","",2,"width","10%"],["pSortableColumn","isActive","translate","",2,"width","10%"],["translate","",2,"width","20%"],[1,"fs-5"],["class","badge bg-success-subtle text-success p-2","translate","general.table.active",4,"ngIf"],["class","badge bg-danger-subtle text-danger p-2","translate","general.table.noActive",4,"ngIf"],["tooltipPosition","top",1,"mdi","mdi-cog-outline","d-inline","text-muted","fs-16","align-middle","me-1",3,"ngbTooltip"],["tooltipPosition","top",1,"btn","btn-sm","btn-soft-info","edit-list","mx-2",3,"click","pTooltip"],[1,"ri-pencil-fill","align-bottom","mx-1"],["tooltipPosition","top",1,"btn","btn-sm","btn-soft-danger","remove-list",3,"click","pTooltip"],[1,"ri-delete-bin-5-fill","align-bottom"],["translate","general.table.active",1,"badge","bg-success-subtle","text-success","p-2"],["translate","general.table.noActive",1,"badge","bg-danger-subtle","text-danger","p-2"],[1,"ri-history-fill","text-warning"],[1,"ri-history-fill","text-danger"],[1,"ri-user-location-fill","text-primary"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["class","fw-bold fs-4","translate","",4,"ngIf"],["translate","approvals.approval-types.title",1,"fw-bold","fs-4"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[3,"ngSubmit"],[1,"modal-content"],[1,"modal-body"],[1,"mx-2"],[1,"col-12","col-md-12","mb-3"],["for","nameEn","translate","",1,"fw-bold","form-label","required"],[1,"input-group"],["InputTirmFilter","","name","nameEn","type","text","required","","id","nameEn",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],["for","nameAr","translate","",1,"fw-bold","form-label","required"],["InputTirmFilter","","name","nameAr","type","text","required","","id","nameAr",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,"col-12","mb-3"],["translate","",1,"required","fw-bold","form-label"],["name","type","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","ngModel"],["for","isActive","translate","",1,"fw-bold","form-label","d-block"],["id","isActive","name","isActive","inputId","isActive",3,"ngModelChange","ngModel"],[1,"d-flex","gap-2","justify-content-end","mt-4","mb-2"],["type","submit","id","save","translate","general.action.save",1,"btn","w-sm","btn-danger",3,"disabled"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light",3,"click"],["translate","",1,"fw-bold","fs-4"],["translate","",1,"text-danger","text-center"],[3,"deleteConfirm","dismiss"]],template:function(s,n){if(1&s){const a=e.RV6();e.nrm(0,"app-breadcrumbs",8),e.nI1(1,"translate"),e.j41(2,"div",9)(3,"div",10)(4,"div",11)(5,"base-filter",12),e.bIt("reset",function(){return e.eBV(a),e.Njj(n.onReset())})("search",function(){return e.eBV(a),e.Njj(n.onSearch())})("exportXlsx",function(){return e.eBV(a),e.Njj(n.onExportXlsx())})("addNew",function(){e.eBV(a);const p=e.sdS(23);return e.Njj(n.openModalTitle(p))}),e.qex(6,13),e.j41(7,"div",14)(8,"input",15),e.nI1(9,"translate"),e.mxI("ngModelChange",function(p){return e.eBV(a),e.DH7(n.pagination.nameEn,p)||(n.pagination.nameEn=p),e.Njj(p)}),e.k0s()(),e.j41(10,"div",14)(11,"input",16),e.nI1(12,"translate"),e.mxI("ngModelChange",function(p){return e.eBV(a),e.DH7(n.pagination.nameAr,p)||(n.pagination.nameAr=p),e.Njj(p)}),e.k0s()(),e.bVm(),e.k0s(),e.j41(13,"div",17),e.nrm(14,"ngx-ui-loader",18),e.j41(15,"div",19)(16,"p-table",20,0),e.bIt("onLazyLoad",function(p){return e.eBV(a),e.Njj(n.tableChange(p))})("selectionChange",function(p){return e.eBV(a),e.Njj(n.onSelectionChange(p))}),e.DNE(18,we,13,0,"ng-template",21)(19,Me,20,12,"ng-template",22),e.k0s()(),e.DNE(20,Ge,2,0,"div",23)(21,Ae,6,8,"div",24),e.k0s()()()(),e.DNE(22,Be,40,15,"ng-template",null,1,e.C5r)(24,Xe,1,0,"ng-template",null,2,e.C5r)}2&s&&(e.FS9("title",e.bMT(1,18,n.title)),e.Y8G("breadcrumbItems",n.breadCrumbItems),e.R7$(5),e.Y8G("showExport",!1)("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(3),e.FS9("placeholder",e.bMT(9,20,"approvals.approval-types.nameEn")),e.R50("ngModel",n.pagination.nameEn),e.R7$(3),e.FS9("placeholder",e.bMT(12,22,"approvals.approval-types.nameAr")),e.R50("ngModel",n.pagination.nameAr),e.R7$(3),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderSearchShap)("loaderId",n.searchLoader),e.R7$(2),e.Y8G("value",n.entities)("rows",n.pagination.pageSize)("lazy",!0)("totalRecords",n.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",n.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems>0))},dependencies:[g.bT,d.qT,d.me,d.BC,d.cb,d.YS,d.vS,d.cV,m.s5,z.m,P.b,V.w,$.p,B.g,_.Mm,y.XI,F.Ei,y.Tg,O.HW,f.Cv,G.vr,m.md,H.m,A.m,g.vh,_.D9],encapsulation:2})}}return i})();var X=l(56701),ee=l(81391);let oe=(()=>{class i extends U.d{constructor(t){super(t,D.c.apiUrl+"ApprovalSetting/")}get(t){return this.http.post(this.baseUrl+"Get",t)}getPending(){return this.http.get(this.baseUrl+"PendingStepsForUser")}GetStepsById(t){return this.http.get(this.baseUrl+"Steps/"+t)}GetEmployeeLookup(){return this.http.get(this.baseUrl+"GetEmployeeLookup")}deleteTarget(t){return this.http.delete(this.baseUrl+t)}edit(t,s){return this.http.put(this.baseUrl+"Edit/"+t,s)}approve(t){return this.http.put(this.baseUrl+"Approve",t)}reject(t){return this.http.put(this.baseUrl+"Reject",t)}static{this.\u0275fac=function(s){return new(s||i)(e.KVO(Y.Qq))}}static{this.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),te=(()=>{class i extends U.d{constructor(t){super(t,D.c.apiUrl+"Department/")}deleteTarget(t){return this.http.delete(this.baseUrl+t)}get(t){return this.http.get(this.baseUrl+"GetOrganizationalStructure",t)}delete(t){return this.http.delete(`${this.baseUrl}SoftDelete/${t}`,this.httpOptions)}static{this.\u0275fac=function(s){return new(s||i)(e.KVO(Y.Qq))}}static{this.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var re=l(94562),I=l(73687);const Ue=["dataTable"];function Ye(i,o){1&i&&(e.j41(0,"tr",24)(1,"th",25),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",26),e.nrm(4,"i",27),e.EFF(5," approvals.approvalSettings.approvalType "),e.k0s(),e.nrm(6,"th",28),e.k0s())}function ze(i,o){if(1&i&&(e.nrm(0,"i",35),e.EFF(1),e.nI1(2,"date"),e.nrm(3,"br")(4,"i",36),e.EFF(5),e.nI1(6,"date"),e.nrm(7,"br")(8,"i",37),e.EFF(9),e.nrm(10,"br")),2&i){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.i5U(2,3,t.creationTime,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",e.i5U(6,6,t.lastModificationTime,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",t.creatorName,"")}}function He(i,o){if(1&i){const t=e.RV6();e.j41(0,"tr",29)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.DNE(5,ze,11,9,"ng-template",null,4,e.C5r),e.j41(7,"td"),e.nrm(8,"i",30),e.j41(9,"button",31),e.nI1(10,"translate"),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),r=e.sdS(20);return e.Njj(a.editModal(n,r,"lg"))}),e.nrm(11,"i",32),e.k0s(),e.j41(12,"button",33),e.nI1(13,"translate"),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),r=e.sdS(24);return e.Njj(a.openModal(n.id,r))}),e.nrm(14,"i",34),e.k0s()()()}if(2&i){const t=o.$implicit,s=o.rowIndex,n=e.sdS(6),a=e.XpG();e.R7$(2),e.JRh(s+1),e.R7$(2),e.JRh("en"==a.lang?t.approvalTransactionTypeNameEn:t.approvalTransactionTypeNameAr),e.R7$(4),e.Y8G("ngbTooltip",n),e.R7$(),e.FS9("pTooltip",e.bMT(10,5,"general.edit")),e.R7$(3),e.FS9("pTooltip",e.bMT(13,7,"general.delete"))}}function Qe(i,o){1&i&&(e.j41(0,"div",38),e.EFF(1," general.table.noData "),e.k0s())}function Je(i,o){if(1&i){const t=e.RV6();e.j41(0,"div",39)(1,"div",40),e.nrm(2,"ngb-pagination-info",41),e.j41(3,"table-length",42),e.bIt("lengthChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",43)(5,"ngb-pagination",44),e.bIt("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.pagination.pageNumber,n)||(a.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&i){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function Ke(i,o){1&i&&(e.j41(0,"span",67),e.EFF(1,"general.action.register "),e.k0s())}function We(i,o){1&i&&(e.j41(0,"span",67),e.EFF(1,"general.action.edit "),e.k0s())}function Ze(i,o){1&i&&(e.j41(0,"div",68),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function et(i,o){if(1&i){const t=e.RV6();e.j41(0,"div",69)(1,"label",70),e.EFF(2,"approvals.positions.title"),e.k0s(),e.j41(3,"ng-select",71),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG(2);return e.DH7(a.positionsForm.position,n)||(a.positionsForm.position=n),e.Njj(n)}),e.k0s()()}if(2&i){const t=e.XpG(2);e.R7$(3),e.Y8G("items",t.positions)("multiple",!1),e.R50("ngModel",t.positionsForm.position)}}function tt(i,o){if(1&i){const t=e.RV6();e.j41(0,"div",72)(1,"button",73),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.addDepartmentData())}),e.nrm(2,"i",74),e.k0s()()}if(2&i){const t=e.XpG(2);e.R7$(),e.Y8G("disabled",!t.positionsForm.position)}}function nt(i,o){1&i&&e.nrm(0,"th",86)}function it(i,o){if(1&i&&(e.j41(0,"td",87)(1,"div",88)(2,"div",89),e.EFF(3,": :"),e.k0s(),e.j41(4,"label"),e.EFF(5),e.k0s()()()),2&i){const t=o.$implicit,s=e.XpG(3);e.R7$(5),e.JRh("en"===s.lang?t.nameEn:t.nameAr)}}function st(i,o){1&i&&(e.j41(0,"th",90),e.EFF(1,"approvals.approvalSettings.action"),e.k0s())}function at(i,o){if(1&i){const t=e.RV6();e.j41(0,"td",87)(1,"button",91),e.bIt("click",function(){const n=e.eBV(t).index,a=e.XpG(3);return e.Njj(a.deleteItem(n))}),e.nrm(2,"i",92),e.k0s()()}}function ot(i,o){1&i&&e.nrm(0,"tr",93)}function rt(i,o){1&i&&e.nrm(0,"tr",94)}function lt(i,o){1&i&&e.nrm(0,"div")}function pt(i,o){1&i&&(e.j41(0,"div",95)(1,"span",96),e.EFF(2),e.nI1(3,"translate"),e.k0s()()),2&i&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"general.table.noData")," "))}function dt(i,o){if(1&i){const t=e.RV6();e.j41(0,"div",54)(1,"div",75)(2,"label",70),e.EFF(3,"approvals.approvalSettings.hierarchy"),e.k0s(),e.j41(4,"div",18)(5,"table",76,7),e.bIt("cdkDropListDropped",function(n){e.eBV(t);const a=e.XpG(2);return e.Njj(a.departmentsTable(n))}),e.qex(7,77),e.DNE(8,nt,1,0,"th",78)(9,it,6,1,"td",79),e.bVm(),e.qex(10,80),e.DNE(11,st,2,0,"th",81)(12,at,3,0,"td",79),e.bVm(),e.DNE(13,ot,1,0,"tr",82),e.qex(14),e.DNE(15,rt,1,0,"tr",83),e.bVm(),e.DNE(16,lt,1,0,"div",84),e.k0s(),e.DNE(17,pt,4,3,"div",85),e.k0s()()()}if(2&i){const t=e.XpG(2);e.R7$(5),e.Y8G("dataSource",t.selectedPositions),e.R7$(8),e.Y8G("matHeaderRowDef",t.displayedColumns),e.R7$(2),e.Y8G("matRowDefColumns",t.displayedColumns),e.R7$(2),e.Y8G("ngIf",!t.selectedPositions.length)}}function ct(i,o){if(1&i){const t=e.RV6();e.j41(0,"div",45)(1,"h4",46),e.DNE(2,Ke,2,0,"span",47)(3,We,2,0,"span",47),e.nrm(4,"span",48),e.k0s(),e.j41(5,"button",49),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(6,"form",50,5),e.bIt("ngSubmit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.onSubmit())}),e.nrm(8,"ngx-ui-loader",17),e.j41(9,"div",51)(10,"div",52)(11,"div",53)(12,"div",9)(13,"div",54)(14,"label",55),e.EFF(15,"approvals.approvalSettings.approvalType"),e.k0s(),e.j41(16,"ng-select",56,6),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.approvalTransactionTypeId,n)||(a.form.approvalTransactionTypeId=n),e.Njj(n)}),e.k0s(),e.DNE(18,Ze,2,0,"div",57),e.k0s(),e.j41(19,"div",58)(20,"label",59),e.EFF(21,"approvals.approvalSettings.isHierarchy"),e.k0s(),e.j41(22,"p-inputSwitch",60),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.switchManual())}),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.isHierarchy,n)||(a.isHierarchy=n),e.Njj(n)}),e.k0s()(),e.DNE(23,et,4,3,"div",61)(24,tt,3,1,"div",62)(25,dt,18,4,"div",63),e.k0s(),e.j41(26,"div",64),e.nrm(27,"button",65),e.j41(28,"button",66),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()()()()()()}if(2&i){const t=e.sdS(7),s=e.sdS(17),n=e.XpG();e.R7$(2),e.Y8G("ngIf",!n.isEditForm),e.R7$(),e.Y8G("ngIf",n.isEditForm),e.R7$(5),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderOperationShap)("loaderId",n.operationLoader),e.R7$(8),e.Y8G("items",n.types)("multiple",!1),e.R50("ngModel",n.form.approvalTransactionTypeId),e.R7$(2),e.Y8G("ngIf",s.invalid&&s.touched),e.R7$(4),e.R50("ngModel",n.isHierarchy),e.R7$(),e.Y8G("ngIf",!n.isHierarchy),e.R7$(),e.Y8G("ngIf",!n.isHierarchy),e.R7$(),e.Y8G("ngIf",!n.isHierarchy),e.R7$(2),e.Y8G("disabled",!t.valid)}}function mt(i,o){if(1&i){const t=e.RV6();e.j41(0,"div",51)(1,"div",97)(2,"button",98),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss("Cross click"))}),e.k0s()(),e.j41(3,"div",52)(4,"div",99),e.nrm(5,"lord-icon",100),e.j41(6,"div",101)(7,"h4"),e.EFF(8,"Are you sure ?"),e.k0s(),e.j41(9,"p",102),e.EFF(10,"Are you sure you want to remove this ticket ?"),e.k0s()()(),e.j41(11,"div",103)(12,"button",104),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.close("Close click"))}),e.EFF(13,"Close "),e.k0s(),e.j41(14,"button",105),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG();return a.deleteData(a.deleteId),e.Njj(n.close("Close click"))}),e.EFF(15,"Yes, Delete It! "),e.k0s()()()()}}function gt(i,o){if(1&i){const t=e.RV6();e.j41(0,"delete-modal",106),e.bIt("deleteConfirm",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.DeleteConfirm())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}}let ut=(()=>{class i extends q.w{confirm(t,s){this.deleteId=s,this.modalService.open(t,{centered:!0})}deleteData(t){this.deleteId=t,document.getElementById("row-"+t)?.remove()}constructor(t,s,n,a,r,p,S,w,j,T,J,k,M){super(t,s,S,r,n,a,p),this.baseService=r,this._approvalTypesService=w,this._departmentsService=j,this._positionsService=T,this.service=J,this.excelService=k,this.router=M,this.title="approvals.approvalSettings.title",this.submitted=!1,this.isHierarchy=!1,this.types=[],this.departments=[],this.positions=[],this.structures=[],this.selectedPositions=[],this.statusEnum=[{nameEn:"None Review",nameAr:"\u0644\u0627 \u064a\u0648\u062c\u062f \u0645\u0631\u0627\u062c\u0639\u0629",id:1},{nameEn:"Reject",nameAr:"\u0645\u0631\u0641\u0648\u0636",id:2},{nameEn:"Accept",nameAr:"\u0645\u0642\u0628\u0648\u0644",id:3}],this.displayedColumns=["nameEn","action"],this.task={},this.form={isHierarchy:!1,steps:[]},this.positionsForm={},this.isResolveList=!0,this.configRoute(),this.getTypesDropdown(),this.getDropDownDropdown()}getTypesDropdown(){this._approvalTypesService.getDropDown().pipe((0,c.Q)(this.notifier)).subscribe(t=>{this.types=t.data},()=>{this.alertService.error()})}openModalTitle(t,s="md"){this.isEditForm=!1,this.selectedPositions=[],this.form={},this.modalService.open(t,{centered:!0,size:s})}getDropDownDropdown(){this._positionsService.GetDropDown().pipe((0,c.Q)(this.notifier)).subscribe(t=>{this.positions=t.data,console.log(t)},()=>{this.alertService.error()})}configRoute(){this.routerActive.data.pipe((0,c.Q)(this.notifier)).subscribe(t=>{this.task=t,this.entities=t.data.data,this.dataSource=t.data.data,this.pagination.totalItems=t.data.totalItems},()=>{this.alertService.error()})}onSubmit(){this.ngxLoader.startLoader(this.operationLoader),this.form.steps=this.selectedPositions,!0===this.isEditForm?this.editEntity():this.registerEntity()}onSearch(){this.ngxLoader.startLoader(this.searchLoader),this.loadentities()}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,"Service Type",[])}mapExcel(){let t=[];return this.entities?.forEach(s=>{t.push({title:s.title,body:s.body,type:s.type,isActive:this.getTranslationText("general.table.active")})}),t}editModal(t,s,n="md"){this.isEditForm=!0,this.form.id=t.id,this.form.approvalTransactionTypeId=t.approvalTransactionTypeId,this.form.isHierarchy=t.isHierarchy,this.isHierarchy=t.isHierarchy,this.selectedPositions=[],this.baseService.getById(t.id).subscribe({next:a=>{this.isHierarchy||a.data.approvalSettingSteps.forEach(r=>{this.selectedPositions.push({nameAr:r.nameAr,nameEn:r.nameEn,id:r.approvalStepId,positionId:r.positionId})}),this.controlOrder(),this.table.renderRows()}}),this.modalService.open(s,{centered:!0,size:n})}DeleteConfirm(){console.log(this.selectedRow),this.ngxLoader.startLoader(this.deleteLoader),this.baseService.delete(this.selectedRow[0].id).pipe((0,v.O)(),(0,x.c)(this.mainDelay),(0,b.Z)(),(0,c.Q)(this.notifier),(0,h.j)(()=>this.ngxLoader.stopLoader(this.deleteLoader))).subscribe(s=>{s.success?(this.alertService.success(),this.loadentities(),this.modalService.dismissAll(),this.resetSelected()):this.alertService.error("general.message."+s)},()=>{this.alertService.error()})}onReset(){this.form={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems},this.loadentities()}departmentsTable(t){(0,ee.HD)(this.selectedPositions,t.previousIndex,t.currentIndex),this.controlOrder(),this.table.renderRows()}addDepartmentData(){!this.selectedPositions.some(s=>s.positionId==this.positionsForm.position.id)&&!this.isHierarchy&&this.selectedPositions.push({nameAr:this.positionsForm.position.display,nameEn:this.positionsForm.position.display,positionId:this.positionsForm.position.id}),this.controlOrder(),this.table.renderRows(),this.positionsForm={}}controlOrder(){for(let t=0;t<this.selectedPositions.length;t++)this.selectedPositions[t].stepOrder=t+1}switchManual(){this.selectedPositions=[],this.form.isHierarchy=this.isHierarchy,this.positionsForm={},this.isHierarchy||this.table.renderRows()}deleteItem(t){this.selectedPositions.splice(t,1),this.table.renderRows()}static{this.\u0275fac=function(s){return new(s||i)(e.rXU(C.nX),e.rXU(_.c$),e.rXU(R.u),e.rXU(g.vh),e.rXU(oe),e.rXU(f.eD),e.rXU(m.Bq),e.rXU(W),e.rXU(te),e.rXU(re.c),e.rXU(Z.m),e.rXU(L.V),e.rXU(C.Ix))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-approval-settings"]],viewQuery:function(s,n){if(1&s&&e.GBs(Ue,5),2&s){let a;e.mGM(a=e.lsd())&&(n.table=a.first)}},features:[e.Vt3],decls:25,vars:20,consts:[["tableMaster",""],["AddModal",""],["deleteModel",""],["deleteModal",""],["tooltipContent",""],["formEntity","ngForm"],["approvalTransactionTypeIdModel","ngModel"],["dataTable",""],[3,"title","breadcrumbItems"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],[3,"reset","search","exportXlsx","addNew","showExport","totalItems","title"],["control",""],[1,"col-12","col-md-3","mb-2"],["InputTirmFilter","","name","title","type","text",1,"form-control","fs-6",3,"ngModelChange","ngModel","placeholder"],[1,"card-body"],[3,"hasProgressBar","fgsType","loaderId"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["translate","",2,"width",".5%"],["pSortableColumn","approvalTransactionTypeId","translate","",2,"width","10%"],[1,"ri-expand-up-down-line"],["translate","",2,"width","20%"],[1,"fs-5"],["tooltipPosition","top",1,"mdi","mdi-cog-outline","d-inline","text-muted","fs-16","align-middle","me-1",3,"ngbTooltip"],["tooltipPosition","top",1,"btn","btn-sm","btn-soft-info","edit-list","mx-2",3,"click","pTooltip"],[1,"ri-pencil-fill","align-bottom","mx-1"],["tooltipPosition","top",1,"btn","btn-sm","btn-soft-danger","remove-list",3,"click","pTooltip"],[1,"ri-delete-bin-5-fill","align-bottom"],[1,"ri-history-fill","text-warning"],[1,"ri-history-fill","text-danger"],[1,"ri-user-location-fill","text-primary"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["class","fw-bold fs-4","translate","",4,"ngIf"],["translate","approvals.approvalSettings.title",1,"fw-bold","fs-4"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[3,"ngSubmit"],[1,"modal-content"],[1,"modal-body"],[1,"mx-2"],[1,"col-12","col-md-12","mb-3"],["for","approvalTransactionTypeId","translate","",1,"fw-bold","form-label","required"],["name","approvalTransactionTypeId","bindValue","id","bindLabel","nameAR","required","",3,"ngModelChange","items","multiple","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],[1,"col-md-12","col-12","mb-3"],["translate","",1,"fw-bold","form-label","w-100"],["name","isHierarchy","inputId","isHierarchy",3,"click","ngModelChange","ngModel"],["class","col-12 col-md-6 mb-3",4,"ngIf"],["class","col-12 col-md-2 mb-3 d-flex justify-content-center align-items-end",4,"ngIf"],["class","col-12 col-md-12 mb-3",4,"ngIf"],[1,"d-flex","gap-2","justify-content-end","mt-4","mb-2"],["type","submit","id","save","translate","general.action.save",1,"btn","w-sm","btn-danger",3,"disabled"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light",3,"click"],["translate","",1,"fw-bold","fs-4"],["translate","",1,"text-danger","text-center"],[1,"col-12","col-md-6","mb-3"],["translate","",1,"fw-bold","form-label"],["name","status","bindLabel","display",3,"ngModelChange","items","multiple","ngModel"],[1,"col-12","col-md-2","mb-3","d-flex","justify-content-center","align-items-end"],[1,"btn","btn-success",3,"click","disabled"],[1,"ri-add-fill"],["id","todo-task",1,"todo-task"],["mat-table","","cdkDropList","",3,"cdkDropListDropped","dataSource"],["matColumnDef","nameEn"],["mat-header-cell","","translate","approvals.approvalSettings.position",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","action"],["mat-header-cell","","translate","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","cdkDrag","",4,"matRowDef","matRowDefColumns"],[4,"cdkDragPlaceholder"],["class","my-3 d-flex justify-content-center",4,"ngIf"],["mat-header-cell","","translate","approvals.approvalSettings.position"],["mat-cell",""],[1,"d-flex","align-items-start"],[1,"task-handle","px-1","bg-light","rounded"],["mat-header-cell","","translate",""],["type","button",1,"btn","btn-sm","btn-soft-danger",3,"click"],[1,"ri-delete-bin-5-fill"],["mat-header-row",""],["mat-row","","cdkDrag",""],[1,"my-3","d-flex","justify-content-center"],[1,"badge","bg-warning"],[1,"modal-header"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","close-removetodomodal",1,"btn-close",3,"click"],[1,"mt-2","text-center"],["src","https://cdn.lordicon.com/gsqxdxog.json","trigger","loop","colors","primary:#f7b84b,secondary:#f06548",2,"width","100px","height","100px"],[1,"mt-4","pt-2","fs-15","mx-4","mx-sm-5"],[1,"text-muted","mx-4","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","button","data-bs-dismiss","modal",1,"btn","w-sm","btn-light",3,"click"],["type","button","id","remove-todoitem",1,"btn","w-sm","btn-danger",3,"click"],[3,"deleteConfirm","dismiss"]],template:function(s,n){if(1&s){const a=e.RV6();e.nrm(0,"app-breadcrumbs",8),e.nI1(1,"translate"),e.j41(2,"div",9)(3,"div",10)(4,"div",11)(5,"base-filter",12),e.bIt("reset",function(){return e.eBV(a),e.Njj(n.onReset())})("search",function(){return e.eBV(a),e.Njj(n.onSearch())})("exportXlsx",function(){return e.eBV(a),e.Njj(n.onExportXlsx())})("addNew",function(){e.eBV(a);const p=e.sdS(20);return e.Njj(n.openModalTitle(p,"lg"))}),e.qex(6,13),e.j41(7,"div",14)(8,"input",15),e.nI1(9,"translate"),e.mxI("ngModelChange",function(p){return e.eBV(a),e.DH7(n.pagination.title,p)||(n.pagination.title=p),e.Njj(p)}),e.k0s()(),e.bVm(),e.k0s(),e.j41(10,"div",16),e.nrm(11,"ngx-ui-loader",17),e.j41(12,"div",18)(13,"p-table",19,0),e.bIt("onLazyLoad",function(p){return e.eBV(a),e.Njj(n.tableChange(p))})("selectionChange",function(p){return e.eBV(a),e.Njj(n.onSelectionChange(p))}),e.DNE(15,Ye,7,0,"ng-template",20)(16,He,15,9,"ng-template",21),e.k0s()(),e.DNE(17,Qe,2,0,"div",22)(18,Je,6,8,"div",23),e.k0s()()()(),e.DNE(19,ct,29,14,"ng-template",null,1,e.C5r)(21,mt,16,0,"ng-template",null,2,e.C5r)(23,gt,1,0,"ng-template",null,3,e.C5r)}2&s&&(e.FS9("title",e.bMT(1,16,n.title)),e.Y8G("breadcrumbItems",n.breadCrumbItems),e.R7$(5),e.Y8G("showExport",!1)("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(3),e.FS9("placeholder",e.bMT(9,18,"approvals.approvalSettings.formTitle")),e.R50("ngModel",n.pagination.title),e.R7$(3),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderSearchShap)("loaderId",n.searchLoader),e.R7$(2),e.Y8G("value",n.entities)("rows",n.pagination.pageSize)("lazy",!0)("totalRecords",n.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",n.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems>0))},dependencies:[g.bT,d.qT,d.me,d.BC,d.cb,d.YS,d.vS,d.cV,m.s5,z.m,P.b,V.w,$.p,B.g,_.Mm,y.XI,F.Ei,y.Tg,O.HW,f.Cv,G.vr,m.md,H.m,A.m,ee.T1,ee.O7,I.Zl,I.tL,I.ji,I.cC,I.YV,I.iL,I.KS,I.$R,I.YZ,I.NB,g.vh,_.D9],encapsulation:2})}}return i})();var Q=l(56131);let _t=(()=>{class i extends Q.E{constructor(t,s,n){super(t,s,n)}static{this.\u0275fac=function(s){return new(s||i)(e.KVO(C.Ix),e.KVO(W),e.KVO(R.u))}}static{this.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),ht=(()=>{class i extends Q.E{constructor(t,s,n){super(t,s,n)}static{this.\u0275fac=function(s){return new(s||i)(e.KVO(C.Ix),e.KVO(te),e.KVO(R.u))}}static{this.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var le=l(99437),pe=l(18810),u=l(36158),ft=l(34578),de=l(53928),vt=l(99902),bt=l(94575),E=l(49969),ce=l(81455),me=l(52423),ge=l(92016),ue=l(21413);const Ct=["pOrganizationChartNode",""],xt=(i,o)=>({"p-organizationchart-node-content":!0,"p-organizationchart-selectable-node":i,"p-highlight":o}),_e=i=>({$implicit:i}),he=i=>({"p-organizationchart-line-top":i});function St(i,o){if(1&i&&(e.j41(0,"div"),e.EFF(1),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.JRh(t.node.label)}}function yt(i,o){1&i&&e.eu8(0)}function It(i,o){if(1&i&&(e.j41(0,"div"),e.DNE(1,yt,1,0,"ng-container",6),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("ngTemplateOutlet",t.chart.getTemplateForNode(t.node))("ngTemplateOutletContext",e.eq3(2,_e,t.node))}}function Rt(i,o){1&i&&e.nrm(0,"ChevronDownIcon",11),2&i&&(e.Y8G("styleClass","p-node-toggler-icon"),e.BMQ("data-pc-section","nodeTogglerIcon"))}function jt(i,o){1&i&&e.nrm(0,"ChevronUpIcon",11),2&i&&(e.Y8G("styleClass","p-node-toggler-icon"),e.BMQ("data-pc-section","nodeTogglerIcon"))}function Tt(i,o){if(1&i&&(e.qex(0),e.DNE(1,Rt,1,2,"ChevronDownIcon",10)(2,jt,1,2,"ChevronUpIcon",10),e.bVm()),2&i){const t=e.XpG(4);e.R7$(),e.Y8G("ngIf",t.node.expanded),e.R7$(),e.Y8G("ngIf",!t.node.expanded)}}function kt(i,o){}function Et(i,o){1&i&&e.DNE(0,kt,0,0,"ng-template")}function wt(i,o){if(1&i&&(e.j41(0,"span",12),e.DNE(1,Et,1,0,null,6),e.k0s()),2&i){const t=e.XpG(4);e.BMQ("data-pc-section","nodeTogglerIcon"),e.R7$(),e.Y8G("ngTemplateOutlet",t.chart.togglerIconTemplate)("ngTemplateOutletContext",e.eq3(3,_e,t.node.expanded))}}function Dt(i,o){if(1&i){const t=e.RV6();e.j41(0,"a",8),e.bIt("click",function(n){e.eBV(t);const a=e.XpG(3);return e.Njj(a.toggleNode(n,a.node))})("keydown.enter",function(n){e.eBV(t);const a=e.XpG(3);return e.Njj(a.toggleNode(n,a.node))})("keydown.space",function(n){e.eBV(t);const a=e.XpG(3);return e.Njj(a.toggleNode(n,a.node))}),e.DNE(1,Tt,3,2,"ng-container",0)(2,wt,2,5,"span",9),e.k0s()}if(2&i){const t=e.XpG(3);e.BMQ("data-pc-section","nodeToggler"),e.R7$(),e.Y8G("ngIf",!t.chart.togglerIconTemplate),e.R7$(),e.Y8G("ngIf",t.chart.togglerIconTemplate)}}function Ft(i,o){if(1&i&&(e.qex(0),e.DNE(1,Dt,3,3,"a",7),e.bVm()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",!t.leaf)}}function Nt(i,o){if(1&i&&(e.qex(0),e.j41(1,"td"),e.nrm(2,"div",3),e.k0s(),e.bVm()),2&i){const t=e.XpG(2);e.R7$(),e.BMQ("data-pc-section","lineCell")("colspan",t.colspan),e.R7$(),e.BMQ("data-pc-section","lineDown")}}function Mt(i,o){if(1&i&&(e.j41(0,"td",14),e.EFF(1,"\xa0"),e.k0s(),e.j41(2,"td",15),e.EFF(3,"\xa0"),e.k0s()),2&i){const s=o.last;e.Y8G("ngClass",e.eq3(4,he,!o.first)),e.BMQ("data-pc-section","lineLeft"),e.R7$(2),e.Y8G("ngClass",e.eq3(6,he,!s)),e.BMQ("data-pc-section","lineRight")}}function Gt(i,o){if(1&i&&(e.qex(0),e.DNE(1,Mt,4,8,"ng-template",13),e.bVm()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("ngForOf",t.node.children)}}function At(i,o){if(1&i&&(e.j41(0,"td",16),e.nrm(1,"table",17),e.k0s()),2&i){const t=o.$implicit,s=e.XpG(2);e.BMQ("data-pc-section","nodeCell"),e.R7$(),e.Y8G("node",t)("collapsible",s.collapsible&&s.node.children&&s.node.children.length>0)}}function qt(i,o){if(1&i){const t=e.RV6();e.j41(0,"tbody")(1,"tr")(2,"td")(3,"div",1),e.bIt("click",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.onNodeClick(n,a.node))}),e.DNE(4,St,2,1,"div",0)(5,It,2,4,"div",0)(6,Ft,2,1,"ng-container",0),e.k0s()()(),e.j41(7,"tr",2)(8,"td"),e.nrm(9,"div",3),e.k0s()(),e.j41(10,"tr",2),e.DNE(11,Nt,3,3,"ng-container",0)(12,Gt,2,1,"ng-container",0),e.k0s(),e.j41(13,"tr",4),e.DNE(14,At,2,3,"td",5),e.k0s()()}if(2&i){const t=e.XpG();e.BMQ("data-pc-section","body"),e.R7$(),e.BMQ("data-pc-section","row"),e.R7$(),e.BMQ("colspan",t.colspan)("data-pc-section","cell"),e.R7$(),e.HbH(t.node.styleClass),e.Y8G("ngClass",e.l_i(26,xt,t.chart.selectionMode&&!1!==t.node.selectable,t.isSelected())),e.BMQ("data-pc-section","node"),e.R7$(),e.Y8G("ngIf",!t.chart.getTemplateForNode(t.node)),e.R7$(),e.Y8G("ngIf",t.chart.getTemplateForNode(t.node)),e.R7$(),e.Y8G("ngIf",t.collapsible),e.R7$(),e.Y8G("ngClass",!t.leaf&&t.node.expanded?"p-organizationchart-node-visible":"p-organizationchart-node-hidden")("@childState","in"),e.BMQ("data-pc-section","lines"),e.R7$(),e.BMQ("data-pc-section","lineCell")("colspan",t.colspan),e.R7$(),e.BMQ("data-pc-section","lineDown"),e.R7$(),e.Y8G("ngClass",!t.leaf&&t.node.expanded?"p-organizationchart-node-visible":"p-organizationchart-node-hidden")("@childState","in"),e.BMQ("data-pc-section","lines"),e.R7$(),e.Y8G("ngIf",t.node.children&&1===t.node.children.length),e.R7$(),e.Y8G("ngIf",t.node.children&&t.node.children.length>1),e.R7$(),e.Y8G("ngClass",!t.leaf&&t.node.expanded?"p-organizationchart-node-visible":"p-organizationchart-node-hidden")("@childState","in"),e.BMQ("data-pc-section","nodes"),e.R7$(),e.Y8G("ngForOf",t.node.children)}}const Lt=i=>({"p-organizationchart p-component":!0,"p-organizationchart-preservespace":i});function Pt(i,o){if(1&i&&e.nrm(0,"table",2),2&i){const t=e.XpG();e.Y8G("collapsible",t.collapsible)("node",t.root)}}let Vt=(()=>{class i{cd;node;root;first;last;collapsible;chart;subscription;constructor(t,s){this.cd=s,this.chart=t,this.subscription=this.chart.selectionSource$.subscribe(()=>{this.cd.markForCheck()})}get leaf(){if(this.node)return 0!=this.node.leaf&&!(this.node.children&&this.node.children.length)}get colspan(){if(this.node)return this.node.children&&this.node.children.length?2*this.node.children.length:null}onNodeClick(t,s){this.chart.onNodeClick(t,s)}toggleNode(t,s){s.expanded=!s.expanded,s.expanded?this.chart.onNodeExpand.emit({originalEvent:t,node:this.node}):this.chart.onNodeCollapse.emit({originalEvent:t,node:this.node}),t.preventDefault()}isSelected(){return this.chart.isSelected(this.node)}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(s){return new(s||i)(e.rXU((0,e.Rfq)(()=>fe)),e.rXU(e.gRc))};static \u0275cmp=e.VBU({type:i,selectors:[["","pOrganizationChartNode",""]],hostAttrs:[1,"p-element"],inputs:{node:"node",root:[2,"root","root",e.L39],first:[2,"first","first",e.L39],last:[2,"last","last",e.L39],collapsible:[2,"collapsible","collapsible",e.L39]},features:[e.GFd],attrs:Ct,decls:1,vars:1,consts:[[4,"ngIf"],[3,"click","ngClass"],[1,"p-organizationchart-lines",3,"ngClass"],[1,"p-organizationchart-line-down"],[1,"p-organizationchart-nodes",3,"ngClass"],["colspan","2",4,"ngFor","ngForOf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["tabindex","0","class","p-node-toggler",3,"click","keydown.enter","keydown.space",4,"ngIf"],["tabindex","0",1,"p-node-toggler",3,"click","keydown.enter","keydown.space"],["class","p-node-toggler-icon",4,"ngIf"],[3,"styleClass",4,"ngIf"],[3,"styleClass"],[1,"p-node-toggler-icon"],["ngFor","",3,"ngForOf"],[1,"p-organizationchart-line-left",3,"ngClass"],[1,"p-organizationchart-line-right",3,"ngClass"],["colspan","2"],["pOrganizationChartNode","",1,"p-organizationchart-table",3,"node","collapsible"]],template:function(s,n){1&s&&e.DNE(0,qt,15,29,"tbody",0),2&s&&e.Y8G("ngIf",n.node)},dependencies:()=>[g.YU,g.Sq,g.bT,g.T3,me.D,ge.M,i],styles:["@layer primeng{.p-organizationchart-table{border-spacing:0;border-collapse:separate;margin:0 auto}.p-organizationchart-table>tbody>tr>td{text-align:center;vertical-align:top;padding:0 .75rem}.p-organizationchart-node-content{display:inline-block;position:relative}.p-organizationchart-node-content .p-node-toggler{position:absolute;bottom:-.75rem;margin-left:-.75rem;z-index:2;left:50%;-webkit-user-select:none;user-select:none;cursor:pointer;width:1.5rem;height:1.5rem}.p-organizationchart-node-content .p-node-toggler .p-node-toggler-icon{position:relative;top:.25rem}.p-organizationchart-line-down{margin:0 auto;height:20px;width:1px}.p-organizationchart-line-right,.p-organizationchart-line-left{border-radius:0}.p-organizationchart-selectable-node{cursor:pointer}.p-organizationchart .p-organizationchart-node-hidden{display:none}.p-organizationchart-preservespace .p-organizationchart-node-hidden{visibility:hidden;display:inherit}}\n"],encapsulation:2,data:{animation:[(0,E.hZ)("childState",[(0,E.wk)("in",(0,E.iF)({opacity:1})),(0,E.kY)("void => *",[(0,E.iF)({opacity:0}),(0,E.i0)(150)]),(0,E.kY)("* => void",[(0,E.i0)(150,(0,E.iF)({opacity:0}))])])]}})}return i})(),fe=(()=>{class i{el;cd;value;style;styleClass;selectionMode;collapsible;preserveSpace=!0;get selection(){return this._selection}set selection(t){this._selection=t,this.initialized&&this.selectionSource.next(null)}selectionChange=new e.bkB;onNodeSelect=new e.bkB;onNodeUnselect=new e.bkB;onNodeExpand=new e.bkB;onNodeCollapse=new e.bkB;templates;templateMap;togglerIconTemplate;selectionSource=new ue.B;_selection;initialized;selectionSource$=this.selectionSource.asObservable();constructor(t,s){this.el=t,this.cd=s}get root(){return this.value&&this.value.length?this.value[0]:null}ngAfterContentInit(){this.templates.length&&(this.templateMap={}),this.templates.forEach(t=>{"togglericon"===t.getType()?this.togglerIconTemplate=t.template:this.templateMap[t.getType()]=t.template}),this.initialized=!0}getTemplateForNode(t){return this.templateMap?t.type?this.templateMap[t.type]:this.templateMap.default:null}onNodeClick(t,s){let n=t.target;if((!n.className||!ce.D.hasClass(n,"p-node-toggler")&&!ce.D.hasClass(n,"p-node-toggler-icon"))&&this.selectionMode){if(!1===s.selectable)return;let a=this.findIndexInSelection(s),r=a>=0;"single"===this.selectionMode?r?(this.selection=null,this.onNodeUnselect.emit({originalEvent:t,node:s})):(this.selection=s,this.onNodeSelect.emit({originalEvent:t,node:s})):"multiple"===this.selectionMode&&(r?(this.selection=this.selection.filter((p,S)=>S!=a),this.onNodeUnselect.emit({originalEvent:t,node:s})):(this.selection=[...this.selection||[],s],this.onNodeSelect.emit({originalEvent:t,node:s}))),this.selectionChange.emit(this.selection),this.selectionSource.next(null)}}findIndexInSelection(t){let s=-1;if(this.selectionMode&&this.selection)if("single"===this.selectionMode)s=this.selection==t?0:-1;else if("multiple"===this.selectionMode)for(let n=0;n<this.selection.length;n++)if(this.selection[n]==t){s=n;break}return s}isSelected(t){return-1!=this.findIndexInSelection(t)}static \u0275fac=function(s){return new(s||i)(e.rXU(e.aKT),e.rXU(e.gRc))};static \u0275cmp=e.VBU({type:i,selectors:[["p-organizationChart"]],contentQueries:function(s,n,a){if(1&s&&e.wni(a,F.Ei,4),2&s){let r;e.mGM(r=e.lsd())&&(n.templates=r)}},hostAttrs:[1,"p-element"],inputs:{value:"value",style:"style",styleClass:"styleClass",selectionMode:"selectionMode",collapsible:[2,"collapsible","collapsible",e.L39],preserveSpace:[2,"preserveSpace","preserveSpace",e.L39],selection:"selection"},outputs:{selectionChange:"selectionChange",onNodeSelect:"onNodeSelect",onNodeUnselect:"onNodeUnselect",onNodeExpand:"onNodeExpand",onNodeCollapse:"onNodeCollapse"},features:[e.GFd],decls:2,vars:8,consts:[[3,"ngStyle","ngClass"],["class","p-organizationchart-table","pOrganizationChartNode","",3,"collapsible","node",4,"ngIf"],["pOrganizationChartNode","",1,"p-organizationchart-table",3,"collapsible","node"]],template:function(s,n){1&s&&(e.j41(0,"div",0),e.DNE(1,Pt,1,2,"table",1),e.k0s()),2&s&&(e.HbH(n.styleClass),e.Y8G("ngStyle",n.style)("ngClass",e.eq3(6,Lt,n.preserveSpace)),e.BMQ("data-pc-section","root"),e.R7$(),e.Y8G("ngIf",n.root))},dependencies:[g.YU,g.bT,g.B3,Vt],encapsulation:2})}return i})(),$t=(()=>{class i{static \u0275fac=function(s){return new(s||i)};static \u0275mod=e.$C({type:i});static \u0275inj=e.G2t({imports:[g.MD,me.D,ge.M,F.Gg,F.Gg]})}return i})();const Bt=()=>[],Xt=()=>["service.edit"],ve=()=>["service.delete"],Ot=i=>({"text-primary fs-5 fw-bold":i}),Ut=()=>["service.register"];function Yt(i,o){if(1&i){const t=e.RV6();e.j41(0,"a",43),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,a=e.XpG(),r=e.sdS(26);return e.Njj(a.EditModel(n,r))}),e.nrm(1,"i",44)(2,"span",45),e.k0s()}}function zt(i,o){if(1&i){const t=e.RV6();e.j41(0,"a",43),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,a=e.XpG(),r=e.sdS(30);return e.Njj(a.openModal(n.id,r))}),e.nrm(1,"i",46)(2,"span",47),e.k0s()}}function Ht(i,o){if(1&i){const t=e.RV6();e.j41(0,"div",32)(1,"span",33),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),r=e.sdS(26);return e.Njj(a.openAddModal(n,r,"md"))}),e.nrm(2,"i",34),e.k0s(),e.j41(3,"span",35)(4,"div",36)(5,"button",37),e.nrm(6,"i",38),e.k0s(),e.j41(7,"div",39),e.DNE(8,Yt,3,0,"a",40)(9,zt,3,0,"a",40),e.k0s()()(),e.nrm(10,"img",41),e.j41(11,"div",42),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.cityChange(n))}),e.EFF(12),e.k0s()()}if(2&i){const t=o.$implicit,s=e.XpG();e.R7$(8),e.Y8G("hasPermission",e.lJ4(4,Xt)),e.R7$(),e.Y8G("hasPermission",e.lJ4(5,ve)),e.R7$(2),e.Y8G("ngClass",e.eq3(6,Ot,t.id==s.departmentIdSelected)),e.R7$(),e.SpI(" ",t.data.name," ")}}function Qt(i,o){if(1&i&&(e.j41(0,"tr",48)(1,"th",49),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",50),e.nrm(4,"i",51),e.EFF(5," general.table.id "),e.k0s(),e.j41(6,"th",52),e.nrm(7,"i",51),e.EFF(8," general.table.name "),e.k0s(),e.j41(9,"th",53),e.nrm(10,"i",51),e.EFF(11," hr.departments.departmentName "),e.k0s(),e.j41(12,"th",54),e.nrm(13,"i",51),e.EFF(14," hr.positions.isHead "),e.k0s(),e.nrm(15,"th",55),e.k0s()),2&i){const t=e.XpG();e.R7$(6),e.FS9("pSortableColumn","en"===t.lang?"nameEn":"nameAr")}}function Jt(i,o){1&i&&e.nrm(0,"span",61)}function Kt(i,o){1&i&&e.nrm(0,"span",62)}function Wt(i,o){if(1&i&&(e.nrm(0,"i",63),e.EFF(1),e.nI1(2,"date"),e.nrm(3,"br")(4,"i",64),e.EFF(5),e.nI1(6,"date"),e.nrm(7,"br")(8,"i",65),e.EFF(9)),2&i){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.i5U(2,3,t.createdDate,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",e.i5U(6,6,t.updatedDate,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",t.creatorName," ")}}function Zt(i,o){if(1&i){const t=e.RV6();e.j41(0,"button",66),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,a=e.XpG(),r=e.sdS(28);return e.Njj(a.EditModel(n,r))}),e.nrm(1,"i",67),e.k0s()}}function en(i,o){if(1&i){const t=e.RV6();e.j41(0,"button",68),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,a=e.XpG(),r=e.sdS(32);return e.Njj(a.openModal(n.id,r))}),e.nrm(1,"i",46),e.k0s()}}function tn(i,o){if(1&i&&(e.j41(0,"tr",56)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.DNE(10,Jt,1,0,"span",57)(11,Kt,1,0,"span",58),e.k0s(),e.j41(12,"td"),e.DNE(13,Wt,10,9,"ng-template",null,5,e.C5r)(15,Zt,2,0,"button",59)(16,en,2,0,"button",60),e.k0s()()),2&i){const t=o.$implicit,s=o.rowIndex,n=e.XpG();e.R7$(2),e.JRh(s+1),e.R7$(2),e.JRh(t.id),e.R7$(2),e.JRh("en"===n.lang?t.positionNameEn:t.positionNameAr),e.R7$(2),e.JRh("en"===n.lang?t.departmentNameEn:t.departmentNameAr),e.R7$(2),e.Y8G("ngIf",t.isHead),e.R7$(),e.Y8G("ngIf",!t.isHead),e.R7$(4),e.Y8G("hasPermission",e.lJ4(8,Ut)),e.R7$(),e.Y8G("hasPermission",e.lJ4(9,ve))}}function nn(i,o){1&i&&(e.j41(0,"div",69),e.EFF(1," general.table.noData "),e.k0s())}function sn(i,o){if(1&i){const t=e.RV6();e.j41(0,"div",70)(1,"div",71),e.nrm(2,"ngb-pagination-info",72),e.j41(3,"table-length",73),e.bIt("lengthChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.ListItemChangeService(n))}),e.k0s()(),e.j41(4,"div",74)(5,"ngb-pagination",75),e.bIt("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.pageChangedService(n))}),e.mxI("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.servicePagination.pageNumber,n)||(a.servicePagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&i){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.servicePagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.servicePagination.pageSize)("collectionSize",t.servicePagination.totalItems),e.R50("page",t.servicePagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function an(i,o){1&i&&(e.j41(0,"span",97),e.EFF(1,"general.action.register "),e.k0s())}function on(i,o){1&i&&(e.j41(0,"span",97),e.EFF(1,"general.action.edit "),e.k0s())}function rn(i,o){1&i&&(e.j41(0,"div",98),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function ln(i,o){1&i&&(e.j41(0,"div",98),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function pn(i,o){if(1&i){const t=e.RV6();e.j41(0,"div",76)(1,"h4",77),e.DNE(2,an,2,0,"span",78)(3,on,2,0,"span",78),e.nrm(4,"span",79),e.k0s(),e.j41(5,"button",80),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(6,"form",81,6),e.bIt("ngSubmit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.OnSubmit())}),e.nrm(8,"ngx-ui-loader",82),e.j41(9,"div",83)(10,"div",84)(11,"div",85)(12,"div",86)(13,"div",87)(14,"label",88),e.EFF(15,"hr.departments.nameEn"),e.k0s(),e.j41(16,"div",89)(17,"input",90,7),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.nameEn,n)||(a.form.nameEn=n),e.Njj(n)}),e.k0s()(),e.DNE(19,rn,2,0,"div",91),e.k0s(),e.j41(20,"div",87)(21,"label",92),e.EFF(22,"hr.departments.nameAr"),e.k0s(),e.j41(23,"div",89)(24,"input",93,8),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.nameAr,n)||(a.form.nameAr=n),e.Njj(n)}),e.k0s()(),e.DNE(26,ln,2,0,"div",91),e.k0s()(),e.j41(27,"div",94),e.nrm(28,"button",95),e.j41(29,"button",96),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()()()()()()}if(2&i){const t=e.sdS(7),s=e.sdS(18),n=e.sdS(25),a=e.XpG();e.R7$(2),e.Y8G("ngIf",!a.isEditForm),e.R7$(),e.Y8G("ngIf",a.isEditForm),e.R7$(5),e.Y8G("hasProgressBar",!1)("fgsType",a.loaderOperationShap)("loaderId",a.operationLoader),e.R7$(9),e.R50("ngModel",a.form.nameEn),e.R7$(2),e.Y8G("ngIf",s.invalid&&s.touched),e.R7$(5),e.R50("ngModel",a.form.nameAr),e.R7$(2),e.Y8G("ngIf",n.invalid&&n.touched),e.R7$(2),e.Y8G("disabled",!t.valid)}}function dn(i,o){1&i&&(e.j41(0,"span",97),e.EFF(1,"general.action.register "),e.k0s())}function cn(i,o){1&i&&(e.j41(0,"span",97),e.EFF(1,"general.action.edit "),e.k0s())}function mn(i,o){1&i&&(e.j41(0,"div",98),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function gn(i,o){1&i&&(e.j41(0,"div",98),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function un(i,o){if(1&i){const t=e.RV6();e.j41(0,"div",76)(1,"h4",77),e.DNE(2,dn,2,0,"span",78)(3,cn,2,0,"span",78),e.nrm(4,"span",99),e.k0s(),e.j41(5,"button",80),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(6,"form",81,6),e.bIt("ngSubmit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.OnSubmitPos())}),e.nrm(8,"ngx-ui-loader",82),e.j41(9,"div",83)(10,"div",84)(11,"div",85)(12,"div",86)(13,"div",100)(14,"label",101),e.EFF(15,"hr.departments.title"),e.k0s(),e.j41(16,"ng-select",102,9),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.departmentId,n)||(a.form.departmentId=n),e.Njj(n)}),e.k0s(),e.DNE(18,mn,2,0,"div",91),e.k0s(),e.j41(19,"div",100)(20,"label",101),e.EFF(21,"hr.positionName.title"),e.k0s(),e.j41(22,"ng-select",103,10),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.positionNameId,n)||(a.form.positionNameId=n),e.Njj(n)}),e.k0s(),e.DNE(24,gn,2,0,"div",91),e.k0s(),e.j41(25,"div",104)(26,"label",105),e.EFF(27,"hr.positions.isHead"),e.k0s(),e.j41(28,"p-inputSwitch",106),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.isHead,n)||(a.form.isHead=n),e.Njj(n)}),e.k0s()()(),e.j41(29,"div",94),e.nrm(30,"button",95),e.j41(31,"button",96),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()()()()()()}if(2&i){const t=e.sdS(7),s=e.sdS(17),n=e.sdS(23),a=e.XpG();e.R7$(2),e.Y8G("ngIf",!a.isEditForm),e.R7$(),e.Y8G("ngIf",a.isEditForm),e.R7$(5),e.Y8G("hasProgressBar",!1)("fgsType",a.loaderOperationShap)("loaderId",a.operationLoader),e.R7$(8),e.FS9("bindLabel","en"==a.lang?"nameEn":"nameAr"),e.Y8G("items",a.departmentsDrop)("multiple",!1),e.R50("ngModel",a.form.departmentId),e.R7$(2),e.Y8G("ngIf",s.invalid&&s.touched),e.R7$(4),e.FS9("bindLabel","en"==a.lang?"nameEn":"nameAr"),e.Y8G("items",a.positionNames)("multiple",!1),e.R50("ngModel",a.form.positionNameId),e.R7$(2),e.Y8G("ngIf",n.invalid&&n.touched),e.R7$(4),e.R50("ngModel",a.form.isHead),e.R7$(2),e.Y8G("disabled",!t.valid)}}function _n(i,o){if(1&i){const t=e.RV6();e.j41(0,"delete-modal",107),e.bIt("deleteConfirm",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.DeleteConfirm())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}}function hn(i,o){if(1&i){const t=e.RV6();e.j41(0,"delete-modal",107),e.bIt("deleteConfirm",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.DeleteConfirmPos())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}}let fn=(()=>{class i extends q.w{constructor(t,s,n,a,r,p,S,w,j,T,J,k,M,K){super(t,s,T,n,S,w,j),this.baseService=n,this.positionService=a,this.positionNameService=r,this.employeesService=p,this.excelService=k,this.router=M,this._formDataService=K,this.title="hr.departments.title",this.titleOperation="hr.departments.titleOperation",this.titleServices="hr.positions.title",this.titleService="hr.positions.title",this.entities=[],this.searchForm={},this.isResolveList=!0,this.image={isApi:!1,path:""},this.form={image:""},this.serverPath=D.c.mediaUrl,this.services=[],this.pagination={pageNumber:1,pageSize:100},this.servicePagination={pageNumber:1,pageSize:10},this.departmentIdSelected=0,this.departmentNameSelected="",this.servicesType=[],this.departmentsDrop=[],this.employeesDrop=[],this.positionNames=[],this.isShowMenu=!1,this.countLoad=1,this.configRoute(),this.GetDepartmentsDropdown(),this.GetPositionNamesDropdown(),this.GetEmployeesDropdown()}GetDepartmentsDropdown(){this.baseService.getDropDown().pipe((0,c.Q)(this.notifier)).subscribe(t=>{t?this.departmentsDrop=t.data:this.alertService.error("general.message."+t)},t=>{this.alertService.error()})}GetPositionNamesDropdown(){this.positionNameService.getDropDown().pipe((0,c.Q)(this.notifier)).subscribe(t=>{t?this.positionNames=t.data:this.alertService.error("general.message."+t)},t=>{this.alertService.error()})}GetEmployeesDropdown(){this.employeesService.getDropDown().pipe((0,c.Q)(this.notifier)).subscribe(t=>{t?this.employeesDrop=t.data:this.alertService.error("general.message."+t)},t=>{this.alertService.error()})}tableChange(t){this.servicePagination.filterType=t.sortField,this.servicePagination.sortType=1==t.sortOrder?"asc":"desc",this.loadentitiesservices()}ngOnInitMore(){}mapForm(t){let s={...t};return s.id=s.serviceCategoryCode,s}mapRegisterForm(t){let s={...t};return s.serviceCategoryCode=0,s}OnSearch(t){this.ngxLoader.startLoader(u.a7),this.loadentities()}loadentities(){this.countLoad=this.countLoad+1,(!this.isResolveList||1!==this.countLoad)&&(this.baseService.get(this.pagination).pipe((0,c.Q)(this.notifier)).subscribe(t=>{this.ngxLoader.stopLoader(u.a7),this.entities=[t.data],this.pagination.totalItems=t.totalItems,this.LoadSuccess()},t=>{this.ngxLoader.stopLoader(u.a7),this.alertService.error(t)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[])}configRoute(){this.routerActive.data.pipe((0,c.Q)(this.notifier)).subscribe(t=>{this.entities=[t.data.data],this.pagination.totalItems=t.data.totalItems},()=>{this.alertService.error()})}openAddModal(t,s,n="md"){this.isEditForm=!1,this.form={},this.form.parentDepartmentId=t.id,this.modalService.open(s,{centered:!0,size:n})}EditModel(t,s,n="md"){this.isEditForm=!0,this.image={isApi:!0,path:t.imageUrl},this.positionService.getById(t.id).pipe((0,c.Q)(this.notifier)).subscribe(a=>{a.success?this.form=a.data:this.alertService.error("general.message."+a.message),this.modalService.open(s,{centered:!0,size:n})},a=>{this.alertService.error()})}loadentitiesservices(){this.ngxLoader.startLoader(u.a7),this.servicePagination.departmentId=this.departmentIdSelected?this.departmentIdSelected:null,this.positionService.get(this.servicePagination).pipe((0,c.Q)(this.notifier)).subscribe(t=>{this.services=t.data,this.servicePagination.totalItems=t.totalItems,this.LoadSuccess(),this.ngxLoader.stopLoader(u.a7)},t=>{this.ngxLoader.stopLoader(u.a7),this.alertService.error(t)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[]}goRegister(){this.router.navigateByUrl("/basicData/services/add")}goEdit(t){this.router.navigateByUrl("/basicData/services/edit",{state:{id:t}})}cityChange(t){this.departmentIdSelected=t.id,this.departmentNameSelected="en"==this.lang?t.nameEn:t.nameAr,this.loadentitiesservices()}pageChangedService(t){this.servicePagination.pageNumber=t,this.loadentitiesservices()}ListItemChangeService(t){this.servicePagination.pageSize=t.target.value,this.loadentitiesservices()}onMenuShow(){this.isShowMenu=!this.isShowMenu}onWrapperClick(){this.isShowMenu&&(this.isShowMenu=!1)}registerEntity(){this.baseService.register(this.form).pipe((0,v.O)(),(0,x.c)(this.mainDelay),(0,b.Z)(),(0,c.Q)(this.notifier),(0,h.j)(()=>this.ngxLoader.stopLoader(this.operationLoader)),(0,le.W)(t=>(0,pe.$)(t))).subscribe(t=>{t.success?(this.GetDepartmentsDropdown(),this.GetEmployeesDropdown(),this.submitFunished(),this.loadentities()):this.alertService.error("general.message."+t.message)},t=>{this.alertService.error("general.message."+t)})}editEntity(){this.baseService.edit(this.form.id,this.form).pipe((0,v.O)(),(0,x.c)(this.mainDelay),(0,b.Z)(),(0,c.Q)(this.notifier),(0,h.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(t=>{t.success?(this.GetDepartmentsDropdown(),this.GetEmployeesDropdown(),this.submitFunished(),this.loadentities()):this.alertService.error("general.message."+t.message)},t=>{this.alertService.error("general.message."+t)})}OnSubmitPos(){this.ngxLoader.startLoader(this.operationLoader),!0===this.isEditForm?this.editPosEntity():this.registerPosEntity()}registerPosEntity(){this.positionService.register(this.form).pipe((0,v.O)(),(0,x.c)(this.mainDelay),(0,b.Z)(),(0,c.Q)(this.notifier),(0,h.j)(()=>this.ngxLoader.stopLoader(this.operationLoader)),(0,le.W)(t=>(0,pe.$)(t))).subscribe(t=>{t.success?(this.GetDepartmentsDropdown(),this.GetEmployeesDropdown(),this.submitFunished(),this.loadentitiesservices()):this.alertService.error("general.message."+t.message)},t=>{this.alertService.error("general.message."+t)})}editPosEntity(){this.positionService.edit(this.form.id,this.form).pipe((0,v.O)(),(0,x.c)(this.mainDelay),(0,b.Z)(),(0,c.Q)(this.notifier),(0,h.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(t=>{t.success?(this.GetDepartmentsDropdown(),this.GetEmployeesDropdown(),this.submitFunished(),this.loadentitiesservices()):this.alertService.error("general.message."+t.message)},t=>{this.alertService.error("general.message."+t)})}DeleteConfirm(){console.log(this.selectedRow),this.ngxLoader.startLoader(this.deleteLoader);let t=this.selectedRow.map(s=>s.id);this.baseService.delete(t).pipe((0,v.O)(),(0,x.c)(this.mainDelay),(0,b.Z)(),(0,c.Q)(this.notifier),(0,h.j)(()=>this.ngxLoader.stopLoader(this.deleteLoader))).subscribe(s=>{s.success?(this.loadentities(),this.GetDepartmentsDropdown(),this.GetEmployeesDropdown(),this.alertService.success(),this.modalService.dismissAll(),this.resetSelected()):this.alertService.error("general.message."+s)},()=>{this.alertService.error()})}DeleteConfirmPos(){console.log(this.selectedRow),this.ngxLoader.startLoader(this.deleteLoader);let t=this.selectedRow.map(s=>s.id);this.positionService.delete(t).pipe((0,v.O)(),(0,x.c)(this.mainDelay),(0,b.Z)(),(0,c.Q)(this.notifier),(0,h.j)(()=>this.ngxLoader.stopLoader(this.deleteLoader))).subscribe(s=>{s.success?(this.GetDepartmentsDropdown(),this.GetEmployeesDropdown(),this.alertService.success(),this.loadentitiesservices(),this.modalService.dismissAll(),this.resetSelected()):this.alertService.error("general.message."+s)},()=>{this.alertService.error()})}static{this.\u0275fac=function(s){return new(s||i)(e.rXU(C.nX),e.rXU(_.c$),e.rXU(te),e.rXU(re.c),e.rXU(ft.N),e.rXU(de.O),e.rXU(R.u),e.rXU(g.vh),e.rXU(f.eD),e.rXU(m.Bq),e.rXU(e.gRc),e.rXU(L.V),e.rXU(C.Ix),e.rXU(vt.Q))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-departments-positions"]],features:[e.Vt3],decls:33,vars:22,consts:[["tableMaster",""],["AddModal",""],["AddPosModal",""],["deleteModal",""],["deleteModalPos",""],["tooltipContent",""],["formEntity","ngForm"],["nameEn","ngModel"],["nameAr","ngModel"],["departmentId","ngModel"],["positionNameId","ngModel"],[3,"title","breadcrumbItems"],[1,"card"],[1,"card-body"],[3,"value","collapsible"],["pTemplate","person"],[1,"card","grid"],[3,"addNew","showExport","totalItems","title","showSearch","newLocal"],["menuBtn",""],["type","button",1,"d-inline","d-lg-none","btn","btn-soft-success","btn-icon","btn-sm","fs-16","email-menu-btn",3,"click"],[1,"ri-menu-2-fill","align-bottom"],["control",""],[1,"col-12","col-md-6","mb-2"],[1,"search-box"],["type","search","id","filterValue","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,"p-2","text-center","position-relative"],["placement","top","ngbTooltip","Add Child Department",1,"btn","btn-primary","position-absolute",2,"inset-inline-end","-15px","top","-15px","padding","4px 8px",3,"click"],[1,"ri-add-fill"],[1,"position-absolute",2,"inset-inline-start","-15px","top","-15px"],["ngbDropdown","",1,"dropdown"],["type","button","data-bs-toggle","dropdown","aria-haspopup","true","aria-expanded","false","ngbDropdownToggle","",1,"dropdown-toggle","btn","btn-ghost-primary","btn-icon","btn-sm","fs-16","arrow-none","d-block"],[1,"ri-more-2-fill","align-bottom"],["ngbDropdownMenu","",1,"dropdown-menu","dropdown-menu-end"],["class","dropdown-item","href","javascript:void(0)",3,"click",4,"hasPermission"],["width","100","src","assets/images/departments.png",1,"mb-3","w-3rem","h-3rem"],[1,"font-bold","cursor-pointer",3,"click","ngClass"],["href","javascript:void(0)",1,"dropdown-item",3,"click"],[1,"ri-pencil-fill","align-bottom"],["translate","general.action.edit"],[1,"ri-delete-bin-5-fill","align-bottom"],["translate","general.action.delete"],[1,""],["translate","",2,"width",".5%"],["translate","",2,"width","5%"],[1,"ri-expand-up-down-line"],["translate","",2,"width","20%",3,"pSortableColumn"],["pSortableColumn","departmentId","translate","",2,"width","10%"],["pSortableColumn","isHead","translate","",2,"width","8%"],["translate","",2,"width","10%"],[1,"fs-5"],["class","badge bg-success-subtle text-success p-2","translate","hr.positions.head",4,"ngIf"],["class","badge bg-danger-subtle text-danger p-2","translate","hr.positions.notHead",4,"ngIf"],["class","btn btn-sm btn-soft-info edit-list mx-2",3,"click",4,"hasPermission"],["class","btn btn-sm btn-soft-danger remove-list",3,"click",4,"hasPermission"],["translate","hr.positions.head",1,"badge","bg-success-subtle","text-success","p-2"],["translate","hr.positions.notHead",1,"badge","bg-danger-subtle","text-danger","p-2"],[1,"ri-history-fill","text-warning"],[1,"ri-history-fill","text-danger"],[1,"ri-user-location-fill","text-primary"],[1,"btn","btn-sm","btn-soft-info","edit-list","mx-2",3,"click"],[1,"ri-pencil-fill","align-bottom","mx-1"],[1,"btn","btn-sm","btn-soft-danger","remove-list",3,"click"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["class","fw-bold fs-4","translate","",4,"ngIf"],["translate","hr.departments.title",1,"fw-bold","fs-4"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[3,"ngSubmit"],[3,"hasProgressBar","fgsType","loaderId"],[1,"modal-content"],[1,"modal-body"],[1,"mx-2"],[1,"row"],[1,"col-12","col-md-12","mb-3"],["for","nameEn","translate","",1,"fw-bold","form-label","required"],[1,"input-group"],["InputTirmFilter","","name","nameEn","type","text","required","","id","nameEn",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],["for","nameAr","translate","",1,"fw-bold","form-label","required"],["InputTirmFilter","","name","nameAr","type","text","required","","id","nameAr",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,"d-flex","gap-2","justify-content-end","mt-4","mb-2"],["type","submit","id","save","translate","general.action.save",1,"btn","w-sm","btn-danger",3,"disabled"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light",3,"click"],["translate","",1,"fw-bold","fs-4"],["translate","",1,"text-danger","text-center"],["translate","hr.positions.title",1,"fw-bold","fs-4"],[1,"col-md-12","col-12","mb-3"],["translate","",1,"required","fw-bold","form-label","w-100"],["name","departmentId","bindValue","id","required","",3,"ngModelChange","items","multiple","bindLabel","ngModel"],["name","positionNameId","bindValue","id","required","",3,"ngModelChange","items","multiple","bindLabel","ngModel"],[1,"col-12","col-md-12","mb-3","form-check"],["for","isHead","translate","",1,"fw-bold","form-label","w-100"],["name","isHead","inputId","isHead",3,"ngModelChange","ngModel"],[3,"deleteConfirm","dismiss"]],template:function(s,n){if(1&s){const a=e.RV6();e.nrm(0,"app-breadcrumbs",11),e.nI1(1,"translate"),e.j41(2,"div",12)(3,"div",13)(4,"p-organizationChart",14),e.DNE(5,Ht,13,8,"ng-template",15),e.k0s()()(),e.j41(6,"div",16)(7,"base-filter",17),e.bIt("addNew",function(){e.eBV(a);const p=e.sdS(28);return e.Njj(n.openModalTitle(p,"md"))}),e.qex(8,18),e.j41(9,"button",19),e.bIt("click",function(){return e.eBV(a),e.Njj(n.onMenuShow())}),e.nrm(10,"i",20),e.k0s(),e.bVm(),e.qex(11,21),e.j41(12,"div",22)(13,"div",23)(14,"input",24),e.nI1(15,"translate"),e.mxI("ngModelChange",function(p){return e.eBV(a),e.DH7(n.servicePagination.filterValue,p)||(n.servicePagination.filterValue=p),e.Njj(p)}),e.k0s(),e.nrm(16,"i",25),e.k0s()(),e.bVm(),e.k0s(),e.j41(17,"div",13)(18,"div",26)(19,"p-table",27,0),e.bIt("onLazyLoad",function(p){return e.eBV(a),e.Njj(n.tableChange(p))})("selectionChange",function(p){return e.eBV(a),e.Njj(n.onSelectionChange(p))}),e.DNE(21,Qt,16,1,"ng-template",28)(22,tn,17,10,"ng-template",29),e.k0s()(),e.DNE(23,nn,2,0,"div",30)(24,sn,6,8,"div",31),e.k0s()(),e.DNE(25,pn,30,10,"ng-template",null,1,e.C5r)(27,un,32,17,"ng-template",null,2,e.C5r)(29,_n,1,0,"ng-template",null,3,e.C5r)(31,hn,1,0,"ng-template",null,4,e.C5r)}2&s&&(e.FS9("title",e.bMT(1,17,n.title)),e.Y8G("breadcrumbItems",e.lJ4(21,Bt)),e.R7$(4),e.Y8G("value",n.entities)("collapsible",!0),e.R7$(3),e.Y8G("showExport",!1)("totalItems",n.servicePagination.totalItems)("title",n.titleServices)("showSearch",!1)("newLocal","hr.positions.addPosition"),e.R7$(7),e.FS9("placeholder",e.bMT(15,19,"task.tasklist.subject")),e.R50("ngModel",n.servicePagination.filterValue),e.R7$(5),e.Y8G("value",n.services)("rows",n.servicePagination.pageSize)("lazy",!0)("totalRecords",n.servicePagination.totalItems),e.R7$(4),e.Y8G("ngIf",n.servicePagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.servicePagination.totalItems>0))},dependencies:[g.YU,g.bT,d.qT,d.me,d.BC,d.cb,d.YS,d.vS,d.cV,m.tg,m.do,m.U0,m.s5,z.m,P.b,V.w,$.p,B.g,_.Mm,y.XI,F.Ei,y.Tg,O.HW,f.Cv,G.vr,m.md,H.m,bt.p,fe,g.vh,_.D9],encapsulation:2})}}return i})(),ne=(()=>{class i extends U.d{constructor(t){super(t,D.c.apiUrl+"ApprovalRequest/")}get(t){return this.http.post(this.baseUrl+"Get",t)}getPending(){return this.http.get(this.baseUrl+"PendingStepsForUser")}GetStepsById(t){return this.http.get(this.baseUrl+"Steps/"+t)}GetEmployeeLookup(){return this.http.get(this.baseUrl+"GetEmployeeLookup")}deleteTarget(t){return this.http.delete(this.baseUrl+t)}edit(t,s){return this.http.put(this.baseUrl+"Edit/"+t,s)}approve(t){return this.http.put(this.baseUrl+"Approve",t)}reject(t){return this.http.put(this.baseUrl+"Reject",t)}rollBack(t){return this.http.put(this.baseUrl+"RollBack",t)}sendToApproval(t){return this.http.post(this.baseUrl+"SendToApproval/"+t,{})}requestDetail(t){return this.http.get(this.baseUrl+"requestDetail/"+t)}GetRequestCount(){return this.http.get(this.baseUrl+"getRequestCount/")}GetRequestLookups(){return this.http.get(this.baseUrl+"GetRequestLookups/")}UpdateLimit(t){return this.http.get(this.baseUrl+"UpdateLimit/"+t)}GetApprovalRequestCount(){return this.http.get(this.baseUrl+"GetApprovalRequestCount")}static{this.\u0275fac=function(s){return new(s||i)(e.KVO(Y.Qq))}}static{this.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function vn(i,o){1&i&&(e.j41(0,"tr",22)(1,"th",23),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",24),e.EFF(4," approvals.approval-types.title "),e.k0s(),e.j41(5,"th",24),e.EFF(6," approvals.approval-requests.title "),e.k0s(),e.nrm(7,"th",25),e.k0s())}function bn(i,o){if(1&i&&(e.nrm(0,"i",32),e.EFF(1),e.nI1(2,"date")),2&i){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.i5U(2,1,t.createdAt,"yyyy-MM-dd HH:mm:ss")," ")}}function Cn(i,o){if(1&i){const t=e.RV6();e.j41(0,"tr",26)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.DNE(7,bn,3,4,"ng-template",null,3,e.C5r),e.j41(9,"td"),e.nrm(10,"i",27),e.j41(11,"button",28),e.nI1(12,"translate"),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),r=e.sdS(23);return e.Njj(a.openActionModal(r,n.requestStepId,1))}),e.nrm(13,"i",29),e.k0s(),e.j41(14,"button",30),e.nI1(15,"translate"),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),r=e.sdS(23);return e.Njj(a.openActionModal(r,n.requestStepId,2))}),e.nrm(16,"i",31),e.k0s()()()}if(2&i){const t=o.$implicit,s=o.rowIndex,n=e.sdS(8);e.R7$(2),e.JRh(s+1),e.R7$(2),e.JRh(t.approvalTypeName),e.R7$(2),e.JRh(t.requestTitle),e.R7$(4),e.Y8G("ngbTooltip",n),e.R7$(),e.FS9("pTooltip",e.bMT(12,6,"approvals.pendingSteps.approve")),e.R7$(3),e.FS9("pTooltip",e.bMT(15,8,"approvals.pendingSteps.reject"))}}function xn(i,o){1&i&&(e.j41(0,"div",33),e.EFF(1," general.table.noData"),e.k0s())}function Sn(i,o){if(1&i){const t=e.RV6();e.j41(0,"div",34)(1,"div",35),e.nrm(2,"ngb-pagination-info",36),e.j41(3,"table-length",37),e.bIt("lengthChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",38)(5,"ngb-pagination",39),e.bIt("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.pagination.pageNumber,n)||(a.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&i){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function yn(i,o){1&i&&(e.j41(0,"span",56),e.EFF(1,"approvals.pendingSteps.approve "),e.k0s())}function In(i,o){1&i&&(e.j41(0,"span",56),e.EFF(1,"approvals.pendingSteps.reject "),e.k0s())}function Rn(i,o){if(1&i){const t=e.RV6();e.j41(0,"div",40)(1,"h4",41),e.DNE(2,yn,2,0,"span",42)(3,In,2,0,"span",42),e.nrm(4,"span",43),e.k0s(),e.j41(5,"button",44),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(6,"form",45,4),e.bIt("ngSubmit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.approvalAction())}),e.nrm(8,"ngx-ui-loader",15),e.j41(9,"div",46)(10,"div",47)(11,"div",48)(12,"div",6)(13,"div",49)(14,"label",50),e.EFF(15,"approvals.pendingSteps.notes"),e.k0s(),e.j41(16,"div",51)(17,"textarea",52),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.notes,n)||(a.form.notes=n),e.Njj(n)}),e.EFF(18,"                                "),e.k0s()()()(),e.j41(19,"div",53),e.nrm(20,"button",54),e.j41(21,"button",55),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()()()()()()}if(2&i){const t=e.XpG();e.R7$(2),e.Y8G("ngIf",1===t.approvalType),e.R7$(),e.Y8G("ngIf",2===t.approvalType),e.R7$(5),e.Y8G("hasProgressBar",!1)("fgsType",t.loaderOperationShap)("loaderId",t.operationLoader),e.R7$(9),e.R50("ngModel",t.form.notes)}}function jn(i,o){if(1&i){const t=e.RV6();e.j41(0,"delete-modal",57),e.bIt("deleteConfirm",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.DeleteConfirm())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}}let Tn=(()=>{class i extends q.w{constructor(t,s,n,a,r,p,S,w,j,T){super(t,s,S,r,n,a,p),this.baseService=r,this.service=w,this.excelService=j,this.router=T,this.title="approvals.pendingSteps.title",this.submitted=!1,this.isResolveList=!0,this.itemId=0,this.approvalType=0,this.loadentities()}onSearch(){this.ngxLoader.startLoader(this.searchLoader),this.loadentities()}loadentities(){this.countLoad=this.countLoad+1,(!this.isResolveList||1!==this.countLoad)&&(this.baseService.getPending().pipe((0,c.Q)(this.notifier)).subscribe(t=>{this.ngxLoader.stopLoader(u.a7),this.entities=t.data,this.pagination.totalItems=t.totalItems,this.LoadSuccess()},t=>{this.ngxLoader.stopLoader(u.a7),this.alertService.error(t)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[])}onReset(){this.form={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems},this.loadentities()}openActionModal(t,s,n,a="md"){this.isEditForm=!1,this.itemId=s,this.approvalType=n,this.modalService.open(t,{centered:!0,size:a})}approvalAction(){this.form.requestStepId=this.itemId,1===this.approvalType?this.baseService.approve(this.form).pipe((0,v.O)(),(0,x.c)(this.mainDelay),(0,b.Z)(),(0,c.Q)(this.notifier),(0,h.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(t=>{t.success?this.submitFunished():this.alertService.error("general.message."+t.message)},t=>{this.alertService.error("general.message."+t)}):2===this.approvalType&&this.baseService.reject(this.form).pipe((0,v.O)(),(0,x.c)(this.mainDelay),(0,b.Z)(),(0,c.Q)(this.notifier),(0,h.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(t=>{t.success?this.submitFunished():this.alertService.error("general.message."+t.message)},t=>{this.alertService.error("general.message."+t)})}static{this.\u0275fac=function(s){return new(s||i)(e.rXU(C.nX),e.rXU(_.c$),e.rXU(R.u),e.rXU(g.vh),e.rXU(ne),e.rXU(f.eD),e.rXU(m.Bq),e.rXU(Z.m),e.rXU(L.V),e.rXU(C.Ix))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-users-steps"]],features:[e.Vt3],decls:26,vars:25,consts:[["tableMaster",""],["AddModal",""],["deleteModal",""],["tooltipContent",""],["formEntity","ngForm"],[3,"title","breadcrumbItems"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],[3,"reset","search","addNew","showExport","showAdd","totalItems","title"],["control",""],[1,"col-12","col-md-3","mb-2"],["InputTirmFilter","","name","nameEn","type","text",1,"form-control","fs-6",3,"ngModelChange","ngModel","placeholder"],["InputTirmFilter","","name","nameAr","type","text",1,"form-control","fs-6",3,"ngModelChange","ngModel","placeholder"],[1,"card-body"],[3,"hasProgressBar","fgsType","loaderId"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["translate","",2,"width",".5%"],["translate","",2,"width","10%"],["translate","",2,"width","20%"],[1,"fs-5"],["tooltipPosition","top",1,"mdi","mdi-cog-outline","d-inline","text-muted","fs-16","align-middle","me-1",3,"ngbTooltip"],["tooltipPosition","top",1,"btn","btn-sm","btn-info","remove-list","me-2",3,"click","pTooltip"],[1,"ri-check-double-fill","align-bottom"],["tooltipPosition","top",1,"btn","btn-sm","btn-soft-danger","remove-list",3,"click","pTooltip"],[1,"ri-close-circle-fill","align-bottom"],[1,"ri-history-fill","text-warning"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["class","fw-bold fs-4","translate","",4,"ngIf"],["translate","approvals.pendingSteps.title",1,"fw-bold","fs-4"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[3,"ngSubmit"],[1,"modal-content"],[1,"modal-body"],[1,"mx-2"],[1,"col-12","col-md-12","mb-3"],["for","notes","translate","",1,"fw-bold","form-label","required"],[1,"input-group"],["InputTirmFilter","","name","notes","rows","4","id","notes",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,"d-flex","gap-2","justify-content-end","mt-4","mb-2"],["type","submit","id","save","translate","general.action.save",1,"btn","w-sm","btn-danger"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light",3,"click"],["translate","",1,"fw-bold","fs-4"],[3,"deleteConfirm","dismiss"]],template:function(s,n){if(1&s){const a=e.RV6();e.nrm(0,"app-breadcrumbs",5),e.nI1(1,"translate"),e.j41(2,"div",6)(3,"div",7)(4,"div",8)(5,"base-filter",9),e.bIt("reset",function(){return e.eBV(a),e.Njj(n.onReset())})("search",function(){return e.eBV(a),e.Njj(n.onSearch())})("addNew",function(){e.eBV(a);const p=e.sdS(23);return e.Njj(n.openModalTitle(p))}),e.qex(6,10),e.j41(7,"div",11)(8,"input",12),e.nI1(9,"translate"),e.mxI("ngModelChange",function(p){return e.eBV(a),e.DH7(n.pagination.nameEn,p)||(n.pagination.nameEn=p),e.Njj(p)}),e.k0s()(),e.j41(10,"div",11)(11,"input",13),e.nI1(12,"translate"),e.mxI("ngModelChange",function(p){return e.eBV(a),e.DH7(n.pagination.nameAr,p)||(n.pagination.nameAr=p),e.Njj(p)}),e.k0s()(),e.bVm(),e.k0s(),e.j41(13,"div",14),e.nrm(14,"ngx-ui-loader",15),e.j41(15,"div",16)(16,"p-table",17,0),e.bIt("onLazyLoad",function(p){return e.eBV(a),e.Njj(n.tableChange(p))})("selectionChange",function(p){return e.eBV(a),e.Njj(n.onSelectionChange(p))}),e.DNE(18,vn,8,0,"ng-template",18)(19,Cn,17,10,"ng-template",19),e.k0s()(),e.DNE(20,xn,2,0,"div",20)(21,Sn,6,8,"div",21),e.k0s()()()(),e.DNE(22,Rn,22,6,"ng-template",null,1,e.C5r)(24,jn,1,0,"ng-template",null,2,e.C5r)}2&s&&(e.FS9("title",e.bMT(1,19,n.title)),e.Y8G("breadcrumbItems",n.breadCrumbItems),e.R7$(5),e.Y8G("showExport",!1)("showAdd",!1)("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(3),e.FS9("placeholder",e.bMT(9,21,"approvals.approval-types.nameEn")),e.R50("ngModel",n.pagination.nameEn),e.R7$(3),e.FS9("placeholder",e.bMT(12,23,"approvals.approval-types.nameAr")),e.R50("ngModel",n.pagination.nameAr),e.R7$(3),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderSearchShap)("loaderId",n.searchLoader),e.R7$(2),e.Y8G("value",n.entities)("rows",n.pagination.pageSize)("lazy",!0)("totalRecords",n.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",n.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems>0))},dependencies:[g.bT,d.qT,d.me,d.BC,d.cb,d.vS,d.cV,m.s5,z.m,P.b,V.w,$.p,B.g,_.Mm,y.XI,F.Ei,f.Cv,m.md,H.m,A.m,g.vh,_.D9],encapsulation:2})}}return i})(),kn=(()=>{class i extends Q.E{constructor(t,s,n){super(t,s,n)}static{this.\u0275fac=function(s){return new(s||i)(e.KVO(C.Ix),e.KVO(oe),e.KVO(R.u))}}static{this.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var En=l(70152),wn=l(23294),be=l(25558),Dn=l(7673),Nn=(l(67376),l(75922)),Ce=l(81832),Mn=l(55999),ie=l(50969);const N=(i,o)=>({"text-danger":i,"text-dark ":o});function Gn(i,o){if(1&i&&(e.j41(0,"a",46),e.nrm(1,"i",47)(2,"span",48),e.k0s()),2&i){const t=e.XpG();e.Y8G("href",t.serverMedia+t.requestDetail.commercialRegisterPath,e.B4B)}}function An(i,o){if(1&i&&(e.j41(0,"a",46),e.nrm(1,"i",47)(2,"span",48),e.k0s()),2&i){const t=e.XpG();e.Y8G("href",t.serverMedia+t.requestDetail.municipalLicensePath,e.B4B)}}function qn(i,o){if(1&i&&(e.j41(0,"a",46),e.nrm(1,"i",47)(2,"span",48),e.k0s()),2&i){const t=e.XpG();e.Y8G("href",t.serverMedia+t.requestDetail.nationalAddressProofPath,e.B4B)}}function Ln(i,o){if(1&i&&(e.j41(0,"a",46),e.nrm(1,"i",47)(2,"span",48),e.k0s()),2&i){const t=e.XpG();e.Y8G("href",t.serverMedia+t.requestDetail.vatCertificatePath,e.B4B)}}function Pn(i,o){if(1&i&&(e.j41(0,"a",46),e.nrm(1,"i",47)(2,"span",48),e.k0s()),2&i){const t=e.XpG();e.Y8G("href",t.serverMedia+t.requestDetail.ownerIdPath,e.B4B)}}function Vn(i,o){if(1&i&&(e.j41(0,"a",46),e.nrm(1,"i",47)(2,"span",48),e.k0s()),2&i){const t=e.XpG();e.Y8G("href",t.serverMedia+t.requestDetail.dealAgreementPath,e.B4B)}}function $n(i,o){if(1&i){const t=e.RV6();e.j41(0,"div",49)(1,"div",50),e.nrm(2,"h3",51),e.j41(3,"button",52),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(4,"div",53)(5,"google-map",54),e.nrm(6,"map-marker",55),e.k0s(),e.j41(7,"div",56)(8,"button",57),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()()()()}if(2&i){const t=e.XpG();e.R7$(5),e.Y8G("options",t.mapOptions)("center",t.center)("zoom",t.zoom),e.R7$(),e.Y8G("position",t.markerPosition)}}let Bn=(()=>{class i{constructor(t,s,n){this.modalService=t,this.requestNewCustomerService=s,this.ngxLoader=n,this.submitted=!1,this.serverMedia=D.c.mediaUrl,this.requestId=0,this.requestDetail={},this.center={lat:0,lng:0},this.zoom=20,this.markerPosition=null,this.mapOptions={disableDefaultUI:!0,draggable:!1,gestureHandling:"none",zoomControl:!0},this.loaderSearchShap=u.cX,this.address="",this.maxSizeInBytes=1048576,this.onInfo=new e.bkB}ngOnInit(){this.getRequestDetail()}ngOnChanges(t){if(t.requestId){const s=t.requestId.currentValue;s&&0!==s&&this.getRequestDetail()}}getRequestDetail(){this.ngxLoader.startLoader("loader"),this.requestNewCustomerService.getById(this.requestId).pipe((0,h.j)(()=>this.ngxLoader.stopLoader("loader"))).subscribe(t=>{t.success&&(this.requestDetail=t.data,this.onInfo.next(this.requestDetail),this.getAddressFromCoords(parseFloat(this.requestDetail.lat),parseFloat(this.requestDetail.lng)))})}getStatus(t){return 1==t||2==t?"bg-warning-subtle text-warning":3==t?"bg-success-subtle text-success":4==t?"bg-danger-subtle text-danger":"bg-warning-subtle text-warning"}openModal(t,s="lg"){let n=parseFloat(this.requestDetail.lat),a=parseFloat(this.requestDetail.lng);isNaN(n)||isNaN(a)?console.error("Invalid coordinates:",this.requestDetail.lat,this.requestDetail.lng):(this.center={lat:n,lng:a},this.markerPosition={lat:n,lng:a},this.modalService.open(t,{centered:!0,size:s}))}activeMenu(t){document.querySelector(".star_"+t)?.classList.toggle("active")}OpenMap(){}setCurrentLocation(){this.center.lat=this.requestDetail.lat,this.center.lng=this.requestDetail.lng,this.markerPosition=this.center,this.getAddressFromCoords(this.center.lat,this.center.lng)}getAddressFromCoords(t,s){(new google.maps.Geocoder).geocode({location:{lat:t,lng:s}},(r,p)=>{"OK"===p&&r&&r.length>0?this.address=r[0].formatted_address:console.error("Geocoder failed due to:",p)})}static{this.\u0275fac=function(s){return new(s||i)(e.rXU(m.Bq),e.rXU(Mn.T),e.rXU(f.eD))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["request-client-new"]],inputs:{requestId:"requestId"},outputs:{onInfo:"onInfo"},features:[e.OA$],decls:106,vars:47,consts:[["openMap",""],[1,"card","mt-2"],[3,"hasProgressBar","fgsType","loaderId"],[1,"card-header","align-items-center","d-flex"],["translate","approvals.customerRequest.customerInfo",1,"card-title","mb-0","flex-grow-1"],[1,"card-body"],[1,"row","p-1"],[1,"col-12","col-md-8"],[1,"mt-2"],["translate","approvals.customerRequest.customerName",1,"fw-bold","text-dark"],[1,"form-label"],["translate","approvals.customerRequest.commercialRegistrationNumber",1,"fw-bold","text-dark"],["translate","approvals.customerRequest.primaryPhoneNumber",1,"fw-bold","text-dark"],["translate","approvals.customerRequest.taxNumber",1,"fw-bold","text-dark"],["translate","approvals.customerRequest.clientGroup",1,"fw-bold","text-dark"],["translate","approvals.customerRequest.customerSize",1,"fw-bold","text-dark"],[1,"col-12","col-md-4",2,"height","100px"],[1,"figure","mb-0"],["height","150px","width","150px",1,"figure-img","rounded",3,"src"],[1,"figure-caption","text-end"],["target","_blank","translate","approvals.customerRequest.externalPhotoPath",3,"href"],["translate","approvals.customerRequest.nationalAddressData",1,"card-title","text-decoration-underline","link-underline-opacity-25","link-underline-opacity-100-hove","mb-0","flex-grow-1",3,"click"],[1,"col-12","col-md-6"],[1,"mt-2",3,"click"],["translate","approvals.customerRequest.currentLocation",1,"fw-bold","text-dark","text-decoration-underline","link-underline-opacity-25","link-underline-opacity-100-hove"],["translate","approvals.customerRequest.buildingNumber",1,"fw-bold","text-dark"],["translate","approvals.customerRequest.subNumber",1,"fw-bold","text-dark"],["translate","approvals.customerRequest.postalCode",1,"fw-bold","text-dark"],["translate","approvals.customerRequest.city",1,"fw-bold","text-dark"],["translate","approvals.customerRequest.district",1,"fw-bold","text-dark"],["translate","approvals.customerRequest.officialDocuments",1,"card-title","mb-0","flex-grow-1"],[1,"card-body","mt-2"],[1,"row"],[1,"col-lg-12"],[1,"table-responsive","table-card"],[1,"table","table-borderless","align-middle","mb-0"],[1,"table-light"],["scope","col","translate","approvals.approvalRequests.documentName"],["scope","col"],["translate","approvals.customerRequest.commercialRegister",1,"fw-bold",3,"ngClass"],["target","_blank","class","dropdown-item",3,"href",4,"ngIf"],["translate","approvals.customerRequest.municipalLicense",1,"fw-bold",3,"ngClass"],["translate","approvals.customerRequest.nationalAddress",1,"fw-bold",3,"ngClass"],["translate","approvals.customerRequest.vatCertificate",1,"fw-bold",3,"ngClass"],["translate","approvals.customerRequest.customerID",1,"fw-bold",3,"ngClass"],["translate","approvals.customerRequest.dealAgreement",1,"fw-bold",3,"ngClass"],["target","_blank",1,"dropdown-item",3,"href"],[1,"ri-external-link-line","me-2","align-bottom","text-muted","float-start"],["translate","general.action.view"],[1,"modal-content"],[1,"modal-header"],["translate","approvals.customerRequest.currentLocation"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","btn-close",1,"btn-close",3,"click"],[1,"modal-body","p-1"],["height","500px","width","100%",3,"options","center","zoom"],[3,"position"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-danger","fs-6",3,"click"]],template:function(s,n){if(1&s){const a=e.RV6();e.j41(0,"div",1),e.nrm(1,"ngx-ui-loader",2),e.j41(2,"div",3),e.nrm(3,"h4",4),e.k0s(),e.j41(4,"div",5)(5,"div",6)(6,"div",7)(7,"div",8),e.nrm(8,"span",9),e.j41(9,"span",10),e.EFF(10),e.k0s()(),e.j41(11,"div",8),e.nrm(12,"span",11),e.j41(13,"span",10),e.EFF(14),e.k0s()(),e.j41(15,"div",8),e.nrm(16,"span",12),e.j41(17,"span",10),e.EFF(18),e.k0s()(),e.j41(19,"div",8),e.nrm(20,"span",13),e.j41(21,"span",10),e.EFF(22),e.k0s()(),e.j41(23,"div",8),e.nrm(24,"span",14),e.j41(25,"span",10),e.EFF(26),e.k0s()(),e.j41(27,"div",8),e.nrm(28,"span",15),e.j41(29,"span",10),e.EFF(30),e.k0s()()(),e.j41(31,"div",16)(32,"figure",17),e.nrm(33,"img",18),e.j41(34,"figcaption",19),e.nrm(35,"a",20),e.k0s()()()()()(),e.j41(36,"div",1)(37,"div",3)(38,"h4",21),e.bIt("click",function(){e.eBV(a);const p=e.sdS(105);return e.Njj(n.openModal(p))}),e.k0s()(),e.j41(39,"div",5)(40,"div",6)(41,"div",22)(42,"div",23),e.bIt("click",function(){e.eBV(a);const p=e.sdS(105);return e.Njj(n.openModal(p))}),e.nrm(43,"span",24),e.j41(44,"span",10),e.EFF(45),e.k0s()(),e.j41(46,"div",8),e.nrm(47,"span",25),e.j41(48,"span",10),e.EFF(49),e.k0s()(),e.j41(50,"div",8),e.nrm(51,"span",26),e.j41(52,"span",10),e.EFF(53),e.k0s()(),e.j41(54,"div",8),e.nrm(55,"span",27),e.j41(56,"span",10),e.EFF(57),e.k0s()()(),e.j41(58,"div",22)(59,"div",8),e.nrm(60,"span",28),e.j41(61,"span",10),e.EFF(62),e.k0s()(),e.j41(63,"div",8),e.nrm(64,"span",29),e.j41(65,"span",10),e.EFF(66),e.k0s()()()()()(),e.j41(67,"div",1)(68,"div",3),e.nrm(69,"h4",30),e.k0s(),e.j41(70,"div",31)(71,"div",32)(72,"div",33)(73,"div",34)(74,"table",35)(75,"thead",36)(76,"tr"),e.nrm(77,"th",37)(78,"th",38),e.k0s()(),e.j41(79,"tbody")(80,"tr"),e.nrm(81,"td",39),e.j41(82,"td"),e.DNE(83,Gn,3,1,"a",40),e.k0s()(),e.j41(84,"tr"),e.nrm(85,"td",41),e.j41(86,"td"),e.DNE(87,An,3,1,"a",40),e.k0s()(),e.j41(88,"tr"),e.nrm(89,"td",42),e.j41(90,"td"),e.DNE(91,qn,3,1,"a",40),e.k0s()(),e.j41(92,"tr"),e.nrm(93,"td",43),e.j41(94,"td"),e.DNE(95,Ln,3,1,"a",40),e.k0s()(),e.j41(96,"tr"),e.nrm(97,"td",44),e.j41(98,"td"),e.DNE(99,Pn,3,1,"a",40),e.k0s()(),e.j41(100,"tr"),e.nrm(101,"td",45),e.j41(102,"td"),e.DNE(103,Vn,3,1,"a",40),e.k0s()()()()()()()()(),e.DNE(104,$n,9,4,"ng-template",null,0,e.C5r)}2&s&&(e.R7$(),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderSearchShap)("loaderId","loader"),e.R7$(9),e.SpI(" : ",n.requestDetail.customerName,""),e.R7$(4),e.SpI(" : ",n.requestDetail.commercialRegistrationNumber,""),e.R7$(4),e.SpI(" : ",n.requestDetail.primaryPhoneNumber,""),e.R7$(4),e.SpI(" : ",n.requestDetail.taxNumber,""),e.R7$(4),e.SpI(" : ",n.requestDetail.clientGroupName,""),e.R7$(4),e.SpI(" : ",n.requestDetail.customerSizeName,""),e.R7$(3),e.Y8G("src",n.serverMedia+n.requestDetail.externalPhotoPath,e.B4B),e.R7$(2),e.Y8G("href",n.serverMedia+n.requestDetail.externalPhotoPath,e.B4B),e.R7$(10),e.SpI(" : ",n.address,""),e.R7$(4),e.SpI(" : ",n.requestDetail.buildingNumber,""),e.R7$(4),e.SpI(" : ",n.requestDetail.subNumber,""),e.R7$(4),e.SpI(" : ",n.requestDetail.postalCode,""),e.R7$(5),e.SpI(" : ",n.requestDetail.cityName,""),e.R7$(4),e.SpI(" : ",n.requestDetail.district,""),e.R7$(15),e.Y8G("ngClass",e.l_i(29,N,""==n.requestDetail.commercialRegisterPath,""!=n.requestDetail.commercialRegisterPath)),e.R7$(2),e.Y8G("ngIf",""!=n.requestDetail.commercialRegisterPath),e.R7$(2),e.Y8G("ngClass",e.l_i(32,N,""==n.requestDetail.municipalLicensePath,""!=n.requestDetail.municipalLicensePath)),e.R7$(2),e.Y8G("ngIf",""!=n.requestDetail.municipalLicensePath),e.R7$(2),e.Y8G("ngClass",e.l_i(35,N,""==n.requestDetail.nationalAddressProofPath,""!=n.requestDetail.nationalAddressProofPath)),e.R7$(2),e.Y8G("ngIf",""!=n.requestDetail.nationalAddressProofPath),e.R7$(2),e.Y8G("ngClass",e.l_i(38,N,""==n.requestDetail.vatCertificatePath,""!=n.requestDetail.vatCertificatePath)),e.R7$(2),e.Y8G("ngIf",""!=n.requestDetail.vatCertificatePath),e.R7$(2),e.Y8G("ngClass",e.l_i(41,N,""==n.requestDetail.ownerIdPath,""!=n.requestDetail.ownerIdPath)),e.R7$(2),e.Y8G("ngIf",""!=n.requestDetail.ownerIdPath),e.R7$(2),e.Y8G("ngClass",e.l_i(44,N,""==n.requestDetail.dealAgreementPath,""!=n.requestDetail.dealAgreementPath)),e.R7$(2),e.Y8G("ngIf",""!=n.requestDetail.dealAgreementPath))},dependencies:[g.YU,g.bT,_.Mm,f.Cv,ie.u6,ie.fU],encapsulation:2})}}return i})();var Xn=l(17478);let On=(()=>{class i{constructor(t,s,n){this.modalService=t,this.resquestPerson=s,this.ngxLoader=n,this.submitted=!1,this.serverMedia=D.c.mediaUrl,this.requestId=0,this.requestDetail={},this.onInfo=new e.bkB,this.loaderSearchShap=u.cX}ngOnInit(){this.getRequestDetail()}ngOnChanges(t){if(t.requestId){const s=t.requestId.currentValue;s&&0!==s&&this.getRequestDetail()}}getRequestDetail(){this.ngxLoader.startLoader("loader"),this.resquestPerson.ViewRequest(this.requestId).pipe((0,h.j)(()=>this.ngxLoader.stopLoader("loader"))).subscribe(t=>{t.success&&(this.requestDetail=t.data,this.onInfo.next(this.requestDetail))})}getStatus(t){return 1==t||2==t?"bg-warning-subtle text-warning":3==t?"bg-success-subtle text-success":4==t?"bg-danger-subtle text-danger":"bg-warning-subtle text-warning"}openModal(t){this.submitted=!1,this.modalService.open(t,{size:"md",centered:!0})}activeMenu(t){document.querySelector(".star_"+t)?.classList.toggle("active")}static{this.\u0275fac=function(s){return new(s||i)(e.rXU(m.Bq),e.rXU(Xn.u),e.rXU(f.eD))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["request-limit-view"]],inputs:{requestId:"requestId"},outputs:{onInfo:"onInfo"},features:[e.OA$],decls:49,vars:12,consts:[[1,"card","mt-2"],[3,"hasProgressBar","fgsType","loaderId"],[1,"card-header","align-items-center","d-flex"],["translate","approvals.customerRequest.customerInfo",1,"card-title","mb-0","flex-grow-1"],[1,"card-body"],[1,"row","p-1"],[1,"col-12","col-md-8"],[1,"mt-2"],["translate","approvals.customerRequest.customerName",1,"fw-bold","text-dark"],[1,"form-label"],["translate","approvals.customerRequest.commercialRegistrationNumber",1,"fw-bold","text-dark"],["translate","approvals.customerRequest.primaryPhoneNumber",1,"fw-bold","text-dark"],["translate","approvals.customerRequest.taxNumber",1,"fw-bold","text-dark"],["translate","approvals.customerRequest.clientGroup",1,"fw-bold","text-dark"],[1,"col-12","col-md-4",2,"height","100px"],[1,"figure","mb-0"],["height","150px","width","150px",1,"figure-img","rounded",3,"src"],[1,"figure-caption","text-end"],["target","_blank","translate","approvals.customerRequest.externalPhotoPath",3,"href"],[1,"col-12","col-md-6"],["translate","approvals.customerRequest.currentCreditLimit",1,"fw-bold","text-dark"],[1,"badge","bg-danger-subtle","text-danger","fs-4"],["translate","approvals.customerRequest.requestCreditLimit",1,"fw-bold","text-dark"],[1,"badge","bg-success-subtle","text-success","fs-4"]],template:function(s,n){1&s&&(e.j41(0,"div",0),e.nrm(1,"ngx-ui-loader",1),e.j41(2,"div",2),e.nrm(3,"h4",3),e.k0s(),e.j41(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7),e.nrm(8,"span",8),e.j41(9,"span",9),e.EFF(10),e.k0s()(),e.j41(11,"div",7),e.nrm(12,"span",10),e.j41(13,"span",9),e.EFF(14),e.k0s()(),e.j41(15,"div",7),e.nrm(16,"span",11),e.j41(17,"span",9),e.EFF(18),e.k0s()(),e.j41(19,"div",7),e.nrm(20,"span",12),e.j41(21,"span",9),e.EFF(22),e.k0s()(),e.j41(23,"div",7),e.nrm(24,"span",13),e.j41(25,"span",9),e.EFF(26),e.k0s()()(),e.j41(27,"div",14)(28,"figure",15),e.nrm(29,"img",16),e.j41(30,"figcaption",17),e.nrm(31,"a",18),e.k0s()()()()()(),e.j41(32,"div",0)(33,"div",4)(34,"div",5)(35,"div",19)(36,"div",7),e.nrm(37,"span",20),e.j41(38,"span",9),e.EFF(39," : "),e.j41(40,"span",21),e.EFF(41),e.k0s()()()(),e.j41(42,"div",19)(43,"div",7),e.nrm(44,"span",22),e.j41(45,"span",9),e.EFF(46," : "),e.j41(47,"span",23),e.EFF(48),e.k0s()()()()()()()),2&s&&(e.R7$(),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderSearchShap)("loaderId","loader"),e.R7$(9),e.SpI(" : ",n.requestDetail.customerName,""),e.R7$(4),e.SpI(" : ",n.requestDetail.commercialRegistrationNumber,""),e.R7$(4),e.SpI(" : ",n.requestDetail.primaryPhoneNumber,""),e.R7$(4),e.SpI(" : ",n.requestDetail.taxNumber,""),e.R7$(4),e.SpI(" : ",n.requestDetail.clientGroupName,""),e.R7$(3),e.Y8G("src",n.serverMedia+n.requestDetail.externalPhotoPath,e.B4B),e.R7$(2),e.Y8G("href",n.serverMedia+n.requestDetail.externalPhotoPath,e.B4B),e.R7$(10),e.JRh(n.requestDetail.oldCreditLimit),e.R7$(7),e.JRh(n.requestDetail.cost))},dependencies:[_.Mm,f.Cv],encapsulation:2})}}return i})();var Un=l(57415);const Yn=["pdfIframe"];let zn=(()=>{class i{constructor(t,s,n){this.salesRequestService=t,this.alertService=s,this.ngxLoader=n,this.requestId=0,this.loaderSearchShap=u.cX}ngOnInit(){this.PrintSalesOrder()}openUrl(t){const s=new Blob([t],{type:"application/pdf"}),n=URL.createObjectURL(s);this.pdfIframe.nativeElement.src=n}PrintSalesOrder(){this.ngxLoader.startLoader(this.loaderSearchShap),this.salesRequestService.PrintReport(this.requestId).pipe((0,h.j)(()=>this.ngxLoader.stopLoader(this.loaderSearchShap))).subscribe(t=>{this.openUrl(t)},t=>{this.alertService.error("general.message."+t)})}static{this.\u0275fac=function(s){return new(s||i)(e.rXU(Un.Z),e.rXU(R.u),e.rXU(f.eD))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["request-salesorder"]],viewQuery:function(s,n){if(1&s&&e.GBs(Yn,7),2&s){let a;e.mGM(a=e.lsd())&&(n.pdfIframe=a.first)}},inputs:{requestId:"requestId"},decls:5,vars:3,consts:[["pdfIframe",""],[1,"card","mt-2"],[3,"hasProgressBar","fgsType","loaderId"],[1,"card-body"],["width","100%","height","700px",2,"border","none"]],template:function(s,n){1&s&&(e.j41(0,"div",1),e.nrm(1,"ngx-ui-loader",2),e.j41(2,"div",3),e.nrm(3,"iframe",4,0),e.k0s()()),2&s&&(e.R7$(),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderSearchShap)("loaderId","loader"))},dependencies:[f.Cv],encapsulation:2})}}return i})();function Hn(i,o){if(1&i&&(e.j41(0,"div"),e.nrm(1,"span",31),e.EFF(2," : "),e.j41(3,"span",32),e.EFF(4),e.k0s()()),2&i){const t=e.XpG();e.R7$(4),e.JRh(t.info.creatorName)}}function Qn(i,o){if(1&i){const t=e.RV6();e.j41(0,"request-client-new",46),e.bIt("onInfo",function(n){e.eBV(t);const a=e.XpG(2);return e.Njj(a.onInfo(n))}),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("requestId",t.request.masterId)}}function Jn(i,o){if(1&i){const t=e.RV6();e.j41(0,"request-limit-view",46),e.bIt("onInfo",function(n){e.eBV(t);const a=e.XpG(2);return e.Njj(a.onInfo(n))}),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("requestId",t.request.masterId)}}function Kn(i,o){if(1&i&&e.nrm(0,"request-salesorder",47),2&i){const t=e.XpG(2);e.Y8G("requestId",t.request.masterId)}}function Wn(i,o){if(1&i&&(e.DNE(0,Qn,1,1,"request-client-new",33)(1,Jn,1,1,"request-limit-view",33)(2,Kn,1,1,"request-salesorder",34),e.j41(3,"div",35)(4,"div",36)(5,"button",37),e.nrm(6,"i",38)(7,"span",39),e.k0s()(),e.j41(8,"div",36)(9,"button",40),e.nrm(10,"i",41)(11,"span",42),e.k0s()(),e.j41(12,"div",36)(13,"button",43),e.nrm(14,"i",44)(15,"span",45),e.k0s()()()),2&i){const t=e.XpG();e.Y8G("ngIf",1==t.typeSelected),e.R7$(),e.Y8G("ngIf",2==t.typeSelected),e.R7$(),e.Y8G("ngIf",4==t.typeSelected)}}function Zn(i,o){if(1&i&&(e.j41(0,"div",50)(1,"div",51)(2,"div",52),e.nrm(3,"img",53),e.k0s(),e.j41(4,"div",54)(5,"p",55),e.EFF(6),e.k0s(),e.j41(7,"p",56),e.EFF(8),e.k0s(),e.j41(9,"p",57)(10,"span",58),e.EFF(11),e.nI1(12,"date"),e.k0s()()()()()),2&i){const t=o.$implicit;e.R7$(6),e.SpI(" ",t.employeeName," "),e.R7$(2),e.SpI(" ",t.name," "),e.R7$(3),e.JRh(e.i5U(12,3,t.approvedAt," HH:mm:ss yyyy-MM-dd"))}}function ei(i,o){if(1&i&&(e.j41(0,"div",48)(1,"div",2),e.DNE(2,Zn,13,6,"div",49),e.k0s()()),2&i){const t=e.XpG();e.R7$(2),e.Y8G("ngForOf",t.request.approvalRequestSteps)}}let ti=(()=>{class i{constructor(t){this.modalService=t,this.submitted=!1,this.serverMedia=D.c.mediaUrl,this.request={},this.typeSelected={},this.info={},this.requestDetail={customerName:"ahmed salam",commercialRegistrationNumber:"2345",graduateNumber:"234",primaryPhoneNumber:"4",clientGroupId:"345",clientGroupName:"\u062a\u062e\u0641\u064a\u0636\u0627\u062a",customerSize:"\u062c\u0645\u0644\u0629",currentLocation:"3",buildingNumber:"43",subNumber:"4789",postalCode:"34656548",district:"\u0627\u0644\u064a\u0628\u0646\u0645\u0643",cityName:"\u0627\u0644\u0631\u064a\u0627\u0636",externalPhotoPath:"SalesInvoice/8b7954df1a5f46f999563873c87bf8cf.jpg",commercialRegisterPath:"SalesInvoice/8b7954df1a5f46f999563873c87bf8cf.jpg",municipalLicensePath:"SalesInvoice/8b7954df1a5f46f999563873c87bf8cf.jpg",nationalAddressProofPath:"SalesInvoice/8b7954df1a5f46f999563873c87bf8cf.jpg",ownerIdPath:"",vatCertificatePath:"SalesInvoice/8b7954df1a5f46f999563873c87bf8cf.jpg",dealAgreementPath:"SalesInvoice/8b7954df1a5f46f999563873c87bf8cf.jpg"}}ngOnInit(){this.projectListWidgets=Ce.dj,this.teamOverviewList=Ce.dZ}getStatus(t){return 1==t||2==t?"bg-warning-subtle text-warning":3==t?"bg-success-subtle text-success":4==t?"bg-danger-subtle text-danger":"bg-warning-subtle text-warning"}openModal(t){this.submitted=!1,this.modalService.open(t,{size:"md",centered:!0})}activeMenu(t){document.querySelector(".star_"+t)?.classList.toggle("active")}onInfo(t){this.info=t}static{this.\u0275fac=function(s){return new(s||i)(e.rXU(m.Bq))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["request-layout"]],inputs:{request:"request",typeSelected:"typeSelected"},decls:45,vars:15,consts:[["customNav","ngbNav"],[1,"card","grid","mt-4"],[1,"card-body"],[1,"row"],[1,"col-lg-12"],[1,"card","mt-n4","mx-n4"],[1,"bg-primary-subtle"],[1,"card-body","pb-0","px-4"],[1,"row","mb-3"],[1,"col-md"],[1,"row","align-items-center","g-3"],[1,"col-md-auto"],[1,"avatar-md"],[1,"avatar-title","bg-success","rounded-circle"],["src","assets/images/custom/logo.png","alt","",1,"avatar-xs"],[1,"fw-bold"],[1,"hstack","gap-3","flex-wrap"],[1,"ri-building-line","align-bottom","me-1"],[1,"vr"],["translate","general.table.creationTime"],[1,"fw-medium","fs-6"],[4,"ngIf"],[1,"fs-12"],[3,"translate"],["ngbNav","","role","tablist",1,"nav","nav-tabs-custom","border-bottom-0",3,"activeId"],[1,"nav-item",3,"ngbNavItem"],["ngbNavLink","","data-bs-toggle","tab","role","tab","translate","approvals.approvalRequests.requestDetail",1,"nav-link"],["ngbNavContent",""],["ngbNavLink","","data-bs-toggle","tab","role","tab","translate","approvals.approvalRequests.log",1,"nav-link"],[1,"tab-content","text-muted"],[3,"ngbNavOutlet"],["translate","general.table.creator"],[1,"fw-large","text-danger","fs-4"],[3,"requestId","onInfo",4,"ngIf"],[3,"requestId",4,"ngIf"],[1,"card-footer","row","justify-content-around"],[1,"col-3"],["type","button",1,"btn","btn-success","btn-label","waves-effect","waves-light"],[1,"ri-check-double-fill","label-icon","align-middle","fs-16","me-2"],["translate","approvals.approvalRequests.accept"],["type","button",1,"btn","btn-danger","btn-label","waves-effect","waves-light"],[1,"ri-close-line","label-icon","align-middle","fs-16","me-2"],["translate","approvals.approvalRequests.reject"],["type","button",1,"btn","btn-warning","btn-label","waves-effect","waves-light"],[1,"ri-arrow-go-forward-fill","label-icon","align-middle","fs-16","me-2"],["translate","approvals.approvalRequests.rollBack"],[3,"onInfo","requestId"],[3,"requestId"],[1,"card"],["class","acitivity-timeline py-3",4,"ngFor","ngForOf"],[1,"acitivity-timeline","py-3"],[1,"acitivity-item","d-flex"],[1,"flex-shrink-0"],["src","assets/images/users/avatar-1.jpg","alt","",1,"avatar-xs","rounded-circle","acitivity-avatar"],[1,"flex-grow-1","ms-3"],[1,"mb-1","fs-5","fw-bold"],[1,"mb-1","fs-6","fw-bold","text-muted"],[1,"text-muted","mb-2"],[1,"fw-medium"]],template:function(s,n){if(1&s&&(e.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6)(6,"div",7)(7,"div",8)(8,"div",9)(9,"div",10)(10,"div",11)(11,"div",12)(12,"div",13),e.nrm(13,"img",14),e.k0s()()(),e.j41(14,"div",9)(15,"div")(16,"h4",15),e.EFF(17),e.k0s(),e.j41(18,"div",16)(19,"div"),e.nrm(20,"i",17),e.EFF(21),e.k0s(),e.nrm(22,"div",18),e.j41(23,"div"),e.nrm(24,"span",19),e.EFF(25," : "),e.j41(26,"span",20),e.EFF(27),e.nI1(28,"date"),e.k0s()(),e.DNE(29,Hn,5,1,"div",21),e.j41(30,"div",22)(31,"span"),e.nrm(32,"span",23),e.k0s()()()()()()()(),e.j41(33,"ul",24,0)(35,"li",25),e.nrm(36,"a",26),e.DNE(37,Wn,16,3,"ng-template",27),e.k0s(),e.j41(38,"li",25),e.nrm(39,"a",28),e.DNE(40,ei,3,1,"ng-template",27),e.k0s()()()()()()(),e.j41(41,"div",3)(42,"div",4)(43,"div",29),e.nrm(44,"div",30),e.k0s()()()()()),2&s){const a=e.sdS(34);e.R7$(17),e.JRh(n.request.approvalTransactionTypeNemeAr),e.R7$(4),e.SpI(" #PR#",n.request.id,""),e.R7$(6),e.JRh(e.i5U(28,12,n.request.creationTime,"yyyy-MM-dd HH:mm:ss")),e.R7$(2),e.Y8G("ngIf",n.info.creatorName),e.R7$(2),e.ZvI("badge ",n.getStatus(n.request.status),""),e.R7$(),e.FS9("translate","sales.salesOrder."+n.request.statusName),e.R7$(),e.Y8G("activeId",1),e.R7$(2),e.Y8G("ngbNavItem",1),e.R7$(3),e.Y8G("ngbNavItem",2),e.R7$(6),e.Y8G("ngbNavOutlet",a)}},dependencies:[g.Sq,g.bT,m.Um,m.X9,m.sy,m.Gx,m.Ri,m.WA,m.m_,_.Mm,Bn,On,zn,g.vh],encapsulation:2})}}return i})();const ni=()=>["requestPersonSales.register"];function ii(i,o){if(1&i){const t=e.RV6();e.j41(0,"div",12)(1,"div",13),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.onStatusSelect(5))}),e.j41(2,"div",14)(3,"div",15)(4,"div",49),e.nrm(5,"i",17),e.k0s()(),e.j41(6,"div",18)(7,"h5",19),e.EFF(8),e.k0s(),e.nrm(9,"p",50),e.k0s()()()()}if(2&i){const t=e.XpG(2);e.R7$(),e.AVh("bg-primary-subtle",5==t.pagination.status),e.R7$(7),e.JRh(null==t.requestStatus?null:t.requestStatus.update)}}function si(i,o){1&i&&(e.j41(0,"tr",51),e.nrm(1,"th",52),e.j41(2,"th",53),e.EFF(3,"#"),e.k0s(),e.j41(4,"th",53),e.EFF(5,"#"),e.k0s(),e.j41(6,"th",54),e.nrm(7,"i",55),e.EFF(8," approvals.approvalRequests.type "),e.k0s(),e.j41(9,"th",56),e.nrm(10,"i",55),e.EFF(11," approvals.approvalRequests.creationName "),e.k0s(),e.j41(12,"th",57),e.nrm(13,"i",55),e.EFF(14," approvals.approvalRequests.masterId "),e.k0s(),e.j41(15,"th",58),e.nrm(16,"i",55),e.EFF(17," approvals.approvalRequests.creationTime "),e.k0s(),e.j41(18,"th",59),e.nrm(19,"i",55),e.EFF(20," approvals.approvalRequests.statusName "),e.k0s(),e.j41(21,"th",60),e.nrm(22,"i",55),e.EFF(23," approvals.approvalRequests.rollbackReason "),e.k0s(),e.nrm(24,"th",61),e.k0s())}function ai(i,o){if(1&i){const t=e.RV6();e.qex(0),e.j41(1,"button",71),e.nI1(2,"translate"),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,a=e.XpG(2);return e.Njj(a.Approve(n))}),e.nrm(3,"i",72),e.k0s(),e.j41(4,"button",73),e.nI1(5,"translate"),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,a=e.XpG(2);return e.Njj(a.Reject(n))}),e.nrm(6,"i",74),e.k0s(),e.j41(7,"button",75),e.nI1(8,"translate"),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,a=e.XpG(2),r=e.sdS(10);return e.Njj(a.openModalRollBack(r,n))}),e.nrm(9,"i",76),e.k0s(),e.bVm()}2&i&&(e.R7$(),e.FS9("pTooltip",e.bMT(2,3,"approvals.approvalRequests.accept")),e.R7$(3),e.FS9("pTooltip",e.bMT(5,5,"approvals.approvalRequests.reject")),e.R7$(3),e.FS9("pTooltip",e.bMT(8,7,"approvals.approvalRequests.rollBack")))}function oi(i,o){if(1&i&&(e.j41(0,"span"),e.nrm(1,"span",77),e.k0s()),2&i){const t=e.XpG().$implicit,s=e.XpG(2);e.ZvI("badge ",s.getStepStatus(t.status),""),e.R7$(),e.FS9("translate","sales.salesOrder."+t.statusName)}}function ri(i,o){if(1&i&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&i){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",t.rollbackReason," ")}}function li(i,o){if(1&i&&(e.nrm(0,"i",78),e.EFF(1),e.nI1(2,"date"),e.nrm(3,"br")(4,"i",79),e.EFF(5),e.nI1(6,"date"),e.nrm(7,"br")(8,"i",80),e.EFF(9)),2&i){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.i5U(2,3,t.creationTime,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",e.i5U(6,6,t.lastModificationTime,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",t.creatorName," ")}}function pi(i,o){1&i&&(e.j41(0,"button",81),e.nI1(1,"translate"),e.nrm(2,"i",82),e.k0s()),2&i&&e.FS9("pTooltip",e.bMT(1,1,"general.edit"))}function di(i,o){if(1&i){const t=e.RV6();e.j41(0,"button",83),e.nI1(1,"translate"),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,a=e.XpG(2);return e.Njj(a.sendToApproval(n.id))}),e.nrm(2,"i",84),e.k0s()}2&i&&e.FS9("pTooltip",e.bMT(1,1,"general.action.send"))}function ci(i,o){if(1&i){const t=e.RV6();e.j41(0,"tr",62)(1,"td"),e.nrm(2,"button",63),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td")(6,"bdi",64),e.EFF(7),e.k0s()(),e.j41(8,"td",65)(9,"span",66),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(2);return e.Njj(a.viewRequest(n,n.type))}),e.EFF(10),e.k0s()(),e.j41(11,"td"),e.EFF(12),e.k0s(),e.j41(13,"td"),e.EFF(14),e.k0s(),e.j41(15,"td"),e.EFF(16),e.nI1(17,"date"),e.k0s(),e.j41(18,"td"),e.DNE(19,ai,10,9,"ng-container",9),e.qex(20),e.DNE(21,oi,2,4,"span",67),e.bVm(),e.k0s(),e.j41(22,"td"),e.DNE(23,ri,2,1,"span",9),e.k0s(),e.j41(24,"td"),e.DNE(25,li,10,9,"ng-template",null,3,e.C5r),e.nrm(27,"i",68),e.DNE(28,pi,3,3,"button",69)(29,di,3,3,"button",70),e.k0s()()}if(2&i){const t=o.$implicit,s=o.rowIndex,n=o.expanded,a=e.sdS(26),r=e.XpG(2);e.R7$(2),e.Y8G("pRowToggler",t)("ngClass",n?" ri-arrow-down-s-line":"  ri-arrow-up-s-line"),e.R7$(2),e.JRh(s+1),e.R7$(3),e.SpI("#PR#",t.id,""),e.R7$(3),e.SpI(" ",t.approvalTransactionTypeNemeAr," "),e.R7$(2),e.JRh(t.creatorName),e.R7$(2),e.JRh(t.masterId),e.R7$(2),e.JRh(e.i5U(17,14,t.creationTime,"HH:mm:ss dd-MM-yyyy ")),e.R7$(3),e.Y8G("ngIf",2==r.mainStatus&&t.isHaveApprove),e.R7$(2),e.Y8G("ngIf",2!=r.mainStatus||!t.isHaveApprove),e.R7$(2),e.Y8G("ngIf",5==t.status),e.R7$(4),e.Y8G("ngbTooltip",a),e.R7$(),e.Y8G("ngIf",5==t.status),e.R7$(),e.Y8G("ngIf",5==t.status)}}function mi(i,o){if(1&i&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td")(8,"span"),e.nrm(9,"span",77),e.k0s()(),e.j41(10,"td"),e.EFF(11),e.nI1(12,"date"),e.k0s()()),2&i){const t=o.$implicit,s=e.XpG(3);e.R7$(2),e.JRh(t.stepOrder),e.R7$(2),e.JRh(t.name),e.R7$(2),e.JRh(t.employeeName),e.R7$(2),e.ZvI("badge ",s.getStepStatus(t.status),""),e.R7$(),e.FS9("translate","approvals.approvalRequests."+t.statusName),e.R7$(2),e.JRh(e.i5U(12,8,t.approvedAt,"HH:mm:ss dd-MM-yyyy "))}}function gi(i,o){if(1&i&&(e.j41(0,"tr")(1,"td",85)(2,"div")(3,"table",86)(4,"thead")(5,"tr",87),e.nrm(6,"th",88)(7,"th",89)(8,"th",90)(9,"th",91)(10,"th",92),e.k0s()(),e.j41(11,"tbody"),e.DNE(12,mi,13,11,"tr",93),e.k0s()()()()()),2&i){const t=o.$implicit;e.R7$(12),e.Y8G("ngForOf",t.approvalRequestSteps)}}function ui(i,o){1&i&&(e.j41(0,"div",94),e.EFF(1," general.table.noData"),e.k0s())}function _i(i,o){if(1&i){const t=e.RV6();e.j41(0,"div",95)(1,"div",96),e.nrm(2,"ngb-pagination-info",97),e.j41(3,"table-length",98),e.bIt("lengthChange",function(n){e.eBV(t);const a=e.XpG(2);return e.Njj(a.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",99)(5,"ngb-pagination",100),e.bIt("pageChange",function(n){e.eBV(t);const a=e.XpG(2);return e.Njj(a.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const a=e.XpG(2);return e.DH7(a.pagination.pageNumber,n)||(a.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&i){const t=e.XpG(2);e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function hi(i,o){if(1&i){const t=e.RV6();e.qex(0),e.j41(1,"div",11)(2,"div",12)(3,"div",13),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.onStatusSelect(0))}),e.j41(4,"div",14)(5,"div",15)(6,"div",16),e.nrm(7,"i",17),e.k0s()(),e.j41(8,"div",18)(9,"h5",19),e.EFF(10),e.k0s(),e.nrm(11,"p",20),e.k0s()()()(),e.DNE(12,ii,10,3,"div",21),e.j41(13,"div",12)(14,"div",13),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.onStatusSelect(2))}),e.j41(15,"div",14)(16,"div",15)(17,"div",22),e.nrm(18,"i",17),e.k0s()(),e.j41(19,"div",18)(20,"h5",19),e.EFF(21),e.k0s(),e.nrm(22,"p",23),e.k0s()()()(),e.j41(23,"div",12)(24,"div",13),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.onStatusSelect(4))}),e.j41(25,"div",14)(26,"div",15)(27,"div",24),e.nrm(28,"i",17),e.k0s()(),e.j41(29,"div",18)(30,"h5",19),e.EFF(31),e.k0s(),e.nrm(32,"p",25),e.k0s()()()(),e.j41(33,"div",12)(34,"div",13),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.onStatusSelect(3))}),e.j41(35,"div",14)(36,"div",15)(37,"div",26),e.nrm(38,"i",17),e.k0s()(),e.j41(39,"div",18)(40,"h5",19),e.EFF(41),e.k0s(),e.nrm(42,"p",27),e.k0s()()()()(),e.j41(43,"div",28)(44,"div",29)(45,"div",30)(46,"base-filter",31),e.bIt("reset",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.onReset())})("search",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.onSearch())})("exportXlsx",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.onExportXlsx())}),e.qex(47,32),e.j41(48,"div",33)(49,"div",34)(50,"input",35),e.nI1(51,"translate"),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.pagination.masterId,n)||(a.pagination.masterId=n),e.Njj(n)}),e.k0s(),e.nrm(52,"i",36),e.k0s()(),e.j41(53,"div",37)(54,"div",34)(55,"ng-select",38),e.nI1(56,"translate"),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.pagination.approvalTransactionTypeId,n)||(a.pagination.approvalTransactionTypeId=n),e.Njj(n)}),e.k0s()()(),e.j41(57,"div",37)(58,"div",34)(59,"ng-select",38),e.nI1(60,"translate"),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.pagination.creatorId,n)||(a.pagination.creatorId=n),e.Njj(n)}),e.k0s()()(),e.j41(61,"div",37)(62,"div",34)(63,"ng-select",38),e.nI1(64,"translate"),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.pagination.status,n)||(a.pagination.status=n),e.Njj(n)}),e.k0s()()(),e.j41(65,"div",37)(66,"input",39),e.nI1(67,"translate"),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.searchForm.creationDates,n)||(a.searchForm.creationDates=n),e.Njj(n)}),e.k0s()(),e.bVm(),e.k0s(),e.j41(68,"div",40),e.nrm(69,"ngx-ui-loader",41),e.j41(70,"div",42)(71,"p-table",43,2),e.bIt("onLazyLoad",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.tableChange(n))})("selectionChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.onSelectionChange(n))}),e.DNE(73,si,25,0,"ng-template",44)(74,ci,30,17,"ng-template",45)(75,gi,13,1,"ng-template",46),e.k0s()(),e.DNE(76,ui,2,0,"div",47)(77,_i,6,8,"div",48),e.k0s()()()(),e.bVm()}if(2&i){const t=e.XpG();e.R7$(3),e.AVh("bg-primary-subtle",null==t.pagination.status),e.R7$(7),e.JRh(null==t.requestStatus?null:t.requestStatus.all),e.R7$(2),e.Y8G("ngIf",(null==t.requestStatus?null:t.requestStatus.update)>0),e.R7$(2),e.AVh("bg-primary-subtle",2==t.pagination.status),e.R7$(7),e.JRh(null==t.requestStatus?null:t.requestStatus.pending),e.R7$(3),e.AVh("bg-primary-subtle",4==t.pagination.status),e.R7$(7),e.JRh(null==t.requestStatus?null:t.requestStatus.accept),e.R7$(3),e.AVh("bg-primary-subtle",3==t.pagination.status),e.R7$(7),e.JRh(null==t.requestStatus?null:t.requestStatus.reject),e.R7$(5),e.Y8G("addPermission",e.lJ4(54,ni))("showAdd",!1)("totalItems",t.pagination.totalItems)("title",t.title),e.R7$(4),e.FS9("placeholder",e.bMT(51,44,"approvals.approvalRequests.masterId")),e.R50("ngModel",t.pagination.masterId),e.R7$(5),e.FS9("placeholder",e.bMT(56,46,"approvals.approvalRequests.type")),e.Y8G("items",t.types)("multiple",!1),e.R50("ngModel",t.pagination.approvalTransactionTypeId),e.R7$(4),e.FS9("placeholder",e.bMT(60,48,"approvals.approvalRequests.creationName")),e.Y8G("items",t.salesPersons)("multiple",!1),e.R50("ngModel",t.pagination.creatorId),e.R7$(4),e.FS9("placeholder",e.bMT(64,50,"approvals.approvalRequests.statusName")),e.Y8G("items",t.status)("multiple",!1),e.R50("ngModel",t.pagination.status),e.R7$(3),e.FS9("placeholder",e.bMT(67,52,"approvals.approvalRequests.creationTime")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",t.searchForm.creationDates),e.R7$(3),e.Y8G("hasProgressBar",!1)("fgsType",t.loaderSearchShap)("loaderId",t.searchLoader),e.R7$(2),e.Y8G("value",t.entities)("rows",t.pagination.pageSize)("lazy",!0)("totalRecords",t.pagination.totalItems),e.R7$(5),e.Y8G("ngIf",t.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",t.pagination.totalItems>0)}}function fi(i,o){if(1&i&&e.nrm(0,"request-layout",104),2&i){const t=e.XpG(2);e.Y8G("typeSelected",t.typeSelected)("request",t.requestSelected)}}function vi(i,o){if(1&i&&(e.j41(0,"div",101)(1,"div",102),e.DNE(2,fi,1,2,"request-layout",103),e.k0s()()),2&i){const t=e.XpG();e.R7$(2),e.Y8G("ngIf",t.requestSelected)}}function bi(i,o){if(1&i){const t=e.RV6();e.j41(0,"delete-modal",105),e.bIt("deleteConfirm",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.DeleteConfirmSoft())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}}function Ci(i,o){1&i&&(e.j41(0,"div",120),e.EFF(1," general.message.filedIdRequired"),e.k0s())}function xi(i,o){if(1&i){const t=e.RV6();e.j41(0,"div",106)(1,"h4",107),e.nrm(2,"span",108),e.k0s(),e.j41(3,"button",109),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(4,"form",null,4),e.nrm(6,"ngx-ui-loader",41),e.j41(7,"div",110)(8,"div",111)(9,"div",28)(10,"div",112),e.nrm(11,"label",113),e.j41(12,"div",114)(13,"textarea",115,5),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.rollbackForm.rollbackReason,n)||(a.rollbackForm.rollbackReason=n),e.Njj(n)}),e.k0s(),e.DNE(15,Ci,2,0,"div",116),e.k0s()()(),e.j41(16,"div",117)(17,"button",118),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.onRollBackSubmit(10))}),e.k0s(),e.j41(18,"button",119),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()()()()()}if(2&i){const t=e.sdS(5),s=e.sdS(14),n=e.XpG();e.R7$(6),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderOperationShap)("loaderId",n.operationLoader),e.R7$(7),e.R50("ngModel",n.rollbackForm.rollbackReason),e.R7$(2),e.Y8G("ngIf",s.invalid&&s.touched),e.R7$(2),e.Y8G("disabled",!t.valid)}}let Si=(()=>{class i extends q.w{constructor(t,s,n,a,r,p,S,w,j,T,J){super(t,s,S,n,a,r,p),this.baseService=n,this.excelService=j,this.clientService=T,this.employeeService=J,this.title="approvals.approvalRequests.title",this.titleOperation="sales.approvalRequests.titleOperation",this.searchForm={},this.step=1,this.requestSelected={},this.typeSelected=0,this.isResolveList=!0,this.countLoad=2,this.clientParam={pageSize:50,pageNumber:1,search:"",clientId:null},this.clients=[],this.loading=!1,this.searchClient=new ue.B,this.status=[],this.requestStatus={all:0,pending:0,underReview:0,accept:0,reject:0},this.option={startVal:0,useEasing:!0,duration:2,decimalPlaces:0},this.salesPersons=[],this.mainStatus=2,this.isStart=!1,this.pagination={pageNumber:1,pageSize:10,status:2},this.rollbackForm={},this.types=[],this.setDates=(k,M,K)=>{if(k?.from||k?.to){const Pi=k.to||k.from;this.pagination[M]=this.datePipe.transform(k.from||k.to,"yyyy-MM-ddT00:00:00"),this.pagination[K]=this.datePipe.transform(Pi,"yyyy-MM-ddT23:59:59.999")}else this.pagination[M]=null,this.pagination[K]=null},this.configRoute(),this.GetSalesPersons()}ngOnInitMore(){this.GetRequestCount(),this.searchClient.pipe((0,En.B)(300),(0,wn.F)(),(0,be.n)(t=>this.loadClient(t))).subscribe(),this.GetRequestLookups()}GetSalesPersons(){this.employeeService.GetAllByType(9).subscribe(t=>{this.salesPersons=t.data},t=>{console.log(t)})}GetRequestCount(){this.baseService.GetApprovalRequestCount().pipe((0,c.Q)(this.notifier)).subscribe(t=>{this.requestStatus=t.data})}GetRequestLookups(){this.baseService.GetRequestLookups().pipe((0,c.Q)(this.notifier)).subscribe(t=>{let s=t.data.approvalStatus;s.forEach(n=>{n.name=this.getTranslationText("sales.salesOrder."+n.name)}),this.status=s,this.types=t.data.requestTypes})}onSearch(){let t={...this.searchForm};this.ngxLoader.startLoader("allLoader"),this.setDates(t.creationDates,"dateFrom","dateTo"),this.loadentities()}loadClient(t){return this.loading=!0,""==t||null==t?(this.loading=!1,(0,Dn.of)([])):this.getClientDropdwon(t)}getClientDropdwon(t=""){return this.clientParam.search=t,this.clientParam.clientId=null,this.clientParam.pageNumber=1,this.clientService.GetClientSearch(this.clientParam).pipe((0,be.n)(s=>(this.clients=s.data,this.loading=!1,[])),(0,c.Q)(this.notifier))}mapForm(t){return{...t}}mapRegisterForm(t){let s={...t};return s.id=0,s}OnSearch(t){this.ngxLoader.startLoader(u.a7),this.loadentities()}configRoute(){this.routerActive.data.pipe((0,c.Q)(this.notifier)).subscribe(t=>{this.entities=t.data.data,this.pagination.totalItems=t.data.totalItems},()=>{this.alertService.error()})}EditModel(t,s,n="md"){this.isEditForm=!0,this.baseService.getById(t).pipe((0,c.Q)(this.notifier)).subscribe(a=>{a.success?(this.clientParam.clientId=a.data.clientId,this.clientParam.search="",this.clientService.GetClientSearch(this.clientParam).pipe((0,c.Q)(this.notifier)).subscribe(r=>{this.clients=r.data}),this.form=a.data):this.alertService.error("general.message."+a.message),this.modalService.open(s,{centered:!0,size:n})},a=>{this.alertService.error()})}mapExcel(){let t=[];return this.entities?.forEach(s=>{t.push({nameAr:s.nameAr,nameEn:s.nameEn,isActive:this.getTranslationText("general.table.active"),notes:s.notes})}),t}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,this.getTranslationText(this.title),[])}editEntity(){let t=this.mapForm(this.form);this.baseService.editPut(t.id,t).pipe((0,v.O)(),(0,x.c)(this.mainDelay),(0,b.Z)(),(0,c.Q)(this.notifier),(0,h.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(s=>{s.success?this.submitFunished():this.alertService.error("general.message."+s.message)},s=>{this.alertService.error("general.message."+s)})}scrollClient(){this.clientParam.pageNumber=this.clientParam.pageNumber+1,this.clientService.GetClientSearch(this.clientParam).subscribe(t=>{this.clients=[...this.clients,...t.data]})}getStatus(t){return 10==t||20==t?"bg-warning-subtle text-warning":30==t?"bg-success-subtle text-success":40==t?"bg-danger-subtle text-danger":"bg-warning-subtle text-warning"}getStepStatus(t){return 1==t||10==t||2==t?"bg-warning-subtle text-warning":4==t?"bg-success-subtle text-success":3==t?"bg-danger-subtle text-danger":5==t?"bg-info-subtle text-info":"bg-warning-subtle text-warning"}OnStatusSubmit(){let t={requestPersonStatus:this.form.requestPersonStatus,id:this.operationId,cost:this.form.cost?this.form.cost:0};this.ngxLoader.start(u.ZW),this.baseService.UpdateLimit(t).pipe((0,v.O)(),(0,x.c)(this.mainDelay),(0,b.Z)(),(0,c.Q)(this.notifier),(0,h.j)(()=>this.ngxLoader.stopLoader(u.ZW))).subscribe(s=>{s.success?(this.alertService.success(),this.modalService.dismissAll(),this.loadentities(),this.GetRequestCount()):this.alertService.error("general.message."+s.message)},s=>{this.alertService.error("general.message."+s)})}onStatusSelect(t){this.pagination.status=0==t?null:t,this.loadentities()}viewRequest(t,s){this.baseService.getById(t.id).subscribe({next:n=>{this.requestSelected=n.data,this.typeSelected=s,this.step=2}})}loadentities(){this.isResolveList?this.isResolveList=!1:(this.isStart&&this.ngxLoader.startLoader(u.a7),this.isStart=!0,this.baseService.get(this.pagination).pipe((0,c.Q)(this.notifier)).subscribe(t=>{this.ngxLoader.stopLoader(u.a7),this.entities=t.data,this.pagination.totalItems=t.totalItems,this.mainStatus=this.pagination.status},t=>{this.ngxLoader.stopLoader(u.a7),this.alertService.error(t)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[])}Approve(t){let n={RequestStepId:t.approvalRequestSteps.find(a=>2===a.status)?.id,notes:""};this.ngxLoader.startLoader(u.a7),this.baseService.approve(n).pipe((0,v.O)(),(0,b.Z)(),(0,c.Q)(this.notifier),(0,h.j)(()=>this.ngxLoader.stopLoader(this.searchLoader))).subscribe(a=>{a.success?(this.submitFunished(),this.GetRequestCount()):this.alertService.error("general.message."+a.message)},a=>{this.alertService.error("general.message."+a)})}Reject(t){let n={RequestStepId:t.approvalRequestSteps.find(a=>2===a.status)?.id,notes:""};this.ngxLoader.startLoader(u.a7),this.baseService.reject(n).pipe((0,v.O)(),(0,b.Z)(),(0,c.Q)(this.notifier),(0,h.j)(()=>this.ngxLoader.stopLoader(this.searchLoader))).subscribe(a=>{a.success?(this.submitFunished(),this.GetRequestCount()):this.alertService.error("general.message."+a.message)},a=>{this.alertService.error("general.message."+a)})}openModalRollBack(t,s,n="md"){let a=s.approvalRequestSteps.find(r=>2===r.status)?.id;this.isEditForm=!1,this.rollbackForm={requestStepId:a,rejectAction:0,rollbackReason:""},this.modalService.open(t,{centered:!0,size:n})}onRollBackSubmit(t){this.rollbackForm.rejectAction=t,this.rollBack()}rollBack(){this.ngxLoader.startLoader(u.ZW),this.baseService.rollBack(this.rollbackForm).pipe((0,v.O)(),(0,b.Z)(),(0,c.Q)(this.notifier),(0,h.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(t=>{t.success?(this.modalService.dismissAll(),this.submitFunished(),this.GetRequestCount()):this.alertService.error("general.message."+t.message)},t=>{this.alertService.error("general.message."+t)})}sendToApproval(t){this.ngxLoader.startLoader(this.searchLoader),this.baseService.sendToApproval(t).pipe((0,v.O)(),(0,b.Z)(),(0,c.Q)(this.notifier),(0,h.j)(()=>this.ngxLoader.stopLoader(this.searchLoader))).subscribe(s=>{s.success?(this.submitFunished(),this.GetRequestCount()):this.alertService.error("general.message."+s.message)},s=>{this.alertService.error("general.message."+s)})}onReset(){this.form={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems},this.searchForm.creationDates=null}static{this.\u0275fac=function(s){return new(s||i)(e.rXU(C.nX),e.rXU(_.c$),e.rXU(ne),e.rXU(R.u),e.rXU(g.vh),e.rXU(f.eD),e.rXU(m.Bq),e.rXU(e.gRc),e.rXU(L.V),e.rXU(Nn.X),e.rXU(de.O))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-approval-request"]],features:[e.Vt3],decls:11,vars:9,consts:[["deleteModal",""],["RollBackModal",""],["tableMaster",""],["tooltipContent",""],["formEntity","ngForm"],["rollbackReason","ngModel"],[1,"step-wizard"],[1,"step",3,"click"],["translate","approvals.approvalRequests.viewRequest",1,"step"],[4,"ngIf"],["class","row justify-content-center",4,"ngIf"],[1,"row","justify-content-around"],[1,"col-12","col-md-2","cursor-pointer"],[1,"card",3,"click"],[1,"card-body","d-flex","gap-3","align-items-center"],[1,"avatar-sm"],[1,"avatar-title","border","bg-primary","border-opacity-25","rounded-2","fs-17"],[1,"ri-git-pull-request-line"],[1,"flex-grow-1"],[1,"fs-15"],["translate","general.table.all",1,"mb-0","text-muted"],["class","col-12 col-md-2 cursor-pointer ",4,"ngIf"],[1,"avatar-title","border","bg-warning","border-opacity-25","rounded-2","fs-17"],["translate","sales.salesOrder.UnderReview",1,"mb-0","text-muted"],[1,"avatar-title","border","bg-success","border-opacity-25","rounded-2","fs-17"],["translate","sales.salesOrder.Accept",1,"mb-0","text-muted"],[1,"avatar-title","border","bg-danger","border-opacity-25","rounded-2","fs-17"],["translate","sales.salesOrder.Reject",1,"mb-0","text-muted"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],[3,"reset","search","exportXlsx","addPermission","showAdd","totalItems","title"],["control",""],[1,"col-md-2","mb-2"],[1,"search-box"],["type","number","id","masterId","name","masterId",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],[1,"col-12","col-md-2","mb-2"],["name","name","bindValue","id","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],["type","text","mwlFlatpickr","","id","isDate","mode","range","altFormat","d/m/Y",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"card-body"],[3,"hasProgressBar","fgsType","loaderId"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,"avatar-title","border","bg-info","border-opacity-25","rounded-2","fs-17"],["translate","sales.salesOrder.UpdateRequest",1,"mb-0","text-muted"],[1,""],[2,"width","5%"],["translate","",2,"width",".5%"],["pSortableColumn","approvalTransactionTypeId","translate","",2,"width","15%"],[1,"ri-expand-up-down-line"],["pSortableColumn","creatorId","translate","",2,"width","10%"],["pSortableColumn","masterId","translate","",2,"width","10%"],["pSortableColumn","creationTime","translate","",2,"width","12%"],["pSortableColumn","cost","translate","",2,"width","15%"],["pSortableColumn","rollbackReason","translate","",2,"width","20%"],["translate","",2,"width","15%"],[1,"fs-5"],["type","button","pRipple","",1,"border-0","p-button-text","p-button-rounded","p-button-plain",3,"pRowToggler","ngClass"],[1,"code-pointer"],[1,"cursor-pointer"],[1,"link-primary","link-offset-2","text-decoration-underline","link-underline-opacity-25","link-underline-opacity-100-hover",3,"click"],[3,"class",4,"ngIf"],["tooltipPosition","top",1,"mdi","mdi-cog-outline","text-muted","fs-16","align-middle","me-1",3,"ngbTooltip"],["tooltipPosition","top","class","btn btn-sm btn-soft-info edit-list mx-2",3,"pTooltip",4,"ngIf"],["tooltipPosition","top","class","btn btn-sm btn-soft-success edit-list mx-2",3,"pTooltip","click",4,"ngIf"],["tooltipPosition","top",1,"btn","btn-sm","btn-success","edit-list","mx-1",3,"click","pTooltip"],[1,"ri-checkbox-circle-fill","align-bottom"],["tooltipPosition","top",1,"btn","btn-sm","btn-danger","edit-list","mx-1",3,"click","pTooltip"],[1,"ri-close-circle-fill","align-bottom"],["tooltipPosition","top",1,"btn","btn-sm","btn-warning","edit-list","mx-1",3,"click","pTooltip"],[1,"ri-arrow-go-back-fill","align-bottom"],[3,"translate"],[1,"ri-history-fill","text-warning"],[1,"ri-history-fill","text-danger"],[1,"ri-user-location-fill","text-primary"],["tooltipPosition","top",1,"btn","btn-sm","btn-soft-info","edit-list","mx-2",3,"pTooltip"],[1,"ri-pencil-fill","align-bottom","mx-1"],["tooltipPosition","top",1,"btn","btn-sm","btn-soft-success","edit-list","mx-2",3,"click","pTooltip"],[1,"ri-checkbox-circle-fill","align-bottom","mx-1"],["colspan","7"],["dataKey","id",1,"w-100"],[1,"bg-light"],["translate","approvals.approvalRequests.stepOrder",2,"width","10%"],["translate","approvals.approvalRequests.postionName",2,"width","20%"],["translate","approvals.approvalRequests.userApprove",2,"width","15%"],["translate","approvals.approvalRequests.statusName",2,"width","20%"],["translate","approvals.approvalRequests.approvedAt",2,"width","15%"],[4,"ngFor","ngForOf"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[1,"row","justify-content-center"],[1,"col-12","col-md-6"],[3,"typeSelected","request",4,"ngIf"],[3,"typeSelected","request"],[3,"deleteConfirm","dismiss"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["translate","approvals.approvalRequests.rollBack",1,"fw-bold","fs-4"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-content"],[1,"modal-body"],[1,"col-12"],["for","rollbackReason","translate","approvals.approvalRequests.rollbackReason",1,"fw-bold","form-label","required"],[1,"input-group"],["rows","3","name","nameEn","type","text","required","","id","rollbackReason",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["id","backOnly","translate","approvals.approvalRequests.backOnly",1,"btn","w-sm","btn-success",3,"click","disabled"],["data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light",3,"click"],["translate","",1,"text-danger","text-center"]],template:function(s,n){if(1&s){const a=e.RV6();e.j41(0,"div",6)(1,"div",7),e.bIt("click",function(){return e.eBV(a),e.Njj(n.step=1)}),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.nrm(4,"div",8),e.k0s(),e.DNE(5,hi,78,55,"ng-container",9)(6,vi,3,1,"div",10)(7,bi,1,0,"ng-template",null,0,e.C5r)(9,xi,19,6,"ng-template",null,1,e.C5r)}2&s&&(e.R7$(),e.AVh("active",1==n.step),e.R7$(),e.JRh(e.bMT(3,7,n.title)),e.R7$(2),e.AVh("active",2==n.step),e.R7$(),e.Y8G("ngIf",1==n.step),e.R7$(),e.Y8G("ngIf",2==n.step))},dependencies:[g.YU,g.Sq,g.bT,d.qT,d.me,d.Q0,d.BC,d.cb,d.YS,d.vS,d.cV,m.s5,ae.kL,P.b,V.w,$.p,B.g,ti,_.Mm,y.XI,F.Ei,y.Tg,y.FP,f.Cv,G.vr,m.md,A.m,g.vh,_.D9],encapsulation:2})}}return i})(),yi=(()=>{class i extends Q.E{constructor(t,s,n){super(t,s,n),this.pagination={pageNumber:1,pageSize:10,status:2}}static{this.\u0275fac=function(s){return new(s||i)(e.KVO(C.Ix),e.KVO(ne),e.KVO(R.u))}}static{this.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Ii=l(53132);const Ri=[{path:"approval-types",component:Oe,resolve:{data:_t},canActivate:[X.g],data:{permission:["approval-types.view"]}},{path:"approval-settings",component:ut,resolve:{data:kn},canActivate:[X.g],data:{permission:["approvalSettings.view"]}},{path:"departments",component:fn,resolve:{data:ht},canActivate:[X.g],data:{permission:["departments.view"]}},{path:"users-steps",component:Tn,canActivate:[X.g],data:{permission:["approval-settings.pendingSteps"]}},{path:"approval-requests",component:Si,resolve:{data:yi},canActivate:[X.g],data:{permission:["approvalRequests.view"]}},{path:"request-new-customer",component:Ii.z,data:{permission:[]}}];let ji=(()=>{class i{static{this.\u0275fac=function(s){return new(s||i)}}static{this.\u0275mod=e.$C({type:i})}static{this.\u0275inj=e.G2t({imports:[C.iI.forChild(Ri),C.iI]})}}return i})();var Ti=l(32454),ki=l(28203);let xe=(()=>{class i{static{this.\u0275fac=function(s){return new(s||i)}}static{this.\u0275mod=e.$C({type:i})}static{this.\u0275inj=e.G2t({imports:[ki.jI]})}}return i})(),wi=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[g.MD,xe]}),i})();var Se=l(99386);const Ai={url:"noop",autoProcessQueue:!1,maxFiles:6,acceptedFiles:"*/*",addRemoveLinks:!0};let qi=(()=>{class i{constructor(){(0,Ie.eV)(je().loadAnimation)}static{this.\u0275fac=function(s){return new(s||i)}}static{this.\u0275mod=e.$C({type:i})}static{this.\u0275inj=e.G2t({providers:[{provide:Se.lk,useValue:Ai}],imports:[g.MD,d.YN,d.X1,m.zH,m.Pv,m.c9,ae.ND,ye.r,ji,Te.G,_.h,y.bG,ke.q4,O.H_,m.c9,f.th,G.MQ,m.n8,Ee.j,m._f,A.S,I.tP,Ti.A,xe,wi,Se._L,$t,ie.rJ]})}}return i})()}}]);
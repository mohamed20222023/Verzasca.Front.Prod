"use strict";(self.webpackChunkvelzon=self.webpackChunkvelzon||[]).push([[739],{55999:(R,b,i)=>{i.d(b,{T:()=>f});var e=i(67569),u=i(45312),d=i(54438),_=i(21626);let f=(()=>{class l extends e.d{constructor(a){super(a,u.c.apiUrl+"CustomerRequest/")}GetLookups(){return this.http.get(this.baseUrl+"GetLookups")}GetRequestLookups(){return this.http.get(this.baseUrl+"GetRequestLookups")}GetRequestCount(){return this.http.get(this.baseUrl+"GetRequestCount")}ViewRequest(a){return this.http.get(this.baseUrl+"ViewRequest/"+a)}Send(a){return this.http.put(this.baseUrl+"Send/"+a,{})}static{this.\u0275fac=function(g){return new(g||l)(d.KVO(_.Qq))}}static{this.\u0275prov=d.jDH({token:l,factory:l.\u0275fac,providedIn:"root"})}}return l})()},17478:(R,b,i)=>{i.d(b,{u:()=>f});var e=i(67569),u=i(45312),d=i(54438),_=i(21626);let f=(()=>{class l extends e.d{constructor(a){super(a,u.c.apiUrl+"RequestPersonSales/")}UpdateLimit(a){return this.http.post(this.baseUrl+"UpdateLimit",a)}GetRequestLookups(){return this.http.get(this.baseUrl+"GetRequestLookups")}GetRequestCount(){return this.http.get(this.baseUrl+"GetRequestCount")}ViewRequest(a){return this.http.get(this.baseUrl+"ViewRequest/"+a)}Send(a){return this.http.put(this.baseUrl+"Send/"+a,{})}static{this.\u0275fac=function(g){return new(g||l)(d.KVO(_.Qq))}}static{this.\u0275prov=d.jDH({token:l,factory:l.\u0275fac,providedIn:"root"})}}return l})()},57415:(R,b,i)=>{i.d(b,{Z:()=>f});var e=i(67569),u=i(45312),d=i(54438),_=i(21626);let f=(()=>{class l extends e.d{constructor(a){super(a,u.c.apiUrl+"SalesRequest/")}PrintReport(a){return this.http.get(this.baseUrl+"PrintReport/"+a,{responseType:"blob"})}SalesRequestCount(){return this.http.get(this.baseUrl+"SalesRequestCount")}changStatus(a){return this.http.put(this.baseUrl+"ChangeStatus/",a)}GetOrderDetail(a){return this.http.get(this.baseUrl+"GetOrderDetail/"+a)}static{this.\u0275fac=function(g){return new(g||l)(d.KVO(_.Qq))}}static{this.\u0275prov=d.jDH({token:l,factory:l.\u0275fac,providedIn:"root"})}}return l})()},53132:(R,b,i)=>{i.d(b,{z:()=>z});var e=i(54438),u=i(99386),d=i(21413),_=i(56977),f=i(37021),l=i(35335),M=i(45236),a=i(70980),g=i(36158),j=i(45312),T=i(55999),C=i(8147),P=i(3888),I=i(1530),y=i(75922),h=i(69005),N=i(60177),c=i(89417),x=i(50969),E=i(26364);const D=(s,m)=>({"btn-outline-primary":s,"btn-success":m}),q=s=>({"text-danger":s});function k(s,m){if(1&s&&(e.nrm(0,"app-breadcrumbs",20),e.nI1(1,"translate")),2&s){const t=e.XpG();e.FS9("title",e.bMT(1,2,t.title)),e.Y8G("breadcrumbItems",t.breadCrumbItems)}}function G(s,m){if(1&s&&(e.qex(0),e.j41(1,"option",61),e.EFF(2),e.k0s(),e.bVm()),2&s){const t=m.$implicit;e.R7$(),e.Y8G("value",t.id),e.R7$(),e.JRh(t.name)}}function B(s,m){if(1&s&&(e.qex(0),e.j41(1,"option",61),e.EFF(2),e.k0s(),e.bVm()),2&s){const t=m.$implicit;e.R7$(),e.Y8G("value",t.id),e.R7$(),e.JRh(t.name)}}function O(s,m){if(1&s){const t=e.RV6();e.j41(0,"div",21)(1,"div",22)(2,"label",23),e.bIt("click",function(){e.eBV(t);const r=e.XpG(),n=e.sdS(25);return e.Njj(r.openModal(n))}),e.nrm(3,"a",24),e.j41(4,"span",25),e.EFF(5),e.k0s()()(),e.j41(6,"div",26)(7,"div",27)(8,"input",28),e.mxI("ngModelChange",function(r){e.eBV(t);const n=e.XpG();return e.DH7(n.form.customerName,r)||(n.form.customerName=r),e.Njj(r)}),e.k0s(),e.nrm(9,"label",29),e.k0s()(),e.j41(10,"div",26)(11,"div",27)(12,"input",30),e.mxI("ngModelChange",function(r){e.eBV(t);const n=e.XpG();return e.DH7(n.form.commercialRegistrationNumber,r)||(n.form.commercialRegistrationNumber=r),e.Njj(r)}),e.k0s(),e.nrm(13,"label",31),e.k0s()(),e.j41(14,"div",32)(15,"div",27)(16,"input",33),e.mxI("ngModelChange",function(r){e.eBV(t);const n=e.XpG();return e.DH7(n.form.primaryPhoneNumber,r)||(n.form.primaryPhoneNumber=r),e.Njj(r)}),e.k0s(),e.nrm(17,"label",34),e.k0s()(),e.j41(18,"div",32)(19,"div",27)(20,"input",35),e.mxI("ngModelChange",function(r){e.eBV(t);const n=e.XpG();return e.DH7(n.form.taxNumber,r)||(n.form.taxNumber=r),e.Njj(r)}),e.k0s(),e.nrm(21,"label",36),e.k0s()(),e.j41(22,"div",32)(23,"div",27)(24,"select",37),e.mxI("ngModelChange",function(r){e.eBV(t);const n=e.XpG();return e.DH7(n.form.clientGroupId,r)||(n.form.clientGroupId=r),e.Njj(r)}),e.DNE(25,G,3,2,"ng-container",38),e.k0s(),e.nrm(26,"label",39),e.k0s()(),e.j41(27,"div",32)(28,"div",27)(29,"select",40),e.mxI("ngModelChange",function(r){e.eBV(t);const n=e.XpG();return e.DH7(n.form.customerSize,r)||(n.form.customerSize=r),e.Njj(r)}),e.DNE(30,B,3,2,"ng-container",38),e.k0s(),e.nrm(31,"label",41),e.k0s()(),e.j41(32,"div",26)(33,"div",27)(34,"input",42),e.mxI("ngModelChange",function(r){e.eBV(t);const n=e.XpG();return e.DH7(n.form.numberMunicipalLicense,r)||(n.form.numberMunicipalLicense=r),e.Njj(r)}),e.k0s(),e.nrm(35,"label",43),e.k0s()(),e.j41(36,"div",44)(37,"label",45),e.EFF(38,"approvals.customerRequest.externalPhotoPath"),e.k0s(),e.j41(39,"div",46)(40,"div",47)(41,"label",48)(42,"div",49)(43,"div",50),e.nrm(44,"i",51),e.k0s()()(),e.j41(45,"input",52),e.bIt("change",function(r){e.eBV(t);const n=e.XpG();return e.Njj(n.fileChange(r))}),e.k0s()(),e.j41(46,"div",53)(47,"div",54),e.nrm(48,"img",55),e.k0s()()()(),e.j41(49,"div",56)(50,"div",57)(51,"button",58),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.goInfoNext())}),e.nrm(52,"i",59)(53,"span",60),e.k0s()()()()}if(2&s){const t=e.XpG();e.R7$(3),e.AVh("link-success",""!=t.form.lat)("link-danger",""==t.form.lat),e.R7$(2),e.SpI(" ",t.address,""),e.R7$(3),e.R50("ngModel",t.form.customerName),e.R7$(4),e.R50("ngModel",t.form.commercialRegistrationNumber),e.R7$(4),e.Y8G("maxlength",10)("minlength",10),e.R50("ngModel",t.form.primaryPhoneNumber),e.R7$(4),e.R50("ngModel",t.form.taxNumber),e.R7$(4),e.R50("ngModel",t.form.clientGroupId),e.R7$(),e.Y8G("ngForOf",t.clientGroups),e.R7$(4),e.R50("ngModel",t.form.customerSize),e.R7$(),e.Y8G("ngForOf",t.companySizes),e.R7$(4),e.R50("ngModel",t.form.numberMunicipalLicense),e.R7$(14),e.Y8G("src",null!=t.form&&t.form.externalPhotoPath?t.mediaUrl+t.form.externalPhotoPath:t.imageURL,e.B4B)}}function U(s,m){if(1&s&&(e.qex(0),e.j41(1,"option",61),e.EFF(2),e.k0s(),e.bVm()),2&s){const t=m.$implicit;e.R7$(),e.Y8G("value",t.id),e.R7$(),e.JRh(t.name)}}function L(s,m){if(1&s){const t=e.RV6();e.j41(0,"div",62)(1,"div",26)(2,"div",27)(3,"input",63),e.mxI("ngModelChange",function(r){e.eBV(t);const n=e.XpG();return e.DH7(n.form.buildingNumber,r)||(n.form.buildingNumber=r),e.Njj(r)}),e.k0s(),e.nrm(4,"label",64),e.k0s()(),e.j41(5,"div",26)(6,"div",27)(7,"input",65),e.mxI("ngModelChange",function(r){e.eBV(t);const n=e.XpG();return e.DH7(n.form.subNumber,r)||(n.form.subNumber=r),e.Njj(r)}),e.k0s(),e.nrm(8,"label",66),e.k0s()(),e.j41(9,"div",32)(10,"div",27)(11,"input",67),e.mxI("ngModelChange",function(r){e.eBV(t);const n=e.XpG();return e.DH7(n.form.postalCode,r)||(n.form.postalCode=r),e.Njj(r)}),e.k0s(),e.nrm(12,"label",68),e.k0s()(),e.j41(13,"div",32)(14,"div",27)(15,"input",69),e.mxI("ngModelChange",function(r){e.eBV(t);const n=e.XpG();return e.DH7(n.form.district,r)||(n.form.district=r),e.Njj(r)}),e.k0s(),e.nrm(16,"label",70),e.k0s()(),e.j41(17,"div",32)(18,"div",27)(19,"select",71),e.mxI("ngModelChange",function(r){e.eBV(t);const n=e.XpG();return e.DH7(n.form.cityId,r)||(n.form.cityId=r),e.Njj(r)}),e.DNE(20,U,3,2,"ng-container",38),e.k0s(),e.nrm(21,"label",72),e.k0s()(),e.j41(22,"div",56)(23,"div",73)(24,"button",74),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.activeTabId=1)}),e.nrm(25,"i",75)(26,"span",76),e.k0s(),e.j41(27,"button",77),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.goAddressNext())}),e.nrm(28,"i",59)(29,"span",60),e.k0s()()()()}if(2&s){const t=e.XpG();e.R7$(3),e.R50("ngModel",t.form.buildingNumber),e.R7$(4),e.R50("ngModel",t.form.subNumber),e.R7$(4),e.R50("ngModel",t.form.postalCode),e.R7$(4),e.R50("ngModel",t.form.district),e.R7$(4),e.R50("ngModel",t.form.cityId),e.R7$(),e.Y8G("ngForOf",t.cities)}}function S(s,m){if(1&s){const t=e.RV6();e.j41(0,"div",90)(1,"input",91),e.mxI("ngModelChange",function(r){e.eBV(t);const n=e.XpG(2);return e.DH7(n.selectedType,r)||(n.selectedType=r),e.Njj(r)}),e.k0s(),e.j41(2,"label",92),e.bIt("click",function(){const r=e.eBV(t).$implicit,n=e.XpG(2);return e.Njj(n.onTypeChange(r.id))}),e.j41(3,"span",93),e.EFF(4),e.nI1(5,"translate"),e.k0s()()()}if(2&s){const t=m.$implicit,o=e.XpG(2);e.R7$(),e.Y8G("id",t.id)("value",t.id),e.R50("ngModel",o.selectedType),e.R7$(),e.Y8G("ngClass",e.l_i(9,D,!t.isUploaded,t.isUploaded))("for",t.id),e.R7$(),e.Y8G("ngClass",e.eq3(12,q,t.isRequired)),e.R7$(),e.SpI(" ",e.bMT(5,7,"approvals.customerRequest."+t.label)," ")}}function w(s,m){if(1&s){const t=e.RV6();e.j41(0,"div",95),e.nrm(1,"i",96),e.j41(2,"strong",97),e.bIt("click",function(){e.eBV(t);const r=e.XpG().$implicit,n=e.XpG(2);return e.Njj(n.viewFile(r.id))}),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.j41(5,"button",98),e.bIt("click",function(){e.eBV(t);const r=e.XpG().$implicit,n=e.XpG(2);return e.Njj(n.removeFile(r.id))}),e.nrm(6,"span",99),e.k0s()()}if(2&s){const t=e.XpG().$implicit;e.R7$(3),e.SpI(" ",e.bMT(4,1,"approvals.customerRequest."+t.label)," ")}}function A(s,m){if(1&s&&(e.j41(0,"div"),e.DNE(1,w,7,3,"div",94),e.k0s()),2&s){const t=m.$implicit,o=e.XpG(2);e.R7$(),e.Y8G("ngIf",o.filesByType[t.id])}}function F(s,m){if(1&s){const t=e.RV6();e.nrm(0,"h5",78),e.j41(1,"div",79),e.DNE(2,S,6,14,"div",80),e.k0s(),e.j41(3,"dropzone",81,2),e.bIt("error",function(r){e.eBV(t);const n=e.XpG();return e.Njj(n.onFileError(r))})("addedFile",function(r){e.eBV(t);const n=e.XpG();return e.Njj(n.onFileAdded(r))}),e.k0s(),e.j41(5,"div",82),e.nrm(6,"h5",83),e.DNE(7,A,2,1,"div",38),e.k0s(),e.j41(8,"div",84)(9,"button",85),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.activeTabId=2)}),e.nrm(10,"i",75)(11,"span",86),e.k0s(),e.j41(12,"button",87),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.onSubmit())}),e.nrm(13,"i",88)(14,"span",89),e.k0s()()}if(2&s){const t=e.XpG();e.R7$(2),e.Y8G("ngForOf",t.documentTypes),e.R7$(),e.Y8G("config",t.config)("useDropzoneClass",!1),e.R7$(4),e.Y8G("ngForOf",t.documentTypes)}}function V(s,m){if(1&s){const t=e.RV6();e.j41(0,"div",100)(1,"div",101),e.nrm(2,"lord-icon",102)(3,"h5",103),e.j41(4,"div",104)(5,"button",105),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.activeTabId=1)}),e.nrm(6,"i",106)(7,"span",107),e.k0s()()()()}}function X(s,m){if(1&s){const t=e.RV6();e.j41(0,"div",108)(1,"div",109),e.nrm(2,"h3",110),e.j41(3,"button",111),e.bIt("click",function(){const r=e.eBV(t).$implicit;return e.Njj(r.dismiss())}),e.k0s()(),e.j41(4,"div",112)(5,"google-map",113),e.bIt("mapClick",function(r){e.eBV(t);const n=e.XpG();return e.Njj(n.onMapClick(r))}),e.nrm(6,"map-marker",114),e.k0s(),e.j41(7,"div",115)(8,"button",116),e.bIt("click",function(){const r=e.eBV(t).$implicit;return e.Njj(r.dismiss())}),e.k0s(),e.j41(9,"button",117),e.bIt("click",function(){const r=e.eBV(t).$implicit;return e.Njj(r.dismiss())}),e.k0s()()()()}if(2&s){const t=e.XpG();e.R7$(5),e.Y8G("options",t.mapOptions)("center",t.center)("zoom",t.zoom),e.R7$(),e.Y8G("position",t.markerPosition)}}let z=(()=>{class s{constructor(t,o,r,n,v,p){this.requestNewCustomerService=t,this.translateService=o,this.alertService=r,this.ngxLoader=n,this.clientService=v,this.modalService=p,this.title="approvals.customerRequest.title",this.center={lat:0,lng:0},this.zoom=20,this.markerPosition=null,this.mapOptions={disableDefaultUI:!0,draggable:!1,gestureHandling:"none",zoomControl:!0},this.form={},this.isEdit=!1,this.errors=[],this.showBreadcrumbs=!0,this.notifier=new d.B,this.clientGroups=[],this.companySizes=[],this.cities=[],this.activeTabId=1,this.filesByType={},this.selectedType="commercialRegister",this.documentTypes=[{id:"commercialRegister",label:"commercialRegister",isUploaded:!1,isRequired:!0},{id:"municipalLicense",label:"municipalLicense",isUploaded:!1,isRequired:!0},{id:"nationalAddressProof",label:"nationalAddress",isUploaded:!1,isRequired:!0},{id:"vatCertificate",label:"vatCertificate",isUploaded:!1,isRequired:!0},{id:"ownerId",label:"customerID",isUploaded:!1,isRequired:!1},{id:"dealAgreement",label:"dealAgreement",isUploaded:!1,isRequired:!1}],this.config={dictInvalidFileType:"",url:"noop",autoProcessQueue:!1,maxFiles:1,maxFilesize:1,acceptedFiles:"image/*,application/pdf",addRemoveLinks:!0,dictDefaultMessage:this.getTranslationText("approvals.customerRequest.dropMsg")},this.loaderOperationShap=g.$$,this.operationLoader=g.ZW,this.mediaUrl=j.c.mediaUrl,this.OnStepChange=new e.bkB,this.address="",this.maxSizeInBytes=1048576,this.getUserLocation()}ngOnInit(){this.getLoopus(),this.isEdit&&this.checkMedia(),this.setCurrentLocation()}checkMedia(){const t={commercialRegister:this.form.commercialRegisterPath,municipalLicense:this.form.municipalLicensePath,nationalAddressProof:this.form.nationalAddressProofPath,vatCertificate:this.form.vatCertificatePath,ownerId:this.form.ownerIdPath,dealAgreement:this.form.dealAgreementPath};this.documentTypes=this.documentTypes.filter(o=>{const r=t[o.id];return!r||""===r.trim()})}ngAfterViewInit(){const t=this.dropzoneDirective.el.nativeElement.querySelector('input[type="file"]');t&&t.setAttribute("capture","camera")}getLoopus(){this.requestNewCustomerService.GetLookups().subscribe(t=>{this.clientGroups=t.data.clientGroup,this.cities=t.data.cities;let o=t.data.size;o.forEach(r=>{r.name=this.getTranslationText("approvals.customerRequest."+r.name)}),this.companySizes=o})}getCurrentLocation(){navigator.geolocation?navigator.geolocation.getCurrentPosition(t=>{this.center={lat:t.coords.latitude,lng:t.coords.longitude},this.markerPosition=this.center},t=>{console.error("Geolocation error:",t),alert("Failed to get location.")}):alert("Geolocation is not supported.")}getTranslationText(t){let o="";return this.translateService.get(t).pipe((0,_.Q)(this.notifier)).subscribe(r=>{o=r}),o}goInfoNext(){return this.form.customerName?this.form.commercialRegistrationNumber?this.form.primaryPhoneNumber?this.form.taxNumber?this.form.clientGroupId?this.form.customerSize?(this.form.externalPhoto||this.form.externalPhotoPath)&&(this.form.lng||this.form.lat)?(this.activeTabId=2,!0):(this.alertService.error("general.message.filedIdRequired"),!1):(this.alertService.error("approvals.customerRequest.customerSizeRequired"),!1):(this.alertService.error("approvals.customerRequest.clientGroupIdRequired"),!1):(this.alertService.error("approvals.customerRequest.taxNumberRequired"),!1):(this.alertService.error("approvals.customerRequest.primaryPhoneNumberRequired"),!1):(this.alertService.error("approvals.customerRequest.commercialRegistrationNumberRequired"),!1):(this.alertService.error("approvals.customerRequest.customerNameRequired"),!1)}goAddressNext(){return this.form.buildingNumber&&this.form.subNumber&&this.form.postalCode&&this.form.district&&this.form.cityId?(this.activeTabId=3,!0):(this.alertService.error("general.message.filedIdRequired"),!1)}onFileError(t){}onFileAdded(t){if(t.size>this.maxSizeInBytes)return this.alertService.error("\u062d\u062c\u0645 \u0627\u0644\u0645\u0644\u0641 \u0643\u0628\u064a\u064a\u0631"),void this.dropzoneDirective.removeFile(t);if(this.filesByType[this.selectedType])return;this.filesByType[this.selectedType]=t;const o=this.documentTypes.find(r=>r.id===this.selectedType);o&&(o.isUploaded=!0)}removeFile(t){delete this.filesByType[t];const o=this.documentTypes.find(r=>r.id===t);o&&(o.isUploaded=!1)}onTypeChange(t){this.selectedType=t,this.clearDropzone()}clearDropzone(){this.directiveRef?this.directiveRef.reset():this.componentRef&&this.componentRef.directiveRef&&this.componentRef.directiveRef.reset()}fileChange(t){if(this.form.externalPhoto=t.target.files[0],this.form.externalPhoto>this.maxSizeInBytes)return void this.alertService.error("\u062d\u062c\u0645 \u0627\u0644\u0645\u0644\u0641 \u0643\u0628\u064a\u064a\u0631");document.getElementById("");const r=new FileReader;r.onload=()=>{this.imageURL=r.result,document.getElementById("externalPhotoPath").src=this.imageURL},r.readAsDataURL(this.form.externalPhoto)}onSubmit(){this.checkStatusDocs()&&(this.ngxLoader.startLoader(this.operationLoader),this.isEdit?this.UpdateClient():this.Register())}UpdateClient(){let t=this.mapClientUpdateForm();this.clientService.agentSalesEdit(this.form.id,t).pipe((0,f.O)(),(0,l.c)(50),(0,M.Z)(),(0,_.Q)(this.notifier),(0,a.j)(()=>this.ngxLoader.stopLoader(g.ZW))).subscribe(o=>{o.success?(this.OnStepChange.emit(1),this.alertService.success()):this.alertService.error("general.message."+o.message)},o=>{this.alertService.error("general.message."+o)})}Register(){let t=this.mapForm();this.requestNewCustomerService.register(t).pipe((0,f.O)(),(0,l.c)(100),(0,M.Z)(),(0,_.Q)(this.notifier),(0,a.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(o=>{o.success?(this.form={},this.filesByType={},this.activeTabId=4,this.imageURL=""):this.alertService.error("general.message."+o.message)},()=>{this.alertService.error()})}checkStatusDocs(){let t=!0;return this.documentTypes.filter(r=>r.isRequired&&!r.isUploaded).map(r=>r.label).length>0&&(this.alertService.error("approvals.customerRequest.uploadRequiredDoc"),t=!1),t}mapForm(){const t=new FormData;return Object.keys(this.filesByType).forEach(o=>{const r=this.filesByType[o];r&&t.append(o,r,r.name)}),Object.keys(this.form).forEach(o=>{"files"!==o&&t.append(o,this.form[o])}),t}mapClientUpdateForm(){let t={agentCode:this.form.id,agentName:this.form.customerName,mobile:this.form.primaryPhoneNumber,cityCode:this.form.cityId,clientGroupId:this.form.clientGroupId,nationalAddress:this.form.nationalAddress,vatNumber:this.form.taxNumber,postalCode:this.form.postalCode,buildingNumber:this.form.buildingNumber,subNumber:this.form.subNumber,district:this.form.district,lng:this.form.lng,lat:this.form.lat,customerSize:this.form.customerSize,commercialRegistrationNumber:this.form.commercialRegistrationNumber,externalPhoto:this.form.externalPhoto?this.form.externalPhoto:"",externalPhotoPath:this.form.externalPhotoPath,commercialRegisterPath:this.form.commercialRegisterPath,municipalLicensePath:this.form.municipalLicensePath,nationalAddressProofPath:this.form.nationalAddressProofPath,ownerIdPath:this.form.ownerIdPath,vatCertificatePath:this.form.vatCertificatePath,dealAgreementPath:this.form.dealAgreementPath};const o=new FormData;return Object.keys(this.filesByType).forEach(r=>{const n=this.filesByType[r];n&&o.append(r,n,n.name)}),Object.keys(t).forEach(r=>{"files"!==r&&o.append(r,t[r])}),o}onNavChange(t){let o=!1;2===t.nextId?(o=this.goInfoNext(),o||t.preventDefault()):3===t.nextId?(o=this.goAddressNext(),o||t.preventDefault()):4===t.nextId&&t.preventDefault()}getUserLocation(){navigator.geolocation?navigator.geolocation.getCurrentPosition(t=>{this.center={lat:t.coords.latitude,lng:t.coords.longitude}},t=>{console.error("Error getting location: ",t)}):console.error("Geolocation not supported by this browser.")}onMapClick(t){}openModal(t,o="lg"){this.modalService.open(t,{centered:!0,size:o})}setCurrentLocation(){navigator.geolocation?navigator.geolocation.getCurrentPosition(t=>{this.center={lat:t.coords.latitude,lng:t.coords.longitude},this.form.lat=this.center.lat,this.form.lng=this.center.lng,this.markerPosition=this.center,this.getAddressFromCoords(this.center.lat,this.center.lng)},t=>{console.error("Geolocation error:",t)}):console.warn("Geolocation is not supported by this browser.")}getAddressFromCoords(t,o){(new google.maps.Geocoder).geocode({location:{lat:t,lng:o}},(v,p)=>{"OK"===p&&v&&v.length>0?this.address=v[0].formatted_address:console.error("Geocoder failed due to:",p)})}viewFile(t){const o=this.filesByType[t];if(o){const r=URL.createObjectURL(o);window.open(r,"_blank")}}static{this.\u0275fac=function(o){return new(o||s)(e.rXU(T.T),e.rXU(C.c$),e.rXU(P.u),e.rXU(I.eD),e.rXU(y.X),e.rXU(h.Bq))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["requestNewCustomer"]],viewQuery:function(o,r){if(1&o&&(e.GBs(u.HF,5),e.GBs(u.XQ,5),e.GBs(u.XQ,5)),2&o){let n;e.mGM(n=e.lsd())&&(r.componentRef=n.first),e.mGM(n=e.lsd())&&(r.directiveRef=n.first),e.mGM(n=e.lsd())&&(r.dropzoneDirective=n.first)}},inputs:{form:"form",isEdit:"isEdit",errors:"errors",showBreadcrumbs:"showBreadcrumbs"},outputs:{OnStepChange:"OnStepChange"},decls:26,vars:10,consts:[["customNav","ngbNav"],["openMap",""],["dropzoneDirective",""],[3,"title","breadcrumbItems",4,"ngIf"],["action","#",1,"checkout-tab"],[1,"row","customer-drop","justify-content-center"],[1,"card","col-12","col-md-8"],[1,"card-body"],[3,"hasProgressBar","fgsType","loaderId"],[1,"step-arrow-nav"],["ngbNav","","role","tablist",1,"nav","nav-pills","custom-nav","nav-justified",3,"navChange","activeIdChange","activeId"],[1,"nav-item",3,"ngbNavItem"],["ngbNavLink","","data-bs-toggle","tab","role","tab","translate","approvals.customerRequest.customerInfo",1,"nav-link","p-2"],["ngbNavContent",""],["ngbNavLink","","data-bs-toggle","tab","role","tab","translate","approvals.customerRequest.nationalAddressData",1,"nav-link","p-2"],["ngbNavLink","","data-bs-toggle","tab","role","tab","translate","approvals.customerRequest.officialDocuments",1,"nav-link","p-2"],["ngbNavLink","","data-bs-toggle","tab","role","tab","translate","approvals.customerRequest.verified",1,"nav-link","p-2"],[1,"modal-body"],[1,"tab-content"],[3,"ngbNavOutlet"],[3,"title","breadcrumbItems"],[1,"row","mt-1","p-1"],[1,"col-12"],["for","notes",1,"w-bold","form-label",3,"click"],["href","javascript:void(0)","translate","approvals.customerRequest.currentLocation",1,"required","link-success","link-offset-2","text-decoration-underline","link-underline-opacity-25","link-underline-opacity-100-hover","fs-4"],[1,"mx-3"],[1,"col-12","col-md-6","my-2"],[1,"form-floating"],["type","text","name","customerName","id","customerName","placeholder"," ",1,"form-control",3,"ngModelChange","ngModel"],["for","customerName","translate","approvals.customerRequest.customerName",1,"required"],["type","number","name","commercialRegistrationNumber","id","commercialRegistrationNumber","placeholder"," ",1,"form-control",3,"ngModelChange","ngModel"],["for","commercialRegistrationNumber","translate","approvals.customerRequest.commercialRegistrationNumber",1,"required"],[1,"col-12","col-md-6","my-3"],["type","number","name","primaryPhoneNumber","id","primaryPhoneNumber","placeholder"," ",1,"form-control",3,"ngModelChange","maxlength","minlength","ngModel"],["for","primaryPhoneNumber","translate","approvals.customerRequest.primaryPhoneNumber",1,"required"],["type","number","name","taxNumber","id","taxNumber","placeholder"," ",1,"form-control",3,"ngModelChange","ngModel"],["for","taxNumber","translate","approvals.customerRequest.taxNumber",1,"required"],["name","clientGroupId","id","clientGroupId","aria-label","Floating label select example",1,"form-select",3,"ngModelChange","ngModel"],[4,"ngFor","ngForOf"],["for","clientGroupId","translate","approvals.customerRequest.clientGroup",1,"required"],["name","customerSize","id","customerSize","aria-label","Floating label select example",1,"form-select",3,"ngModelChange","ngModel"],["for","customerSize","translate","approvals.customerRequest.customerSize",1,"required"],["type","number","name","numberMunicipalLicense","id","numberMunicipalLicense","placeholder"," ",1,"form-control",3,"ngModelChange","ngModel"],["for","numberMunicipalLicense","translate","client.client.numberMunicipalLicense",1,"required"],[1,"col-12","col-md-6","mt-0"],["for","notes","translate","",1,"fw-bold","form-label","required"],[1,"position-relative","d-inline-block","w-100"],[1,"position-absolute","top-100","start-100","translate-middle"],["for","product-image-input","placement","right","ngbTooltip","Select Image",1,"mb-0"],[1,"avatar-xs"],[1,"avatar-title","bg-light","border","rounded-circle","text-muted","cursor-pointer"],[1,"ri-image-fill"],["value","","id","product-image-input","type","file","accept","image/png, image/gif, image/jpeg",1,"form-control","d-none",3,"change"],[1,"avatar-lg","w-100"],[1,"avatar-title","bg-light","rounded"],["id","externalPhotoPath",1,"avatar-md","h-auto",3,"src"],[1,"col-lg-12"],[1,"d-flex","align-items-start","gap-3","mt-3"],["type","button","data-nexttab","pills-bill-address-tab",1,"btn","btn-primary","btn-label","right","ms-auto","nexttab",3,"click"],[1,"ri-arrow-right-line","label-icon","align-middle","fs-16","ms-2","next-btn"],["translate","general.action.next"],["selected","",3,"value"],[1,"row","p-2"],["name","buildingNumber","type","number","id","buildingNumber","placeholder"," ",1,"form-control",3,"ngModelChange","ngModel"],["for","buildingNumber","translate","approvals.customerRequest.buildingNumber",1,"required"],["name","subNumber","type","number","id","subNumber","placeholder"," ",1,"form-control",3,"ngModelChange","ngModel"],["for","subNumber","translate","approvals.customerRequest.subNumber",1,"required"],["name","postalCode","type","number","id","postalCode","placeholder"," ",1,"form-control",3,"ngModelChange","ngModel"],["for","postalCode","translate","approvals.customerRequest.postalCode",1,"required"],["name","district","type","text","id","district","placeholder"," ",1,"form-control",3,"ngModelChange","ngModel"],["for","district","translate","approvals.customerRequest.district",1,"required"],["name","cityId","id","cityId","aria-label","Floating label select example",1,"form-select",3,"ngModelChange","ngModel"],["for","cityId","translate","approvals.customerRequest.city",1,"required"],[1,"hstack","align-items-start","gap-3","mt-4"],["type","button","data-previous","pills-bill-info-tab",1,"btn","btn-light","btn-label","previestab",3,"click"],[1,"ri-arrow-left-line","label-icon","align-middle","fs-16","me-2","pre-btn"],["translate","approvals.customerRequest.customerInfo"],["type","button","data-nexttab","pills-payment-tab",1,"btn","btn-primary","btn-label","right","ms-auto","nexttab",3,"click"],["translate","approvals.customerRequest.chooseDocumentType",1,"mb-3"],[1,"d-flex","gap-2","py-3","flex-wrap"],["class","  position-relative",4,"ngFor","ngForOf"],[1,"dropzone_sec",3,"error","addedFile","config","useDropzoneClass"],[1,"mt-4"],["translate","approvals.customerRequest.uploadedDocument"],[1,"d-flex","align-items-start","py-3"],["type","button","data-previous","pills-bill-address-tab",1,"btn","btn-light","btn-label","previestab",3,"click"],["translate","approvals.customerRequest.nationalAddressData"],["type","button","data-nexttab","pills-finish-tab",1,"btn","btn-primary","btn-label","right","ms-auto","nexttab",3,"click"],[1,"ri-save-line","label-icon","align-middle","fs-16","ms-2"],["translate","general.action.save"],[1,"position-relative"],["type","radio","name","doc-type",1,"btn-check",3,"ngModelChange","id","value","ngModel"],[1,"btn",3,"click","ngClass","for"],[3,"ngClass"],["class","d-flex align-items-center gap-3 my-2",4,"ngIf"],[1,"d-flex","align-items-center","gap-3","my-2"],[1,"ri-file-text-line"],[1,"text-primary","text-decoration-underline","cursor-pointer",3,"click"],[1,"btn","btn-sm","btn-danger",3,"click"],["translate","general.action.delete"],[1,"row","text-center","justify-content-center"],[1,"col-lg-11"],["src","https://cdn.lordicon.com/lupuorrc.json","trigger","loop","colors","primary:#0ab39c,secondary:#405189",2,"width","120px","height","120px"],["translate","approvals.customerRequest.requestSended"],[1,"hstack","justify-content-center","py-3"],["type","button",1,"btn","btn-success",3,"click"],[1,"ri-home-4-line","align-bottom","ms-1"],["translate","approvals.customerRequest.newRequest"],[1,"modal-content"],[1,"modal-header"],["translate","approvals.customerRequest.currentLocation"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","btn-close",1,"btn-close",3,"click"],[1,"modal-body","p-1"],["height","500px","width","100%",3,"mapClick","options","center","zoom"],[3,"position"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","button","data-bs-dismiss","modal","translate","general.action.sure",1,"btn","w-sm","btn-success","fs-6",3,"click"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-danger","fs-6",3,"click"]],template:function(o,r){if(1&o){const n=e.RV6();e.DNE(0,k,2,4,"app-breadcrumbs",3),e.j41(1,"form",4)(2,"div",5)(3,"div",6)(4,"div",7),e.nrm(5,"ngx-ui-loader",8),e.j41(6,"div",9)(7,"ul",10,0),e.bIt("navChange",function(p){return e.eBV(n),e.Njj(r.onNavChange(p))}),e.mxI("activeIdChange",function(p){return e.eBV(n),e.DH7(r.activeTabId,p)||(r.activeTabId=p),e.Njj(p)}),e.j41(9,"li",11),e.nrm(10,"a",12),e.DNE(11,O,54,17,"ng-template",13),e.k0s(),e.j41(12,"li",11),e.nrm(13,"a",14),e.DNE(14,L,30,6,"ng-template",13),e.k0s(),e.j41(15,"li",11),e.nrm(16,"a",15),e.DNE(17,F,15,4,"ng-template",13),e.k0s(),e.j41(18,"li",11),e.nrm(19,"a",16),e.DNE(20,V,8,0,"ng-template",13),e.k0s()()()(),e.j41(21,"div",17)(22,"div",18),e.nrm(23,"div",19),e.k0s()()()()(),e.DNE(24,X,10,4,"ng-template",null,1,e.C5r)}if(2&o){const n=e.sdS(8);e.Y8G("ngIf",r.showBreadcrumbs),e.R7$(5),e.Y8G("hasProgressBar",!1)("fgsType",r.loaderOperationShap)("loaderId",r.operationLoader),e.R7$(2),e.R50("activeId",r.activeTabId),e.R7$(2),e.Y8G("ngbNavItem",1),e.R7$(3),e.Y8G("ngbNavItem",2),e.R7$(3),e.Y8G("ngbNavItem",3),e.R7$(3),e.Y8G("ngbNavItem",4),e.R7$(5),e.Y8G("ngbNavOutlet",n)}},dependencies:[N.YU,N.Sq,N.bT,h.Um,h.X9,h.sy,h.Gx,h.Ri,h.WA,h.m_,c.qT,c.xH,c.y7,c.me,c.Q0,c.wz,c.Fm,c.BC,c.cb,c.xh,c.tU,c.vS,c.cV,C.Mm,I.Cv,x.u6,x.fU,h.md,u.HF,E.m,C.D9],encapsulation:2})}}return s})()}}]);
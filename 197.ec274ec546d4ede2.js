(self.webpackChunkvelzon=self.webpackChunkvelzon||[]).push([[197],{56701:(dt,we,I)=>{"use strict";I.d(we,{g:()=>Ve});var F=I(54438),m=I(62984),M=I(51188),ie=I(3888);let Ve=(()=>{class J{constructor(he,Be,k){this.authservice=he,this.router=Be,this.alertService=k}canActivate(he){return!!this.authservice.permissionMatch(he.data.permission)||(this.alertService.error("general.notAllow.notAllowPageMessage"),this.router.navigate(["/"]),!1)}static{this.\u0275fac=function(Be){return new(Be||J)(F.KVO(m.J),F.KVO(M.Ix),F.KVO(ie.u))}}static{this.\u0275prov=F.jDH({token:J,factory:J.\u0275fac,providedIn:"root"})}}return J})()},56131:(dt,we,I)=>{"use strict";I.d(we,{E:()=>M});var F=I(7673),m=I(99437);class M{constructor(Ve,J,Ae){this.router=Ve,this.BaseService=J,this.alertService=Ae,this.pagination={pageNumber:1,pageSize:10}}resolve(Ve,J){return this.BaseService.get(this.pagination).pipe((0,m.W)(Ae=>(this.router.navigate([""]),this.alertService.error(Ae),(0,F.of)(null))))}}},43197:(dt,we,I)=>{"use strict";I.r(we),I.d(we,{SalesModule:()=>lo});var F=I(60177),m=I(89417),M=I(69005),ie=I(91022),Ve=I(70255),J=I(63789),Ae=I(98982),he=I.n(Ae),Be=I(53978),k=I(8147),L=I(45286),Kt=I(65430),yt=I(41631),U=I(1530),ke=I(72510),P=I(51188),e=I(54438),ct=I(21413),N=I(56977),oe=I(37021),de=I(35335),R=I(45236),w=I(70980),ve=I(99437),De=I(18810),B=I(36158),vr=I(84412),xt=I(67569),Ft=I(45312),Et=I(21626);let We=(()=>{class o extends xt.d{constructor(n){super(n,Ft.c.apiUrl+"OfferOrder/"),this.checkValidationSource=new vr.t(!0),this.checkValidation=this.checkValidationSource.asObservable(),this.salesOrderForm={id:null,clientLocationId:0,clientVisitDate:new Date,clientId:0,notes:"",items:[],discountAmount:0,discountAmountAdd:0,total:0,agent:{},orderLocations:{},discountType:1,discountTypeAdd:1,isPrecentage:!1,isPrecentageAdd:!1,totalAddDiscountType:0,totalAddDiscount:0}}getLookups(){return this.http.get(this.baseUrl+"Lookups")}changStatus(n){return this.http.put(this.baseUrl+"ChangeStatus/",n)}UpdateQuantity(n){return this.http.put(this.baseUrl+"UpdateQuantity",n)}updateTruck(n){return this.http.put(this.baseUrl+"updateTruck",n)}GetTrucks(n){return this.http.post(this.baseUrl+"GetTrucks/",n)}CancelOfferOrder(n){return this.http.post(this.baseUrl+"CancelOfferOrder",n)}GetOfferOrderCount(){return this.http.get(this.baseUrl+"OfferOrderCount")}GetAssignSalesOrder(){return this.http.get(this.baseUrl+"GetAssignSalesOrder")}static{this.\u0275fac=function(s){return new(s||o)(e.KVO(Et.Qq))}}static{this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})(),li=(()=>{class o extends xt.d{constructor(n){super(n,Ft.c.apiUrl+"RequestPersonSales/")}UpdateLimit(n){return this.http.post(this.baseUrl+"UpdateLimit",n)}GetRequestLookups(){return this.http.get(this.baseUrl+"GetRequestLookups")}static{this.\u0275fac=function(s){return new(s||o)(e.KVO(Et.Qq))}}static{this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var pe=I(3888),Se=I(29935),$t=I(38542),Zt=I(70152),Ke=I(23294),en=I(25558),Cr=I(7673),An=I(75922);function tn(o,f){if(1&o&&(e.j41(0,"div",10),e.nrm(1,"i",11),e.j41(2,"div"),e.nrm(3,"strong",12),e.EFF(4),e.k0s(),e.j41(5,"div"),e.nrm(6,"strong",13),e.EFF(7),e.k0s(),e.j41(8,"div"),e.nrm(9,"strong",14),e.EFF(10),e.k0s(),e.j41(11,"div"),e.nrm(12,"strong",15),e.EFF(13),e.k0s(),e.j41(14,"div"),e.nrm(15,"strong",16),e.EFF(16),e.k0s(),e.j41(17,"div"),e.nrm(18,"strong",17),e.EFF(19),e.k0s()()),2&o){const n=e.XpG();e.R7$(4),e.SpI(" : ",n.clientInfo.name,""),e.R7$(3),e.SpI(" : ",n.clientInfo.vatNumber,""),e.R7$(3),e.SpI(" : ",n.clientInfo.mobile,""),e.R7$(3),e.SpI(" : ",n.clientInfo.creditLimit,""),e.R7$(3),e.SpI(" : ",n.clientInfo.nationalAddress,""),e.R7$(3),e.SpI(" : ",n.clientInfo.clientGroupName,"")}}let Bn=(()=>{class o{constructor(n,s,i){this.clientService=n,this.offerOrder=s,this.route=i,this.form={},this.keySelected="",this.notifier=new ct.B,this.mainDelay=100,this.loaderSearchShap=B.cX,this.loaderOperationShap=B.$$,this.operationLoader=B.ZW,this.isEditForm=!1,this.showEdit=!1,this.clients=[],this.paymentTypes=[],this.isClientFound=!0,this.errorMessage="",this.setFormByOrderCode=new e.bkB,this.calacTotal=new e.bkB,this.isOrderEdit=!0,this.loading=!1,this.searchClient=new ct.B,this.clientParam={pageSize:50,pageNumber:1,search:""}}ngOnInit(){this.form=this.offerOrder.salesOrderForm,this.form.clientId&&(this.getClientSearchDropdwon(this.form.clientId),this.getClientInfo(this.form.clientId)),this.searchClient.pipe((0,Zt.B)(300),(0,Ke.F)(),(0,en.n)(n=>this.loadClient(n))).subscribe()}loadClient(n){return this.loading=!0,""==n||null==n?(this.loading=!1,(0,Cr.of)([])):this.getClientDropdwon(n)}getClientDropdwon(n){return this.clientParam.search=n,this.clientParam.pageNumber=1,this.clientService.GetClientSearch(this.clientParam).pipe((0,en.n)(s=>(this.clients=s.data,this.loading=!1,[])))}getClientSearchDropdwon(n){this.clientParam.search=n,this.clientParam.pageNumber=1,this.clientService.GetClientSearch(this.clientParam).subscribe(s=>{this.clients=s.data})}scrollClient(){this.clientParam.pageNumber=this.clientParam.pageNumber+1,this.clientService.GetClientSearch(this.clientParam).subscribe(n=>{this.clients=[...this.clients,...n.data]})}getClientInfo(n){null!=n&&(this.offerOrder.salesOrderForm.clientId=n,this.offerOrder.salesOrderForm.clientVisitDate=this.form.clientVisitDate,this.clientService.GetClientInfo(n).subscribe(s=>{this.form.creditLimit=s.data.creditLimit,this.offerOrder.checkValidationSource.next(!0),this.clientInfo=s.data}))}ngOnDestroy(){}static{this.\u0275fac=function(s){return new(s||o)(e.rXU(An.X),e.rXU(We),e.rXU(P.nX))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-client-info-salse"]],inputs:{form:"form",clients:"clients",isOrderEdit:"isOrderEdit"},outputs:{setFormByOrderCode:"setFormByOrderCode",calacTotal:"calacTotal"},decls:15,vars:17,consts:[[1,"row","mt-4"],[1,"col-12","col-md-8","mb-3"],["for","mobile","translate","",1,"fw-bold","form-label"],["bindLabel","displayName","bindValue","id","required","",3,"scrollToEnd","ngModelChange","virtualScroll","items","typeahead","loading","multiple","ngModel","disabled"],["class","mt-5 alert alert-primary alert-dismissible material-shadow alert-label-icon rounded-label fade show","role","alert",4,"ngIf"],[1,"col-12","col-md-4","mb-3"],["for","name","translate","",1,"fw-bold","form-label"],["name","clientVisitDate","type","text","mwlFlatpickr","","altFormat","d-m-Y H:i",1,"form-control","flatpickr-input",3,"ngModelChange","ngModel","altInput","enableTime","convertModelValue","dateFormat"],[1,"col-12","mb-3"],["rows","3","name","terms","type","text",1,"form-control",3,"ngModelChange","placeholder","ngModel"],["role","alert",1,"mt-5","alert","alert-primary","alert-dismissible","material-shadow","alert-label-icon","rounded-label","fade","show"],[1,"ri-user-smile-line","label-icon"],["translate","sales.salesOrder.clientName"],["translate","sales.salesOrder.vatNumber"],["translate","sales.salesOrder.mobile"],["translate","sales.salesOrder.creditLimit"],["translate","sales.salesOrder.nationalAddress"],["translate","sales.salesOrder.clientGroupName"]],template:function(s,i){1&s&&(e.j41(0,"div",0)(1,"div",1)(2,"label",2),e.EFF(3,"orderManagement.order.clientSearch"),e.k0s(),e.j41(4,"ng-select",3),e.bIt("scrollToEnd",function(){return i.scrollClient()}),e.mxI("ngModelChange",function(h){return e.DH7(i.form.clientId,h)||(i.form.clientId=h),h}),e.bIt("ngModelChange",function(h){return i.getClientInfo(h)}),e.k0s(),e.DNE(5,tn,20,6,"div",4),e.k0s(),e.j41(6,"div",5)(7,"label",6),e.EFF(8,"sales.salesOrder.acutalVisitDate"),e.k0s(),e.j41(9,"input",7),e.mxI("ngModelChange",function(h){return e.DH7(i.form.clientVisitDate,h)||(i.form.clientVisitDate=h),h}),e.k0s()(),e.j41(10,"div",8)(11,"label",6),e.EFF(12,"sales.salesOrder.terms"),e.k0s(),e.j41(13,"textarea",9),e.nI1(14,"translate"),e.mxI("ngModelChange",function(h){return e.DH7(i.form.terms,h)||(i.form.terms=h),h}),e.k0s()()()),2&s&&(e.R7$(4),e.Y8G("virtualScroll",!0)("items",i.clients)("typeahead",i.searchClient)("loading",i.loading)("multiple",!1),e.R50("ngModel",i.form.clientId),e.Y8G("disabled",!i.isOrderEdit),e.R7$(),e.Y8G("ngIf",i.clientInfo),e.R7$(4),e.R50("ngModel",i.form.clientVisitDate),e.Y8G("altInput",!0)("enableTime",!0)("convertModelValue",!0)("dateFormat","d-m-Y H:i"),e.R7$(4),e.Y8G("placeholder",e.bMT(14,15,"sales.salesOrder.termsPlaceholder")),e.R50("ngModel",i.form.terms))},dependencies:[F.bT,m.me,m.BC,m.YS,m.vS,k.Mm,ke.vr,ie.kL,k.D9],encapsulation:2})}}return o})();var Ts=I(25947),vn=I(33121),Ze=I(12260),Rt=I(15084);function $n(o,f){if(1&o){const n=e.RV6();e.qex(0),e.j41(1,"div",17)(2,"div",18)(3,"input",19),e.bIt("change",function(){const i=e.eBV(n).$implicit,l=e.XpG();return e.Njj(l.locationChange(i))}),e.k0s(),e.j41(4,"label",20)(5,"span",21),e.EFF(6),e.k0s(),e.j41(7,"span",22),e.EFF(8),e.k0s()()(),e.j41(9,"div",23)(10,"div")(11,"a",24),e.bIt("click",function(){const i=e.eBV(n).$implicit,l=e.XpG(),h=e.sdS(9);return e.Njj(l.openEditModal(i,h))}),e.nrm(12,"i",25)(13,"span",26),e.k0s()(),e.j41(14,"div")(15,"a",27),e.bIt("click",function(){const i=e.eBV(n).$implicit,l=e.XpG(),h=e.sdS(11);return e.Njj(l.confirm(i.id,h))}),e.nrm(16,"i",28)(17,"span",29),e.k0s()()()(),e.bVm()}if(2&o){const n=f.$implicit;e.R7$(3),e.Mz_("id","S",n.id,""),e.Y8G("checked",n.isSelected),e.R7$(),e.Mz_("for","S",n.id,""),e.R7$(2),e.Lme(" ",n.cityName,"- ",n.name,""),e.R7$(2),e.SpI(" ",n.address,"")}}function Xn(o,f){1&o&&(e.j41(0,"span",58),e.EFF(1,"general.action.register "),e.k0s())}function di(o,f){1&o&&(e.j41(0,"span",58),e.EFF(1,"general.action.edit "),e.k0s())}function mt(o,f){1&o&&(e.j41(0,"div",59),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function Cn(o,f){1&o&&(e.j41(0,"div",59),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function js(o,f){if(1&o){const n=e.RV6();e.j41(0,"div",30)(1,"div",31)(2,"h4",32),e.DNE(3,Xn,2,0,"span",33)(4,di,2,0,"span",33),e.k0s(),e.j41(5,"button",34),e.bIt("click",function(){const i=e.eBV(n).$implicit;return e.Njj(i.dismiss("Cross click"))}),e.k0s()(),e.j41(6,"div",35),e.nrm(7,"ngx-ui-loader",36),e.j41(8,"form",37,2),e.bIt("submit",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.OnSubmit())}),e.j41(10,"div",38),e.nrm(11,"label",39),e.j41(12,"ng-select",40,3),e.nI1(14,"translate"),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG();return e.DH7(l.formEdit.cityCode,i)||(l.formEdit.cityCode=i),e.Njj(i)}),e.k0s()(),e.j41(15,"div",38),e.nrm(16,"label",41),e.j41(17,"input",42,4),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG();return e.DH7(l.formEdit.name,i)||(l.formEdit.name=i),e.Njj(i)}),e.k0s(),e.DNE(19,mt,2,0,"div",43),e.k0s(),e.j41(20,"div",38),e.nrm(21,"label",44),e.j41(22,"textarea",45,5),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG();return e.DH7(l.formEdit.address,i)||(l.formEdit.address=i),e.Njj(i)}),e.k0s(),e.DNE(24,Cn,2,0,"div",43),e.k0s(),e.j41(25,"div",38),e.nrm(26,"label",46),e.j41(27,"input",47,6),e.bIt("change",function(i){e.eBV(n);const l=e.XpG();return e.Njj(l.onUrlChange(i))}),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG();return e.DH7(l.formEdit.mapURL,i)||(l.formEdit.mapURL=i),e.Njj(i)}),e.k0s()(),e.j41(29,"div",48)(30,"div",49),e.nrm(31,"label",50),e.j41(32,"input",51,7),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG();return e.DH7(l.formEdit.lat,i)||(l.formEdit.lat=i),e.Njj(i)}),e.k0s()(),e.j41(34,"div",49),e.nrm(35,"label",52),e.j41(36,"input",53,8),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG();return e.DH7(l.formEdit.lng,i)||(l.formEdit.lng=i),e.Njj(i)}),e.k0s()()(),e.j41(38,"div",54)(39,"button",55),e.nrm(40,"i",56)(41,"span",57),e.k0s()()()()()}if(2&o){const n=e.sdS(9),s=e.sdS(18),i=e.sdS(23),l=e.XpG();e.R7$(3),e.Y8G("ngIf",!l.isEditForm),e.R7$(),e.Y8G("ngIf",l.isEditForm),e.R7$(3),e.Y8G("hasProgressBar",!1)("fgsType",l.loaderOperationShap)("loaderId","locationOperation"),e.R7$(5),e.FS9("placeholder",e.bMT(14,17,"orderManagement.order.cityName")),e.R50("ngModel",l.formEdit.cityCode),e.Y8G("items",l.cities)("multiple",!1),e.R7$(5),e.R50("ngModel",l.formEdit.name),e.R7$(2),e.Y8G("ngIf",s.invalid&&s.touched),e.R7$(3),e.R50("ngModel",l.formEdit.address),e.R7$(2),e.Y8G("ngIf",i.invalid&&i.touched),e.R7$(3),e.R50("ngModel",l.formEdit.mapURL),e.R7$(5),e.R50("ngModel",l.formEdit.lat),e.R7$(4),e.R50("ngModel",l.formEdit.lng),e.R7$(3),e.Y8G("disabled",!n.valid)}}function kt(o,f){if(1&o){const n=e.RV6();e.j41(0,"delete-modal",60),e.bIt("deleteConfirm",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.DeleteConfirm())})("dismiss",function(){const i=e.eBV(n).$implicit;return e.Njj(i.dismiss())}),e.k0s()}}let Is=(()=>{class o{constructor(n,s,i,l,h,g,te,me){this.modalService=n,this.baseService=s,this.alertService=i,this.ngxLoader=l,this.whatsupService=h,this.whatsAppMessagesService=g,this.cityService=te,this.offerOrder=me,this.submitted=!1,this.form={},this.mainDelay=20,this.notifier=new ct.B,this.operationLoader=B.ZW,this.isEditForm=!1,this.loaderOperationShap=B.$$,this.isLoad=!1,this.formEdit={},this.cities=[],this.idSelected=0,this.isOrderEdit=!0,this.modalRefs={}}ngOnInit(){this.form=this.offerOrder.salesOrderForm,this.form.clientId&&this.checkLocation(),this.form.clientLocationId&&this.checkSelected(this.form.clientLocationId),this.GetCities()}confirm(n,s){this.idSelected=n,this.modalService.open(s,{centered:!0})}openModal(n){this.ngxLoader.stopLoader(this.operationLoader),this.submitted=!1,this.modalRefs=this.modalService.open(n,{size:"md",centered:!0})}openEditModal(n,s){this.submitted=!1,this.formEdit=n,this.isEditForm=!0,this.modalRefs=this.modalService.open(s,{size:"md",centered:!0})}changeActiveTab(n){this.nav.select(n)}GetCities(){this.cityService.getDropDown().subscribe(n=>{this.cities=n.data},n=>{console.log(n)})}registerEntity(n=!1){this.ngxLoader.startLoader("locationOperation");let s=this.mapRegisterForm(this.formEdit);s.isSend=n,this.baseService.AddLocation(s).pipe((0,oe.O)(),(0,de.c)(this.mainDelay),(0,R.Z)(),(0,N.Q)(this.notifier),(0,w.j)(()=>this.ngxLoader.stopLoader("locationOperation")),(0,ve.W)(i=>(0,De.$)(i))).subscribe(i=>{i.success?(this.alertService.success(),this.modalRefs.dismiss(),this.refresh()):this.alertService.error("general.message."+i.message)},i=>{this.alertService.error("general.message."+i)})}editEntity(n=!1){this.ngxLoader.startLoader("locationOperation");let s=this.mapForm(this.formEdit);s.isSend=n,this.baseService.EditLocation(s).pipe((0,oe.O)(),(0,de.c)(this.mainDelay),(0,R.Z)(),(0,N.Q)(this.notifier),(0,w.j)(()=>this.ngxLoader.stopLoader("locationOperation"))).subscribe(i=>{i.success?(this.alertService.success(),this.modalRefs.dismiss(),this.refresh()):this.alertService.error("general.message."+i.message)},i=>{this.alertService.error("general.message."+i)})}mapForm(n){let s={...n};return s.agentCode=this.form.clientId,s.cityCode=s.cityCode,s.agentName="",s.mobile="",s.mapURL=s.mapURL,s.lat=s.lat?s.lat.toString():"",s.lng=s.lng?s.lng.toString():"",s}mapRegisterForm(n){let s={...n};return s.id=0,s.cityCode=s.cityCode,s.agentName="",s.mobile="",s.agentCode=this.form.clientId,s.mapURL=s.mapURL,s.lat=s.lat,s.lng=s.lng,s}submitFunished(){this.alertService.success(),this.modalService?.dismissAll()}OnSubmit(n=!1){this.ngxLoader.startLoader(this.operationLoader),!0===this.isEditForm?this.editEntity(n):this.registerEntity(n)}getFromClient(){this.form.agent.mobile||this.alertService.error("orderManagement.order.mustEnterNumber"),this.isLoad=!0,this.whatsupService.GetLocationFromClient(this.form.agent.mobile).pipe((0,N.Q)(this.notifier),(0,w.j)(()=>this.isLoad=!1)).subscribe(n=>{n.success?this.alertService.success("orderManagement.order.successSendLocation"):this.alertService.error("orderManagement.order.failSendLocation")},()=>{this.alertService.error("orderManagement.order.failSendLocation")})}DeleteConfirm(){this.baseService.DeleteLocation(this.idSelected).pipe((0,oe.O)(),(0,de.c)(this.mainDelay),(0,R.Z)(),(0,N.Q)(this.notifier),(0,w.j)(()=>this.ngxLoader.stopLoader("deleteLoader"))).subscribe(n=>{if(n.success){const s=this.form.locations.findIndex(i=>i.id===this.idSelected);-1!==s&&this.form.locations.splice(s,1),this.alertService.success(),this.modalService.dismissAll()}else this.alertService.error("general.message."+n)},()=>{this.alertService.error()})}refresh(){this.baseService.clientNumber.next(!0)}locationChange(n){this.form.clientLocationId=n.id;let s=this.form.locations.find(i=>i.id==n.id);s.isSelected=!s.isSelected,this.offerOrder.salesOrderForm.clientLocationId=this.form.clientLocationId}checkSelected(n){this.offerOrder.checkValidationSource.next(!0),this.form.locations.find(i=>i.id==n).isSelected=!0}checkLocation(){this.offerOrder.checkValidationSource.next(!0),this.baseService.GetClientLocations(this.form.clientId).subscribe(n=>{this.form.locations=n.data})}ngOnDestroy(){this.notifier.next(),this.notifier.complete()}onUrlChange(n){let l=new URL(n.target.value).searchParams.get("q");if(l){let[h,g]=l.split(",").map(Number);this.formEdit.lat=h,this.formEdit.lng=g}}static{this.\u0275fac=function(s){return new(s||o)(e.rXU(M.Bq),e.rXU(An.X),e.rXU(pe.u),e.rXU(U.eD),e.rXU(Ts.A),e.rXU(vn.Q),e.rXU(Ze.h),e.rXU(We))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["client-location-salse"]],viewQuery:function(s,i){if(1&s&&e.GBs(M.X9,5),2&s){let l;e.mGM(l=e.lsd())&&(i.nav=l.first)}},inputs:{form:"form",isOrderEdit:"isOrderEdit"},features:[e.Jv_([M.X9])],decls:12,vars:2,consts:[["content",""],["deleteModal",""],["formEntity","ngForm"],["cityCode","ngModel"],["name","ngModel"],["address","ngModel"],["mapURL","ngModel"],["lat","ngModel"],["lng","ngModel"],[1,"mt-4"],[1,"d-flex","align-items-center","mb-2"],[1,"flex-grow-1"],["translate","orderManagement.order.savedAddress",1,"fs-15","mb-0"],[1,"flex-shrink-0"],["type","button","translate","orderManagement.order.sendToClient",1,"btn","btn-sm","btn-success","mb-1",3,"click","disabled"],[1,"row","gy-3"],[4,"ngFor","ngForOf"],[1,"col-lg-4","col-sm-6"],[1,"form-check","card-radio"],["name","location","type","radio",1,"form-check-input",3,"change","id","checked"],[1,"form-check-label",3,"for"],[1,"mb-4","fw-bold","d-block","text-muted","text-uppercase"],[1,"text-muted","fw-normal","text-wrap","mb-1","d-block"],[1,"d-flex","flex-wrap","p-2","py-1","bg-light","rounded-bottom","border","mt-n1"],["href","javascript:void(0);","data-bs-toggle","modal","data-bs-target","#addAddressModal",1,"d-block","text-body","p-1","px-2",3,"click"],[1,"ri-pencil-fill","text-muted","align-bottom","me-1"],["translate","general.action.edit"],["href","javascript:void(0);","data-bs-toggle","modal","data-bs-target","#removeItemModal",1,"d-block","text-body","p-1","px-2",3,"click"],[1,"ri-delete-bin-fill","text-muted","align-bottom","me-1"],["translate","general.action.delete"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["class","fw-bold fs-4","translate","",4,"ngIf"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"hasProgressBar","fgsType","loaderId"],[3,"submit"],[1,"mb-1"],["for","name","translate","orderManagement.order.cityName",1,"required","fw-bold","form-label"],["name","cityCode","id","cityCode","bindValue","code","bindLabel","name",3,"ngModelChange","ngModel","placeholder","items","multiple"],["for","name","translate","orderManagement.order.name",1,"required","fw-bold","form-label"],["InputTirmFilter","","name","name","type","text","id","name","required","",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],["for","address","translate","orderManagement.order.address",1,"fw-bold","form-label"],["rows","2","InputTirmFilter","","name","address","type","text","id","address",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["for","mapURL","translate","orderManagement.order.mapURL",1,"fw-bold","form-label"],["InputTirmFilter","","name","mapURL","type","text","id","mapURL",1,"form-control","fs-6",3,"change","ngModelChange","ngModel"],[1,"row","my-2"],[1,"col-12","col-md-6"],["for","lat","translate","orderManagement.order.lat",1,"fw-bold","form-label"],["disabled","","InputTirmFilter","","name","lat","type","text","id","lat",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["for","lng","translate","orderManagement.order.lng",1,"fw-bold","form-label"],["disabled","","InputTirmFilter","","name","lng","type","text","id","lng",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,"text-center"],["type","submit","type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],["translate","",1,"fw-bold","fs-4"],["translate","",1,"text-danger","text-center"],[3,"deleteConfirm","dismiss"]],template:function(s,i){if(1&s){const l=e.RV6();e.j41(0,"div",9)(1,"div",10)(2,"div",11),e.nrm(3,"h5",12),e.k0s(),e.j41(4,"div",13)(5,"button",14),e.bIt("click",function(){e.eBV(l);const g=e.sdS(9);return e.Njj(i.openModal(g))}),e.k0s()()(),e.j41(6,"div",15),e.DNE(7,$n,18,8,"ng-container",16),e.k0s()(),e.DNE(8,js,42,19,"ng-template",null,0,e.C5r)(10,kt,1,0,"ng-template",null,1,e.C5r)}2&s&&(e.R7$(5),e.Y8G("disabled",i.isLoad),e.R7$(2),e.Y8G("ngForOf",i.form.locations))},dependencies:[F.Sq,F.bT,m.qT,m.me,m.BC,m.cb,m.YS,m.vS,m.cV,k.Mm,Se.m,ke.vr,U.Cv,Rt.w,k.D9],encapsulation:2})}}return o})();function Sn(o,f){if(1&o&&(e.j41(0,"h3",9),e.nrm(1,"span",10),e.j41(2,"a",11),e.EFF(3),e.k0s()()),2&o){const n=e.XpG();e.R7$(3),e.SpI("#SO#",n.orderCode,"")}}let pt=(()=>{class o{constructor(){this.form={},this.orderCode=0,this.statusOrder=0,this.newOrder=new e.bkB,this.editOrderActiveTab=new e.bkB}ngOnDestroy(){}ngOnInit(){}newOrderAgain(){this.newOrder.next(!0)}static{this.\u0275fac=function(s){return new(s||o)}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-finish-order-salse"]],inputs:{form:"form",orderCode:"orderCode",statusOrder:"statusOrder"},outputs:{newOrder:"newOrder",editOrderActiveTab:"editOrderActiveTab"},decls:9,vars:1,consts:[[1,"text-center","py-5"],[1,"mb-4"],["src","https://cdn.lordicon.com/lupuorrc.json","trigger","loop","colors","primary:#0ab39c,secondary:#405189",2,"width","120px","height","120px"],["translate","orderManagement.order.orderSaveSuccess"],["class","fw-semibold",4,"ngIf"],[1,"d-flex","align-items-start","gap-3","mt-4"],["type","button","data-nexttab","pills-finish-tab",1,"btn","btn-primary","btn-label","right","ms-auto","nexttab",3,"click"],[1,"ri-chat-new-line","label-icon","align-middle","fs-16","ms-2"],["translate","orderManagement.order.newOrderAgain"],[1,"fw-semibold"],["translate","orderManagement.order.orderCode"],["routerLink","/ecommerce/order-details",1,"text-decoration-underline"]],template:function(s,i){1&s&&(e.j41(0,"div",0)(1,"div",1),e.nrm(2,"lord-icon",2),e.k0s(),e.nrm(3,"h5",3),e.DNE(4,Sn,4,1,"h3",4),e.k0s(),e.j41(5,"div",5)(6,"button",6),e.bIt("click",function(){return i.newOrderAgain()}),e.nrm(7,"i",7)(8,"span",8),e.k0s()()),2&s&&(e.R7$(4),e.Y8G("ngIf",10==i.statusOrder))},dependencies:[F.bT,k.Mm,P.Wk],encapsulation:2})}}return o})();var Tn=I(33826),Un=I(34618),ys=I(96402),jn=I(84205);const Pn=o=>[o];function In(o,f){if(1&o){const n=e.RV6();e.j41(0,"div",7)(1,"div",8),e.nrm(2,"div",9)(3,"div",10)(4,"div",11)(5,"div",12)(6,"div",13)(7,"div",14),e.k0s(),e.j41(8,"div",15)(9,"div",16)(10,"ng-select",17),e.bIt("change",function(i){const l=e.eBV(n).$index,h=e.XpG();return e.Njj(h.itemSelected(i,l))}),e.mxI("ngModelChange",function(i){const l=e.eBV(n).$implicit;return e.DH7(l.itemId,i)||(l.itemId=i),e.Njj(i)}),e.k0s()(),e.j41(11,"div",18)(12,"ng-select",17),e.bIt("change",function(i){const l=e.eBV(n).$index,h=e.XpG();return e.Njj(h.unitSelect(i,l))}),e.mxI("ngModelChange",function(i){const l=e.eBV(n).$implicit;return e.DH7(l.unitId,i)||(l.unitId=i),e.Njj(i)}),e.k0s()(),e.j41(13,"div",19)(14,"input",20),e.mxI("ngModelChange",function(i){const l=e.eBV(n).$implicit;return e.DH7(l.quantity,i)||(l.quantity=i),e.Njj(i)}),e.bIt("ngModelChange",function(i){const l=e.eBV(n).$index,h=e.XpG();return e.Njj(h.quantitySelect(i,l))}),e.k0s()(),e.j41(15,"div",19)(16,"div",21)(17,"span"),e.EFF(18),e.k0s()()(),e.j41(19,"div",18)(20,"ng-select",22),e.bIt("ngModelChange",function(i){const l=e.eBV(n).$index,h=e.XpG();return e.Njj(h.discountSelect(i,l,2))}),e.mxI("ngModelChange",function(i){const l=e.eBV(n).$implicit;return e.DH7(l.discountType,i)||(l.discountType=i),e.Njj(i)}),e.k0s()(),e.j41(21,"div",18)(22,"input",23),e.bIt("ngModelChange",function(i){const l=e.eBV(n).$index,h=e.XpG();return e.Njj(h.discountSelect(i,l))}),e.mxI("ngModelChange",function(i){const l=e.eBV(n).$implicit;return e.DH7(l.discount,i)||(l.discount=i),e.Njj(i)}),e.k0s()()(),e.j41(23,"div",24)(24,"div",25)(25,"div",26)(26,"div",27)(27,"div",21)(28,"span",28),e.bIt("click",function(){const i=e.eBV(n).$index,l=e.XpG();return e.Njj(l.deleteRow(i))}),e.nrm(29,"i",29),e.k0s()()()(),e.j41(30,"div",30)(31,"div",31),e.nrm(32,"div",32),e.j41(33,"h5",33)(34,"span",34),e.EFF(35),e.k0s(),e.j41(36,"span"),e.EFF(37),e.nI1(38,"translate"),e.k0s()()()()()()()}if(2&o){const n=f.$implicit,s=f.$index,i=e.XpG();e.R7$(10),e.Y8G("name","itemId"+s)("items",i.products),e.R50("ngModel",n.itemId),e.R7$(2),e.Y8G("name","unitId"+e.eq3(18,Pn,s))("items",n.units),e.R50("ngModel",n.unitId),e.R7$(2),e.Y8G("name","quantity"+e.eq3(20,Pn,s)),e.R50("ngModel",n.quantity),e.R7$(4),e.SpI(" ",n.price||0," "),e.R7$(2),e.Y8G("name","discountType"+e.eq3(22,Pn,s))("items",i.discountTypes),e.R50("ngModel",n.discountType),e.R7$(2),e.Y8G("name","discount"+e.eq3(24,Pn,s)),e.R50("ngModel",n.discount),e.R7$(13),e.JRh(n.net||0),e.R7$(2),e.JRh(e.bMT(38,16,"orderManagement.order.currancy"))}}let nn=(()=>{class o{constructor(n,s,i,l,h,g,te,me,ge){this.routerActive=n,this.translateService=s,this.baseService=i,this.alertService=l,this.ngxLoader=h,this.storeUnitsService=g,this.serviceService=te,this.clientGroupsService=me,this.offerOrder=ge,this.form={},this.selectedServices=[],this.notifier=new ct.B,this.mainDelay=100,this.lang=this.translateService.currentLang,this.loaderSearchShap=B.cX,this.loaderOperationShap=B.$$,this.operationLoader=B.ZW,this.isEditForm=!1,this.showEdit=!1,this.statusEnum=[{nameAr:"\u0645\u0639\u0644\u0642",nameEn:"Pending",id:1},{nameAr:"\u0641\u064a \u062a\u064e\u0642\u064e\u062f\u0645",nameEn:"inProgress",id:1},{nameAr:"\u0645\u0646\u062a\u0647\u064a",nameEn:"finished",id:1}],this.clientGroups=[],this.clients=[],this.clientLocation=[],this.items=[],this.itemGroups=[],this.products=[],this.units=[],this.services=[],this.currentLang=this.translateService.currentLang,this.subtotal=0,this.total=0,this.serverImage=Ft.c.mediaUrl,this.CalcTotal=new e.bkB,this.discountTypes=[{id:1,name:"Cost"},{id:2,name:"Precentage"}],this.getUnits(),this.getProducts(),this.discountTypes.forEach(K=>{K.name=this.getTranslationText("sales.salesOrder."+K.name)})}addRow(){this.form.items.push({itemGroup:null,itemName:"",itemId:0,unit:null,quantity:1,priceUnit:null,discount:0,discountType:1,net:0}),this.offerOrder.checkValidationSource.next(!0)}deleteRow(n){this.form.items.splice(n,1),this.checkTotal(),this.offerOrder.checkValidationSource.next(!0)}confirmForm(){this.form.items=this.form.items}calculate(n){let s=0,i=0;s=this.products.filter(l=>l.id===this.form.items[n].itemId)[0].price,this.form.items[n].priceUnit=s,i=s*this.form.items[n].quantity,this.form.items[n].net=i,this.confirmForm()}ngOnDestroy(){this.offerOrder.salesOrderForm.items=this.form.items,this.notifier.next(),this.notifier.complete()}getUnits(){this.storeUnitsService.getDropDown().subscribe(n=>{this.units=n.data})}getProducts(){this.serviceService.getItemDropDown().subscribe(n=>{this.products=n.data,console.log(n)})}getClientGroups(){this.clientGroupsService.getDropDown().subscribe(n=>{this.products=n.data,console.log(n)})}ngOnInit(){}updatePrice(n){const s=this.form.orderServices.find(i=>i.serviceCode===n.code);s.quantity=n.quantity,s.price=n.price}checkTotal(){this.CalcTotal.next(!0)}deleteService(n){this.form.orderServices.splice(n,1)}deletePayment(n){this.form.orderPayments.splice(n,1)}resetServiceForm(){let n=this.form.formServices;n.serviceCode=void 0,n.price=null,n.notes=null}resetPaymentForm(){let n=this.form.formPayment;n.paymentTypeCode=null,n.value=null,n.attachRecietPath=null,n.fileName=null}configRoute(){this.routerActive.data.pipe((0,N.Q)(this.notifier)).subscribe(n=>{let s=n.data.data;s&&(this.isEditForm=!0,this.form=s,"Proposed"==s.leadsTypes?this.form.leadsTypes=1:"Inquiry"==s.leadsTypes&&(this.form.leadsTypes=2))},()=>{this.alertService.error()})}getTranslationText(n){let s="";return this.translateService.get(n).pipe((0,N.Q)(this.notifier)).subscribe(i=>{s=i}),s}onTimeSelected(n){this.form.orderTeams=n}itemSelected(n,s){n&&(this.form.items[s].unitId=n.units.length>0?n.units[0].id:null,this.form.items[s].units=n.units,this.form.items[s].price=n.price,this.form.items[s].itemName=n.name,this.quantitySelect(this.form.items[s].quantity,s),this.checkTotal(),this.offerOrder.checkValidationSource.next(!0))}unitSelect(n,s){}quantitySelect(n,s){n&&(n<=0&&(n=1),this.form.items[s].quantity=parseInt(n),this.form.items[s].net=this.form.items[s].price*this.form.items[s].quantity,this.discountSelect(this.form.items[s].discount,s),this.checkTotal())}discountSelect(n,s,i=1){if(n){(n=parseInt(n))<=0&&(this.form.items[s].discount=0),1==i&&(this.form.items[s].discount=n);let l=0;1==this.form.items[s].discountType?l=this.form.items[s].discount:(l=this.form.items[s].price*this.form.items[s].quantity*this.form.items[s].discount/100,l=+l.toFixed(2)),this.form.items[s].net=this.form.items[s].price*this.form.items[s].quantity-l,this.form.items[s].net=this.form.items[s].net.toFixed(2),this.checkTotal()}}static{this.\u0275fac=function(s){return new(s||o)(e.rXU(P.nX),e.rXU(k.c$),e.rXU(Tn.Q),e.rXU(pe.u),e.rXU(U.eD),e.rXU(Un.S),e.rXU(ys.N),e.rXU(jn.t),e.rXU(We))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-order-services-sale"]],inputs:{form:"form"},outputs:{CalcTotal:"CalcTotal"},decls:11,vars:3,consts:[[1,"service-container"],[1,"mt-2"],[1,"mt-3"],[1,"my-2","d-flex","justify-content-start","align-items-center"],[1,"mb-0","me-3"],[1,"cursor-pointer","p-2","mb-0","badge","bg-success-subtle","text-success",3,"click"],[1,"ri-add-fill"],[1,"card","card-item","p-1",2,"overflow","visible"],[1,"card-header","row","my-3","p-0"],["translate","sales.salesRequests.itemName",1,"col-12","col-md-4","text-center"],["translate","sales.salesRequests.unit",1,"col-12","col-md-2","text-center"],["translate","sales.salesRequests.quantity",1,"col-12","col-md-1","text-center"],["translate","sales.salesRequests.priceUnit",1,"col-12","col-md-1","text-center"],["translate","sales.salesRequests.discountType",1,"col-12","col-md-2","text-center"],["translate","sales.salesRequests.discount",1,"col-12","col-md-2","text-center"],[1,"card-body","row","p-1"],[1,"col-12","col-md-4"],["bindValue","id","bindLabel","name",2,"width","100%",3,"change","ngModelChange","name","items","ngModel"],[1,"col-12","col-md-2"],[1,"col-12","col-md-1"],["InputTirmFilter","","type","text","id","quantity",1,"form-control","fs-6",3,"ngModelChange","name","ngModel"],[1,"h-100","d-flex","align-items-center"],["bindValue","id","bindLabel","name",2,"width","100%",3,"ngModelChange","name","items","ngModel"],["InputTirmFilter","","type","text","id","discount",1,"form-control","fs-6",3,"ngModelChange","name","ngModel"],[1,"card-footer","p-2"],[1,"row","align-items-center","gy-3"],[1,"col-sm"],[1,"d-flex","flex-wrap","my-n1"],[1,"cursor-pointer","mb-0","p-2","badge","bg-danger-subtle","text-danger",3,"click"],[1,"ri-delete-bin-2-fill"],[1,"col-sm-auto"],[1,"d-flex","align-items-center","gap-2","text-muted"],["translate","sales.salesRequests.net"],[1,"mb-0","text-danger","fs-6"],[1,"product-line-price"]],template:function(s,i){1&s&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4),e.EFF(5),e.nI1(6,"translate"),e.k0s(),e.j41(7,"span",5),e.bIt("click",function(){return i.addRow()}),e.nrm(8,"i",6),e.k0s()(),e.Z7z(9,In,39,26,"div",7,e.Vm6),e.k0s()()()),2&s&&(e.R7$(5),e.JRh(e.bMT(6,1,"sales.salesRequests.items")),e.R7$(4),e.Dyx(i.form.items))},dependencies:[m.me,m.BC,m.vS,k.Mm,Se.m,ke.vr,k.D9],encapsulation:2})}}return o})();const Sr=(o,f)=>({"border-right: solid #E5E5E6 2px":o,"border-left: solid #E5E5E6 2px":f}),Tr=o=>({"border-bottom:1px solid #E5E5E6;":o});function jr(o,f){if(1&o){const n=e.RV6();e.j41(0,"app-client-info-salse",63),e.bIt("calacTotal",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.checkTotal())})("setFormByOrderCode",function(i){e.eBV(n);const l=e.XpG();return e.Njj(l.setFormByOrderCode(i))}),e.k0s()}if(2&o){const n=e.XpG();e.Y8G("isOrderEdit",n.isOrderEdit)("isInner",n.isInner)("form",n.form)}}function Ir(o,f){if(1&o&&e.nrm(0,"client-location-salse",64),2&o){const n=e.XpG();e.Y8G("isOrderEdit",n.isOrderEdit)("form",n.form)}}function yr(o,f){if(1&o){const n=e.RV6();e.j41(0,"app-order-services-sale",65),e.bIt("CalcTotal",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.checkTotal())}),e.k0s()}if(2&o){const n=e.XpG();e.Y8G("isOrderEdit",n.isOrderEdit)("form",n.form)}}function xr(o,f){if(1&o){const n=e.RV6();e.j41(0,"app-finish-order-salse",66),e.bIt("editOrderActiveTab",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.editOrder())})("newOrder",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.newOrder())}),e.k0s()}if(2&o){const n=e.XpG();e.Y8G("statusOrder",n.statusOrder)("orderCode",n.orderCode)("form",n.form)}}function Fr(o,f){if(1&o){const n=e.RV6();e.j41(0,"span",67)(1,"div",68)(2,"button",69),e.nrm(3,"i",70)(4,"span",71),e.k0s(),e.j41(5,"ul",72)(6,"li",73),e.bIt("click",function(){e.eBV(n);const i=e.XpG(),l=e.sdS(138);return e.Njj(i.openModalRequest(l))}),e.j41(7,"span",74),e.nrm(8,"i",75)(9,"span",76),e.k0s()()()()()}}function Rr(o,f){if(1&o){const n=e.RV6();e.qex(0),e.j41(1,"tr",79)(2,"td",80)(3,"div",81)(4,"div",82)(5,"span",83),e.EFF(6),e.k0s(),e.j41(7,"span")(8,"small",84),e.EFF(9),e.k0s(),e.j41(10,"small",85),e.EFF(11),e.nI1(12,"translate"),e.k0s()()(),e.j41(13,"div",86)(14,"div",87)(15,"button",88),e.bIt("click",function(){const i=e.eBV(n).$implicit,l=e.XpG(2);return e.Njj(l.decrement(i))}),e.EFF(16,"\u2013 "),e.k0s(),e.j41(17,"input",89),e.bIt("change",function(i){const l=e.eBV(n).$implicit,h=e.XpG(2);return e.Njj(h.quantityChange(i,l))}),e.k0s(),e.j41(18,"button",90),e.bIt("click",function(){const i=e.eBV(n).$implicit,l=e.XpG(2);return e.Njj(l.increment(i))}),e.EFF(19,"+ "),e.k0s()()(),e.j41(20,"div",91),e.EFF(21),e.nI1(22,"translate"),e.j41(23,"i",92),e.bIt("click",function(){const i=e.eBV(n).index,l=e.XpG(2);return l.removeService(i),e.Njj(l.checkTotal())}),e.k0s()()()()(),e.bVm()}if(2&o){const n=f.$implicit,s=f.index,i=e.XpG(2);e.R7$(),e.Y8G("ngStyle",e.eq3(14,Tr,s===i.form.items.length-1)),e.R7$(5),e.JRh(s+1),e.R7$(3),e.SpI(" ",n.itemName," "),e.R7$(2),e.Lme(" ",n.price," ",e.bMT(12,10,"orderManagement.order.currancy")," "),e.R7$(6),e.Mz_("id","cart-",n.code,""),e.FS9("value",n.quantity),e.R7$(4),e.Lme(" ",n.price*n.quantity-n.discount," ",e.bMT(22,12,"orderManagement.order.currancy")," ")}}function kr(o,f){if(1&o&&(e.qex(0),e.j41(1,"h5",77),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.DNE(4,Rr,24,16,"ng-container",78),e.bVm()),2&o){const n=e.XpG();e.R7$(2),e.SpI(" ",e.bMT(3,2,"orderManagement.order.clientServices")," "),e.R7$(2),e.Y8G("ngForOf",n.form.items)}}function xs(o,f){1&o&&(e.j41(0,"tr")(1,"td",93),e.EFF(2),e.nI1(3,"translate"),e.k0s()()),2&o&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"orderManagement.order.noServices")," "))}function Fs(o,f){1&o&&(e.j41(0,"tr")(1,"td",94),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"td",95),e.EFF(5," 0 "),e.k0s()()),2&o&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"orderManagement.order.ServicePrice")," "))}function Rs(o,f){1&o&&(e.j41(0,"div",112),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function mi(o,f){if(1&o){const n=e.RV6();e.j41(0,"div",96)(1,"div",97)(2,"h4",98),e.nrm(3,"span",76),e.k0s(),e.j41(4,"button",99),e.bIt("click",function(){const i=e.eBV(n).$implicit;return e.Njj(i.dismiss("Cross click"))}),e.k0s()(),e.j41(5,"div",100),e.nrm(6,"ngx-ui-loader",101),e.j41(7,"form",102,0),e.bIt("submit",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.OnRequestSubmit())}),e.j41(9,"div",103)(10,"label",104),e.EFF(11,"sales.clientCollection.cost"),e.k0s(),e.j41(12,"input",105,5),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG();return e.DH7(l.formRequest.cost,i)||(l.formRequest.cost=i),e.Njj(i)}),e.k0s(),e.DNE(14,Rs,2,0,"div",106),e.k0s(),e.j41(15,"div",103)(16,"label",107),e.EFF(17,"sales.clientCollection.notes"),e.k0s(),e.j41(18,"textarea",108,3),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG();return e.DH7(l.formRequest.notes,i)||(l.formRequest.notes=i),e.Njj(i)}),e.k0s()(),e.j41(20,"div",109)(21,"button",110),e.nrm(22,"i",33)(23,"span",111),e.k0s()()()()()}if(2&o){const n=e.sdS(8),s=e.sdS(13),i=e.XpG();e.R7$(6),e.Y8G("hasProgressBar",!1)("fgsType",i.loaderOperationShap)("loaderId",i.operationLoader),e.R7$(6),e.R50("ngModel",i.formRequest.cost),e.R7$(2),e.Y8G("ngIf",s.invalid&&s.touched),e.R7$(4),e.R50("ngModel",i.formRequest.notes),e.R7$(3),e.Y8G("disabled",!n.valid)}}let pi=(()=>{class o{constructor(n,s,i,l,h,g,te){this.translateService=n,this.baseService=s,this.requestPersonSalesService=i,this.alertService=l,this.ngxLoader=h,this.datePipe=g,this.modalService=te,this.editOrders="orderManagement.order.editOrders",this.addOrders="orderManagement.order.addOrders",this.titleOperation="orderManagement.order.titleOperation",this.keySelected="",this.active=1,this.language=this.translateService.currentLang,this.searchForm="",this.breadCrumbItems=[],this.disabledStatus=!0,this.form={clientVisitDate:new Date,id:null,cityCode:0,clientLocationId:0,clientId:0,isUrgent:!1,notes:"",items:[],discountAmount:0,discountAmountAdd:0,total:0,agent:{},orderPayments:[],orderLocations:{},discountType:1,discountTypeAdd:1,isPrecentage:!1,isPrecentageAdd:!1,totalAddDiscountType:0,totalAddDiscount:0,creditLimit:0,terms:""},this.orderCode=0,this.mobile=0,this.cityCode=0,this.agentName="",this.pendingCode=0,this.isInner=!1,this.isOrderEdit=!0,this.idForm=0,this.totalPaid=0,this.priceModel=0,this.priceModelIndex=0,this.subtotal=0,this.paidTotal=0,this.VATTotal=0,this.beforeVatTotal=0,this.total=0,this.isResolveList=!0,this.extraDiscountCalc=!1,this.employeeGroups=[],this.notifier=new ct.B,this.mainDelay=100,this.loaderSearchShap=B.cX,this.loaderOperationShap=B.$$,this.operationLoader=B.ZW,this.isEditForm=!1,this.showEdit=!1,this.orderTypes=[],this.serviceCategories=[],this.services=[],this.paymentTypes=[],this.isFinished=!1,this.isUpdate=!1,this.isReopen=!1,this.formRequest={},this.statusOrder=10,this.form=this.baseService.salesOrderForm}OpenChangInput(n,s){this.showEdit=!0,this.priceModel=s.price,this.priceModelIndex=n}ChangInput(){this.form.orderServices[`${this.priceModelIndex}`].price=this.priceModel,this.showEdit=!1}ngOnDestroy(){this.notifier.next(),this.notifier.complete()}ngOnInit(){localStorage.getItem("isReopen")&&(this.isReopen=!0),this.resetForm(),this.breadCrumbItems=[{label:"layout.sidebar.orders"},{label:"orderManagement.order.title",active:!0,url:"order/list"},{label:this.isEditForm?"general.action.edit":"general.action.register",active:!0}],this.GetOrderLookUp(),this.checkTotal(),this.baseService.checkValidation.subscribe(s=>{this.checkdisableForm()})}GetOrderLookUp(){}getTranslationText(n){let s="";return this.translateService.get(n).pipe((0,N.Q)(this.notifier)).subscribe(i=>{s=i}),s}checkTotal(){this.subtotal=this.form.items.reduce((s,i)=>s+(i.price*i.quantity-i.discount||0),0),this.form.discountAmount<0&&(this.form.discountAmount=0),this.form.discountAmountAdd<0&&(this.form.discountAmountAdd=0);let n=0;this.form.isPrecentage?(this.form.discountAmount=this.form.discountAmount>100?100:this.form.discountAmount,n=this.subtotal-this.subtotal*(+this.form.discountAmount||0)*.01):n=this.subtotal-(+this.form.discountAmount||0),this.form.isPrecentageAdd?(this.form.discountAmountAdd=this.form.discountAmountAdd>100?100:this.form.discountAmountAdd,n-=this.subtotal*(+this.form.discountAmount||0)*.01):n-=+this.form.discountAmountAdd||0,this.beforeVatTotal=n,this.VATTotal=0==n?0:n+.15*n,this.form.total=this.total=this.VATTotal}setFormByOrderCode(n){this.form=n,this.checkTotal(),this.form.isFree&&(this.form.isPrecentage=!0,this.form.discountAmount=100)}onTimeSelected(n){this.form.visitDate=n.dataVisit,this.form.orderTeams=n.selectedTimes}onNavChange(n){}changeTab(){}finishedOrder(n){this.isFinished=!0,this.orderCode=n,this.active=6,this.resetForm()}finishedUpdateOrder(n){this.isFinished=!0,this.orderCode=n,this.active=6}newOrder(){this.resetForm(),this.orderCode=0,this.active=1,this.total=0,this.subtotal=0}editOrder(){this.active=1}resetForm(){this.form=this.baseService.salesOrderForm={clientVisitDate:new Date,id:null,clientLocationId:0,clientId:0,notes:"",items:[],discountAmount:0,discountAmountAdd:0,total:0,agent:{},orderLocations:{},discountType:1,discountTypeAdd:1,isPrecentage:!1,isPrecentageAdd:!1,totalAddDiscountType:0,totalAddDiscount:0,creditLimit:0,terms:""}}removeService(n){this.form.orderServices.splice(n,1)}updatePrice(n,s){this.form.orderServices[s].price=n.price*n.quantity}decrement(n){let s=this.form.orderServices.find(i=>i.serviceCode==n.serviceCode);s.quantity<=1||(s&&(s.quantity=s.quantity-1),this.checkTotal())}increment(n){let s=this.form.orderServices.find(i=>i.serviceCode==n.serviceCode);s&&(s.quantity=s.quantity+1),this.checkTotal()}quantityChange(n,s){parseInt(n.target.value)<=0&&(this.form.orderServices.find(h=>h.serviceCode==s.serviceCode).quantity=1),this.checkTotal(),this.form.orderServices=[...this.form.orderServices]}checkPrecentageChange(n){this.form.isPrecentage=n.target.checked,this.checkTotal()}checkPrecentageAddChange(n){this.form.isPrecentageAdd=n.target.checked,this.checkTotal()}onIsFreeChange(n){n?(this.form.isPrecentage=!0,this.form.discountAmount=100):(this.form.isPrecentage=!1,this.form.discountAmount=0),this.checkTotal()}orderFinished(n=10){let s={id:0,clientId:this.form.clientId,clientVisitDate:this.datePipe.transform(this.form.clientVisitDate,"yyyy-MM-ddTHH:mm:ss.000"),offerOrderStatus:n,notes:this.form.notes,terms:this.form.notes,clientLocationId:this.form.clientLocationId,totalAddDiscount:this.form.discountAmount,totalAddDiscountType:this.form.isPrecentage?2:1,offerOrderDetails:this.form.items.map(i=>({discount:i.discount,discountType:i.discountType,itemId:i.itemId,clientQuantity:i.quantity,id:0,price:i.price,unitId:i.unitId}))};this.ngxLoader.startLoader("order"),this.baseService.register(s).subscribe(i=>{i.success?(this.ngxLoader.stopLoader("order"),this.statusOrder=n,this.finishedOrder(i.data.id),this.alertService.success(),localStorage.removeItem("orderCode"),this.checkdisableForm()):(this.alertService.error(),this.ngxLoader.stopLoader("order"))},()=>{this.alertService.error(),this.ngxLoader.stopLoader("order")})}checkdisableForm(){let n=!1;null==this.form.clientId||0==this.form.clientId||null==this.form.clientId||null==this.form.clientLocationId||0==this.form.clientLocationId||null==this.form.clientLocationId||this.form.items.length<=0?n=!0:this.form.items.length>0?(this.form.items.forEach(s=>{0!=s.itemId||(n=!0)}),n=!!n):n=!1,this.disabledStatus=n}openModalRequest(n,s="md"){this.formRequest={id:0,clientId:this.form.clientId},this.modalService.open(n,{centered:!0,size:s})}OnRequestSubmit(){this.ngxLoader.start(this.operationLoader),this.requestPersonSalesService.register(this.formRequest).pipe((0,oe.O)(),(0,de.c)(this.mainDelay),(0,R.Z)(),(0,N.Q)(this.notifier),(0,w.j)(()=>this.ngxLoader.stopLoader(this.operationLoader)),(0,ve.W)(n=>(0,De.$)(n))).subscribe(n=>{n.success?(this.alertService.success(),this.modalService.dismissAll()):this.alertService.error("general.message."+n.message)},n=>{this.alertService.error("general.message."+n)})}static{this.\u0275fac=function(s){return new(s||o)(e.rXU(k.c$),e.rXU(We),e.rXU(li),e.rXU(pe.u),e.rXU(U.eD),e.rXU(F.vh),e.rXU(M.Bq))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["sales-operation"]],inputs:{form:"form",orderCode:"orderCode",mobile:"mobile",cityCode:"cityCode",agentName:"agentName",pendingCode:"pendingCode",isInner:"isInner",isOrderEdit:"isOrderEdit",isReopen:"isReopen"},decls:139,vars:89,consts:[["formEntity","ngForm"],["customNav","ngbNav"],["discountAmount","ngModel"],["notes","ngModel"],["RequestModal",""],["cost","ngModel"],[1,"row"],[1,"col-xl-12"],[1,"checkout-tab"],[1,"col-12","col-lg-8","col-md-12",3,"ngStyle"],[1,"card","card-summary","card-order-operation","m-0","ribbon-box","material-shadow",2,"border-radius","20px"],[1,"card-body",2,"padding","2rem"],[1,"ribbon-three","ribbon-three-warning"],["fgsColor","rgba(255,255,255,0)",3,"loaderId"],[1,"step-arrow-nav","mt-n3","mx-n3","mb-3"],["ngbNav","","role","tablist",1,"nav","nav-pills","custom-nav","nav-justified",3,"navChange","activeId"],[3,"ngbNavItem"],["ngbNavLink","","data-bs-toggle","tab","role","tab",1,"nav-link","fs-15","p-3"],[1,"ri-user-3-fill","fs-16","p-2","bg-primary-subtle","text-primary","rounded-circle","align-middle","mx-2"],[1,"d-block","mt-2"],["ngbNavContent",""],[1,"ri-user-location-fill","fs-16","p-2","bg-primary-subtle","text-primary","rounded-circle","align-middle","mx-2"],[1,"ri-shopping-cart-fill","fs-16","p-2","bg-primary-subtle","text-primary","rounded-circle","align-middle","mx-2"],[1,"ri-check-double-fill","fs-16","p-2","bg-primary-subtle","text-primary","rounded-circle","align-middle","mx-2"],[1,"tab-content"],[3,"ngbNavOutlet"],[1,"card-footer","text-center",2,"padding",".5rem","position","relative"],[1,"row","justify-content-between"],[1,"col-12","col-md-3"],["type","button",1,"btn","btn-warning","btn-label","waves-effect","waves-light","rounded-pill",3,"click","disabled"],[1,"ri-timer-fill","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","orderManagement.order.orderSavedAsDraft"],["type","button",1,"btn","btn-success","btn-label","waves-effect","waves-light","rounded-pill","mx-1",3,"click","disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","orderManagement.order.orderSaved"],[1,"col-12","col-md-2"],["class","d-inline-block",4,"ngIf"],[1,"col-12","col-lg-4","col-md-12","mt-3","mt-lg-0","mt-md-3","summary"],[1,"card","card-summary","card-summary-pos","card-order-operation","m-0","ribbon-box","material-shadow","right"],[1,"card-body","card-order-operation",2,"padding","2rem"],[1,"table-responsive","table-card","mt-3","overflow-hidden"],[1,"table","table-borderless","align-middle","mb-0"],[4,"ngIf"],["lass","py-0",2,"border-top","hsl(226, 36%, 80%) solid 1px!important"],["colspan","3"],[1,"d-flex","justify-content-between","align-items-center","mb-2"],[1,"w-75","fw-semibold"],[1,"w-25","fw-semibold","text-end"],[1,"col-6","input-group"],["type","button",1,"btn","btn-danger"],["tooltipPosition","top",1,"input-group-text","d-inline",3,"pTooltip"],["type","checkbox","aria-label","Checkbox for following text input",1,"form-check-input",3,"change","checked"],[1,"p-1"],["min","0","InputTirmFilter","","name","discountAmount","type","text","id","discountAmount","required","",1,"form-control","text-right",3,"change","ngModelChange","ngModel"],[1,"d-flex","justify-content-between","align-items-center"],[1,"fw-semibold"],[1,"fw-semibold","text-end"],[1,"table-active","py-0"],[1,"py-0",2,"border-top","hsl(226, 36%, 80%) solid 1px!important"],["colspan","2",1,"fw-semibold"],[1,"fw-semibold","text-end","text-danger"],["colspan","3",1,"py-0"],["InputTirmFilter","","name","notes","type","text","id","notes","required","",1,"form-control","fs-6",3,"ngModelChange","placeholder","ngModel"],[3,"calacTotal","setFormByOrderCode","isOrderEdit","isInner","form"],[3,"isOrderEdit","form"],[3,"CalcTotal","isOrderEdit","form"],[3,"editOrderActiveTab","newOrder","statusOrder","orderCode","form"],[1,"d-inline-block"],[1,"dropdown-custom","d-inline-block"],["type","button",1,"btn","dropbtn","btn-primary","btn-sm","dropdown-custom","arrow-none"],[1,"ri-more-2-fill"],["translate","general.actions"],[1,"dropdown-menu","dropdown-menu-end","dropdown-content",2,"left","0"],[3,"click"],[1,"dropdown-item"],[1,"text-primary","ri-add-box-fill","align-bottom","me-2"],["translate","sales.salesOrder.addRequestLimit"],[1,"text-start","text-muted","fw-semibold","mt-3"],[4,"ngFor","ngForOf"],[3,"ngStyle"],["colspan","3",1,"p-1","m-1"],[1,"row","justify-content-between","align-items-center"],[1,"col-12","col-md-4","h6","d-flex","justify-content-start","align-items-center"],[1,"badge","bg-success-subtle","text-success","me-2"],[1,"d-block","mb-1"],[1,"d-block","mt-1"],[1,"col-12","col-md-4","text-mute","text-center"],[1,"input-step","my-2"],["type","button",1,"minus",3,"click"],["disabled","","type","number","min","1","max","100",1,"product-quantity",3,"change","id","value"],["type","button",1,"plus",3,"click"],[1,"col-12","col-md-4","text-mute","text-right"],[1,"ri-close-fill","text-danger","cursor-pointer",3,"click"],["colspan","3",1,"text-center","text-danger"],[1,"text-start","text-muted","fw-semibold"],["colspan","2",1,"text-end"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"hasProgressBar","fgsType","loaderId"],[3,"submit"],[1,"mb-2"],["for","cost","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","cost","type","text","id","cost",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],["for","notes","translate","",1,"fw-bold","form-label"],["rows","2","InputTirmFilter","","name","notes","type","text","id","notes",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,"text-center"],["type","submit","type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],["translate","general.action.save"],["translate","",1,"text-danger","text-center"]],template:function(s,i){if(1&s){const l=e.RV6();e.j41(0,"div",6)(1,"div",7)(2,"div")(3,"div",8)(4,"div",6)(5,"div",9)(6,"div",10)(7,"div",11)(8,"span",12)(9,"span"),e.EFF(10),e.nI1(11,"translate"),e.k0s()(),e.nrm(12,"ngx-ui-loader",13),e.j41(13,"div",14)(14,"form",null,0)(16,"ul",15,1),e.bIt("navChange",function(g){return e.eBV(l),e.Njj(i.onNavChange(g))}),e.j41(18,"li",16)(19,"a",17),e.nrm(20,"i",18),e.j41(21,"span",19),e.EFF(22),e.nI1(23,"translate"),e.k0s()(),e.DNE(24,jr,1,3,"ng-template",20),e.k0s(),e.j41(25,"li",16)(26,"a",17),e.nrm(27,"i",21),e.j41(28,"span",19),e.EFF(29),e.nI1(30,"translate"),e.k0s()(),e.DNE(31,Ir,1,2,"ng-template",20),e.k0s(),e.j41(32,"li",16)(33,"a",17),e.nrm(34,"i",22),e.j41(35,"span",19),e.EFF(36),e.nI1(37,"translate"),e.k0s()(),e.DNE(38,yr,1,2,"ng-template",20),e.k0s(),e.j41(39,"li",16)(40,"a",17),e.nrm(41,"i",23),e.j41(42,"span",19),e.EFF(43),e.nI1(44,"translate"),e.k0s()(),e.DNE(45,xr,1,3,"ng-template",20),e.k0s()(),e.j41(46,"div",24),e.nrm(47,"div",25),e.k0s()()()(),e.j41(48,"div",26)(49,"div",27)(50,"div",28)(51,"button",29),e.bIt("click",function(){return e.eBV(l),e.Njj(i.orderFinished(0))}),e.nrm(52,"i",30)(53,"span",31),e.k0s()(),e.j41(54,"div",28)(55,"button",32),e.bIt("click",function(){return e.eBV(l),e.Njj(i.orderFinished())}),e.nrm(56,"i",33)(57,"span",34),e.k0s()(),e.j41(58,"div",35),e.DNE(59,Fr,10,0,"span",36),e.k0s()()()()(),e.j41(60,"div",37)(61,"div",38)(62,"div",39)(63,"span",12)(64,"span"),e.EFF(65),e.nI1(66,"translate"),e.k0s()(),e.j41(67,"div",40)(68,"table",41)(69,"tbody"),e.DNE(70,kr,5,4,"ng-container",42)(71,xs,4,3,"tr",42)(72,Fs,6,3,"tr",42),e.j41(73,"tr",43)(74,"td",44)(75,"div",45)(76,"div",46),e.EFF(77),e.nI1(78,"translate"),e.k0s(),e.j41(79,"div",47),e.EFF(80),e.nI1(81,"translate"),e.k0s()(),e.j41(82,"div",48)(83,"button",49),e.EFF(84),e.nI1(85,"translate"),e.k0s(),e.j41(86,"div",50),e.nI1(87,"translate"),e.j41(88,"input",51),e.bIt("change",function(g){return e.eBV(l),e.Njj(i.checkPrecentageChange(g))}),e.k0s(),e.j41(89,"span",52),e.EFF(90,"%"),e.k0s()(),e.j41(91,"input",53,2),e.bIt("change",function(){return e.eBV(l),e.Njj(i.checkTotal())}),e.mxI("ngModelChange",function(g){return e.eBV(l),e.DH7(i.form.discountAmount,g)||(i.form.discountAmount=g),e.Njj(g)}),e.k0s()()()(),e.j41(93,"tr",43)(94,"td",44)(95,"div",54)(96,"div",55),e.EFF(97),e.nI1(98,"translate"),e.k0s(),e.j41(99,"div",56),e.EFF(100),e.nI1(101,"translate"),e.k0s()(),e.j41(102,"div",54)(103,"div",55),e.EFF(104),e.nI1(105,"translate"),e.k0s(),e.j41(106,"div",56),e.EFF(107),e.nI1(108,"translate"),e.k0s()(),e.j41(109,"div",54)(110,"div",55),e.EFF(111),e.nI1(112,"translate"),e.k0s(),e.j41(113,"div",56),e.EFF(114),e.nI1(115,"translate"),e.k0s()()()(),e.j41(116,"tr",57)(117,"td",44)(118,"div",45)(119,"div",55),e.EFF(120),e.nI1(121,"translate"),e.k0s(),e.j41(122,"div",56),e.EFF(123),e.nI1(124,"translate"),e.k0s()()()(),e.j41(125,"tr",58)(126,"td",59),e.EFF(127),e.nI1(128,"translate"),e.k0s(),e.j41(129,"td",60),e.EFF(130),e.nI1(131,"translate"),e.k0s()(),e.j41(132,"tr",57)(133,"td",61)(134,"textarea",62,3),e.nI1(136,"translate"),e.mxI("ngModelChange",function(g){return e.eBV(l),e.DH7(i.form.notes,g)||(i.form.notes=g),e.Njj(g)}),e.k0s()()()()()()()()()()()()()(),e.DNE(137,mi,24,7,"ng-template",null,4,e.C5r)}if(2&s){const l=e.sdS(17);e.R7$(5),e.Y8G("ngStyle",e.l_i(86,Sr,"en"==i.language,"en"==i.language)),e.R7$(5),e.JRh(e.bMT(11,44,"orderManagement.order.addOrders")),e.R7$(2),e.Y8G("loaderId","order"),e.R7$(4),e.Y8G("activeId",i.active),e.R7$(2),e.Y8G("ngbNavItem",1),e.R7$(4),e.SpI(" ",e.bMT(23,46,"orderManagement.order.clientInfo")," "),e.R7$(3),e.Y8G("ngbNavItem",2),e.R7$(4),e.SpI(" ",e.bMT(30,48,"orderManagement.order.locations")," "),e.R7$(3),e.Y8G("ngbNavItem",3),e.R7$(4),e.SpI(" ",e.bMT(37,50,"orderManagement.order.items")," "),e.R7$(3),e.Y8G("ngbNavItem",6),e.R7$(4),e.SpI(" ",e.bMT(44,52,"orderManagement.order.finish")," "),e.R7$(4),e.Y8G("ngbNavOutlet",l),e.R7$(4),e.Y8G("disabled",i.disabledStatus),e.R7$(4),e.Y8G("disabled",i.disabledStatus),e.R7$(4),e.Y8G("ngIf",i.form.clientId>0),e.R7$(6),e.JRh(e.bMT(66,54,"orderManagement.order.orderSummary")),e.R7$(5),e.Y8G("ngIf",i.form.items.length>0),e.R7$(),e.Y8G("ngIf",0==i.form.items.length),e.R7$(),e.Y8G("ngIf",0==i.form.items.length),e.R7$(5),e.JRh(e.bMT(78,56,"orderManagement.order.SubTotal")),e.R7$(3),e.Lme("",i.subtotal," ",e.bMT(81,58,"orderManagement.order.currancy"),""),e.R7$(4),e.SpI(" ",e.bMT(85,60,"orderManagement.order.Discount")," "),e.R7$(2),e.FS9("pTooltip",e.bMT(87,62,"orderManagement.order.discount")),e.R7$(2),e.Y8G("checked",i.form.isPrecentage),e.R7$(3),e.R50("ngModel",i.form.discountAmount),e.R7$(6),e.JRh(e.bMT(98,64,"orderManagement.order.PriceAfterDisaccount")),e.R7$(3),e.Lme(" ",i.beforeVatTotal.toFixed(2)," ",e.bMT(101,66,"orderManagement.order.currancy")," "),e.R7$(4),e.JRh(e.bMT(105,68,"orderManagement.order.PriceBeforeVat")),e.R7$(3),e.Lme(" ",i.beforeVatTotal.toFixed(2)," ",e.bMT(108,70,"orderManagement.order.currancy")," "),e.R7$(4),e.SpI("",e.bMT(112,72,"orderManagement.order.tax")," (15%)"),e.R7$(3),e.Lme("",(i.VATTotal-i.beforeVatTotal).toFixed(2)," ",e.bMT(115,74,"orderManagement.order.currancy")," "),e.R7$(6),e.JRh(e.bMT(121,76,"orderManagement.order.VAT")),e.R7$(3),e.Lme("",i.VATTotal.toFixed(2)," ",e.bMT(124,78,"orderManagement.order.currancy"),""),e.R7$(4),e.SpI("",e.bMT(128,80,"orderManagement.order.creditLimit"),": "),e.R7$(3),e.Lme("",i.form.creditLimit," ",e.bMT(131,82,"orderManagement.order.currancy"),""),e.R7$(4),e.FS9("placeholder",e.bMT(136,84,"orderManagement.order.notes")),e.R50("ngModel",i.form.notes)}},dependencies:[F.Sq,F.bT,F.B3,M.Um,M.X9,M.sy,M.Gx,M.Ri,M.WA,M.m_,m.qT,m.me,m.BC,m.cb,m.YS,m.vS,m.cV,k.Mm,Se.m,U.Cv,$t.m,Bn,Is,pt,nn,k.D9],encapsulation:2})}}return o})(),ui=(()=>{class o{constructor(){this.breadCrumbItems=[],this.addOrders="orderManagement.order.addOrders"}ngOnInit(){}static{this.\u0275fac=function(s){return new(s||o)}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["order-register"]],decls:1,vars:0,template:function(s,i){1&s&&e.nrm(0,"sales-operation")},dependencies:[pi],encapsulation:2})}}return o})();var Mr=I(56701),Or=I(26364),Ue=I(75622);let gi=(()=>{class o extends xt.d{constructor(n){super(n,Ft.c.apiUrl+"ShippingTruck/")}static{this.\u0275fac=function(s){return new(s||o)(e.KVO(Et.Qq))}}static{this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var ut=I(91426),ks=I(53928),et=I(40724),$e=I(88148),tt=I(91580),Pe=I(5779);function Ms(o,f){1&o&&(e.j41(0,"tr",25)(1,"th",26),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",27),e.nrm(4,"i",28),e.EFF(5," sales.shippingTruck.name "),e.k0s(),e.j41(6,"th",29),e.nrm(7,"i",28),e.EFF(8," sales.shippingTruck.truckNumber "),e.k0s(),e.j41(9,"th",30),e.nrm(10,"i",28),e.EFF(11," sales.shippingTruck.truckDriverName "),e.k0s(),e.j41(12,"th",31),e.EFF(13," sales.shippingTruck.cityName "),e.k0s(),e.j41(14,"th",32),e.nrm(15,"i",28),e.EFF(16," general.table.isActive "),e.k0s(),e.j41(17,"th",33),e.EFF(18," Capacity "),e.k0s(),e.j41(19,"th",33),e.EFF(20," Unit "),e.k0s(),e.nrm(21,"th",31),e.k0s())}function Os(o,f){if(1&o&&(e.qex(0),e.j41(1,"span",43),e.EFF(2),e.k0s(),e.bVm()),2&o){const n=f.$implicit;e.R7$(2),e.JRh(n.cityName)}}function ws(o,f){1&o&&e.nrm(0,"span",44)}function Es(o,f){1&o&&e.nrm(0,"span",45)}function Ns(o,f){if(1&o&&(e.nrm(0,"i",46),e.EFF(1),e.nI1(2,"date"),e.nrm(3,"br")(4,"i",47),e.EFF(5),e.nI1(6,"date"),e.nrm(7,"br")(8,"i",48),e.EFF(9)),2&o){const n=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.i5U(2,3,n.createdDate,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",e.i5U(6,6,n.updatedDate,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",n.creatorName," ")}}function Ds(o,f){if(1&o){const n=e.RV6();e.j41(0,"tr",34)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.DNE(10,Os,3,1,"ng-container",35),e.k0s(),e.j41(11,"td"),e.DNE(12,ws,1,0,"span",36)(13,Es,1,0,"span",37),e.k0s(),e.j41(14,"td"),e.EFF(15,"100"),e.k0s(),e.j41(16,"td"),e.EFF(17,"\u0643\u0631\u062a\u0648\u0646\u0647"),e.k0s(),e.j41(18,"td"),e.DNE(19,Ns,10,9,"ng-template",null,3,e.C5r),e.nrm(21,"i",38),e.j41(22,"button",39),e.bIt("click",function(){const i=e.eBV(n).$implicit,l=e.XpG(),h=e.sdS(20);return e.Njj(l.EditModel(i.id,h))}),e.nrm(23,"i",40),e.k0s(),e.j41(24,"button",41),e.bIt("click",function(){const i=e.eBV(n).$implicit,l=e.XpG(),h=e.sdS(22);return e.Njj(l.openModal(i.id,h))}),e.nrm(25,"i",42),e.k0s()()()}if(2&o){const n=f.$implicit,s=f.rowIndex,i=e.sdS(20);e.R7$(2),e.JRh(s+1),e.R7$(2),e.JRh(n.name),e.R7$(2),e.JRh(n.truckNumber),e.R7$(2),e.JRh(n.truckDriverName),e.R7$(2),e.Y8G("ngForOf",n.cities),e.R7$(2),e.Y8G("ngIf",n.isActive),e.R7$(),e.Y8G("ngIf",!n.isActive),e.R7$(8),e.Y8G("ngbTooltip",i)}}function Ls(o,f){1&o&&(e.j41(0,"div",49),e.EFF(1," general.table.noData "),e.k0s())}function Gs(o,f){if(1&o){const n=e.RV6();e.j41(0,"div",50)(1,"div",51),e.nrm(2,"ngb-pagination-info",52),e.j41(3,"table-length",53),e.bIt("lengthChange",function(i){e.eBV(n);const l=e.XpG();return e.Njj(l.ListItemChange(i))}),e.k0s()(),e.j41(4,"div",54)(5,"ngb-pagination",55),e.bIt("pageChange",function(i){e.eBV(n);const l=e.XpG();return e.Njj(l.pageChanged(i))}),e.mxI("pageChange",function(i){e.eBV(n);const l=e.XpG();return e.DH7(l.pagination.pageNumber,i)||(l.pagination.pageNumber=i),e.Njj(i)}),e.k0s()()()}if(2&o){const n=e.XpG();e.R7$(2),e.Y8G("pagination",n.pagination),e.R7$(),e.Y8G("lengthTable",n.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",n.pagination.pageSize)("collectionSize",n.pagination.totalItems),e.R50("page",n.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function hi(o,f){1&o&&(e.j41(0,"span",81),e.EFF(1,"general.action.register "),e.k0s())}function Vs(o,f){1&o&&(e.j41(0,"span",81),e.EFF(1,"general.action.edit "),e.k0s())}function As(o,f){1&o&&(e.j41(0,"div",82),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function Bs(o,f){1&o&&(e.j41(0,"div",82),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function $s(o,f){1&o&&(e.j41(0,"div",82),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function Xs(o,f){if(1&o){const n=e.RV6();e.j41(0,"div",56)(1,"div",57)(2,"h4",58),e.DNE(3,hi,2,0,"span",59)(4,Vs,2,0,"span",59),e.j41(5,"span",60),e.EFF(6),e.k0s()(),e.j41(7,"button",61),e.bIt("click",function(){const i=e.eBV(n).$implicit;return e.Njj(i.dismiss("Cross click"))}),e.k0s()(),e.j41(8,"div",62),e.nrm(9,"ngx-ui-loader",18),e.j41(10,"form",63,4),e.bIt("submit",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.OnSubmit())}),e.j41(12,"div",64)(13,"label",65),e.EFF(14,"sales.shippingTruck.name"),e.k0s(),e.j41(15,"input",66,5),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG();return e.DH7(l.form.name,i)||(l.form.name=i),e.Njj(i)}),e.k0s(),e.DNE(17,As,2,0,"div",67),e.k0s(),e.j41(18,"div",64)(19,"label",68),e.EFF(20,"sales.shippingTruck.truckNumber"),e.k0s(),e.j41(21,"input",69,6),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG();return e.DH7(l.form.truckNumber,i)||(l.form.truckNumber=i),e.Njj(i)}),e.k0s(),e.DNE(23,Bs,2,0,"div",67),e.k0s(),e.j41(24,"div",64)(25,"label",70),e.EFF(26,"sales.shippingTruck.driver"),e.k0s(),e.j41(27,"ng-select",71,7),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG();return e.DH7(l.form.truckDriverId,i)||(l.form.truckDriverId=i),e.Njj(i)}),e.k0s(),e.DNE(29,$s,2,0,"div",67),e.k0s(),e.j41(30,"div",72)(31,"label",70),e.EFF(32,"sales.shippingTruck.cities"),e.k0s(),e.j41(33,"ng-select",73),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG();return e.DH7(l.form.cities,i)||(l.form.cities=i),e.Njj(i)}),e.k0s()(),e.j41(34,"div",74)(35,"label",75),e.EFF(36,"general.table.isActive"),e.k0s(),e.j41(37,"p-inputSwitch",76),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG();return e.DH7(l.form.isActive,i)||(l.form.isActive=i),e.Njj(i)}),e.k0s()(),e.j41(38,"div",77)(39,"button",78),e.nrm(40,"i",79)(41,"span",80),e.k0s()()()()()}if(2&o){const n=e.sdS(11),s=e.sdS(16),i=e.sdS(22),l=e.sdS(28),h=e.XpG();e.R7$(3),e.Y8G("ngIf",!h.isEditForm),e.R7$(),e.Y8G("ngIf",h.isEditForm),e.R7$(2),e.JRh(h.titleOperation),e.R7$(3),e.Y8G("hasProgressBar",!1)("fgsType",h.loaderOperationShap)("loaderId",h.operationLoader),e.R7$(6),e.R50("ngModel",h.form.name),e.R7$(2),e.Y8G("ngIf",s.invalid&&s.touched),e.R7$(4),e.R50("ngModel",h.form.truckNumber),e.R7$(2),e.Y8G("ngIf",i.invalid&&i.touched),e.R7$(4),e.Y8G("items",h.employees)("multiple",!1),e.R50("ngModel",h.form.truckDriverId),e.R7$(2),e.Y8G("ngIf",l.invalid&&l.touched),e.R7$(4),e.Y8G("items",h.cities)("multiple",!0),e.R50("ngModel",h.form.cities),e.R7$(4),e.R50("ngModel",h.form.isActive),e.R7$(2),e.Y8G("disabled",!n.valid)}}function Us(o,f){if(1&o){const n=e.RV6();e.j41(0,"delete-modal",83),e.bIt("deleteConfirm",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.DeleteConfirmSoft())})("dismiss",function(){const i=e.eBV(n).$implicit;return e.Njj(i.dismiss())}),e.k0s()}}let Yn=(()=>{class o extends Ue.w{constructor(n,s,i,l,h,g,te,me,ge,K,Z){super(n,s,te,i,l,h,g),this.baseService=i,this.excelService=ge,this.employeeService=K,this.cityService=Z,this.title="sales.shippingTruck.title",this.titleOperation="sales.shippingTruck.titleOperation",this.keySelected="",this.assignUsers=[],this.times=[],this.employees=[],this.searchForm={},this.cities=[],this.configRoute(),this.getEmployees(),this.getCities()}OnSearch(n){this.ngxLoader.startLoader(B.a7),this.loadentities()}onSearch(){this.ngxLoader.startLoader(B.a7),this.loadentities()}configRoute(){this.routerActive.data.pipe((0,N.Q)(this.notifier)).subscribe(n=>{this.entities=n.data.data,this.pagination.totalItems=n.data.totalItems},()=>{this.alertService.error()})}getEmployees(){this.employeeService.getDropDown().pipe((0,N.Q)(this.notifier)).subscribe(n=>{this.employees=n.data},()=>{this.alertService.error()})}getCities(){this.cityService.getDropDown().pipe((0,N.Q)(this.notifier)).subscribe(n=>{this.cities=n.data},()=>{this.alertService.error()})}mapExcel(){let n=[];return this.entities?.forEach(s=>{n.push({workTime:s.workTime,isActive:this.getTranslationText("general.table.active")})}),n}mapRegisterForm(n){let s={...n};return s.id=0,s.cities=s.cities.map(i=>({cityId:i,shippingTruckId:0})),s}mapForm(n){let s={...n};return s.cities=s.cities.map(i=>({cityId:i,shippingTruckId:s.id})),s}onExportXlsx(){let n=this.mapExcel();this.excelService.exportAsExcelFile(n,"Service Type",[])}editEntity(){let n=this.mapForm(this.form);this.baseService.editPut(n.id,n).pipe((0,oe.O)(),(0,de.c)(this.mainDelay),(0,R.Z)(),(0,N.Q)(this.notifier),(0,w.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(s=>{s.success?this.submitFunished():this.alertService.error("general.message."+s.message)},s=>{this.alertService.error("general.message."+s)})}static{this.\u0275fac=function(s){return new(s||o)(e.rXU(P.nX),e.rXU(k.c$),e.rXU(gi),e.rXU(pe.u),e.rXU(F.vh),e.rXU(U.eD),e.rXU(M.Bq),e.rXU(e.gRc),e.rXU(ut.V),e.rXU(ks.O),e.rXU(Ze.h))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-shipping-trucks"]],features:[e.Vt3],decls:23,vars:16,consts:[["tableMaster",""],["operation",""],["deleteModal",""],["tooltipContent",""],["formEntity","ngForm"],["name","ngModel"],["truckNumber","ngModel"],["truckDriverId","ngModel"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],[3,"reset","search","addNew","showExport","totalItems","title"],["control",""],[1,"col-md-3","mb-2"],[1,"search-box"],["InputTirmFilter","","type","search","id","filterValue","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],[1,"card-body"],[3,"hasProgressBar","fgsType","loaderId"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["translate","",2,"width",".5%"],["pSortableColumn","name","translate","",2,"width","10%"],[1,"ri-expand-up-down-line"],["pSortableColumn","truckNumber","translate","",2,"width","10%"],["pSortableColumn","truckDriverId","translate","",2,"width","10%"],["translate","",2,"width","10%"],["pSortableColumn","isActive","translate","",2,"width","8%"],["translate","",2,"width","5%"],[1,"fs-5"],[4,"ngFor","ngForOf"],["class","badge bg-success-subtle text-success p-2","translate","general.table.active",4,"ngIf"],["class","badge bg-danger-subtle text-danger p-2","translate","general.table.noActive",4,"ngIf"],["tooltipPosition","top",1,"mdi","mdi-cog-outline","text-muted","fs-16","align-middle","me-1",3,"ngbTooltip"],[1,"btn","btn-sm","btn-soft-info","edit-list","mx-2",3,"click"],[1,"ri-pencil-fill","align-bottom","mx-1"],[1,"btn","btn-sm","btn-soft-danger","remove-list",3,"click"],[1,"ri-delete-bin-5-fill","align-bottom"],[1,"badge","badge-pill","bg-primary","mx-1"],["translate","general.table.active",1,"badge","bg-success-subtle","text-success","p-2"],["translate","general.table.noActive",1,"badge","bg-danger-subtle","text-danger","p-2"],[1,"ri-history-fill","text-warning"],[1,"ri-history-fill","text-danger"],[1,"ri-user-location-fill","text-primary"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["class","fw-bold fs-4","translate","",4,"ngIf"],["translate",""],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"submit"],[1,"mb-3"],["for","name","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","name","type","text","id","name",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],["for","truckNumber","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","truckNumber","type","text","id","truckNumber",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["translate","",1,"required","fw-bold","form-label","w-100"],["name","truckDriverId","bindValue","code","bindLabel","name","required","",3,"ngModelChange","items","multiple","ngModel"],[1,"col-12","mb-1"],["name","cities","bindValue","code","bindLabel","name",3,"ngModelChange","items","multiple","ngModel"],[1,"form-check"],["for","isActive","translate","",1,"fw-bold","form-label","w-100"],["name","isActive","inputId","isActive",3,"ngModelChange","ngModel"],[1,"text-center"],["type","submit","type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],["translate","",1,"fw-bold","fs-4"],["translate","",1,"text-danger","text-center"],[3,"deleteConfirm","dismiss"]],template:function(s,i){if(1&s){const l=e.RV6();e.j41(0,"div",8)(1,"div",9)(2,"div",10)(3,"base-filter",11),e.bIt("reset",function(){return e.eBV(l),e.Njj(i.onReset())})("search",function(){return e.eBV(l),e.Njj(i.onSearch())})("addNew",function(){e.eBV(l);const g=e.sdS(20);return e.Njj(i.openModalTitle(g,"md"))}),e.qex(4,12),e.j41(5,"div",13)(6,"div",14)(7,"input",15),e.nI1(8,"translate"),e.mxI("ngModelChange",function(g){return e.eBV(l),e.DH7(i.pagination.filterValue,g)||(i.pagination.filterValue=g),e.Njj(g)}),e.k0s(),e.nrm(9,"i",16),e.k0s()(),e.bVm(),e.k0s(),e.j41(10,"div",17),e.nrm(11,"ngx-ui-loader",18),e.j41(12,"div",19)(13,"p-table",20,0),e.bIt("onLazyLoad",function(g){return e.eBV(l),e.Njj(i.tableChange(g))})("selectionChange",function(g){return e.eBV(l),e.Njj(i.onSelectionChange(g))}),e.DNE(15,Ms,22,0,"ng-template",21)(16,Ds,26,8,"ng-template",22),e.k0s()(),e.DNE(17,Ls,2,0,"div",23)(18,Gs,6,8,"div",24),e.k0s()()()(),e.DNE(19,Xs,42,19,"ng-template",null,1,e.C5r)(21,Us,1,0,"ng-template",null,2,e.C5r)}2&s&&(e.R7$(3),e.Y8G("showExport",!1)("totalItems",i.pagination.totalItems)("title",i.title),e.R7$(4),e.FS9("placeholder",e.bMT(8,14,"task.tasklist.subject")),e.R50("ngModel",i.pagination.filterValue),e.R7$(4),e.Y8G("hasProgressBar",!1)("fgsType",i.loaderSearchShap)("loaderId",i.searchLoader),e.R7$(2),e.Y8G("value",i.entities)("rows",i.pagination.pageSize)("lazy",!0)("totalRecords",i.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",i.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",i.pagination.totalItems>0))},dependencies:[F.Sq,F.bT,m.qT,m.me,m.BC,m.cb,m.YS,m.vS,m.cV,M.s5,et.b,Rt.w,$e.p,tt.g,k.Mm,L.XI,Pe.Ei,L.Tg,yt.HW,U.Cv,ke.vr,M.md,Se.m,F.vh,k.D9],encapsulation:2})}}return o})();function Ps(o,f){1&o&&e.nrm(0,"app-shipping-trucks")}let zn=(()=>{class o{constructor(){this.title="sales.salesSetting.title"}ngOnInit(){this.breadCrumbItems=[]}static{this.\u0275fac=function(s){return new(s||o)}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-sales-setting"]],decls:15,vars:7,consts:[["Arrow","ngbNav"],[3,"title","breadcrumbItems"],[1,"col-12"],[1,"card"],[1,"card-body"],["ngbNav","",1,"nav","nav-pills","arrow-navtabs","nav-success","bg-light","mb-3",3,"activeId"],[3,"ngbNavItem"],["ngbNavLink",""],[1,"d-block","d-sm-none"],[1,"mdi","mdi-home-variant"],["translate","sales.shippingTruck.title",1,"d-sm-block"],["ngbNavContent",""],[1,"tab-content","text-muted"],[3,"ngbNavOutlet"]],template:function(s,i){if(1&s&&(e.nrm(0,"app-breadcrumbs",1),e.nI1(1,"translate"),e.j41(2,"div",2)(3,"div",3)(4,"div",4)(5,"ul",5,0)(7,"li",6)(8,"a",7)(9,"span",8),e.nrm(10,"i",9),e.k0s(),e.nrm(11,"span",10),e.k0s(),e.DNE(12,Ps,1,0,"ng-template",11),e.k0s()(),e.j41(13,"div",12),e.nrm(14,"div",13),e.k0s()()()()),2&s){const l=e.sdS(6);e.FS9("title",e.bMT(1,5,i.title)),e.Y8G("breadcrumbItems",i.breadCrumbItems),e.R7$(5),e.Y8G("activeId",1),e.R7$(2),e.Y8G("ngbNavItem",1),e.R7$(7),e.Y8G("ngbNavOutlet",l)}},dependencies:[M.Um,M.X9,M.sy,M.Gx,M.Ri,M.WA,M.m_,Or.m,k.Mm,Yn,k.D9],encapsulation:2})}}return o})();var Mt=I(62984),rn=I(70053),sn=I(79284),Xt=I(16229),Ut=I(12822),yn=I(50204),Ys=I(14221);function zs(o,f){1&o&&(e.j41(0,"tr",27),e.nrm(1,"th",28),e.j41(2,"th",29),e.EFF(3,"#"),e.k0s(),e.j41(4,"th",30),e.nrm(5,"i",31),e.EFF(6," orderManagement.order.orderCode "),e.k0s(),e.j41(7,"th",32),e.nrm(8,"i",31),e.EFF(9," orderManagement.order.creation "),e.k0s(),e.j41(10,"th",33),e.EFF(11," orderManagement.order.status "),e.k0s(),e.j41(12,"th",34),e.nrm(13,"i",31),e.EFF(14," orderManagement.order.agentName "),e.k0s(),e.j41(15,"th",35),e.EFF(16," orderManagement.order.assignTo "),e.k0s(),e.j41(17,"th",36),e.nrm(18,"i",31),e.EFF(19," sales.salesOrder.clientVisitDate "),e.k0s(),e.j41(20,"th",37),e.nrm(21,"i",31),e.EFF(22," sales.salesOrder.totalQuantity "),e.k0s(),e.j41(23,"th",38),e.nrm(24,"i",31),e.EFF(25," sales.salesOrder.totalDiscount "),e.k0s(),e.j41(26,"th",39),e.nrm(27,"i",31),e.EFF(28," sales.salesOrder.netPrice "),e.k0s(),e.nrm(29,"th",40),e.k0s())}function qs(o,f){1&o&&(e.j41(0,"button",50),e.nrm(1,"i",51)(2,"span",52),e.k0s())}function Hs(o,f){if(1&o){const n=e.RV6();e.j41(0,"tr",41)(1,"td"),e.nrm(2,"button",42),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td",43),e.bIt("click",function(){const i=e.eBV(n).$implicit,l=e.XpG(),h=e.sdS(40);return e.Njj(l.openModalClient(i,h,"lg"))}),e.j41(6,"bdi",44),e.EFF(7),e.k0s()(),e.j41(8,"td")(9,"span",45),e.EFF(10),e.k0s(),e.EFF(11),e.nI1(12,"date"),e.k0s(),e.j41(13,"td")(14,"span"),e.nrm(15,"span",46),e.k0s()(),e.j41(16,"td",43),e.bIt("click",function(){const i=e.eBV(n).$implicit,l=e.XpG(),h=e.sdS(38);return e.Njj(l.openModalClient(i,h))}),e.j41(17,"span",47),e.EFF(18),e.k0s()(),e.j41(19,"td"),e.EFF(20),e.k0s(),e.j41(21,"td"),e.EFF(22),e.nI1(23,"date"),e.k0s(),e.j41(24,"td"),e.EFF(25),e.k0s(),e.j41(26,"td"),e.EFF(27),e.k0s(),e.j41(28,"td"),e.EFF(29),e.k0s(),e.j41(30,"td"),e.nrm(31,"i",48),e.DNE(32,qs,3,0,"button",49),e.k0s()()}if(2&o){const n=f.$implicit,s=f.rowIndex,i=f.expanded,l=e.XpG();e.R7$(2),e.Y8G("pRowToggler",n)("ngClass",i?" ri-arrow-down-s-line":"  ri-arrow-up-s-line"),e.R7$(2),e.JRh(s+1),e.R7$(3),e.SpI("#SO#",n.id,""),e.R7$(3),e.SpI("",n.creatorName," "),e.R7$(),e.SpI(" ",e.i5U(12,17,n.creationTime,"yyyy-MM-dd")," "),e.R7$(3),e.ZvI("badge ",l.getStatus(n),""),e.R7$(),e.FS9("translate","sales.salesOrder."+n.offerOrderStatusValue),e.R7$(3),e.SpI("",n.clientName," "),e.R7$(2),e.JRh(n.shippingTruckName),e.R7$(2),e.SpI(" ",e.i5U(23,20,n.clientVisitDate,"yyyy-MM-dd"),""),e.R7$(3),e.JRh(n.totalQuantity),e.R7$(2),e.JRh(n.totalDiscount),e.R7$(2),e.JRh(n.netPrice),e.R7$(3),e.Y8G("ngIf",l.checkEdit(n))}}function fi(o,f){if(1&o&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.nI1(11,"translate"),e.k0s(),e.j41(12,"td"),e.EFF(13),e.k0s(),e.j41(14,"td"),e.EFF(15),e.k0s()()),2&o){const n=f.$implicit;e.R7$(2),e.JRh(n.itemName),e.R7$(2),e.JRh(n.unitName),e.R7$(2),e.JRh(n.clientQuantity),e.R7$(2),e.JRh(n.approvedQuantity),e.R7$(2),e.SpI("",e.bMT(11,7,"sales.salesOrder."+n.discountTypeValue)," "),e.R7$(3),e.JRh(n.discount),e.R7$(2),e.JRh(n.price)}}function _i(o,f){if(1&o&&(e.j41(0,"tr")(1,"td",53)(2,"div")(3,"table",54)(4,"thead")(5,"tr",55),e.nrm(6,"th",56)(7,"th",57)(8,"th",58)(9,"th",59)(10,"th",60)(11,"th",61)(12,"th",62),e.k0s()(),e.j41(13,"tbody"),e.DNE(14,fi,16,9,"tr",63),e.k0s()()()()()),2&o){const n=f.$implicit;e.R7$(14),e.Y8G("ngForOf",n.offerOrderDetails)}}function bi(o,f){1&o&&(e.j41(0,"div",64),e.EFF(1," general.table.noData "),e.k0s())}function wr(o,f){if(1&o){const n=e.RV6();e.j41(0,"div",65)(1,"div",66),e.nrm(2,"ngb-pagination-info",67),e.j41(3,"table-length",68),e.bIt("lengthChange",function(i){e.eBV(n);const l=e.XpG();return e.Njj(l.ListItemChange(i))}),e.k0s()(),e.j41(4,"div",69)(5,"ngb-pagination",70),e.bIt("pageChange",function(i){e.eBV(n);const l=e.XpG();return e.Njj(l.pageChanged(i))}),e.mxI("pageChange",function(i){e.eBV(n);const l=e.XpG();return e.DH7(l.pagination.pageNumber,i)||(l.pagination.pageNumber=i),e.Njj(i)}),e.k0s()()()}if(2&o){const n=e.XpG();e.R7$(2),e.Y8G("pagination",n.pagination),e.R7$(),e.Y8G("lengthTable",n.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",n.pagination.pageSize)("collectionSize",n.pagination.totalItems),e.R50("page",n.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function Qs(o,f){if(1&o){const n=e.RV6();e.j41(0,"delete-modal",71),e.bIt("deleteConfirm",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.DeleteConfirm())})("dismiss",function(){const i=e.eBV(n).$implicit;return e.Njj(i.dismiss())}),e.k0s()}}function vi(o,f){1&o&&e.nrm(0,"client-profile-main",72)}function qn(o,f){if(1&o){const n=e.RV6();e.j41(0,"app-all-orders-details",73),e.bIt("dismiss",function(){const i=e.eBV(n).$implicit;return e.Njj(i.dismiss())}),e.k0s()}if(2&o){const n=e.XpG();e.Y8G("orderDetails",n.orderSelected)}}function Ci(o,f){if(1&o&&e.nrm(0,"order-operation",74),2&o){const n=e.XpG();e.Y8G("isOrderEdit",n.isOrderEdit)("isInner",!0)("orderCode",n.clientSelected)}}function Js(o,f){if(1&o){const n=e.RV6();e.j41(0,"order-timeline",75),e.bIt("dismiss",function(){const i=e.eBV(n).$implicit;return e.Njj(i.dismiss())}),e.k0s()}if(2&o){const n=e.XpG();e.Y8G("orderSelected",n.orderSelected)}}let Si=(()=>{class o extends Ue.w{constructor(n,s,i,l,h,g,te,me,ge,K,Z,z,_e,Te,Oe){super(n,s,te,i,l,h,g),this.baseService=i,this.authDaamService=me,this.teamService=ge,this.workTimeService=K,this.excelService=Z,this.cityService=z,this.districtService=_e,this.channelService=Te,this.router=Oe,this.title="orderManagement.order.title",this.titleOperation="orderManagement.order.titleOperation",this.keySelected="",this.assignUsers=[],this.times=[],this.employees=[],this.searchForm={},this.isResolveList=!0,this.employeeTypes=[{id:1,name:"employeeTeam"},{id:2,name:"managment"},{id:3,name:"customerService"}],this.employeeGroups=[],this.activeindex="2",this.active=2,this.formPassword={},this.roles=[],this.teams=[],this.workTimes=[],this.userTypes=[],this.actives=[{id:!0,name:"active"},{id:!1,name:"noActive"}],this.clientSelected=0,this.cities=[],this.districts=[],this.channels=[],this.status=[],this.countLoad=2,this.isOrderEdit=!1,this.orderSelected={},this.users=[],this.statusCount={},this.setDates=(q,be,Ce)=>{if(q?.from||q?.to){const ht=q.to||q.from;this.pagination[be]=this.datePipe.transform(q.from||q.to,"yyyy-MM-ddT00:00:00"),this.pagination[Ce]=this.datePipe.transform(ht,"yyyy-MM-ddT23:59:59.999")}else this.pagination[be]=null,this.pagination[Ce]=null},this.configRoute()}GetOrderLookUp(){this.baseService.getLookups().subscribe(n=>{this.status=n.data.offerOrderStatuses},n=>{console.log(n)})}GetCities(){this.cityService.getDropDown().subscribe(n=>{this.cities=n.data},n=>{console.log(n)})}GetDistricts(n){this.districtService.getByCityId(n).subscribe(s=>{this.districts=s.data},s=>{console.log(s)})}GetChannels(){this.channelService.getDropDown().subscribe(n=>{this.channels=n.data},n=>{console.log(n)})}GetTeams(){this.teamService.getDropDown().subscribe(n=>{this.teams=n.data},n=>{console.log(n)})}GetTimes(){this.workTimeService.getDropDown().subscribe(n=>{this.workTimes=n.data},n=>{console.log(n)})}ngOnInitMore(){}mapForm(n){return{...n}}onUpdateIsActive(n){this.baseService.updateActive(n).pipe((0,N.Q)(this.notifier)).subscribe(s=>{s?this.alertService.success():this.alertService.error("general.message."+s)},s=>{this.alertService.error()})}mapRegisterForm(n){let s={...n};return s.employeeCode=0,s}onSearch(){let n={...this.searchForm};this.ngxLoader.startLoader("allLoader"),this.setDates(n.dates,"visitDateFrom","visitDateTo"),this.setDates(n.creationDates,"creationTimeFrom","creationTimeTo"),this.loadentities()}LoadSuccess(){this.ngxLoader.stopLoader("allLoader")}onReset(){this.form={},this.searchForm={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems},this.loadentities()}configRoute(){this.routerActive.data.pipe((0,N.Q)(this.notifier)).subscribe(n=>{this.entities=n.data,this.pagination.totalItems=n.data?.totalItems},()=>{this.alertService.error()})}mapExcel(){let n=[];return this.entities.forEach(s=>{n.push({"Order Code":s.orderCode,"Created Date":s.createdDate,"City Name":s.cityName,"District Name":s.districtName?s.districtName:"--",Status:this.translateService.instant(this.getTrnslate(s)),"Agent Name":s.agentName,Mobile:s.mobile,"Channel Name":s.channelName,"Assigned To":s.teamNames,Times:s.workTimes,"Visit Date":s.visitDate,Services:s.services})}),n}onExportXlsx(){let n=this.mapExcel();this.excelService.exportAsExcelFile(n,this.translateService.instant(this.title),[])}onNavChange(n){1===n.nextId&&(this.activeindex="1"),3===n.nextId&&(this.activeindex="3")}getStatus(n){return 10==n.offerOrderStatus||20==n.offerOrderStatus?"bg-warning-subtle text-warning":30==n.offerOrderStatus?"bg-success-subtle text-success":40==n.offerOrderStatus?"bg-danger-subtle text-danger":50==n.offerOrderStatus?"bg-danger-success text-success":"bg-warning-subtle text-warning"}checkEdit(n){return!n.isCancel&&!n.isFinish}getTrnslate(n){return n.isCancel?"orderManagement.order.cancel":n.isFinish?"orderManagement.order.finish":n.isUrgent?"bg-danger-subtle text-danger":n.isReopen?"orderManagement.order.reopen":n.isAssign?"orderManagement.order.assign":n.isConfirmed?"orderManagement.order.confirmed":n.isFree?"orderManagement.order.free":"orderManagement.order.new"}openModalClient(n,s,i="xl"){this.clientSelected=n.orderCode,this.orderSelected=n,this.isOrderEdit=!1,this.modalService.open(s,{centered:!0,size:i})}oncityChange(n){this.GetDistricts(n.code)}copytext(n){navigator.clipboard.writeText(n),this.alertService.info(n)}static{this.\u0275fac=function(s){return new(s||o)(e.rXU(P.nX),e.rXU(k.c$),e.rXU(We),e.rXU(pe.u),e.rXU(F.vh),e.rXU(U.eD),e.rXU(M.Bq),e.rXU(Mt.J),e.rXU(rn.n),e.rXU(sn.G),e.rXU(ut.V),e.rXU(Ze.h),e.rXU(Xt.m),e.rXU(Ut.l),e.rXU(P.Ix))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-all-sales-order"]],features:[e.Vt3],decls:45,vars:37,consts:[["tableMaster",""],["deleteModal",""],["clientProfile",""],["orderViewModel",""],["orderModel",""],["OrderTimeLineModel",""],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],["overlayColor","rgba(255,255,255,0.05)","fgsColor","rgba(255,255,255,0)",3,"loaderId"],[3,"reset","search","exportXlsx","showAdd","showExport","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","number","id","id","name","id",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["InputTirmFilter","","type","search","id","clientName","name","clientName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["name","name","bindValue","id","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],["type","text","mwlFlatpickr","","id","isDate","mode","range","altFormat","d/m/Y",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],[2,"width",".2%"],["translate","",2,"width",".5%"],["pSortableColumn","id","translate","",2,"width","6%"],[1,"ri-expand-up-down-line"],["pSortableColumn","creationTime","translate","",2,"width","12%"],["pSortableColumn","status","translate","",2,"width","6%"],["pSortableColumn","clientId","translate","",2,"width","10%"],["translate","",2,"width","8%"],["pSortableColumn","clientVisitDate","translate","",2,"width","10%"],["pSortableColumn","totalQuantity","translate","",2,"width","8%"],["pSortableColumn","totalDiscount","translate","",2,"width","8%"],["pSortableColumn","netPrice","translate","",2,"width","8%"],["translate","",2,"width","10%"],[1,"fs-5"],["type","button","pRipple","",1,"border-0","p-button-text","p-button-rounded","p-button-plain",3,"pRowToggler","ngClass"],[3,"click"],[1,"code-pointer"],[1,"badge","bg-success-subtle","text-success"],[3,"translate"],[1,"badge","bg-primary-subtle","text-primary","my-1"],[1,"ri-history-fill","d-inline","text-primary","fs-16","align-middle","me-1"],["type","button","class","btn px-4 w-auto btn-sm btn-primary btn-label  waves-effect waves-light rounded-pill",4,"ngIf"],["type","button",1,"btn","px-4","w-auto","btn-sm","btn-primary","btn-label","waves-effect","waves-light","rounded-pill"],[1,"ri-edit-2-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.edit"],["colspan","17"],["dataKey","id"],[1,"bg-light"],["translate","sales.salesOrder.itemName",2,"width","10%"],["translate","sales.salesOrder.unit",2,"width","6%"],["translate","sales.salesOrder.clientQuantity",2,"width","8%"],["translate","sales.salesOrder.approvedQuantity",2,"width","8%"],["translate","sales.salesOrder.discountType",2,"width","5%"],["translate","sales.salesOrder.discount",2,"width","5%"],["translate","sales.salesOrder.price",2,"width","5%"],[4,"ngFor","ngForOf"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[3,"deleteConfirm","dismiss"],["","clientSelected"],[3,"dismiss","orderDetails"],[3,"isOrderEdit","isInner","orderCode"],[3,"dismiss","orderSelected"]],template:function(s,i){if(1&s){const l=e.RV6();e.j41(0,"div",6)(1,"div",7)(2,"div",8),e.nrm(3,"ngx-ui-loader",9),e.j41(4,"base-filter",10),e.bIt("reset",function(){return e.eBV(l),e.Njj(i.onReset())})("search",function(){return e.eBV(l),e.Njj(i.onSearch())})("exportXlsx",function(){return e.eBV(l),e.Njj(i.onExportXlsx())}),e.qex(5,11),e.j41(6,"div",12)(7,"div",13)(8,"input",14),e.nI1(9,"translate"),e.mxI("ngModelChange",function(g){return e.eBV(l),e.DH7(i.pagination.id,g)||(i.pagination.id=g),e.Njj(g)}),e.k0s(),e.nrm(10,"i",15),e.k0s()(),e.j41(11,"div",12)(12,"div",13)(13,"input",16),e.nI1(14,"translate"),e.mxI("ngModelChange",function(g){return e.eBV(l),e.DH7(i.pagination.clientName,g)||(i.pagination.clientName=g),e.Njj(g)}),e.k0s(),e.nrm(15,"i",15),e.k0s()(),e.j41(16,"div",12)(17,"div",13)(18,"ng-select",17),e.nI1(19,"translate"),e.mxI("ngModelChange",function(g){return e.eBV(l),e.DH7(i.pagination.status,g)||(i.pagination.status=g),e.Njj(g)}),e.k0s()()(),e.j41(20,"div",12)(21,"input",18),e.nI1(22,"translate"),e.mxI("ngModelChange",function(g){return e.eBV(l),e.DH7(i.searchForm.dates,g)||(i.searchForm.dates=g),e.Njj(g)}),e.k0s()(),e.j41(23,"div",12)(24,"input",18),e.nI1(25,"translate"),e.mxI("ngModelChange",function(g){return e.eBV(l),e.DH7(i.searchForm.creationDates,g)||(i.searchForm.creationDates=g),e.Njj(g)}),e.k0s()(),e.bVm(),e.k0s(),e.j41(26,"div",19)(27,"div",20)(28,"p-table",21,0),e.bIt("onLazyLoad",function(g){return e.eBV(l),e.Njj(i.tableChange(g))})("selectionChange",function(g){return e.eBV(l),e.Njj(i.onSelectionChange(g))}),e.DNE(30,zs,30,0,"ng-template",22)(31,Hs,33,23,"ng-template",23)(32,_i,15,1,"ng-template",24),e.k0s()(),e.DNE(33,bi,2,0,"div",25)(34,wr,6,8,"div",26),e.k0s()()()(),e.DNE(35,Qs,1,0,"ng-template",null,1,e.C5r)(37,vi,1,0,"ng-template",null,2,e.C5r)(39,qn,1,1,"ng-template",null,3,e.C5r)(41,Ci,1,3,"ng-template",null,4,e.C5r)(43,Js,1,1,"ng-template",null,5,e.C5r)}2&s&&(e.R7$(3),e.Y8G("loaderId","allLoader"),e.R7$(),e.Y8G("showAdd",!1)("showExport",!1)("totalItems",i.pagination.totalItems)("title",i.title),e.R7$(4),e.FS9("placeholder",e.bMT(9,27,"orderManagement.order.orderCode")),e.R50("ngModel",i.pagination.id),e.R7$(5),e.FS9("placeholder",e.bMT(14,29,"orderManagement.order.agentName")),e.R50("ngModel",i.pagination.clientName),e.R7$(5),e.FS9("placeholder",e.bMT(19,31,"orderManagement.order.status")),e.Y8G("items",i.status)("multiple",!1),e.R50("ngModel",i.pagination.status),e.R7$(3),e.FS9("placeholder",e.bMT(22,33,"orderManagement.order.visitDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",i.searchForm.dates),e.R7$(3),e.FS9("placeholder",e.bMT(25,35,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",i.searchForm.creationDates),e.R7$(4),e.Y8G("value",i.entities)("rows",i.pagination.pageSize)("lazy",!0)("totalRecords",i.pagination.totalItems),e.R7$(5),e.Y8G("ngIf",i.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",i.pagination.totalItems>0))},dependencies:[F.YU,F.Sq,F.bT,m.me,m.Q0,m.BC,m.vS,M.s5,ie.kL,et.b,yn.L,Rt.w,$e.p,tt.g,Ys.t,k.Mm,L.XI,Pe.Ei,L.Tg,L.FP,U.Cv,ke.vr,Se.m,F.vh,k.D9],encapsulation:2})}}return o})(),Hn=(()=>{class o extends xt.d{getTrunckStatus(){return[{id:10,name:"WaitTrunk"},{id:20,name:"ArriveStore"},{id:30,name:"GoClient"},{id:40,name:"ArriveClient"},{id:50,name:"DeliveryClient"},{id:60,name:"DelayOrder"},{id:70,name:"CancelOrder"}]}constructor(n){super(n,Ft.c.apiUrl+"OrderReceived/")}GetOrderAssignTrunk(n){return this.http.post(this.baseUrl+"OrderAssignTrunk",n)}changeStatus(n){return this.http.post(this.baseUrl+"changeStatus",n)}PrintOrderReceived(n){return this.http.get(this.baseUrl+"PrintOrderReceived/"+n,{responseType:"blob"})}static{this.\u0275fac=function(s){return new(s||o)(e.KVO(Et.Qq))}}static{this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var Er=I(91020);let Nr=(()=>{class o{constructor(n,s,i,l){this.cancelReasonService=n,this.orderService=s,this.ngxLoader=i,this.alertService=l,this.cancelReasons=[],this.form={},this.orderId=0,this.loaderOperationShap=B.$$,this.operationLoader=B.ZW,this.notifier=new ct.B,this.success=new e.bkB,this.dismiss=new e.bkB}ngOnInit(){this.GetReturnReasons()}GetReturnReasons(){this.cancelReasonService.getDropDown().subscribe(n=>{this.cancelReasons=n.data},n=>{console.log(n)})}onCancelOrder(){let n={cancelReasonId:this.form.cancelReasonCode,id:this.orderId};this.ngxLoader.startLoader(this.operationLoader),this.orderService.CancelOfferOrder(n).pipe((0,N.Q)(this.notifier)).subscribe(s=>{this.ngxLoader.stopLoader(this.operationLoader),s.success?(this.alertService.success(),this.success.emit(!0),this.dismiss.emit(!0)):this.alertService.error()},()=>{this.alertService.error(),this.ngxLoader.stopLoader(this.operationLoader)})}dismissFn(){this.dismiss.emit(!0)}static{this.\u0275fac=function(s){return new(s||o)(e.rXU(Er.e),e.rXU(We),e.rXU(U.eD),e.rXU(pe.u))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["cancel-sales-model"]],inputs:{orderId:"orderId"},outputs:{success:"success",dismiss:"dismiss"},decls:19,vars:10,consts:[["formEntity","ngForm"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["translate","orderManagement.order.cancelReasonName",1,"fw-bold","fs-4"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"hasProgressBar","fgsType","loaderId"],[3,"ngSubmit"],[1,"row"],[1,"mb-3"],["for","actionMismatch","translate","",1,"required","fw-bold","form-label"],["name","name","bindValue","code","bindLabel","name","required","",3,"ngModelChange","placeholder","items","multiple","ngModel"],[1,"text-center"],["type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"]],template:function(s,i){if(1&s){const l=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"h4",3),e.nrm(3,"span",4),e.k0s(),e.j41(4,"button",5),e.bIt("click",function(){return e.eBV(l),e.Njj(i.dismissFn())}),e.k0s()(),e.j41(5,"div",6),e.nrm(6,"ngx-ui-loader",7),e.j41(7,"form",8,0),e.bIt("ngSubmit",function(){return e.eBV(l),e.Njj(i.onCancelOrder())}),e.j41(9,"div",9)(10,"div",10)(11,"label",11),e.EFF(12,"orderManagement.order.cancelReasonName"),e.k0s(),e.j41(13,"ng-select",12),e.nI1(14,"translate"),e.mxI("ngModelChange",function(g){return e.eBV(l),e.DH7(i.form.cancelReasonCode,g)||(i.form.cancelReasonCode=g),e.Njj(g)}),e.k0s()()(),e.j41(15,"div",13)(16,"button",14),e.nrm(17,"i",15)(18,"span",16),e.k0s()()()()()}if(2&s){const l=e.sdS(8);e.R7$(6),e.Y8G("hasProgressBar",!1)("fgsType",i.loaderOperationShap)("loaderId",i.operationLoader),e.R7$(7),e.FS9("placeholder",e.bMT(14,8,"orderManagement.order.cancelReasonName")),e.Y8G("items",i.cancelReasons)("multiple",!1),e.R50("ngModel",i.form.cancelReasonCode),e.R7$(3),e.Y8G("disabled",!l.valid)}},dependencies:[m.qT,m.BC,m.cb,m.YS,m.vS,m.cV,k.Mm,U.Cv,ke.vr,k.D9],encapsulation:2})}}return o})();function Ti(o,f){1&o&&(e.j41(0,"tr",26),e.nrm(1,"th",27),e.j41(2,"th",28),e.EFF(3,"#"),e.k0s(),e.j41(4,"th",29),e.nrm(5,"i",30),e.EFF(6," orderManagement.order.shippingOrder "),e.k0s(),e.j41(7,"th",31),e.nrm(8,"i",30),e.EFF(9," orderManagement.order.orderCode "),e.k0s(),e.j41(10,"th",32),e.nrm(11,"i",30),e.EFF(12," orderManagement.order.creation "),e.k0s(),e.j41(13,"th",33),e.nrm(14,"i",30),e.EFF(15," orderManagement.order.agentName "),e.k0s(),e.j41(16,"th",34),e.nrm(17,"i",30),e.EFF(18," sales.salesOrder.clientVisitDate "),e.k0s(),e.j41(19,"th",35),e.nrm(20,"i",30),e.EFF(21," sales.salesOrder.shippingTruckName "),e.k0s(),e.j41(22,"th",36),e.EFF(23," sales.salesOrder.totalQuantity "),e.k0s(),e.j41(24,"th",37),e.EFF(25," sales.salesOrder.totalDiscount "),e.k0s(),e.j41(26,"th",38),e.EFF(27," orderManagement.order.totalTax "),e.k0s(),e.j41(28,"th",38),e.EFF(29," sales.salesOrder.netPrice "),e.k0s(),e.j41(30,"th",38),e.EFF(31," sales.salesOrder.clientLocationName "),e.k0s(),e.nrm(32,"th",39),e.k0s())}function Dr(o,f){1&o&&e.nrm(0,"span",48)}function Lr(o,f){if(1&o&&(e.j41(0,"a",49),e.nrm(1,"i",50),e.k0s()),2&o){const n=e.XpG().$implicit,s=e.XpG();e.Y8G("href",s.mapUrl(null==n?null:n.lng,null==n?null:n.lat),e.B4B)}}function an(o,f){1&o&&(e.j41(0,"td")(1,"button",51),e.nI1(2,"translate"),e.nrm(3,"i",52),e.k0s(),e.j41(4,"button",53),e.nI1(5,"translate"),e.nrm(6,"i",54),e.k0s()()),2&o&&(e.R7$(),e.FS9("pTooltip",e.bMT(2,2,"orderManagement.order.changeTeamStatus")),e.R7$(3),e.FS9("pTooltip",e.bMT(5,4,"orderManagement.order.finishOrder")))}function ji(o,f){if(1&o){const n=e.RV6();e.j41(0,"td")(1,"div",55)(2,"button",56),e.nI1(3,"translate"),e.bIt("click",function(){e.eBV(n);const i=e.XpG().$implicit,l=e.XpG(),h=e.sdS(38);return e.Njj(l.openStatusModal(i.id,h,60,"md"))}),e.nrm(4,"i",57),e.k0s(),e.j41(5,"span",55)(6,"div",58)(7,"button",59),e.nrm(8,"i",60),e.k0s(),e.j41(9,"ul",61)(10,"li",62),e.bIt("click",function(){e.eBV(n);const i=e.XpG().$implicit,l=e.XpG();return e.Njj(l.PrintOrderReceived(i.id))}),e.j41(11,"span",63),e.nrm(12,"i",64)(13,"span",65),e.k0s()(),e.j41(14,"li")(15,"span",63),e.nrm(16,"i",66)(17,"span",67),e.k0s()(),e.j41(18,"li",62),e.bIt("click",function(){e.eBV(n);const i=e.XpG().$implicit,l=e.XpG(),h=e.sdS(38);return e.Njj(l.openStatusModal(i.id,h,40,"md"))}),e.j41(19,"span",63),e.nrm(20,"i",68)(21,"span",69),e.k0s()(),e.j41(22,"li",62),e.bIt("click",function(){e.eBV(n);const i=e.XpG().$implicit,l=e.XpG(),h=e.sdS(34);return e.Njj(l.openModal(i.id,h))}),e.j41(23,"span",63),e.nrm(24,"i",70)(25,"span",71),e.k0s()()()()()()()}2&o&&(e.R7$(2),e.FS9("pTooltip",e.bMT(3,1,"sales.salesOrder.finihedOrder")))}function Ii(o,f){if(1&o&&(e.j41(0,"tr",40)(1,"td"),e.nrm(2,"button",41),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td")(6,"bdi",42),e.EFF(7),e.k0s()(),e.j41(8,"td")(9,"bdi",42),e.EFF(10),e.k0s()(),e.j41(11,"td")(12,"span",43),e.EFF(13),e.k0s(),e.EFF(14),e.nI1(15,"date"),e.k0s(),e.j41(16,"td")(17,"span",44),e.EFF(18),e.k0s()(),e.j41(19,"td"),e.EFF(20),e.nI1(21,"date"),e.k0s(),e.j41(22,"td"),e.EFF(23),e.k0s(),e.j41(24,"td"),e.EFF(25),e.k0s(),e.j41(26,"td"),e.EFF(27),e.k0s(),e.j41(28,"td"),e.EFF(29),e.k0s(),e.j41(30,"td"),e.EFF(31),e.k0s(),e.j41(32,"td"),e.DNE(33,Dr,1,0,"span",45)(34,Lr,2,1,"a",46),e.k0s(),e.DNE(35,an,7,6,"td",47)(36,ji,26,3,"td",47),e.k0s()),2&o){const n=f.$implicit,s=f.rowIndex,i=f.expanded,l=e.XpG();e.R7$(2),e.Y8G("pRowToggler",n)("ngClass",i?" ri-arrow-down-s-line":"  ri-arrow-up-s-line"),e.R7$(2),e.JRh(s+1),e.R7$(3),e.SpI("#SHO#",n.id,""),e.R7$(3),e.SpI("#SO#",n.offerOrderMasterId,""),e.R7$(3),e.SpI("",n.creatorName," "),e.R7$(),e.SpI(" ",e.i5U(15,18,n.creationTime,"yyyy-MM-dd HH:mm")," "),e.R7$(4),e.SpI("",n.clientName," "),e.R7$(2),e.SpI(" ",e.i5U(21,21,n.deliveryDate,"yyyy-MM-dd HH:mm"),""),e.R7$(3),e.JRh(n.shippingTruckName),e.R7$(2),e.JRh(n.totalQuantity),e.R7$(2),e.JRh(n.totalDiscount),e.R7$(2),e.JRh(n.totalTax),e.R7$(2),e.JRh(n.netPrice),e.R7$(2),e.Y8G("ngIf",""==n.lng),e.R7$(),e.Y8G("ngIf",null==n?null:n.lng),e.R7$(),e.Y8G("ngIf",l.isTrunck),e.R7$(),e.Y8G("ngIf",!l.isTrunck)}}function Ws(o,f){1&o&&(e.j41(0,"tr"),e.nrm(1,"th",76)(2,"th",77)(3,"th",78)(4,"th",79)(5,"th",80)(6,"th",81)(7,"th",82),e.k0s())}function yi(o,f){if(1&o&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td")(8,"span"),e.EFF(9),e.k0s()(),e.j41(10,"td"),e.EFF(11),e.nI1(12,"translate"),e.k0s(),e.j41(13,"td"),e.EFF(14),e.k0s(),e.j41(15,"td"),e.EFF(16),e.k0s()()),2&o){const n=f.$implicit;e.R7$(2),e.JRh(n.itemName),e.R7$(2),e.JRh(n.unitName),e.R7$(2),e.JRh(n.clientQuantity),e.R7$(3),e.JRh(n.approvedQuantity),e.R7$(2),e.JRh(e.bMT(12,7,"sales.salesOrder."+n.discountTypeValue)),e.R7$(3),e.SpI(" ",n.discount," "),e.R7$(2),e.JRh(n.price)}}function xi(o,f){1&o&&(e.j41(0,"tr"),e.nrm(1,"td",83),e.k0s())}function Fi(o,f){if(1&o&&(e.j41(0,"tr")(1,"td",72)(2,"div",73)(3,"p-table",74),e.DNE(4,Ws,8,0,"ng-template",21)(5,yi,17,9,"ng-template",22)(6,xi,2,0,"ng-template",75),e.k0s()()()()),2&o){const n=f.$implicit;e.R7$(3),e.Y8G("value",n.details)}}function Ri(o,f){1&o&&(e.j41(0,"div",84),e.EFF(1," general.table.noData "),e.k0s())}function Ks(o,f){if(1&o){const n=e.RV6();e.j41(0,"div",85)(1,"div",86),e.nrm(2,"ngb-pagination-info",87),e.j41(3,"table-length",88),e.bIt("lengthChange",function(i){e.eBV(n);const l=e.XpG();return e.Njj(l.ListItemChange(i))}),e.k0s()(),e.j41(4,"div",89)(5,"ngb-pagination",90),e.bIt("pageChange",function(i){e.eBV(n);const l=e.XpG();return e.Njj(l.pageChanged(i))}),e.mxI("pageChange",function(i){e.eBV(n);const l=e.XpG();return e.DH7(l.pagination.pageNumber,i)||(l.pagination.pageNumber=i),e.Njj(i)}),e.k0s()()()}if(2&o){const n=e.XpG();e.R7$(2),e.Y8G("pagination",n.pagination),e.R7$(),e.Y8G("lengthTable",n.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",n.pagination.pageSize)("collectionSize",n.pagination.totalItems),e.R50("page",n.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function Zs(o,f){if(1&o){const n=e.RV6();e.j41(0,"form",91,5),e.bIt("ngSubmit",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.cancelOrder())}),e.nrm(2,"ngx-ui-loader",92),e.j41(3,"div",93)(4,"div",94)(5,"button",95),e.bIt("click",function(){const i=e.eBV(n).$implicit;return e.Njj(i.dismiss())}),e.k0s()(),e.j41(6,"div",96)(7,"div",97),e.nrm(8,"lord-icon",98),e.j41(9,"div",99),e.nrm(10,"h3",100)(11,"p",101),e.k0s()(),e.j41(12,"div",102),e.nrm(13,"button",103),e.j41(14,"button",104),e.bIt("click",function(){const i=e.eBV(n).$implicit;return e.Njj(i.dismiss())}),e.k0s()()()()()}if(2&o){const n=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderOperationShap)("loaderId",n.deleteLoader)}}function ea(o,f){if(1&o){const n=e.RV6();e.j41(0,"cancel-sales-model",105),e.bIt("success",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.loadentities())})("dismiss",function(){const i=e.eBV(n).$implicit;return e.Njj(i.dismiss())}),e.k0s()}if(2&o){const n=e.XpG();e.Y8G("orderId",n.orderSelected)}}function ki(o,f){if(1&o){const n=e.RV6();e.j41(0,"order-timeline",106),e.bIt("dismiss",function(){const i=e.eBV(n).$implicit;return e.Njj(i.dismiss())}),e.k0s()}if(2&o){const n=e.XpG();e.Y8G("orderSelected",n.orderSelected)}}function ta(o,f){if(1&o){const n=e.RV6();e.j41(0,"form",91,5),e.bIt("ngSubmit",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.SubmitOrder())}),e.nrm(2,"ngx-ui-loader",92),e.j41(3,"div",93)(4,"div",94)(5,"button",95),e.bIt("click",function(){const i=e.eBV(n).$implicit;return e.Njj(i.dismiss())}),e.k0s()(),e.j41(6,"div",96)(7,"div",97),e.nrm(8,"lord-icon",98),e.j41(9,"div",99),e.nrm(10,"h3",100)(11,"p",101),e.k0s()(),e.j41(12,"div",102),e.nrm(13,"button",103),e.j41(14,"button",104),e.bIt("click",function(){const i=e.eBV(n).$implicit;return e.Njj(i.dismiss())}),e.k0s()()()()()}if(2&o){const n=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderOperationShap)("loaderId",n.deleteLoader)}}let na=(()=>{class o extends Ue.w{constructor(n,s,i,l,h,g,te,me,ge){super(n,s,te,i,l,h,g),this.baseService=i,this.authDaamService=me,this.excelService=ge,this.title="sales.salesOrder.assignOrder",this.titleOperation="sales.salesOrder.assignOrder",this.keySelected="",this.assignUsers=[],this.times=[],this.employees=[],this.searchForm={},this.isResolveList=!0,this.employeeTypes=[{id:1,name:"employeeTeam"},{id:2,name:"managment"},{id:3,name:"customerService"}],this.employeeGroups=[],this.activeindex="2",this.active=2,this.formPassword={},this.roles=[],this.teams=[],this.workTimes=[],this.userTypes=[],this.actives=[{id:!0,name:"active"},{id:!1,name:"noActive"}],this.clientSelected=0,this.cities=[],this.districts=[],this.channels=[],this.status=[],this.countLoad=2,this.isOrderEdit=!1,this.orderSelected={},this.users=[],this.truncks=[],this.isTrunck=!1,this.setDates=(K,Z,z)=>{if(K?.from||K?.to){const Te=K.to||K.from;this.pagination[Z]=this.datePipe.transform(K.from||K.to,"yyyy-MM-ddT00:00:00"),this.pagination[z]=this.datePipe.transform(Te,"yyyy-MM-ddT23:59:59.999")}else this.pagination[Z]=null,this.pagination[z]=null},this.loadentities()}loadentities(){this.countLoad=this.countLoad+1,(!this.isResolveList||1!==this.countLoad)&&(this.pagination.status=50,this.baseService.get(this.pagination).pipe((0,N.Q)(this.notifier)).subscribe(n=>{this.ngxLoader.stopLoader(B.a7),this.entities=n.data,this.pagination.totalItems=n.totalItems,this.LoadSuccess()},n=>{this.ngxLoader.stopLoader(B.a7),this.alertService.error(n)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[])}openModal(n,s,i="md"){this.isOrderEdit=!1,this.form={},this.orderSelected=n,this.modalService.open(s,{centered:!0,size:i})}SubmitOrder(){}cancelOrder(){}ngOnInitMore(){}mapForm(n){return{...n}}onUpdateIsActive(n){this.baseService.updateActive(n).pipe((0,N.Q)(this.notifier)).subscribe(s=>{s?this.alertService.success():this.alertService.error("general.message."+s)},s=>{this.alertService.error()})}mapRegisterForm(n){let s={...n};return s.employeeCode=0,s}onSearch(){let n={...this.searchForm};this.ngxLoader.startLoader("allLoader"),this.setDates(n.dates,"visitDateFrom","visitDateTo"),this.setDates(n.creationDates,"creationTimeFrom","creationTimeTo"),this.loadentities()}LoadSuccess(){this.ngxLoader.stopLoader("allLoader")}onReset(){this.form={},this.searchForm={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems}}configRoute(){this.routerActive.data.pipe((0,N.Q)(this.notifier)).subscribe(n=>{this.entities=n.data,this.pagination.totalItems=n.data?.totalItems},()=>{this.alertService.error()})}mapExcel(){let n=[];return this.entities.forEach(s=>{n.push({"Order Code":s.orderCode,"Created Date":s.createdDate,"City Name":s.cityName,"District Name":s.districtName?s.districtName:"--","Agent Name":s.agentName,Mobile:s.mobile,"Channel Name":s.channelName,"Assigned To":s.teamNames,Times:s.workTimes,"Visit Date":s.visitDate,Services:s.services})}),n}onExportXlsx(){let n=this.mapExcel();this.excelService.exportAsExcelFile(n,this.translateService.instant(this.title),[])}onNavChange(n){1===n.nextId&&(this.activeindex="1"),3===n.nextId&&(this.activeindex="3")}checkEdit(n){return!n.isCancel&&!n.isFinish}openStatusModal(n,s,i,l="md"){this.isEditForm=!1,this.form={},this.form={id:n,status:i},this.modalService.open(s,{centered:!0,size:l})}openModalClient(n,s,i="xl"){this.clientSelected=n.orderCode,this.form=n,this.isOrderEdit=!1,this.modalService.open(s,{centered:!0,size:i})}copytext(n){navigator.clipboard.writeText(n),this.alertService.info(n)}openEditOrderModal(n,s,i="md"){this.form={},this.isOrderEdit=!0,this.clientSelected=n,this.modalService.open(s,{centered:!0,size:i})}OpenOrderTimeLineModel(n,s,i="md"){this.orderSelected=n,this.modalService.open(s,{centered:!0,size:i})}mapUrl(n,s){return null===n||null==s?"":`https://www.google.com/maps/dir//${s},${n}/@${s},${n},17z?hl=en-US`}PrintOrderReceived(n){this.ngxLoader.startLoader("assignLoader"),this.baseService.PrintOrderReceived(n).pipe((0,oe.O)(),(0,de.c)(100),(0,R.Z)(),(0,N.Q)(this.notifier),(0,w.j)(()=>this.ngxLoader.stopLoader("assignLoader"))).subscribe(s=>{this.openUrl(s)},s=>{this.alertService.error("general.message."+s)})}openUrl(n){let s=new Blob([n],{type:n.type});var i=URL.createObjectURL(s);window.open(i,"_blank")}static{this.\u0275fac=function(s){return new(s||o)(e.rXU(P.nX),e.rXU(k.c$),e.rXU(Hn),e.rXU(pe.u),e.rXU(F.vh),e.rXU(U.eD),e.rXU(M.Bq),e.rXU(Mt.J),e.rXU(ut.V))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["assign-order"]],inputs:{isTrunck:"isTrunck"},features:[e.Vt3],decls:39,vars:31,consts:[["tableMaster",""],["cancelOrderModal",""],["deleteModal",""],["OrderTimeLineModel",""],["StatusOrderModal",""],["formEntity","ngForm"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],["overlayColor","rgba(255,255,255,0.05)","fgsColor","rgba(255,255,255,0)",3,"loaderId"],[3,"reset","search","exportXlsx","showAdd","showExport","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","number","id","id","name","id",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["InputTirmFilter","","type","search","id","clientName","name","clientName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["type","text","mwlFlatpickr","","id","isDate","mode","range","altFormat","d/m/Y",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],[2,"width",".2%"],["translate","",2,"width",".5%"],["pSortableColumn","id","translate","",2,"width","6%"],[1,"ri-expand-up-down-line"],["pSortableColumn","offerOrderMasterId","translate","",2,"width","6%"],["pSortableColumn","creationTime","translate","",2,"width","12%"],["pSortableColumn","clientId","translate","",2,"width","10%"],["pSortableColumn","clientVisitDate","translate","",2,"width","12%"],["pSortableColumn","shippingTruckName","translate","",2,"width","8%"],["translate","",2,"width","8%"],["translate","",2,"width","7%"],["translate","",2,"width","6%"],["translate","",2,"width","10%"],[1,"fs-5"],["type","button","pRipple","",1,"border-0","p-button-text","p-button-rounded","p-button-plain",3,"pRowToggler","ngClass"],[1,"code-pointer"],[1,"badge","bg-success-subtle","text-success"],[1,"badge","bg-primary-subtle","text-primary","my-1"],["class","badge bg-danger-subtle text-danger mx-1","translate","orderManagement.order.noMap",4,"ngIf"],["target","_blank","class","badge bg-success-subtle text-success mx-1","translate","orderManagement.order.viewMap",3,"href",4,"ngIf"],[4,"ngIf"],["translate","orderManagement.order.noMap",1,"badge","bg-danger-subtle","text-danger","mx-1"],["target","_blank","translate","orderManagement.order.viewMap",1,"badge","bg-success-subtle","text-success","mx-1",3,"href"],[1,"ri-map-pin-line"],["tooltipPosition","top",1,"btn","btn-sm","btn-warning","edit-list","mx-1",3,"pTooltip"],[1,"ri-swap-line","align-bottom"],["tooltipPosition","top",1,"btn","btn-sm","btn-success","edit-list","mx-1",3,"pTooltip"],[1,"ri-checkbox-circle-fill","align-bottom"],[1,"d-inline-block"],["tooltipPosition","top",1,"btn","btn-sm","btn-primary","edit-list","mx-1",3,"click","pTooltip"],[1,"ri-checkbox-fill","align-bottom"],[1,"dropdown-custom","d-inline-block"],["type","button",1,"btn","dropbtn","btn-soft-secondary","btn-sm","dropdown-custom","arrow-none"],[1,"ri-more-fill"],[1,"dropdown-menu","dropdown-menu-end","dropdown-content",2,"left","0"],[3,"click"],[1,"dropdown-item"],[1,"text-primary","ri-printer-line","align-bottom","me-2"],["translate","sales.salesOrder.printBillOfLading"],[1,"text-success","ri-pencil-fill","align-bottom","me-2"],["translate","general.action.edit"],[1,"text-warning","ri-skip-back-fill","align-bottom","me-2"],["translate","sales.salesOrder.sureOrder"],[1,"text-danger","ri-close-fill","align-bottom","me-2"],["translate","general.action.cancel"],["colspan","17"],[1,"table-detail"],["dataKey","id",3,"value"],["pTemplate","emptymessage"],["translate","sales.salesOrder.itemName",2,"width","10%"],["translate","sales.salesOrder.unit",2,"width","6%"],["translate","sales.salesOrder.clientQuantity",2,"width","8%"],["translate","sales.salesOrder.approvedQuantity",2,"width","8%"],["translate","sales.salesOrder.discountType",2,"width","5%"],["translate","sales.salesOrder.discount",2,"width","5%"],["translate","sales.salesOrder.price",2,"width","5%"],["colspan","8"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[3,"ngSubmit"],[3,"hasProgressBar","fgsType","loaderId"],[1,"modal-content"],[1,"modal-header"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","btn-close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mt-2","text-center"],["src","https://cdn.lordicon.com/gdfrsvpt.json","stroke","bold","state","hover-oscillate","trigger","loop","colors","primary:#f7b84b,secondary:#f06548",2,"width","130px","height","130px"],[1,"pt-2","fs-15","mx-4","mx-sm-5"],["translate","orderManagement.order.AreYouSureMessage"],[1,"text-muted","mx-4","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","submit","id","save","translate","general.action.save",1,"btn","w-sm","btn-danger"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light",3,"click"],[3,"success","dismiss","orderId"],[3,"dismiss","orderSelected"]],template:function(s,i){if(1&s){const l=e.RV6();e.j41(0,"div",6)(1,"div",7)(2,"div",8),e.nrm(3,"ngx-ui-loader",9),e.j41(4,"base-filter",10),e.bIt("reset",function(){return e.eBV(l),e.Njj(i.onReset())})("search",function(){return e.eBV(l),e.Njj(i.onSearch())})("exportXlsx",function(){return e.eBV(l),e.Njj(i.onExportXlsx())}),e.qex(5,11),e.j41(6,"div",12)(7,"div",13)(8,"input",14),e.nI1(9,"translate"),e.mxI("ngModelChange",function(g){return e.eBV(l),e.DH7(i.pagination.id,g)||(i.pagination.id=g),e.Njj(g)}),e.k0s(),e.nrm(10,"i",15),e.k0s()(),e.j41(11,"div",12)(12,"div",13)(13,"input",16),e.nI1(14,"translate"),e.mxI("ngModelChange",function(g){return e.eBV(l),e.DH7(i.pagination.clientName,g)||(i.pagination.clientName=g),e.Njj(g)}),e.k0s(),e.nrm(15,"i",15),e.k0s()(),e.j41(16,"div",12)(17,"input",17),e.nI1(18,"translate"),e.mxI("ngModelChange",function(g){return e.eBV(l),e.DH7(i.searchForm.dates,g)||(i.searchForm.dates=g),e.Njj(g)}),e.k0s()(),e.j41(19,"div",12)(20,"input",17),e.nI1(21,"translate"),e.mxI("ngModelChange",function(g){return e.eBV(l),e.DH7(i.searchForm.creationDates,g)||(i.searchForm.creationDates=g),e.Njj(g)}),e.k0s()(),e.bVm(),e.k0s(),e.j41(22,"div",18)(23,"div",19)(24,"p-table",20,0),e.bIt("onLazyLoad",function(g){return e.eBV(l),e.Njj(i.tableChange(g))})("selectionChange",function(g){return e.eBV(l),e.Njj(i.onSelectionChange(g))}),e.DNE(26,Ti,33,0,"ng-template",21)(27,Ii,37,24,"ng-template",22)(28,Fi,7,1,"ng-template",23),e.k0s()(),e.DNE(29,Ri,2,0,"div",24)(30,Ks,6,8,"div",25),e.k0s()()()(),e.DNE(31,Zs,15,3,"ng-template",null,1,e.C5r)(33,ea,1,1,"ng-template",null,2,e.C5r)(35,ki,1,1,"ng-template",null,3,e.C5r)(37,ta,15,3,"ng-template",null,4,e.C5r)}2&s&&(e.R7$(3),e.Y8G("loaderId","assignLoader"),e.R7$(),e.Y8G("showAdd",!1)("showExport",!1)("totalItems",i.pagination.totalItems)("title",i.title),e.R7$(4),e.FS9("placeholder",e.bMT(9,23,"orderManagement.order.orderCode")),e.R50("ngModel",i.pagination.id),e.R7$(5),e.FS9("placeholder",e.bMT(14,25,"orderManagement.order.agentName")),e.R50("ngModel",i.pagination.clientName),e.R7$(4),e.FS9("placeholder",e.bMT(18,27,"orderManagement.order.visitDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",i.searchForm.dates),e.R7$(3),e.FS9("placeholder",e.bMT(21,29,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",i.searchForm.creationDates),e.R7$(4),e.Y8G("value",i.entities)("rows",i.pagination.pageSize)("lazy",!0)("totalRecords",i.pagination.totalItems),e.R7$(5),e.Y8G("ngIf",i.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",i.pagination.totalItems>0))},dependencies:[F.YU,F.bT,m.qT,m.me,m.Q0,m.BC,m.cb,m.vS,m.cV,M.s5,ie.kL,et.b,$e.p,tt.g,k.Mm,L.XI,Pe.Ei,L.Tg,L.FP,U.Cv,Se.m,$t.m,Nr,F.vh,k.D9],encapsulation:2})}}return o})();function ra(o,f){1&o&&(e.j41(0,"tr",29),e.nrm(1,"th",30),e.j41(2,"th",31),e.EFF(3,"#"),e.k0s(),e.j41(4,"th",32),e.nrm(5,"i",33),e.EFF(6," orderManagement.order.orderCode "),e.k0s(),e.j41(7,"th",34),e.nrm(8,"i",33),e.EFF(9," orderManagement.order.creation "),e.k0s(),e.j41(10,"th",35),e.nrm(11,"i",33),e.EFF(12," orderManagement.order.agentName "),e.k0s(),e.j41(13,"th",36),e.nrm(14,"i",33),e.EFF(15," sales.salesOrder.clientVisitDate "),e.k0s(),e.j41(16,"th",37),e.nrm(17,"i",33),e.EFF(18," sales.salesOrder.totalQuantity "),e.k0s(),e.j41(19,"th",38),e.nrm(20,"i",33),e.EFF(21," sales.salesOrder.totalDiscount "),e.k0s(),e.j41(22,"th",39),e.EFF(23," orderManagement.order.totalTax "),e.k0s(),e.j41(24,"th",40),e.nrm(25,"i",33),e.EFF(26," sales.salesOrder.netPrice "),e.k0s(),e.nrm(27,"th",41),e.k0s())}function ia(o,f){if(1&o){const n=e.RV6();e.j41(0,"button",55),e.nI1(1,"translate"),e.bIt("click",function(){e.eBV(n);const i=e.XpG().$implicit,l=e.XpG(),h=e.sdS(42);return e.Njj(l.openEditOrderModal(i.id,h,"xxl"))}),e.nrm(2,"i",56),e.k0s()}2&o&&e.FS9("pTooltip",e.bMT(1,1,"general.action.edit"))}function Gr(o,f){if(1&o){const n=e.RV6();e.j41(0,"tr",42)(1,"td"),e.nrm(2,"button",43),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td",44),e.bIt("click",function(){const i=e.eBV(n).$implicit,l=e.XpG(),h=e.sdS(40);return e.Njj(l.openModalClient(i,h,"lg"))}),e.j41(6,"bdi",45),e.EFF(7),e.k0s()(),e.j41(8,"td")(9,"span",46),e.EFF(10),e.k0s(),e.EFF(11),e.nI1(12,"date"),e.k0s(),e.j41(13,"td",44),e.bIt("click",function(){const i=e.eBV(n).$implicit,l=e.XpG(),h=e.sdS(38);return e.Njj(l.openModalClient(i,h))}),e.j41(14,"span",47),e.EFF(15),e.k0s()(),e.j41(16,"td"),e.EFF(17),e.nI1(18,"date"),e.k0s(),e.j41(19,"td"),e.EFF(20),e.k0s(),e.j41(21,"td"),e.EFF(22),e.k0s(),e.j41(23,"td"),e.EFF(24),e.k0s(),e.j41(25,"td"),e.EFF(26),e.k0s(),e.j41(27,"td")(28,"div",48)(29,"i",49),e.bIt("click",function(){const i=e.eBV(n).$implicit,l=e.XpG(),h=e.sdS(44);return e.Njj(l.OpenOrderTimeLineModel(i,h,"lg"))}),e.k0s(),e.DNE(30,ia,3,3,"button",50),e.j41(31,"button",51),e.nI1(32,"translate"),e.bIt("click",function(){const i=e.eBV(n).$implicit,l=e.XpG(),h=e.sdS(32);return e.Njj(l.openModal(i.id,h))}),e.nrm(33,"i",52),e.k0s(),e.j41(34,"button",53),e.nI1(35,"translate"),e.bIt("click",function(){const i=e.eBV(n).$implicit,l=e.XpG(),h=e.sdS(34);return e.Njj(l.openModal(i.id,h))}),e.nrm(36,"i",54),e.k0s()()()()}if(2&o){const n=f.$implicit,s=f.rowIndex,i=f.expanded,l=e.XpG();e.R7$(2),e.Y8G("pRowToggler",n)("ngClass",i?" ri-arrow-down-s-line":"  ri-arrow-up-s-line"),e.R7$(2),e.JRh(s+1),e.R7$(3),e.SpI("#SO#",n.id,""),e.R7$(3),e.SpI("",n.creatorName," "),e.R7$(),e.SpI(" ",e.i5U(12,15,n.creationTime,"yyyy-MM-dd HH:mm")," "),e.R7$(4),e.SpI("",n.clientName," "),e.R7$(2),e.SpI(" ",e.i5U(18,18,n.acutalVisitDate,"yyyy-MM-dd HH:mm"),""),e.R7$(3),e.JRh(n.totalQuantity),e.R7$(2),e.JRh(n.totalDiscount),e.R7$(2),e.JRh(n.totalTax),e.R7$(2),e.JRh(n.netPrice),e.R7$(4),e.Y8G("ngIf",l.checkEdit(n)),e.R7$(),e.FS9("pTooltip",e.bMT(32,21,"general.action.proceed")),e.R7$(3),e.FS9("pTooltip",e.bMT(35,23,"general.action.cancel"))}}function sa(o,f){1&o&&(e.j41(0,"tr"),e.nrm(1,"th",61)(2,"th",62)(3,"th",63)(4,"th",64)(5,"th",65)(6,"th",66)(7,"th",67)(8,"th",68),e.k0s())}function aa(o,f){if(1&o&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&o){const n=e.XpG().$implicit;e.R7$(),e.JRh(n.approvedQuantity)}}function oa(o,f){if(1&o){const n=e.RV6();e.j41(0,"input",73),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG().$implicit;return e.DH7(l.approvedQuantity,i)||(l.approvedQuantity=i),e.Njj(i)}),e.k0s()}if(2&o){const n=e.XpG().$implicit;e.R50("ngModel",n.approvedQuantity)}}function la(o,f){if(1&o){const n=e.RV6();e.j41(0,"button",51),e.nI1(1,"translate"),e.bIt("click",function(){e.eBV(n);const i=e.XpG().$implicit,l=e.XpG(2);return e.Njj(l.saveQuantity(i.id,i))}),e.nrm(2,"i",52),e.k0s()}2&o&&e.FS9("pTooltip",e.bMT(1,1,"general.action.save"))}function da(o,f){if(1&o){const n=e.RV6();e.j41(0,"button",55),e.nI1(1,"translate"),e.bIt("click",function(){e.eBV(n);const i=e.XpG().$implicit;return e.Njj(i.isEdit=!i.isEdit)}),e.nrm(2,"i",56),e.k0s()}2&o&&e.FS9("pTooltip",e.bMT(1,1,"general.action.edit"))}function ue(o,f){if(1&o){const n=e.RV6();e.j41(0,"button",53),e.nI1(1,"translate"),e.bIt("click",function(){e.eBV(n);const i=e.XpG().$implicit;return e.Njj(i.isEdit=!1)}),e.nrm(2,"i",54),e.k0s()}2&o&&e.FS9("pTooltip",e.bMT(1,1,"general.action.cancel"))}function ce(o,f){if(1&o&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.DNE(8,aa,2,1,"span",69)(9,oa,1,1,"input",70),e.k0s(),e.j41(10,"td"),e.EFF(11),e.nI1(12,"translate"),e.k0s(),e.j41(13,"td"),e.EFF(14),e.k0s(),e.j41(15,"td"),e.EFF(16),e.k0s(),e.j41(17,"td"),e.DNE(18,la,3,3,"button",71)(19,da,3,3,"button",50)(20,ue,3,3,"button",72),e.k0s()()),2&o){const n=f.$implicit;e.R7$(2),e.JRh(n.itemName),e.R7$(2),e.JRh(n.unitName),e.R7$(2),e.JRh(n.clientQuantity),e.R7$(2),e.Y8G("ngIf",!n.isEdit),e.R7$(),e.Y8G("ngIf",n.isEdit),e.R7$(2),e.JRh(e.bMT(12,11,"sales.salesOrder."+n.discountTypeValue)),e.R7$(3),e.SpI(" ",n.discount," "),e.R7$(2),e.JRh(n.price),e.R7$(2),e.Y8G("ngIf",n.isEdit),e.R7$(),e.Y8G("ngIf",!n.isEdit),e.R7$(),e.Y8G("ngIf",n.isEdit)}}function ca(o,f){1&o&&(e.j41(0,"tr"),e.nrm(1,"td",74),e.k0s())}function ma(o,f){if(1&o&&(e.j41(0,"tr")(1,"td",57)(2,"div",58)(3,"p-table",59),e.DNE(4,sa,9,0,"ng-template",24)(5,ce,21,13,"ng-template",25)(6,ca,2,0,"ng-template",60),e.k0s()()()()),2&o){const n=f.$implicit;e.R7$(3),e.Y8G("value",n.offerOrderDetails)}}function pa(o,f){1&o&&(e.j41(0,"div",75),e.EFF(1," general.table.noData "),e.k0s())}function ua(o,f){if(1&o){const n=e.RV6();e.j41(0,"div",76)(1,"div",77),e.nrm(2,"ngb-pagination-info",78),e.j41(3,"table-length",79),e.bIt("lengthChange",function(i){e.eBV(n);const l=e.XpG();return e.Njj(l.ListItemChange(i))}),e.k0s()(),e.j41(4,"div",80)(5,"ngb-pagination",81),e.bIt("pageChange",function(i){e.eBV(n);const l=e.XpG();return e.Njj(l.pageChanged(i))}),e.mxI("pageChange",function(i){e.eBV(n);const l=e.XpG();return e.DH7(l.pagination.pageNumber,i)||(l.pagination.pageNumber=i),e.Njj(i)}),e.k0s()()()}if(2&o){const n=e.XpG();e.R7$(2),e.Y8G("pagination",n.pagination),e.R7$(),e.Y8G("lengthTable",n.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",n.pagination.pageSize)("collectionSize",n.pagination.totalItems),e.R50("page",n.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function ga(o,f){if(1&o){const n=e.RV6();e.j41(0,"form",82,8),e.bIt("ngSubmit",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.SubmitOrder())}),e.nrm(2,"ngx-ui-loader",83),e.j41(3,"div",84)(4,"div",85)(5,"button",86),e.bIt("click",function(){const i=e.eBV(n).$implicit;return e.Njj(i.dismiss())}),e.k0s()(),e.j41(6,"div",87)(7,"div",88),e.nrm(8,"lord-icon",89),e.j41(9,"div",90),e.nrm(10,"h3",91)(11,"p",92),e.k0s()(),e.j41(12,"div",93),e.nrm(13,"button",94),e.j41(14,"button",95),e.bIt("click",function(){const i=e.eBV(n).$implicit;return e.Njj(i.dismiss())}),e.k0s()()()()()}if(2&o){const n=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderOperationShap)("loaderId",n.deleteLoader)}}function ha(o,f){if(1&o){const n=e.RV6();e.j41(0,"form",82,8),e.bIt("ngSubmit",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.cancelOrder())}),e.nrm(2,"ngx-ui-loader",83),e.j41(3,"div",84)(4,"div",85)(5,"button",86),e.bIt("click",function(){const i=e.eBV(n).$implicit;return e.Njj(i.dismiss())}),e.k0s()(),e.j41(6,"div",87)(7,"div",88),e.nrm(8,"lord-icon",89),e.j41(9,"div",90),e.nrm(10,"h3",91)(11,"p",92),e.k0s()(),e.j41(12,"div",93),e.nrm(13,"button",94),e.j41(14,"button",95),e.bIt("click",function(){const i=e.eBV(n).$implicit;return e.Njj(i.dismiss())}),e.k0s()()()()()}if(2&o){const n=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderOperationShap)("loaderId",n.deleteLoader)}}function Mi(o,f){if(1&o){const n=e.RV6();e.j41(0,"delete-modal",96),e.bIt("deleteConfirm",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.DeleteConfirm())})("dismiss",function(){const i=e.eBV(n).$implicit;return e.Njj(i.dismiss())}),e.k0s()}}function fa(o,f){}function Me(o,f){if(1&o){const n=e.RV6();e.j41(0,"app-all-orders-details",97),e.bIt("dismiss",function(){const i=e.eBV(n).$implicit;return e.Njj(i.dismiss())}),e.k0s()}if(2&o){const n=e.XpG();e.Y8G("orderDetails",n.orderSelected)}}function Oi(o,f){if(1&o&&e.nrm(0,"order-operation",98),2&o){const n=e.XpG();e.Y8G("isOrderEdit",n.isOrderEdit)("isInner",!0)("orderCode",n.clientSelected)}}function xn(o,f){if(1&o){const n=e.RV6();e.j41(0,"order-timeline",99),e.bIt("dismiss",function(){const i=e.eBV(n).$implicit;return e.Njj(i.dismiss())}),e.k0s()}if(2&o){const n=e.XpG();e.Y8G("orderSelected",n.orderSelected)}}let wi=(()=>{class o extends Ue.w{constructor(n,s,i,l,h,g,te,me,ge,K,Z,z,_e,Te,Oe){super(n,s,te,i,l,h,g),this.baseService=i,this.authDaamService=me,this.teamService=ge,this.workTimeService=K,this.excelService=Z,this.cityService=z,this.districtService=_e,this.channelService=Te,this.router=Oe,this.title="sales.salesOrder.newOrders",this.titleOperation="sales.salesOrder.newOrders",this.keySelected="",this.assignUsers=[],this.times=[],this.employees=[],this.searchForm={},this.isResolveList=!0,this.employeeTypes=[{id:1,name:"employeeTeam"},{id:2,name:"managment"},{id:3,name:"customerService"}],this.employeeGroups=[],this.activeindex="2",this.active=2,this.formPassword={},this.roles=[],this.teams=[],this.workTimes=[],this.userTypes=[],this.actives=[{id:!0,name:"active"},{id:!1,name:"noActive"}],this.clientSelected=0,this.cities=[],this.districts=[],this.channels=[],this.status=[],this.countLoad=2,this.isOrderEdit=!1,this.orderSelected={},this.users=[],this.setDates=(q,be,Ce)=>{if(q?.from||q?.to){const ht=q.to||q.from;this.pagination[be]=this.datePipe.transform(q.from||q.to,"yyyy-MM-ddT00:00:00"),this.pagination[Ce]=this.datePipe.transform(ht,"yyyy-MM-ddT23:59:59.999")}else this.pagination[be]=null,this.pagination[Ce]=null},this.loadentities(),this.GetCities(),this.GetChannels(),this.GetTeams(),this.GetTimes(),this.status=[{name:"None",nameAr:"\u0644\u0627 \u0634\u0626",id:0},{name:"Is Review",nameAr:"\u062a\u0645\u062a \u0627\u0644\u0645\u0631\u0627\u062c\u0639\u0629",id:1},{name:"Is Confirmed",nameAr:"\u062a\u0645 \u0627\u0644\u062a\u0623\u0643\u064a\u062f",id:2},{name:"Is Free",nameAr:"\u0645\u062c\u0627\u0646\u064a",id:3},{name:"Is Reopen",nameAr:"\u062a\u0645\u062a \u0625\u0639\u0627\u062f\u0629 \u0641\u062a\u062d\u0647",id:4},{name:"Is Finish",nameAr:"\u0627\u0646\u062a\u0647\u0649",id:5},{name:"Is Cancel",nameAr:"\u062a\u0645 \u0627\u0644\u0625\u0644\u063a\u0627\u0621",id:6},{name:"Is Assign",nameAr:"\u062a\u0645 \u062a\u0639\u064a\u064a\u0646\u0647",id:7},{name:"Is Urgent",nameAr:"\u0639\u0627\u062c\u0644",id:8},{name:"New",nameAr:"\u062c\u062f\u064a\u062f",id:9}]}loadentities(){this.countLoad=this.countLoad+1,(!this.isResolveList||1!==this.countLoad)&&(this.pagination.status=10,this.baseService.get(this.pagination).pipe((0,N.Q)(this.notifier)).subscribe(n=>{this.ngxLoader.stopLoader(B.a7),this.entities=n.data,this.pagination.totalItems=n.totalItems,this.LoadSuccess()},n=>{this.ngxLoader.stopLoader(B.a7),this.alertService.error(n)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[])}SubmitOrder(){this.ngxLoader.startLoader(B.Fq),console.log(this.operationId),this.baseService.changStatus({id:this.operationId,status:30}).pipe((0,oe.O)(),(0,de.c)(this.mainDelay),(0,R.Z)(),(0,N.Q)(this.notifier),(0,w.j)(()=>this.ngxLoader.stopLoader(B.Fq))).subscribe({next:s=>{this.modalService.dismissAll(),this.loadentities(),this.alertService.success()}})}cancelOrder(){this.ngxLoader.startLoader(B.Fq),console.log(this.operationId),this.baseService.changStatus({id:this.operationId,status:40}).pipe((0,oe.O)(),(0,de.c)(this.mainDelay),(0,R.Z)(),(0,N.Q)(this.notifier),(0,w.j)(()=>this.ngxLoader.stopLoader(B.Fq))).subscribe({next:s=>{this.modalService.dismissAll(),this.loadentities(),this.alertService.success()}})}GetCities(){this.cityService.getDropDown().subscribe(n=>{this.cities=n.data},n=>{console.log(n)})}GetDistricts(n){this.districtService.getByCityId(n).subscribe(s=>{this.districts=s.data},s=>{console.log(s)})}GetChannels(){this.channelService.getDropDown().subscribe(n=>{this.channels=n.data},n=>{console.log(n)})}GetTeams(){this.teamService.getDropDown().subscribe(n=>{this.teams=n.data},n=>{console.log(n)})}GetTimes(){this.workTimeService.getDropDown().subscribe(n=>{this.workTimes=n.data},n=>{console.log(n)})}ngOnInitMore(){}mapForm(n){return{...n}}onUpdateIsActive(n){this.baseService.updateActive(n).pipe((0,N.Q)(this.notifier)).subscribe(s=>{s?this.alertService.success():this.alertService.error("general.message."+s)},s=>{this.alertService.error()})}mapRegisterForm(n){let s={...n};return s.employeeCode=0,s}onSearch(){let n={...this.searchForm};this.ngxLoader.startLoader("allLoader"),this.setDates(n.dates,"visitDateFrom","visitDateTo"),this.setDates(n.creationDates,"creationTimeFrom","creationTimeTo"),this.loadentities()}LoadSuccess(){this.ngxLoader.stopLoader("allLoader")}onReset(){this.form={},this.searchForm={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems}}mapExcel(){let n=[];return this.entities.forEach(s=>{n.push({"Order Code":s.orderCode,"Created Date":s.createdDate,"City Name":s.cityName,"District Name":s.districtName?s.districtName:"--",Status:this.translateService.instant(this.getTrnslate(s)),"Agent Name":s.agentName,Mobile:s.mobile,"Channel Name":s.channelName,"Assigned To":s.teamNames,Times:s.workTimes,"Visit Date":s.visitDate,Services:s.services})}),n}onExportXlsx(){let n=this.mapExcel();this.excelService.exportAsExcelFile(n,this.translateService.instant(this.title),[])}onNavChange(n){1===n.nextId&&(this.activeindex="1"),3===n.nextId&&(this.activeindex="3")}goRegister(){this.router.navigateByUrl("/managment/order/new")}goEdit(n){this.router.navigateByUrl("/managment/order/new")}getStatus(n){return 10==n.offerOrderStatus||20==n.offerOrderStatus?"bg-warning-subtle text-warning":30==n.offerOrderStatus?"bg-success-subtle text-success":40==n.offerOrderStatus?"bg-danger-subtle text-danger":50==n.offerOrderStatus?"bg-danger-success text-success":"bg-warning-subtle text-warning"}checkEdit(n){return!n.isCancel&&!n.isFinish}getTrnslate(n){return n.isCancel?"orderManagement.order.cancel":n.isFinish?"orderManagement.order.finish":n.isUrgent?"bg-danger-subtle text-danger":n.isReopen?"orderManagement.order.reopen":n.isAssign?"orderManagement.order.assign":n.isConfirmed?"orderManagement.order.confirmed":n.isFree?"orderManagement.order.free":"orderManagement.order.new"}openModalClient(n,s,i="xl"){this.clientSelected=n.orderCode,this.orderSelected=n,this.isOrderEdit=!1,this.modalService.open(s,{centered:!0,size:i})}oncityChange(n){this.GetDistricts(n.code)}getTimes(n){return n?.split(",")}getServices(n){return n.split("#")}copytext(n){navigator.clipboard.writeText(n),this.alertService.info(n)}openEditOrderModal(n,s,i="md"){this.form={},this.isOrderEdit=!0,this.clientSelected=n,this.modalService.open(s,{centered:!0,size:i})}OpenOrderTimeLineModel(n,s,i="md"){this.orderSelected=n,this.modalService.open(s,{centered:!0,size:i})}saveQuantity(n,s){this.baseService.UpdateQuantity({id:n,quantity:s.approvedQuantity}).pipe((0,N.Q)(this.notifier)).subscribe(l=>{l.success?(this.alertService.success(),this.loadentities()):this.alertService.error("general.message."+l)},l=>{this.alertService.error()}),console.log("Saved Quantity:",s.approvedQuantity)}static{this.\u0275fac=function(s){return new(s||o)(e.rXU(P.nX),e.rXU(k.c$),e.rXU(We),e.rXU(pe.u),e.rXU(F.vh),e.rXU(U.eD),e.rXU(M.Bq),e.rXU(Mt.J),e.rXU(rn.n),e.rXU(sn.G),e.rXU(ut.V),e.rXU(Ze.h),e.rXU(Xt.m),e.rXU(Ut.l),e.rXU(P.Ix))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-new-order"]],features:[e.Vt3],decls:45,vars:31,consts:[["tableMaster",""],["SubmitOrderModal",""],["cancelOrderModal",""],["deleteModal",""],["clientProfile",""],["orderViewModel",""],["orderModel",""],["OrderTimeLineModel",""],["formEntity","ngForm"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],["overlayColor","rgba(255,255,255,0.05)","fgsColor","rgba(255,255,255,0)",3,"loaderId"],[3,"reset","search","exportXlsx","addNew","showAdd","showExport","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","number","id","id","name","id",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["InputTirmFilter","","type","search","id","clientName","name","clientName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["type","text","mwlFlatpickr","","id","isDate","mode","range","altFormat","d/m/Y",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],[2,"width",".2%"],["translate","",2,"width",".5%"],["pSortableColumn","id","translate","",2,"width","6%"],[1,"ri-expand-up-down-line"],["pSortableColumn","creationTime","translate","",2,"width","12%"],["pSortableColumn","clientId","translate","",2,"width","10%"],["pSortableColumn","clientVisitDate","translate","",2,"width","8%"],["pSortableColumn","totalQuantity","translate","",2,"width","8%"],["pSortableColumn","totalDiscount","translate","",2,"width","7%"],["translate","",2,"width","6%"],["pSortableColumn","netPrice","translate","",2,"width","6%"],["translate","",2,"width","10%"],[1,"fs-5"],["type","button","pRipple","",1,"border-0","p-button-text","p-button-rounded","p-button-plain",3,"pRowToggler","ngClass"],[3,"click"],[1,"code-pointer"],[1,"badge","bg-success-subtle","text-success"],[1,"badge","bg-primary-subtle","text-primary","my-1"],[1,"d-inline"],[1,"ri-history-fill","d-inline","text-primary","fs-16","align-middle","me-1",3,"click"],["class","btn btn-sm btn-primary edit-list mx-1","tooltipPosition","top",3,"pTooltip","click",4,"ngIf"],["tooltipPosition","top",1,"btn","btn-sm","btn-success","edit-list","mx-1",3,"click","pTooltip"],[1,"ri-check-double-fill","align-bottom"],["tooltipPosition","top",1,"btn","btn-sm","btn-danger","edit-list","mx-1",3,"click","pTooltip"],[1,"ri-close-fill","align-bottom"],["tooltipPosition","top",1,"btn","btn-sm","btn-primary","edit-list","mx-1",3,"click","pTooltip"],[1,"ri-edit-2-line","align-bottom"],["colspan","17"],[1,"table-detail"],["dataKey","id",3,"value"],["pTemplate","emptymessage"],["translate","sales.salesOrder.itemName",2,"width","10%"],["translate","sales.salesOrder.unit",2,"width","6%"],["translate","sales.salesOrder.clientQuantity",2,"width","8%"],["translate","sales.salesOrder.approvedQuantity",2,"width","8%"],["translate","sales.salesOrder.discountType",2,"width","5%"],["translate","sales.salesOrder.discount",2,"width","5%"],["translate","sales.salesOrder.price",2,"width","5%"],[2,"width","5%"],[4,"ngIf"],["type","number","class","form-control fs-6",3,"ngModel","ngModelChange",4,"ngIf"],["class","btn btn-sm btn-success edit-list mx-1","tooltipPosition","top",3,"pTooltip","click",4,"ngIf"],["class","btn btn-sm btn-danger edit-list mx-1","tooltipPosition","top",3,"pTooltip","click",4,"ngIf"],["type","number",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["colspan","8"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[3,"ngSubmit"],[3,"hasProgressBar","fgsType","loaderId"],[1,"modal-content"],[1,"modal-header"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","btn-close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mt-2","text-center"],["src","https://cdn.lordicon.com/gdfrsvpt.json","stroke","bold","state","hover-oscillate","trigger","loop","colors","primary:#f7b84b,secondary:#f06548",2,"width","130px","height","130px"],[1,"pt-2","fs-15","mx-4","mx-sm-5"],["translate","orderManagement.order.AreYouSureMessage"],[1,"text-muted","mx-4","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","submit","id","save","translate","general.action.save",1,"btn","w-sm","btn-danger"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light",3,"click"],[3,"deleteConfirm","dismiss"],[3,"dismiss","orderDetails"],[3,"isOrderEdit","isInner","orderCode"],[3,"dismiss","orderSelected"]],template:function(s,i){if(1&s){const l=e.RV6();e.j41(0,"div",9)(1,"div",10)(2,"div",11),e.nrm(3,"ngx-ui-loader",12),e.j41(4,"base-filter",13),e.bIt("reset",function(){return e.eBV(l),e.Njj(i.onReset())})("search",function(){return e.eBV(l),e.Njj(i.onSearch())})("exportXlsx",function(){return e.eBV(l),e.Njj(i.onExportXlsx())})("addNew",function(){return e.eBV(l),e.Njj(i.goRegister())}),e.qex(5,14),e.j41(6,"div",15)(7,"div",16)(8,"input",17),e.nI1(9,"translate"),e.mxI("ngModelChange",function(g){return e.eBV(l),e.DH7(i.pagination.id,g)||(i.pagination.id=g),e.Njj(g)}),e.k0s(),e.nrm(10,"i",18),e.k0s()(),e.j41(11,"div",15)(12,"div",16)(13,"input",19),e.nI1(14,"translate"),e.mxI("ngModelChange",function(g){return e.eBV(l),e.DH7(i.pagination.clientName,g)||(i.pagination.clientName=g),e.Njj(g)}),e.k0s(),e.nrm(15,"i",18),e.k0s()(),e.j41(16,"div",15)(17,"input",20),e.nI1(18,"translate"),e.mxI("ngModelChange",function(g){return e.eBV(l),e.DH7(i.searchForm.dates,g)||(i.searchForm.dates=g),e.Njj(g)}),e.k0s()(),e.j41(19,"div",15)(20,"input",20),e.nI1(21,"translate"),e.mxI("ngModelChange",function(g){return e.eBV(l),e.DH7(i.searchForm.creationDates,g)||(i.searchForm.creationDates=g),e.Njj(g)}),e.k0s()(),e.bVm(),e.k0s(),e.j41(22,"div",21)(23,"div",22)(24,"p-table",23,0),e.bIt("onLazyLoad",function(g){return e.eBV(l),e.Njj(i.tableChange(g))})("selectionChange",function(g){return e.eBV(l),e.Njj(i.onSelectionChange(g))}),e.DNE(26,ra,28,0,"ng-template",24)(27,Gr,37,25,"ng-template",25)(28,ma,7,1,"ng-template",26),e.k0s()(),e.DNE(29,pa,2,0,"div",27)(30,ua,6,8,"div",28),e.k0s()()()(),e.DNE(31,ga,15,3,"ng-template",null,1,e.C5r)(33,ha,15,3,"ng-template",null,2,e.C5r)(35,Mi,1,0,"ng-template",null,3,e.C5r)(37,fa,0,0,"ng-template",null,4,e.C5r)(39,Me,1,1,"ng-template",null,5,e.C5r)(41,Oi,1,3,"ng-template",null,6,e.C5r)(43,xn,1,1,"ng-template",null,7,e.C5r)}2&s&&(e.R7$(3),e.Y8G("loaderId","newLoader"),e.R7$(),e.Y8G("showAdd",!1)("showExport",!1)("totalItems",i.pagination.totalItems)("title",i.title),e.R7$(4),e.FS9("placeholder",e.bMT(9,23,"orderManagement.order.orderCode")),e.R50("ngModel",i.pagination.id),e.R7$(5),e.FS9("placeholder",e.bMT(14,25,"orderManagement.order.agentName")),e.R50("ngModel",i.pagination.clientName),e.R7$(4),e.FS9("placeholder",e.bMT(18,27,"orderManagement.order.visitDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",i.searchForm.dates),e.R7$(3),e.FS9("placeholder",e.bMT(21,29,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",i.searchForm.creationDates),e.R7$(4),e.Y8G("value",i.entities)("rows",i.pagination.pageSize)("lazy",!0)("totalRecords",i.pagination.totalItems),e.R7$(5),e.Y8G("ngIf",i.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",i.pagination.totalItems>0))},dependencies:[F.YU,F.bT,m.qT,m.me,m.Q0,m.BC,m.cb,m.vS,m.cV,M.s5,ie.kL,et.b,yn.L,Rt.w,$e.p,tt.g,k.Mm,L.XI,Pe.Ei,L.Tg,L.FP,U.Cv,Se.m,$t.m,F.vh,k.D9],encapsulation:2})}}return o})();const Vr=o=>({"card-active":o}),Le=o=>[o];function Ei(o,f){1&o&&(e.j41(0,"tr",28),e.nrm(1,"th",29),e.j41(2,"th",30),e.EFF(3,"#"),e.k0s(),e.j41(4,"th",31),e.nrm(5,"i",32),e.EFF(6," orderManagement.order.orderCode "),e.k0s(),e.j41(7,"th",33),e.nrm(8,"i",32),e.EFF(9," orderManagement.order.creation "),e.k0s(),e.j41(10,"th",34),e.nrm(11,"i",32),e.EFF(12," orderManagement.order.agentName "),e.k0s(),e.j41(13,"th",35),e.nrm(14,"i",32),e.EFF(15," sales.salesOrder.clientVisitDate "),e.k0s(),e.j41(16,"th",36),e.EFF(17," sales.salesOrder.deliveryStatus "),e.k0s(),e.j41(18,"th",37),e.nrm(19,"i",32),e.EFF(20," sales.salesOrder.totalQuantity "),e.k0s(),e.j41(21,"th",38),e.nrm(22,"i",32),e.EFF(23," sales.salesOrder.totalDiscount "),e.k0s(),e.j41(24,"th",39),e.EFF(25," orderManagement.order.totalTax "),e.k0s(),e.j41(26,"th",40),e.nrm(27,"i",32),e.EFF(28," sales.salesOrder.netPrice "),e.k0s(),e.nrm(29,"th",36),e.k0s())}function Ni(o,f){1&o&&e.nrm(0,"span",67)}function Di(o,f){1&o&&e.nrm(0,"span",68)}function Li(o,f){1&o&&e.nrm(0,"span",69)}function Gi(o,f){if(1&o){const n=e.RV6();e.j41(0,"button",70),e.nI1(1,"translate"),e.bIt("click",function(){e.eBV(n);const i=e.XpG().$implicit,l=e.XpG(),h=e.sdS(34);return e.Njj(l.openShippingModal(i.id,h,"lg"))}),e.nrm(2,"i",71),e.k0s()}2&o&&e.FS9("pTooltip",e.bMT(1,1,"sales.salesOrder.shipping"))}function Vi(o,f){if(1&o){const n=e.RV6();e.j41(0,"tr",41)(1,"td"),e.nrm(2,"button",42),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td")(6,"bdi",43),e.EFF(7),e.k0s()(),e.j41(8,"td")(9,"span",44),e.EFF(10),e.k0s(),e.EFF(11),e.nI1(12,"date"),e.k0s(),e.j41(13,"td")(14,"span",45),e.EFF(15),e.k0s()(),e.j41(16,"td"),e.DNE(17,Ni,1,0,"span",46)(18,Di,1,0,"span",47)(19,Li,1,0,"span",48),e.k0s(),e.j41(20,"td"),e.EFF(21),e.nI1(22,"date"),e.k0s(),e.j41(23,"td"),e.EFF(24),e.k0s(),e.j41(25,"td"),e.EFF(26),e.k0s(),e.j41(27,"td"),e.EFF(28),e.k0s(),e.j41(29,"td"),e.EFF(30),e.k0s(),e.j41(31,"td")(32,"div",49),e.DNE(33,Gi,3,3,"button",50),e.j41(34,"span",49)(35,"div",51)(36,"button",52),e.nrm(37,"i",53),e.k0s(),e.j41(38,"ul",54)(39,"li")(40,"span",55),e.nrm(41,"i",56)(42,"span",57),e.k0s()(),e.j41(43,"li")(44,"span",55),e.nrm(45,"i",58)(46,"span",59),e.k0s()(),e.j41(47,"li",60),e.bIt("click",function(){const i=e.eBV(n).$implicit,l=e.XpG(),h=e.sdS(40);return e.Njj(l.openStatusModal(i.id,h,50,"md"))}),e.j41(48,"span",55),e.nrm(49,"i",61)(50,"span",62),e.k0s()(),e.j41(51,"li",60),e.bIt("click",function(){const i=e.eBV(n).$implicit,l=e.XpG(),h=e.sdS(40);return e.Njj(l.openStatusModal(i.id,h,10,"md"))}),e.j41(52,"span",55),e.nrm(53,"i",63)(54,"span",64),e.k0s()(),e.j41(55,"li",60),e.bIt("click",function(){const i=e.eBV(n).$implicit,l=e.XpG(),h=e.sdS(36);return e.Njj(l.openModal(i.id,h))}),e.j41(56,"span",55),e.nrm(57,"i",65)(58,"span",66),e.k0s()()()()()()()()}if(2&o){const n=f.$implicit,s=f.rowIndex,i=f.expanded;e.R7$(2),e.Y8G("pRowToggler",n)("ngClass",i?" ri-arrow-down-s-line":"  ri-arrow-up-s-line"),e.R7$(2),e.JRh(s+1),e.R7$(3),e.SpI("#SO#",n.id,""),e.R7$(3),e.SpI("",n.creatorName," "),e.R7$(),e.SpI(" ",e.i5U(12,16,n.creationTime,"yyyy-MM-dd HH:mm")," "),e.R7$(4),e.SpI("",n.clientName," "),e.R7$(2),e.Y8G("ngIf",n.totalQuantityDelivery<=0),e.R7$(),e.Y8G("ngIf",n.totalQuantityDelivery>0&&n.totalQuantityDelivery==n.totalQuantity),e.R7$(),e.Y8G("ngIf",n.totalQuantityDelivery>0&&n.totalQuantityDelivery<n.totalQuantity),e.R7$(2),e.SpI(" ",e.i5U(22,19,n.acutalVisitDate,"yyyy-MM-dd HH:mm"),""),e.R7$(3),e.JRh(n.totalQuantity),e.R7$(2),e.JRh(n.totalDiscount),e.R7$(2),e.JRh(n.totalTax),e.R7$(2),e.JRh(n.netPrice),e.R7$(3),e.Y8G("ngIf",!(n.totalQuantityDelivery>0&&n.totalQuantityDelivery==n.totalQuantity))}}function Ye(o,f){1&o&&(e.j41(0,"tr"),e.nrm(1,"th",76)(2,"th",77)(3,"th",78)(4,"th",79)(5,"th",80)(6,"th",81)(7,"th",82)(8,"th",83),e.k0s())}function _a(o,f){if(1&o&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td")(8,"span"),e.EFF(9),e.k0s()(),e.j41(10,"td")(11,"span"),e.EFF(12),e.k0s()(),e.j41(13,"td"),e.EFF(14),e.nI1(15,"translate"),e.k0s(),e.j41(16,"td"),e.EFF(17),e.k0s(),e.j41(18,"td"),e.EFF(19),e.k0s()()),2&o){const n=f.$implicit;e.R7$(2),e.JRh(n.itemName),e.R7$(2),e.JRh(n.unitName),e.R7$(2),e.JRh(n.clientQuantity),e.R7$(3),e.JRh(n.approvedQuantity),e.R7$(3),e.JRh(n.deliveryQuantity),e.R7$(2),e.JRh(e.bMT(15,8,"sales.salesOrder."+n.discountTypeValue)),e.R7$(3),e.SpI(" ",n.discount," "),e.R7$(2),e.JRh(n.price)}}function nt(o,f){1&o&&(e.j41(0,"tr"),e.nrm(1,"td",84),e.k0s())}function ba(o,f){if(1&o&&(e.j41(0,"tr")(1,"td",72)(2,"div",73)(3,"p-table",74),e.DNE(4,Ye,9,0,"ng-template",23)(5,_a,20,10,"ng-template",24)(6,nt,2,0,"ng-template",75),e.k0s()()()()),2&o){const n=f.$implicit;e.R7$(3),e.Y8G("value",n.offerOrderDetails)}}function Ai(o,f){1&o&&(e.j41(0,"div",85),e.EFF(1," general.table.noData "),e.k0s())}function Nt(o,f){if(1&o){const n=e.RV6();e.j41(0,"div",86)(1,"div",87),e.nrm(2,"ngb-pagination-info",88),e.j41(3,"table-length",89),e.bIt("lengthChange",function(i){e.eBV(n);const l=e.XpG();return e.Njj(l.ListItemChange(i))}),e.k0s()(),e.j41(4,"div",90)(5,"ngb-pagination",91),e.bIt("pageChange",function(i){e.eBV(n);const l=e.XpG();return e.Njj(l.pageChanged(i))}),e.mxI("pageChange",function(i){e.eBV(n);const l=e.XpG();return e.DH7(l.pagination.pageNumber,i)||(l.pagination.pageNumber=i),e.Njj(i)}),e.k0s()()()}if(2&o){const n=e.XpG();e.R7$(2),e.Y8G("pagination",n.pagination),e.R7$(),e.Y8G("lengthTable",n.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",n.pagination.pageSize)("collectionSize",n.pagination.totalItems),e.R50("page",n.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function Qn(o,f){if(1&o){const n=e.RV6();e.j41(0,"form",92,6),e.bIt("ngSubmit",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.cancelOrder())}),e.nrm(2,"ngx-ui-loader",93),e.j41(3,"div",94)(4,"div",95)(5,"button",96),e.bIt("click",function(){const i=e.eBV(n).$implicit;return e.Njj(i.dismiss())}),e.k0s()(),e.j41(6,"div",97)(7,"div",98),e.nrm(8,"lord-icon",99),e.j41(9,"div",100),e.nrm(10,"h3",101)(11,"p",102),e.k0s()(),e.j41(12,"div",103),e.nrm(13,"button",104),e.j41(14,"button",105),e.bIt("click",function(){const i=e.eBV(n).$implicit;return e.Njj(i.dismiss())}),e.k0s()()()()()}if(2&o){const n=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderOperationShap)("loaderId",n.deleteLoader)}}function Ar(o,f){if(1&o){const n=e.RV6();e.qex(0),e.j41(1,"div",112)(2,"div",160),e.bIt("click",function(){const i=e.eBV(n).$implicit,l=e.XpG(3);return e.Njj(l.selectTruck(i.id))}),e.j41(3,"div",161)(4,"p"),e.nrm(5,"i",71),e.k0s(),e.j41(6,"p"),e.EFF(7),e.k0s(),e.j41(8,"p"),e.EFF(9),e.k0s(),e.j41(10,"p")(11,"span",162)(12,"span"),e.EFF(13,"#SO#"),e.k0s(),e.j41(14,"span"),e.EFF(15),e.k0s()()()()()(),e.bVm()}if(2&o){const n=f.$implicit;e.R7$(2),e.Y8G("ngClass",e.eq3(4,Vr,n.isSelected)),e.R7$(5),e.JRh(n.name),e.R7$(2),e.JRh(n.truckNumber),e.R7$(6),e.JRh(n.orderCount)}}function fe(o,f){if(1&o&&(e.j41(0,"div",158)(1,"label",113),e.EFF(2,"sales.salesOrder.truncks"),e.k0s(),e.DNE(3,Ar,16,6,"ng-container",159),e.k0s()),2&o){const n=e.XpG(2);e.R7$(3),e.Y8G("ngForOf",n.truncks)}}function Dt(o,f){if(1&o){const n=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td")(4,"ng-select",163),e.mxI("ngModelChange",function(i){const l=e.eBV(n).$implicit;return e.DH7(l.unitId,i)||(l.unitId=i),e.Njj(i)}),e.k0s()(),e.j41(5,"td")(6,"input",164),e.bIt("ngModelChange",function(i){const l=e.eBV(n).$index,h=e.XpG(2);return e.Njj(h.quantitySelect(i,l))}),e.mxI("ngModelChange",function(i){const l=e.eBV(n).$implicit;return e.DH7(l.quantity,i)||(l.quantity=i),e.Njj(i)}),e.k0s()(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td")(10,"ng-select",163),e.bIt("ngModelChange",function(i){const l=e.eBV(n).$index,h=e.XpG(2);return e.Njj(h.discountSelect(i,l,2))}),e.mxI("ngModelChange",function(i){const l=e.eBV(n).$implicit;return e.DH7(l.discountType,i)||(l.discountType=i),e.Njj(i)}),e.k0s()(),e.j41(11,"td")(12,"input",165),e.bIt("ngModelChange",function(i){const l=e.eBV(n).$index,h=e.XpG(2);return e.Njj(h.discountSelect(i,l))}),e.mxI("ngModelChange",function(i){const l=e.eBV(n).$implicit;return e.DH7(l.discount,i)||(l.discount=i),e.Njj(i)}),e.k0s()(),e.j41(13,"td"),e.EFF(14),e.k0s()()}if(2&o){const n=f.$implicit,s=f.$index,i=e.XpG(2);e.R7$(2),e.SpI(" ",n.itemName," "),e.R7$(2),e.Y8G("name","unitId"+e.eq3(13,Le,s))("items",n.units),e.R50("ngModel",n.unitId),e.R7$(2),e.Y8G("name","quantity"+e.eq3(15,Le,s)),e.R50("ngModel",n.quantity),e.R7$(2),e.SpI(" ",n.price," "),e.R7$(2),e.Y8G("name","discountType"+e.eq3(17,Le,s))("items",i.discountTypes),e.R50("ngModel",n.discountType),e.R7$(2),e.Y8G("name","discount"+e.eq3(19,Le,s)),e.R50("ngModel",n.discount),e.R7$(2),e.SpI("",n.net," ")}}function Br(o,f){if(1&o){const n=e.RV6();e.j41(0,"div",106)(1,"div",107)(2,"h4",108),e.nrm(3,"span",109),e.k0s(),e.j41(4,"button",110),e.bIt("click",function(){const i=e.eBV(n).$implicit;return e.Njj(i.dismiss("Cross click"))}),e.k0s()(),e.j41(5,"div",97),e.nrm(6,"ngx-ui-loader",93),e.j41(7,"form",111,6),e.bIt("submit",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.updateTruck())}),e.j41(9,"div",8)(10,"div",112)(11,"label",113),e.EFF(12,"sales.salesOrder.clientDeliveryDate"),e.k0s(),e.nrm(13,"input",114),e.k0s(),e.j41(14,"div",112)(15,"label",115),e.EFF(16,"sales.salesOrder.acutalDeliveryDate"),e.k0s(),e.j41(17,"input",116),e.bIt("ngModelChange",function(i){e.eBV(n);const l=e.XpG();return e.Njj(l.dateChangeModal(i))}),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG();return e.DH7(l.form.acutalVisitDate,i)||(l.form.acutalVisitDate=i),e.Njj(i)}),e.k0s()(),e.j41(18,"div",112)(19,"label",115),e.EFF(20,"sales.salesOrder.truncks"),e.k0s(),e.j41(21,"ng-select",117),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG();return e.DH7(l.form.shippingTruckId,i)||(l.form.shippingTruckId=i),e.Njj(i)}),e.k0s()(),e.j41(22,"div",112),e.nrm(23,"label",118),e.j41(24,"ng-select",119),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG();return e.DH7(l.form.clientLocationId,i)||(l.form.clientLocationId=i),e.Njj(i)}),e.k0s()(),e.j41(25,"div",120)(26,"label",121),e.EFF(27,"sales.clientCollection.notes"),e.k0s(),e.j41(28,"textarea",122,7),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG();return e.DH7(l.form.notes,i)||(l.form.notes=i),e.Njj(i)}),e.k0s()(),e.j41(30,"div",120)(31,"label",113),e.EFF(32,"sales.salesOrder.terms"),e.k0s(),e.j41(33,"textarea",123),e.nI1(34,"translate"),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG();return e.DH7(l.form.terms,i)||(l.form.terms=i),e.Njj(i)}),e.k0s()(),e.DNE(35,fe,4,1,"div",124),e.k0s(),e.j41(36,"div",125)(37,"div",126)(38,"div",127)(39,"div",128),e.nrm(40,"h5",129),e.k0s()(),e.j41(41,"div",20)(42,"div",130)(43,"table",131)(44,"thead",132)(45,"tr"),e.nrm(46,"th",133)(47,"th",134)(48,"th",135)(49,"th",136)(50,"th",137)(51,"th",138)(52,"th",139),e.k0s()(),e.j41(53,"tbody"),e.Z7z(54,Dt,15,21,"tr",null,e.Vm6),e.j41(56,"tr",140),e.nrm(57,"td",141),e.j41(58,"td",142)(59,"table",143)(60,"tbody")(61,"tr"),e.nrm(62,"td",144),e.j41(63,"td",145),e.EFF(64),e.k0s()(),e.j41(65,"tr"),e.nrm(66,"td",146),e.j41(67,"td",145)(68,"div",147)(69,"ng-select",148),e.bIt("change",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.getTotal())}),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG();return e.DH7(l.form.totalAddDiscountType,i)||(l.form.totalAddDiscountType=i),e.Njj(i)}),e.k0s(),e.j41(70,"input",149),e.bIt("change",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.getTotal())}),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG();return e.DH7(l.form.totalAddDiscount,i)||(l.form.totalAddDiscount=i),e.Njj(i)}),e.k0s()()()(),e.j41(71,"tr",150),e.nrm(72,"td",151),e.j41(73,"td",145),e.EFF(74),e.k0s()(),e.j41(75,"tr",152),e.nrm(76,"th",153),e.j41(77,"th",145),e.EFF(78),e.k0s()()()()()()()()()()()(),e.j41(79,"div",154)(80,"button",155),e.nrm(81,"i",156)(82,"span",157),e.k0s()()()()()}if(2&o){const n=e.sdS(8),s=e.XpG();e.R7$(6),e.Y8G("hasProgressBar",!1)("fgsType",s.loaderOperationShap)("loaderId",s.operationLoader),e.R7$(7),e.Y8G("disabled",!0)("readonly",!0)("value",s.form.clientVisitDate),e.R7$(4),e.R50("ngModel",s.form.acutalVisitDate),e.Y8G("altInput",!0)("enableTime",!0)("convertModelValue",!0)("dateFormat","d-m-Y H:i"),e.R7$(4),e.Y8G("items",s.truncks),e.R50("ngModel",s.form.shippingTruckId),e.R7$(3),e.Y8G("items",s.locations),e.R50("ngModel",s.form.clientLocationId),e.R7$(4),e.R50("ngModel",s.form.notes),e.R7$(5),e.Y8G("placeholder",e.bMT(34,26,"sales.salesOrder.termsPlaceholder")),e.R50("ngModel",s.form.terms),e.R7$(2),e.Y8G("ngIf",!1),e.R7$(19),e.Dyx(s.form.details),e.R7$(10),e.JRh(s.form.total),e.R7$(5),e.Y8G("items",s.discountTypes),e.R50("ngModel",s.form.totalAddDiscountType),e.R7$(),e.R50("ngModel",s.form.totalAddDiscount),e.R7$(4),e.JRh(s.form.tax),e.R7$(4),e.JRh(s.form.totalNet),e.R7$(2),e.Y8G("disabled",!n.valid)}}function va(o,f){if(1&o){const n=e.RV6();e.j41(0,"cancel-sales-model",166),e.bIt("success",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.loadentities())})("dismiss",function(){const i=e.eBV(n).$implicit;return e.Njj(i.dismiss())}),e.k0s()}if(2&o){const n=e.XpG();e.Y8G("orderId",n.orderSelected)}}function $r(o,f){if(1&o){const n=e.RV6();e.j41(0,"order-timeline",167),e.bIt("dismiss",function(){const i=e.eBV(n).$implicit;return e.Njj(i.dismiss())}),e.k0s()}if(2&o){const n=e.XpG();e.Y8G("orderSelected",n.orderSelected)}}function Ca(o,f){if(1&o){const n=e.RV6();e.j41(0,"form",92,6),e.bIt("ngSubmit",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.SubmitOrder())}),e.nrm(2,"ngx-ui-loader",93),e.j41(3,"div",94)(4,"div",95)(5,"button",96),e.bIt("click",function(){const i=e.eBV(n).$implicit;return e.Njj(i.dismiss())}),e.k0s()(),e.j41(6,"div",97)(7,"div",98),e.nrm(8,"lord-icon",99),e.j41(9,"div",100),e.nrm(10,"h3",101)(11,"p",102),e.k0s()(),e.j41(12,"div",103),e.nrm(13,"button",104),e.j41(14,"button",105),e.bIt("click",function(){const i=e.eBV(n).$implicit;return e.Njj(i.dismiss())}),e.k0s()()()()()}if(2&o){const n=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderOperationShap)("loaderId",n.deleteLoader)}}let Sa=(()=>{class o extends Ue.w{constructor(n,s,i,l,h,g,te,me,ge,K,Z,z,_e,Te,Oe,q){super(n,s,te,i,l,h,g),this.baseService=i,this.authDaamService=me,this.teamService=ge,this.workTimeService=K,this.excelService=Z,this.cityService=z,this.districtService=_e,this.channelService=Te,this.router=Oe,this.orderReceivedService=q,this.title="sales.salesOrder.sureOrder",this.titleOperation="sales.salesOrder.sureOrder",this.keySelected="",this.assignUsers=[],this.times=[],this.employees=[],this.searchForm={},this.isResolveList=!0,this.employeeTypes=[{id:1,name:"employeeTeam"},{id:2,name:"managment"},{id:3,name:"customerService"}],this.employeeGroups=[],this.activeindex="2",this.active=2,this.formPassword={},this.roles=[],this.teams=[],this.workTimes=[],this.userTypes=[],this.actives=[{id:!0,name:"active"},{id:!1,name:"noActive"}],this.clientSelected=0,this.cities=[],this.districts=[],this.channels=[],this.status=[],this.countLoad=2,this.isOrderEdit=!1,this.orderSelected={},this.users=[],this.truncks=[],this.locations=[],this.discountTypes=[{id:1,name:"Cost"},{id:2,name:"Precentage"}],this.setDates=(be,Ce,it)=>{if(be?.from||be?.to){const ft=be.to||be.from;this.pagination[Ce]=this.datePipe.transform(be.from||be.to,"yyyy-MM-ddT00:00:00"),this.pagination[it]=this.datePipe.transform(ft,"yyyy-MM-ddT23:59:59.999")}else this.pagination[Ce]=null,this.pagination[it]=null},this.loadentities(),this.discountTypes.forEach(be=>{be.name=this.getTranslationText("sales.salesOrder."+be.name)})}loadentities(){this.countLoad=this.countLoad+1,(!this.isResolveList||1!==this.countLoad)&&(this.pagination.status=30,this.baseService.get(this.pagination).pipe((0,N.Q)(this.notifier)).subscribe(n=>{this.ngxLoader.stopLoader(B.a7),this.entities=n.data,this.pagination.totalItems=n.totalItems,this.LoadSuccess()},n=>{this.ngxLoader.stopLoader(B.a7),this.alertService.error(n)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[])}openModal(n,s,i="md"){this.isOrderEdit=!1,this.form={},this.orderSelected=n,this.modalService.open(s,{centered:!0,size:i})}SubmitOrder(){this.ngxLoader.startLoader(B.Fq),this.baseService.changStatus({id:this.form.id,status:this.form.status}).pipe((0,oe.O)(),(0,de.c)(this.mainDelay),(0,R.Z)(),(0,N.Q)(this.notifier),(0,w.j)(()=>this.ngxLoader.stopLoader(B.Fq))).subscribe({next:s=>{this.modalService.dismissAll(),this.loadentities(),this.alertService.success()}})}cancelOrder(){this.ngxLoader.startLoader(B.Fq),console.log(this.operationId),this.baseService.changStatus({id:this.operationId,status:40}).pipe((0,oe.O)(),(0,de.c)(this.mainDelay),(0,R.Z)(),(0,N.Q)(this.notifier),(0,w.j)(()=>this.ngxLoader.stopLoader(B.Fq))).subscribe({next:s=>{this.modalService.dismissAll(),this.loadentities(),this.alertService.success()}})}GetDistricts(n){this.districtService.getByCityId(n).subscribe(s=>{this.districts=s.data},s=>{console.log(s)})}ngOnInitMore(){}mapForm(n){return{...n}}onUpdateIsActive(n){this.baseService.updateActive(n).pipe((0,N.Q)(this.notifier)).subscribe(s=>{s?this.alertService.success():this.alertService.error("general.message."+s)},s=>{this.alertService.error()})}mapRegisterForm(n){let s={...n};return s.employeeCode=0,s}onSearch(){let n={...this.searchForm};this.ngxLoader.startLoader("allLoader"),this.setDates(n.dates,"visitDateFrom","visitDateTo"),this.setDates(n.creationDates,"creationTimeFrom","creationTimeTo"),this.loadentities()}LoadSuccess(){this.ngxLoader.stopLoader("allLoader")}onReset(){this.form={},this.searchForm={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems}}configRoute(){this.routerActive.data.pipe((0,N.Q)(this.notifier)).subscribe(n=>{this.entities=n.data,this.pagination.totalItems=n.data?.totalItems},()=>{this.alertService.error()})}mapExcel(){let n=[];return this.entities.forEach(s=>{n.push({"Order Code":s.orderCode,"Created Date":s.createdDate,"City Name":s.cityName,"District Name":s.districtName?s.districtName:"--","Agent Name":s.agentName,Mobile:s.mobile,"Channel Name":s.channelName,"Assigned To":s.teamNames,Times:s.workTimes,"Visit Date":s.visitDate,Services:s.services})}),n}onExportXlsx(){let n=this.mapExcel();this.excelService.exportAsExcelFile(n,this.translateService.instant(this.title),[])}onNavChange(n){1===n.nextId&&(this.activeindex="1"),3===n.nextId&&(this.activeindex="3")}goRegister(){this.router.navigateByUrl("/managment/order/new")}goEdit(n){this.router.navigateByUrl("/managment/order/new")}getStatus(n){return 10==n.offerOrderStatus||20==n.offerOrderStatus?"bg-warning-subtle text-warning":30==n.offerOrderStatus?"bg-success-subtle text-success":40==n.offerOrderStatus?"bg-danger-subtle text-danger":50==n.offerOrderStatus?"bg-danger-success text-success":"bg-warning-subtle text-warning"}checkEdit(n){return!n.isCancel&&!n.isFinish}openStatusModal(n,s,i,l="md"){this.isEditForm=!1,this.form={},this.form={id:n,status:i},this.modalService.open(s,{centered:!0,size:l})}openModalClient(n,s,i="xl"){this.clientSelected=n.orderCode,this.form=n,this.isOrderEdit=!1,this.modalService.open(s,{centered:!0,size:i})}copytext(n){navigator.clipboard.writeText(n),this.alertService.info(n)}openEditOrderModal(n,s,i="md"){this.form={},this.isOrderEdit=!0,this.clientSelected=n,this.modalService.open(s,{centered:!0,size:i})}OpenOrderTimeLineModel(n,s,i="md"){this.orderSelected=n,this.modalService.open(s,{centered:!0,size:i})}selectTruck(n){this.truncks=this.truncks.map(s=>({...s,isSelected:s.id===n}))}getSelectedTruckId(){const n=this.truncks.find(s=>s.isSelected);return n?n.id:null}convertToISO(n){if(n instanceof Date)return n.toISOString();if("string"==typeof n){const[s,i,l,h,g]=n.split(/[-\s:]/);return`${l}-${i}-${s}T${h}:${g}:00`}}updateTruck(){this.form.acutalVisitDate=new Date(this.convertToISO(this.form.acutalVisitDate));let n={shippingTruckId:this.form.shippingTruckId,clientLocationId:this.form.clientLocationId,offerOrderMasterId:this.form.id,Notes:this.form.notes,terms:this.form.terms,deliveryDate:this.datePipe.transform(this.form.acutalVisitDate,"yyyy-MM-ddTHH:mm:00.000"),details:this.form.details.map(s=>({id:0,itemId:s.itemId,itemName:s.itemName,quantity:s.quantity,unitId:s.unitId,price:s.price,discount:s.discount,discountType:s.discountType,clientQuantity:s.clientQuantity,approvedQuantity:s.approvedQuantity}))};this.ngxLoader.startLoader(this.operationLoader),this.orderReceivedService.register(n).pipe((0,oe.O)(),(0,de.c)(this.mainDelay),(0,R.Z)(),(0,N.Q)(this.notifier),(0,w.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(s=>{s.success?this.submitFunished():this.alertService.error("general.message."+s.message)},s=>{this.alertService.error("general.message."+s)})}openShippingModal(n,s,i="md"){this.baseService.GetTrucks({id:n,acutalVisitDate:null}).subscribe(h=>{h.success?(this.form=h.data.order,this.getTotal(),this.form.clientVisitDate=this.formatDate(this.form.clientVisitDate),this.form.acutalVisitDate=this.formatDate(this.form.acutalVisitDate),this.truncks=h.data.truncks,this.locations=h.data.locations,this.modalService.open(s,{centered:!0,size:i})):this.alertService.error("general.message."+h.message)},h=>{this.alertService.error("general.message."+h)})}dateChangeModal(n){n=new Date(n);let s={id:this.form.id,acutalVisitDate:this.datePipe.transform(n,"yyyy-MM-ddT00:00:00.000")};this.baseService.GetTrucks(s).subscribe(i=>{i.success?this.truncks=i.data.truncks:this.alertService.error("general.message."+i.message)},i=>{this.alertService.error("general.message."+i)})}formatDate(n){if(!n)return"";const s=new Date(n);return s.getDate().toString().padStart(2,"0")+"-"+(s.getMonth()+1).toString().padStart(2,"0")+"-"+s.getFullYear()+" "+s.getHours().toString().padStart(2,"0")+":"+s.getMinutes().toString().padStart(2,"0")}getTotal(){let n=0,s=0,i=0;this.form.details.forEach(l=>{l.discount<0&&(l.discoun=0);let h=l.quantity*l.price,g=0;1===l.discountType?g=l.discount:2===l.discountType&&(g=h*l.discount/100),s=+g;let te=h-g;l.net=te,n=+te}),1===this.form.totalAddDiscountType?i=this.form.totalAddDiscount:2===this.form.totalAddDiscountType&&(i=n*this.form.totalAddDiscount/100),this.form.total=n,this.form.totalAddDiscount=this.form.totalAddDiscount,this.form.tax=15*this.form.total/100,this.form.totalNet=this.form.total-i+this.form.tax}quantitySelect(n,s){n&&(n<=0&&(n=1),this.form.details[s].quantity=parseInt(n),this.form.details[s].net=this.form.details[s].price*this.form.details[s].quantity,this.discountSelect(this.form.details[s].discount,s),this.getTotal())}discountSelect(n,s,i=1){if(n){(n=parseInt(n))<=0&&(this.form.details[s].discount=0),1==i&&(this.form.details[s].discount=n);let l=0;1==this.form.details[s].discountType?l=this.form.details[s].discount:(l=this.form.details[s].price*this.form.details[s].quantity*this.form.details[s].discount/100,l=+l.toFixed(2)),this.form.details[s].net=this.form.details[s].price*this.form.details[s].quantity-l,this.form.details[s].net=this.form.details[s].net.toFixed(2),this.getTotal()}}static{this.\u0275fac=function(s){return new(s||o)(e.rXU(P.nX),e.rXU(k.c$),e.rXU(We),e.rXU(pe.u),e.rXU(F.vh),e.rXU(U.eD),e.rXU(M.Bq),e.rXU(Mt.J),e.rXU(rn.n),e.rXU(sn.G),e.rXU(ut.V),e.rXU(Ze.h),e.rXU(Xt.m),e.rXU(Ut.l),e.rXU(P.Ix),e.rXU(Hn))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-sure-order"]],features:[e.Vt3],decls:41,vars:31,consts:[["tableMaster",""],["cancelOrderModal",""],["SubmitOrderModal",""],["deleteModal",""],["OrderTimeLineModel",""],["StatusOrderModal",""],["formEntity","ngForm"],["notes","ngModel"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],["overlayColor","rgba(255,255,255,0.05)","fgsColor","rgba(255,255,255,0)",3,"loaderId"],[3,"reset","search","exportXlsx","addNew","showAdd","showExport","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","number","id","id","name","id",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["InputTirmFilter","","type","search","id","clientName","name","clientName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["type","text","mwlFlatpickr","","id","isDate","mode","range","altFormat","d/m/Y",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],[2,"width",".2%"],["translate","",2,"width",".5%"],["pSortableColumn","id","translate","",2,"width","6%"],[1,"ri-expand-up-down-line"],["pSortableColumn","creationTime","translate","",2,"width","12%"],["pSortableColumn","clientId","translate","",2,"width","10%"],["pSortableColumn","clientVisitDate","translate","",2,"width","8%"],["translate","",2,"width","10%"],["pSortableColumn","totalQuantity","translate","",2,"width","8%"],["pSortableColumn","totalDiscount","translate","",2,"width","7%"],["translate","",2,"width","6%"],["pSortableColumn","netPrice","translate","",2,"width","6%"],[1,"fs-5"],["type","button","pRipple","",1,"border-0","p-button-text","p-button-rounded","p-button-plain",3,"pRowToggler","ngClass"],[1,"code-pointer"],[1,"badge","bg-success-subtle","text-success"],[1,"badge","bg-primary-subtle","text-primary","my-1"],["class","badge bg-warning-subtle text-warning my-1","translate","sales.salesOrder.noDelivery",4,"ngIf"],["class","badge bg-success-subtle text-success my-1","translate","sales.salesOrder.fullDelivery",4,"ngIf"],["class","badge bg-info-subtle text-info my-1","translate","sales.salesOrder.partialDelivery",4,"ngIf"],[1,"d-inline-block"],["class","btn btn-sm btn-primary edit-list mx-1","tooltipPosition","top",3,"pTooltip","click",4,"ngIf"],[1,"dropdown-custom","d-inline-block"],["type","button",1,"btn","dropbtn","btn-soft-secondary","btn-sm","dropdown-custom","arrow-none"],[1,"ri-more-fill"],[1,"dropdown-menu","dropdown-menu-end","dropdown-content",2,"left","0"],[1,"dropdown-item"],[1,"text-primary","ri-printer-line","align-bottom","me-2"],["translate","sales.salesOrder.printBillOfLading"],[1,"text-success","ri-pencil-fill","align-bottom","me-2"],["translate","general.action.edit"],[3,"click"],[1,"text-primary","ri-check-double-fill","align-bottom","me-2"],["translate","sales.salesOrder.assignOrder"],[1,"text-warning","ri-skip-back-fill","align-bottom","me-2"],["translate","sales.salesOrder.newOrder"],[1,"text-danger","ri-close-fill","align-bottom","me-2"],["translate","general.action.cancel"],["translate","sales.salesOrder.noDelivery",1,"badge","bg-warning-subtle","text-warning","my-1"],["translate","sales.salesOrder.fullDelivery",1,"badge","bg-success-subtle","text-success","my-1"],["translate","sales.salesOrder.partialDelivery",1,"badge","bg-info-subtle","text-info","my-1"],["tooltipPosition","top",1,"btn","btn-sm","btn-primary","edit-list","mx-1",3,"click","pTooltip"],[1,"ri-truck-line","align-bottom"],["colspan","17"],[1,"table-detail"],["dataKey","id",3,"value"],["pTemplate","emptymessage"],["translate","sales.salesOrder.itemName",2,"width","10%"],["translate","sales.salesOrder.unit",2,"width","6%"],["translate","sales.salesOrder.clientQuantity",2,"width","8%"],["translate","sales.salesOrder.approvedQuantity",2,"width","8%"],["translate","sales.salesOrder.deliveryQuantity",2,"width","8%"],["translate","sales.salesOrder.discountType",2,"width","5%"],["translate","sales.salesOrder.discount",2,"width","5%"],["translate","sales.salesOrder.price",2,"width","5%"],["colspan","8"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[3,"ngSubmit"],[3,"hasProgressBar","fgsType","loaderId"],[1,"modal-content"],[1,"modal-header"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","btn-close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mt-2","text-center"],["src","https://cdn.lordicon.com/gdfrsvpt.json","stroke","bold","state","hover-oscillate","trigger","loop","colors","primary:#f7b84b,secondary:#f06548",2,"width","130px","height","130px"],[1,"pt-2","fs-15","mx-4","mx-sm-5"],["translate","orderManagement.order.AreYouSureMessage"],[1,"text-muted","mx-4","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","submit","id","save","translate","general.action.save",1,"btn","w-sm","btn-danger"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light",3,"click"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["translate","sales.salesOrder.truckUpdate"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[3,"submit"],[1,"col-12","col-md-3"],["for","name","translate","",1,"fw-bold","form-label"],["name","clientVisitDate","type","datetime",1,"form-control",3,"disabled","readonly","value"],["for","name","translate","",1,"required","fw-bold","form-label"],["name","acutalVisitDate","type","text","mwlFlatpickr","","altFormat","d-m-Y H:i","required","",1,"form-control","flatpickr-input",3,"ngModelChange","ngModel","altInput","enableTime","convertModelValue","dateFormat"],["name","shippingTruckId","bindValue","id","bindLabel","name","required","",2,"width","100%",3,"ngModelChange","items","ngModel"],["for","name","translate","orderManagement.order.savedAddress",1,"required","fw-bold","form-label"],["name","clientLocationId","bindValue","id","bindLabel","name","required","",2,"width","100%",3,"ngModelChange","items","ngModel"],[1,"col-12","col-md-6"],["for","notes","translate","",1,"fw-bold","form-label"],["rows","2","InputTirmFilter","","name","notes","type","text","id","notes",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["rows","2","name","terms","type","text",1,"form-control",3,"ngModelChange","placeholder","ngModel"],["class","row truck-card mt-1 justify-content-center ",4,"ngIf"],[1,"row","justify-content-center","my-0"],[1,"card"],[1,"card-header","p-0"],[1,"d-flex","align-items-center"],["translate","sales.salesRequests.items",1,"card-title","flex-grow-1","mb-0"],[1,"table-responsive","table-card",2,"overflow","visible"],[1,"table","table-nowrap","align-middle","table-borderless","mb-0"],[1,"table-light","text-muted","p-1"],["translate","sales.salesRequests.itemName",2,"width","20%"],["translate","sales.salesRequests.unit",2,"width","12%"],["translate","sales.salesRequests.quantity",2,"width","12%"],["translate","sales.salesRequests.priceUnit",2,"width","12%"],["translate","sales.salesRequests.discountType",2,"width","12%"],["translate","sales.salesRequests.discount",2,"width","12%"],["translate","sales.salesRequests.net",2,"width","12%"],[1,"border-top","border-top-dashed"],["colspan","3"],["colspan","4",1,"fw-medium","p-0"],[1,"table","table-borderless","mb-0"],["translate","sales.salesOrder.total",1,"m-0","p-0"],[1,"text-end","m-0","p-0"],["translate","sales.salesOrder.extraDiscount",1,"m-0","p-0"],[1,"input-group","mx-4",2,"width","80%"],["clearable","false","clearOnBackspace","false","name","totalAddDiscountType","bindValue","id","bindLabel","name",3,"change","ngModelChange","items","ngModel"],["InputTirmFilter","","name","totalAddDiscount","type","text","id","totalAddDiscount",1,"form-control","fs-6",2,"width","30%",3,"change","ngModelChange","ngModel"],[1,"m-0","p-0"],["translate","sales.salesOrder.tax",1,"m-0","p-0"],[1,"border-top","border-top-dashed","m-0","p-0"],["scope","row","translate","sales.salesOrder.net",1,"m-0","p-0"],[1,"d-flex","justify-content-center","m-0"],["type","submit","type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],[1,"row","truck-card","mt-1","justify-content-center"],[4,"ngFor","ngForOf"],[1,"card","p-0","cursor-pointer",3,"click","ngClass"],[1,"card-body","p-1"],[1,"badge","bg-success-subtle","text-success","my-1"],["clearable","false","clearOnBackspace","false","bindValue","id","bindLabel","name",2,"width","100%",3,"ngModelChange","name","items","ngModel"],["type","text","id","quantity",1,"form-control","fs-6",3,"ngModelChange","name","ngModel"],["InputTirmFilter","","type","text","id","discount",1,"form-control","fs-6",3,"ngModelChange","name","ngModel"],[3,"success","dismiss","orderId"],[3,"dismiss","orderSelected"]],template:function(s,i){if(1&s){const l=e.RV6();e.j41(0,"div",8)(1,"div",9)(2,"div",10),e.nrm(3,"ngx-ui-loader",11),e.j41(4,"base-filter",12),e.bIt("reset",function(){return e.eBV(l),e.Njj(i.onReset())})("search",function(){return e.eBV(l),e.Njj(i.onSearch())})("exportXlsx",function(){return e.eBV(l),e.Njj(i.onExportXlsx())})("addNew",function(){return e.eBV(l),e.Njj(i.goRegister())}),e.qex(5,13),e.j41(6,"div",14)(7,"div",15)(8,"input",16),e.nI1(9,"translate"),e.mxI("ngModelChange",function(g){return e.eBV(l),e.DH7(i.pagination.id,g)||(i.pagination.id=g),e.Njj(g)}),e.k0s(),e.nrm(10,"i",17),e.k0s()(),e.j41(11,"div",14)(12,"div",15)(13,"input",18),e.nI1(14,"translate"),e.mxI("ngModelChange",function(g){return e.eBV(l),e.DH7(i.pagination.clientName,g)||(i.pagination.clientName=g),e.Njj(g)}),e.k0s(),e.nrm(15,"i",17),e.k0s()(),e.j41(16,"div",14)(17,"input",19),e.nI1(18,"translate"),e.mxI("ngModelChange",function(g){return e.eBV(l),e.DH7(i.searchForm.dates,g)||(i.searchForm.dates=g),e.Njj(g)}),e.k0s()(),e.j41(19,"div",14)(20,"input",19),e.nI1(21,"translate"),e.mxI("ngModelChange",function(g){return e.eBV(l),e.DH7(i.searchForm.creationDates,g)||(i.searchForm.creationDates=g),e.Njj(g)}),e.k0s()(),e.bVm(),e.k0s(),e.j41(22,"div",20)(23,"div",21)(24,"p-table",22,0),e.bIt("onLazyLoad",function(g){return e.eBV(l),e.Njj(i.tableChange(g))})("selectionChange",function(g){return e.eBV(l),e.Njj(i.onSelectionChange(g))}),e.DNE(26,Ei,30,0,"ng-template",23)(27,Vi,59,22,"ng-template",24)(28,ba,7,1,"ng-template",25),e.k0s()(),e.DNE(29,Ai,2,0,"div",26)(30,Nt,6,8,"div",27),e.k0s()()()(),e.DNE(31,Qn,15,3,"ng-template",null,1,e.C5r)(33,Br,83,28,"ng-template",null,2,e.C5r)(35,va,1,1,"ng-template",null,3,e.C5r)(37,$r,1,1,"ng-template",null,4,e.C5r)(39,Ca,15,3,"ng-template",null,5,e.C5r)}2&s&&(e.R7$(3),e.Y8G("loaderId","sureLoader"),e.R7$(),e.Y8G("showAdd",!1)("showExport",!1)("totalItems",i.pagination.totalItems)("title",i.title),e.R7$(4),e.FS9("placeholder",e.bMT(9,23,"orderManagement.order.orderCode")),e.R50("ngModel",i.pagination.id),e.R7$(5),e.FS9("placeholder",e.bMT(14,25,"orderManagement.order.agentName")),e.R50("ngModel",i.pagination.clientName),e.R7$(4),e.FS9("placeholder",e.bMT(18,27,"orderManagement.order.visitDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",i.searchForm.dates),e.R7$(3),e.FS9("placeholder",e.bMT(21,29,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",i.searchForm.creationDates),e.R7$(4),e.Y8G("value",i.entities)("rows",i.pagination.pageSize)("lazy",!0)("totalRecords",i.pagination.totalItems),e.R7$(5),e.Y8G("ngIf",i.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",i.pagination.totalItems>0))},dependencies:[F.YU,F.Sq,F.bT,m.qT,m.me,m.Q0,m.BC,m.cb,m.YS,m.vS,m.cV,M.s5,ie.kL,et.b,$e.p,tt.g,k.Mm,L.XI,Pe.Ei,L.Tg,L.FP,U.Cv,ke.vr,Se.m,$t.m,Nr,F.vh,k.D9],encapsulation:2})}}return o})();function Ta(o,f){1&o&&(e.j41(0,"tr",28),e.nrm(1,"th",29),e.j41(2,"th",30),e.EFF(3,"#"),e.k0s(),e.j41(4,"th",31),e.nrm(5,"i",32),e.EFF(6," orderManagement.order.orderCode "),e.k0s(),e.j41(7,"th",33),e.nrm(8,"i",32),e.EFF(9," orderManagement.order.creation "),e.k0s(),e.j41(10,"th",34),e.nrm(11,"i",32),e.EFF(12," orderManagement.order.agentName "),e.k0s(),e.j41(13,"th",35),e.EFF(14," sales.salesOrder.shippingTruckName "),e.k0s(),e.j41(15,"th",36),e.nrm(16,"i",32),e.EFF(17," sales.salesOrder.clientVisitDate "),e.k0s(),e.j41(18,"th",37),e.nrm(19,"i",32),e.EFF(20," sales.salesOrder.totalQuantity "),e.k0s(),e.j41(21,"th",38),e.nrm(22,"i",32),e.EFF(23," sales.salesOrder.totalDiscount "),e.k0s(),e.j41(24,"th",39),e.nrm(25,"i",32),e.EFF(26," sales.salesOrder.netPrice "),e.k0s(),e.nrm(27,"th",40),e.k0s())}function Bi(o,f){if(1&o){const n=e.RV6();e.j41(0,"tr",41)(1,"td"),e.nrm(2,"button",42),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td",43),e.bIt("click",function(){const i=e.eBV(n).$implicit,l=e.XpG(),h=e.sdS(38);return e.Njj(l.openModalClient(i,h,"lg"))}),e.j41(6,"bdi",44),e.EFF(7),e.k0s()(),e.j41(8,"td")(9,"span",45),e.EFF(10),e.k0s(),e.EFF(11),e.nI1(12,"date"),e.k0s(),e.j41(13,"td",43),e.bIt("click",function(){const i=e.eBV(n).$implicit,l=e.XpG(),h=e.sdS(36);return e.Njj(l.openModalClient(i,h))}),e.j41(14,"span",46),e.EFF(15),e.k0s()(),e.j41(16,"td"),e.EFF(17),e.k0s(),e.j41(18,"td"),e.EFF(19),e.nI1(20,"date"),e.k0s(),e.j41(21,"td"),e.EFF(22),e.k0s(),e.j41(23,"td"),e.EFF(24),e.k0s(),e.j41(25,"td"),e.EFF(26),e.k0s(),e.j41(27,"td")(28,"button",47),e.nI1(29,"translate"),e.nrm(30,"i",48),e.k0s()()()}if(2&o){const n=f.$implicit,s=f.rowIndex,i=f.expanded;e.R7$(2),e.Y8G("pRowToggler",n)("ngClass",i?" ri-arrow-down-s-line":"  ri-arrow-up-s-line"),e.R7$(2),e.JRh(s+1),e.R7$(3),e.SpI("#SO#",n.id,""),e.R7$(3),e.SpI("",n.creatorName," "),e.R7$(),e.SpI(" ",e.i5U(12,13,n.creationTime,"yyyy-MM-dd")," "),e.R7$(4),e.SpI("",n.clientName," "),e.R7$(2),e.JRh(n.shippingTruckName),e.R7$(2),e.SpI(" ",e.i5U(20,16,n.clientVisitDate,"yyyy-MM-dd"),""),e.R7$(3),e.JRh(n.totalQuantity),e.R7$(2),e.JRh(n.totalDiscount),e.R7$(2),e.JRh(n.netPrice),e.R7$(2),e.FS9("pTooltip",e.bMT(29,19,"sales.salesOrder.printOrder"))}}function Jn(o,f){1&o&&(e.j41(0,"tr"),e.nrm(1,"th",52)(2,"th",53)(3,"th",54)(4,"th",55)(5,"th",56)(6,"th",57)(7,"th",58),e.k0s())}function on(o,f){if(1&o&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.nI1(11,"translate"),e.k0s(),e.j41(12,"td"),e.EFF(13),e.k0s(),e.j41(14,"td"),e.EFF(15),e.k0s()()),2&o){const n=f.$implicit;e.R7$(2),e.JRh(n.itemName),e.R7$(2),e.JRh(n.unitName),e.R7$(2),e.JRh(n.clientQuantity),e.R7$(2),e.JRh(n.approvedQuantity),e.R7$(2),e.JRh(e.bMT(11,7,"sales.salesOrder."+n.discountTypeValue)),e.R7$(3),e.JRh(n.discount),e.R7$(2),e.JRh(n.price)}}function ja(o,f){1&o&&(e.j41(0,"tr"),e.nrm(1,"td",59),e.k0s())}function $i(o,f){if(1&o&&(e.j41(0,"tr")(1,"td",49)(2,"div")(3,"p-table",50),e.DNE(4,Jn,8,0,"ng-template",23)(5,on,16,9,"ng-template",24)(6,ja,2,0,"ng-template",51),e.k0s()()()()),2&o){const n=f.$implicit;e.R7$(3),e.Y8G("value",n.offerOrderDetails)}}function Xi(o,f){1&o&&(e.j41(0,"div",60),e.EFF(1," general.table.noData "),e.k0s())}function Xr(o,f){if(1&o){const n=e.RV6();e.j41(0,"div",61)(1,"div",62),e.nrm(2,"ngb-pagination-info",63),e.j41(3,"table-length",64),e.bIt("lengthChange",function(i){e.eBV(n);const l=e.XpG();return e.Njj(l.ListItemChange(i))}),e.k0s()(),e.j41(4,"div",65)(5,"ngb-pagination",66),e.bIt("pageChange",function(i){e.eBV(n);const l=e.XpG();return e.Njj(l.pageChanged(i))}),e.mxI("pageChange",function(i){e.eBV(n);const l=e.XpG();return e.DH7(l.pagination.pageNumber,i)||(l.pagination.pageNumber=i),e.Njj(i)}),e.k0s()()()}if(2&o){const n=e.XpG();e.R7$(2),e.Y8G("pagination",n.pagination),e.R7$(),e.Y8G("lengthTable",n.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",n.pagination.pageSize)("collectionSize",n.pagination.totalItems),e.R50("page",n.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function Ur(o,f){if(1&o){const n=e.RV6();e.j41(0,"form",67,7),e.bIt("ngSubmit",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.SubmitOrder())}),e.nrm(2,"ngx-ui-loader",68),e.j41(3,"div",69)(4,"div",70)(5,"button",71),e.bIt("click",function(){const i=e.eBV(n).$implicit;return e.Njj(i.dismiss())}),e.k0s()(),e.j41(6,"div",72)(7,"div",73),e.nrm(8,"lord-icon",74),e.j41(9,"div",75),e.nrm(10,"h3",76)(11,"p",77),e.k0s()(),e.j41(12,"div",78),e.nrm(13,"button",79),e.j41(14,"button",80),e.bIt("click",function(){const i=e.eBV(n).$implicit;return e.Njj(i.dismiss())}),e.k0s()()()()()}if(2&o){const n=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderOperationShap)("loaderId",n.deleteLoader)}}function Ui(o,f){if(1&o){const n=e.RV6();e.j41(0,"delete-modal",81),e.bIt("deleteConfirm",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.DeleteConfirm())})("dismiss",function(){const i=e.eBV(n).$implicit;return e.Njj(i.dismiss())}),e.k0s()}}function Ia(o,f){}function Pr(o,f){if(1&o){const n=e.RV6();e.j41(0,"app-all-orders-details",82),e.bIt("dismiss",function(){const i=e.eBV(n).$implicit;return e.Njj(i.dismiss())}),e.k0s()}if(2&o){const n=e.XpG();e.Y8G("orderDetails",n.orderSelected)}}function Yr(o,f){if(1&o&&e.nrm(0,"order-operation",83),2&o){const n=e.XpG();e.Y8G("isOrderEdit",n.isOrderEdit)("isInner",!0)("orderCode",n.clientSelected)}}function ya(o,f){if(1&o){const n=e.RV6();e.j41(0,"order-timeline",84),e.bIt("dismiss",function(){const i=e.eBV(n).$implicit;return e.Njj(i.dismiss())}),e.k0s()}if(2&o){const n=e.XpG();e.Y8G("orderSelected",n.orderSelected)}}let Pi=(()=>{class o extends Ue.w{constructor(n,s,i,l,h,g,te,me,ge,K,Z,z,_e,Te,Oe){super(n,s,te,i,l,h,g),this.baseService=i,this.authDaamService=me,this.teamService=ge,this.workTimeService=K,this.excelService=Z,this.cityService=z,this.districtService=_e,this.channelService=Te,this.router=Oe,this.title="sales.salesOrder.completeOrder",this.titleOperation="sales.salesOrder.completeOrder",this.keySelected="",this.assignUsers=[],this.times=[],this.employees=[],this.searchForm={},this.isResolveList=!0,this.employeeTypes=[{id:1,name:"employeeTeam"},{id:2,name:"managment"},{id:3,name:"customerService"}],this.employeeGroups=[],this.activeindex="2",this.active=2,this.formPassword={},this.roles=[],this.teams=[],this.workTimes=[],this.userTypes=[],this.actives=[{id:!0,name:"active"},{id:!1,name:"noActive"}],this.clientSelected=0,this.cities=[],this.districts=[],this.channels=[],this.status=[],this.countLoad=2,this.isOrderEdit=!1,this.orderSelected={},this.users=[],this.setDates=(q,be,Ce)=>{if(q?.from||q?.to){const ht=q.to||q.from;this.pagination[be]=this.datePipe.transform(q.from||q.to,"yyyy-MM-ddT00:00:00"),this.pagination[Ce]=this.datePipe.transform(ht,"yyyy-MM-ddT23:59:59.999")}else this.pagination[be]=null,this.pagination[Ce]=null},this.loadentities(),this.GetCities(),this.GetChannels(),this.GetTeams(),this.GetTimes(),this.status=[{name:"None",nameAr:"\u0644\u0627 \u0634\u0626",id:0},{name:"Is Review",nameAr:"\u062a\u0645\u062a \u0627\u0644\u0645\u0631\u0627\u062c\u0639\u0629",id:1},{name:"Is Confirmed",nameAr:"\u062a\u0645 \u0627\u0644\u062a\u0623\u0643\u064a\u062f",id:2},{name:"Is Free",nameAr:"\u0645\u062c\u0627\u0646\u064a",id:3},{name:"Is Reopen",nameAr:"\u062a\u0645\u062a \u0625\u0639\u0627\u062f\u0629 \u0641\u062a\u062d\u0647",id:4},{name:"Is Finish",nameAr:"\u0627\u0646\u062a\u0647\u0649",id:5},{name:"Is Cancel",nameAr:"\u062a\u0645 \u0627\u0644\u0625\u0644\u063a\u0627\u0621",id:6},{name:"Is Assign",nameAr:"\u062a\u0645 \u062a\u0639\u064a\u064a\u0646\u0647",id:7},{name:"Is Urgent",nameAr:"\u0639\u0627\u062c\u0644",id:8},{name:"New",nameAr:"\u062c\u062f\u064a\u062f",id:9}]}loadentities(){this.countLoad=this.countLoad+1,(!this.isResolveList||1!==this.countLoad)&&(this.pagination.status=60,this.baseService.get(this.pagination).pipe((0,N.Q)(this.notifier)).subscribe(n=>{this.ngxLoader.stopLoader(B.a7),this.entities=n.data,this.pagination.totalItems=n.totalItems,this.LoadSuccess()},n=>{this.ngxLoader.stopLoader(B.a7),this.alertService.error(n)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[])}SubmitOrder(){}GetCities(){this.cityService.getDropDown().subscribe(n=>{this.cities=n.data},n=>{console.log(n)})}GetDistricts(n){this.districtService.getByCityId(n).subscribe(s=>{this.districts=s.data},s=>{console.log(s)})}GetChannels(){this.channelService.getDropDown().subscribe(n=>{this.channels=n.data},n=>{console.log(n)})}GetTeams(){this.teamService.getDropDown().subscribe(n=>{this.teams=n.data},n=>{console.log(n)})}GetTimes(){this.workTimeService.getDropDown().subscribe(n=>{this.workTimes=n.data},n=>{console.log(n)})}ngOnInitMore(){}mapForm(n){return{...n}}onUpdateIsActive(n){this.baseService.updateActive(n).pipe((0,N.Q)(this.notifier)).subscribe(s=>{s?this.alertService.success():this.alertService.error("general.message."+s)},s=>{this.alertService.error()})}mapRegisterForm(n){let s={...n};return s.employeeCode=0,s}onSearch(){let n={...this.searchForm};this.ngxLoader.startLoader("allLoader"),this.setDates(n.dates,"visitDateFrom","visitDateTo"),this.setDates(n.creationDates,"creationTimeFrom","creationTimeTo"),this.loadentities()}LoadSuccess(){this.ngxLoader.stopLoader("allLoader")}onReset(){this.form={},this.searchForm={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems}}configRoute(){this.routerActive.data.pipe((0,N.Q)(this.notifier)).subscribe(n=>{this.entities=n.data,this.pagination.totalItems=n.data?.totalItems},()=>{this.alertService.error()})}mapExcel(){let n=[];return this.entities.forEach(s=>{n.push({"Order Code":s.orderCode,"Created Date":s.createdDate,"City Name":s.cityName,"District Name":s.districtName?s.districtName:"--",Status:this.translateService.instant(this.getTrnslate(s)),"Agent Name":s.agentName,Mobile:s.mobile,"Channel Name":s.channelName,"Assigned To":s.teamNames,Times:s.workTimes,"Visit Date":s.visitDate,Services:s.services})}),n}onExportXlsx(){let n=this.mapExcel();this.excelService.exportAsExcelFile(n,this.translateService.instant(this.title),[])}onNavChange(n){1===n.nextId&&(this.activeindex="1"),3===n.nextId&&(this.activeindex="3")}goRegister(){this.router.navigateByUrl("/managment/order/new")}goEdit(n){this.router.navigateByUrl("/managment/order/new")}getStatus(n){return 10==n.offerOrderStatus||20==n.offerOrderStatus?"bg-warning-subtle text-warning":30==n.offerOrderStatus?"bg-success-subtle text-success":40==n.offerOrderStatus?"bg-danger-subtle text-danger":50==n.offerOrderStatus?"bg-danger-success text-success":"bg-warning-subtle text-warning"}checkEdit(n){return!n.isCancel&&!n.isFinish}getTrnslate(n){return n.isCancel?"orderManagement.order.cancel":n.isFinish?"orderManagement.order.finish":n.isUrgent?"bg-danger-subtle text-danger":n.isReopen?"orderManagement.order.reopen":n.isAssign?"orderManagement.order.assign":n.isConfirmed?"orderManagement.order.confirmed":n.isFree?"orderManagement.order.free":"orderManagement.order.new"}openModalClient(n,s,i="xl"){this.clientSelected=n.orderCode,this.orderSelected=n,this.isOrderEdit=!1,this.modalService.open(s,{centered:!0,size:i})}oncityChange(n){this.GetDistricts(n.code)}getTimes(n){return n?.split(",")}getServices(n){return n.split("#")}copytext(n){navigator.clipboard.writeText(n),this.alertService.info(n)}openEditOrderModal(n,s,i="md"){this.form={},this.isOrderEdit=!0,this.clientSelected=n,this.modalService.open(s,{centered:!0,size:i})}OpenOrderTimeLineModel(n,s,i="md"){this.orderSelected=n,this.modalService.open(s,{centered:!0,size:i})}static{this.\u0275fac=function(s){return new(s||o)(e.rXU(P.nX),e.rXU(k.c$),e.rXU(We),e.rXU(pe.u),e.rXU(F.vh),e.rXU(U.eD),e.rXU(M.Bq),e.rXU(Mt.J),e.rXU(rn.n),e.rXU(sn.G),e.rXU(ut.V),e.rXU(Ze.h),e.rXU(Xt.m),e.rXU(Ut.l),e.rXU(P.Ix))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-complete-order"]],features:[e.Vt3],decls:43,vars:31,consts:[["tableMaster",""],["SubmitOrderModal",""],["deleteModal",""],["clientProfile",""],["orderViewModel",""],["orderModel",""],["OrderTimeLineModel",""],["formEntity","ngForm"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],["overlayColor","rgba(255,255,255,0.05)","fgsColor","rgba(255,255,255,0)",3,"loaderId"],[3,"reset","search","exportXlsx","addNew","showAdd","showExport","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","number","id","id","name","id",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["InputTirmFilter","","type","search","id","clientName","name","clientName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["type","text","mwlFlatpickr","","id","isDate","mode","range","altFormat","d/m/Y",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],[2,"width",".2%"],["translate","",2,"width",".5%"],["pSortableColumn","id","translate","",2,"width","6%"],[1,"ri-expand-up-down-line"],["pSortableColumn","creationTime","translate","",2,"width","12%"],["pSortableColumn","clientId","translate","",2,"width","10%"],["translate","",2,"width","8%"],["pSortableColumn","clientVisitDate","translate","",2,"width","10%"],["pSortableColumn","totalQuantity","translate","",2,"width","8%"],["pSortableColumn","totalDiscount","translate","",2,"width","8%"],["pSortableColumn","netPrice","translate","",2,"width","8%"],["translate","",2,"width","5%"],[1,"fs-5"],["type","button","pRipple","",1,"border-0","p-button-text","p-button-rounded","p-button-plain",3,"pRowToggler","ngClass"],[3,"click"],[1,"code-pointer"],[1,"badge","bg-success-subtle","text-success"],[1,"badge","bg-primary-subtle","text-primary","my-1"],["tooltipPosition","top",1,"btn","btn-sm","btn-warning","edit-list","mx-1",3,"pTooltip"],[1,"ri-printer-line","align-bottom"],["colspan","17",1,"table-detail"],["dataKey","id",3,"value"],["pTemplate","emptymessage"],["translate","sales.salesOrder.itemName",2,"width","10%"],["translate","sales.salesOrder.unit",2,"width","6%"],["translate","sales.salesOrder.clientQuantity",2,"width","8%"],["translate","sales.salesOrder.approvedQuantity",2,"width","8%"],["translate","sales.salesOrder.discountType",2,"width","5%"],["translate","sales.salesOrder.discount",2,"width","5%"],["translate","sales.salesOrder.price",2,"width","5%"],["colspan","8"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[3,"ngSubmit"],[3,"hasProgressBar","fgsType","loaderId"],[1,"modal-content"],[1,"modal-header"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","btn-close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mt-2","text-center"],["src","https://cdn.lordicon.com/gdfrsvpt.json","stroke","bold","state","hover-oscillate","trigger","loop","colors","primary:#f7b84b,secondary:#f06548",2,"width","130px","height","130px"],[1,"pt-2","fs-15","mx-4","mx-sm-5"],["translate","orderManagement.order.AreYouSureMessage"],[1,"text-muted","mx-4","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","submit","id","save","translate","general.action.save",1,"btn","w-sm","btn-danger"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light",3,"click"],[3,"deleteConfirm","dismiss"],[3,"dismiss","orderDetails"],[3,"isOrderEdit","isInner","orderCode"],[3,"dismiss","orderSelected"]],template:function(s,i){if(1&s){const l=e.RV6();e.j41(0,"div",8)(1,"div",9)(2,"div",10),e.nrm(3,"ngx-ui-loader",11),e.j41(4,"base-filter",12),e.bIt("reset",function(){return e.eBV(l),e.Njj(i.onReset())})("search",function(){return e.eBV(l),e.Njj(i.onSearch())})("exportXlsx",function(){return e.eBV(l),e.Njj(i.onExportXlsx())})("addNew",function(){return e.eBV(l),e.Njj(i.goRegister())}),e.qex(5,13),e.j41(6,"div",14)(7,"div",15)(8,"input",16),e.nI1(9,"translate"),e.mxI("ngModelChange",function(g){return e.eBV(l),e.DH7(i.pagination.id,g)||(i.pagination.id=g),e.Njj(g)}),e.k0s(),e.nrm(10,"i",17),e.k0s()(),e.j41(11,"div",14)(12,"div",15)(13,"input",18),e.nI1(14,"translate"),e.mxI("ngModelChange",function(g){return e.eBV(l),e.DH7(i.pagination.clientName,g)||(i.pagination.clientName=g),e.Njj(g)}),e.k0s(),e.nrm(15,"i",17),e.k0s()(),e.j41(16,"div",14)(17,"input",19),e.nI1(18,"translate"),e.mxI("ngModelChange",function(g){return e.eBV(l),e.DH7(i.searchForm.dates,g)||(i.searchForm.dates=g),e.Njj(g)}),e.k0s()(),e.j41(19,"div",14)(20,"input",19),e.nI1(21,"translate"),e.mxI("ngModelChange",function(g){return e.eBV(l),e.DH7(i.searchForm.creationDates,g)||(i.searchForm.creationDates=g),e.Njj(g)}),e.k0s()(),e.bVm(),e.k0s(),e.j41(22,"div",20)(23,"div",21)(24,"p-table",22,0),e.bIt("onLazyLoad",function(g){return e.eBV(l),e.Njj(i.tableChange(g))})("selectionChange",function(g){return e.eBV(l),e.Njj(i.onSelectionChange(g))}),e.DNE(26,Ta,28,0,"ng-template",23)(27,Bi,31,21,"ng-template",24)(28,$i,7,1,"ng-template",25),e.k0s()(),e.DNE(29,Xi,2,0,"div",26)(30,Xr,6,8,"div",27),e.k0s()()()(),e.DNE(31,Ur,15,3,"ng-template",null,1,e.C5r)(33,Ui,1,0,"ng-template",null,2,e.C5r)(35,Ia,0,0,"ng-template",null,3,e.C5r)(37,Pr,1,1,"ng-template",null,4,e.C5r)(39,Yr,1,3,"ng-template",null,5,e.C5r)(41,ya,1,1,"ng-template",null,6,e.C5r)}2&s&&(e.R7$(3),e.Y8G("loaderId","CompleteLoader"),e.R7$(),e.Y8G("showAdd",!1)("showExport",!1)("totalItems",i.pagination.totalItems)("title",i.title),e.R7$(4),e.FS9("placeholder",e.bMT(9,23,"orderManagement.order.orderCode")),e.R50("ngModel",i.pagination.id),e.R7$(5),e.FS9("placeholder",e.bMT(14,25,"orderManagement.order.agentName")),e.R50("ngModel",i.pagination.clientName),e.R7$(4),e.FS9("placeholder",e.bMT(18,27,"orderManagement.order.visitDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",i.searchForm.dates),e.R7$(3),e.FS9("placeholder",e.bMT(21,29,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",i.searchForm.creationDates),e.R7$(4),e.Y8G("value",i.entities)("rows",i.pagination.pageSize)("lazy",!0)("totalRecords",i.pagination.totalItems),e.R7$(5),e.Y8G("ngIf",i.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",i.pagination.totalItems>0))},dependencies:[F.YU,F.bT,m.qT,m.me,m.Q0,m.BC,m.cb,m.vS,m.cV,M.s5,ie.kL,et.b,yn.L,Rt.w,$e.p,tt.g,k.Mm,L.XI,Pe.Ei,L.Tg,L.FP,U.Cv,Se.m,$t.m,F.vh,k.D9],encapsulation:2})}}return o})();function ze(o,f){1&o&&(e.j41(0,"tr",28),e.nrm(1,"th",29),e.j41(2,"th",30),e.EFF(3,"#"),e.k0s(),e.j41(4,"th",31),e.nrm(5,"i",32),e.EFF(6," orderManagement.order.orderCode "),e.k0s(),e.j41(7,"th",33),e.nrm(8,"i",32),e.EFF(9," orderManagement.order.creation "),e.k0s(),e.j41(10,"th",34),e.nrm(11,"i",32),e.EFF(12," orderManagement.order.agentName "),e.k0s(),e.j41(13,"th",35),e.nrm(14,"i",32),e.EFF(15," sales.salesOrder.clientVisitDate "),e.k0s(),e.j41(16,"th",36),e.nrm(17,"i",32),e.EFF(18," sales.salesOrder.totalQuantity "),e.k0s(),e.j41(19,"th",37),e.nrm(20,"i",32),e.EFF(21," sales.salesOrder.totalDiscount "),e.k0s(),e.j41(22,"th",38),e.nrm(23,"i",32),e.EFF(24," sales.salesOrder.netPrice "),e.k0s(),e.j41(25,"th",39),e.nrm(26,"i",32),e.EFF(27," sales.salesOrder.cancelReasonName "),e.k0s()())}function zr(o,f){if(1&o){const n=e.RV6();e.j41(0,"tr",40)(1,"td"),e.nrm(2,"button",41),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td",42),e.bIt("click",function(){const i=e.eBV(n).$implicit,l=e.XpG(),h=e.sdS(38);return e.Njj(l.openModalClient(i,h,"lg"))}),e.j41(6,"bdi",43),e.EFF(7),e.k0s()(),e.j41(8,"td")(9,"span",44),e.EFF(10),e.k0s(),e.EFF(11),e.nI1(12,"date"),e.k0s(),e.j41(13,"td")(14,"span",45),e.EFF(15),e.k0s()(),e.j41(16,"td"),e.EFF(17),e.nI1(18,"date"),e.k0s(),e.j41(19,"td"),e.EFF(20),e.k0s(),e.j41(21,"td"),e.EFF(22),e.k0s(),e.j41(23,"td"),e.EFF(24),e.k0s(),e.j41(25,"td")(26,"span",46),e.EFF(27),e.k0s()()()}if(2&o){const n=f.$implicit,s=f.rowIndex,i=f.expanded;e.R7$(2),e.Y8G("pRowToggler",n)("ngClass",i?" ri-arrow-down-s-line":"  ri-arrow-up-s-line"),e.R7$(2),e.JRh(s+1),e.R7$(3),e.SpI("#SO#",n.id,""),e.R7$(3),e.SpI("",n.creatorName," "),e.R7$(),e.SpI(" ",e.i5U(12,12,n.creationTime,"yyyy-MM-dd")," "),e.R7$(4),e.SpI("",n.clientName," "),e.R7$(2),e.SpI(" ",e.i5U(18,15,n.acutalVisitDate,"yyyy-MM-dd"),""),e.R7$(3),e.JRh(n.totalQuantity),e.R7$(2),e.JRh(n.totalDiscount),e.R7$(2),e.JRh(n.netPrice),e.R7$(3),e.SpI("",n.cancelReasonName," ")}}function Fn(o,f){1&o&&(e.j41(0,"tr"),e.nrm(1,"th",51)(2,"th",52)(3,"th",53)(4,"th",54)(5,"th",55)(6,"th",56)(7,"th",57),e.k0s())}function Yi(o,f){if(1&o&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.nI1(11,"translate"),e.k0s(),e.j41(12,"td"),e.EFF(13),e.k0s(),e.j41(14,"td"),e.EFF(15),e.k0s()()),2&o){const n=f.$implicit;e.R7$(2),e.JRh(n.itemName),e.R7$(2),e.JRh(n.unitName),e.R7$(2),e.JRh(n.clientQuantity),e.R7$(2),e.JRh(n.approvedQuantity),e.R7$(2),e.JRh(e.bMT(11,7,"sales.salesOrder."+n.discountTypeValue)),e.R7$(3),e.JRh(n.discount),e.R7$(2),e.JRh(n.price)}}function zi(o,f){1&o&&(e.j41(0,"tr"),e.nrm(1,"td",58),e.k0s())}function xa(o,f){if(1&o&&(e.j41(0,"tr")(1,"td",47)(2,"div",48)(3,"p-table",49),e.DNE(4,Fn,8,0,"ng-template",23)(5,Yi,16,9,"ng-template",24)(6,zi,2,0,"ng-template",50),e.k0s()()()()),2&o){const n=f.$implicit;e.R7$(3),e.Y8G("value",n.offerOrderDetails)}}function Fa(o,f){1&o&&(e.j41(0,"div",59),e.EFF(1," general.table.noData "),e.k0s())}function Ra(o,f){if(1&o){const n=e.RV6();e.j41(0,"div",60)(1,"div",61),e.nrm(2,"ngb-pagination-info",62),e.j41(3,"table-length",63),e.bIt("lengthChange",function(i){e.eBV(n);const l=e.XpG();return e.Njj(l.ListItemChange(i))}),e.k0s()(),e.j41(4,"div",64)(5,"ngb-pagination",65),e.bIt("pageChange",function(i){e.eBV(n);const l=e.XpG();return e.Njj(l.pageChanged(i))}),e.mxI("pageChange",function(i){e.eBV(n);const l=e.XpG();return e.DH7(l.pagination.pageNumber,i)||(l.pagination.pageNumber=i),e.Njj(i)}),e.k0s()()()}if(2&o){const n=e.XpG();e.R7$(2),e.Y8G("pagination",n.pagination),e.R7$(),e.Y8G("lengthTable",n.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",n.pagination.pageSize)("collectionSize",n.pagination.totalItems),e.R50("page",n.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function ka(o,f){if(1&o){const n=e.RV6();e.j41(0,"form",66,7),e.bIt("ngSubmit",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.SubmitOrder())}),e.nrm(2,"ngx-ui-loader",67),e.j41(3,"div",68)(4,"div",69)(5,"button",70),e.bIt("click",function(){const i=e.eBV(n).$implicit;return e.Njj(i.dismiss())}),e.k0s()(),e.j41(6,"div",71)(7,"div",72),e.nrm(8,"lord-icon",73),e.j41(9,"div",74),e.nrm(10,"h3",75)(11,"p",76),e.k0s()(),e.j41(12,"div",77),e.nrm(13,"button",78),e.j41(14,"button",79),e.bIt("click",function(){const i=e.eBV(n).$implicit;return e.Njj(i.dismiss())}),e.k0s()()()()()}if(2&o){const n=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderOperationShap)("loaderId",n.deleteLoader)}}function Ma(o,f){if(1&o){const n=e.RV6();e.j41(0,"delete-modal",80),e.bIt("deleteConfirm",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.DeleteConfirm())})("dismiss",function(){const i=e.eBV(n).$implicit;return e.Njj(i.dismiss())}),e.k0s()}}function ln(o,f){}function Oa(o,f){if(1&o){const n=e.RV6();e.j41(0,"app-all-orders-details",81),e.bIt("dismiss",function(){const i=e.eBV(n).$implicit;return e.Njj(i.dismiss())}),e.k0s()}if(2&o){const n=e.XpG();e.Y8G("orderDetails",n.orderSelected)}}function wa(o,f){if(1&o&&e.nrm(0,"order-operation",82),2&o){const n=e.XpG();e.Y8G("isOrderEdit",n.isOrderEdit)("isInner",!0)("orderCode",n.clientSelected)}}function qr(o,f){if(1&o){const n=e.RV6();e.j41(0,"order-timeline",83),e.bIt("dismiss",function(){const i=e.eBV(n).$implicit;return e.Njj(i.dismiss())}),e.k0s()}if(2&o){const n=e.XpG();e.Y8G("orderSelected",n.orderSelected)}}let qi=(()=>{class o extends Ue.w{constructor(n,s,i,l,h,g,te,me,ge,K,Z,z,_e,Te,Oe){super(n,s,te,i,l,h,g),this.baseService=i,this.authDaamService=me,this.teamService=ge,this.workTimeService=K,this.excelService=Z,this.cityService=z,this.districtService=_e,this.channelService=Te,this.router=Oe,this.title="sales.salesOrder.cancelOrder",this.titleOperation="sales.salesOrder.cancelOrder",this.keySelected="",this.assignUsers=[],this.times=[],this.employees=[],this.searchForm={},this.isResolveList=!0,this.employeeTypes=[{id:1,name:"employeeTeam"},{id:2,name:"managment"},{id:3,name:"customerService"}],this.employeeGroups=[],this.activeindex="2",this.active=2,this.formPassword={},this.roles=[],this.teams=[],this.workTimes=[],this.userTypes=[],this.actives=[{id:!0,name:"active"},{id:!1,name:"noActive"}],this.clientSelected=0,this.cities=[],this.districts=[],this.channels=[],this.status=[],this.countLoad=2,this.isOrderEdit=!1,this.orderSelected={},this.users=[],this.setDates=(q,be,Ce)=>{if(q?.from||q?.to){const ht=q.to||q.from;this.pagination[be]=this.datePipe.transform(q.from||q.to,"yyyy-MM-ddT00:00:00"),this.pagination[Ce]=this.datePipe.transform(ht,"yyyy-MM-ddT23:59:59.999")}else this.pagination[be]=null,this.pagination[Ce]=null},this.loadentities(),this.GetCities(),this.GetChannels(),this.GetTeams(),this.GetTimes(),this.status=[{name:"None",nameAr:"\u0644\u0627 \u0634\u0626",id:0},{name:"Is Review",nameAr:"\u062a\u0645\u062a \u0627\u0644\u0645\u0631\u0627\u062c\u0639\u0629",id:1},{name:"Is Confirmed",nameAr:"\u062a\u0645 \u0627\u0644\u062a\u0623\u0643\u064a\u062f",id:2},{name:"Is Free",nameAr:"\u0645\u062c\u0627\u0646\u064a",id:3},{name:"Is Reopen",nameAr:"\u062a\u0645\u062a \u0625\u0639\u0627\u062f\u0629 \u0641\u062a\u062d\u0647",id:4},{name:"Is Finish",nameAr:"\u0627\u0646\u062a\u0647\u0649",id:5},{name:"Is Cancel",nameAr:"\u062a\u0645 \u0627\u0644\u0625\u0644\u063a\u0627\u0621",id:6},{name:"Is Assign",nameAr:"\u062a\u0645 \u062a\u0639\u064a\u064a\u0646\u0647",id:7},{name:"Is Urgent",nameAr:"\u0639\u0627\u062c\u0644",id:8},{name:"New",nameAr:"\u062c\u062f\u064a\u062f",id:9}]}loadentities(){this.countLoad=this.countLoad+1,(!this.isResolveList||1!==this.countLoad)&&(this.pagination.status=40,this.baseService.get(this.pagination).pipe((0,N.Q)(this.notifier)).subscribe(n=>{this.ngxLoader.stopLoader(B.a7),this.entities=n.data,this.pagination.totalItems=n.totalItems,this.LoadSuccess()},n=>{this.ngxLoader.stopLoader(B.a7),this.alertService.error(n)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[])}SubmitOrder(){}GetCities(){this.cityService.getDropDown().subscribe(n=>{this.cities=n.data},n=>{console.log(n)})}GetDistricts(n){this.districtService.getByCityId(n).subscribe(s=>{this.districts=s.data},s=>{console.log(s)})}GetChannels(){this.channelService.getDropDown().subscribe(n=>{this.channels=n.data},n=>{console.log(n)})}GetTeams(){this.teamService.getDropDown().subscribe(n=>{this.teams=n.data},n=>{console.log(n)})}GetTimes(){this.workTimeService.getDropDown().subscribe(n=>{this.workTimes=n.data},n=>{console.log(n)})}ngOnInitMore(){}mapForm(n){return{...n}}onUpdateIsActive(n){this.baseService.updateActive(n).pipe((0,N.Q)(this.notifier)).subscribe(s=>{s?this.alertService.success():this.alertService.error("general.message."+s)},s=>{this.alertService.error()})}mapRegisterForm(n){let s={...n};return s.employeeCode=0,s}onSearch(){let n={...this.searchForm};this.ngxLoader.startLoader("allLoader"),this.setDates(n.dates,"visitDateFrom","visitDateTo"),this.setDates(n.creationDates,"creationTimeFrom","creationTimeTo"),this.loadentities()}LoadSuccess(){this.ngxLoader.stopLoader("allLoader")}onReset(){this.form={},this.searchForm={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems}}configRoute(){this.routerActive.data.pipe((0,N.Q)(this.notifier)).subscribe(n=>{this.entities=n.data,this.pagination.totalItems=n.data?.totalItems},()=>{this.alertService.error()})}mapExcel(){let n=[];return this.entities.forEach(s=>{n.push({"Order Code":s.orderCode,"Created Date":s.createdDate,"City Name":s.cityName,"District Name":s.districtName?s.districtName:"--",Status:this.translateService.instant(this.getTrnslate(s)),"Agent Name":s.agentName,Mobile:s.mobile,"Channel Name":s.channelName,"Assigned To":s.teamNames,Times:s.workTimes,"Visit Date":s.visitDate,Services:s.services})}),n}onExportXlsx(){let n=this.mapExcel();this.excelService.exportAsExcelFile(n,this.translateService.instant(this.title),[])}onNavChange(n){1===n.nextId&&(this.activeindex="1"),3===n.nextId&&(this.activeindex="3")}goRegister(){this.router.navigateByUrl("/managment/order/new")}goEdit(n){this.router.navigateByUrl("/managment/order/new")}getStatus(n){return 10==n.offerOrderStatus||20==n.offerOrderStatus?"bg-warning-subtle text-warning":30==n.offerOrderStatus?"bg-success-subtle text-success":40==n.offerOrderStatus?"bg-danger-subtle text-danger":50==n.offerOrderStatus?"bg-danger-success text-success":"bg-warning-subtle text-warning"}checkEdit(n){return!n.isCancel&&!n.isFinish}getTrnslate(n){return n.isCancel?"orderManagement.order.cancel":n.isFinish?"orderManagement.order.finish":n.isUrgent?"bg-danger-subtle text-danger":n.isReopen?"orderManagement.order.reopen":n.isAssign?"orderManagement.order.assign":n.isConfirmed?"orderManagement.order.confirmed":n.isFree?"orderManagement.order.free":"orderManagement.order.new"}openModalClient(n,s,i="xl"){this.clientSelected=n.orderCode,this.orderSelected=n,this.isOrderEdit=!1,this.modalService.open(s,{centered:!0,size:i})}oncityChange(n){this.GetDistricts(n.code)}getTimes(n){return n?.split(",")}getServices(n){return n.split("#")}copytext(n){navigator.clipboard.writeText(n),this.alertService.info(n)}openEditOrderModal(n,s,i="md"){this.form={},this.isOrderEdit=!0,this.clientSelected=n,this.modalService.open(s,{centered:!0,size:i})}OpenOrderTimeLineModel(n,s,i="md"){this.orderSelected=n,this.modalService.open(s,{centered:!0,size:i})}static{this.\u0275fac=function(s){return new(s||o)(e.rXU(P.nX),e.rXU(k.c$),e.rXU(We),e.rXU(pe.u),e.rXU(F.vh),e.rXU(U.eD),e.rXU(M.Bq),e.rXU(Mt.J),e.rXU(rn.n),e.rXU(sn.G),e.rXU(ut.V),e.rXU(Ze.h),e.rXU(Xt.m),e.rXU(Ut.l),e.rXU(P.Ix))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-cancel-order"]],features:[e.Vt3],decls:43,vars:31,consts:[["tableMaster",""],["SubmitOrderModal",""],["deleteModal",""],["clientProfile",""],["orderViewModel",""],["orderModel",""],["OrderTimeLineModel",""],["formEntity","ngForm"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],["overlayColor","rgba(255,255,255,0.05)","fgsColor","rgba(255,255,255,0)",3,"loaderId"],[3,"reset","search","exportXlsx","addNew","showAdd","showExport","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","number","id","id","name","id",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["InputTirmFilter","","type","search","id","clientName","name","clientName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["type","text","mwlFlatpickr","","id","isDate","mode","range","altFormat","d/m/Y",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],[2,"width",".2%"],["translate","",2,"width",".5%"],["pSortableColumn","id","translate","",2,"width","6%"],[1,"ri-expand-up-down-line"],["pSortableColumn","creationTime","translate","",2,"width","12%"],["pSortableColumn","clientId","translate","",2,"width","10%"],["pSortableColumn","clientVisitDate","translate","",2,"width","10%"],["pSortableColumn","totalQuantity","translate","",2,"width","8%"],["pSortableColumn","totalDiscount","translate","",2,"width","8%"],["pSortableColumn","netPrice","translate","",2,"width","8%"],["pSortableColumn","cancelReasonName","translate","",2,"width","15%"],[1,"fs-5"],["type","button","pRipple","",1,"border-0","p-button-text","p-button-rounded","p-button-plain",3,"pRowToggler","ngClass"],[3,"click"],[1,"code-pointer"],[1,"badge","bg-success-subtle","text-success"],[1,"badge","bg-primary-subtle","text-primary","my-1"],[1,"badge","bg-danger-subtle","text-danger"],["colspan","17"],[1,"table-detail"],["dataKey","id",3,"value"],["pTemplate","emptymessage"],["translate","sales.salesOrder.itemName",2,"width","10%"],["translate","sales.salesOrder.unit",2,"width","6%"],["translate","sales.salesOrder.clientQuantity",2,"width","8%"],["translate","sales.salesOrder.approvedQuantity",2,"width","8%"],["translate","sales.salesOrder.discountType",2,"width","5%"],["translate","sales.salesOrder.discount",2,"width","5%"],["translate","sales.salesOrder.price",2,"width","5%"],["colspan","8"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[3,"ngSubmit"],[3,"hasProgressBar","fgsType","loaderId"],[1,"modal-content"],[1,"modal-header"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","btn-close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mt-2","text-center"],["src","https://cdn.lordicon.com/gdfrsvpt.json","stroke","bold","state","hover-oscillate","trigger","loop","colors","primary:#f7b84b,secondary:#f06548",2,"width","130px","height","130px"],[1,"pt-2","fs-15","mx-4","mx-sm-5"],["translate","orderManagement.order.AreYouSureMessage"],[1,"text-muted","mx-4","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","submit","id","save","translate","general.action.save",1,"btn","w-sm","btn-danger"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light",3,"click"],[3,"deleteConfirm","dismiss"],[3,"dismiss","orderDetails"],[3,"isOrderEdit","isInner","orderCode"],[3,"dismiss","orderSelected"]],template:function(s,i){if(1&s){const l=e.RV6();e.j41(0,"div",8)(1,"div",9)(2,"div",10),e.nrm(3,"ngx-ui-loader",11),e.j41(4,"base-filter",12),e.bIt("reset",function(){return e.eBV(l),e.Njj(i.onReset())})("search",function(){return e.eBV(l),e.Njj(i.onSearch())})("exportXlsx",function(){return e.eBV(l),e.Njj(i.onExportXlsx())})("addNew",function(){return e.eBV(l),e.Njj(i.goRegister())}),e.qex(5,13),e.j41(6,"div",14)(7,"div",15)(8,"input",16),e.nI1(9,"translate"),e.mxI("ngModelChange",function(g){return e.eBV(l),e.DH7(i.pagination.id,g)||(i.pagination.id=g),e.Njj(g)}),e.k0s(),e.nrm(10,"i",17),e.k0s()(),e.j41(11,"div",14)(12,"div",15)(13,"input",18),e.nI1(14,"translate"),e.mxI("ngModelChange",function(g){return e.eBV(l),e.DH7(i.pagination.clientName,g)||(i.pagination.clientName=g),e.Njj(g)}),e.k0s(),e.nrm(15,"i",17),e.k0s()(),e.j41(16,"div",14)(17,"input",19),e.nI1(18,"translate"),e.mxI("ngModelChange",function(g){return e.eBV(l),e.DH7(i.searchForm.dates,g)||(i.searchForm.dates=g),e.Njj(g)}),e.k0s()(),e.j41(19,"div",14)(20,"input",19),e.nI1(21,"translate"),e.mxI("ngModelChange",function(g){return e.eBV(l),e.DH7(i.searchForm.creationDates,g)||(i.searchForm.creationDates=g),e.Njj(g)}),e.k0s()(),e.bVm(),e.k0s(),e.j41(22,"div",20)(23,"div",21)(24,"p-table",22,0),e.bIt("onLazyLoad",function(g){return e.eBV(l),e.Njj(i.tableChange(g))})("selectionChange",function(g){return e.eBV(l),e.Njj(i.onSelectionChange(g))}),e.DNE(26,ze,28,0,"ng-template",23)(27,zr,28,18,"ng-template",24)(28,xa,7,1,"ng-template",25),e.k0s()(),e.DNE(29,Fa,2,0,"div",26)(30,Ra,6,8,"div",27),e.k0s()()()(),e.DNE(31,ka,15,3,"ng-template",null,1,e.C5r)(33,Ma,1,0,"ng-template",null,2,e.C5r)(35,ln,0,0,"ng-template",null,3,e.C5r)(37,Oa,1,1,"ng-template",null,4,e.C5r)(39,wa,1,3,"ng-template",null,5,e.C5r)(41,qr,1,1,"ng-template",null,6,e.C5r)}2&s&&(e.R7$(3),e.Y8G("loaderId","cancelLoader"),e.R7$(),e.Y8G("showAdd",!1)("showExport",!1)("totalItems",i.pagination.totalItems)("title",i.title),e.R7$(4),e.FS9("placeholder",e.bMT(9,23,"orderManagement.order.orderCode")),e.R50("ngModel",i.pagination.id),e.R7$(5),e.FS9("placeholder",e.bMT(14,25,"orderManagement.order.agentName")),e.R50("ngModel",i.pagination.clientName),e.R7$(4),e.FS9("placeholder",e.bMT(18,27,"orderManagement.order.visitDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",i.searchForm.dates),e.R7$(3),e.FS9("placeholder",e.bMT(21,29,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",i.searchForm.creationDates),e.R7$(4),e.Y8G("value",i.entities)("rows",i.pagination.pageSize)("lazy",!0)("totalRecords",i.pagination.totalItems),e.R7$(5),e.Y8G("ngIf",i.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",i.pagination.totalItems>0))},dependencies:[F.YU,F.bT,m.qT,m.me,m.Q0,m.BC,m.cb,m.vS,m.cV,M.s5,ie.kL,et.b,yn.L,Rt.w,$e.p,tt.g,k.Mm,L.XI,Pe.Ei,L.Tg,L.FP,U.Cv,Se.m,F.vh,k.D9],encapsulation:2})}}return o})();function Lt(o,f){1&o&&(e.j41(0,"tr",26),e.nrm(1,"th",27),e.j41(2,"th",28),e.EFF(3,"#"),e.k0s(),e.j41(4,"th",29),e.nrm(5,"i",30),e.EFF(6," orderManagement.order.orderCode "),e.k0s(),e.j41(7,"th",31),e.nrm(8,"i",30),e.EFF(9," orderManagement.order.creation "),e.k0s(),e.j41(10,"th",32),e.nrm(11,"i",30),e.EFF(12," orderManagement.order.agentName "),e.k0s(),e.j41(13,"th",33),e.nrm(14,"i",30),e.EFF(15," sales.salesOrder.clientVisitDate "),e.k0s(),e.j41(16,"th",34),e.nrm(17,"i",30),e.EFF(18," sales.salesOrder.totalQuantity "),e.k0s(),e.j41(19,"th",35),e.nrm(20,"i",30),e.EFF(21," sales.salesOrder.totalDiscount "),e.k0s(),e.j41(22,"th",36),e.EFF(23," orderManagement.order.totalTax "),e.k0s(),e.j41(24,"th",37),e.nrm(25,"i",30),e.EFF(26," sales.salesOrder.netPrice "),e.k0s(),e.nrm(27,"th",38),e.k0s())}function Wn(o,f){if(1&o){const n=e.RV6();e.j41(0,"tr",39)(1,"td"),e.nrm(2,"button",40),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td")(6,"bdi",41),e.EFF(7),e.k0s()(),e.j41(8,"td")(9,"span",42),e.EFF(10),e.k0s(),e.EFF(11),e.nI1(12,"date"),e.k0s(),e.j41(13,"td")(14,"span",43),e.EFF(15),e.k0s()(),e.j41(16,"td"),e.EFF(17),e.nI1(18,"date"),e.k0s(),e.j41(19,"td"),e.EFF(20),e.k0s(),e.j41(21,"td"),e.EFF(22),e.k0s(),e.j41(23,"td"),e.EFF(24),e.k0s(),e.j41(25,"td"),e.EFF(26),e.k0s(),e.j41(27,"td")(28,"div",44)(29,"button",45),e.nI1(30,"translate"),e.bIt("click",function(){const i=e.eBV(n).$implicit,l=e.XpG(),h=e.sdS(38);return e.Njj(l.openStatusModal(i.id,h,10,"md"))}),e.nrm(31,"i",46),e.k0s(),e.j41(32,"span",44)(33,"div",47)(34,"button",48),e.nrm(35,"i",49),e.k0s(),e.j41(36,"ul",50)(37,"li")(38,"span",51),e.nrm(39,"i",52)(40,"span",53),e.k0s()(),e.j41(41,"li",54),e.bIt("click",function(){const i=e.eBV(n).$implicit,l=e.XpG(),h=e.sdS(34);return e.Njj(l.openModal(i.id,h))}),e.j41(42,"span",51),e.nrm(43,"i",55)(44,"span",56),e.k0s()()()()()()()()}if(2&o){const n=f.$implicit,s=f.rowIndex,i=f.expanded;e.R7$(2),e.Y8G("pRowToggler",n)("ngClass",i?" ri-arrow-down-s-line":"  ri-arrow-up-s-line"),e.R7$(2),e.JRh(s+1),e.R7$(3),e.SpI("#DO#",n.id,""),e.R7$(3),e.SpI("",n.creatorName," "),e.R7$(),e.SpI(" ",e.i5U(12,13,n.creationTime,"yyyy-MM-dd")," "),e.R7$(4),e.SpI("",n.clientName," "),e.R7$(2),e.SpI(" ",e.i5U(18,16,n.acutalVisitDate,"yyyy-MM-dd HH:mm"),""),e.R7$(3),e.JRh(n.totalQuantity),e.R7$(2),e.JRh(n.totalDiscount),e.R7$(2),e.JRh(n.totalTax),e.R7$(2),e.JRh(n.netPrice),e.R7$(3),e.FS9("pTooltip",e.bMT(30,19,"sales.salesOrder.newOrder"))}}function Ea(o,f){1&o&&(e.j41(0,"tr"),e.nrm(1,"th",61)(2,"th",62)(3,"th",63)(4,"th",64)(5,"th",65)(6,"th",66)(7,"th",67),e.k0s())}function Na(o,f){if(1&o&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td")(8,"span"),e.EFF(9),e.k0s()(),e.j41(10,"td"),e.EFF(11),e.nI1(12,"translate"),e.k0s(),e.j41(13,"td"),e.EFF(14),e.k0s(),e.j41(15,"td"),e.EFF(16),e.k0s()()),2&o){const n=f.$implicit;e.R7$(2),e.JRh(n.itemName),e.R7$(2),e.JRh(n.unitName),e.R7$(2),e.JRh(n.clientQuantity),e.R7$(3),e.JRh(n.approvedQuantity),e.R7$(2),e.JRh(e.bMT(12,7,"sales.salesOrder."+n.discountTypeValue)),e.R7$(3),e.SpI(" ",n.discount," "),e.R7$(2),e.JRh(n.price)}}function Da(o,f){1&o&&(e.j41(0,"tr"),e.nrm(1,"td",68),e.k0s())}function dn(o,f){if(1&o&&(e.j41(0,"tr")(1,"td",57)(2,"div",58)(3,"p-table",59),e.DNE(4,Ea,8,0,"ng-template",21)(5,Na,17,9,"ng-template",22)(6,Da,2,0,"ng-template",60),e.k0s()()()()),2&o){const n=f.$implicit;e.R7$(3),e.Y8G("value",n.offerOrderDetails)}}function gt(o,f){1&o&&(e.j41(0,"div",69),e.EFF(1," general.table.noData "),e.k0s())}function Hi(o,f){if(1&o){const n=e.RV6();e.j41(0,"div",70)(1,"div",71),e.nrm(2,"ngb-pagination-info",72),e.j41(3,"table-length",73),e.bIt("lengthChange",function(i){e.eBV(n);const l=e.XpG();return e.Njj(l.ListItemChange(i))}),e.k0s()(),e.j41(4,"div",74)(5,"ngb-pagination",75),e.bIt("pageChange",function(i){e.eBV(n);const l=e.XpG();return e.Njj(l.pageChanged(i))}),e.mxI("pageChange",function(i){e.eBV(n);const l=e.XpG();return e.DH7(l.pagination.pageNumber,i)||(l.pagination.pageNumber=i),e.Njj(i)}),e.k0s()()()}if(2&o){const n=e.XpG();e.R7$(2),e.Y8G("pagination",n.pagination),e.R7$(),e.Y8G("lengthTable",n.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",n.pagination.pageSize)("collectionSize",n.pagination.totalItems),e.R50("page",n.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function La(o,f){if(1&o){const n=e.RV6();e.j41(0,"form",76,5),e.bIt("ngSubmit",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.cancelOrder())}),e.nrm(2,"ngx-ui-loader",77),e.j41(3,"div",78)(4,"div",79)(5,"button",80),e.bIt("click",function(){const i=e.eBV(n).$implicit;return e.Njj(i.dismiss())}),e.k0s()(),e.j41(6,"div",81)(7,"div",82),e.nrm(8,"lord-icon",83),e.j41(9,"div",84),e.nrm(10,"h3",85)(11,"p",86),e.k0s()(),e.j41(12,"div",87),e.nrm(13,"button",88),e.j41(14,"button",89),e.bIt("click",function(){const i=e.eBV(n).$implicit;return e.Njj(i.dismiss())}),e.k0s()()()()()}if(2&o){const n=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderOperationShap)("loaderId",n.deleteLoader)}}function Ga(o,f){if(1&o){const n=e.RV6();e.j41(0,"cancel-sales-model",90),e.bIt("success",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.loadentities())})("dismiss",function(){const i=e.eBV(n).$implicit;return e.Njj(i.dismiss())}),e.k0s()}if(2&o){const n=e.XpG();e.Y8G("orderId",n.orderSelected)}}function Va(o,f){if(1&o){const n=e.RV6();e.j41(0,"order-timeline",91),e.bIt("dismiss",function(){const i=e.eBV(n).$implicit;return e.Njj(i.dismiss())}),e.k0s()}if(2&o){const n=e.XpG();e.Y8G("orderSelected",n.orderSelected)}}function Aa(o,f){if(1&o){const n=e.RV6();e.j41(0,"form",76,5),e.bIt("ngSubmit",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.SubmitOrder())}),e.nrm(2,"ngx-ui-loader",77),e.j41(3,"div",78)(4,"div",79)(5,"button",80),e.bIt("click",function(){const i=e.eBV(n).$implicit;return e.Njj(i.dismiss())}),e.k0s()(),e.j41(6,"div",81)(7,"div",82),e.nrm(8,"lord-icon",83),e.j41(9,"div",84),e.nrm(10,"h3",85)(11,"p",86),e.k0s()(),e.j41(12,"div",87),e.nrm(13,"button",88),e.j41(14,"button",89),e.bIt("click",function(){const i=e.eBV(n).$implicit;return e.Njj(i.dismiss())}),e.k0s()()()()()}if(2&o){const n=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderOperationShap)("loaderId",n.deleteLoader)}}let Ba=(()=>{class o extends Ue.w{constructor(n,s,i,l,h,g,te,me,ge,K,Z,z,_e,Te,Oe){super(n,s,te,i,l,h,g),this.baseService=i,this.authDaamService=me,this.teamService=ge,this.workTimeService=K,this.excelService=Z,this.cityService=z,this.districtService=_e,this.channelService=Te,this.router=Oe,this.title="sales.salesOrder.sureOrder",this.titleOperation="sales.salesOrder.sureOrder",this.keySelected="",this.assignUsers=[],this.times=[],this.employees=[],this.searchForm={},this.isResolveList=!0,this.employeeTypes=[{id:1,name:"employeeTeam"},{id:2,name:"managment"},{id:3,name:"customerService"}],this.employeeGroups=[],this.activeindex="2",this.active=2,this.formPassword={},this.roles=[],this.teams=[],this.workTimes=[],this.userTypes=[],this.actives=[{id:!0,name:"active"},{id:!1,name:"noActive"}],this.clientSelected=0,this.cities=[],this.districts=[],this.channels=[],this.status=[],this.countLoad=2,this.isOrderEdit=!1,this.orderSelected={},this.users=[],this.truncks=[],this.setDates=(q,be,Ce)=>{if(q?.from||q?.to){const ht=q.to||q.from;this.pagination[be]=this.datePipe.transform(q.from||q.to,"yyyy-MM-ddT00:00:00"),this.pagination[Ce]=this.datePipe.transform(ht,"yyyy-MM-ddT23:59:59.999")}else this.pagination[be]=null,this.pagination[Ce]=null},this.loadentities()}loadentities(){this.countLoad=this.countLoad+1,(!this.isResolveList||1!==this.countLoad)&&(this.pagination.status=0,this.baseService.get(this.pagination).pipe((0,N.Q)(this.notifier)).subscribe(n=>{this.ngxLoader.stopLoader(B.a7),this.entities=n.data,this.pagination.totalItems=n.totalItems,this.LoadSuccess()},n=>{this.ngxLoader.stopLoader(B.a7),this.alertService.error(n)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[])}openModal(n,s,i="md"){this.isOrderEdit=!1,this.form={},this.orderSelected=n,this.modalService.open(s,{centered:!0,size:i})}SubmitOrder(){this.ngxLoader.startLoader(B.Fq),this.baseService.changStatus({id:this.form.id,status:this.form.status}).pipe((0,oe.O)(),(0,de.c)(this.mainDelay),(0,R.Z)(),(0,N.Q)(this.notifier),(0,w.j)(()=>this.ngxLoader.stopLoader(B.Fq))).subscribe({next:s=>{this.modalService.dismissAll(),this.loadentities(),this.alertService.success()}})}cancelOrder(){this.ngxLoader.startLoader(B.Fq),console.log(this.operationId),this.baseService.changStatus({id:this.operationId,status:40}).pipe((0,oe.O)(),(0,de.c)(this.mainDelay),(0,R.Z)(),(0,N.Q)(this.notifier),(0,w.j)(()=>this.ngxLoader.stopLoader(B.Fq))).subscribe({next:s=>{this.modalService.dismissAll(),this.loadentities(),this.alertService.success()}})}ngOnInitMore(){}mapForm(n){return{...n}}onUpdateIsActive(n){this.baseService.updateActive(n).pipe((0,N.Q)(this.notifier)).subscribe(s=>{s?this.alertService.success():this.alertService.error("general.message."+s)},s=>{this.alertService.error()})}mapRegisterForm(n){let s={...n};return s.employeeCode=0,s}onSearch(){let n={...this.searchForm};this.ngxLoader.startLoader("allLoader"),this.setDates(n.dates,"visitDateFrom","visitDateTo"),this.setDates(n.creationDates,"creationTimeFrom","creationTimeTo"),this.loadentities()}LoadSuccess(){this.ngxLoader.stopLoader("allLoader")}onReset(){this.form={},this.searchForm={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems}}configRoute(){this.routerActive.data.pipe((0,N.Q)(this.notifier)).subscribe(n=>{this.entities=n.data,this.pagination.totalItems=n.data?.totalItems},()=>{this.alertService.error()})}mapExcel(){let n=[];return this.entities.forEach(s=>{n.push({"Order Code":s.orderCode,"Created Date":s.createdDate,"City Name":s.cityName,"District Name":s.districtName?s.districtName:"--","Agent Name":s.agentName,Mobile:s.mobile,"Channel Name":s.channelName,"Assigned To":s.teamNames,Times:s.workTimes,"Visit Date":s.visitDate,Services:s.services})}),n}onExportXlsx(){let n=this.mapExcel();this.excelService.exportAsExcelFile(n,this.translateService.instant(this.title),[])}onNavChange(n){1===n.nextId&&(this.activeindex="1"),3===n.nextId&&(this.activeindex="3")}goRegister(){this.router.navigateByUrl("/managment/order/new")}goEdit(n){this.router.navigateByUrl("/managment/order/new")}getStatus(n){return 10==n.offerOrderStatus||20==n.offerOrderStatus?"bg-warning-subtle text-warning":30==n.offerOrderStatus?"bg-success-subtle text-success":40==n.offerOrderStatus?"bg-danger-subtle text-danger":50==n.offerOrderStatus?"bg-danger-success text-success":"bg-warning-subtle text-warning"}checkEdit(n){return!n.isCancel&&!n.isFinish}openStatusModal(n,s,i,l="md"){this.isEditForm=!1,this.form={},this.form={id:n,status:i},this.modalService.open(s,{centered:!0,size:l})}openModalClient(n,s,i="xl"){this.clientSelected=n.orderCode,this.form=n,this.isOrderEdit=!1,this.modalService.open(s,{centered:!0,size:i})}copytext(n){navigator.clipboard.writeText(n),this.alertService.info(n)}openEditOrderModal(n,s,i="md"){this.form={},this.isOrderEdit=!0,this.clientSelected=n,this.modalService.open(s,{centered:!0,size:i})}OpenOrderTimeLineModel(n,s,i="md"){this.orderSelected=n,this.modalService.open(s,{centered:!0,size:i})}static{this.\u0275fac=function(s){return new(s||o)(e.rXU(P.nX),e.rXU(k.c$),e.rXU(We),e.rXU(pe.u),e.rXU(F.vh),e.rXU(U.eD),e.rXU(M.Bq),e.rXU(Mt.J),e.rXU(rn.n),e.rXU(sn.G),e.rXU(ut.V),e.rXU(Ze.h),e.rXU(Xt.m),e.rXU(Ut.l),e.rXU(P.Ix))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["draft-order"]],features:[e.Vt3],decls:39,vars:31,consts:[["tableMaster",""],["cancelOrderModal",""],["deleteModal",""],["OrderTimeLineModel",""],["StatusOrderModal",""],["formEntity","ngForm"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],["overlayColor","rgba(255,255,255,0.05)","fgsColor","rgba(255,255,255,0)",3,"loaderId"],[3,"reset","search","exportXlsx","showAdd","showExport","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","number","id","id","name","id",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["InputTirmFilter","","type","search","id","clientName","name","clientName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["type","text","mwlFlatpickr","","id","isDate","mode","range","altFormat","d/m/Y",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],[2,"width",".2%"],["translate","",2,"width",".5%"],["pSortableColumn","id","translate","",2,"width","6%"],[1,"ri-expand-up-down-line"],["pSortableColumn","creationTime","translate","",2,"width","12%"],["pSortableColumn","clientId","translate","",2,"width","10%"],["pSortableColumn","clientVisitDate","translate","",2,"width","8%"],["pSortableColumn","totalQuantity","translate","",2,"width","8%"],["pSortableColumn","totalDiscount","translate","",2,"width","7%"],["translate","",2,"width","6%"],["pSortableColumn","netPrice","translate","",2,"width","6%"],["translate","",2,"width","10%"],[1,"fs-5"],["type","button","pRipple","",1,"border-0","p-button-text","p-button-rounded","p-button-plain",3,"pRowToggler","ngClass"],[1,"code-pointer"],[1,"badge","bg-success-subtle","text-success"],[1,"badge","bg-primary-subtle","text-primary","my-1"],[1,"d-inline-block"],["tooltipPosition","top",1,"btn","btn-sm","btn-warning","edit-list","mx-1",3,"click","pTooltip"],[1,"ri-checkbox-fill","align-bottom"],[1,"dropdown-custom","d-inline-block"],["type","button",1,"btn","dropbtn","btn-soft-secondary","btn-sm","dropdown-custom","arrow-none"],[1,"ri-more-fill"],[1,"dropdown-menu","dropdown-menu-end","dropdown-content",2,"left","0"],[1,"dropdown-item"],[1,"text-success","ri-pencil-fill","align-bottom","me-2"],["translate","general.action.edit"],[3,"click"],[1,"text-danger","ri-close-fill","align-bottom","me-2"],["translate","general.action.cancel"],["colspan","17"],[1,"table-detail"],["dataKey","id",3,"value"],["pTemplate","emptymessage"],["translate","sales.salesOrder.itemName",2,"width","10%"],["translate","sales.salesOrder.unit",2,"width","6%"],["translate","sales.salesOrder.clientQuantity",2,"width","8%"],["translate","sales.salesOrder.approvedQuantity",2,"width","8%"],["translate","sales.salesOrder.discountType",2,"width","5%"],["translate","sales.salesOrder.discount",2,"width","5%"],["translate","sales.salesOrder.price",2,"width","5%"],["colspan","8"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[3,"ngSubmit"],[3,"hasProgressBar","fgsType","loaderId"],[1,"modal-content"],[1,"modal-header"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","btn-close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mt-2","text-center"],["src","https://cdn.lordicon.com/gdfrsvpt.json","stroke","bold","state","hover-oscillate","trigger","loop","colors","primary:#f7b84b,secondary:#f06548",2,"width","130px","height","130px"],[1,"pt-2","fs-15","mx-4","mx-sm-5"],["translate","orderManagement.order.AreYouSureMessage"],[1,"text-muted","mx-4","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","submit","id","save","translate","general.action.save",1,"btn","w-sm","btn-danger"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light",3,"click"],[3,"success","dismiss","orderId"],[3,"dismiss","orderSelected"]],template:function(s,i){if(1&s){const l=e.RV6();e.j41(0,"div",6)(1,"div",7)(2,"div",8),e.nrm(3,"ngx-ui-loader",9),e.j41(4,"base-filter",10),e.bIt("reset",function(){return e.eBV(l),e.Njj(i.onReset())})("search",function(){return e.eBV(l),e.Njj(i.onSearch())})("exportXlsx",function(){return e.eBV(l),e.Njj(i.onExportXlsx())}),e.qex(5,11),e.j41(6,"div",12)(7,"div",13)(8,"input",14),e.nI1(9,"translate"),e.mxI("ngModelChange",function(g){return e.eBV(l),e.DH7(i.pagination.id,g)||(i.pagination.id=g),e.Njj(g)}),e.k0s(),e.nrm(10,"i",15),e.k0s()(),e.j41(11,"div",12)(12,"div",13)(13,"input",16),e.nI1(14,"translate"),e.mxI("ngModelChange",function(g){return e.eBV(l),e.DH7(i.pagination.clientName,g)||(i.pagination.clientName=g),e.Njj(g)}),e.k0s(),e.nrm(15,"i",15),e.k0s()(),e.j41(16,"div",12)(17,"input",17),e.nI1(18,"translate"),e.mxI("ngModelChange",function(g){return e.eBV(l),e.DH7(i.searchForm.dates,g)||(i.searchForm.dates=g),e.Njj(g)}),e.k0s()(),e.j41(19,"div",12)(20,"input",17),e.nI1(21,"translate"),e.mxI("ngModelChange",function(g){return e.eBV(l),e.DH7(i.searchForm.creationDates,g)||(i.searchForm.creationDates=g),e.Njj(g)}),e.k0s()(),e.bVm(),e.k0s(),e.j41(22,"div",18)(23,"div",19)(24,"p-table",20,0),e.bIt("onLazyLoad",function(g){return e.eBV(l),e.Njj(i.tableChange(g))})("selectionChange",function(g){return e.eBV(l),e.Njj(i.onSelectionChange(g))}),e.DNE(26,Lt,28,0,"ng-template",21)(27,Wn,45,21,"ng-template",22)(28,dn,7,1,"ng-template",23),e.k0s()(),e.DNE(29,gt,2,0,"div",24)(30,Hi,6,8,"div",25),e.k0s()()()(),e.DNE(31,La,15,3,"ng-template",null,1,e.C5r)(33,Ga,1,1,"ng-template",null,2,e.C5r)(35,Va,1,1,"ng-template",null,3,e.C5r)(37,Aa,15,3,"ng-template",null,4,e.C5r)}2&s&&(e.R7$(3),e.Y8G("loaderId","sureLoader"),e.R7$(),e.Y8G("showAdd",!1)("showExport",!1)("totalItems",i.pagination.totalItems)("title",i.title),e.R7$(4),e.FS9("placeholder",e.bMT(9,23,"orderManagement.order.orderCode")),e.R50("ngModel",i.pagination.id),e.R7$(5),e.FS9("placeholder",e.bMT(14,25,"orderManagement.order.agentName")),e.R50("ngModel",i.pagination.clientName),e.R7$(4),e.FS9("placeholder",e.bMT(18,27,"orderManagement.order.visitDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",i.searchForm.dates),e.R7$(3),e.FS9("placeholder",e.bMT(21,29,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",i.searchForm.creationDates),e.R7$(4),e.Y8G("value",i.entities)("rows",i.pagination.pageSize)("lazy",!0)("totalRecords",i.pagination.totalItems),e.R7$(5),e.Y8G("ngIf",i.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",i.pagination.totalItems>0))},dependencies:[F.YU,F.bT,m.qT,m.me,m.Q0,m.BC,m.cb,m.vS,m.cV,M.s5,ie.kL,et.b,$e.p,tt.g,k.Mm,L.XI,Pe.Ei,L.Tg,L.FP,U.Cv,Se.m,$t.m,Nr,F.vh,k.D9],encapsulation:2})}}return o})();function Kn(o,f){1&o&&e.nrm(0,"app-all-sales-order")}function v(o,f){1&o&&e.nrm(0,"draft-order")}function T(o,f){1&o&&e.nrm(0,"app-new-order")}function S(o,f){1&o&&e.nrm(0,"app-sure-order")}function E(o,f){1&o&&e.nrm(0,"assign-order")}function $(o,f){1&o&&e.nrm(0,"app-complete-order")}function re(o,f){1&o&&e.nrm(0,"app-cancel-order")}let ye=(()=>{class o extends Ue.w{constructor(n,s,i,l,h,g,te,me){super(n,s,te,i,l,h,g),this.baseService=i,this.authDaamService=me,this.title="orderManagement.order.title",this.titleOperation="orderManagement.order.titleOperation",this.active=3,this.activeindex="2",this.count={},this.GetOfferOrderCount()}onNavChange(n){1===n.nextId&&(this.activeindex="1"),3===n.nextId&&(this.activeindex="3")}GetOfferOrderCount(){this.baseService.GetOfferOrderCount().subscribe(n=>{this.count=n.data})}static{this.\u0275fac=function(s){return new(s||o)(e.rXU(P.nX),e.rXU(k.c$),e.rXU(We),e.rXU(pe.u),e.rXU(F.vh),e.rXU(U.eD),e.rXU(M.Bq),e.rXU(Mt.J))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-order-layout"]],features:[e.Vt3],decls:41,vars:13,consts:[["nav","ngbNav"],[1,"row"],[1,"col-lg-12"],["ngbNav","",1,"nav","nav-tabs-custom","card-header-tabs","border-bottom-0","justify-content-center",3,"activeIdChange","navChange","activeId"],[3,"ngbNavItem"],["ngbNavLink",""],["translate","sales.salesOrder.allOrders"],["ngbNavContent",""],["translate","sales.salesOrder.draftOrder"],[1,"ms-2","badge","bg-warning"],["translate","sales.salesOrder.newOrders"],["translate","sales.salesOrder.sureOrder"],["translate","sales.salesOrder.assignTrunk"],["translate","sales.salesOrder.completeOrder"],["translate","sales.salesOrder.cancelOrder"],[1,"mt-2",3,"ngbNavOutlet"]],template:function(s,i){if(1&s){const l=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"ul",3,0),e.mxI("activeIdChange",function(g){return e.eBV(l),e.DH7(i.active,g)||(i.active=g),e.Njj(g)}),e.bIt("navChange",function(g){return e.eBV(l),e.Njj(i.onNavChange(g))}),e.j41(4,"li",4)(5,"a",5),e.nrm(6,"span",6),e.k0s(),e.DNE(7,Kn,1,0,"ng-template",7),e.k0s(),e.j41(8,"li",4)(9,"a",5),e.nrm(10,"span",8),e.j41(11,"span",9),e.EFF(12),e.k0s()(),e.DNE(13,v,1,0,"ng-template",7),e.k0s(),e.j41(14,"li",4)(15,"a",5),e.nrm(16,"span",10),e.j41(17,"span",9),e.EFF(18),e.k0s()(),e.DNE(19,T,1,0,"ng-template",7),e.k0s(),e.j41(20,"li",4)(21,"a",5),e.nrm(22,"span",11),e.j41(23,"span",9),e.EFF(24),e.k0s()(),e.DNE(25,S,1,0,"ng-template",7),e.k0s(),e.j41(26,"li",4)(27,"a",5),e.nrm(28,"span",12),e.j41(29,"span",9),e.EFF(30),e.k0s()(),e.DNE(31,E,1,0,"ng-template",7),e.k0s(),e.j41(32,"li",4)(33,"a",5),e.nrm(34,"span",13),e.k0s(),e.DNE(35,$,1,0,"ng-template",7),e.k0s(),e.j41(36,"li",4)(37,"a",5),e.nrm(38,"span",14),e.k0s(),e.DNE(39,re,1,0,"ng-template",7),e.k0s()(),e.nrm(40,"div",15),e.k0s()()}if(2&s){const l=e.sdS(3);e.R7$(2),e.R50("activeId",i.active),e.R7$(2),e.Y8G("ngbNavItem",1),e.R7$(4),e.Y8G("ngbNavItem",2),e.R7$(4),e.JRh(null==i.count?null:i.count.draft),e.R7$(2),e.Y8G("ngbNavItem",3),e.R7$(4),e.JRh(null==i.count?null:i.count.pending),e.R7$(2),e.Y8G("ngbNavItem",4),e.R7$(4),e.JRh(null==i.count?null:i.count.approved),e.R7$(2),e.Y8G("ngbNavItem",5),e.R7$(4),e.JRh(null==i.count?null:i.count.assign),e.R7$(2),e.Y8G("ngbNavItem",6),e.R7$(4),e.Y8G("ngbNavItem",7),e.R7$(4),e.Y8G("ngbNavOutlet",l)}},dependencies:[M.Um,M.X9,M.sy,M.Gx,M.Ri,M.WA,M.m_,k.Mm,Si,na,wi,Sa,Pi,qi,Ba],encapsulation:2})}}return o})(),se=(()=>{class o extends xt.d{constructor(n){super(n,Ft.c.apiUrl+"InvoiceMaster/")}register(n){return this.http.post(this.baseUrl+"AddPaymentToInvoice",n)}edit(n){return this.http.post(this.baseUrl+"EditPayment",n)}softDelete(n){return this.http.delete(this.baseUrl+`SoftDelete/${n}`)}finishOrder(n){return this.http.get(this.baseUrl+`finishOrder/${n}`)}static{this.\u0275fac=function(s){return new(s||o)(e.KVO(Et.Qq))}}static{this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})(),Zn=(()=>{class o extends xt.d{constructor(n){super(n,Ft.c.apiUrl+"PaymentType/")}getLookups(){return this.http.get(this.baseUrl+"Lookups")}changStatus(n){return this.http.put(this.baseUrl+"ChangeStatus/",n)}static{this.\u0275fac=function(s){return new(s||o)(e.KVO(Et.Qq))}}static{this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var $a=I(99902),qe=I(3200);function er(o,f){1&o&&(e.j41(0,"tr",27)(1,"th",28),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",29),e.nrm(4,"i",30),e.EFF(5," orderManagement.order.invoiceCode "),e.k0s(),e.j41(6,"th",31),e.nrm(7,"i",30),e.EFF(8," orderManagement.order.clientName "),e.k0s(),e.j41(9,"th",32),e.nrm(10,"i",30),e.EFF(11," orderManagement.order.orderCode "),e.k0s(),e.j41(12,"th",33),e.nrm(13,"i",30),e.EFF(14," orderManagement.order.creation "),e.k0s(),e.j41(15,"th",34),e.nrm(16,"i",30),e.EFF(17," sales.salesInvoices.total "),e.k0s(),e.j41(18,"th",35),e.nrm(19,"i",30),e.EFF(20," sales.salesOrder.totalDiscount "),e.k0s(),e.j41(21,"th",36),e.nrm(22,"i",30),e.EFF(23," sales.salesInvoices.tax "),e.k0s(),e.j41(24,"th",37),e.nrm(25,"i",30),e.EFF(26," sales.salesOrder.netPrice "),e.k0s(),e.j41(27,"th",38),e.nrm(28,"i",30),e.EFF(29," sales.salesOrder.isSync "),e.k0s(),e.j41(30,"th",39),e.nrm(31,"i",30),e.EFF(32," sales.salesInvoices.notes "),e.k0s(),e.nrm(33,"th",40),e.k0s())}function Xa(o,f){if(1&o&&(e.j41(0,"span",57),e.EFF(1),e.k0s()),2&o){const n=e.XpG().$implicit;e.R7$(),e.JRh(n.creatorName)}}function cn(o,f){1&o&&e.nrm(0,"span",58)}function tr(o,f){1&o&&e.nrm(0,"span",59)}function nr(o,f){if(1&o&&(e.j41(0,"tr",41)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td")(4,"bdi",42),e.EFF(5),e.k0s()(),e.j41(6,"td"),e.EFF(7),e.k0s(),e.j41(8,"td")(9,"bdi",42),e.EFF(10),e.k0s(),e.nrm(11,"i",43),e.k0s(),e.j41(12,"td"),e.DNE(13,Xa,2,1,"span",44),e.EFF(14),e.nI1(15,"date"),e.k0s(),e.j41(16,"td"),e.EFF(17),e.k0s(),e.j41(18,"td"),e.EFF(19),e.k0s(),e.j41(20,"td"),e.EFF(21),e.k0s(),e.j41(22,"td")(23,"span",45),e.EFF(24),e.k0s()(),e.j41(25,"td"),e.DNE(26,cn,1,0,"span",46)(27,tr,1,0,"span",47),e.k0s(),e.j41(28,"td"),e.EFF(29),e.k0s(),e.j41(30,"td")(31,"div",48)(32,"span",48)(33,"div",49)(34,"button",50),e.nrm(35,"i",51),e.k0s(),e.j41(36,"ul",52)(37,"li")(38,"span",53),e.nrm(39,"i",54)(40,"span",55),e.k0s()(),e.j41(41,"li")(42,"span",53),e.nrm(43,"i",54)(44,"span",56),e.k0s()()()()()()()()),2&o){const n=f.$implicit,s=f.rowIndex;e.R7$(2),e.JRh(s+1),e.R7$(3),e.SpI("#INV#",n.id,""),e.R7$(2),e.JRh(n.clientName),e.R7$(3),e.SpI("#SO#",n.offerOrderId," "),e.R7$(3),e.Y8G("ngIf",n.creatorName),e.R7$(),e.SpI(" ",e.i5U(15,13,n.creationTime,"yyyy-MM-dd")," "),e.R7$(3),e.JRh(n.total),e.R7$(2),e.JRh(n.totalDiscount),e.R7$(2),e.JRh(n.tax),e.R7$(3),e.JRh(n.net),e.R7$(2),e.Y8G("ngIf",n.isSync),e.R7$(),e.Y8G("ngIf",!n.isSync),e.R7$(2),e.JRh(n.notes)}}function ae(o,f){1&o&&(e.j41(0,"div",60),e.EFF(1," general.table.noData "),e.k0s())}function Ua(o,f){if(1&o){const n=e.RV6();e.j41(0,"div",61)(1,"div",62),e.nrm(2,"ngb-pagination-info",63),e.j41(3,"table-length",64),e.bIt("lengthChange",function(i){e.eBV(n);const l=e.XpG();return e.Njj(l.ListItemChange(i))}),e.k0s()(),e.j41(4,"div",65)(5,"ngb-pagination",66),e.bIt("pageChange",function(i){e.eBV(n);const l=e.XpG();return e.Njj(l.pageChanged(i))}),e.mxI("pageChange",function(i){e.eBV(n);const l=e.XpG();return e.DH7(l.pagination.pageNumber,i)||(l.pagination.pageNumber=i),e.Njj(i)}),e.k0s()()()}if(2&o){const n=e.XpG();e.R7$(2),e.Y8G("pagination",n.pagination),e.R7$(),e.Y8G("lengthTable",n.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",n.pagination.pageSize)("collectionSize",n.pagination.totalItems),e.R50("page",n.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function Qi(o,f){1&o&&(e.j41(0,"span",93),e.EFF(1,"general.action.register "),e.k0s())}function rr(o,f){1&o&&(e.j41(0,"span",93),e.EFF(1,"general.action.edit "),e.k0s())}function Pa(o,f){1&o&&(e.j41(0,"div",94),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function Ya(o,f){1&o&&(e.j41(0,"div",94),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function za(o,f){if(1&o){const n=e.RV6();e.j41(0,"div",97)(1,"i",98),e.bIt("click",function(){e.eBV(n);const i=e.XpG().index,l=e.XpG(2);return e.Njj(l.removeFile(i))}),e.k0s(),e.j41(2,"p-image",99),e.bIt("error",function(i){e.eBV(n);const l=e.XpG(3);return e.Njj(l.setDefaultImage(i,"assets/images/custom/no-img.jpg"))}),e.k0s()()}2&o&&(e.R7$(2),e.Y8G("src","assets/images/PDF.png")("preview",!1)("alt","pdf"))}function ir(o,f){if(1&o){const n=e.RV6();e.j41(0,"div",97)(1,"i",98),e.bIt("click",function(){e.eBV(n);const i=e.XpG().index,l=e.XpG(2);return e.Njj(l.removeFile(i))}),e.k0s(),e.j41(2,"p-image",99),e.bIt("error",function(i){e.eBV(n);const l=e.XpG(3);return e.Njj(l.setDefaultImage(i,"assets/images/custom/no-img.jpg"))}),e.k0s()()}if(2&o){const n=e.XpG().$implicit,s=e.XpG(2);e.R7$(2),e.Y8G("src",n.isNew?n.attachment:s.serverPath+n.attachment)("preview",!0)("alt","image")}}function Gt(o,f){if(1&o&&(e.j41(0,"div",95),e.DNE(1,za,3,3,"div",96)(2,ir,3,3,"div",96),e.k0s()),2&o){const n=f.index,s=e.XpG(2);e.R7$(),e.Y8G("ngIf","application/pdf"===s.filesNames[n]),e.R7$(),e.Y8G("ngIf","application/pdf"!==s.filesNames[n])}}function sr(o,f){if(1&o){const n=e.RV6();e.j41(0,"div",67)(1,"div",68)(2,"h4",69),e.DNE(3,Qi,2,0,"span",70)(4,rr,2,0,"span",70),e.j41(5,"span",71),e.EFF(6),e.k0s()(),e.j41(7,"button",72),e.bIt("click",function(){const i=e.eBV(n).$implicit;return e.Njj(i.dismiss("Cross click"))}),e.k0s()(),e.j41(8,"div",73),e.nrm(9,"ngx-ui-loader",74),e.j41(10,"form",75,3),e.bIt("submit",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.OnSubmit())}),e.j41(12,"div",76)(13,"label",77),e.EFF(14,"sales.salesInvoices.paymentTypeName"),e.k0s(),e.j41(15,"ng-select",78,4),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG();return e.DH7(l.form.paymentTypeId,i)||(l.form.paymentTypeId=i),e.Njj(i)}),e.k0s(),e.DNE(17,Pa,2,0,"div",79),e.k0s(),e.j41(18,"div",76)(19,"label",80),e.EFF(20,"sales.salesInvoices.cost"),e.k0s(),e.j41(21,"input",81,5),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG();return e.DH7(l.form.cost,i)||(l.form.cost=i),e.Njj(i)}),e.k0s(),e.DNE(23,Ya,2,0,"div",82),e.k0s(),e.j41(24,"div",76)(25,"label",83),e.EFF(26,"general.table.notes"),e.k0s(),e.j41(27,"textarea",84),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG();return e.DH7(l.form.notes,i)||(l.form.notes=i),e.Njj(i)}),e.EFF(28,"                    "),e.k0s()(),e.j41(29,"div",8)(30,"div",85)(31,"label",77),e.EFF(32," orderManagement.order.attachment"),e.k0s(),e.j41(33,"input",86,6),e.bIt("change",function(i){e.eBV(n);const l=e.XpG();return e.Njj(l.onFileSelected(i))}),e.k0s()(),e.j41(35,"div",87),e.DNE(36,Gt,3,2,"div",88),e.k0s()(),e.j41(37,"div",89)(38,"button",90),e.nrm(39,"i",91)(40,"span",92),e.k0s()()()()()}if(2&o){const n=e.sdS(11),s=e.sdS(16),i=e.sdS(22),l=e.XpG();e.R7$(3),e.Y8G("ngIf",!l.isEditForm),e.R7$(),e.Y8G("ngIf",l.isEditForm),e.R7$(2),e.JRh(l.titleOperation),e.R7$(3),e.Y8G("hasProgressBar",!1)("fgsType",l.loaderOperationShap)("loaderId",l.operationLoader),e.R7$(6),e.Y8G("items",l.paymentMethods)("multiple",!1),e.R50("ngModel",l.form.paymentTypeId),e.R7$(2),e.Y8G("ngIf",s.invalid&&s.touched),e.R7$(4),e.R50("ngModel",l.form.cost),e.R7$(2),e.Y8G("ngIf",i.invalid&&i.touched),e.R7$(4),e.R50("ngModel",l.form.notes),e.R7$(9),e.Y8G("ngForOf",l.filesToShow),e.R7$(2),e.Y8G("disabled",!n.valid)}}function Ji(o,f){if(1&o){const n=e.RV6();e.j41(0,"delete-modal",100),e.bIt("deleteConfirm",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.DeleteConfirmSoft())})("dismiss",function(){const i=e.eBV(n).$implicit;return e.Njj(i.dismiss())}),e.k0s()}}let ar=(()=>{class o extends Ue.w{constructor(n,s,i,l,h,g,te,me,ge){super(n,s,te,i,l,h,g),this.baseService=i,this.paymentTypesService=me,this.formData=ge,this.title="sales.salesInvoices.title",this.titleOperation="sales.salesInvoices.payment",this.paymentMethods=[],this.searchForm={},this.form={file:""},this.filesToSend=[],this.filesToShow=[],this.filesNames=[],this.isResolveList=!0,this.serverPath=Ft.c.mediaUrl,this.countLoad=0,this.isOrderEdit=!1,this.setDates=(K,Z,z)=>{if(K?.from||K?.to){const Te=K.to||K.from;this.pagination[Z]=this.datePipe.transform(K.from||K.to,"yyyy-MM-ddT00:00:00"),this.pagination[z]=this.datePipe.transform(Te,"yyyy-MM-ddT23:59:59.999")}else this.pagination[Z]=null,this.pagination[z]=null},this.configRoute(),this.getPaymentTypes()}configRoute(){this.routerActive.data.pipe((0,N.Q)(this.notifier)).subscribe(n=>{this.entities=n.data.data,this.pagination.totalItems=n.data.totalItems},()=>{this.alertService.error()})}getPaymentTypes(){this.paymentTypesService.getDropDown().subscribe({next:n=>{this.paymentMethods=n.data}})}onSearch(){let n={...this.searchForm};this.ngxLoader.startLoader("allLoader"),this.setDates(n.dates,"visitDateFrom","visitDateTo"),this.setDates(n.creationDates,"creationTimeFrom","creationTimeTo"),this.loadentities()}LoadSuccess(){this.ngxLoader.stopLoader("allLoader")}onReset(){this.form={},this.searchForm={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems}}openInvoiceModal(n,s,i="md",l){if(this.isEditForm=l,this.form={},this.clearFiles(),this.operationId=n.id,l){this.form=n,console.log(this.form);let h="";n.path&&(h=n.path.split(".")[1]),this.filesToSend.push({id:0,isNew:!1,attachment:n.path}),this.filesToShow.push({id:0,isNew:!1,attachment:n.path}),this.filesNames.push("pdf"===h?"application/pdf":h),this.modalService.open(s,{centered:!0,size:i})}else this.form.invoiceMasterId=n.id,this.modalService.open(s,{centered:!0,size:i})}onFileSelected(n){this.clearFiles();const s=n.target;if(n.target.files&&n.target.files[0]){let i=n.target.files.length;for(let l=0;l<i;l++){let h=new FileReader;this.filesToSend.push({id:0,isNew:!0,attachment:n.target.files.item(l)}),this.filesNames.push(n.target.files[l].type),h.onload=g=>{this.filesToShow.push({id:0,isNew:!0,attachment:g.target.result}),console.log(this.filesToShow)},h.readAsDataURL(n.target?.files[l])}s.value=""}}setDefaultImage(n,s){const i=n.target;console.log(i,"targettargettargettarget"),i.src=s}checkExtension(n){const i=n.split("/").pop().split(".").pop();return console.log(),i}checkUrl(n){return null==n||""==n?"":n.startsWith("/upload")?n.replace("/upload","upload"):n}removeFile(n){this.filesToShow.splice(n,1),this.filesNames.splice(n,1),this.filesToSend.splice(n,1)}clearFiles(){this.filesNames=[],this.filesToShow=[],this.filesToSend=[]}registerEntity(){let n=this.mapRegisterForm(this.form);n.file=this.filesToSend&&this.filesToSend.length>0?this.filesToSend[0].attachment:null,this.baseService.register(this.formData.formatFormData(n)).pipe((0,oe.O)(),(0,de.c)(this.mainDelay),(0,R.Z)(),(0,N.Q)(this.notifier),(0,w.j)(()=>this.ngxLoader.stopLoader(B.ZW)),(0,ve.W)(s=>(0,De.$)(s))).subscribe(s=>{s.success?(this.modalService.dismissAll(),this.submitFunished()):this.alertService.error("general.message."+s.message)},s=>{this.alertService.error("general.message."+s)})}editEntity(){let n=this.mapForm(this.form);n.file=this.filesToSend&&this.filesToSend.length>0?this.filesToSend[0].attachment:null,this.baseService.edit(this.formData.formatFormData(n)).pipe((0,oe.O)(),(0,de.c)(this.mainDelay),(0,R.Z)(),(0,N.Q)(this.notifier),(0,w.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(s=>{s.success?this.submitFunished():this.alertService.error("general.message."+s.message)},s=>{this.alertService.error("general.message."+s)})}static{this.\u0275fac=function(s){return new(s||o)(e.rXU(P.nX),e.rXU(k.c$),e.rXU(se),e.rXU(pe.u),e.rXU(F.vh),e.rXU(U.eD),e.rXU(M.Bq),e.rXU(Zn),e.rXU($a.Q))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-sales-invoices"]],features:[e.Vt3],decls:36,vars:35,consts:[["tableMaster",""],["addPaymentModal",""],["deleteModal",""],["formEntity","ngForm"],["paymentTypeId","ngModel"],["cost","ngModel"],["fileInput",""],[3,"title","breadcrumbItems"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],["overlayColor","rgba(255,255,255,0.05)","fgsColor","rgba(255,255,255,0)",3,"loaderId"],[3,"reset","search","showAdd","showExport","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","number","id","id","name","id",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["InputTirmFilter","","type","search","id","clientName","name","clientName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["type","text","mwlFlatpickr","","id","isDate","mode","range","altFormat","d/m/Y",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["translate","",2,"width",".3%"],["pSortableColumn","id","translate","",2,"width","3%"],[1,"ri-expand-up-down-line"],["pSortableColumn","clientId","translate","",2,"width","10%"],["pSortableColumn","id","translate","",2,"width","4%"],["pSortableColumn","creationTime","translate","",2,"width","5%"],["pSortableColumn","total","translate","",2,"width","5%"],["pSortableColumn","totalDiscount","translate","",2,"width","5%"],["pSortableColumn","tax","translate","",2,"width","4%"],["pSortableColumn","net","translate","",2,"width","4%"],["pSortableColumn","isSync","translate","",2,"width","5%"],["pSortableColumn","notes","translate","",2,"width","5%"],[2,"width","6%"],[1,"fs-5"],[1,"code-pointer"],[1,"ri-share-circle-fill","label-icon","align-middle","rounded-pill","fs-16","me-2"],["class","badge bg-success-subtle text-success",4,"ngIf"],[1,"badge","fs-5","bg-success-subtle","text-success","badge-border"],["class","badge bg-success","translate","sales.salesOrder.syncSend",4,"ngIf"],["class","badge bg-warning","translate","sales.salesOrder.syncNotSend",4,"ngIf"],[1,"d-inline-block"],[1,"dropdown-custom","d-inline-block"],["type","button",1,"btn","dropbtn","btn-soft-secondary","btn-sm","dropdown-custom","arrow-none"],[1,"ri-more-fill"],[1,"dropdown-menu","dropdown-menu-end","dropdown-content",2,"left","0"],[1,"dropdown-item"],[1,"ri-printer-line","align-bottom","me-2","text-muted"],["translate","sales.salesOrder.isSync"],["translate","orderManagement.order.printPill"],[1,"badge","bg-success-subtle","text-success"],["translate","sales.salesOrder.syncSend",1,"badge","bg-success"],["translate","sales.salesOrder.syncNotSend",1,"badge","bg-warning"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["class","fw-bold fs-4","translate","",4,"ngIf"],["translate",""],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"hasProgressBar","fgsType","loaderId"],[3,"submit"],[1,"mb-3"],["translate","",1,"required","fw-bold","form-label","w-100"],["name","paymentTypeId","bindValue","code","bindLabel","name","required","",3,"ngModelChange","items","multiple","ngModel"],["class","text-danger text-center","translate","",4,"ngIf"],["for","cost","translate","",1,"required","fw-bold","form-label"],["InputTirmFilter","","name","cost","type","text","id","employeeName","required","",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],["for","notes","translate","",1,"fw-bold","form-label"],["rows","3","name","notes","type","text","id","notes",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,"col-12","mb-2"],["accept","image/*, application/pdf","type","file","placeholder","dfd",1,"form-control","fs-6",3,"change"],[1,"my-3","row","row-cols-5"],["class","col",4,"ngFor","ngForOf"],[1,"text-center"],["type","submit","type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],["translate","",1,"fw-bold","fs-4"],["translate","",1,"text-danger","text-center"],[1,"col"],["class","position-relative",4,"ngIf"],[1,"position-relative"],[1,"ri-close-fill","position-absolute",2,"border-radius","50%","background-color","red","inset-inline-start","-14px","top","-8px","color","white",3,"click"],["width","50","height","50",3,"error","src","preview","alt"],[3,"deleteConfirm","dismiss"]],template:function(s,i){if(1&s){const l=e.RV6();e.nrm(0,"app-breadcrumbs",7),e.nI1(1,"translate"),e.j41(2,"div",8)(3,"div",9)(4,"div",10),e.nrm(5,"ngx-ui-loader",11),e.j41(6,"base-filter",12),e.bIt("reset",function(){return e.eBV(l),e.Njj(i.onReset())})("search",function(){return e.eBV(l),e.Njj(i.onSearch())}),e.qex(7,13),e.j41(8,"div",14)(9,"div",15)(10,"input",16),e.nI1(11,"translate"),e.mxI("ngModelChange",function(g){return e.eBV(l),e.DH7(i.pagination.id,g)||(i.pagination.id=g),e.Njj(g)}),e.k0s(),e.nrm(12,"i",17),e.k0s()(),e.j41(13,"div",14)(14,"div",15)(15,"input",18),e.nI1(16,"translate"),e.mxI("ngModelChange",function(g){return e.eBV(l),e.DH7(i.pagination.clientName,g)||(i.pagination.clientName=g),e.Njj(g)}),e.k0s(),e.nrm(17,"i",17),e.k0s()(),e.j41(18,"div",14)(19,"input",19),e.nI1(20,"translate"),e.mxI("ngModelChange",function(g){return e.eBV(l),e.DH7(i.searchForm.dates,g)||(i.searchForm.dates=g),e.Njj(g)}),e.k0s()(),e.j41(21,"div",14)(22,"input",19),e.nI1(23,"translate"),e.mxI("ngModelChange",function(g){return e.eBV(l),e.DH7(i.searchForm.creationDates,g)||(i.searchForm.creationDates=g),e.Njj(g)}),e.k0s()(),e.bVm(),e.k0s(),e.j41(24,"div",20)(25,"div",21)(26,"p-table",22,0),e.bIt("onLazyLoad",function(g){return e.eBV(l),e.Njj(i.tableChange(g))})("selectionChange",function(g){return e.eBV(l),e.Njj(i.onSelectionChange(g))}),e.DNE(28,er,34,0,"ng-template",23)(29,nr,45,16,"ng-template",24),e.k0s()(),e.DNE(30,ae,2,0,"div",25)(31,Ua,6,8,"div",26),e.k0s()()()(),e.DNE(32,sr,41,15,"ng-template",null,1,e.C5r)(34,Ji,1,0,"ng-template",null,2,e.C5r)}2&s&&(e.FS9("title",e.bMT(1,25,i.title)),e.Y8G("breadcrumbItems",i.breadCrumbItems),e.R7$(5),e.Y8G("loaderId","newLoader"),e.R7$(),e.Y8G("showAdd",!1)("showExport",!1)("totalItems",i.pagination.totalItems)("title",i.title),e.R7$(4),e.FS9("placeholder",e.bMT(11,27,"orderManagement.order.orderCode")),e.R50("ngModel",i.pagination.id),e.R7$(5),e.FS9("placeholder",e.bMT(16,29,"orderManagement.order.agentName")),e.R50("ngModel",i.pagination.clientName),e.R7$(4),e.FS9("placeholder",e.bMT(20,31,"orderManagement.order.visitDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",i.searchForm.dates),e.R7$(3),e.FS9("placeholder",e.bMT(23,33,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",i.searchForm.creationDates),e.R7$(4),e.Y8G("value",i.entities)("rows",i.pagination.pageSize)("lazy",!0)("totalRecords",i.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",i.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",i.pagination.totalItems>0))},dependencies:[F.Sq,F.bT,m.qT,m.me,m.Q0,m.BC,m.cb,m.YS,m.vS,m.cV,M.s5,ie.kL,Or.m,et.b,Rt.w,$e.p,tt.g,k.Mm,L.XI,Pe.Ei,L.Tg,U.Cv,ke.vr,Se.m,qe._,F.vh,k.D9],encapsulation:2})}}return o})();var Hr=I(56131);let or=(()=>{class o extends Hr.E{constructor(n,s,i){super(n,s,i)}static{this.\u0275fac=function(s){return new(s||o)(e.KVO(P.Ix),e.KVO(se),e.KVO(pe.u))}}static{this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();I(67376);let Qr=(()=>{class o extends xt.d{constructor(n){super(n,Ft.c.apiUrl+"ClientCollection/")}static{this.\u0275fac=function(s){return new(s||o)(e.KVO(Et.Qq))}}static{this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();function kn(o,f){1&o&&(e.j41(0,"tr",26)(1,"th",27),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",28),e.nrm(4,"i",29),e.EFF(5," sales.clientCollection.clientName "),e.k0s(),e.j41(6,"th",30),e.nrm(7,"i",29),e.EFF(8," sales.clientCollection.paymentTypeName "),e.k0s(),e.j41(9,"th",31),e.nrm(10,"i",29),e.EFF(11," orderManagement.order.creation "),e.k0s(),e.j41(12,"th",32),e.nrm(13,"i",29),e.EFF(14," sales.clientCollection.cost "),e.k0s(),e.j41(15,"th",33),e.nrm(16,"i",29),e.EFF(17," sales.clientCollection.isSyncOdoo "),e.k0s(),e.j41(18,"th",34),e.nrm(19,"i",29),e.EFF(20," sales.clientCollection.syncDate "),e.k0s(),e.j41(21,"th",35),e.nrm(22,"i",29),e.EFF(23," sales.clientCollection.notes "),e.k0s(),e.nrm(24,"th",36),e.k0s())}function Pt(o,f){1&o&&e.nrm(0,"span",48)}function lr(o,f){1&o&&e.nrm(0,"span",49)}function qa(o,f){if(1&o&&(e.nrm(0,"i",50),e.EFF(1),e.nI1(2,"date"),e.nrm(3,"br")(4,"i",51),e.EFF(5),e.nI1(6,"date"),e.nrm(7,"br")(8,"i",52),e.EFF(9)),2&o){const n=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.i5U(2,3,n.creationTime,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",e.i5U(6,6,n.lastModificationTime,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",n.creatorName," ")}}function Ha(o,f){if(1&o){const n=e.RV6();e.j41(0,"tr",37)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td")(8,"span",38),e.EFF(9),e.k0s(),e.EFF(10),e.nI1(11,"date"),e.k0s(),e.j41(12,"td"),e.EFF(13),e.k0s(),e.j41(14,"td"),e.DNE(15,Pt,1,0,"span",39)(16,lr,1,0,"span",40),e.k0s(),e.j41(17,"td"),e.EFF(18),e.nI1(19,"date"),e.k0s(),e.j41(20,"td"),e.EFF(21),e.k0s(),e.j41(22,"td"),e.DNE(23,qa,10,9,"ng-template",null,3,e.C5r),e.nrm(25,"i",41),e.j41(26,"button",42),e.nrm(27,"i",43),e.k0s(),e.j41(28,"button",44),e.bIt("click",function(){const i=e.eBV(n).$implicit,l=e.XpG(),h=e.sdS(22);return e.Njj(l.EditModel(i.id,h))}),e.nrm(29,"i",45),e.k0s(),e.j41(30,"button",46),e.bIt("click",function(){const i=e.eBV(n).$implicit,l=e.XpG(),h=e.sdS(24);return e.Njj(l.openModal(i.id,h))}),e.nrm(31,"i",47),e.k0s()()()}if(2&o){const n=f.$implicit,s=f.rowIndex,i=e.sdS(24);e.R7$(2),e.JRh(s+1),e.R7$(2),e.JRh(n.clientName),e.R7$(2),e.JRh(n.paymentTypeName),e.R7$(3),e.SpI("",n.creatorName," "),e.R7$(),e.SpI(" ",e.i5U(11,11,n.creationTime,"yyyy-MM-dd")," "),e.R7$(3),e.JRh(n.cost),e.R7$(2),e.Y8G("ngIf",n.isSyncOdoo),e.R7$(),e.Y8G("ngIf",!n.isSyncOdoo),e.R7$(2),e.JRh(e.i5U(19,14,n.syncDate,"yyyy-MM-dd HH:mm:ss")),e.R7$(3),e.JRh(n.notes),e.R7$(4),e.Y8G("ngbTooltip",i)}}function Qa(o,f){1&o&&(e.j41(0,"div",53),e.EFF(1," general.table.noData"),e.k0s())}function dr(o,f){if(1&o){const n=e.RV6();e.j41(0,"div",54)(1,"div",55),e.nrm(2,"ngb-pagination-info",56),e.j41(3,"table-length",57),e.bIt("lengthChange",function(i){e.eBV(n);const l=e.XpG();return e.Njj(l.ListItemChange(i))}),e.k0s()(),e.j41(4,"div",58)(5,"ngb-pagination",59),e.bIt("pageChange",function(i){e.eBV(n);const l=e.XpG();return e.Njj(l.pageChanged(i))}),e.mxI("pageChange",function(i){e.eBV(n);const l=e.XpG();return e.DH7(l.pagination.pageNumber,i)||(l.pagination.pageNumber=i),e.Njj(i)}),e.k0s()()()}if(2&o){const n=e.XpG();e.R7$(2),e.Y8G("pagination",n.pagination),e.R7$(),e.Y8G("lengthTable",n.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",n.pagination.pageSize)("collectionSize",n.pagination.totalItems),e.R50("page",n.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function cr(o,f){1&o&&(e.j41(0,"span",85),e.EFF(1,"general.action.register "),e.k0s())}function Jr(o,f){1&o&&(e.j41(0,"span",85),e.EFF(1,"general.action.edit "),e.k0s())}function Ja(o,f){1&o&&(e.j41(0,"div",86),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function Wi(o,f){1&o&&(e.j41(0,"div",86),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function Wa(o,f){if(1&o){const n=e.RV6();e.j41(0,"div",60)(1,"div",61)(2,"h4",62),e.DNE(3,cr,2,0,"span",63)(4,Jr,2,0,"span",63),e.j41(5,"span",64),e.EFF(6),e.k0s()(),e.j41(7,"button",65),e.bIt("click",function(){const i=e.eBV(n).$implicit;return e.Njj(i.dismiss("Cross click"))}),e.k0s()(),e.j41(8,"div",66),e.nrm(9,"ngx-ui-loader",67),e.j41(10,"form",68,4),e.bIt("submit",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.OnSubmit())}),e.j41(12,"div",69)(13,"label",70),e.EFF(14,"sales.clientCollection.clientName"),e.k0s(),e.j41(15,"ng-select",71),e.bIt("scrollToEnd",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.scrollClient())}),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG();return e.DH7(l.form.clientId,i)||(l.form.clientId=i),e.Njj(i)}),e.k0s()(),e.j41(16,"div",69)(17,"label",72),e.EFF(18,"sales.salesInvoices.paymentTypeName"),e.k0s(),e.j41(19,"ng-select",73,5),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG();return e.DH7(l.form.paymentTypeId,i)||(l.form.paymentTypeId=i),e.Njj(i)}),e.k0s(),e.DNE(21,Ja,2,0,"div",74),e.k0s(),e.j41(22,"div",75)(23,"label",76),e.EFF(24,"sales.clientCollection.cost"),e.k0s(),e.j41(25,"input",77,6),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG();return e.DH7(l.form.cost,i)||(l.form.cost=i),e.Njj(i)}),e.k0s(),e.DNE(27,Wi,2,0,"div",78),e.k0s(),e.j41(28,"div",75)(29,"label",79),e.EFF(30,"sales.clientCollection.notes"),e.k0s(),e.j41(31,"textarea",80,7),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG();return e.DH7(l.form.notes,i)||(l.form.notes=i),e.Njj(i)}),e.k0s()(),e.j41(33,"div",81)(34,"button",82),e.nrm(35,"i",83)(36,"span",84),e.k0s()()()()()}if(2&o){const n=e.sdS(11),s=e.sdS(20),i=e.sdS(26),l=e.XpG();e.R7$(3),e.Y8G("ngIf",!l.isEditForm),e.R7$(),e.Y8G("ngIf",l.isEditForm),e.R7$(2),e.JRh(l.titleOperation),e.R7$(3),e.Y8G("hasProgressBar",!1)("fgsType",l.loaderOperationShap)("loaderId",l.operationLoader),e.R7$(6),e.Y8G("virtualScroll",!0)("items",l.clients)("typeahead",l.searchClient)("loading",l.loading)("multiple",!1),e.R50("ngModel",l.form.clientId),e.R7$(4),e.Y8G("items",l.paymentMethods)("multiple",!1),e.R50("ngModel",l.form.paymentTypeId),e.R7$(2),e.Y8G("ngIf",s.invalid&&s.touched),e.R7$(4),e.R50("ngModel",l.form.cost),e.R7$(2),e.Y8G("ngIf",i.invalid&&i.touched),e.R7$(4),e.R50("ngModel",l.form.notes),e.R7$(3),e.Y8G("disabled",!n.valid)}}function Ka(o,f){if(1&o){const n=e.RV6();e.j41(0,"delete-modal",87),e.bIt("deleteConfirm",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.DeleteConfirmSoft())})("dismiss",function(){const i=e.eBV(n).$implicit;return e.Njj(i.dismiss())}),e.k0s()}}let xe=(()=>{class o extends Ue.w{constructor(n,s,i,l,h,g,te,me,ge,K,Z){super(n,s,te,i,l,h,g),this.baseService=i,this.excelService=ge,this.clientService=K,this.paymentTypesService=Z,this.title="sales.clientCollection.title",this.titleOperation="sales.clientCollection.titleOperation",this.keySelected="",this.assignUsers=[],this.times=[],this.employees=[],this.searchForm={},this.isResolveList=!0,this.countLoad=2,this.clientParam={pageSize:50,pageNumber:1,search:"",clientId:null},this.clients=[],this.loading=!1,this.searchClient=new ct.B,this.paymentMethods=[],this.setDates=(z,_e,Te)=>{if(z?.from||z?.to){const q=z.to||z.from;this.pagination[_e]=this.datePipe.transform(z.from||z.to,"yyyy-MM-ddT00:00:00"),this.pagination[Te]=this.datePipe.transform(q,"yyyy-MM-ddT23:59:59.999")}else this.pagination[_e]=null,this.pagination[Te]=null},this.configRoute()}ngOnInitMore(){this.searchClient.pipe((0,Zt.B)(300),(0,Ke.F)(),(0,en.n)(n=>this.loadClient(n))).subscribe(),this.getPaymentTypes()}getPaymentTypes(){this.paymentTypesService.getDropDown().subscribe({next:n=>{this.paymentMethods=n.data}})}onSearch(){let n={...this.searchForm};this.ngxLoader.startLoader("allLoader"),this.setDates(n.creationDates,"dateFrom","dateTo"),this.loadentities()}loadClient(n){return this.loading=!0,""==n||null==n?(this.loading=!1,(0,Cr.of)([])):this.getClientDropdwon(n)}getClientDropdwon(n=""){return this.clientParam.search=n,this.clientParam.clientId=null,this.clientParam.pageNumber=1,this.clientService.GetClientSearch(this.clientParam).pipe((0,en.n)(s=>(this.clients=s.data,this.loading=!1,[])))}mapForm(n){return{...n}}mapRegisterForm(n){let s={...n};return s.id=0,s}OnSearch(n){this.ngxLoader.startLoader(B.a7),this.loadentities()}configRoute(){}EditModel(n,s,i="md"){this.isEditForm=!0,this.baseService.getById(n).pipe((0,N.Q)(this.notifier)).subscribe(l=>{l.success?(this.clientParam.clientId=l.data.clientId,this.clientParam.search="",this.clientService.GetClientSearch(this.clientParam).subscribe(h=>{this.clients=h.data}),this.form=l.data):this.alertService.error("general.message."+l.message),this.modalService.open(s,{centered:!0,size:i})},l=>{this.alertService.error()})}mapExcel(){let n=[];return this.entities?.forEach(s=>{n.push({nameAr:s.nameAr,nameEn:s.nameEn,isActive:this.getTranslationText("general.table.active"),notes:s.notes})}),n}onExportXlsx(){let n=this.mapExcel();this.excelService.exportAsExcelFile(n,this.getTranslationText(this.title),[])}editEntity(){let n=this.mapForm(this.form);this.baseService.editPut(n.id,n).pipe((0,oe.O)(),(0,de.c)(this.mainDelay),(0,R.Z)(),(0,N.Q)(this.notifier),(0,w.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(s=>{s.success?this.submitFunished():this.alertService.error("general.message."+s.message)},s=>{this.alertService.error("general.message."+s)})}scrollClient(){this.clientParam.pageNumber=this.clientParam.pageNumber+1,this.clientService.GetClientSearch(this.clientParam).subscribe(n=>{this.clients=[...this.clients,...n.data]})}static{this.\u0275fac=function(s){return new(s||o)(e.rXU(P.nX),e.rXU(k.c$),e.rXU(Qr),e.rXU(pe.u),e.rXU(F.vh),e.rXU(U.eD),e.rXU(M.Bq),e.rXU(e.gRc),e.rXU(ut.V),e.rXU(An.X),e.rXU(Zn))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-clientCollection"]],features:[e.Vt3],decls:25,vars:18,consts:[["tableMaster",""],["operation",""],["deleteModal",""],["tooltipContent",""],["formEntity","ngForm"],["paymentTypeId","ngModel"],["cost","ngModel"],["notes","ngModel"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],[3,"reset","search","exportXlsx","addNew","totalItems","title"],["control",""],[1,"col-md-4","mb-2"],[1,"search-box"],["type","search","id","name","name","name",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],[1,"col-12","col-md-3","mb-2"],["type","text","mwlFlatpickr","","id","isDate","mode","range","altFormat","d/m/Y",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["translate","",2,"width",".5%"],["pSortableColumn","clientId","translate","",2,"width","12%"],[1,"ri-expand-up-down-line"],["pSortableColumn","paymentTypeName","translate","",2,"width","10%"],["pSortableColumn","creationTime","translate","",2,"width","12%"],["pSortableColumn","cost","translate","",2,"width","5%"],["pSortableColumn","isSyncOdoo","translate","",2,"width","6%"],["pSortableColumn","syncDate","translate","",2,"width","8%"],["pSortableColumn","notes","translate","",2,"width","8%"],["translate","",2,"width","12%"],[1,"fs-5"],[1,"badge","bg-success-subtle","text-success"],["class","badge bg-success","translate","sales.salesOrder.syncSend",4,"ngIf"],["class","badge bg-warning","translate","sales.salesOrder.syncNotSend",4,"ngIf"],["tooltipPosition","top",1,"mdi","mdi-cog-outline","text-muted","fs-16","align-middle","me-1",3,"ngbTooltip"],[1,"btn","btn-sm","btn-soft-warning","edit-list","mx-2"],[1,"ri-refresh-fill","align-bottom","mx-1"],[1,"btn","btn-sm","btn-soft-info","edit-list","mx-2",3,"click"],[1,"ri-pencil-fill","align-bottom","mx-1"],[1,"btn","btn-sm","btn-soft-danger","remove-list",3,"click"],[1,"ri-delete-bin-5-fill","align-bottom"],["translate","sales.salesOrder.syncSend",1,"badge","bg-success"],["translate","sales.salesOrder.syncNotSend",1,"badge","bg-warning"],[1,"ri-history-fill","text-warning"],[1,"ri-history-fill","text-danger"],[1,"ri-user-location-fill","text-primary"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["class","fw-bold fs-4","translate","",4,"ngIf"],["translate",""],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"hasProgressBar","fgsType","loaderId"],[3,"submit"],[1,"mb-3"],["for","nameAr","translate","",1,"required","fw-bold","form-label"],["bindLabel","displayName","bindValue","id","name","clientId","required","",3,"scrollToEnd","ngModelChange","virtualScroll","items","typeahead","loading","multiple","ngModel"],["translate","",1,"required","fw-bold","form-label","w-100"],["name","paymentTypeId","bindValue","code","bindLabel","name","required","",3,"ngModelChange","items","multiple","ngModel"],["class","text-danger text-center","translate","",4,"ngIf"],[1,"mb-2"],["for","cost","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","cost","type","text","id","cost",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],["for","notes","translate","",1,"fw-bold","form-label"],["rows","2","InputTirmFilter","","name","notes","type","text","id","notes",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,"text-center"],["type","submit","type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],["translate","",1,"fw-bold","fs-4"],["translate","",1,"text-danger","text-center"],[3,"deleteConfirm","dismiss"]],template:function(s,i){if(1&s){const l=e.RV6();e.j41(0,"div",8)(1,"div",9)(2,"div",10)(3,"base-filter",11),e.bIt("reset",function(){return e.eBV(l),e.Njj(i.onReset())})("search",function(){return e.eBV(l),e.Njj(i.onSearch())})("exportXlsx",function(){return e.eBV(l),e.Njj(i.onExportXlsx())})("addNew",function(){e.eBV(l);const g=e.sdS(22);return e.Njj(i.openModalTitle(g,"md"))}),e.qex(4,12),e.j41(5,"div",13)(6,"div",14)(7,"input",15),e.nI1(8,"translate"),e.mxI("ngModelChange",function(g){return e.eBV(l),e.DH7(i.pagination.name,g)||(i.pagination.name=g),e.Njj(g)}),e.k0s(),e.nrm(9,"i",16),e.k0s()(),e.j41(10,"div",17)(11,"input",18),e.nI1(12,"translate"),e.mxI("ngModelChange",function(g){return e.eBV(l),e.DH7(i.searchForm.creationDates,g)||(i.searchForm.creationDates=g),e.Njj(g)}),e.k0s()(),e.bVm(),e.k0s(),e.j41(13,"div",19)(14,"div",20)(15,"p-table",21,0),e.bIt("onLazyLoad",function(g){return e.eBV(l),e.Njj(i.tableChange(g))})("selectionChange",function(g){return e.eBV(l),e.Njj(i.onSelectionChange(g))}),e.DNE(17,kn,25,0,"ng-template",22)(18,Ha,32,17,"ng-template",23),e.k0s()(),e.DNE(19,Qa,2,0,"div",24)(20,dr,6,8,"div",25),e.k0s()()()(),e.DNE(21,Wa,37,20,"ng-template",null,1,e.C5r)(23,Ka,1,0,"ng-template",null,2,e.C5r)}2&s&&(e.R7$(3),e.Y8G("totalItems",i.pagination.totalItems)("title",i.title),e.R7$(4),e.FS9("placeholder",e.bMT(8,14,"general.table.name")),e.R50("ngModel",i.pagination.name),e.R7$(4),e.FS9("placeholder",e.bMT(12,16,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",i.searchForm.creationDates),e.R7$(4),e.Y8G("value",i.entities)("rows",i.pagination.pageSize)("lazy",!0)("totalRecords",i.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",i.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",i.pagination.totalItems>0))},dependencies:[F.bT,m.qT,m.me,m.BC,m.cb,m.YS,m.vS,m.cV,M.s5,ie.kL,et.b,Rt.w,$e.p,tt.g,k.Mm,L.XI,Pe.Ei,L.Tg,U.Cv,ke.vr,M.md,Se.m,F.vh,k.D9],encapsulation:2})}}return o})();function Ee(o,f){1&o&&(e.j41(0,"tr",45)(1,"th",46),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",47),e.nrm(4,"i",48),e.EFF(5," sales.clientCollection.clientName "),e.k0s(),e.j41(6,"th",49),e.nrm(7,"i",48),e.EFF(8," orderManagement.order.creation "),e.k0s(),e.j41(9,"th",50),e.nrm(10,"i",48),e.EFF(11," sales.clientCollection.cost "),e.k0s(),e.j41(12,"th",51),e.nrm(13,"i",48),e.EFF(14," sales.requestPersonSales.requestPersonStatus "),e.k0s(),e.j41(15,"th",52),e.nrm(16,"i",48),e.EFF(17," sales.clientCollection.notes "),e.k0s(),e.nrm(18,"th",53),e.k0s())}function Za(o,f){if(1&o&&(e.nrm(0,"i",64),e.EFF(1),e.nI1(2,"date"),e.nrm(3,"br")(4,"i",65),e.EFF(5),e.nI1(6,"date"),e.nrm(7,"br")(8,"i",66),e.EFF(9)),2&o){const n=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.i5U(2,3,n.creationTime,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",e.i5U(6,6,n.lastModificationTime,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",n.creatorName," ")}}function eo(o,f){if(1&o){const n=e.RV6();e.j41(0,"tr",54)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td")(6,"span",55),e.EFF(7),e.k0s(),e.EFF(8),e.nI1(9,"date"),e.k0s(),e.j41(10,"td"),e.EFF(11),e.k0s(),e.j41(12,"td")(13,"span"),e.nrm(14,"span",56),e.k0s()(),e.j41(15,"td"),e.EFF(16),e.k0s(),e.j41(17,"td"),e.DNE(18,Za,10,9,"ng-template",null,4,e.C5r),e.nrm(20,"i",57),e.j41(21,"button",58),e.bIt("click",function(){const i=e.eBV(n).$implicit,l=e.XpG(),h=e.sdS(89);return e.Njj(l.openModal(i.id,h))}),e.nrm(22,"i",59),e.k0s(),e.j41(23,"button",60),e.bIt("click",function(){const i=e.eBV(n).$implicit,l=e.XpG(),h=e.sdS(85);return e.Njj(l.EditModel(i.id,h))}),e.nrm(24,"i",61),e.k0s(),e.j41(25,"button",62),e.bIt("click",function(){const i=e.eBV(n).$implicit,l=e.XpG(),h=e.sdS(87);return e.Njj(l.openModal(i.id,h))}),e.nrm(26,"i",63),e.k0s()()()}if(2&o){const n=f.$implicit,s=f.rowIndex,i=e.sdS(19),l=e.XpG();e.R7$(2),e.JRh(s+1),e.R7$(2),e.JRh(n.clientName),e.R7$(3),e.SpI("",n.creatorName," "),e.R7$(),e.SpI(" ",e.i5U(9,11,n.creationTime,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(3),e.JRh(n.cost),e.R7$(2),e.ZvI("badge ",l.getStatus(n.requestPersonStatus),""),e.R7$(),e.FS9("translate","sales.salesOrder."+n.requestPersonStatusName),e.R7$(2),e.JRh(n.notes),e.R7$(4),e.Y8G("ngbTooltip",i)}}function Ki(o,f){1&o&&(e.j41(0,"div",67),e.EFF(1," general.table.noData"),e.k0s())}function to(o,f){if(1&o){const n=e.RV6();e.j41(0,"div",68)(1,"div",69),e.nrm(2,"ngb-pagination-info",70),e.j41(3,"table-length",71),e.bIt("lengthChange",function(i){e.eBV(n);const l=e.XpG();return e.Njj(l.ListItemChange(i))}),e.k0s()(),e.j41(4,"div",72)(5,"ngb-pagination",73),e.bIt("pageChange",function(i){e.eBV(n);const l=e.XpG();return e.Njj(l.pageChanged(i))}),e.mxI("pageChange",function(i){e.eBV(n);const l=e.XpG();return e.DH7(l.pagination.pageNumber,i)||(l.pagination.pageNumber=i),e.Njj(i)}),e.k0s()()()}if(2&o){const n=e.XpG();e.R7$(2),e.Y8G("pagination",n.pagination),e.R7$(),e.Y8G("lengthTable",n.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",n.pagination.pageSize)("collectionSize",n.pagination.totalItems),e.R50("page",n.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function Wr(o,f){1&o&&(e.j41(0,"span",96),e.EFF(1,"general.action.register "),e.k0s())}function Mn(o,f){1&o&&(e.j41(0,"span",96),e.EFF(1,"general.action.edit "),e.k0s())}function Kr(o,f){1&o&&(e.j41(0,"div",97),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function mn(o,f){if(1&o){const n=e.RV6();e.j41(0,"div",74)(1,"div",75)(2,"h4",76),e.DNE(3,Wr,2,0,"span",77)(4,Mn,2,0,"span",77),e.j41(5,"span",78),e.EFF(6),e.k0s()(),e.j41(7,"button",79),e.bIt("click",function(){const i=e.eBV(n).$implicit;return e.Njj(i.dismiss("Cross click"))}),e.k0s()(),e.j41(8,"div",80),e.nrm(9,"ngx-ui-loader",81),e.j41(10,"form",82,5),e.bIt("submit",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.OnSubmit())}),e.j41(12,"div",83)(13,"label",84),e.EFF(14,"sales.clientCollection.clientName"),e.k0s(),e.j41(15,"ng-select",85),e.bIt("scrollToEnd",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.scrollClient())}),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG();return e.DH7(l.form.clientId,i)||(l.form.clientId=i),e.Njj(i)}),e.k0s()(),e.j41(16,"div",86)(17,"label",87),e.EFF(18,"sales.clientCollection.cost"),e.k0s(),e.j41(19,"input",88,6),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG();return e.DH7(l.form.cost,i)||(l.form.cost=i),e.Njj(i)}),e.k0s(),e.DNE(21,Kr,2,0,"div",89),e.k0s(),e.j41(22,"div",86)(23,"label",90),e.EFF(24,"sales.clientCollection.notes"),e.k0s(),e.j41(25,"textarea",91,7),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG();return e.DH7(l.form.notes,i)||(l.form.notes=i),e.Njj(i)}),e.k0s()(),e.j41(27,"div",92)(28,"button",93),e.nrm(29,"i",94)(30,"span",95),e.k0s()()()()()}if(2&o){const n=e.sdS(11),s=e.sdS(20),i=e.XpG();e.R7$(3),e.Y8G("ngIf",!i.isEditForm),e.R7$(),e.Y8G("ngIf",i.isEditForm),e.R7$(2),e.JRh(i.titleOperation),e.R7$(3),e.Y8G("hasProgressBar",!1)("fgsType",i.loaderOperationShap)("loaderId",i.operationLoader),e.R7$(6),e.Y8G("virtualScroll",!0)("items",i.clients)("typeahead",i.searchClient)("loading",i.loading)("multiple",!1),e.R50("ngModel",i.form.clientId),e.R7$(4),e.R50("ngModel",i.form.cost),e.R7$(2),e.Y8G("ngIf",s.invalid&&s.touched),e.R7$(4),e.R50("ngModel",i.form.notes),e.R7$(3),e.Y8G("disabled",!n.valid)}}function On(o,f){if(1&o){const n=e.RV6();e.j41(0,"delete-modal",98),e.bIt("deleteConfirm",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.DeleteConfirmSoft())})("dismiss",function(){const i=e.eBV(n).$implicit;return e.Njj(i.dismiss())}),e.k0s()}}function wn(o,f){if(1&o){const n=e.RV6();e.j41(0,"div",83)(1,"label",103),e.EFF(2,"sales.clientCollection.cost"),e.k0s(),e.j41(3,"input",104),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG(2);return e.DH7(l.form.cost,i)||(l.form.cost=i),e.Njj(i)}),e.k0s()()}if(2&o){const n=e.XpG(2);e.R7$(3),e.R50("ngModel",n.form.cost)}}function mr(o,f){if(1&o){const n=e.RV6();e.j41(0,"div",74)(1,"div",75)(2,"h4",76)(3,"span",78),e.EFF(4),e.k0s()(),e.j41(5,"button",79),e.bIt("click",function(){const i=e.eBV(n).$implicit;return e.Njj(i.dismiss("Cross click"))}),e.k0s()(),e.j41(6,"div",80),e.nrm(7,"ngx-ui-loader",81),e.j41(8,"form",82,5),e.bIt("submit",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.OnStatusSubmit())}),e.j41(10,"div",28)(11,"div",83)(12,"label",99),e.EFF(13,"sales.requestPersonSales.requestPersonStatus"),e.k0s(),e.j41(14,"ng-select",100),e.nI1(15,"translate"),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG();return e.DH7(l.form.requestPersonStatus,i)||(l.form.requestPersonStatus=i),e.Njj(i)}),e.k0s()(),e.DNE(16,wn,4,1,"div",101),e.k0s(),e.j41(17,"div",92)(18,"button",102),e.nrm(19,"i",94)(20,"span",95),e.k0s()()()()()}if(2&o){const n=e.sdS(9),s=e.XpG();e.R7$(4),e.JRh(s.titleOperation),e.R7$(3),e.Y8G("hasProgressBar",!1)("fgsType",s.loaderOperationShap)("loaderId",s.operationLoader),e.R7$(7),e.FS9("placeholder",e.bMT(15,10,"sales.requestPersonSales.requestPersonStatus")),e.Y8G("items",s.status)("multiple",!1),e.R50("ngModel",s.form.requestPersonStatus),e.R7$(2),e.Y8G("ngIf",30==s.form.requestPersonStatus),e.R7$(2),e.Y8G("disabled",!n.valid)}}let pn=(()=>{class o extends Ue.w{constructor(n,s,i,l,h,g,te,me,ge,K){super(n,s,te,i,l,h,g),this.baseService=i,this.excelService=ge,this.clientService=K,this.title="sales.requestPersonSales.title",this.titleOperation="sales.requestPersonSales.titleOperation",this.searchForm={},this.isResolveList=!0,this.countLoad=2,this.clientParam={pageSize:50,pageNumber:1,search:"",clientId:null},this.clients=[],this.loading=!1,this.searchClient=new ct.B,this.status=[],this.requestStatus={all:0,pending:0,underReview:0,accept:0,reject:0},this.option={startVal:0,useEasing:!0,duration:2,decimalPlaces:0},this.setDates=(Z,z,_e)=>{if(Z?.from||Z?.to){const Oe=Z.to||Z.from;this.pagination[z]=this.datePipe.transform(Z.from||Z.to,"yyyy-MM-ddT00:00:00"),this.pagination[_e]=this.datePipe.transform(Oe,"yyyy-MM-ddT23:59:59.999")}else this.pagination[z]=null,this.pagination[_e]=null},this.configRoute()}ngOnInitMore(){this.searchClient.pipe((0,Zt.B)(300),(0,Ke.F)(),(0,en.n)(n=>this.loadClient(n))).subscribe(),this.GetRequestLookups()}GetRequestLookups(){this.baseService.GetRequestLookups().subscribe(n=>{let s=n.data.status;s.forEach(i=>{i.name=this.getTranslationText("sales.salesOrder."+i.name)}),this.status=s})}onSearch(){let n={...this.searchForm};this.ngxLoader.startLoader("allLoader"),this.setDates(n.creationDates,"dateFrom","dateTo"),this.loadentities()}loadClient(n){return this.loading=!0,""==n||null==n?(this.loading=!1,(0,Cr.of)([])):this.getClientDropdwon(n)}getClientDropdwon(n=""){return this.clientParam.search=n,this.clientParam.clientId=null,this.clientParam.pageNumber=1,this.clientService.GetClientSearch(this.clientParam).pipe((0,en.n)(s=>(this.clients=s.data,this.loading=!1,[])))}mapForm(n){return{...n}}mapRegisterForm(n){let s={...n};return s.id=0,s}OnSearch(n){this.ngxLoader.startLoader(B.a7),this.loadentities()}configRoute(){}EditModel(n,s,i="md"){this.isEditForm=!0,this.baseService.getById(n).pipe((0,N.Q)(this.notifier)).subscribe(l=>{l.success?(this.clientParam.clientId=l.data.clientId,this.clientParam.search="",this.clientService.GetClientSearch(this.clientParam).subscribe(h=>{this.clients=h.data}),this.form=l.data):this.alertService.error("general.message."+l.message),this.modalService.open(s,{centered:!0,size:i})},l=>{this.alertService.error()})}mapExcel(){let n=[];return this.entities?.forEach(s=>{n.push({nameAr:s.nameAr,nameEn:s.nameEn,isActive:this.getTranslationText("general.table.active"),notes:s.notes})}),n}onExportXlsx(){let n=this.mapExcel();this.excelService.exportAsExcelFile(n,this.getTranslationText(this.title),[])}editEntity(){let n=this.mapForm(this.form);this.baseService.editPut(n.id,n).pipe((0,oe.O)(),(0,de.c)(this.mainDelay),(0,R.Z)(),(0,N.Q)(this.notifier),(0,w.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(s=>{s.success?this.submitFunished():this.alertService.error("general.message."+s.message)},s=>{this.alertService.error("general.message."+s)})}scrollClient(){this.clientParam.pageNumber=this.clientParam.pageNumber+1,this.clientService.GetClientSearch(this.clientParam).subscribe(n=>{this.clients=[...this.clients,...n.data]})}getStatus(n){return 10==n||20==n?"bg-warning-subtle text-warning":30==n?"bg-success-subtle text-success":40==n?"bg-danger-subtle text-danger":"bg-warning-subtle text-warning"}OnStatusSubmit(){let n={requestPersonStatus:this.form.requestPersonStatus,id:this.operationId,cost:this.form.cost?this.form.cost:0};this.ngxLoader.start(this.operationLoader),this.baseService.UpdateLimit(n).pipe((0,oe.O)(),(0,de.c)(this.mainDelay),(0,R.Z)(),(0,N.Q)(this.notifier),(0,w.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(s=>{s.success?(this.alertService.success(),this.modalService.dismissAll(),this.loadentities()):this.alertService.error("general.message."+s.message)},s=>{this.alertService.error("general.message."+s)})}onStatusSelect(n){this.pagination.requestPersonStatus=n,this.loadentities()}static{this.\u0275fac=function(s){return new(s||o)(e.rXU(P.nX),e.rXU(k.c$),e.rXU(li),e.rXU(pe.u),e.rXU(F.vh),e.rXU(U.eD),e.rXU(M.Bq),e.rXU(e.gRc),e.rXU(ut.V),e.rXU(An.X))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-requestPersonSales"]],features:[e.Vt3],decls:90,vars:32,consts:[["tableMaster",""],["operation",""],["deleteModal",""],["operationStatus",""],["tooltipContent",""],["formEntity","ngForm"],["cost","ngModel"],["notes","ngModel"],[3,"title","breadcrumbItems"],[1,"row","justify-content-around"],[1,"col-12","col-md-3","cursor-pointer"],[1,"card","card-animate",3,"click"],[1,"card-body"],[1,"d-flex","justify-content-between"],["translate","sales.salesOrder.all",1,"fw-medium","text-muted","mb-0"],[1,"mt-4","ff-secondary","fw-semibold"],[1,"counter-value",3,"countUp","options"],[1,"avatar-sm","flex-shrink-0"],[1,"avatar-title","bg-primary-subtle","text-primary","rounded-circle","fs-4"],[1,"ri-ticket-2-line"],[1,"col-12","col-md-2","cursor-pointer"],["translate","sales.salesOrder.Pending",1,"fw-medium","text-muted","mb-0"],[1,"avatar-title","bg-warning-subtle","text-warning","rounded-circle","fs-4"],["translate","sales.salesOrder.UnderReview",1,"fw-medium","text-muted","mb-0"],["translate","sales.salesOrder.Accept",1,"fw-medium","text-muted","mb-0"],[1,"avatar-title","bg-success-subtle","text-success","rounded-circle","fs-4"],["translate","sales.salesOrder.Reject",1,"fw-medium","text-muted","mb-0"],[1,"avatar-title","bg-danger-subtle","text-danger","rounded-circle","fs-4"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],[3,"reset","search","exportXlsx","addNew","totalItems","title"],["control",""],[1,"col-md-4","mb-2"],[1,"search-box"],["type","search","id","name","name","name",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],[1,"col-12","col-md-3","mb-2"],["type","text","mwlFlatpickr","","id","isDate","mode","range","altFormat","d/m/Y",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["translate","",2,"width",".5%"],["pSortableColumn","clientId","translate","",2,"width","15%"],[1,"ri-expand-up-down-line"],["pSortableColumn","creationTime","translate","",2,"width","12%"],["pSortableColumn","cost","translate","",2,"width","5%"],["pSortableColumn","requestPersonStatus","translate","",2,"width","8%"],["pSortableColumn","notes","translate","",2,"width","10%"],["translate","",2,"width","15%"],[1,"fs-5"],[1,"badge","bg-success-subtle","text-success"],[3,"translate"],["tooltipPosition","top",1,"mdi","mdi-cog-outline","text-muted","fs-16","align-middle","me-1",3,"ngbTooltip"],[1,"btn","btn-sm","btn-soft-warning","edit-list","mx-2",3,"click"],[1,"ri-exchange-line","align-bottom","mx-1"],[1,"btn","btn-sm","btn-soft-info","edit-list","mx-2",3,"click"],[1,"ri-pencil-fill","align-bottom","mx-1"],[1,"btn","btn-sm","btn-soft-danger","remove-list",3,"click"],[1,"ri-delete-bin-5-fill","align-bottom"],[1,"ri-history-fill","text-warning"],[1,"ri-history-fill","text-danger"],[1,"ri-user-location-fill","text-primary"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["class","fw-bold fs-4","translate","",4,"ngIf"],["translate",""],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"hasProgressBar","fgsType","loaderId"],[3,"submit"],[1,"mb-3"],["for","nameAr","translate","",1,"required","fw-bold","form-label"],["bindLabel","displayName","bindValue","id","name","clientId","required","",3,"scrollToEnd","ngModelChange","virtualScroll","items","typeahead","loading","multiple","ngModel"],[1,"mb-2"],["for","cost","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","cost","type","text","id","cost",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],["for","notes","translate","",1,"fw-bold","form-label"],["rows","2","InputTirmFilter","","name","notes","type","text","id","notes",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,"text-center"],["type","submit","type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],["translate","",1,"fw-bold","fs-4"],["translate","",1,"text-danger","text-center"],[3,"deleteConfirm","dismiss"],["for","status","translate","",1,"required","fw-bold","form-label"],["name","name","bindValue","id","bindLabel","name","required","",3,"ngModelChange","placeholder","items","multiple","ngModel"],["class","mb-3",4,"ngIf"],["type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],["for","cost","translate","",1,"required","fw-bold","form-label"],["type","numbers","id","cost","name","cost",1,"form-control",3,"ngModelChange","ngModel"]],template:function(s,i){if(1&s){const l=e.RV6();e.nrm(0,"app-breadcrumbs",8),e.nI1(1,"translate"),e.j41(2,"div",9)(3,"div",10)(4,"div",11),e.bIt("click",function(){return e.eBV(l),e.Njj(i.onStatusSelect(0))}),e.j41(5,"div",12)(6,"div",13)(7,"div"),e.nrm(8,"p",14),e.j41(9,"h2",15),e.nrm(10,"span",16),e.k0s()(),e.j41(11,"div")(12,"div",17)(13,"span",18),e.nrm(14,"i",19),e.k0s()()()()()()(),e.j41(15,"div",20)(16,"div",11),e.bIt("click",function(){return e.eBV(l),e.Njj(i.onStatusSelect(10))}),e.j41(17,"div",12)(18,"div",13)(19,"div"),e.nrm(20,"p",21),e.j41(21,"h2",15),e.nrm(22,"span",16),e.k0s()(),e.j41(23,"div")(24,"div",17)(25,"span",22),e.nrm(26,"i",19),e.k0s()()()()()()(),e.j41(27,"div",20)(28,"div",11),e.bIt("click",function(){return e.eBV(l),e.Njj(i.onStatusSelect(20))}),e.j41(29,"div",12)(30,"div",13)(31,"div"),e.nrm(32,"p",23),e.j41(33,"h2",15),e.nrm(34,"span",16),e.k0s()(),e.j41(35,"div")(36,"div",17)(37,"span",22),e.nrm(38,"i",19),e.k0s()()()()()()(),e.j41(39,"div",20)(40,"div",11),e.bIt("click",function(){return e.eBV(l),e.Njj(i.onStatusSelect(30))}),e.j41(41,"div",12)(42,"div",13)(43,"div"),e.nrm(44,"p",24),e.j41(45,"h2",15),e.nrm(46,"span",16),e.k0s()(),e.j41(47,"div")(48,"div",17)(49,"span",25),e.nrm(50,"i",19),e.k0s()()()()()()(),e.j41(51,"div",20)(52,"div",11),e.bIt("click",function(){return e.eBV(l),e.Njj(i.onStatusSelect(40))}),e.j41(53,"div",12)(54,"div",13)(55,"div"),e.nrm(56,"p",26),e.j41(57,"h2",15),e.nrm(58,"span",16),e.k0s()(),e.j41(59,"div")(60,"div",17)(61,"span",27),e.nrm(62,"i",19),e.k0s()()()()()()()(),e.j41(63,"div",28)(64,"div",29)(65,"div",30)(66,"base-filter",31),e.bIt("reset",function(){return e.eBV(l),e.Njj(i.onReset())})("search",function(){return e.eBV(l),e.Njj(i.onSearch())})("exportXlsx",function(){return e.eBV(l),e.Njj(i.onExportXlsx())})("addNew",function(){e.eBV(l);const g=e.sdS(85);return e.Njj(i.openModalTitle(g,"md"))}),e.qex(67,32),e.j41(68,"div",33)(69,"div",34)(70,"input",35),e.nI1(71,"translate"),e.mxI("ngModelChange",function(g){return e.eBV(l),e.DH7(i.pagination.name,g)||(i.pagination.name=g),e.Njj(g)}),e.k0s(),e.nrm(72,"i",36),e.k0s()(),e.j41(73,"div",37)(74,"input",38),e.nI1(75,"translate"),e.mxI("ngModelChange",function(g){return e.eBV(l),e.DH7(i.searchForm.creationDates,g)||(i.searchForm.creationDates=g),e.Njj(g)}),e.k0s()(),e.bVm(),e.k0s(),e.j41(76,"div",12)(77,"div",39)(78,"p-table",40,0),e.bIt("onLazyLoad",function(g){return e.eBV(l),e.Njj(i.tableChange(g))})("selectionChange",function(g){return e.eBV(l),e.Njj(i.onSelectionChange(g))}),e.DNE(80,Ee,19,0,"ng-template",41)(81,eo,27,14,"ng-template",42),e.k0s()(),e.DNE(82,Ki,2,0,"div",43)(83,to,6,8,"div",44),e.k0s()()()(),e.DNE(84,mn,31,16,"ng-template",null,1,e.C5r)(86,On,1,0,"ng-template",null,2,e.C5r)(88,mr,21,12,"ng-template",null,3,e.C5r)}2&s&&(e.FS9("title",e.bMT(1,26,i.title)),e.Y8G("breadcrumbItems",i.breadCrumbItems),e.R7$(10),e.Y8G("countUp",null==i.requestStatus?null:i.requestStatus.all)("options",i.option),e.R7$(12),e.Y8G("countUp",null==i.requestStatus?null:i.requestStatus.pending)("options",i.option),e.R7$(12),e.Y8G("countUp",null==i.requestStatus?null:i.requestStatus.underReview)("options",i.option),e.R7$(12),e.Y8G("countUp",null==i.requestStatus?null:i.requestStatus.accept)("options",i.option),e.R7$(12),e.Y8G("countUp",null==i.requestStatus?null:i.requestStatus.reject)("options",i.option),e.R7$(8),e.Y8G("totalItems",i.pagination.totalItems)("title",i.title),e.R7$(4),e.FS9("placeholder",e.bMT(71,28,"general.table.name")),e.R50("ngModel",i.pagination.name),e.R7$(4),e.FS9("placeholder",e.bMT(75,30,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",i.searchForm.creationDates),e.R7$(4),e.Y8G("value",i.entities)("rows",i.pagination.pageSize)("lazy",!0)("totalRecords",i.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",i.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",i.pagination.totalItems>0))},dependencies:[F.bT,m.qT,m.me,m.BC,m.cb,m.YS,m.vS,m.cV,M.s5,ie.kL,Ve.G,Or.m,et.b,Rt.w,$e.p,tt.g,k.Mm,L.XI,Pe.Ei,L.Tg,U.Cv,ke.vr,M.md,Se.m,F.vh,k.D9],encapsulation:2})}}return o})(),no=(()=>{class o{constructor(){}ngOnInit(){}static{this.\u0275fac=function(s){return new(s||o)}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-priceList"]],decls:2,vars:0,template:function(s,i){1&s&&(e.j41(0,"p"),e.EFF(1," priceList works!\n"),e.k0s())},encapsulation:2})}}return o})();function io(o,f){if(1&o&&(e.qex(0),e.j41(1,"div",49)(2,"div",50)(3,"div",51),e.EFF(4),e.k0s(),e.j41(5,"div",52)(6,"span",53),e.EFF(7),e.k0s(),e.j41(8,"span",54),e.EFF(9),e.k0s()()()(),e.bVm()),2&o){const n=f.$implicit,s=f.index;e.R7$(4),e.Lme(" ",s+1," - ",n.itemName," "),e.R7$(3),e.SpI("",n.unitName," "),e.R7$(2),e.SpI("",n.quantity," ")}}function so(o,f){if(1&o){const n=e.RV6();e.j41(0,"div",20)(1,"div",21)(2,"div",22)(3,"bdi")(4,"span")(5,"span"),e.EFF(6),e.nI1(7,"translate"),e.k0s()()(),e.j41(8,"div",23)(9,"p",24),e.nrm(10,"i",25),e.EFF(11),e.k0s(),e.j41(12,"p",24),e.nrm(13,"i",26),e.EFF(14),e.k0s()(),e.j41(15,"div",27)(16,"p",24),e.nrm(17,"i",28),e.EFF(18),e.nI1(19,"date"),e.k0s(),e.j41(20,"p",29),e.nrm(21,"i",30),e.EFF(22),e.k0s()(),e.j41(23,"div",27)(24,"h5",31),e.nrm(25,"i",32),e.EFF(26),e.k0s(),e.j41(27,"p",29),e.nrm(28,"i",33),e.EFF(29),e.k0s()(),e.j41(30,"div",34)(31,"div",35),e.nrm(32,"i",36),e.EFF(33),e.k0s(),e.j41(34,"div"),e.nrm(35,"i",37),e.j41(36,"span",38),e.bIt("click",function(){const i=e.eBV(n).$implicit,l=e.XpG();return e.Njj(l.copytext(i.mobile))}),e.EFF(37),e.nrm(38,"i",39),e.k0s()()(),e.nrm(39,"hr"),e.j41(40,"div",40),e.DNE(41,io,10,4,"ng-container",41),e.k0s(),e.j41(42,"div",42)(43,"a",43),e.bIt("click",function(){const i=e.eBV(n).$implicit,l=e.XpG(),h=e.sdS(28);return e.Njj(l.openChangeStatusModal(i,h))}),e.nrm(44,"i",44)(45,"span",45),e.k0s(),e.j41(46,"a",46),e.bIt("click",function(){const i=e.eBV(n).$implicit,l=e.XpG(),h=e.sdS(30);return e.Njj(l.openChangeStatusModal(i,h,"md"))}),e.nrm(47,"i",47)(48,"span",48),e.k0s()()()()()}if(2&o){const n=f.$implicit;e.R7$(4),e.ZvI("ribbon ",n.trunckStatusName," round-shape "),e.R7$(2),e.JRh(e.bMT(7,13,"sales.salesOrder."+n.trunckStatusName)),e.R7$(5),e.SpI(" ",n.shippingTruckName," "),e.R7$(3),e.SpI(" ",n.shippingTruckNumber," "),e.R7$(4),e.SpI(" ",e.i5U(19,15,n.deliveryDate,"yyyy-MM-dd HH:mm")," "),e.R7$(4),e.SpI(" #SHO#",n.id," "),e.R7$(4),e.SpI(" ",n.clientName," "),e.R7$(3),e.SpI(" #SO#",n.offerOrderMasterId," "),e.R7$(4),e.SpI(" ",n.clientLocationName," "),e.R7$(4),e.SpI("",n.mobile," "),e.R7$(4),e.Y8G("ngForOf",n.details)}}function ao(o,f){1&o&&(e.j41(0,"div",55),e.EFF(1," general.table.noData "),e.k0s())}function pr(o,f){if(1&o){const n=e.RV6();e.j41(0,"div",56)(1,"div",57),e.nrm(2,"ngb-pagination-info",58),e.j41(3,"table-length",59),e.bIt("lengthChange",function(i){e.eBV(n);const l=e.XpG();return e.Njj(l.ListItemChange(i))}),e.k0s()(),e.j41(4,"div",60)(5,"ngb-pagination",61),e.bIt("pageChange",function(i){e.eBV(n);const l=e.XpG();return e.Njj(l.pageChanged(i))}),e.mxI("pageChange",function(i){e.eBV(n);const l=e.XpG();return e.DH7(l.pagination.pageNumber,i)||(l.pagination.pageNumber=i),e.Njj(i)}),e.k0s()()()}if(2&o){const n=e.XpG();e.R7$(2),e.Y8G("pagination",n.pagination),e.R7$(),e.Y8G("lengthTable",n.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",n.pagination.pageSize)("collectionSize",n.pagination.totalItems),e.R50("page",n.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function En(o,f){if(1&o){const n=e.RV6();e.j41(0,"div",62)(1,"div",63)(2,"h4",64),e.nrm(3,"span",65),e.k0s(),e.j41(4,"button",66),e.bIt("click",function(){const i=e.eBV(n).$implicit;return e.Njj(i.dismiss())}),e.k0s()(),e.j41(5,"div",67),e.nrm(6,"ngx-ui-loader",68),e.j41(7,"form",69,2),e.bIt("ngSubmit",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.changeStatus())}),e.j41(9,"div",16)(10,"div",70)(11,"label",71),e.EFF(12,"sales.salesOrder.trunckStatus"),e.k0s(),e.j41(13,"ng-select",72),e.nI1(14,"translate"),e.mxI("ngModelChange",function(i){e.eBV(n);const l=e.XpG();return e.DH7(l.form.trunckStatus,i)||(l.form.trunckStatus=i),e.Njj(i)}),e.k0s()()(),e.j41(15,"div",31)(16,"button",73),e.nrm(17,"i",74)(18,"span",75),e.k0s()()()()()}if(2&o){const n=e.sdS(8),s=e.XpG();e.R7$(6),e.Y8G("hasProgressBar",!1)("fgsType",s.loaderOperationShap)("loaderId",s.operationLoader),e.R7$(7),e.FS9("placeholder",e.bMT(14,8,"orderManagement.order.changeTeamStatus")),e.Y8G("items",s.statusList)("multiple",!1),e.R50("ngModel",s.form.trunckStatus),e.R7$(3),e.Y8G("disabled",!n.valid)}}function Zi(o,f){if(1&o){const n=e.RV6();e.j41(0,"form",69,2),e.bIt("ngSubmit",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.SubmitFinishOrder())}),e.nrm(2,"ngx-ui-loader",68),e.j41(3,"div",76)(4,"div",77)(5,"button",78),e.bIt("click",function(){const i=e.eBV(n).$implicit;return e.Njj(i.dismiss())}),e.k0s()(),e.j41(6,"div",67)(7,"div",79),e.nrm(8,"lord-icon",80),e.j41(9,"div",81),e.nrm(10,"h3",82)(11,"p",83),e.k0s()(),e.j41(12,"div",84),e.nrm(13,"button",85),e.j41(14,"button",86),e.bIt("click",function(){const i=e.eBV(n).$implicit;return e.Njj(i.dismiss())}),e.k0s()()()()()}if(2&o){const n=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderOperationShap)("loaderId",n.operationLoader)}}const un=[{path:"sales-orders",component:ye,canActivate:[Mr.g],data:{permission:[]}},{path:"setting",component:zn,canActivate:[Mr.g],data:{permission:[]}},{path:"new",component:ui},{path:"sales-invoices",component:ar,resolve:{data:or}},{path:"Client-Collections",component:xe,resolve:{data:(()=>{class o extends Hr.E{constructor(n,s,i){super(n,s,i)}static{this.\u0275fac=function(s){return new(s||o)(e.KVO(P.Ix),e.KVO(Qr),e.KVO(pe.u))}}static{this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})()}},{path:"Requests-Limit",component:pn,resolve:{data:or}},{path:"Prices-List",component:no,resolve:{data:or}},{path:"assign-truck-orders",component:(()=>{class o extends Ue.w{constructor(n,s,i,l,h,g,te,me,ge,K){super(n,s,me,i,h,g,te),this.baseService=i,this.salesInvoicesService=l,this.authDaamService=ge,this.excelService=K,this.title="sales.assignTruckOrder.title",this.titleOperation="sales.assignTruckOrder.title",this.config={infinite:!0,slidesToShow:5,slidesToScroll:1,autoplay:!1,arrows:!1},this.trunks=[],this.isFlagTime=!0,this.searchForm={},this.statusList=[],this.pagination={pageNumber:1,pageSize:30},this.setDates=(Z,z,_e)=>{if(Z?.from||Z?.to){const Oe=Z.to||Z.from;this.pagination[z]=this.datePipe.transform(Z.from||Z.to,"yyyy-MM-ddT00:00:00"),this.pagination[_e]=this.datePipe.transform(Oe,"yyyy-MM-ddT23:59:59.999")}else this.pagination[z]=null,this.pagination[_e]=null}}loadentities(){this.ngxLoader.startLoader(B.a7),this.baseService.GetOrderAssignTrunk(this.pagination).pipe((0,N.Q)(this.notifier)).subscribe(n=>{this.ngxLoader.stopLoader(B.a7),this.entities=n.data,this.pagination.totalItems=n.totalItems,this.LoadSuccess()},n=>{this.ngxLoader.stopLoader(B.a7),this.alertService.error(n)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[]}ngOnInitMore(){this.loadentities(),this.checkStatus()}checkStatus(){let n=this.baseService.getTrunckStatus();n.forEach(s=>{s.name=this.getTranslationText("sales.salesOrder."+s.name)}),this.statusList=n}mapExcel(){let n=[];return this.entities.forEach(s=>{n.push({"Order Code":s.orderCode,"Created Date":s.createdDate,"City Name":s.cityName,"District Name":s.districtName?s.districtName:"--","Agent Name":s.agentName,Mobile:s.mobile,"Channel Name":s.channelName,"Assigned To":s.teamNames,Times:s.workTimes,"Visit Date":s.visitDate,Services:s.services})}),n}onExportXlsx(){let n=this.mapExcel();this.excelService.exportAsExcelFile(n,this.translateService.instant(this.title),[])}onSearch(){let n={...this.searchForm};this.ngxLoader.startLoader("allLoader"),this.setDates(n.dates,"visitDateFrom","visitDateTo"),this.setDates(n.creationDates,"creationTimeFrom","creationTimeTo"),this.loadentities()}copytext(n){navigator.clipboard.writeText(n),this.alertService.info(n)}openChangeStatusModal(n,s,i="md"){this.form={},this.form.trunckStatus=n.trunckStatus,this.form.id=n.id,this.modalService.open(s,{centered:!0,size:i})}changeStatus(){this.ngxLoader.startLoader(this.operationLoader),this.baseService.changeStatus({trunckStatus:this.form.trunckStatus,id:this.form.id}).pipe((0,N.Q)(this.notifier),(0,w.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(s=>{this.loadentities(),this.alertService.success(),this.modalService.dismissAll()},()=>{this.alertService.error()})}mapUrl(n,s){return null===n||null==s?"":`https://www.google.com/maps/dir//${s},${n}/@${s},${n},17z?hl=en-US`}SubmitFinishOrder(){this.ngxLoader.startLoader(this.operationLoader),this.salesInvoicesService.finishOrder(this.form.id).pipe((0,N.Q)(this.notifier),(0,w.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(n=>{this.loadentities(),this.alertService.success(),this.modalService.dismissAll()},()=>{this.alertService.error()})}static{this.\u0275fac=function(s){return new(s||o)(e.rXU(P.nX),e.rXU(k.c$),e.rXU(Hn),e.rXU(se),e.rXU(pe.u),e.rXU(F.vh),e.rXU(U.eD),e.rXU(M.Bq),e.rXU(Mt.J),e.rXU(ut.V))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["assign-truck-order"]],features:[e.Vt3],decls:31,vars:26,consts:[["changeStatusModal",""],["finishOrderModal",""],["formEntity","ngForm"],["overlayColor","rgba(255,255,255,0.05)","fgsColor","rgba(255,255,255,0)",3,"loaderId"],[1,"card"],[1,"card-body","p-0"],[3,"reset","search","exportXlsx","showAdd","showExport","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","number","id","filterValue","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["InputTirmFilter","","type","search","id","agentName","name","agentName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["InputTirmFilter","","type","tel","id","filterValue","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"col-12","col-md-4","mb-2"],["type","text","mwlFlatpickr","","id","isDate","mode","range",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"row"],["class","col-12 col-md-4 my-2",4,"ngFor","ngForOf"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row text-center px-1 py-1 overflow-hidden",4,"ngIf"],[1,"col-12","col-md-4","my-2"],[1,"card","ribbon-box","border","shadow-none","mb-lg-0","material-shadow"],[1,"card-body"],[1,"d-flex","justify-content-between","mt-5"],[1,"text-muted"],[1,"ri-police-car-line","text-muted","me-1","align-bottom"],[1,"ri-truck-line","text-muted","me-1","align-bottom"],[1,"d-flex","justify-content-between"],[1,"ri-calendar-2-fill","text-muted","me-1","align-bottom"],[1,"text-muted","ms-2","text-muted","text-decoration-underline"],[1,"ri-order-play-fill","text-muted","me-1","align-bottom"],[1,"text-center"],[1,"ri-user-2-fill","text-muted","me-1","align-bottom"],[1,"ri-shopping-cart-fill","text-muted","me-1","align-bottom"],[1,"d-flex","gap-4","mb-1","justify-content-between"],[1,"text-success"],[1,"ri-map-pin-2-line","text-success","me-1","align-bottom"],[1,"ri-phone-fill","text-info","me-1","align-bottom"],[1,"cursor-pointer","badge","bg-info-subtle","text-info","fs-6",3,"click"],[1,"ri-clipboard-line"],[1,""],[4,"ngFor","ngForOf"],[1,"mt-5","hstack","gap-2"],[1,"btn","btn-sm","btn-soft-success","w-100",3,"click"],[1,"ri-swap-line","label-icon","align-bottom","rounded-pill","fs-16","me-2"],["translate","orderManagement.order.changeTeamStatus"],["href","javascript:void(0);",1,"btn","btn-sm","btn-soft-primary","w-100",3,"click"],[1,"ri-checkbox-circle-fill","align-bottom"],["translate","orderManagement.order.finishOrder"],[1,"card","p-0","m-0","card-item"],[1,"card-body","row","p-0"],[1,"col-12","col-md-8","fs-4"],[1,"col-12","col-md-4"],[1,"badge","bg-primary-subtle","text-primary","mx-2","fs-6"],[1,"badge","bg-danger-subtle","text-danger","fs-6"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","text-center","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["translate","orderManagement.order.changeTeamStatus",1,"fw-bold","fs-4"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"hasProgressBar","fgsType","loaderId"],[3,"ngSubmit"],[1,"mb-3"],["for","trunckStatus","translate","",1,"fw-bold","form-label"],["name","trunckStatus","bindValue","id","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],["type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],[1,"modal-content"],[1,"modal-header"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","btn-close",1,"btn-close",3,"click"],[1,"mt-2","text-center"],["src","https://cdn.lordicon.com/gdfrsvpt.json","stroke","bold","state","hover-oscillate","trigger","loop","colors","primary:#f7b84b,secondary:#f06548",2,"width","130px","height","130px"],[1,"pt-2","fs-15","mx-4","mx-sm-5"],["translate","orderManagement.order.AreYouSureMessage"],[1,"text-muted","mx-4","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","submit","id","save","translate","general.action.save",1,"btn","w-sm","btn-danger"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light",3,"click"]],template:function(s,i){if(1&s){const l=e.RV6();e.nrm(0,"ngx-ui-loader",3),e.j41(1,"div",4)(2,"div",5)(3,"base-filter",6),e.bIt("reset",function(){return e.eBV(l),e.Njj(i.onReset())})("search",function(){return e.eBV(l),e.Njj(i.onSearch())})("exportXlsx",function(){return e.eBV(l),e.Njj(i.onExportXlsx())}),e.qex(4,7),e.j41(5,"div",8)(6,"div",9)(7,"input",10),e.nI1(8,"translate"),e.mxI("ngModelChange",function(g){return e.eBV(l),e.DH7(i.pagination.orderCode,g)||(i.pagination.orderCode=g),e.Njj(g)}),e.k0s(),e.nrm(9,"i",11),e.k0s()(),e.j41(10,"div",8)(11,"div",9)(12,"input",12),e.nI1(13,"translate"),e.mxI("ngModelChange",function(g){return e.eBV(l),e.DH7(i.pagination.agentName,g)||(i.pagination.agentName=g),e.Njj(g)}),e.k0s(),e.nrm(14,"i",11),e.k0s()(),e.j41(15,"div",8)(16,"div",9)(17,"input",13),e.nI1(18,"translate"),e.mxI("ngModelChange",function(g){return e.eBV(l),e.DH7(i.pagination.mobile,g)||(i.pagination.mobile=g),e.Njj(g)}),e.k0s(),e.nrm(19,"i",11),e.k0s()(),e.j41(20,"div",14)(21,"input",15),e.nI1(22,"translate"),e.mxI("ngModelChange",function(g){return e.eBV(l),e.DH7(i.searchForm.creationDates,g)||(i.searchForm.creationDates=g),e.Njj(g)}),e.k0s()(),e.bVm(),e.k0s()()(),e.j41(23,"div",16),e.DNE(24,so,49,18,"div",17),e.k0s(),e.DNE(25,ao,2,0,"div",18)(26,pr,6,8,"div",19)(27,En,19,10,"ng-template",null,0,e.C5r)(29,Zi,15,3,"ng-template",null,1,e.C5r)}2&s&&(e.Y8G("loaderId","searchLoader"),e.R7$(3),e.Y8G("showAdd",!1)("showExport",!1)("totalItems",i.pagination.totalItems)("title",i.title),e.R7$(4),e.FS9("placeholder",e.bMT(8,18,"orderManagement.order.orderCode")),e.R50("ngModel",i.pagination.orderCode),e.R7$(5),e.FS9("placeholder",e.bMT(13,20,"orderManagement.order.agentName")),e.R50("ngModel",i.pagination.agentName),e.R7$(5),e.FS9("placeholder",e.bMT(18,22,"orderManagement.order.mobile")),e.R50("ngModel",i.pagination.mobile),e.R7$(4),e.FS9("placeholder",e.bMT(22,24,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",i.searchForm.creationDates),e.R7$(3),e.Y8G("ngForOf",i.entities),e.R7$(),e.Y8G("ngIf",i.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",i.pagination.totalItems>0))},dependencies:[F.Sq,F.bT,m.qT,m.me,m.Q0,m.BC,m.cb,m.vS,m.cV,M.s5,ie.kL,et.b,$e.p,tt.g,k.Mm,U.Cv,ke.vr,Se.m,F.vh,k.D9],encapsulation:2})}}return o})()},{path:"new/:id",component:ui,canActivate:[Mr.g],data:{permission:["order.edit"]}}];let ur=(()=>{class o{static{this.\u0275fac=function(s){return new(s||o)}}static{this.\u0275mod=e.$C({type:o})}static{this.\u0275inj=e.G2t({imports:[P.iI.forChild(un),P.iI]})}}return o})();var rt=I(71144),W=I(81141),oo=I(41198);let lo=(()=>{class o{constructor(){(0,J.eV)(he().loadAnimation)}static{this.\u0275fac=function(s){return new(s||o)}}static{this.\u0275mod=e.$C({type:o})}static{this.\u0275inj=e.G2t({imports:[F.MD,m.YN,m.X1,M.zH,M.Pv,M.c9,ie.ND,Ve.r,ur,Be.G,k.h,L.bG,Kt.q4,yt.H_,M.c9,U.th,ke.MQ,M.n8,rt.j,M._f,$t.S,qe.U,W.tm,oo.TV]})}}return o})()},75622:(dt,we,I)=>{"use strict";I.d(we,{w:()=>N});var F=I(21413),m=I(56977),M=I(37021),ie=I(35335),Ve=I(45236),J=I(70980),Ae=I(99437),he=I(18810),Be=I(45286),k=I(36158),L=I(54438),Kt=I(51188),yt=I(8147),U=I(69005),ke=I(67569),P=I(3888),e=I(60177),ct=I(1530);let N=(()=>{class oe{constructor(R,w,ve,De,B,vr,xt){this.routerActive=R,this.translateService=w,this.modalService=ve,this.baseService=De,this.alertService=B,this.datePipe=vr,this.ngxLoader=xt,this.title="",this.mainDelay=50,this.operationId=0,this.selectedRow=[],this.pagination={pageNumber:1,pageSize:10},this.notifier=new F.B,this.checkAll=!1,this.checkOne=!1,this.checkMore=!1,this.loader=!1,this.form={},this.isEditForm=!1,this.draw=1,this.index=0,this.lengthSelect=0,this.screenName="",this.filterToggle=!0,this.start=1,this.startFirstLoad=!0,this.btnDisabled=!0,this.loaderSearchShap=k.cX,this.loaderOperationShap=k.$$,this.operationLoader=k.ZW,this.loaderDeleteShap=k.jg,this.mainTable=k.uG,this.searchLoader=k.a7,this.deleteLoader=k.Fq,this.langArabic="ar",this.paymentTypes=[],this.tableLengthSelect=[10,20,30,50,100,500,1e3],this.maxSizePagination=10,this.isResolveList=!1,this.countLoad=0,this.pagination.pageSize=10,this.pagination.pageNumber=1}ngOnInit(){this.lang=this.translateService.currentLang,this.translateConfig(),this.ngOnInitMore()}ngOnInitMore(){}routeDataConfig(){this.routerActive.data.pipe((0,m.Q)(this.notifier)).subscribe(R=>{this.entities=R.data.result,this.pagination=R.data.pagination,this.pagination.pageNumber=1,this.pagination.pageSize=10,this.ngxLoader.stopLoader(k.a7)},R=>{this.alertService.error()})}translateConfig(){this.translateService.onLangChange.pipe((0,m.Q)(this.notifier)).subscribe(R=>{this.lang=R.lang})}getTranslationText(R){let w="";return this.translateService.get(R).pipe((0,m.Q)(this.notifier)).subscribe(ve=>{w=ve}),w}ngAfterViewInit(){this.ngAfterViewInitMore()}ngAfterViewInitMore(){}getRenderString(R){return null!=R?R.substring(0,10)+"...":""}getRenderIndex(R){return this.index++,this.index}successDataTable(R){this.ngxLoader.stopLoader(k.a7),this.pagination.totalItems=R.data.pagination.totalItems,this.startFirstLoad=!1}errorDataTable(){this.ngxLoader.stopLoader(k.a7),this.alertService.error()}openModalTitle(R,w="md"){this.isEditForm=!1,this.form={},this.modalService.open(R,{centered:!0,size:w})}openModal(R,w,ve="md"){this.isEditForm=!1,this.form={},this.selectedRow=[{id:R}],this.operationId=R,this.modalService.open(w,{centered:!0,size:ve})}openModalMoreOperation(R){this.isEditForm=!1,this.moreIdSelected=this.selectedRow.map(w=>w.id)}closeModelDeleted(){this.modalRef?.hide(),this.loader=!1,this.btnDisabled=!0}OnSearch(R){this.ngxLoader.startLoader("allLoader"),this.loadentities()}OnSubmit(){this.ngxLoader.startLoader(this.operationLoader),!0===this.isEditForm?this.editEntity():this.registerEntity()}loadentities(){this.countLoad=this.countLoad+1,(!this.isResolveList||1!==this.countLoad)&&(this.baseService.get(this.pagination).pipe((0,m.Q)(this.notifier)).subscribe(R=>{this.ngxLoader.stopLoader(k.a7),this.entities=R.data,this.pagination.totalItems=R.totalItems,this.LoadSuccess()},R=>{this.ngxLoader.stopLoader(k.a7),this.alertService.error(R)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[])}LoadSuccess(){}tableChange(R){this.pagination.filterType=R.sortField,this.pagination.sortType=1==R.sortOrder?"asc":"desc",this.loadentities()}registerEntity(){let R=this.mapRegisterForm(this.form);this.baseService.register(R).pipe((0,M.O)(),(0,ie.c)(this.mainDelay),(0,Ve.Z)(),(0,m.Q)(this.notifier),(0,J.j)(()=>this.ngxLoader.stopLoader(this.operationLoader)),(0,Ae.W)(w=>(0,he.$)(w))).subscribe(w=>{w.success?this.submitFunished():this.alertService.error("general.message."+w.message)},w=>{this.alertService.error("general.message."+w)})}editEntity(){let R=this.mapForm(this.form);this.baseService.edit(R.id,R).pipe((0,M.O)(),(0,ie.c)(this.mainDelay),(0,Ve.Z)(),(0,m.Q)(this.notifier),(0,J.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(w=>{w.success?this.submitFunished():this.alertService.error("general.message."+w.message)},w=>{this.alertService.error("general.message."+w)})}mapForm(R){return R}mapRegisterForm(R){return R.id=0,R}submitFunished(){this.alertService.success(),this.loadentities(),this.modalService?.dismissAll(),this.ngxLoader.stop(k.a7),this.btnDisabled=!0}EditModel(R,w,ve="md"){this.isEditForm=!0,this.baseService.getById(R).pipe((0,m.Q)(this.notifier)).subscribe(De=>{De.success?this.form=De.data:this.alertService.error("general.message."+De.message),this.modalService.open(w,{centered:!0,size:ve})},De=>{this.alertService.error()})}EditModelTilte(R){this.isEditForm=!0,this.baseService.getById(this.selectedRow[0].id).pipe((0,m.Q)(this.notifier)).subscribe(ve=>{ve?this.form=ve:this.alertService.error("general.message."+ve)},ve=>{this.alertService.error()})}onSelectionChange(R){this.selectedRow=R,this.lengthSelect=R.length}resetSelected(){this.selectedRow=[],this.lengthSelect=0}pageChanged(R){this.pagination.pageNumber=R,this.loadentities()}ListItemChange(R){this.pagination.pageSize=R.target.value,this.loadentities()}searchChange(R){this.pagination.filterValue=R,this.loadentities()}DeleteConfirm(){console.log(this.selectedRow),this.ngxLoader.startLoader(k.Fq);let R=this.selectedRow.map(w=>w.id);this.baseService.deleteRange(R).pipe((0,M.O)(),(0,ie.c)(this.mainDelay),(0,Ve.Z)(),(0,m.Q)(this.notifier),(0,J.j)(()=>this.ngxLoader.stopLoader(k.Fq))).subscribe(w=>{w.success?(this.alertService.success(),this.loadentities(),this.modalService.dismissAll(),this.resetSelected()):this.alertService.error("general.message."+w)},()=>{this.alertService.error()})}DeleteConfirmSoft(){console.log(this.selectedRow,"selectedRow"),this.ngxLoader.startLoader(k.Fq),this.baseService.softDelete(this.selectedRow[0].id).pipe((0,M.O)(),(0,ie.c)(this.mainDelay),(0,Ve.Z)(),(0,m.Q)(this.notifier),(0,J.j)(()=>this.ngxLoader.stopLoader(k.Fq))).subscribe(R=>{R.success?(this.alertService.success(),this.loadentities(),this.modalService.dismissAll(),this.resetSelected()):this.alertService.error("general.message."+R)},()=>{this.alertService.error()})}getIds(){return this.selectedRow.map(R=>R.id)}isEmpty(R){return(void 0===R||null==R||R.length)<=0}OnReset(R){this.form={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems}}onReset(){this.form={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems}}closeModel(R){this.modalRef?.hide()}ngOnDestroy(){this.notifier.next(),this.notifier.complete(),this.OnDestroyMore()}OnDestroyMore(){}static{this.\u0275fac=function(w){return new(w||oe)(L.rXU(Kt.nX),L.rXU(yt.c$),L.rXU(U.Bq),L.rXU(ke.d),L.rXU(P.u),L.rXU(e.vh),L.rXU(ct.eD))}}static{this.\u0275cmp=L.VBU({type:oe,selectors:[["app-base"]],viewQuery:function(w,ve){if(1&w&&L.GBs(Be.XI,5),2&w){let De;L.mGM(De=L.lsd())&&(ve.tableMaster=De.first)}},decls:0,vars:0,template:function(w,ve){},encapsulation:2})}}return oe})()},88148:(dt,we,I)=>{"use strict";I.d(we,{p:()=>M});var F=I(54438),m=I(8147);let M=(()=>{class ie{static{this.\u0275fac=function(Ae){return new(Ae||ie)}}static{this.\u0275cmp=F.VBU({type:ie,selectors:[["ngb-pagination-info"]],inputs:{pagination:"pagination"},decls:6,vars:2,consts:[[1,"d-inline-block","mx-1","text-pInfo"],["translate","general.table.pFrom",1,"text-pInfo"],["translate","general.table.item",1,"text-pInfo"]],template:function(Ae,he){1&Ae&&(F.j41(0,"span",0),F.EFF(1),F.k0s(),F.nrm(2,"span",1),F.j41(3,"span",0),F.EFF(4),F.k0s(),F.nrm(5,"span",2)),2&Ae&&(F.R7$(),F.JRh(he.pagination.totalItems>he.pagination.pageNumber*he.pagination.pageSize?he.pagination.pageNumber*he.pagination.pageSize:he.pagination.totalItems),F.R7$(3),F.JRh(he.pagination.totalItems))},dependencies:[m.Mm],styles:[".text-pInfo[_ngcontent-%COMP%]{font-size:.7rem;color:#8a96a0}"]})}}return ie})()},91580:(dt,we,I)=>{"use strict";I.d(we,{g:()=>Ve});var F=I(54438),m=I(60177),M=I(89417);function ie(J,Ae){if(1&J&&(F.j41(0,"option"),F.EFF(1),F.k0s()),2&J){const he=Ae.$implicit;F.R7$(),F.JRh(he)}}let Ve=(()=>{class J{constructor(){this.lengthChange=new F.bkB}ListItemChange(he){this.lengthChange.emit(he)}static{this.\u0275fac=function(Be){return new(Be||J)}}static{this.\u0275cmp=F.VBU({type:J,selectors:[["table-length"]],inputs:{lengthTable:"lengthTable"},outputs:{lengthChange:"lengthChange"},decls:4,vars:1,consts:[[1,"card-toolbar","mx-2"],[1,"fs-2","text-primary"],[1,"form-select","mx-2","d-inline","form-select-sm","w-auto",3,"change"],[4,"ngFor","ngForOf"]],template:function(Be,k){1&Be&&(F.j41(0,"div",0),F.nrm(1,"span",1),F.j41(2,"select",2),F.bIt("change",function(Kt){return k.ListItemChange(Kt)}),F.DNE(3,ie,2,1,"option",3),F.k0s()()),2&Be&&(F.R7$(3),F.Y8G("ngForOf",k.lengthTable))},dependencies:[m.Sq,M.xH,M.y7],encapsulation:2})}}return J})()},67376:function(dt,we,I){var F;dt=I.nmd(dt),function(){var m,J="Expected a function",he="__lodash_hash_undefined__",k="__lodash_placeholder__",w=128,pe=1/0,Se=9007199254740991,Ke=4294967295,An=[["ary",w],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],tn="[object Arguments]",Bn="[object Array]",vn="[object Boolean]",Ze="[object Date]",$n="[object Error]",Xn="[object Function]",di="[object GeneratorFunction]",mt="[object Map]",Cn="[object Number]",kt="[object Object]",ci="[object Promise]",Sn="[object RegExp]",pt="[object Set]",Tn="[object String]",Un="[object Symbol]",jn="[object WeakMap]",In="[object ArrayBuffer]",nn="[object DataView]",Sr="[object Float32Array]",Tr="[object Float64Array]",jr="[object Int8Array]",Ir="[object Int16Array]",yr="[object Int32Array]",xr="[object Uint8Array]",Fr="[object Uint8ClampedArray]",Rr="[object Uint16Array]",kr="[object Uint32Array]",xs=/\b__p \+= '';/g,Fs=/\b(__p \+=) '' \+/g,Rs=/(__e\(.*?\)|\b__t\)) \+\n'';/g,mi=/&(?:amp|lt|gt|quot|#39);/g,pi=/[&<>"']/g,ui=RegExp(mi.source),Mr=RegExp(pi.source),Or=/<%-([\s\S]+?)%>/g,Ue=/<%([\s\S]+?)%>/g,gi=/<%=([\s\S]+?)%>/g,ut=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ks=/^\w*$/,et=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$e=/[\\^$.*+?()[\]{}|]/g,tt=RegExp($e.source),Pe=/^\s+/,Ms=/\s/,Os=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ws=/\{\n\/\* \[wrapped with (.+)\] \*/,Es=/,? & /,Ns=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ds=/[()=,{}\[\]\/\s]/,Ls=/\\(\\)?/g,Gs=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,hi=/\w*$/,Vs=/^[-+]0x[0-9a-f]+$/i,As=/^0b[01]+$/i,Bs=/^\[object .+?Constructor\]$/,$s=/^0o[0-7]+$/i,Xs=/^(?:0|[1-9]\d*)$/,Us=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Yn=/($^)/,Ps=/['\n\r\u2028\u2029\\]/g,zn="\\ud800-\\udfff",Xt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ut="\\u2700-\\u27bf",yn="a-z\\xdf-\\xf6\\xf8-\\xff",fi="A-Z\\xc0-\\xd6\\xd8-\\xde",_i="\\ufe0e\\ufe0f",bi="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Qs="["+zn+"]",vi="["+bi+"]",qn="["+Xt+"]",Ci="\\d+",Js="["+Ut+"]",Si="["+yn+"]",Hn="[^"+zn+bi+Ci+Ut+yn+fi+"]",Er="\\ud83c[\\udffb-\\udfff]",Ti="[^"+zn+"]",Dr="(?:\\ud83c[\\udde6-\\uddff]){2}",Lr="[\\ud800-\\udbff][\\udc00-\\udfff]",an="["+fi+"]",Ii="(?:"+Si+"|"+Hn+")",Ws="(?:"+an+"|"+Hn+")",yi="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",xi="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Fi="(?:"+qn+"|"+Er+")?",Ri="["+_i+"]?",ki=Ri+Fi+"(?:\\u200d(?:"+[Ti,Dr,Lr].join("|")+")"+Ri+Fi+")*",ta="(?:"+[Js,Dr,Lr].join("|")+")"+ki,na="(?:"+[Ti+qn+"?",qn,Dr,Lr,Qs].join("|")+")",ra=RegExp("['\u2019]","g"),ia=RegExp(qn,"g"),Gr=RegExp(Er+"(?="+Er+")|"+na+ki,"g"),sa=RegExp([an+"?"+Si+"+"+yi+"(?="+[vi,an,"$"].join("|")+")",Ws+"+"+xi+"(?="+[vi,an+Ii,"$"].join("|")+")",an+"?"+Ii+"+"+yi,an+"+"+xi,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ci,ta].join("|"),"g"),aa=RegExp("[\\u200d"+zn+Xt+_i+"]"),oa=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,la=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],da=-1,ue={};ue[Sr]=ue[Tr]=ue[jr]=ue[Ir]=ue[yr]=ue[xr]=ue[Fr]=ue[Rr]=ue[kr]=!0,ue[tn]=ue[Bn]=ue[In]=ue[vn]=ue[nn]=ue[Ze]=ue[$n]=ue[Xn]=ue[mt]=ue[Cn]=ue[kt]=ue[Sn]=ue[pt]=ue[Tn]=ue[jn]=!1;var ce={};ce[tn]=ce[Bn]=ce[In]=ce[nn]=ce[vn]=ce[Ze]=ce[Sr]=ce[Tr]=ce[jr]=ce[Ir]=ce[yr]=ce[mt]=ce[Cn]=ce[kt]=ce[Sn]=ce[pt]=ce[Tn]=ce[Un]=ce[xr]=ce[Fr]=ce[Rr]=ce[kr]=!0,ce[$n]=ce[Xn]=ce[jn]=!1;var ua={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ga=parseFloat,ha=parseInt,Mi="object"==typeof global&&global&&global.Object===Object&&global,fa="object"==typeof self&&self&&self.Object===Object&&self,Me=Mi||fa||Function("return this")(),Oi=we&&!we.nodeType&&we,xn=Oi&&dt&&!dt.nodeType&&dt,wi=xn&&xn.exports===Oi,Vr=wi&&Mi.process,Le=function(){try{return xn&&xn.require&&xn.require("util").types||Vr&&Vr.binding&&Vr.binding("util")}catch{}}(),Ei=Le&&Le.isArrayBuffer,Ni=Le&&Le.isDate,Di=Le&&Le.isMap,Li=Le&&Le.isRegExp,Gi=Le&&Le.isSet,Vi=Le&&Le.isTypedArray;function Ye(v,T,S){switch(S.length){case 0:return v.call(T);case 1:return v.call(T,S[0]);case 2:return v.call(T,S[0],S[1]);case 3:return v.call(T,S[0],S[1],S[2])}return v.apply(T,S)}function _a(v,T,S,E){for(var $=-1,re=null==v?0:v.length;++$<re;){var ye=v[$];T(E,ye,S(ye),v)}return E}function nt(v,T){for(var S=-1,E=null==v?0:v.length;++S<E&&!1!==T(v[S],S,v););return v}function ba(v,T){for(var S=null==v?0:v.length;S--&&!1!==T(v[S],S,v););return v}function Ai(v,T){for(var S=-1,E=null==v?0:v.length;++S<E;)if(!T(v[S],S,v))return!1;return!0}function Nt(v,T){for(var S=-1,E=null==v?0:v.length,$=0,re=[];++S<E;){var ye=v[S];T(ye,S,v)&&(re[$++]=ye)}return re}function Qn(v,T){return!(null==v||!v.length)&&on(v,T,0)>-1}function Ar(v,T,S){for(var E=-1,$=null==v?0:v.length;++E<$;)if(S(T,v[E]))return!0;return!1}function fe(v,T){for(var S=-1,E=null==v?0:v.length,$=Array(E);++S<E;)$[S]=T(v[S],S,v);return $}function Dt(v,T){for(var S=-1,E=T.length,$=v.length;++S<E;)v[$+S]=T[S];return v}function Br(v,T,S,E){var $=-1,re=null==v?0:v.length;for(E&&re&&(S=v[++$]);++$<re;)S=T(S,v[$],$,v);return S}function va(v,T,S,E){var $=null==v?0:v.length;for(E&&$&&(S=v[--$]);$--;)S=T(S,v[$],$,v);return S}function $r(v,T){for(var S=-1,E=null==v?0:v.length;++S<E;)if(T(v[S],S,v))return!0;return!1}var Ca=Xr("length");function Bi(v,T,S){var E;return S(v,function($,re,ye){if(T($,re,ye))return E=re,!1}),E}function Jn(v,T,S,E){for(var $=v.length,re=S+(E?1:-1);E?re--:++re<$;)if(T(v[re],re,v))return re;return-1}function on(v,T,S){return T==T?function Na(v,T,S){for(var E=S-1,$=v.length;++E<$;)if(v[E]===T)return E;return-1}(v,T,S):Jn(v,$i,S)}function ja(v,T,S,E){for(var $=S-1,re=v.length;++$<re;)if(E(v[$],T))return $;return-1}function $i(v){return v!=v}function Xi(v,T){var S=null==v?0:v.length;return S?Pr(v,T)/S:NaN}function Xr(v){return function(T){return null==T?m:T[v]}}function Ur(v){return function(T){return null==v?m:v[T]}}function Ui(v,T,S,E,$){return $(v,function(re,ye,se){S=E?(E=!1,re):T(S,re,ye,se)}),S}function Pr(v,T){for(var S,E=-1,$=v.length;++E<$;){var re=T(v[E]);re!==m&&(S=S===m?re:S+re)}return S}function Yr(v,T){for(var S=-1,E=Array(v);++S<v;)E[S]=T(S);return E}function Pi(v){return v&&v.slice(0,Hi(v)+1).replace(Pe,"")}function ze(v){return function(T){return v(T)}}function zr(v,T){return fe(T,function(S){return v[S]})}function Fn(v,T){return v.has(T)}function Yi(v,T){for(var S=-1,E=v.length;++S<E&&on(T,v[S],0)>-1;);return S}function zi(v,T){for(var S=v.length;S--&&on(T,v[S],0)>-1;);return S}var Fa=Ur({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),Ra=Ur({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function ka(v){return"\\"+ua[v]}function ln(v){return aa.test(v)}function qr(v){var T=-1,S=Array(v.size);return v.forEach(function(E,$){S[++T]=[$,E]}),S}function qi(v,T){return function(S){return v(T(S))}}function Lt(v,T){for(var S=-1,E=v.length,$=0,re=[];++S<E;){var ye=v[S];(ye===T||ye===k)&&(v[S]=k,re[$++]=S)}return re}function Wn(v){var T=-1,S=Array(v.size);return v.forEach(function(E){S[++T]=E}),S}function dn(v){return ln(v)?function Ga(v){for(var T=Gr.lastIndex=0;Gr.test(v);)++T;return T}(v):Ca(v)}function gt(v){return ln(v)?function Va(v){return v.match(Gr)||[]}(v):function Sa(v){return v.split("")}(v)}function Hi(v){for(var T=v.length;T--&&Ms.test(v.charAt(T)););return T}var La=Ur({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Kn=function v(T){var t,S=(T=null==T?Me:Kn.defaults(Me.Object(),T,Kn.pick(Me,la))).Array,E=T.Date,$=T.Error,re=T.Function,ye=T.Math,se=T.Object,Zn=T.RegExp,$a=T.String,qe=T.TypeError,er=S.prototype,cn=se.prototype,tr=T["__core-js_shared__"],nr=re.prototype.toString,ae=cn.hasOwnProperty,Ua=0,Qi=(t=/[^.]+$/.exec(tr&&tr.keys&&tr.keys.IE_PROTO||""))?"Symbol(src)_1."+t:"",rr=cn.toString,Pa=nr.call(se),Ya=Me._,za=Zn("^"+nr.call(ae).replace($e,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ir=wi?T.Buffer:m,Gt=T.Symbol,sr=T.Uint8Array,Ji=ir?ir.allocUnsafe:m,ar=qi(se.getPrototypeOf,se),Hr=se.create,or=cn.propertyIsEnumerable,Rn=er.splice,Qr=Gt?Gt.isConcatSpreadable:m,kn=Gt?Gt.iterator:m,Pt=Gt?Gt.toStringTag:m,lr=function(){try{var t=Ln(se,"defineProperty");return t({},"",{}),t}catch{}}(),qa=T.clearTimeout!==Me.clearTimeout&&T.clearTimeout,Ha=E&&E.now!==Me.Date.now&&E.now,Qa=T.setTimeout!==Me.setTimeout&&T.setTimeout,dr=ye.ceil,cr=ye.floor,Jr=se.getOwnPropertySymbols,Ja=ir?ir.isBuffer:m,Wi=T.isFinite,Wa=er.join,Ka=qi(se.keys,se),xe=ye.max,Ee=ye.min,Za=E.now,eo=T.parseInt,Ki=ye.random,to=er.reverse,Wr=Ln(T,"DataView"),Mn=Ln(T,"Map"),Kr=Ln(T,"Promise"),mn=Ln(T,"Set"),On=Ln(T,"WeakMap"),wn=Ln(se,"create"),mr=On&&new On,pn={},no=Gn(Wr),ro=Gn(Mn),io=Gn(Kr),so=Gn(mn),ao=Gn(On),pr=Gt?Gt.prototype:m,En=pr?pr.valueOf:m,Zi=pr?pr.toString:m;function p(t){if(Ie(t)&&!X(t)&&!(t instanceof W)){if(t instanceof rt)return t;if(ae.call(t,"__wrapped__"))return ed(t)}return new rt(t)}var un=function(){function t(){}return function(r){if(!je(r))return{};if(Hr)return Hr(r);t.prototype=r;var a=new t;return t.prototype=m,a}}();function ur(){}function rt(t,r){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!r,this.__index__=0,this.__values__=m}function W(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ke,this.__views__=[]}function f(t){var r=-1,a=null==t?0:t.length;for(this.clear();++r<a;){var d=t[r];this.set(d[0],d[1])}}function g(t){var r=-1,a=null==t?0:t.length;for(this.clear();++r<a;){var d=t[r];this.set(d[0],d[1])}}function z(t){var r=-1,a=null==t?0:t.length;for(this.clear();++r<a;){var d=t[r];this.set(d[0],d[1])}}function Ce(t){var r=-1,a=null==t?0:t.length;for(this.__data__=new z;++r<a;)this.add(t[r])}function ft(t){var r=this.__data__=new g(t);this.size=r.size}function el(t,r){var a=X(t),d=!a&&Vn(t),c=!a&&!d&&bn(t),u=!a&&!d&&!c&&_r(t),_=a||d||c||u,b=_?Yr(t.length,$a):[],C=b.length;for(var j in t)(r||ae.call(t,j))&&(!_||!("length"==j||c&&("offset"==j||"parent"==j)||u&&("buffer"==j||"byteLength"==j||"byteOffset"==j)||Ht(j,C)))&&b.push(j);return b}function tl(t){var r=t.length;return r?t[Co(0,r-1)]:m}function Bd(t,r){return us(st(t),Nn(r,0,t.length))}function $d(t){return us(st(t))}function co(t,r,a){(a!==m&&!Ot(t[r],a)||a===m&&!(r in t))&&Yt(t,r,a)}function Zr(t,r,a){var d=t[r];(!ae.call(t,r)||!Ot(d,a)||a===m&&!(r in t))&&Yt(t,r,a)}function es(t,r){for(var a=t.length;a--;)if(Ot(t[a][0],r))return a;return-1}function Xd(t,r,a,d){return gn(t,function(c,u,_){r(d,c,a(c),_)}),d}function nl(t,r){return t&&At(r,Ne(r),t)}function Yt(t,r,a){"__proto__"==r&&lr?lr(t,r,{configurable:!0,enumerable:!0,value:a,writable:!0}):t[r]=a}function mo(t,r){for(var a=-1,d=r.length,c=S(d),u=null==t;++a<d;)c[a]=u?m:Yo(t,r[a]);return c}function Nn(t,r,a){return t==t&&(a!==m&&(t=t<=a?t:a),r!==m&&(t=t>=r?t:r)),t}function St(t,r,a,d,c,u){var _,b=1&r,C=2&r,j=4&r;if(a&&(_=c?a(t,d,c,u):a(t)),_!==m)return _;if(!je(t))return t;var y=X(t);if(y){if(_=function Oc(t){var r=t.length,a=new t.constructor(r);return r&&"string"==typeof t[0]&&ae.call(t,"index")&&(a.index=t.index,a.input=t.input),a}(t),!b)return st(t,_)}else{var x=Xe(t),O=x==Xn||x==di;if(bn(t))return xl(t,b);if(x==kt||x==tn||O&&!c){if(_=C||O?{}:Yl(t),!b)return C?function Cc(t,r){return At(t,Ul(t),r)}(t,function Ud(t,r){return t&&At(r,ot(r),t)}(_,t)):function vc(t,r){return At(t,No(t),r)}(t,nl(_,t))}else{if(!ce[x])return c?t:{};_=function wc(t,r,a){var d=t.constructor;switch(r){case In:return Fo(t);case vn:case Ze:return new d(+t);case nn:return function hc(t,r){var a=r?Fo(t.buffer):t.buffer;return new t.constructor(a,t.byteOffset,t.byteLength)}(t,a);case Sr:case Tr:case jr:case Ir:case yr:case xr:case Fr:case Rr:case kr:return Fl(t,a);case mt:return new d;case Cn:case Tn:return new d(t);case Sn:return function fc(t){var r=new t.constructor(t.source,hi.exec(t));return r.lastIndex=t.lastIndex,r}(t);case pt:return new d;case Un:return function _c(t){return En?se(En.call(t)):{}}(t)}}(t,x,b)}}u||(u=new ft);var D=u.get(t);if(D)return D;u.set(t,_),Cd(t)?t.forEach(function(A){_.add(St(A,r,a,A,t,u))}):bd(t)&&t.forEach(function(A,ee){_.set(ee,St(A,r,a,ee,t,u))});var H=y?m:(j?C?Oo:Mo:C?ot:Ne)(t);return nt(H||t,function(A,ee){H&&(A=t[ee=A]),Zr(_,ee,St(A,r,a,ee,t,u))}),_}function rl(t,r,a){var d=a.length;if(null==t)return!d;for(t=se(t);d--;){var c=a[d],_=t[c];if(_===m&&!(c in t)||!(0,r[c])(_))return!1}return!0}function il(t,r,a){if("function"!=typeof t)throw new qe(J);return ai(function(){t.apply(m,a)},r)}function ei(t,r,a,d){var c=-1,u=Qn,_=!0,b=t.length,C=[],j=r.length;if(!b)return C;a&&(r=fe(r,ze(a))),d?(u=Ar,_=!1):r.length>=200&&(u=Fn,_=!1,r=new Ce(r));e:for(;++c<b;){var y=t[c],x=null==a?y:a(y);if(y=d||0!==y?y:0,_&&x==x){for(var O=j;O--;)if(r[O]===x)continue e;C.push(y)}else u(r,x,d)||C.push(y)}return C}p.templateSettings={escape:Or,evaluate:Ue,interpolate:gi,variable:"",imports:{_:p}},(p.prototype=ur.prototype).constructor=p,(rt.prototype=un(ur.prototype)).constructor=rt,(W.prototype=un(ur.prototype)).constructor=W,f.prototype.clear=function n(){this.__data__=wn?wn(null):{},this.size=0},f.prototype.delete=function s(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r},f.prototype.get=function i(t){var r=this.__data__;if(wn){var a=r[t];return a===he?m:a}return ae.call(r,t)?r[t]:m},f.prototype.has=function l(t){var r=this.__data__;return wn?r[t]!==m:ae.call(r,t)},f.prototype.set=function h(t,r){var a=this.__data__;return this.size+=this.has(t)?0:1,a[t]=wn&&r===m?he:r,this},g.prototype.clear=function te(){this.__data__=[],this.size=0},g.prototype.delete=function me(t){var r=this.__data__,a=es(r,t);return!(a<0||(a==r.length-1?r.pop():Rn.call(r,a,1),--this.size,0))},g.prototype.get=function ge(t){var r=this.__data__,a=es(r,t);return a<0?m:r[a][1]},g.prototype.has=function K(t){return es(this.__data__,t)>-1},g.prototype.set=function Z(t,r){var a=this.__data__,d=es(a,t);return d<0?(++this.size,a.push([t,r])):a[d][1]=r,this},z.prototype.clear=function _e(){this.size=0,this.__data__={hash:new f,map:new(Mn||g),string:new f}},z.prototype.delete=function Te(t){var r=ps(this,t).delete(t);return this.size-=r?1:0,r},z.prototype.get=function Oe(t){return ps(this,t).get(t)},z.prototype.has=function q(t){return ps(this,t).has(t)},z.prototype.set=function be(t,r){var a=ps(this,t),d=a.size;return a.set(t,r),this.size+=a.size==d?0:1,this},Ce.prototype.add=Ce.prototype.push=function it(t){return this.__data__.set(t,he),this},Ce.prototype.has=function ht(t){return this.__data__.has(t)},ft.prototype.clear=function Dd(){this.__data__=new g,this.size=0},ft.prototype.delete=function Ld(t){var r=this.__data__,a=r.delete(t);return this.size=r.size,a},ft.prototype.get=function Gd(t){return this.__data__.get(t)},ft.prototype.has=function Vd(t){return this.__data__.has(t)},ft.prototype.set=function Ad(t,r){var a=this.__data__;if(a instanceof g){var d=a.__data__;if(!Mn||d.length<199)return d.push([t,r]),this.size=++a.size,this;a=this.__data__=new z(d)}return a.set(t,r),this.size=a.size,this};var gn=Ol(Vt),sl=Ol(uo,!0);function Yd(t,r){var a=!0;return gn(t,function(d,c,u){return a=!!r(d,c,u)}),a}function ts(t,r,a){for(var d=-1,c=t.length;++d<c;){var u=t[d],_=r(u);if(null!=_&&(b===m?_==_&&!bt(_):a(_,b)))var b=_,C=u}return C}function al(t,r){var a=[];return gn(t,function(d,c,u){r(d,c,u)&&a.push(d)}),a}function Ge(t,r,a,d,c){var u=-1,_=t.length;for(a||(a=Nc),c||(c=[]);++u<_;){var b=t[u];r>0&&a(b)?r>1?Ge(b,r-1,a,d,c):Dt(c,b):d||(c[c.length]=b)}return c}var po=wl(),ol=wl(!0);function Vt(t,r){return t&&po(t,r,Ne)}function uo(t,r){return t&&ol(t,r,Ne)}function ns(t,r){return Nt(r,function(a){return Qt(t[a])})}function Dn(t,r){for(var a=0,d=(r=fn(r,t)).length;null!=t&&a<d;)t=t[Bt(r[a++])];return a&&a==d?t:m}function ll(t,r,a){var d=r(t);return X(t)?d:Dt(d,a(t))}function He(t){return null==t?t===m?"[object Undefined]":"[object Null]":Pt&&Pt in se(t)?function Rc(t){var r=ae.call(t,Pt),a=t[Pt];try{t[Pt]=m;var d=!0}catch{}var c=rr.call(t);return d&&(r?t[Pt]=a:delete t[Pt]),c}(t):function $c(t){return rr.call(t)}(t)}function go(t,r){return t>r}function qd(t,r){return null!=t&&ae.call(t,r)}function Hd(t,r){return null!=t&&r in se(t)}function ho(t,r,a){for(var d=a?Ar:Qn,c=t[0].length,u=t.length,_=u,b=S(u),C=1/0,j=[];_--;){var y=t[_];_&&r&&(y=fe(y,ze(r))),C=Ee(y.length,C),b[_]=!a&&(r||c>=120&&y.length>=120)?new Ce(_&&y):m}y=t[0];var x=-1,O=b[0];e:for(;++x<c&&j.length<C;){var D=y[x],V=r?r(D):D;if(D=a||0!==D?D:0,!(O?Fn(O,V):d(j,V,a))){for(_=u;--_;){var H=b[_];if(!(H?Fn(H,V):d(t[_],V,a)))continue e}O&&O.push(V),j.push(D)}}return j}function ti(t,r,a){var d=null==(t=Ql(t,r=fn(r,t)))?t:t[Bt(jt(r))];return null==d?m:Ye(d,t,a)}function dl(t){return Ie(t)&&He(t)==tn}function ni(t,r,a,d,c){return t===r||(null==t||null==r||!Ie(t)&&!Ie(r)?t!=t&&r!=r:function Zd(t,r,a,d,c,u){var _=X(t),b=X(r),C=_?Bn:Xe(t),j=b?Bn:Xe(r),y=(C=C==tn?kt:C)==kt,x=(j=j==tn?kt:j)==kt,O=C==j;if(O&&bn(t)){if(!bn(r))return!1;_=!0,y=!1}if(O&&!y)return u||(u=new ft),_||_r(t)?Xl(t,r,a,d,c,u):function xc(t,r,a,d,c,u,_){switch(a){case nn:if(t.byteLength!=r.byteLength||t.byteOffset!=r.byteOffset)return!1;t=t.buffer,r=r.buffer;case In:return!(t.byteLength!=r.byteLength||!u(new sr(t),new sr(r)));case vn:case Ze:case Cn:return Ot(+t,+r);case $n:return t.name==r.name&&t.message==r.message;case Sn:case Tn:return t==r+"";case mt:var b=qr;case pt:if(b||(b=Wn),t.size!=r.size&&!(1&d))return!1;var j=_.get(t);if(j)return j==r;d|=2,_.set(t,r);var y=Xl(b(t),b(r),d,c,u,_);return _.delete(t),y;case Un:if(En)return En.call(t)==En.call(r)}return!1}(t,r,C,a,d,c,u);if(!(1&a)){var D=y&&ae.call(t,"__wrapped__"),V=x&&ae.call(r,"__wrapped__");if(D||V){var H=D?t.value():t,A=V?r.value():r;return u||(u=new ft),c(H,A,a,d,u)}}return!!O&&(u||(u=new ft),function Fc(t,r,a,d,c,u){var _=1&a,b=Mo(t),C=b.length;if(C!=Mo(r).length&&!_)return!1;for(var x=C;x--;){var O=b[x];if(!(_?O in r:ae.call(r,O)))return!1}var D=u.get(t),V=u.get(r);if(D&&V)return D==r&&V==t;var H=!0;u.set(t,r),u.set(r,t);for(var A=_;++x<C;){var ee=t[O=b[x]],ne=r[O];if(d)var vt=_?d(ne,ee,O,r,t,u):d(ee,ne,O,t,r,u);if(!(vt===m?ee===ne||c(ee,ne,a,d,u):vt)){H=!1;break}A||(A="constructor"==O)}if(H&&!A){var Je=t.constructor,Ct=r.constructor;Je!=Ct&&"constructor"in t&&"constructor"in r&&!("function"==typeof Je&&Je instanceof Je&&"function"==typeof Ct&&Ct instanceof Ct)&&(H=!1)}return u.delete(t),u.delete(r),H}(t,r,a,d,c,u))}(t,r,a,d,ni,c))}function fo(t,r,a,d){var c=a.length,u=c,_=!d;if(null==t)return!u;for(t=se(t);c--;){var b=a[c];if(_&&b[2]?b[1]!==t[b[0]]:!(b[0]in t))return!1}for(;++c<u;){var C=(b=a[c])[0],j=t[C],y=b[1];if(_&&b[2]){if(j===m&&!(C in t))return!1}else{var x=new ft;if(d)var O=d(j,y,C,t,r,x);if(!(O===m?ni(y,j,3,d,x):O))return!1}}return!0}function cl(t){return!(!je(t)||function Lc(t){return!!Qi&&Qi in t}(t))&&(Qt(t)?za:Bs).test(Gn(t))}function ml(t){return"function"==typeof t?t:null==t?lt:"object"==typeof t?X(t)?gl(t[0],t[1]):ul(t):Ed(t)}function _o(t){if(!si(t))return Ka(t);var r=[];for(var a in se(t))ae.call(t,a)&&"constructor"!=a&&r.push(a);return r}function bo(t,r){return t<r}function pl(t,r){var a=-1,d=at(t)?S(t.length):[];return gn(t,function(c,u,_){d[++a]=r(c,u,_)}),d}function ul(t){var r=Eo(t);return 1==r.length&&r[0][2]?ql(r[0][0],r[0][1]):function(a){return a===t||fo(a,t,r)}}function gl(t,r){return Do(t)&&zl(r)?ql(Bt(t),r):function(a){var d=Yo(a,t);return d===m&&d===r?zo(a,t):ni(r,d,3)}}function rs(t,r,a,d,c){t!==r&&po(r,function(u,_){if(c||(c=new ft),je(u))!function sc(t,r,a,d,c,u,_){var b=Go(t,a),C=Go(r,a),j=_.get(C);if(j)co(t,a,j);else{var y=u?u(b,C,a+"",t,r,_):m,x=y===m;if(x){var O=X(C),D=!O&&bn(C),V=!O&&!D&&_r(C);y=C,O||D||V?X(b)?y=b:Fe(b)?y=st(b):D?(x=!1,y=xl(C,!0)):V?(x=!1,y=Fl(C,!0)):y=[]:oi(C)||Vn(C)?(y=b,Vn(b)?y=jd(b):(!je(b)||Qt(b))&&(y=Yl(C))):x=!1}x&&(_.set(C,y),c(y,C,d,u,_),_.delete(C)),co(t,a,y)}}(t,r,_,a,rs,d,c);else{var b=d?d(Go(t,_),u,_+"",t,r,c):m;b===m&&(b=u),co(t,_,b)}},ot)}function hl(t,r){var a=t.length;if(a)return Ht(r+=r<0?a:0,a)?t[r]:m}function fl(t,r,a){r=r.length?fe(r,function(u){return X(u)?function(_){return Dn(_,1===u.length?u[0]:u)}:u}):[lt];var d=-1;return r=fe(r,ze(G())),function Ia(v,T){var S=v.length;for(v.sort(T);S--;)v[S]=v[S].value;return v}(pl(t,function(u,_,b){return{criteria:fe(r,function(j){return j(u)}),index:++d,value:u}}),function(u,_){return function bc(t,r,a){for(var d=-1,c=t.criteria,u=r.criteria,_=c.length,b=a.length;++d<_;){var C=Rl(c[d],u[d]);if(C)return d>=b?C:C*("desc"==a[d]?-1:1)}return t.index-r.index}(u,_,a)})}function _l(t,r,a){for(var d=-1,c=r.length,u={};++d<c;){var _=r[d],b=Dn(t,_);a(b,_)&&ri(u,fn(_,t),b)}return u}function vo(t,r,a,d){var c=d?ja:on,u=-1,_=r.length,b=t;for(t===r&&(r=st(r)),a&&(b=fe(t,ze(a)));++u<_;)for(var C=0,j=r[u],y=a?a(j):j;(C=c(b,y,C,d))>-1;)b!==t&&Rn.call(b,C,1),Rn.call(t,C,1);return t}function bl(t,r){for(var a=t?r.length:0,d=a-1;a--;){var c=r[a];if(a==d||c!==u){var u=c;Ht(c)?Rn.call(t,c,1):jo(t,c)}}return t}function Co(t,r){return t+cr(Ki()*(r-t+1))}function So(t,r){var a="";if(!t||r<1||r>Se)return a;do{r%2&&(a+=t),(r=cr(r/2))&&(t+=t)}while(r);return a}function Q(t,r){return Vo(Hl(t,r,lt),t+"")}function dc(t){return tl(br(t))}function cc(t,r){var a=br(t);return us(a,Nn(r,0,a.length))}function ri(t,r,a,d){if(!je(t))return t;for(var c=-1,u=(r=fn(r,t)).length,_=u-1,b=t;null!=b&&++c<u;){var C=Bt(r[c]),j=a;if("__proto__"===C||"constructor"===C||"prototype"===C)return t;if(c!=_){var y=b[C];(j=d?d(y,C,b):m)===m&&(j=je(y)?y:Ht(r[c+1])?[]:{})}Zr(b,C,j),b=b[C]}return t}var vl=mr?function(t,r){return mr.set(t,r),t}:lt,mc=lr?function(t,r){return lr(t,"toString",{configurable:!0,enumerable:!1,value:Ho(r),writable:!0})}:lt;function pc(t){return us(br(t))}function Tt(t,r,a){var d=-1,c=t.length;r<0&&(r=-r>c?0:c+r),(a=a>c?c:a)<0&&(a+=c),c=r>a?0:a-r>>>0,r>>>=0;for(var u=S(c);++d<c;)u[d]=t[d+r];return u}function uc(t,r){var a;return gn(t,function(d,c,u){return!(a=r(d,c,u))}),!!a}function is(t,r,a){var d=0,c=null==t?d:t.length;if("number"==typeof r&&r==r&&c<=2147483647){for(;d<c;){var u=d+c>>>1,_=t[u];null!==_&&!bt(_)&&(a?_<=r:_<r)?d=u+1:c=u}return c}return To(t,r,lt,a)}function To(t,r,a,d){var c=0,u=null==t?0:t.length;if(0===u)return 0;for(var _=(r=a(r))!=r,b=null===r,C=bt(r),j=r===m;c<u;){var y=cr((c+u)/2),x=a(t[y]),O=x!==m,D=null===x,V=x==x,H=bt(x);if(_)var A=d||V;else A=j?V&&(d||O):b?V&&O&&(d||!D):C?V&&O&&!D&&(d||!H):!D&&!H&&(d?x<=r:x<r);A?c=y+1:u=y}return Ee(u,4294967294)}function Cl(t,r){for(var a=-1,d=t.length,c=0,u=[];++a<d;){var _=t[a],b=r?r(_):_;if(!a||!Ot(b,C)){var C=b;u[c++]=0===_?0:_}}return u}function Sl(t){return"number"==typeof t?t:bt(t)?NaN:+t}function _t(t){if("string"==typeof t)return t;if(X(t))return fe(t,_t)+"";if(bt(t))return Zi?Zi.call(t):"";var r=t+"";return"0"==r&&1/t==-pe?"-0":r}function hn(t,r,a){var d=-1,c=Qn,u=t.length,_=!0,b=[],C=b;if(a)_=!1,c=Ar;else if(u>=200){var j=r?null:Ic(t);if(j)return Wn(j);_=!1,c=Fn,C=new Ce}else C=r?[]:b;e:for(;++d<u;){var y=t[d],x=r?r(y):y;if(y=a||0!==y?y:0,_&&x==x){for(var O=C.length;O--;)if(C[O]===x)continue e;r&&C.push(x),b.push(y)}else c(C,x,a)||(C!==b&&C.push(x),b.push(y))}return b}function jo(t,r){return null==(t=Ql(t,r=fn(r,t)))||delete t[Bt(jt(r))]}function Tl(t,r,a,d){return ri(t,r,a(Dn(t,r)),d)}function ss(t,r,a,d){for(var c=t.length,u=d?c:-1;(d?u--:++u<c)&&r(t[u],u,t););return a?Tt(t,d?0:u,d?u+1:c):Tt(t,d?u+1:0,d?c:u)}function jl(t,r){var a=t;return a instanceof W&&(a=a.value()),Br(r,function(d,c){return c.func.apply(c.thisArg,Dt([d],c.args))},a)}function Io(t,r,a){var d=t.length;if(d<2)return d?hn(t[0]):[];for(var c=-1,u=S(d);++c<d;)for(var _=t[c],b=-1;++b<d;)b!=c&&(u[c]=ei(u[c]||_,t[b],r,a));return hn(Ge(u,1),r,a)}function Il(t,r,a){for(var d=-1,c=t.length,u=r.length,_={};++d<c;)a(_,t[d],d<u?r[d]:m);return _}function yo(t){return Fe(t)?t:[]}function xo(t){return"function"==typeof t?t:lt}function fn(t,r){return X(t)?t:Do(t,r)?[t]:Zl(le(t))}var gc=Q;function _n(t,r,a){var d=t.length;return a=a===m?d:a,!r&&a>=d?t:Tt(t,r,a)}var yl=qa||function(t){return Me.clearTimeout(t)};function xl(t,r){if(r)return t.slice();var a=t.length,d=Ji?Ji(a):new t.constructor(a);return t.copy(d),d}function Fo(t){var r=new t.constructor(t.byteLength);return new sr(r).set(new sr(t)),r}function Fl(t,r){var a=r?Fo(t.buffer):t.buffer;return new t.constructor(a,t.byteOffset,t.length)}function Rl(t,r){if(t!==r){var a=t!==m,d=null===t,c=t==t,u=bt(t),_=r!==m,b=null===r,C=r==r,j=bt(r);if(!b&&!j&&!u&&t>r||u&&_&&C&&!b&&!j||d&&_&&C||!a&&C||!c)return 1;if(!d&&!u&&!j&&t<r||j&&a&&c&&!d&&!u||b&&a&&c||!_&&c||!C)return-1}return 0}function kl(t,r,a,d){for(var c=-1,u=t.length,_=a.length,b=-1,C=r.length,j=xe(u-_,0),y=S(C+j),x=!d;++b<C;)y[b]=r[b];for(;++c<_;)(x||c<u)&&(y[a[c]]=t[c]);for(;j--;)y[b++]=t[c++];return y}function Ml(t,r,a,d){for(var c=-1,u=t.length,_=-1,b=a.length,C=-1,j=r.length,y=xe(u-b,0),x=S(y+j),O=!d;++c<y;)x[c]=t[c];for(var D=c;++C<j;)x[D+C]=r[C];for(;++_<b;)(O||c<u)&&(x[D+a[_]]=t[c++]);return x}function st(t,r){var a=-1,d=t.length;for(r||(r=S(d));++a<d;)r[a]=t[a];return r}function At(t,r,a,d){var c=!a;a||(a={});for(var u=-1,_=r.length;++u<_;){var b=r[u],C=d?d(a[b],t[b],b,a,t):m;C===m&&(C=t[b]),c?Yt(a,b,C):Zr(a,b,C)}return a}function as(t,r){return function(a,d){var c=X(a)?_a:Xd,u=r?r():{};return c(a,t,G(d,2),u)}}function gr(t){return Q(function(r,a){var d=-1,c=a.length,u=c>1?a[c-1]:m,_=c>2?a[2]:m;for(u=t.length>3&&"function"==typeof u?(c--,u):m,_&&Qe(a[0],a[1],_)&&(u=c<3?m:u,c=1),r=se(r);++d<c;){var b=a[d];b&&t(r,b,d,u)}return r})}function Ol(t,r){return function(a,d){if(null==a)return a;if(!at(a))return t(a,d);for(var c=a.length,u=r?c:-1,_=se(a);(r?u--:++u<c)&&!1!==d(_[u],u,_););return a}}function wl(t){return function(r,a,d){for(var c=-1,u=se(r),_=d(r),b=_.length;b--;){var C=_[t?b:++c];if(!1===a(u[C],C,u))break}return r}}function El(t){return function(r){var a=ln(r=le(r))?gt(r):m,d=a?a[0]:r.charAt(0),c=a?_n(a,1).join(""):r.slice(1);return d[t]()+c}}function hr(t){return function(r){return Br(Od(Md(r).replace(ra,"")),t,"")}}function ii(t){return function(){var r=arguments;switch(r.length){case 0:return new t;case 1:return new t(r[0]);case 2:return new t(r[0],r[1]);case 3:return new t(r[0],r[1],r[2]);case 4:return new t(r[0],r[1],r[2],r[3]);case 5:return new t(r[0],r[1],r[2],r[3],r[4]);case 6:return new t(r[0],r[1],r[2],r[3],r[4],r[5]);case 7:return new t(r[0],r[1],r[2],r[3],r[4],r[5],r[6])}var a=un(t.prototype),d=t.apply(a,r);return je(d)?d:a}}function Nl(t){return function(r,a,d){var c=se(r);if(!at(r)){var u=G(a,3);r=Ne(r),a=function(b){return u(c[b],b,c)}}var _=t(r,a,d);return _>-1?c[u?r[_]:_]:m}}function Dl(t){return qt(function(r){var a=r.length,d=a,c=rt.prototype.thru;for(t&&r.reverse();d--;){var u=r[d];if("function"!=typeof u)throw new qe(J);if(c&&!_&&"wrapper"==ms(u))var _=new rt([],!0)}for(d=_?d:a;++d<a;){var b=ms(u=r[d]),C="wrapper"==b?wo(u):m;_=C&&Lo(C[0])&&424==C[1]&&!C[4].length&&1==C[9]?_[ms(C[0])].apply(_,C[3]):1==u.length&&Lo(u)?_[b]():_.thru(u)}return function(){var j=arguments,y=j[0];if(_&&1==j.length&&X(y))return _.plant(y).value();for(var x=0,O=a?r[x].apply(this,j):y;++x<a;)O=r[x].call(this,O);return O}})}function os(t,r,a,d,c,u,_,b,C,j){var y=r&w,x=1&r,O=2&r,D=24&r,V=512&r,H=O?m:ii(t);return function A(){for(var ee=arguments.length,ne=S(ee),vt=ee;vt--;)ne[vt]=arguments[vt];if(D)var Je=fr(A),Ct=function xa(v,T){for(var S=v.length,E=0;S--;)v[S]===T&&++E;return E}(ne,Je);if(d&&(ne=kl(ne,d,c,D)),u&&(ne=Ml(ne,u,_,D)),ee-=Ct,D&&ee<j){var Re=Lt(ne,Je);return Vl(t,r,os,A.placeholder,a,ne,Re,b,C,j-ee)}var wt=x?a:this,Wt=O?wt[t]:t;return ee=ne.length,b?ne=function Xc(t,r){for(var a=t.length,d=Ee(r.length,a),c=st(t);d--;){var u=r[d];t[d]=Ht(u,a)?c[u]:m}return t}(ne,b):V&&ee>1&&ne.reverse(),y&&C<ee&&(ne.length=C),this&&this!==Me&&this instanceof A&&(Wt=H||ii(Wt)),Wt.apply(wt,ne)}}function Ll(t,r){return function(a,d){return function Jd(t,r,a,d){return Vt(t,function(c,u,_){r(d,a(c),u,_)}),d}(a,t,r(d),{})}}function ls(t,r){return function(a,d){var c;if(a===m&&d===m)return r;if(a!==m&&(c=a),d!==m){if(c===m)return d;"string"==typeof a||"string"==typeof d?(a=_t(a),d=_t(d)):(a=Sl(a),d=Sl(d)),c=t(a,d)}return c}}function Ro(t){return qt(function(r){return r=fe(r,ze(G())),Q(function(a){var d=this;return t(r,function(c){return Ye(c,d,a)})})})}function ds(t,r){var a=(r=r===m?" ":_t(r)).length;if(a<2)return a?So(r,t):r;var d=So(r,dr(t/dn(r)));return ln(r)?_n(gt(d),0,t).join(""):d.slice(0,t)}function Gl(t){return function(r,a,d){return d&&"number"!=typeof d&&Qe(r,a,d)&&(a=d=m),r=Jt(r),a===m?(a=r,r=0):a=Jt(a),function lc(t,r,a,d){for(var c=-1,u=xe(dr((r-t)/(a||1)),0),_=S(u);u--;)_[d?u:++c]=t,t+=a;return _}(r,a,d=d===m?r<a?1:-1:Jt(d),t)}}function cs(t){return function(r,a){return"string"==typeof r&&"string"==typeof a||(r=It(r),a=It(a)),t(r,a)}}function Vl(t,r,a,d,c,u,_,b,C,j){var y=8&r;r|=y?32:64,4&(r&=~(y?64:32))||(r&=-4);var H=[t,r,c,y?u:m,y?_:m,y?m:u,y?m:_,b,C,j],A=a.apply(m,H);return Lo(t)&&Jl(A,H),A.placeholder=d,Wl(A,t,r)}function ko(t){var r=ye[t];return function(a,d){if(a=It(a),(d=null==d?0:Ee(Y(d),292))&&Wi(a)){var c=(le(a)+"e").split("e");return+((c=(le(r(c[0]+"e"+(+c[1]+d)))+"e").split("e"))[0]+"e"+(+c[1]-d))}return r(a)}}var Ic=mn&&1/Wn(new mn([,-0]))[1]==pe?function(t){return new mn(t)}:Wo;function Al(t){return function(r){var a=Xe(r);return a==mt?qr(r):a==pt?function Ea(v){var T=-1,S=Array(v.size);return v.forEach(function(E){S[++T]=[E,E]}),S}(r):function ya(v,T){return fe(T,function(S){return[S,v[S]]})}(r,t(r))}}function zt(t,r,a,d,c,u,_,b){var C=2&r;if(!C&&"function"!=typeof t)throw new qe(J);var j=d?d.length:0;if(j||(r&=-97,d=c=m),_=_===m?_:xe(Y(_),0),b=b===m?b:Y(b),j-=c?c.length:0,64&r){var y=d,x=c;d=c=m}var O=C?m:wo(t),D=[t,r,a,d,c,y,x,u,_,b];if(O&&function Ac(t,r){var a=t[1],d=r[1],c=a|d;if(!(c<131)&&!(d==w&&8==a||d==w&&256==a&&t[7].length<=r[8]||384==d&&r[7].length<=r[8]&&8==a))return t;1&d&&(t[2]=r[2],c|=1&a?0:4);var b=r[3];if(b){var C=t[3];t[3]=C?kl(C,b,r[4]):b,t[4]=C?Lt(t[3],k):r[4]}(b=r[5])&&(t[5]=(C=t[5])?Ml(C,b,r[6]):b,t[6]=C?Lt(t[5],k):r[6]),(b=r[7])&&(t[7]=b),d&w&&(t[8]=null==t[8]?r[8]:Ee(t[8],r[8])),null==t[9]&&(t[9]=r[9]),t[0]=r[0],t[1]=c}(D,O),t=D[0],r=D[1],a=D[2],d=D[3],c=D[4],!(b=D[9]=D[9]===m?C?0:t.length:xe(D[9]-j,0))&&24&r&&(r&=-25),r&&1!=r)V=8==r||16==r?function Tc(t,r,a){var d=ii(t);return function c(){for(var u=arguments.length,_=S(u),b=u,C=fr(c);b--;)_[b]=arguments[b];var j=u<3&&_[0]!==C&&_[u-1]!==C?[]:Lt(_,C);return(u-=j.length)<a?Vl(t,r,os,c.placeholder,m,_,j,m,m,a-u):Ye(this&&this!==Me&&this instanceof c?d:t,this,_)}}(t,r,b):32!=r&&33!=r||c.length?os.apply(m,D):function jc(t,r,a,d){var c=1&r,u=ii(t);return function _(){for(var b=-1,C=arguments.length,j=-1,y=d.length,x=S(y+C),O=this&&this!==Me&&this instanceof _?u:t;++j<y;)x[j]=d[j];for(;C--;)x[j++]=arguments[++b];return Ye(O,c?a:this,x)}}(t,r,a,d);else var V=function Sc(t,r,a){var d=1&r,c=ii(t);return function u(){return(this&&this!==Me&&this instanceof u?c:t).apply(d?a:this,arguments)}}(t,r,a);return Wl((O?vl:Jl)(V,D),t,r)}function Bl(t,r,a,d){return t===m||Ot(t,cn[a])&&!ae.call(d,a)?r:t}function $l(t,r,a,d,c,u){return je(t)&&je(r)&&(u.set(r,t),rs(t,r,m,$l,u),u.delete(r)),t}function yc(t){return oi(t)?m:t}function Xl(t,r,a,d,c,u){var _=1&a,b=t.length,C=r.length;if(b!=C&&!(_&&C>b))return!1;var j=u.get(t),y=u.get(r);if(j&&y)return j==r&&y==t;var x=-1,O=!0,D=2&a?new Ce:m;for(u.set(t,r),u.set(r,t);++x<b;){var V=t[x],H=r[x];if(d)var A=_?d(H,V,x,r,t,u):d(V,H,x,t,r,u);if(A!==m){if(A)continue;O=!1;break}if(D){if(!$r(r,function(ee,ne){if(!Fn(D,ne)&&(V===ee||c(V,ee,a,d,u)))return D.push(ne)})){O=!1;break}}else if(V!==H&&!c(V,H,a,d,u)){O=!1;break}}return u.delete(t),u.delete(r),O}function qt(t){return Vo(Hl(t,m,rd),t+"")}function Mo(t){return ll(t,Ne,No)}function Oo(t){return ll(t,ot,Ul)}var wo=mr?function(t){return mr.get(t)}:Wo;function ms(t){for(var r=t.name+"",a=pn[r],d=ae.call(pn,r)?a.length:0;d--;){var c=a[d],u=c.func;if(null==u||u==t)return c.name}return r}function fr(t){return(ae.call(p,"placeholder")?p:t).placeholder}function G(){var t=p.iteratee||Qo;return t=t===Qo?ml:t,arguments.length?t(arguments[0],arguments[1]):t}function ps(t,r){var a=t.__data__;return function Dc(t){var r=typeof t;return"string"==r||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==t:null===t}(r)?a["string"==typeof r?"string":"hash"]:a.map}function Eo(t){for(var r=Ne(t),a=r.length;a--;){var d=r[a],c=t[d];r[a]=[d,c,zl(c)]}return r}function Ln(t,r){var a=function Ma(v,T){return null==v?m:v[T]}(t,r);return cl(a)?a:m}var No=Jr?function(t){return null==t?[]:(t=se(t),Nt(Jr(t),function(r){return or.call(t,r)}))}:Ko,Ul=Jr?function(t){for(var r=[];t;)Dt(r,No(t)),t=ar(t);return r}:Ko,Xe=He;function Pl(t,r,a){for(var d=-1,c=(r=fn(r,t)).length,u=!1;++d<c;){var _=Bt(r[d]);if(!(u=null!=t&&a(t,_)))break;t=t[_]}return u||++d!=c?u:!!(c=null==t?0:t.length)&&vs(c)&&Ht(_,c)&&(X(t)||Vn(t))}function Yl(t){return"function"!=typeof t.constructor||si(t)?{}:un(ar(t))}function Nc(t){return X(t)||Vn(t)||!!(Qr&&t&&t[Qr])}function Ht(t,r){var a=typeof t;return!!(r=r??Se)&&("number"==a||"symbol"!=a&&Xs.test(t))&&t>-1&&t%1==0&&t<r}function Qe(t,r,a){if(!je(a))return!1;var d=typeof r;return!!("number"==d?at(a)&&Ht(r,a.length):"string"==d&&r in a)&&Ot(a[r],t)}function Do(t,r){if(X(t))return!1;var a=typeof t;return!("number"!=a&&"symbol"!=a&&"boolean"!=a&&null!=t&&!bt(t))||ks.test(t)||!ut.test(t)||null!=r&&t in se(r)}function Lo(t){var r=ms(t),a=p[r];if("function"!=typeof a||!(r in W.prototype))return!1;if(t===a)return!0;var d=wo(a);return!!d&&t===d[0]}(Wr&&Xe(new Wr(new ArrayBuffer(1)))!=nn||Mn&&Xe(new Mn)!=mt||Kr&&Xe(Kr.resolve())!=ci||mn&&Xe(new mn)!=pt||On&&Xe(new On)!=jn)&&(Xe=function(t){var r=He(t),a=r==kt?t.constructor:m,d=a?Gn(a):"";if(d)switch(d){case no:return nn;case ro:return mt;case io:return ci;case so:return pt;case ao:return jn}return r});var Gc=tr?Qt:Zo;function si(t){var r=t&&t.constructor;return t===("function"==typeof r&&r.prototype||cn)}function zl(t){return t==t&&!je(t)}function ql(t,r){return function(a){return null!=a&&a[t]===r&&(r!==m||t in se(a))}}function Hl(t,r,a){return r=xe(r===m?t.length-1:r,0),function(){for(var d=arguments,c=-1,u=xe(d.length-r,0),_=S(u);++c<u;)_[c]=d[r+c];c=-1;for(var b=S(r+1);++c<r;)b[c]=d[c];return b[r]=a(_),Ye(t,this,b)}}function Ql(t,r){return r.length<2?t:Dn(t,Tt(r,0,-1))}function Go(t,r){if(("constructor"!==r||"function"!=typeof t[r])&&"__proto__"!=r)return t[r]}var Jl=Kl(vl),ai=Qa||function(t,r){return Me.setTimeout(t,r)},Vo=Kl(mc);function Wl(t,r,a){var d=r+"";return Vo(t,function Ec(t,r){var a=r.length;if(!a)return t;var d=a-1;return r[d]=(a>1?"& ":"")+r[d],r=r.join(a>2?", ":" "),t.replace(Os,"{\n/* [wrapped with "+r+"] */\n")}(d,function Uc(t,r){return nt(An,function(a){var d="_."+a[0];r&a[1]&&!Qn(t,d)&&t.push(d)}),t.sort()}(function Mc(t){var r=t.match(ws);return r?r[1].split(Es):[]}(d),a)))}function Kl(t){var r=0,a=0;return function(){var d=Za(),c=16-(d-a);if(a=d,c>0){if(++r>=800)return arguments[0]}else r=0;return t.apply(m,arguments)}}function us(t,r){var a=-1,d=t.length,c=d-1;for(r=r===m?d:r;++a<r;){var u=Co(a,c),_=t[u];t[u]=t[a],t[a]=_}return t.length=r,t}var Zl=function Vc(t){var r=_s(t,function(d){return 500===a.size&&a.clear(),d}),a=r.cache;return r}(function(t){var r=[];return 46===t.charCodeAt(0)&&r.push(""),t.replace(et,function(a,d,c,u){r.push(c?u.replace(Ls,"$1"):d||a)}),r});function Bt(t){if("string"==typeof t||bt(t))return t;var r=t+"";return"0"==r&&1/t==-pe?"-0":r}function Gn(t){if(null!=t){try{return nr.call(t)}catch{}try{return t+""}catch{}}return""}function ed(t){if(t instanceof W)return t.clone();var r=new rt(t.__wrapped__,t.__chain__);return r.__actions__=st(t.__actions__),r.__index__=t.__index__,r.__values__=t.__values__,r}var qc=Q(function(t,r){return Fe(t)?ei(t,Ge(r,1,Fe,!0)):[]}),Hc=Q(function(t,r){var a=jt(r);return Fe(a)&&(a=m),Fe(t)?ei(t,Ge(r,1,Fe,!0),G(a,2)):[]}),Qc=Q(function(t,r){var a=jt(r);return Fe(a)&&(a=m),Fe(t)?ei(t,Ge(r,1,Fe,!0),m,a):[]});function td(t,r,a){var d=null==t?0:t.length;if(!d)return-1;var c=null==a?0:Y(a);return c<0&&(c=xe(d+c,0)),Jn(t,G(r,3),c)}function nd(t,r,a){var d=null==t?0:t.length;if(!d)return-1;var c=d-1;return a!==m&&(c=Y(a),c=a<0?xe(d+c,0):Ee(c,d-1)),Jn(t,G(r,3),c,!0)}function rd(t){return null!=t&&t.length?Ge(t,1):[]}function id(t){return t&&t.length?t[0]:m}var am=Q(function(t){var r=fe(t,yo);return r.length&&r[0]===t[0]?ho(r):[]}),om=Q(function(t){var r=jt(t),a=fe(t,yo);return r===jt(a)?r=m:a.pop(),a.length&&a[0]===t[0]?ho(a,G(r,2)):[]}),lm=Q(function(t){var r=jt(t),a=fe(t,yo);return(r="function"==typeof r?r:m)&&a.pop(),a.length&&a[0]===t[0]?ho(a,m,r):[]});function jt(t){var r=null==t?0:t.length;return r?t[r-1]:m}var pm=Q(sd);function sd(t,r){return t&&t.length&&r&&r.length?vo(t,r):t}var hm=qt(function(t,r){var a=null==t?0:t.length,d=mo(t,r);return bl(t,fe(r,function(c){return Ht(c,a)?+c:c}).sort(Rl)),d});function Ao(t){return null==t?t:to.call(t)}var Om=Q(function(t){return hn(Ge(t,1,Fe,!0))}),wm=Q(function(t){var r=jt(t);return Fe(r)&&(r=m),hn(Ge(t,1,Fe,!0),G(r,2))}),Em=Q(function(t){var r=jt(t);return r="function"==typeof r?r:m,hn(Ge(t,1,Fe,!0),m,r)});function Bo(t){if(!t||!t.length)return[];var r=0;return t=Nt(t,function(a){if(Fe(a))return r=xe(a.length,r),!0}),Yr(r,function(a){return fe(t,Xr(a))})}function ad(t,r){if(!t||!t.length)return[];var a=Bo(t);return null==r?a:fe(a,function(d){return Ye(r,m,d)})}var Gm=Q(function(t,r){return Fe(t)?ei(t,r):[]}),Vm=Q(function(t){return Io(Nt(t,Fe))}),Am=Q(function(t){var r=jt(t);return Fe(r)&&(r=m),Io(Nt(t,Fe),G(r,2))}),Bm=Q(function(t){var r=jt(t);return r="function"==typeof r?r:m,Io(Nt(t,Fe),m,r)}),$m=Q(Bo),Pm=Q(function(t){var r=t.length,a=r>1?t[r-1]:m;return a="function"==typeof a?(t.pop(),a):m,ad(t,a)});function od(t){var r=p(t);return r.__chain__=!0,r}function gs(t,r){return r(t)}var zm=qt(function(t){var r=t.length,a=r?t[0]:0,d=this.__wrapped__,c=function(u){return mo(u,t)};return!(r>1||this.__actions__.length)&&d instanceof W&&Ht(a)?((d=d.slice(a,+a+(r?1:0))).__actions__.push({func:gs,args:[c],thisArg:m}),new rt(d,this.__chain__).thru(function(u){return r&&!u.length&&u.push(m),u})):this.thru(c)}),ep=as(function(t,r,a){ae.call(t,a)?++t[a]:Yt(t,a,1)}),rp=Nl(td),ip=Nl(nd);function ld(t,r){return(X(t)?nt:gn)(t,G(r,3))}function dd(t,r){return(X(t)?ba:sl)(t,G(r,3))}var lp=as(function(t,r,a){ae.call(t,a)?t[a].push(r):Yt(t,a,[r])}),cp=Q(function(t,r,a){var d=-1,c="function"==typeof r,u=at(t)?S(t.length):[];return gn(t,function(_){u[++d]=c?Ye(r,_,a):ti(_,r,a)}),u}),mp=as(function(t,r,a){Yt(t,a,r)});function hs(t,r){return(X(t)?fe:pl)(t,G(r,3))}var up=as(function(t,r,a){t[a?0:1].push(r)},function(){return[[],[]]}),Tp=Q(function(t,r){if(null==t)return[];var a=r.length;return a>1&&Qe(t,r[0],r[1])?r=[]:a>2&&Qe(r[0],r[1],r[2])&&(r=[r[0]]),fl(t,Ge(r,1),[])}),fs=Ha||function(){return Me.Date.now()};function cd(t,r,a){return r=a?m:r,zt(t,w,m,m,m,m,r=t&&null==r?t.length:r)}function md(t,r){var a;if("function"!=typeof r)throw new qe(J);return t=Y(t),function(){return--t>0&&(a=r.apply(this,arguments)),t<=1&&(r=m),a}}var $o=Q(function(t,r,a){var d=1;if(a.length){var c=Lt(a,fr($o));d|=32}return zt(t,d,r,a,c)}),pd=Q(function(t,r,a){var d=3;if(a.length){var c=Lt(a,fr(pd));d|=32}return zt(r,d,t,a,c)});function hd(t,r,a){var d,c,u,_,b,C,j=0,y=!1,x=!1,O=!0;if("function"!=typeof t)throw new qe(J);function D(Re){var wt=d,Wt=c;return d=c=m,j=Re,_=t.apply(Wt,wt)}function A(Re){var wt=Re-C;return C===m||wt>=r||wt<0||x&&Re-j>=u}function ee(){var Re=fs();if(A(Re))return ne(Re);b=ai(ee,function H(Re){var Nd=r-(Re-C);return x?Ee(Nd,u-(Re-j)):Nd}(Re))}function ne(Re){return b=m,O&&d?D(Re):(d=c=m,_)}function Ct(){var Re=fs(),wt=A(Re);if(d=arguments,c=this,C=Re,wt){if(b===m)return function V(Re){return j=Re,b=ai(ee,r),y?D(Re):_}(C);if(x)return yl(b),b=ai(ee,r),D(C)}return b===m&&(b=ai(ee,r)),_}return r=It(r)||0,je(a)&&(y=!!a.leading,u=(x="maxWait"in a)?xe(It(a.maxWait)||0,r):u,O="trailing"in a?!!a.trailing:O),Ct.cancel=function vt(){b!==m&&yl(b),j=0,d=C=c=b=m},Ct.flush=function Je(){return b===m?_:ne(fs())},Ct}var Ip=Q(function(t,r){return il(t,1,r)}),yp=Q(function(t,r,a){return il(t,It(r)||0,a)});function _s(t,r){if("function"!=typeof t||null!=r&&"function"!=typeof r)throw new qe(J);var a=function(){var d=arguments,c=r?r.apply(this,d):d[0],u=a.cache;if(u.has(c))return u.get(c);var _=t.apply(this,d);return a.cache=u.set(c,_)||u,_};return a.cache=new(_s.Cache||z),a}function bs(t){if("function"!=typeof t)throw new qe(J);return function(){var r=arguments;switch(r.length){case 0:return!t.call(this);case 1:return!t.call(this,r[0]);case 2:return!t.call(this,r[0],r[1]);case 3:return!t.call(this,r[0],r[1],r[2])}return!t.apply(this,r)}}_s.Cache=z;var Rp=gc(function(t,r){var a=(r=1==r.length&&X(r[0])?fe(r[0],ze(G())):fe(Ge(r,1),ze(G()))).length;return Q(function(d){for(var c=-1,u=Ee(d.length,a);++c<u;)d[c]=r[c].call(this,d[c]);return Ye(t,this,d)})}),Xo=Q(function(t,r){var a=Lt(r,fr(Xo));return zt(t,32,m,r,a)}),fd=Q(function(t,r){var a=Lt(r,fr(fd));return zt(t,64,m,r,a)}),kp=qt(function(t,r){return zt(t,256,m,m,m,r)});function Ot(t,r){return t===r||t!=t&&r!=r}var $p=cs(go),Xp=cs(function(t,r){return t>=r}),Vn=dl(function(){return arguments}())?dl:function(t){return Ie(t)&&ae.call(t,"callee")&&!or.call(t,"callee")},X=S.isArray,Up=Ei?ze(Ei):function Wd(t){return Ie(t)&&He(t)==In};function at(t){return null!=t&&vs(t.length)&&!Qt(t)}function Fe(t){return Ie(t)&&at(t)}var bn=Ja||Zo,Yp=Ni?ze(Ni):function Kd(t){return Ie(t)&&He(t)==Ze};function Uo(t){if(!Ie(t))return!1;var r=He(t);return r==$n||"[object DOMException]"==r||"string"==typeof t.message&&"string"==typeof t.name&&!oi(t)}function Qt(t){if(!je(t))return!1;var r=He(t);return r==Xn||r==di||"[object AsyncFunction]"==r||"[object Proxy]"==r}function _d(t){return"number"==typeof t&&t==Y(t)}function vs(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Se}function je(t){var r=typeof t;return null!=t&&("object"==r||"function"==r)}function Ie(t){return null!=t&&"object"==typeof t}var bd=Di?ze(Di):function ec(t){return Ie(t)&&Xe(t)==mt};function vd(t){return"number"==typeof t||Ie(t)&&He(t)==Cn}function oi(t){if(!Ie(t)||He(t)!=kt)return!1;var r=ar(t);if(null===r)return!0;var a=ae.call(r,"constructor")&&r.constructor;return"function"==typeof a&&a instanceof a&&nr.call(a)==Pa}var Po=Li?ze(Li):function tc(t){return Ie(t)&&He(t)==Sn},Cd=Gi?ze(Gi):function nc(t){return Ie(t)&&Xe(t)==pt};function Cs(t){return"string"==typeof t||!X(t)&&Ie(t)&&He(t)==Tn}function bt(t){return"symbol"==typeof t||Ie(t)&&He(t)==Un}var _r=Vi?ze(Vi):function rc(t){return Ie(t)&&vs(t.length)&&!!ue[He(t)]},ou=cs(bo),lu=cs(function(t,r){return t<=r});function Sd(t){if(!t)return[];if(at(t))return Cs(t)?gt(t):st(t);if(kn&&t[kn])return function wa(v){for(var T,S=[];!(T=v.next()).done;)S.push(T.value);return S}(t[kn]());var r=Xe(t);return(r==mt?qr:r==pt?Wn:br)(t)}function Jt(t){return t?(t=It(t))===pe||t===-pe?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function Y(t){var r=Jt(t),a=r%1;return r==r?a?r-a:r:0}function Td(t){return t?Nn(Y(t),0,Ke):0}function It(t){if("number"==typeof t)return t;if(bt(t))return NaN;if(je(t)){var r="function"==typeof t.valueOf?t.valueOf():t;t=je(r)?r+"":r}if("string"!=typeof t)return 0===t?t:+t;t=Pi(t);var a=As.test(t);return a||$s.test(t)?ha(t.slice(2),a?2:8):Vs.test(t)?NaN:+t}function jd(t){return At(t,ot(t))}function le(t){return null==t?"":_t(t)}var cu=gr(function(t,r){if(si(r)||at(r))At(r,Ne(r),t);else for(var a in r)ae.call(r,a)&&Zr(t,a,r[a])}),Id=gr(function(t,r){At(r,ot(r),t)}),Ss=gr(function(t,r,a,d){At(r,ot(r),t,d)}),mu=gr(function(t,r,a,d){At(r,Ne(r),t,d)}),pu=qt(mo),gu=Q(function(t,r){t=se(t);var a=-1,d=r.length,c=d>2?r[2]:m;for(c&&Qe(r[0],r[1],c)&&(d=1);++a<d;)for(var u=r[a],_=ot(u),b=-1,C=_.length;++b<C;){var j=_[b],y=t[j];(y===m||Ot(y,cn[j])&&!ae.call(t,j))&&(t[j]=u[j])}return t}),hu=Q(function(t){return t.push(m,$l),Ye(yd,m,t)});function Yo(t,r,a){var d=null==t?m:Dn(t,r);return d===m?a:d}function zo(t,r){return null!=t&&Pl(t,r,Hd)}var yu=Ll(function(t,r,a){null!=r&&"function"!=typeof r.toString&&(r=rr.call(r)),t[r]=a},Ho(lt)),xu=Ll(function(t,r,a){null!=r&&"function"!=typeof r.toString&&(r=rr.call(r)),ae.call(t,r)?t[r].push(a):t[r]=[a]},G),Fu=Q(ti);function Ne(t){return at(t)?el(t):_o(t)}function ot(t){return at(t)?el(t,!0):function ic(t){if(!je(t))return function Bc(t){var r=[];if(null!=t)for(var a in se(t))r.push(a);return r}(t);var r=si(t),a=[];for(var d in t)"constructor"==d&&(r||!ae.call(t,d))||a.push(d);return a}(t)}var Mu=gr(function(t,r,a){rs(t,r,a)}),yd=gr(function(t,r,a,d){rs(t,r,a,d)}),Ou=qt(function(t,r){var a={};if(null==t)return a;var d=!1;r=fe(r,function(u){return u=fn(u,t),d||(d=u.length>1),u}),At(t,Oo(t),a),d&&(a=St(a,7,yc));for(var c=r.length;c--;)jo(a,r[c]);return a}),Eu=qt(function(t,r){return null==t?{}:function ac(t,r){return _l(t,r,function(a,d){return zo(t,d)})}(t,r)});function xd(t,r){if(null==t)return{};var a=fe(Oo(t),function(d){return[d]});return r=G(r),_l(t,a,function(d,c){return r(d,c[0])})}var Fd=Al(Ne),Rd=Al(ot);function br(t){return null==t?[]:zr(t,Ne(t))}var Yu=hr(function(t,r,a){return r=r.toLowerCase(),t+(a?kd(r):r)});function kd(t){return qo(le(t).toLowerCase())}function Md(t){return(t=le(t))&&t.replace(Us,Fa).replace(ia,"")}var Qu=hr(function(t,r,a){return t+(a?"-":"")+r.toLowerCase()}),Ju=hr(function(t,r,a){return t+(a?" ":"")+r.toLowerCase()}),Wu=El("toLowerCase"),ig=hr(function(t,r,a){return t+(a?"_":"")+r.toLowerCase()}),ag=hr(function(t,r,a){return t+(a?" ":"")+qo(r)}),fg=hr(function(t,r,a){return t+(a?" ":"")+r.toUpperCase()}),qo=El("toUpperCase");function Od(t,r,a){return t=le(t),(r=a?m:r)===m?function Oa(v){return oa.test(v)}(t)?function Aa(v){return v.match(sa)||[]}(t):function Ta(v){return v.match(Ns)||[]}(t):t.match(r)||[]}var wd=Q(function(t,r){try{return Ye(t,m,r)}catch(a){return Uo(a)?a:new $(a)}}),_g=qt(function(t,r){return nt(r,function(a){a=Bt(a),Yt(t,a,$o(t[a],t))}),t});function Ho(t){return function(){return t}}var Sg=Dl(),Tg=Dl(!0);function lt(t){return t}function Qo(t){return ml("function"==typeof t?t:St(t,1))}var yg=Q(function(t,r){return function(a){return ti(a,t,r)}}),xg=Q(function(t,r){return function(a){return ti(t,a,r)}});function Jo(t,r,a){var d=Ne(r),c=ns(r,d);null==a&&(!je(r)||!c.length&&d.length)&&(a=r,r=t,t=this,c=ns(r,Ne(r)));var u=!(je(a)&&"chain"in a&&!a.chain),_=Qt(t);return nt(c,function(b){var C=r[b];t[b]=C,_&&(t.prototype[b]=function(){var j=this.__chain__;if(u||j){var y=t(this.__wrapped__);return(y.__actions__=st(this.__actions__)).push({func:C,args:arguments,thisArg:t}),y.__chain__=j,y}return C.apply(t,Dt([this.value()],arguments))})}),t}function Wo(){}var kg=Ro(fe),Mg=Ro(Ai),Og=Ro($r);function Ed(t){return Do(t)?Xr(Bt(t)):function oc(t){return function(r){return Dn(r,t)}}(t)}var Eg=Gl(),Ng=Gl(!0);function Ko(){return[]}function Zo(){return!1}var $g=ls(function(t,r){return t+r},0),Xg=ko("ceil"),Ug=ls(function(t,r){return t/r},1),Pg=ko("floor"),Wg=ls(function(t,r){return t*r},1),Kg=ko("round"),Zg=ls(function(t,r){return t-r},0);return p.after=function jp(t,r){if("function"!=typeof r)throw new qe(J);return t=Y(t),function(){if(--t<1)return r.apply(this,arguments)}},p.ary=cd,p.assign=cu,p.assignIn=Id,p.assignInWith=Ss,p.assignWith=mu,p.at=pu,p.before=md,p.bind=$o,p.bindAll=_g,p.bindKey=pd,p.castArray=function Dp(){if(!arguments.length)return[];var t=arguments[0];return X(t)?t:[t]},p.chain=od,p.chunk=function Pc(t,r,a){r=(a?Qe(t,r,a):r===m)?1:xe(Y(r),0);var d=null==t?0:t.length;if(!d||r<1)return[];for(var c=0,u=0,_=S(dr(d/r));c<d;)_[u++]=Tt(t,c,c+=r);return _},p.compact=function Yc(t){for(var r=-1,a=null==t?0:t.length,d=0,c=[];++r<a;){var u=t[r];u&&(c[d++]=u)}return c},p.concat=function zc(){var t=arguments.length;if(!t)return[];for(var r=S(t-1),a=arguments[0],d=t;d--;)r[d-1]=arguments[d];return Dt(X(a)?st(a):[a],Ge(r,1))},p.cond=function bg(t){var r=null==t?0:t.length,a=G();return t=r?fe(t,function(d){if("function"!=typeof d[1])throw new qe(J);return[a(d[0]),d[1]]}):[],Q(function(d){for(var c=-1;++c<r;){var u=t[c];if(Ye(u[0],this,d))return Ye(u[1],this,d)}})},p.conforms=function vg(t){return function Pd(t){var r=Ne(t);return function(a){return rl(a,t,r)}}(St(t,1))},p.constant=Ho,p.countBy=ep,p.create=function uu(t,r){var a=un(t);return null==r?a:nl(a,r)},p.curry=function ud(t,r,a){var d=zt(t,8,m,m,m,m,m,r=a?m:r);return d.placeholder=ud.placeholder,d},p.curryRight=function gd(t,r,a){var d=zt(t,16,m,m,m,m,m,r=a?m:r);return d.placeholder=gd.placeholder,d},p.debounce=hd,p.defaults=gu,p.defaultsDeep=hu,p.defer=Ip,p.delay=yp,p.difference=qc,p.differenceBy=Hc,p.differenceWith=Qc,p.drop=function Jc(t,r,a){var d=null==t?0:t.length;return d?Tt(t,(r=a||r===m?1:Y(r))<0?0:r,d):[]},p.dropRight=function Wc(t,r,a){var d=null==t?0:t.length;return d?Tt(t,0,(r=d-(r=a||r===m?1:Y(r)))<0?0:r):[]},p.dropRightWhile=function Kc(t,r){return t&&t.length?ss(t,G(r,3),!0,!0):[]},p.dropWhile=function Zc(t,r){return t&&t.length?ss(t,G(r,3),!0):[]},p.fill=function em(t,r,a,d){var c=null==t?0:t.length;return c?(a&&"number"!=typeof a&&Qe(t,r,a)&&(a=0,d=c),function zd(t,r,a,d){var c=t.length;for((a=Y(a))<0&&(a=-a>c?0:c+a),(d=d===m||d>c?c:Y(d))<0&&(d+=c),d=a>d?0:Td(d);a<d;)t[a++]=r;return t}(t,r,a,d)):[]},p.filter=function np(t,r){return(X(t)?Nt:al)(t,G(r,3))},p.flatMap=function sp(t,r){return Ge(hs(t,r),1)},p.flatMapDeep=function ap(t,r){return Ge(hs(t,r),pe)},p.flatMapDepth=function op(t,r,a){return a=a===m?1:Y(a),Ge(hs(t,r),a)},p.flatten=rd,p.flattenDeep=function tm(t){return null!=t&&t.length?Ge(t,pe):[]},p.flattenDepth=function nm(t,r){return null!=t&&t.length?Ge(t,r=r===m?1:Y(r)):[]},p.flip=function xp(t){return zt(t,512)},p.flow=Sg,p.flowRight=Tg,p.fromPairs=function rm(t){for(var r=-1,a=null==t?0:t.length,d={};++r<a;){var c=t[r];d[c[0]]=c[1]}return d},p.functions=function Tu(t){return null==t?[]:ns(t,Ne(t))},p.functionsIn=function ju(t){return null==t?[]:ns(t,ot(t))},p.groupBy=lp,p.initial=function sm(t){return null!=t&&t.length?Tt(t,0,-1):[]},p.intersection=am,p.intersectionBy=om,p.intersectionWith=lm,p.invert=yu,p.invertBy=xu,p.invokeMap=cp,p.iteratee=Qo,p.keyBy=mp,p.keys=Ne,p.keysIn=ot,p.map=hs,p.mapKeys=function Ru(t,r){var a={};return r=G(r,3),Vt(t,function(d,c,u){Yt(a,r(d,c,u),d)}),a},p.mapValues=function ku(t,r){var a={};return r=G(r,3),Vt(t,function(d,c,u){Yt(a,c,r(d,c,u))}),a},p.matches=function jg(t){return ul(St(t,1))},p.matchesProperty=function Ig(t,r){return gl(t,St(r,1))},p.memoize=_s,p.merge=Mu,p.mergeWith=yd,p.method=yg,p.methodOf=xg,p.mixin=Jo,p.negate=bs,p.nthArg=function Rg(t){return t=Y(t),Q(function(r){return hl(r,t)})},p.omit=Ou,p.omitBy=function wu(t,r){return xd(t,bs(G(r)))},p.once=function Fp(t){return md(2,t)},p.orderBy=function pp(t,r,a,d){return null==t?[]:(X(r)||(r=null==r?[]:[r]),X(a=d?m:a)||(a=null==a?[]:[a]),fl(t,r,a))},p.over=kg,p.overArgs=Rp,p.overEvery=Mg,p.overSome=Og,p.partial=Xo,p.partialRight=fd,p.partition=up,p.pick=Eu,p.pickBy=xd,p.property=Ed,p.propertyOf=function wg(t){return function(r){return null==t?m:Dn(t,r)}},p.pull=pm,p.pullAll=sd,p.pullAllBy=function um(t,r,a){return t&&t.length&&r&&r.length?vo(t,r,G(a,2)):t},p.pullAllWith=function gm(t,r,a){return t&&t.length&&r&&r.length?vo(t,r,m,a):t},p.pullAt=hm,p.range=Eg,p.rangeRight=Ng,p.rearg=kp,p.reject=function fp(t,r){return(X(t)?Nt:al)(t,bs(G(r,3)))},p.remove=function fm(t,r){var a=[];if(!t||!t.length)return a;var d=-1,c=[],u=t.length;for(r=G(r,3);++d<u;){var _=t[d];r(_,d,t)&&(a.push(_),c.push(d))}return bl(t,c),a},p.rest=function Mp(t,r){if("function"!=typeof t)throw new qe(J);return Q(t,r=r===m?r:Y(r))},p.reverse=Ao,p.sampleSize=function bp(t,r,a){return r=(a?Qe(t,r,a):r===m)?1:Y(r),(X(t)?Bd:cc)(t,r)},p.set=function Du(t,r,a){return null==t?t:ri(t,r,a)},p.setWith=function Lu(t,r,a,d){return d="function"==typeof d?d:m,null==t?t:ri(t,r,a,d)},p.shuffle=function vp(t){return(X(t)?$d:pc)(t)},p.slice=function _m(t,r,a){var d=null==t?0:t.length;return d?(a&&"number"!=typeof a&&Qe(t,r,a)?(r=0,a=d):(r=null==r?0:Y(r),a=a===m?d:Y(a)),Tt(t,r,a)):[]},p.sortBy=Tp,p.sortedUniq=function Im(t){return t&&t.length?Cl(t):[]},p.sortedUniqBy=function ym(t,r){return t&&t.length?Cl(t,G(r,2)):[]},p.split=function sg(t,r,a){return a&&"number"!=typeof a&&Qe(t,r,a)&&(r=a=m),(a=a===m?Ke:a>>>0)?(t=le(t))&&("string"==typeof r||null!=r&&!Po(r))&&!(r=_t(r))&&ln(t)?_n(gt(t),0,a):t.split(r,a):[]},p.spread=function Op(t,r){if("function"!=typeof t)throw new qe(J);return r=null==r?0:xe(Y(r),0),Q(function(a){var d=a[r],c=_n(a,0,r);return d&&Dt(c,d),Ye(t,this,c)})},p.tail=function xm(t){var r=null==t?0:t.length;return r?Tt(t,1,r):[]},p.take=function Fm(t,r,a){return t&&t.length?Tt(t,0,(r=a||r===m?1:Y(r))<0?0:r):[]},p.takeRight=function Rm(t,r,a){var d=null==t?0:t.length;return d?Tt(t,(r=d-(r=a||r===m?1:Y(r)))<0?0:r,d):[]},p.takeRightWhile=function km(t,r){return t&&t.length?ss(t,G(r,3),!1,!0):[]},p.takeWhile=function Mm(t,r){return t&&t.length?ss(t,G(r,3)):[]},p.tap=function Ym(t,r){return r(t),t},p.throttle=function wp(t,r,a){var d=!0,c=!0;if("function"!=typeof t)throw new qe(J);return je(a)&&(d="leading"in a?!!a.leading:d,c="trailing"in a?!!a.trailing:c),hd(t,r,{leading:d,maxWait:r,trailing:c})},p.thru=gs,p.toArray=Sd,p.toPairs=Fd,p.toPairsIn=Rd,p.toPath=function Ag(t){return X(t)?fe(t,Bt):bt(t)?[t]:st(Zl(le(t)))},p.toPlainObject=jd,p.transform=function Gu(t,r,a){var d=X(t),c=d||bn(t)||_r(t);if(r=G(r,4),null==a){var u=t&&t.constructor;a=c?d?new u:[]:je(t)&&Qt(u)?un(ar(t)):{}}return(c?nt:Vt)(t,function(_,b,C){return r(a,_,b,C)}),a},p.unary=function Ep(t){return cd(t,1)},p.union=Om,p.unionBy=wm,p.unionWith=Em,p.uniq=function Nm(t){return t&&t.length?hn(t):[]},p.uniqBy=function Dm(t,r){return t&&t.length?hn(t,G(r,2)):[]},p.uniqWith=function Lm(t,r){return r="function"==typeof r?r:m,t&&t.length?hn(t,m,r):[]},p.unset=function Vu(t,r){return null==t||jo(t,r)},p.unzip=Bo,p.unzipWith=ad,p.update=function Au(t,r,a){return null==t?t:Tl(t,r,xo(a))},p.updateWith=function Bu(t,r,a,d){return d="function"==typeof d?d:m,null==t?t:Tl(t,r,xo(a),d)},p.values=br,p.valuesIn=function $u(t){return null==t?[]:zr(t,ot(t))},p.without=Gm,p.words=Od,p.wrap=function Np(t,r){return Xo(xo(r),t)},p.xor=Vm,p.xorBy=Am,p.xorWith=Bm,p.zip=$m,p.zipObject=function Xm(t,r){return Il(t||[],r||[],Zr)},p.zipObjectDeep=function Um(t,r){return Il(t||[],r||[],ri)},p.zipWith=Pm,p.entries=Fd,p.entriesIn=Rd,p.extend=Id,p.extendWith=Ss,Jo(p,p),p.add=$g,p.attempt=wd,p.camelCase=Yu,p.capitalize=kd,p.ceil=Xg,p.clamp=function Xu(t,r,a){return a===m&&(a=r,r=m),a!==m&&(a=(a=It(a))==a?a:0),r!==m&&(r=(r=It(r))==r?r:0),Nn(It(t),r,a)},p.clone=function Lp(t){return St(t,4)},p.cloneDeep=function Vp(t){return St(t,5)},p.cloneDeepWith=function Ap(t,r){return St(t,5,r="function"==typeof r?r:m)},p.cloneWith=function Gp(t,r){return St(t,4,r="function"==typeof r?r:m)},p.conformsTo=function Bp(t,r){return null==r||rl(t,r,Ne(r))},p.deburr=Md,p.defaultTo=function Cg(t,r){return null==t||t!=t?r:t},p.divide=Ug,p.endsWith=function zu(t,r,a){t=le(t),r=_t(r);var d=t.length,c=a=a===m?d:Nn(Y(a),0,d);return(a-=r.length)>=0&&t.slice(a,c)==r},p.eq=Ot,p.escape=function qu(t){return(t=le(t))&&Mr.test(t)?t.replace(pi,Ra):t},p.escapeRegExp=function Hu(t){return(t=le(t))&&tt.test(t)?t.replace($e,"\\$&"):t},p.every=function tp(t,r,a){var d=X(t)?Ai:Yd;return a&&Qe(t,r,a)&&(r=m),d(t,G(r,3))},p.find=rp,p.findIndex=td,p.findKey=function fu(t,r){return Bi(t,G(r,3),Vt)},p.findLast=ip,p.findLastIndex=nd,p.findLastKey=function _u(t,r){return Bi(t,G(r,3),uo)},p.floor=Pg,p.forEach=ld,p.forEachRight=dd,p.forIn=function bu(t,r){return null==t?t:po(t,G(r,3),ot)},p.forInRight=function vu(t,r){return null==t?t:ol(t,G(r,3),ot)},p.forOwn=function Cu(t,r){return t&&Vt(t,G(r,3))},p.forOwnRight=function Su(t,r){return t&&uo(t,G(r,3))},p.get=Yo,p.gt=$p,p.gte=Xp,p.has=function Iu(t,r){return null!=t&&Pl(t,r,qd)},p.hasIn=zo,p.head=id,p.identity=lt,p.includes=function dp(t,r,a,d){t=at(t)?t:br(t),a=a&&!d?Y(a):0;var c=t.length;return a<0&&(a=xe(c+a,0)),Cs(t)?a<=c&&t.indexOf(r,a)>-1:!!c&&on(t,r,a)>-1},p.indexOf=function im(t,r,a){var d=null==t?0:t.length;if(!d)return-1;var c=null==a?0:Y(a);return c<0&&(c=xe(d+c,0)),on(t,r,c)},p.inRange=function Uu(t,r,a){return r=Jt(r),a===m?(a=r,r=0):a=Jt(a),function Qd(t,r,a){return t>=Ee(r,a)&&t<xe(r,a)}(t=It(t),r,a)},p.invoke=Fu,p.isArguments=Vn,p.isArray=X,p.isArrayBuffer=Up,p.isArrayLike=at,p.isArrayLikeObject=Fe,p.isBoolean=function Pp(t){return!0===t||!1===t||Ie(t)&&He(t)==vn},p.isBuffer=bn,p.isDate=Yp,p.isElement=function zp(t){return Ie(t)&&1===t.nodeType&&!oi(t)},p.isEmpty=function qp(t){if(null==t)return!0;if(at(t)&&(X(t)||"string"==typeof t||"function"==typeof t.splice||bn(t)||_r(t)||Vn(t)))return!t.length;var r=Xe(t);if(r==mt||r==pt)return!t.size;if(si(t))return!_o(t).length;for(var a in t)if(ae.call(t,a))return!1;return!0},p.isEqual=function Hp(t,r){return ni(t,r)},p.isEqualWith=function Qp(t,r,a){var d=(a="function"==typeof a?a:m)?a(t,r):m;return d===m?ni(t,r,m,a):!!d},p.isError=Uo,p.isFinite=function Jp(t){return"number"==typeof t&&Wi(t)},p.isFunction=Qt,p.isInteger=_d,p.isLength=vs,p.isMap=bd,p.isMatch=function Wp(t,r){return t===r||fo(t,r,Eo(r))},p.isMatchWith=function Kp(t,r,a){return a="function"==typeof a?a:m,fo(t,r,Eo(r),a)},p.isNaN=function Zp(t){return vd(t)&&t!=+t},p.isNative=function eu(t){if(Gc(t))throw new $("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return cl(t)},p.isNil=function nu(t){return null==t},p.isNull=function tu(t){return null===t},p.isNumber=vd,p.isObject=je,p.isObjectLike=Ie,p.isPlainObject=oi,p.isRegExp=Po,p.isSafeInteger=function ru(t){return _d(t)&&t>=-Se&&t<=Se},p.isSet=Cd,p.isString=Cs,p.isSymbol=bt,p.isTypedArray=_r,p.isUndefined=function iu(t){return t===m},p.isWeakMap=function su(t){return Ie(t)&&Xe(t)==jn},p.isWeakSet=function au(t){return Ie(t)&&"[object WeakSet]"==He(t)},p.join=function dm(t,r){return null==t?"":Wa.call(t,r)},p.kebabCase=Qu,p.last=jt,p.lastIndexOf=function cm(t,r,a){var d=null==t?0:t.length;if(!d)return-1;var c=d;return a!==m&&(c=(c=Y(a))<0?xe(d+c,0):Ee(c,d-1)),r==r?function Da(v,T,S){for(var E=S+1;E--;)if(v[E]===T)return E;return E}(t,r,c):Jn(t,$i,c,!0)},p.lowerCase=Ju,p.lowerFirst=Wu,p.lt=ou,p.lte=lu,p.max=function Yg(t){return t&&t.length?ts(t,lt,go):m},p.maxBy=function zg(t,r){return t&&t.length?ts(t,G(r,2),go):m},p.mean=function qg(t){return Xi(t,lt)},p.meanBy=function Hg(t,r){return Xi(t,G(r,2))},p.min=function Qg(t){return t&&t.length?ts(t,lt,bo):m},p.minBy=function Jg(t,r){return t&&t.length?ts(t,G(r,2),bo):m},p.stubArray=Ko,p.stubFalse=Zo,p.stubObject=function Dg(){return{}},p.stubString=function Lg(){return""},p.stubTrue=function Gg(){return!0},p.multiply=Wg,p.nth=function mm(t,r){return t&&t.length?hl(t,Y(r)):m},p.noConflict=function Fg(){return Me._===this&&(Me._=Ya),this},p.noop=Wo,p.now=fs,p.pad=function Ku(t,r,a){t=le(t);var d=(r=Y(r))?dn(t):0;if(!r||d>=r)return t;var c=(r-d)/2;return ds(cr(c),a)+t+ds(dr(c),a)},p.padEnd=function Zu(t,r,a){t=le(t);var d=(r=Y(r))?dn(t):0;return r&&d<r?t+ds(r-d,a):t},p.padStart=function eg(t,r,a){t=le(t);var d=(r=Y(r))?dn(t):0;return r&&d<r?ds(r-d,a)+t:t},p.parseInt=function tg(t,r,a){return a||null==r?r=0:r&&(r=+r),eo(le(t).replace(Pe,""),r||0)},p.random=function Pu(t,r,a){if(a&&"boolean"!=typeof a&&Qe(t,r,a)&&(r=a=m),a===m&&("boolean"==typeof r?(a=r,r=m):"boolean"==typeof t&&(a=t,t=m)),t===m&&r===m?(t=0,r=1):(t=Jt(t),r===m?(r=t,t=0):r=Jt(r)),t>r){var d=t;t=r,r=d}if(a||t%1||r%1){var c=Ki();return Ee(t+c*(r-t+ga("1e-"+((c+"").length-1))),r)}return Co(t,r)},p.reduce=function gp(t,r,a){var d=X(t)?Br:Ui,c=arguments.length<3;return d(t,G(r,4),a,c,gn)},p.reduceRight=function hp(t,r,a){var d=X(t)?va:Ui,c=arguments.length<3;return d(t,G(r,4),a,c,sl)},p.repeat=function ng(t,r,a){return r=(a?Qe(t,r,a):r===m)?1:Y(r),So(le(t),r)},p.replace=function rg(){var t=arguments,r=le(t[0]);return t.length<3?r:r.replace(t[1],t[2])},p.result=function Nu(t,r,a){var d=-1,c=(r=fn(r,t)).length;for(c||(c=1,t=m);++d<c;){var u=null==t?m:t[Bt(r[d])];u===m&&(d=c,u=a),t=Qt(u)?u.call(t):u}return t},p.round=Kg,p.runInContext=v,p.sample=function _p(t){return(X(t)?tl:dc)(t)},p.size=function Cp(t){if(null==t)return 0;if(at(t))return Cs(t)?dn(t):t.length;var r=Xe(t);return r==mt||r==pt?t.size:_o(t).length},p.snakeCase=ig,p.some=function Sp(t,r,a){var d=X(t)?$r:uc;return a&&Qe(t,r,a)&&(r=m),d(t,G(r,3))},p.sortedIndex=function bm(t,r){return is(t,r)},p.sortedIndexBy=function vm(t,r,a){return To(t,r,G(a,2))},p.sortedIndexOf=function Cm(t,r){var a=null==t?0:t.length;if(a){var d=is(t,r);if(d<a&&Ot(t[d],r))return d}return-1},p.sortedLastIndex=function Sm(t,r){return is(t,r,!0)},p.sortedLastIndexBy=function Tm(t,r,a){return To(t,r,G(a,2),!0)},p.sortedLastIndexOf=function jm(t,r){if(null!=t&&t.length){var d=is(t,r,!0)-1;if(Ot(t[d],r))return d}return-1},p.startCase=ag,p.startsWith=function og(t,r,a){return t=le(t),a=null==a?0:Nn(Y(a),0,t.length),r=_t(r),t.slice(a,a+r.length)==r},p.subtract=Zg,p.sum=function e1(t){return t&&t.length?Pr(t,lt):0},p.sumBy=function t1(t,r){return t&&t.length?Pr(t,G(r,2)):0},p.template=function lg(t,r,a){var d=p.templateSettings;a&&Qe(t,r,a)&&(r=m),t=le(t),r=Ss({},r,d,Bl);var b,C,c=Ss({},r.imports,d.imports,Bl),u=Ne(c),_=zr(c,u),j=0,y=r.interpolate||Yn,x="__p += '",O=Zn((r.escape||Yn).source+"|"+y.source+"|"+(y===gi?Gs:Yn).source+"|"+(r.evaluate||Yn).source+"|$","g"),D="//# sourceURL="+(ae.call(r,"sourceURL")?(r.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++da+"]")+"\n";t.replace(O,function(A,ee,ne,vt,Je,Ct){return ne||(ne=vt),x+=t.slice(j,Ct).replace(Ps,ka),ee&&(b=!0,x+="' +\n__e("+ee+") +\n'"),Je&&(C=!0,x+="';\n"+Je+";\n__p += '"),ne&&(x+="' +\n((__t = ("+ne+")) == null ? '' : __t) +\n'"),j=Ct+A.length,A}),x+="';\n";var V=ae.call(r,"variable")&&r.variable;if(V){if(Ds.test(V))throw new $("Invalid `variable` option passed into `_.template`")}else x="with (obj) {\n"+x+"\n}\n";x=(C?x.replace(xs,""):x).replace(Fs,"$1").replace(Rs,"$1;"),x="function("+(V||"obj")+") {\n"+(V?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(b?", __e = _.escape":"")+(C?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+x+"return __p\n}";var H=wd(function(){return re(u,D+"return "+x).apply(m,_)});if(H.source=x,Uo(H))throw H;return H},p.times=function Vg(t,r){if((t=Y(t))<1||t>Se)return[];var a=Ke,d=Ee(t,Ke);r=G(r),t-=Ke;for(var c=Yr(d,r);++a<t;)r(a);return c},p.toFinite=Jt,p.toInteger=Y,p.toLength=Td,p.toLower=function dg(t){return le(t).toLowerCase()},p.toNumber=It,p.toSafeInteger=function du(t){return t?Nn(Y(t),-Se,Se):0===t?t:0},p.toString=le,p.toUpper=function cg(t){return le(t).toUpperCase()},p.trim=function mg(t,r,a){if((t=le(t))&&(a||r===m))return Pi(t);if(!t||!(r=_t(r)))return t;var d=gt(t),c=gt(r);return _n(d,Yi(d,c),zi(d,c)+1).join("")},p.trimEnd=function pg(t,r,a){if((t=le(t))&&(a||r===m))return t.slice(0,Hi(t)+1);if(!t||!(r=_t(r)))return t;var d=gt(t);return _n(d,0,zi(d,gt(r))+1).join("")},p.trimStart=function ug(t,r,a){if((t=le(t))&&(a||r===m))return t.replace(Pe,"");if(!t||!(r=_t(r)))return t;var d=gt(t);return _n(d,Yi(d,gt(r))).join("")},p.truncate=function gg(t,r){var a=30,d="...";if(je(r)){var c="separator"in r?r.separator:c;a="length"in r?Y(r.length):a,d="omission"in r?_t(r.omission):d}var u=(t=le(t)).length;if(ln(t)){var _=gt(t);u=_.length}if(a>=u)return t;var b=a-dn(d);if(b<1)return d;var C=_?_n(_,0,b).join(""):t.slice(0,b);if(c===m)return C+d;if(_&&(b+=C.length-b),Po(c)){if(t.slice(b).search(c)){var j,y=C;for(c.global||(c=Zn(c.source,le(hi.exec(c))+"g")),c.lastIndex=0;j=c.exec(y);)var x=j.index;C=C.slice(0,x===m?b:x)}}else if(t.indexOf(_t(c),b)!=b){var O=C.lastIndexOf(c);O>-1&&(C=C.slice(0,O))}return C+d},p.unescape=function hg(t){return(t=le(t))&&ui.test(t)?t.replace(mi,La):t},p.uniqueId=function Bg(t){var r=++Ua;return le(t)+r},p.upperCase=fg,p.upperFirst=qo,p.each=ld,p.eachRight=dd,p.first=id,Jo(p,function(){var t={};return Vt(p,function(r,a){ae.call(p.prototype,a)||(t[a]=r)}),t}(),{chain:!1}),p.VERSION="4.17.21",nt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){p[t].placeholder=p}),nt(["drop","take"],function(t,r){W.prototype[t]=function(a){a=a===m?1:xe(Y(a),0);var d=this.__filtered__&&!r?new W(this):this.clone();return d.__filtered__?d.__takeCount__=Ee(a,d.__takeCount__):d.__views__.push({size:Ee(a,Ke),type:t+(d.__dir__<0?"Right":"")}),d},W.prototype[t+"Right"]=function(a){return this.reverse()[t](a).reverse()}}),nt(["filter","map","takeWhile"],function(t,r){var a=r+1,d=1==a||3==a;W.prototype[t]=function(c){var u=this.clone();return u.__iteratees__.push({iteratee:G(c,3),type:a}),u.__filtered__=u.__filtered__||d,u}}),nt(["head","last"],function(t,r){var a="take"+(r?"Right":"");W.prototype[t]=function(){return this[a](1).value()[0]}}),nt(["initial","tail"],function(t,r){var a="drop"+(r?"":"Right");W.prototype[t]=function(){return this.__filtered__?new W(this):this[a](1)}}),W.prototype.compact=function(){return this.filter(lt)},W.prototype.find=function(t){return this.filter(t).head()},W.prototype.findLast=function(t){return this.reverse().find(t)},W.prototype.invokeMap=Q(function(t,r){return"function"==typeof t?new W(this):this.map(function(a){return ti(a,t,r)})}),W.prototype.reject=function(t){return this.filter(bs(G(t)))},W.prototype.slice=function(t,r){t=Y(t);var a=this;return a.__filtered__&&(t>0||r<0)?new W(a):(t<0?a=a.takeRight(-t):t&&(a=a.drop(t)),r!==m&&(a=(r=Y(r))<0?a.dropRight(-r):a.take(r-t)),a)},W.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},W.prototype.toArray=function(){return this.take(Ke)},Vt(W.prototype,function(t,r){var a=/^(?:filter|find|map|reject)|While$/.test(r),d=/^(?:head|last)$/.test(r),c=p[d?"take"+("last"==r?"Right":""):r],u=d||/^find/.test(r);c&&(p.prototype[r]=function(){var _=this.__wrapped__,b=d?[1]:arguments,C=_ instanceof W,j=b[0],y=C||X(_),x=function(ee){var ne=c.apply(p,Dt([ee],b));return d&&O?ne[0]:ne};y&&a&&"function"==typeof j&&1!=j.length&&(C=y=!1);var O=this.__chain__,V=u&&!O,H=C&&!this.__actions__.length;if(!u&&y){_=H?_:new W(this);var A=t.apply(_,b);return A.__actions__.push({func:gs,args:[x],thisArg:m}),new rt(A,O)}return V&&H?t.apply(this,b):(A=this.thru(x),V?d?A.value()[0]:A.value():A)})}),nt(["pop","push","shift","sort","splice","unshift"],function(t){var r=er[t],a=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",d=/^(?:pop|shift)$/.test(t);p.prototype[t]=function(){var c=arguments;if(d&&!this.__chain__){var u=this.value();return r.apply(X(u)?u:[],c)}return this[a](function(_){return r.apply(X(_)?_:[],c)})}}),Vt(W.prototype,function(t,r){var a=p[r];if(a){var d=a.name+"";ae.call(pn,d)||(pn[d]=[]),pn[d].push({name:r,func:a})}}),pn[os(m,2).name]=[{name:"wrapper",func:m}],W.prototype.clone=function oo(){var t=new W(this.__wrapped__);return t.__actions__=st(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=st(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=st(this.__views__),t},W.prototype.reverse=function lo(){if(this.__filtered__){var t=new W(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},W.prototype.value=function o(){var t=this.__wrapped__.value(),r=this.__dir__,a=X(t),d=r<0,c=a?t.length:0,u=function kc(t,r,a){for(var d=-1,c=a.length;++d<c;){var u=a[d],_=u.size;switch(u.type){case"drop":t+=_;break;case"dropRight":r-=_;break;case"take":r=Ee(r,t+_);break;case"takeRight":t=xe(t,r-_)}}return{start:t,end:r}}(0,c,this.__views__),_=u.start,b=u.end,C=b-_,j=d?b:_-1,y=this.__iteratees__,x=y.length,O=0,D=Ee(C,this.__takeCount__);if(!a||!d&&c==C&&D==C)return jl(t,this.__actions__);var V=[];e:for(;C--&&O<D;){for(var H=-1,A=t[j+=r];++H<x;){var ee=y[H],vt=ee.type,Je=(0,ee.iteratee)(A);if(2==vt)A=Je;else if(!Je){if(1==vt)continue e;break e}}V[O++]=A}return V},p.prototype.at=zm,p.prototype.chain=function qm(){return od(this)},p.prototype.commit=function Hm(){return new rt(this.value(),this.__chain__)},p.prototype.next=function Qm(){this.__values__===m&&(this.__values__=Sd(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?m:this.__values__[this.__index__++]}},p.prototype.plant=function Wm(t){for(var r,a=this;a instanceof ur;){var d=ed(a);d.__index__=0,d.__values__=m,r?c.__wrapped__=d:r=d;var c=d;a=a.__wrapped__}return c.__wrapped__=t,r},p.prototype.reverse=function Km(){var t=this.__wrapped__;if(t instanceof W){var r=t;return this.__actions__.length&&(r=new W(this)),(r=r.reverse()).__actions__.push({func:gs,args:[Ao],thisArg:m}),new rt(r,this.__chain__)}return this.thru(Ao)},p.prototype.toJSON=p.prototype.valueOf=p.prototype.value=function Zm(){return jl(this.__wrapped__,this.__actions__)},p.prototype.first=p.prototype.head,kn&&(p.prototype[kn]=function Jm(){return this}),p}();Me._=Kn,(F=function(){return Kn}.call(we,I,we,dt))!==m&&(dt.exports=F)}.call(this)}}]);
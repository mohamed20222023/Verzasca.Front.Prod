"use strict";(self.webpackChunkvelzon=self.webpackChunkvelzon||[]).push([[699],{51699:(H,S,l)=>{l.r(S),l.d(S,{marketingModule:()=>st});var r=l(60177),u=l(89417),_=l(69005),y=l(91022),D=l(70255),L=l(63789),V=l(98982),E=l.n(V),X=l(53978),b=l(8147),T=l(45286),N=l(65430),I=l(41631),j=l(1530),O=l(72510),m=l(51188),g=l(56977),f=l(37021),h=l(35335),p=l(45236),C=l(70980),M=l(99437),P=l(18810),$=l(75622),x=l(36158),e=l(54438),G=l(3888),B=l(45943),Q=l(54384),W=l(84205),J=l(75922),K=l(26364),Z=l(29935);function q(o,c){1&o&&(e.j41(0,"div",73),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function ee(o,c){1&o&&(e.j41(0,"div",73),e.EFF(1," general.message.filedIdRequired"),e.k0s())}function te(o,c){1&o&&(e.j41(0,"div",73),e.EFF(1," general.message.filedIdRequired"),e.k0s())}function ne(o,c){if(1&o){const t=e.RV6();e.j41(0,"button",79),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.addProductOfferQuantity())}),e.nrm(1,"i",50),e.k0s()}}function ie(o,c){if(1&o){const t=e.RV6();e.j41(0,"button",86),e.bIt("click",function(){e.eBV(t);const n=e.XpG(3);return e.Njj(n.addProductOfferQuantity())}),e.nrm(1,"i",50),e.k0s()}}function re(o,c){if(1&o){const t=e.RV6();e.qex(0),e.j41(1,"div",75)(2,"div",47)(3,"div",80)(4,"input",81),e.mxI("ngModelChange",function(n){const a=e.eBV(t).index,d=e.XpG(2);return e.DH7(d.form.productOfferQuantities[a].quantityX,n)||(d.form.productOfferQuantities[a].quantityX=n),e.Njj(n)}),e.k0s(),e.j41(5,"span",82),e.EFF(6,"X"),e.k0s()()(),e.j41(7,"div",47)(8,"div",80)(9,"input",81),e.mxI("ngModelChange",function(n){const a=e.eBV(t).index,d=e.XpG(2);return e.DH7(d.form.productOfferQuantities[a].quantityY,n)||(d.form.productOfferQuantities[a].quantityY=n),e.Njj(n)}),e.k0s(),e.j41(10,"span",82),e.EFF(11,"Y"),e.k0s()()(),e.j41(12,"div",47)(13,"button",83),e.bIt("click",function(){const n=e.eBV(t).index,a=e.XpG(2);return e.Njj(a.deleteProductOfferQuantity(n))}),e.nrm(14,"i",84),e.k0s(),e.DNE(15,ie,2,0,"button",85),e.k0s()(),e.bVm()}if(2&o){const t=c.index,i=e.XpG(2);e.R7$(4),e.Mz_("name","itemX",t,""),e.Mz_("id","quantityX",t,""),e.R50("ngModel",i.form.productOfferQuantities[t].quantityX),e.R7$(5),e.Mz_("name","quantityY",t,""),e.Mz_("id","quantityY",t,""),e.R50("ngModel",i.form.productOfferQuantities[t].quantityY),e.R7$(6),e.Y8G("ngIf",i.form.productOfferQuantities.length-1==t)}}function oe(o,c){if(1&o&&(e.qex(0),e.j41(1,"div",41),e.nrm(2,"span",42)(3,"span",74),e.k0s(),e.j41(4,"div",75)(5,"div",47),e.nrm(6,"span",43),e.k0s(),e.j41(7,"div",47),e.nrm(8,"span",76),e.k0s(),e.j41(9,"div",47),e.DNE(10,ne,2,0,"button",77),e.k0s()(),e.DNE(11,re,16,11,"ng-container",78),e.bVm()),2&o){const t=e.XpG();e.R7$(10),e.Y8G("ngIf",t.form.productOfferQuantities.length<=0),e.R7$(),e.Y8G("ngForOf",t.form.productOfferQuantities)}}function ae(o,c){1&o&&(e.j41(0,"div",41),e.nrm(1,"span",42)(2,"span",87),e.k0s())}function se(o,c){1&o&&(e.j41(0,"div",41),e.nrm(1,"span",42)(2,"span",88),e.k0s())}function le(o,c){if(1&o){const t=e.RV6();e.j41(0,"div",22),e.nrm(1,"label",89),e.j41(2,"div",30)(3,"input",90,6),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.discountAmount,n)||(a.form.discountAmount=n),e.Njj(n)}),e.k0s(),e.j41(5,"span",82),e.EFF(6,"%"),e.k0s()()()}if(2&o){const t=e.XpG();e.R7$(3),e.R50("ngModel",t.form.discountAmount)}}function de(o,c){if(1&o){const t=e.RV6();e.j41(0,"div",22),e.nrm(1,"label",91),e.j41(2,"div",30)(3,"input",92,7),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.discountRate,n)||(a.form.discountRate=n),e.Njj(n)}),e.k0s(),e.nrm(5,"span",93),e.k0s()()}if(2&o){const t=e.XpG();e.R7$(3),e.R50("ngModel",t.form.discountRate)}}function ce(o,c){if(1&o){const t=e.RV6();e.j41(0,"div",22),e.nrm(1,"label",94),e.j41(2,"div",30)(3,"input",95,8),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.quantityX,n)||(a.form.quantityX=n),e.Njj(n)}),e.k0s()(),e.nrm(5,"label",96),e.k0s()}if(2&o){const t=e.XpG();e.R7$(3),e.R50("ngModel",t.form.quantityX)}}function me(o,c){if(1&o){const t=e.RV6();e.j41(0,"tr",97)(1,"td",98),e.EFF(2),e.k0s(),e.j41(3,"td",98),e.EFF(4),e.k0s(),e.j41(5,"td",98),e.EFF(6),e.k0s(),e.j41(7,"td",98)(8,"button",99),e.bIt("click",function(){const n=e.eBV(t).index,a=e.XpG();return e.Njj(a.onDelete(a.typeX,n))}),e.nrm(9,"i",84),e.k0s()()()}if(2&o){const t=c.$implicit,i=c.index;e.R7$(2),e.JRh(i+1),e.R7$(2),e.JRh(t.serviceCategoryName),e.R7$(2),e.JRh(t.serviceName)}}function fe(o,c){1&o&&(e.j41(0,"tr")(1,"td",100)(2,"div",101),e.EFF(3," general.table.noData "),e.k0s()()())}function pe(o,c){if(1&o){const t=e.RV6();e.j41(0,"div",22),e.nrm(1,"label",94),e.j41(2,"div",30)(3,"input",103,9),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG(2);return e.DH7(a.form.quantityY,n)||(a.form.quantityY=n),e.Njj(n)}),e.k0s()(),e.nrm(5,"label",96),e.k0s()}if(2&o){const t=e.XpG(2);e.R7$(3),e.R50("ngModel",t.form.quantityY)}}function ue(o,c){if(1&o){const t=e.RV6();e.j41(0,"div",21)(1,"div",41),e.nrm(2,"span",42)(3,"span",102),e.k0s(),e.j41(4,"div",39)(5,"div",22),e.nrm(6,"label",89),e.j41(7,"div",30)(8,"input",90,6),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.discountAmount,n)||(a.form.discountAmount=n),e.Njj(n)}),e.k0s(),e.j41(10,"span",82),e.EFF(11,"%"),e.k0s()()()(),e.DNE(12,pe,6,1,"div",40),e.k0s()}if(2&o){const t=e.XpG();e.R7$(8),e.R50("ngModel",t.form.discountAmount),e.R7$(4),e.Y8G("ngIf",1==t.form.offerType)}}function ge(o,c){if(1&o){const t=e.RV6();e.j41(0,"tr",97)(1,"td",98),e.EFF(2),e.k0s(),e.j41(3,"td",98),e.EFF(4),e.k0s(),e.j41(5,"td",98),e.EFF(6),e.k0s(),e.j41(7,"td",98)(8,"button",99),e.bIt("click",function(){const n=e.eBV(t).index,a=e.XpG(2);return e.Njj(a.onDelete(a.typeY,n))}),e.nrm(9,"i",84),e.k0s()()()}if(2&o){const t=c.$implicit,i=c.index;e.R7$(2),e.JRh(i+1),e.R7$(2),e.JRh(t.serviceCategoryName),e.R7$(2),e.JRh(t.serviceName)}}function _e(o,c){1&o&&(e.j41(0,"tr")(1,"td",100)(2,"div",101),e.EFF(3," general.table.noData "),e.k0s()()())}function he(o,c){if(1&o){const t=e.RV6();e.j41(0,"div")(1,"div",41),e.nrm(2,"span",42)(3,"span",76),e.k0s(),e.j41(4,"div",44)(5,"div",45),e.nrm(6,"label",46),e.j41(7,"ng-select",104,10),e.bIt("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.onCategoryChange(a.typeY,n))}),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.categoryIdY,n)||(a.form.categoryIdY=n),e.Njj(n)}),e.k0s()(),e.j41(9,"div",47),e.nrm(10,"label",48),e.j41(11,"button",49),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.addCategory(n.typeY))}),e.nrm(12,"i",50)(13,"span",51),e.k0s()(),e.j41(14,"div",45),e.nrm(15,"label",52),e.j41(16,"ng-select",105,11),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.servicesY,n)||(a.form.servicesY=n),e.Njj(n)}),e.k0s()(),e.j41(18,"div",47),e.nrm(19,"label",48),e.j41(20,"button",54),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.addService(n.typeY))}),e.nrm(21,"i",50)(22,"span",51),e.k0s()()(),e.j41(23,"div",55)(24,"div",56)(25,"table",57)(26,"thead",58)(27,"tr")(28,"th",59),e.EFF(29,"#"),e.k0s(),e.nrm(30,"th",60)(31,"th",61)(32,"th",62),e.k0s()(),e.j41(33,"tbody"),e.DNE(34,ge,10,3,"tr",63)(35,_e,4,0,"tr",37),e.k0s()()()()()}if(2&o){const t=e.XpG();e.R7$(7),e.Y8G("items",t.categories),e.R50("ngModel",t.form.categoryIdY),e.R7$(9),e.Y8G("items",t.servicesFilterY),e.R50("ngModel",t.form.servicesY),e.R7$(18),e.Y8G("ngForOf",t.form.productOfferServicesY),e.R7$(),e.Y8G("ngIf",t.form.productOfferServicesY.length<=0)}}function ve(o,c){if(1&o){const t=e.RV6();e.j41(0,"div",22),e.nrm(1,"label",89),e.j41(2,"div",30)(3,"input",111,13),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG(2);return e.DH7(a.form.minPurchaseAmount,n)||(a.form.minPurchaseAmount=n),e.Njj(n)}),e.k0s(),e.nrm(5,"span",93),e.k0s()()}if(2&o){const t=e.XpG(2);e.R7$(3),e.R50("ngModel",t.form.minPurchaseAmount)}}function be(o,c){if(1&o){const t=e.RV6();e.j41(0,"div",112),e.nrm(1,"label",48),e.j41(2,"div",30)(3,"input",113,14),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG(2);return e.DH7(a.form.minPurchaseQuantity,n)||(a.form.minPurchaseQuantity=n),e.Njj(n)}),e.k0s()()()}if(2&o){const t=e.XpG(2);e.R7$(3),e.R50("ngModel",t.form.minPurchaseQuantity)}}function ye(o,c){if(1&o){const t=e.RV6();e.j41(0,"div",106)(1,"div",41),e.nrm(2,"span",42)(3,"span",107),e.k0s(),e.j41(4,"div",39)(5,"div",22),e.nrm(6,"label",108),e.j41(7,"ng-select",109,12),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.paymentTypeCode,n)||(a.form.paymentTypeCode=n),e.Njj(n)}),e.k0s()(),e.DNE(9,ve,6,1,"div",40)(10,be,5,1,"div",110),e.k0s()()}if(2&o){const t=e.XpG();e.R7$(7),e.Y8G("items",t.typePayment),e.R50("ngModel",t.form.paymentTypeCode),e.R7$(2),e.Y8G("ngIf",1==t.form.paymentTypeCode),e.R7$(),e.Y8G("ngIf",2==t.form.paymentTypeCode)}}function Ce(o,c){if(1&o){const t=e.RV6();e.j41(0,"button",114),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.OnSubmit())}),e.k0s()}if(2&o){e.XpG();const t=e.sdS(9);e.Y8G("disabled",!t.valid)}}function xe(o,c){1&o&&(e.j41(0,"button",115)(1,"span",116)(2,"span",117),e.nrm(3,"span",118),e.k0s(),e.nrm(4,"span",119),e.k0s()())}let A=(()=>{class o extends $.w{constructor(t,i,n,a,d,s,R,w,F,v,k){super(t,i,R,d,n,a,s),this.baseService=d,this.service=w,this.clientGroupsService=F,this.clientService=v,this.router=k,this.editPaln="marketing.productOffer.editOffer",this.addPlan="marketing.productOffer.addOffer",this.titleOperation="marketing.productOffer.titleOperation",this.submitted=!1,this.pagination={pageNumber:1,pageSize:1e3},this.formMaster={id:0,visits:[]},this.listId=0,this.clients=[],this.formClient={},this.offerTypes=[{id:6,name:"StepwisePurchasePromotionsQuantity"},{id:1,name:"BuyXGetYFree"},{id:2,name:"FixedAmountDiscount"},{id:3,name:"PercentageDiscount"}],this.typePayment=[{id:1,name:"limitLessBuy"},{id:2,name:"limitLessQuantity"}],this.categories=[],this.services=[],this.servicesFilterX=[],this.servicesFilterY=[],this.form={productOfferServicesX:[],productOfferServicesY:[],productOfferQuantities:[{quantityX:1,quantityY:1,id:0}]},this.typeX="x",this.typeY="y",this.showTable=!1,this.selectedServices=[],this.ngxLoader.startLoader(x.ZW)}ngOnInitMore(){this.listId=this.routerActive.snapshot.paramMap.get("id"),this.configRoute(),this.breadCrumbItems=[{label:"layout.sidebar.marketing"},{label:"marketing.productOffer.title",active:!0,url:"/marketing/productOffers"},{label:this.isEditForm?"general.action.edit":"general.action.register",active:!0}],this.configTypes(),this.GetLookups()}configTypes(){this.offerTypes.forEach(t=>{t.name=this.getTranslationText("marketing.productOffer."+t.name)}),this.typePayment.forEach(t=>{t.name=this.getTranslationText("marketing.productOffer."+t.name)})}GetLookups(){this.baseService.GetLookups().pipe((0,g.Q)(this.notifier)).subscribe(t=>{t.success?(this.categories=t.data.categories,this.servicesFilterY=this.servicesFilterX=this.services=t.data.services):this.alertService.error("general.message."+t.message)},t=>{this.alertService.error()})}GetById(){this.baseService.getById(this.listId).pipe((0,g.Q)(this.notifier)).subscribe(t=>{t.success?(this.isEditForm=!0,this.formMaster=t.data):this.alertService.error("general.message."+t.message)},t=>{this.alertService.error()})}back(){this.router.navigate(["/marketing/productOffers"])}mapForm(t){let i=structuredClone(t);return i.startDate=this.datePipe.transform(i.startDate,"yyyy-MM-ddT00:00:00.000"),i.endDate=this.datePipe.transform(i.endDate,"yyyy-MM-ddT00:00:00.000"),i.productOfferServices=[...i.productOfferServicesX,...i.productOfferServicesY],delete i.productOfferServicesX,delete i.productOfferServicesY,delete i.offerServices,i}mapRegisterForm(t){let i=structuredClone(t);return i.startDate=this.datePipe.transform(i.startDate,"yyyy-MM-ddT00:00:00.000"),i.endDate=this.datePipe.transform(i.endDate,"yyyy-MM-ddT00:00:00.000"),i.productOfferServices=[...i.productOfferServicesX,...i.productOfferServicesY],delete i.productOfferServicesX,delete i.productOfferServicesY,i}OnSubmit(){this.validForm()&&(this.loader=!0,!0===this.isEditForm?this.editEntity():this.registerEntity())}validForm(){return 1==this.form.offerType?!!(this.form.productOfferServicesX.length>0&&this.form.productOfferServicesY.length)||(this.alertService.error("marketing.productOffer.mustEnterServiceXAnDServiceY"),!1):2!=this.form.offerType&&3!=this.form.offerType||this.form.productOfferServicesX.length>0||(this.alertService.error("marketing.productOffer.mustEnterServiceX"),!1)}submitFunished(){this.alertService.success(),this.ngxLoader.stop(x.a7),this.ngxLoader.stop(x.ZW),this.btnDisabled=!0}registerEntity(){this.ngxLoader.startLoader(x.ZW);let t=this.mapRegisterForm(this.form);this.baseService.register(t).pipe((0,f.O)(),(0,h.c)(this.mainDelay),(0,p.Z)(),(0,g.Q)(this.notifier),(0,C.j)(()=>this.loader=!1),(0,M.W)(i=>(0,P.$)(i))).subscribe(i=>{i.success?(this.alertService.success(),this.back()):this.alertService.error("general.message."+i.message)},i=>{this.alertService.error("general.message."+i)})}editEntity(){let t=this.mapForm({...this.form});this.baseService.editPut(t.id,t).pipe((0,f.O)(),(0,h.c)(this.mainDelay),(0,p.Z)(),(0,g.Q)(this.notifier),(0,C.j)(()=>this.loader=!1)).subscribe(i=>{i.success?this.alertService.success():this.alertService.error("general.message."+i.message)},i=>{this.alertService.error("general.message."+i)})}goList(t){this.router.navigateByUrl("/sales/visit-plans/")}controlDateFormat(t){"dateFrom"===t?this.form[t]=this.datePipe.transform(this.form[t],"yyyy-MM-ddT00:00:00"):"dateTo"===t&&(this.form[t]=this.datePipe.transform(this.form[t],"yyyy-MM-ddT23:59:59.999"))}configRoute(){this.routerActive.data.pipe((0,g.Q)(this.notifier)).subscribe(t=>{if(t.data?.success){this.isEditForm=!0;let i=t.data.data;i.productOfferServicesX=i.offerServices.filter(n=>1==n.serviceType),i.productOfferServicesY=i.offerServices.filter(n=>2==n.serviceType),this.form=i}},()=>{this.alertService.error()})}onDelete(t,i){"x"==t?this.form.productOfferServicesX.splice(i,1):this.form.productOfferServicesY.splice(i,1)}onCategoryChange(t,i){"x"==t?this.servicesFilterX=this.services.filter(n=>n.categoryId==i):this.servicesFilterY=this.services.filter(n=>n.categoryId==i)}addCategory(t){"x"==t?(this.servicesFilterX=this.services.filter(i=>i.categoryId==this.form.categoryIdX),this.addServices(t,this.servicesFilterX)):(this.servicesFilterY=this.services.filter(i=>i.categoryId==this.form.categoryIdY),this.addServices(t,this.servicesFilterY))}addService(t){if("x"==t){let i=this.services.filter(n=>n.id==this.form.servicesX);this.addServices(t,[...i])}else{let i=this.services.filter(n=>n.id==this.form.servicesY);this.addServices(t,[...i])}}addServices(t,i){i.forEach(n=>{"x"===t?this.form.productOfferServicesX.find(d=>d.serviceId==n.id)||this.form.productOfferServicesX.push({id:0,productOfferId:0,serviceType:1,serviceId:n.id,serviceName:n.name,serviceCategoryName:n.serviceCategoryName}):this.form.productOfferServicesY.find(d=>d.serviceId==n.id)||this.form.productOfferServicesY.push({id:0,productOfferId:0,serviceType:2,serviceId:n.id,serviceName:n.name,serviceCategoryName:n.serviceCategoryName})})}addProductOfferQuantity(){this.form.productOfferQuantities.push({quantityX:1,quantityY:1,productOfferId:0,id:0})}deleteProductOfferQuantity(t){this.form.productOfferQuantities.splice(t,1)}static{this.\u0275fac=function(i){return new(i||o)(e.rXU(m.nX),e.rXU(b.c$),e.rXU(G.u),e.rXU(r.vh),e.rXU(B.L),e.rXU(j.eD),e.rXU(_.Bq),e.rXU(Q.m),e.rXU(W.t),e.rXU(J.X),e.rXU(m.Ix))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["product-offer"]],features:[e.Vt3],decls:102,vars:43,consts:[["formEntity","ngForm"],["offerType","ngModel"],["title","ngModel"],["startDate","ngModel"],["endDate","ngModel"],["servicesX","ngModel"],["discountAmount","ngModel"],["discountRate","ngModel"],["quantityX","ngModel"],["quantityY","ngModel"],["categoryIdY","ngModel"],["servicesY","ngModel"],["paymentTypeCode","ngModel"],["minPurchaseAmount","ngModel"],["minPurchaseQuantity","ngModel"],[3,"title","breadcrumbItems"],[1,"row"],[1,"card","grid"],[1,"modal-header","p-0"],[1,"fs-3"],["translate","marketing.productOffer.displayData",1,"badge","rounded-pill","bg-primary"],[1,"card-body"],[1,"col-12","col-md-3"],["translate","marketing.productOffer.offerType",1,"fw-bold","form-label","w-100"],["clearable","true","clearable","false","clearOnBackspace","false","name","offerType","bindValue","id","bindLabel","name",2,"width","100%",3,"ngModelChange","items","ngModel"],["for","title","translate","marketing.productOffer.offerTitle",1,"required","fw-bold","form-label"],["InputTirmFilter","","name","title","type","text","id","name","required","",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],[1,"col-12","col-md-2","mb-3"],["for","startDate","translate","marketing.productOffer.startDate",1,"fw-bold","form-label","required"],[1,"input-group"],["type","text","mwlFlatpickr","","name","startDate","id","startDate","altFormat","d/m/Y","required","",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],["for","endDate","translate","marketing.productOffer.endDate",1,"fw-bold","form-label","required"],["type","text","mwlFlatpickr","","name","endDate","id","dateFrom","altFormat","d/m/Y","required","",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],["for","isActive","translate","marketing.productOffer.isActive",1,"fw-bold","form-label","d-block"],["id","isActive","name","isActive","inputId","isActive",3,"ngModelChange","ngModel"],["translate","marketing.productOffer.offerSetting",1,"badge","rounded-pill","bg-primary"],[4,"ngIf"],["class","mt-1",4,"ngIf"],[1,"row","mt-3"],["class","col-12  col-md-3",4,"ngIf"],[1,"mt-1"],[1,"ri-checkbox-multiple-fill","text-primary","mx-2"],["translate","marketing.productOffer.quantityX",1,"fs-5","fw-bold"],[1,"row","my-1","justify-content-center","align-items-center"],[1,"col-12","col-md-4"],["translate","marketing.productOffer.category",1,"fw-bold","form-label","w-100"],[1,"col-12","col-md-2"],[1,"fw-bold","form-label","w-100"],["href","javascript:void(0);",1,"btn","btn-primary","mt-1",3,"click"],[1,"ri-checkbox-circle-fill","align-bottom"],["translate","general.action.add"],["translate","marketing.productOffer.services",1,"fw-bold","form-label","w-100"],["clearable","true","clearable","false","clearOnBackspace","false","name","servicesFilterX","bindValue","id","bindLabel","name",2,"width","100%",3,"ngModelChange","items","ngModel"],["href","javascript:void(0);",1,"btn","btn-success","mt-1",3,"click"],[1,"col-12","col-md-10"],[1,"table-responsive"],[1,"table","table-border","table-centered","align-middle","table-nowrap","mb-0"],[1,"text-muted","table-light"],["scope","col","translate",""],["scope","col","translate","marketing.productOffer.categoryName"],["scope","col","translate","marketing.productOffer.serviceName"],["scope","col"],["class","fs-5",4,"ngFor","ngForOf"],["class","card-body",4,"ngIf"],["class","row mt-4",4,"ngIf"],[1,"row","justify-content-center","py-2"],[1,"text-center","text-danger","text-bold","fs-6","col-2"],[1,"text-end","mb-3"],["type","submit","class","btn btn-success w-md btn-load","translate","general.action.save",3,"disabled","click",4,"ngIf"],["type","button","class","btn btn-success w-sm btn-load",4,"ngIf"],[1,"btn","btn-dark",3,"click"],[1,"ri-check-double-fill","align-bottom"],["translate","",1,"text-danger","text-center"],["translate","marketing.productOffer.putStepwiseQuantity",1,"fs-5","fw-bold"],[1,"row","mt-2"],["translate","marketing.productOffer.quantityY",1,"fs-5","fw-bold"],["class","btn btn-md   btn-soft-success  mt-1","href","javascript:void(0);",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],["href","javascript:void(0);",1,"btn","btn-md","btn-soft-success","mt-1",3,"click"],[1,"input-group","col-12","col-md-2"],["min","0","type","number",1,"form-control","fs-6",3,"ngModelChange","name","ngModel","id"],["id","basic-addon2",1,"input-group-text"],[1,"btn","mx-1","btn-sm","btn-soft-danger","remove-list",3,"click"],[1,"ri-delete-bin-5-fill","align-bottom"],["class","btn btn-sm   btn-soft-success  mt-1","href","javascript:void(0);",3,"click",4,"ngIf"],["href","javascript:void(0);",1,"btn","btn-sm","btn-soft-success","mt-1",3,"click"],["translate","marketing.productOffer.putPercentageDiscount",1,"fs-5","fw-bold"],["translate","marketing.productOffer.buyQuantity",1,"fs-5","fw-bold"],["translate","marketing.productOffer.discountValue",1,"fw-bold","form-label","w-100"],["name","discountAmount","type","number","id","name",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["translate","marketing.productOffer.maxDiscountValue",1,"fw-bold","form-label","w-100"],["name","discountRate","type","number","id","name",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["id","basic-addon2","translate","orderManagement.order.currancy",1,"input-group-text"],["translate","marketing.productOffer.qauntity",1,"text-danger","fw-bold","form-label","w-100"],["name","quantityX","type","number","id","quantityX",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["translate","marketing.productOffer.formServices",1,"text-danger","fw-bold","form-label","w-100"],[1,"fs-5"],[1,"col"],[1,"btn","btn-sm","btn-soft-danger","remove-list",3,"click"],["colspan","4"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],["translate","marketing.productOffer.discountOnServices",1,"fs-5","fw-bold"],["name","quantityY","type","number","id","quantityY",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["clearable","true","clearable","false","clearOnBackspace","false","name","categoryIdY","bindValue","id","bindLabel","name",2,"width","100%",3,"ngModelChange","items","ngModel"],["clearable","true","clearable","false","clearOnBackspace","false","name","servicesY","bindValue","id","bindLabel","name",2,"width","100%",3,"ngModelChange","items","ngModel"],[1,"row","mt-4"],["translate","marketing.productOffer.lessLimitOffer",1,"fs-5","fw-bold"],["translate","marketing.productOffer.type",1,"required","fw-bold","form-label","w-100"],["clearable","true","clearable","false","clearOnBackspace","false","name","paymentTypeCode","bindValue","id","bindLabel","name","required","",2,"width","100%",3,"ngModelChange","items","ngModel"],["class","col-12  col-md-3  mt-2",4,"ngIf"],["name","minPurchaseAmount","type","number","id","minPurchaseAmount",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,"col-12","col-md-3","mt-2"],["name","minPurchaseQuantity","type","number","id","minPurchaseQuantity",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["type","submit","translate","general.action.save",1,"btn","btn-success","w-md","btn-load",3,"click","disabled"],["type","button",1,"btn","btn-success","w-sm","btn-load"],[1,"d-flex","align-items-center"],["role","status",1,"spinner-border","flex-shrink-0"],["translate","general.action.loading",1,"visually-hidden"],["translate","general.action.loading",1,"flex-grow-1","ms-2"]],template:function(i,n){if(1&i){const a=e.RV6();e.nrm(0,"app-breadcrumbs",15),e.nI1(1,"translate"),e.j41(2,"div",16)(3,"div",17)(4,"div",18)(5,"h6",19),e.nrm(6,"span",20),e.k0s()(),e.j41(7,"div",21)(8,"form",null,0)(10,"div",16)(11,"div",22),e.nrm(12,"label",23),e.j41(13,"ng-select",24,1),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.form.offerType,s)||(n.form.offerType=s),e.Njj(s)}),e.k0s()(),e.j41(15,"div",22),e.nrm(16,"label",25),e.j41(17,"input",26,2),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.form.title,s)||(n.form.title=s),e.Njj(s)}),e.k0s(),e.DNE(19,q,2,0,"div",27),e.k0s(),e.j41(20,"div",28),e.nrm(21,"label",29),e.j41(22,"div",30)(23,"input",31,3),e.nI1(25,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.form.startDate,s)||(n.form.startDate=s),e.Njj(s)}),e.k0s()(),e.DNE(26,ee,2,0,"div",27),e.k0s(),e.j41(27,"div",28),e.nrm(28,"label",32),e.j41(29,"div",30)(30,"input",33,4),e.nI1(32,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.form.endDate,s)||(n.form.endDate=s),e.Njj(s)}),e.k0s()(),e.DNE(33,te,2,0,"div",27),e.k0s(),e.j41(34,"div",28),e.nrm(35,"label",34),e.j41(36,"p-inputSwitch",35),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.form.isActive,s)||(n.form.isActive=s),e.Njj(s)}),e.k0s()()()()()(),e.j41(37,"div",17)(38,"div",18)(39,"h6",19),e.nrm(40,"span",36),e.k0s()(),e.j41(41,"div",21),e.DNE(42,oe,12,2,"ng-container",37)(43,ae,3,0,"div",38)(44,se,3,0,"div",38),e.j41(45,"div",39),e.DNE(46,le,7,1,"div",40)(47,de,6,1,"div",40)(48,ce,6,1,"div",40),e.k0s()()(),e.j41(49,"div",16)(50,"div",17)(51,"div",21)(52,"div")(53,"div",41),e.nrm(54,"span",42)(55,"span",43),e.k0s(),e.j41(56,"div",44)(57,"div",45),e.nrm(58,"label",46),e.j41(59,"ng-select",24,1),e.bIt("ngModelChange",function(s){return e.eBV(a),e.Njj(n.onCategoryChange(n.typeX,s))}),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.form.categoryIdX,s)||(n.form.categoryIdX=s),e.Njj(s)}),e.k0s()(),e.j41(61,"div",47),e.nrm(62,"label",48),e.j41(63,"button",49),e.bIt("click",function(){return e.eBV(a),e.Njj(n.addCategory(n.typeX))}),e.nrm(64,"i",50)(65,"span",51),e.k0s()(),e.j41(66,"div",45),e.nrm(67,"label",52),e.j41(68,"ng-select",53,5),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.form.servicesX,s)||(n.form.servicesX=s),e.Njj(s)}),e.k0s()(),e.j41(70,"div",47),e.nrm(71,"label",48),e.j41(72,"button",54),e.bIt("click",function(){return e.eBV(a),e.Njj(n.addService(n.typeX))}),e.nrm(73,"i",50)(74,"span",51),e.k0s()()(),e.j41(75,"div",55)(76,"div",56)(77,"table",57)(78,"thead",58)(79,"tr")(80,"th",59),e.EFF(81,"#"),e.k0s(),e.nrm(82,"th",60)(83,"th",61)(84,"th",62),e.k0s()(),e.j41(85,"tbody"),e.DNE(86,me,10,3,"tr",63)(87,fe,4,0,"tr",37),e.k0s()()()()(),e.DNE(88,ue,13,2,"div",64)(89,he,36,6,"div",37),e.k0s(),e.DNE(90,ye,11,4,"div",65),e.j41(91,"div",66)(92,"div",67)(93,"div",68),e.DNE(94,Ce,1,1,"button",69)(95,xe,5,0,"button",70),e.k0s()(),e.j41(96,"div",67)(97,"a",71),e.bIt("click",function(){return e.eBV(a),e.Njj(n.back())}),e.nrm(98,"i",72),e.j41(99,"span"),e.EFF(100),e.nI1(101,"translate"),e.k0s()()()()()()()}if(2&i){const a=e.sdS(18),d=e.sdS(24),s=e.sdS(31);e.FS9("title",0==n.isEditForm?n.addPlan:e.bMT(1,35,n.editPaln)),e.Y8G("breadcrumbItems",n.breadCrumbItems),e.R7$(13),e.Y8G("items",n.offerTypes),e.R50("ngModel",n.form.offerType),e.R7$(4),e.R50("ngModel",n.form.title),e.R7$(2),e.Y8G("ngIf",a.invalid&&a.touched),e.R7$(4),e.FS9("placeholder",e.bMT(25,37,"hr.target.dateFrom")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.form.startDate),e.R7$(3),e.Y8G("ngIf",d.invalid&&d.touched),e.R7$(4),e.FS9("placeholder",e.bMT(32,39,"hr.target.dateFrom")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.form.endDate),e.R7$(3),e.Y8G("ngIf",s.invalid&&s.touched),e.R7$(3),e.R50("ngModel",n.form.isActive),e.R7$(6),e.Y8G("ngIf",6==n.form.offerType),e.R7$(),e.Y8G("ngIf",3==n.form.offerType||2==n.form.offerType),e.R7$(),e.Y8G("ngIf",1==n.form.offerType),e.R7$(2),e.Y8G("ngIf",3==n.form.offerType||2==n.form.offerType),e.R7$(),e.Y8G("ngIf",3==n.form.offerType),e.R7$(),e.Y8G("ngIf",1==n.form.offerType),e.R7$(11),e.Y8G("items",n.categories),e.R50("ngModel",n.form.categoryIdX),e.R7$(9),e.Y8G("items",n.servicesFilterX),e.R50("ngModel",n.form.servicesX),e.R7$(18),e.Y8G("ngForOf",n.form.productOfferServicesX),e.R7$(),e.Y8G("ngIf",n.form.productOfferServicesX.length<=0),e.R7$(),e.Y8G("ngIf",1==n.form.offerType),e.R7$(),e.Y8G("ngIf",1==n.form.offerType||6==n.form.offerType),e.R7$(),e.Y8G("ngIf",1!==n.form.offerType&&6!==n.form.offerType),e.R7$(4),e.Y8G("ngIf",!n.loader),e.R7$(),e.Y8G("ngIf",n.loader),e.R7$(5),e.JRh(e.bMT(101,41,"general.action.back"))}},dependencies:[r.Sq,r.bT,u.qT,u.me,u.Q0,u.BC,u.cb,u.YS,u.VZ,u.vS,u.cV,y.kL,K.m,b.Mm,I.HW,O.vr,Z.m,b.D9]})}}return o})();var Te=l(91426),je=l(40724),Oe=l(15084),Me=l(88148),Pe=l(91580),ke=l(5779),Se=l(94575);const Ie=()=>["productOffer.register"],Re=()=>["productOffer.edit"],we=()=>["productOffer.delete"];function Fe(o,c){1&o&&(e.j41(0,"tr",23)(1,"th",24),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",25),e.nrm(4,"i",26),e.EFF(5," general.table.id "),e.k0s(),e.j41(6,"th",27),e.nrm(7,"i",26),e.EFF(8," marketing.productOffer.offerTitle "),e.k0s(),e.j41(9,"th",28),e.nrm(10,"i",26),e.EFF(11," marketing.productOffer.offerType "),e.k0s(),e.j41(12,"th",29),e.nrm(13,"i",26),e.EFF(14," marketing.productOffer.startDate "),e.k0s(),e.j41(15,"th",30),e.nrm(16,"i",26),e.EFF(17," marketing.productOffer.endDate "),e.k0s(),e.j41(18,"th",31),e.nrm(19,"i",26),e.EFF(20," general.table.isActive "),e.k0s(),e.nrm(21,"th",32),e.k0s())}function De(o,c){1&o&&e.nrm(0,"span",45)}function Le(o,c){1&o&&e.nrm(0,"span",46)}function Ve(o,c){if(1&o&&(e.nrm(0,"i",47),e.EFF(1),e.nI1(2,"date"),e.nrm(3,"br")(4,"i",48),e.EFF(5),e.nI1(6,"date"),e.nrm(7,"br")(8,"i",49),e.EFF(9)),2&o){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.i5U(2,3,t.creationTime,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",e.i5U(6,6,t.lastModificationTime,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",t.creatorName," ")}}function Ee(o,c){if(1&o){const t=e.RV6();e.j41(0,"li",34),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,a=e.XpG();return e.Njj(a.goEdit(n.id))}),e.j41(1,"span",50),e.nrm(2,"i",51)(3,"span",52),e.k0s()()}}function Xe(o,c){if(1&o){const t=e.RV6();e.j41(0,"li",34),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,a=e.XpG(),d=e.sdS(30);return e.Njj(a.openModal(n.id,d))}),e.j41(1,"a",53),e.nrm(2,"i",54)(3,"span",55),e.k0s()()}}function Ne(o,c){if(1&o){const t=e.RV6();e.j41(0,"tr",33)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td",34),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.goEdit(n.id))}),e.j41(6,"a",35),e.EFF(7),e.k0s()(),e.j41(8,"td"),e.EFF(9),e.nI1(10,"translate"),e.k0s(),e.j41(11,"td"),e.EFF(12),e.nI1(13,"date"),e.k0s(),e.j41(14,"td"),e.EFF(15),e.nI1(16,"date"),e.k0s(),e.j41(17,"td"),e.DNE(18,De,1,0,"span",36)(19,Le,1,0,"span",37),e.k0s(),e.j41(20,"td"),e.DNE(21,Ve,10,9,"ng-template",null,2,e.C5r),e.j41(23,"span",38)(24,"div",39),e.nrm(25,"i",40),e.j41(26,"button",41),e.nrm(27,"i",42),e.k0s(),e.j41(28,"ul",43),e.DNE(29,Ee,4,0,"li",44)(30,Xe,4,0,"li",44),e.k0s()()()()()}if(2&o){const t=c.$implicit,i=c.rowIndex,n=e.sdS(22);e.R7$(2),e.JRh(i+1),e.R7$(2),e.JRh(t.id),e.R7$(3),e.SpI(" ",t.title," "),e.R7$(2),e.JRh(e.bMT(10,11,"marketing.productOffer."+t.offerTypeValue)),e.R7$(3),e.JRh(e.i5U(13,13,t.startDate,"yyyy-MM-dd")),e.R7$(3),e.JRh(e.i5U(16,16,t.endDate,"yyyy-MM-dd")),e.R7$(3),e.Y8G("ngIf",t.isActive),e.R7$(),e.Y8G("ngIf",!t.isActive),e.R7$(6),e.Y8G("ngbTooltip",n),e.R7$(4),e.Y8G("hasPermission",e.lJ4(19,Re)),e.R7$(),e.Y8G("hasPermission",e.lJ4(20,we))}}function Ge(o,c){1&o&&(e.j41(0,"div",56),e.EFF(1," general.table.noData"),e.k0s())}function Be(o,c){if(1&o){const t=e.RV6();e.j41(0,"div",57)(1,"div",58),e.nrm(2,"ngb-pagination-info",59),e.j41(3,"table-length",60),e.bIt("lengthChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",61)(5,"ngb-pagination",62),e.bIt("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.pagination.pageNumber,n)||(a.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&o){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function Ye(o,c){if(1&o){const t=e.RV6();e.j41(0,"delete-modal",63),e.bIt("deleteConfirm",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.DeleteConfirmSoft())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}}let $e=(()=>{class o extends $.w{constructor(t,i,n,a,d,s,R,w,F){super(t,i,R,n,a,d,s),this.baseService=n,this.excelService=w,this.router=F,this.title="marketing.productOffer.title",this.titleOperation="marketing.productOffer.titleOperation",this.keySelected="",this.assignUsers=[],this.times=[],this.employees=[],this.searchForm={},this.isResolveList=!0,this.countLoad=2,this.clientParam={pageSize:50,pageNumber:1,search:""},this.clients=[],this.loading=!1,this.salesPersons=[],this.offerTypes=[{id:6,name:"StepwisePurchasePromotionsQuantity"},{id:1,name:"BuyXGetYFree"}],this.setDates=(v,k,Y)=>{if(v?.from||v?.to){const z=v.to||v.from;this.pagination[k]=this.datePipe.transform(v.from||v.to,"yyyy-MM-ddT00:00:00"),this.pagination[Y]=this.datePipe.transform(z,"yyyy-MM-ddT23:59:59.999")}else this.pagination[k]=null,this.pagination[Y]=null},this.configRoute(),this.offerTypes.forEach(v=>{v.name=this.getTranslationText("marketing.productOffer."+v.name)})}onSearch(){let t={...this.searchForm};this.ngxLoader.startLoader("allLoader"),this.setDates(t.creationDates,"dateFrom","dateTo"),this.loadentities()}OnSearch(t){this.ngxLoader.startLoader(x.a7),this.loadentities()}configRoute(){}mapExcel(){let t=[];return this.entities?.forEach(i=>{t.push({Name:i.name,Sales_Man:i.salesPersonName,Datefrom:this.datePipe.transform(i.dateFrom,"yyyy-MM-ddd"),Dateto:this.datePipe.transform(i.dateTo,"yyyy-MM-ddd"),notes:i.notes})}),t}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,this.getTranslationText(this.title),[])}goEdit(t){this.router.navigateByUrl("/marketing/productOffers/edit",{state:{id:t}})}goRegister(){this.router.navigateByUrl("/marketing/productOffers/register")}DeleteConfirmSoft(){console.log(this.selectedRow,"selectedRow"),this.ngxLoader.startLoader(x.Fq),this.baseService.delete(this.selectedRow[0].id).pipe((0,f.O)(),(0,h.c)(this.mainDelay),(0,p.Z)(),(0,g.Q)(this.notifier),(0,C.j)(()=>this.ngxLoader.stopLoader(x.Fq))).subscribe(t=>{t.success?(this.alertService.success(),this.loadentities(),this.modalService.dismissAll(),this.resetSelected()):this.alertService.error("general.message."+t)},()=>{this.alertService.error()})}static{this.\u0275fac=function(i){return new(i||o)(e.rXU(m.nX),e.rXU(b.c$),e.rXU(B.L),e.rXU(G.u),e.rXU(r.vh),e.rXU(j.eD),e.rXU(_.Bq),e.rXU(Te.V),e.rXU(m.Ix))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-productOfferList"]],features:[e.Vt3],decls:31,vars:32,consts:[["tableMaster",""],["deleteModal",""],["tooltipContent",""],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],[3,"reset","search","exportXlsx","addNew","addPermission","totalItems","title"],["control",""],[1,"col-md-3","mb-2"],[1,"search-box"],["type","search","id","name","name","name",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],[1,"col-12","col-md-2","mb-2"],["type","text","mwlFlatpickr","","id","isDate","mode","range","altFormat","d/m/Y",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],["name","name","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","placeholder","ngModel"],["name","active","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-4 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["translate","",2,"width",".5%"],["pSortableColumn","code","translate","",2,"width","3%"],[1,"ri-expand-up-down-line"],["pSortableColumn","title","translate","",2,"width","15%"],["pSortableColumn","offerType","translate","",2,"width","15%"],["pSortableColumn","startDate","translate","",2,"width","10%"],["pSortableColumn","endDate","translate","",2,"width","10%"],["pSortableColumn","isActive","translate","",2,"width","8%"],["translate","",2,"width","4%"],[1,"fs-5"],[3,"click"],["href","javascript:void(0)",1,"link-primary","link-offset-2","text-decoration-underline","link-underline-opacity-25","link-underline-opacity-100-hover"],["class","badge bg-success-subtle text-success p-2","translate","general.table.active",4,"ngIf"],["class","badge bg-danger-subtle text-danger p-2","translate","general.table.noActive",4,"ngIf"],[1,"d-inline"],[1,"dropdown-custom"],["tooltipPosition","top",1,"mdi","mdi-cog-outline","text-muted","fs-16","align-middle","me-1","d-inline",3,"ngbTooltip"],["type","button",1,"btn","dropbtn","btn-soft-secondary","btn-sm","dropdown-custom","arrow-none"],[1,"ri-more-fill"],[1,"dropdown-menu","dropdown-menu-end","dropdown-content"],[3,"click",4,"hasPermission"],["translate","general.table.active",1,"badge","bg-success-subtle","text-success","p-2"],["translate","general.table.noActive",1,"badge","bg-danger-subtle","text-danger","p-2"],[1,"ri-history-fill","text-warning"],[1,"ri-history-fill","text-danger"],[1,"ri-user-location-fill","text-primary"],[1,"dropdown-item"],[1,"ri-pencil-fill","align-bottom","me-2","text-muted"],["translate","general.action.edit"],["href","javascript:void(0);",1,"dropdown-item"],[1,"ri-delete-bin-fill","align-bottom","me-2","text-muted"],["translate","general.action.delete"],["translate","",1,"text-center","text-danger","text-bold","fs-4","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[3,"deleteConfirm","dismiss"]],template:function(i,n){if(1&i){const a=e.RV6();e.j41(0,"div",3)(1,"div",4)(2,"div",5)(3,"base-filter",6),e.bIt("reset",function(){return e.eBV(a),e.Njj(n.onReset())})("search",function(){return e.eBV(a),e.Njj(n.onSearch())})("exportXlsx",function(){return e.eBV(a),e.Njj(n.onExportXlsx())})("addNew",function(){return e.eBV(a),e.Njj(n.goRegister())}),e.qex(4,7),e.j41(5,"div",8)(6,"div",9)(7,"input",10),e.nI1(8,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.title,s)||(n.pagination.title=s),e.Njj(s)}),e.k0s(),e.nrm(9,"i",11),e.k0s()(),e.j41(10,"div",12)(11,"input",13),e.nI1(12,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.searchForm.creationDates,s)||(n.searchForm.creationDates=s),e.Njj(s)}),e.k0s()(),e.j41(13,"div",12)(14,"div",9)(15,"ng-select",14),e.nI1(16,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.offerType,s)||(n.pagination.offerType=s),e.Njj(s)}),e.k0s()()(),e.j41(17,"div",12)(18,"div",9)(19,"ng-select",15),e.nI1(20,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.active,s)||(n.pagination.active=s),e.Njj(s)}),e.k0s()()(),e.bVm(),e.k0s(),e.j41(21,"div",16)(22,"div",17)(23,"p-table",18,0),e.bIt("onLazyLoad",function(s){return e.eBV(a),e.Njj(n.tableChange(s))})("selectionChange",function(s){return e.eBV(a),e.Njj(n.onSelectionChange(s))}),e.DNE(25,Fe,22,0,"ng-template",19)(26,Ne,31,21,"ng-template",20),e.k0s()(),e.DNE(27,Ge,2,0,"div",21)(28,Be,6,8,"div",22),e.k0s()()()(),e.DNE(29,Ye,1,0,"ng-template",null,1,e.C5r)}2&i&&(e.R7$(3),e.Y8G("addPermission",e.lJ4(31,Ie))("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(4),e.FS9("placeholder",e.bMT(8,23,"general.table.name")),e.R50("ngModel",n.pagination.title),e.R7$(4),e.FS9("placeholder",e.bMT(12,25,"orderManagement.order.date")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.creationDates),e.R7$(4),e.FS9("placeholder",e.bMT(16,27,"marketing.productOffer.offerType")),e.Y8G("items",n.offerTypes)("multiple",!1),e.R50("ngModel",n.pagination.offerType),e.R7$(4),e.FS9("placeholder",e.bMT(20,29,"general.table.isActive")),e.Y8G("items",n.activeList)("multiple",!1),e.R50("ngModel",n.pagination.active),e.R7$(4),e.Y8G("value",n.entities)("rows",n.pagination.pageSize)("lazy",!0)("totalRecords",n.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",n.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems>0))},dependencies:[r.bT,u.me,u.BC,u.vS,_.s5,y.kL,je.b,Oe.w,Me.p,Pe.g,b.Mm,T.XI,ke.Ei,T.Tg,O.vr,_.md,Se.p,r.vh,b.D9]})}}return o})();var Ae=l(56131),Ue=l(7673);let ze=(()=>{class o extends Ae.E{constructor(t,i,n){super(t,i,n),this.baseService=i}resolve(t,i){const a=this.router.getCurrentNavigation()?.extras?.state?.id;return this.baseService.getById(a).pipe((0,M.W)(d=>(this.router.navigate(["/marketing/productOffers"]),this.alertService.error(d),(0,Ue.of)(null))))}static{this.\u0275fac=function(i){return new(i||o)(e.KVO(m.Ix),e.KVO(B.L),e.KVO(G.u))}}static{this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();const Qe=[{path:"productOffers",component:$e,canActivate:[l(56701).g],data:{permission:["productOffer.view"]}},{path:"productOffers/register",component:A,data:{permission:["productOffer.register"]}},{path:"productOffers/edit",component:A,resolve:{data:ze},data:{permission:["productOffer.edit"]}}];let We=(()=>{class o{static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275mod=e.$C({type:o})}static{this.\u0275inj=e.G2t({imports:[m.iI.forChild(Qe),m.iI]})}}return o})();var Je=l(71144),Ke=l(38542),Ze=l(3200),qe=l(81141),et=l(41198);l(70072);let st=(()=>{class o{constructor(){(0,L.eV)(E().loadAnimation)}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275mod=e.$C({type:o})}static{this.\u0275inj=e.G2t({imports:[r.MD,u.YN,_.zH,_.Pv,_.c9,y.ND,D.r,We,X.G,b.h,T.bG,N.q4,I.H_,_.c9,j.th,O.MQ,_.n8,Je.j,_._f,Ke.S,Ze.U,qe.tm,et.TV,u.X1]})}}return o})()},40724:(H,S,l)=>{l.d(S,{b:()=>O});var r=l(54438),u=l(8147),_=l(60177),y=l(69005),D=l(94575);const L=[[["","menuBtn",""]],[["","control",""]]],V=["[menuBtn]","[control]"];function E(m,g){1&m&&(r.j41(0,"span"),r.EFF(1),r.nI1(2,"translate"),r.k0s()),2&m&&(r.R7$(),r.JRh(r.bMT(2,1,"general.table.all")))}function X(m,g){if(1&m){const f=r.RV6();r.j41(0,"a",17),r.bIt("click",function(){r.eBV(f),r.XpG(2);const p=r.sdS(11);return r.Njj(p.toggle())}),r.nrm(1,"i",18)(2,"span",19),r.k0s()}if(2&m){const f=r.XpG(2);r.BMQ("aria-expanded",!f.isCollapsed)}}function b(m,g){if(1&m){const f=r.RV6();r.j41(0,"div",21)(1,"button",22),r.nrm(2,"i",23)(3,"span",24),r.k0s(),r.j41(4,"ul",25)(5,"li",26),r.bIt("click",function(){r.eBV(f);const p=r.XpG(3);return r.Njj(p.onExportXlsx())}),r.j41(6,"a",27),r.nrm(7,"span",28),r.k0s()(),r.j41(8,"li",26),r.bIt("click",function(){r.eBV(f);const p=r.XpG(3);return r.Njj(p.onExportPDF())}),r.j41(9,"a",27),r.nrm(10,"span",29),r.k0s()()()()}if(2&m){const f=r.XpG(3);r.FS9("placement","en"===f.lang?"bottom-start":"bottom-end"),r.R7$(),r.Y8G("disabled",f.totalItems<=0)}}function T(m,g){if(1&m&&(r.qex(0),r.DNE(1,b,11,2,"div",20),r.bVm()),2&m){const f=r.XpG(2);r.R7$(),r.Y8G("hasPermission",f.exportPermission)}}function N(m,g){if(1&m){const f=r.RV6();r.j41(0,"a",31),r.bIt("click",function(){r.eBV(f);const p=r.XpG(3);return r.Njj(p.onAddNew())}),r.nrm(1,"i",32),r.j41(2,"span"),r.EFF(3),r.nI1(4,"translate"),r.k0s()()}if(2&m){const f=r.XpG(3);r.R7$(3),r.JRh(r.bMT(4,1,f.newLocal))}}function I(m,g){if(1&m&&(r.qex(0),r.DNE(1,N,5,3,"a",30),r.bVm()),2&m){const f=r.XpG(2);r.R7$(),r.Y8G("hasPermission",f.addPermission)}}function j(m,g){if(1&m&&(r.j41(0,"div",15),r.DNE(1,X,3,1,"a",16)(2,T,2,1,"ng-container",4)(3,I,2,1,"ng-container",4),r.k0s()),2&m){const f=r.XpG();r.R7$(),r.Y8G("ngIf",f.showSearch),r.R7$(),r.Y8G("ngIf",f.showExport),r.R7$(),r.Y8G("ngIf",f.showAdd)}}let O=(()=>{class m{constructor(f){this.translateService=f,this.totalItems=0,this.title="",this.titleMore="",this.newLocal="general.action.addNew",this.data=[],this.addPermission=[],this.exportPermission=[],this.showSearch=!0,this.showExport=!0,this.showAdd=!0,this.showAllStr=!0,this.addNew=new r.bkB,this.exportXlsx=new r.bkB,this.exportPDF=new r.bkB,this.search=new r.bkB,this.reset=new r.bkB,this.showAction=!0,this.isCollapsed=!0,this.lang=this.translateService.currentLang}ngOnInit(){}onAddNew(){this.addNew.emit(!0)}onSearch(){this.search.emit(!0)}onExportXlsx(){this.exportXlsx.emit(!0)}onExportPDF(){this.exportPDF.emit(!0)}onReset(){this.reset.emit(!0)}static{this.\u0275fac=function(h){return new(h||m)(r.rXU(u.c$))}}static{this.\u0275cmp=r.VBU({type:m,selectors:[["base-filter"]],inputs:{totalItems:"totalItems",title:"title",titleMore:"titleMore",newLocal:"newLocal",data:"data",addPermission:"addPermission",exportPermission:"exportPermission",showSearch:"showSearch",showExport:"showExport",showAdd:"showAdd",showAllStr:"showAllStr",showAction:"showAction"},outputs:{addNew:"addNew",exportXlsx:"exportXlsx",exportPDF:"exportPDF",search:"search",reset:"reset"},ngContentSelectors:V,decls:21,vars:7,consts:[["collapse","ngbCollapse"],[1,"card-header","border-0"],[1,"row","align-items-center","mb-2","justify-content-between"],[1,"col-12","col-md-3","card-title","mb-0","flex-grow-1"],[4,"ngIf"],["class","col-12 col-md-6 text-right",4,"ngIf"],["id","collapseExample",1,"collaps","show",3,"ngbCollapseChange","ngbCollapse"],[1,"row"],[1,"col-12","col-md-2","text-center","mb-2","d-flex","text-sm-center","text-md-left"],["type","button",1,"btn","w-sm-100","w-md-auto","btn-primary","btn-sm",3,"click"],[1,"ri-file-search-fill","me-1","align-bottom"],["translate","general.action.search"],["type","button",1,"btn","btn-danger","w-sm-100","w-md-auto","mx-1","btn-sm",3,"click"],[1,"ri-equalizer-fill","me-1","align-bottom"],["translate","general.action.clear"],[1,"col-12","col-md-6","text-right"],["class","btn btn-success  mx-1","data-bs-toggle","collapse","href","javascript:void(0);",3,"click",4,"ngIf"],["data-bs-toggle","collapse","href","javascript:void(0);",1,"btn","btn-success","mx-1",3,"click"],[1,"ri-filter-2-line","align-bottom"],["translate","general.action.filter"],["class","dropdown d-inline","ngbDropdown","",3,"placement",4,"hasPermission"],["ngbDropdown","",1,"dropdown","d-inline",3,"placement"],["ngbDropdownToggle","","type","button",1,"btn","btn-info","mx-2","me-4",3,"disabled"],[1,"ri-chat-download-line","me-1","align-bottom"],["translate","general.action.export"],["aria-labelledby","dropdownMenuButton1","ngbDropdownMenu","",1,"dropdown-menu"],[3,"click"],["href","javascript:void(0);",1,"dropdown-item"],["translate","general.action.xlxs"],["translate","general.action.pdf"],["class","btn btn-danger","href","javascript:void(0);",3,"click",4,"hasPermission"],["href","javascript:void(0);",1,"btn","btn-danger",3,"click"],[1,"ri-add-line","align-bottom"]],template:function(h,p){if(1&h){const C=r.RV6();r.NAR(L),r.j41(0,"div",1)(1,"div",2)(2,"h5",3)(3,"span"),r.SdG(4),r.k0s(),r.j41(5,"span"),r.DNE(6,E,3,3,"span",4),r.EFF(7),r.nI1(8,"translate"),r.k0s()(),r.DNE(9,j,4,3,"div",5),r.k0s(),r.j41(10,"div",6,0),r.mxI("ngbCollapseChange",function(P){return r.eBV(C),r.DH7(p.isCollapsed,P)||(p.isCollapsed=P),r.Njj(P)}),r.j41(12,"div",7),r.SdG(13,1),r.j41(14,"div",8)(15,"button",9),r.bIt("click",function(){return r.eBV(C),r.Njj(p.onSearch())}),r.nrm(16,"i",10)(17,"span",11),r.k0s(),r.j41(18,"button",12),r.bIt("click",function(){return r.eBV(C),r.Njj(p.onReset())}),r.nrm(19,"i",13)(20,"span",14),r.k0s()()()()()}2&h&&(r.R7$(6),r.Y8G("ngIf",p.showAllStr),r.R7$(),r.Lme(" ",r.bMT(8,5,p.title)," ",p.titleMore,""),r.R7$(2),r.Y8G("ngIf",p.showAction),r.R7$(),r.R50("ngbCollapse",p.isCollapsed))},dependencies:[_.bT,y.tg,y.do,y.U0,u.Mm,y.$G,D.p,u.D9],encapsulation:2})}}return m})()}}]);
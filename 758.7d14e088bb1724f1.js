"use strict";(self.webpackChunkvelzon=self.webpackChunkvelzon||[]).push([[758],{56131:(X,L,l)=>{l.d(L,{E:()=>d});var r=l(7673),h=l(99437);class d{constructor(M,v,R){this.router=M,this.BaseService=v,this.alertService=R,this.pagination={pageNumber:1,pageSize:10}}resolve(M,v){return this.BaseService.get(this.pagination).pipe((0,h.W)(R=>(this.router.navigate([""]),this.alertService.error(R),(0,r.of)(null))))}}},9758:(X,L,l)=>{l.r(L),l.d(L,{ManagmentModule:()=>bt});var r=l(60177),h=l(89417),d=l(69005),C=l(32454),M=l(66900),v=l(91022),R=l(70255),y=l(53978),b=l(8147),f=l(45286),I=l(65430),k=l(41631),E=l(1530),U=l(72510),x=l(51188),e=l(54438),T=l(62984),_=l(3888);let S=(()=>{class s{constructor(t,i,n){this.authservice=t,this.router=i,this.alertService=n}canActivate(t){return!!this.authservice.roleMatch(t.data.roles)||(this.alertService.error("general.notAllow.notAllowPageMessage"),this.router.navigate(["/"]),!1)}static{this.\u0275fac=function(i){return new(i||s)(e.KVO(T.J),e.KVO(x.Ix),e.KVO(_.u))}}static{this.\u0275prov=e.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();var u=l(56977),N=l(75622),o=l(36158),p=l(67569),j=l(45312),F=l(21626);let w=(()=>{class s extends p.d{constructor(t){super(t,j.c.apiUrl+"Users/")}GetUserLookup(){return this.http.get(this.baseUrl+"GetUserLookup")}changePassword(t,i){return this.http.post(this.baseUrl+"changepassword/"+t,i)}static{this.\u0275fac=function(i){return new(i||s)(e.KVO(F.Qq))}}static{this.\u0275prov=e.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();var Y=l(91426),B=l(26364),Q=l(40724),J=l(15084),Z=l(88148),q=l(91580),ee=l(5779),K=l(29935),te=l(94575);const le=()=>["user.export"],me=()=>["user.edit"],ce=()=>["user.loginAs"],de=()=>["user.resetPassword"],pe=()=>["user.delete"];function ge(s,c){1&s&&(e.j41(0,"tr",36)(1,"th",37),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",38),e.nrm(4,"i",39),e.EFF(5," securityManagement.user.userCode "),e.k0s(),e.j41(6,"th",40),e.nrm(7,"i",39),e.EFF(8," general.table.name "),e.k0s(),e.j41(9,"th",41),e.nrm(10,"i",39),e.EFF(11," securityManagement.user.roles "),e.k0s(),e.j41(12,"th",42),e.nrm(13,"i",39),e.EFF(14," hr.employee.mobile "),e.k0s(),e.j41(15,"th",43),e.nrm(16,"i",39),e.EFF(17," securityManagement.user.employeeName "),e.k0s(),e.j41(18,"th",44),e.nrm(19,"i",39),e.EFF(20," securityManagement.user.userTypeName "),e.k0s(),e.j41(21,"th",45),e.nrm(22,"i",39),e.EFF(23," hr.employee.isActive "),e.k0s(),e.j41(24,"th",46),e.nrm(25,"i",39),e.EFF(26," securityManagement.user.lastLogin "),e.k0s(),e.nrm(27,"th",47),e.k0s())}function he(s,c){if(1&s&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&s){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.bMT(2,1,"securityManagement.user."+t.userTypeName),"")}}function ue(s,c){1&s&&e.nrm(0,"span",60)}function _e(s,c){1&s&&e.nrm(0,"span",61)}function fe(s,c){if(1&s&&(e.nrm(0,"i",62),e.EFF(1),e.nI1(2,"date"),e.nrm(3,"br")(4,"i",63),e.EFF(5),e.nI1(6,"date"),e.nrm(7,"br")(8,"i",64),e.EFF(9)),2&s){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.i5U(2,3,t.createdDate,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",e.i5U(6,6,t.updatedDate,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",t.creatorName," ")}}function be(s,c){if(1&s){const t=e.RV6();e.j41(0,"li",49),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,a=e.XpG(2);return e.Njj(a.goEdit(n.id))}),e.j41(1,"span",65),e.nrm(2,"i",66)(3,"span",67),e.k0s()()}}function ve(s,c){if(1&s){const t=e.RV6();e.j41(0,"li",49),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,a=e.XpG(2);return e.Njj(a.loginAs(n.id))}),e.j41(1,"a",68),e.nrm(2,"i",69)(3,"span",70),e.k0s()()}}function Ce(s,c){if(1&s){const t=e.RV6();e.j41(0,"li",49),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,a=e.XpG(2),g=e.sdS(40);return e.Njj(a.openModal(n.id,g))}),e.j41(1,"a",68),e.nrm(2,"i",71)(3,"span",72),e.k0s()()}}function ye(s,c){if(1&s){const t=e.RV6();e.j41(0,"li",49),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,a=e.XpG(2),g=e.sdS(42);return e.Njj(a.openModal(n.id,g))}),e.j41(1,"a",73),e.nrm(2,"i",74)(3,"span",75),e.k0s()()}}function xe(s,c){if(1&s){const t=e.RV6();e.j41(0,"tr",48)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td",49),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(2);return e.Njj(a.goEdit(n.id))}),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.k0s(),e.j41(11,"td"),e.EFF(12),e.k0s(),e.j41(13,"td"),e.DNE(14,he,3,3,"span",50),e.k0s(),e.j41(15,"td"),e.DNE(16,ue,1,0,"span",51)(17,_e,1,0,"span",52),e.k0s(),e.j41(18,"td",53),e.EFF(19),e.nI1(20,"date"),e.k0s(),e.j41(21,"td"),e.DNE(22,fe,10,9,"ng-template",null,4,e.C5r),e.j41(24,"span",54)(25,"div",55)(26,"button",56),e.nrm(27,"i",57),e.k0s(),e.j41(28,"ul",58),e.DNE(29,be,4,0,"li",59)(30,ve,4,0,"li",59)(31,Ce,4,0,"li",59)(32,ye,4,0,"li",59),e.k0s()()()()()}if(2&s){const t=c.$implicit,i=c.rowIndex;e.R7$(2),e.JRh(i+1),e.R7$(2),e.SpI("#user#",t.id,""),e.R7$(2),e.JRh(t.name),e.R7$(2),e.JRh(t.roles),e.R7$(2),e.JRh(t.mobile),e.R7$(2),e.SpI(" ",t.employeeName," "),e.R7$(2),e.Y8G("ngIf",t.userTypeName),e.R7$(2),e.Y8G("ngIf",t.isActive),e.R7$(),e.Y8G("ngIf",!t.isActive),e.R7$(2),e.JRh(e.i5U(20,14,t.lastLogin,"yyyy-MM-dd HH:mm:ss")),e.R7$(10),e.Y8G("hasPermission",e.lJ4(17,me)),e.R7$(),e.Y8G("hasPermission",e.lJ4(18,ce)),e.R7$(),e.Y8G("hasPermission",e.lJ4(19,de)),e.R7$(),e.Y8G("hasPermission",e.lJ4(20,pe))}}function je(s,c){1&s&&(e.j41(0,"div",76),e.EFF(1," general.table.noData"),e.k0s())}function Ie(s,c){if(1&s){const t=e.RV6();e.j41(0,"div",77)(1,"div",78),e.nrm(2,"ngb-pagination-info",79),e.j41(3,"table-length",80),e.bIt("lengthChange",function(n){e.eBV(t);const a=e.XpG(2);return e.Njj(a.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",81)(5,"ngb-pagination",82),e.bIt("pageChange",function(n){e.eBV(t);const a=e.XpG(2);return e.Njj(a.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const a=e.XpG(2);return e.DH7(a.pagination.pageNumber,n)||(a.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&s){const t=e.XpG(2);e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function Re(s,c){if(1&s){const t=e.RV6();e.j41(0,"div",30)(1,"p-table",31,3),e.bIt("onLazyLoad",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.tableChange(n))})("selectionChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.onSelectionChange(n))}),e.DNE(3,ge,28,0,"ng-template",32)(4,xe,33,21,"ng-template",33),e.k0s()(),e.DNE(5,je,2,0,"div",34)(6,Ie,6,8,"div",35)}if(2&s){const t=e.XpG();e.R7$(),e.Y8G("value",t.entities)("rows",t.pagination.pageSize)("lazy",!0)("totalRecords",t.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",t.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",t.pagination.totalItems>0)}}function Se(s,c){1&s&&(e.j41(0,"div",83)(1,"div",84)(2,"div"),e.nrm(3,"lord-icon",85),e.k0s(),e.j41(4,"div",86)(5,"h5"),e.EFF(6,"Sorry! No Result Found"),e.k0s()()()())}function Me(s,c){1&s&&(e.j41(0,"div",103),e.EFF(1," general.message.filedIdRequired"),e.k0s())}function Ee(s,c){1&s&&(e.j41(0,"div",103),e.EFF(1," general.message.filedIdRequired"),e.k0s())}function Te(s,c){if(1&s){const t=e.RV6();e.j41(0,"div",87)(1,"div",88)(2,"h4",89),e.nrm(3,"span",72),e.k0s(),e.j41(4,"button",90),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss("Cross click"))}),e.k0s()(),e.j41(5,"div",91),e.nrm(6,"ngx-ui-loader",23),e.j41(7,"form",92,5),e.bIt("ngSubmit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.confirmChangePassword())}),e.j41(9,"div",93)(10,"label",94),e.EFF(11,"securityManagement.user.password"),e.k0s(),e.j41(12,"input",95,6),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.formPassword.password,n)||(a.formPassword.password=n),e.Njj(n)}),e.k0s(),e.DNE(14,Me,2,0,"div",96),e.k0s(),e.j41(15,"div",93)(16,"label",97),e.EFF(17,"securityManagement.user.rePassword"),e.k0s(),e.j41(18,"input",98,7),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.formPassword.rePassword,n)||(a.formPassword.rePassword=n),e.Njj(n)}),e.k0s(),e.DNE(20,Ee,2,0,"div",96),e.k0s(),e.j41(21,"div",99)(22,"button",100),e.nrm(23,"i",101)(24,"span",102),e.k0s()()()()()}if(2&s){const t=e.sdS(8),i=e.sdS(13),n=e.sdS(19),a=e.XpG();e.R7$(6),e.Y8G("hasProgressBar",!1)("fgsType",a.loaderOperationShap)("loaderId",a.operationLoader),e.R7$(6),e.R50("ngModel",a.formPassword.password),e.R7$(2),e.Y8G("ngIf",i.invalid&&i.touched),e.R7$(4),e.R50("ngModel",a.formPassword.rePassword),e.R7$(2),e.Y8G("ngIf",n.invalid&&n.touched),e.R7$(2),e.Y8G("disabled",!t.valid)}}function Fe(s,c){if(1&s){const t=e.RV6();e.j41(0,"delete-modal",104),e.bIt("deleteConfirm",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.DeleteConfirm())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}}let Le=(()=>{class s extends N.w{constructor(t,i,n,a,g,m,D,A,$,H){super(t,i,D,n,a,g,m),this.baseService=n,this.authDaamService=A,this.excelService=$,this.router=H,this.title="securityManagement.user.title",this.titleOperation="securityManagement.user.titleOperation",this.keySelected="",this.assignUsers=[],this.times=[],this.employees=[],this.searchForm={},this.isResolveList=!0,this.employeeTypes=[{id:1,name:"employeeTeam"},{id:2,name:"managment"},{id:3,name:"customerService"}],this.employeeGroups=[],this.activeindex="1",this.active=1,this.formPassword={},this.roles=[],this.userTypes=[],this.actives=[{id:!0,name:"active"},{id:!1,name:"noActive"}],this.addPermission=["user.register"],this.configRoute(),this.GetUserLookup()}GetUserLookup(){this.baseService.GetUserLookup().subscribe(t=>{this.roles=t.data.roles,this.employees=t.data.employees;let i=t.data.userTypes;i.forEach(n=>{n.name=this.getTranslationText("securityManagement.user."+n.name)}),this.userTypes=i,this.actives.forEach(n=>{n.name=this.getTranslationText("securityManagement.user."+n.name)})},t=>{console.log(t)})}ngOnInitMore(){}mapForm(t){return{...t}}onUpdateIsActive(t){this.baseService.updateActive(t).pipe((0,u.Q)(this.notifier)).subscribe(i=>{i?this.alertService.success():this.alertService.error("general.message."+i)},i=>{this.alertService.error()})}mapRegisterForm(t){let i={...t};return i.employeeCode=0,i}OnSearch(t){this.ngxLoader.startLoader(o.a7),this.loadentities()}onSearch(){this.ngxLoader.startLoader(o.a7),this.loadentities()}configRoute(){this.routerActive.data.pipe((0,u.Q)(this.notifier)).subscribe(t=>{this.entities=t.data.data,this.pagination.totalItems=t.data.totalItems},()=>{this.alertService.error()})}mapExcel(){let t=[];return this.entities.forEach(i=>{t.push({id:i.id,name:i.name,roles:i.roles,mobile:i.mobile,employeeName:i.employeeName,type:this.getTranslationText("securityManagement.user."+i.userTypeName),isActive:this.getTranslationText("general.table.active"),lastLogin:i.lastLogin})}),t}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,"User",[])}onNavChange(t){1===t.nextId&&(this.activeindex="1"),3===t.nextId&&(this.activeindex="3")}goRegister(){this.router.navigateByUrl("/managment/users/register")}goEdit(t){this.router.navigateByUrl("/managment/users/edit",{state:{id:t}})}confirmChangePassword(){this.formPassword.password===this.formPassword.rePassword?(this.ngxLoader.startLoader(this.operationLoader),this.baseService.changePassword(this.selectedRow[0].id,this.formPassword).pipe((0,u.Q)(this.notifier)).subscribe(()=>{this.alertService.success(),this.modalService.dismissAll(),this.formPassword={},this.ngxLoader.stopLoader(this.operationLoader)},()=>{this.alertService.error(),this.ngxLoader.stopLoader(this.operationLoader)})):this.alertService.error("securityManagement.user.rePasswordAndPasswordNotEqual")}loginAs(t){this.ngxLoader.startLoader(this.searchLoader),this.authDaamService.loginAs(t).pipe((0,u.Q)(this.notifier)).subscribe(i=>{const n=i.data;n&&(localStorage.setItem("token",n.token),localStorage.setItem("user",JSON.stringify(n.user))),this.alertService.success(),this.ngxLoader.stopLoader(this.searchLoader),location.assign("/")},()=>{this.alertService.error(),this.ngxLoader.stopLoader(this.searchLoader)})}static{this.\u0275fac=function(i){return new(i||s)(e.rXU(x.nX),e.rXU(b.c$),e.rXU(w),e.rXU(_.u),e.rXU(r.vh),e.rXU(E.eD),e.rXU(d.Bq),e.rXU(T.J),e.rXU(Y.V),e.rXU(x.Ix))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["user-list"]],features:[e.Vt3],decls:43,vars:31,consts:[["nav","ngbNav"],["changePassword",""],["deleteModal",""],["tableMaster",""],["tooltipContent",""],["formEntity","ngForm"],["password","ngModel"],["rePassword","ngModel"],[3,"title","breadcrumbItems"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],[3,"reset","search","exportXlsx","addNew","exportPermission","addPermission","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","search","id","filterValue","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["name","name","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","ngModel"],["InputTirmFilter","","type","search","id","mobile","name","mobile",1,"form-control",3,"ngModelChange","ngModel"],["name","userType","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","ngModel"],["name","employeeCode","bindValue","employeeCode","bindLabel","employeeName",3,"ngModelChange","items","multiple","ngModel"],[1,"card-body"],[3,"hasProgressBar","fgsType","loaderId"],["ngbNav","",1,"nav","nav-tabs-custom","card-header-tabs","border-bottom-0",3,"activeIdChange","navChange","activeId"],[3,"ngbNavItem"],["ngbNavLink",""],[1,"badge","bg-danger-subtle","text-danger","align-middle","rounded-pill","ms-1"],["ngbNavContent",""],[1,"mt-2",3,"ngbNavOutlet"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["translate","",2,"width",".5%"],["pSortableColumn","userCode","translate","",2,"width","6%"],[1,"ri-expand-up-down-line"],["pSortableColumn","name","translate","",2,"width","12%"],["pSortableColumn","roles","translate","",2,"width","10%"],["pSortableColumn","mobile","translate","",2,"width","10%"],["pSortableColumn","employeeCode","translate","",2,"width","8%"],["pSortableColumn","userTypeName","translate","",2,"width","7%"],["pSortableColumn","isActive","translate","",2,"width","5%"],["pSortableColumn","lastLogin","translate","",2,"width","10%"],["translate","",2,"width","5%"],[1,"fs-5"],[3,"click"],[4,"ngIf"],["class","badge bg-success-subtle text-success p-2","translate","hr.employee.active",4,"ngIf"],["class","badge bg-danger-subtle text-danger p-2","translate","hr.employee.noActive",4,"ngIf"],[1,"text-sm"],[1,"d-inline"],[1,"dropdown-custom"],["type","button",1,"btn","dropbtn","btn-soft-secondary","btn-sm","dropdown-custom","arrow-none"],[1,"ri-more-fill"],[1,"dropdown-menu","dropdown-menu-end","dropdown-content",2,"left","0"],[3,"click",4,"hasPermission"],["translate","hr.employee.active",1,"badge","bg-success-subtle","text-success","p-2"],["translate","hr.employee.noActive",1,"badge","bg-danger-subtle","text-danger","p-2"],[1,"ri-history-fill","text-warning"],[1,"ri-history-fill","text-danger"],[1,"ri-user-location-fill","text-primary"],[1,"dropdown-item"],[1,"ri-pencil-fill","align-bottom","me-2","text-muted"],["translate","general.action.edit"],["href","javascript:void(0);",1,"dropdown-item"],[1,"login-box","align-bottom","me-2","text-muted"],["translate","securityManagement.user.loginAs"],[1,"arrow-left-right","align-bottom","me-2","text-muted"],["translate","securityManagement.user.changePassword"],["href","javascript:void(0);","data-bs-toggle","modal","data-bs-target","#removeItemModal",1,"dropdown-item"],[1,"ri-delete-bin-fill","align-bottom","me-2","text-muted"],["translate","general.action.delete"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],["id","productnav-draft","role","tabpanel",1,"tab-pane"],[1,"py-4","text-center"],["src","https://cdn.lordicon.com/msoeawqm.json","trigger","loop","colors","primary:#405189,secondary:#0ab39c",2,"width","72px","height","72px"],[1,"mt-4"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"ngSubmit"],[1,"mb-3"],["for","password","translate","",1,"required","fw-bold","form-label"],["InputTirmFilter","","name","password","type","text","id","password","required","",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],["for","rePassword","translate","",1,"required","fw-bold","form-label"],["InputTirmFilter","","name","rePassword","type","text","id","rePassword","required","",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,"text-center"],["type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],["translate","",1,"text-danger","text-center"],[3,"deleteConfirm","dismiss"]],template:function(i,n){if(1&i){const a=e.RV6();e.nrm(0,"app-breadcrumbs",8),e.nI1(1,"translate"),e.j41(2,"div",9)(3,"div",10)(4,"div",11)(5,"base-filter",12),e.bIt("reset",function(){return e.eBV(a),e.Njj(n.onReset())})("search",function(){return e.eBV(a),e.Njj(n.onSearch())})("exportXlsx",function(){return e.eBV(a),e.Njj(n.onExportXlsx())})("addNew",function(){return e.eBV(a),e.Njj(n.goRegister())}),e.qex(6,13),e.j41(7,"div",14)(8,"div",15)(9,"input",16),e.nI1(10,"translate"),e.mxI("ngModelChange",function(m){return e.eBV(a),e.DH7(n.pagination.filterValue,m)||(n.pagination.filterValue=m),e.Njj(m)}),e.k0s(),e.nrm(11,"i",17),e.k0s()(),e.j41(12,"div",14)(13,"div",15)(14,"ng-select",18),e.mxI("ngModelChange",function(m){return e.eBV(a),e.DH7(n.pagination.roleId,m)||(n.pagination.roleId=m),e.Njj(m)}),e.k0s()()(),e.j41(15,"div",14)(16,"div",15)(17,"input",19),e.mxI("ngModelChange",function(m){return e.eBV(a),e.DH7(n.pagination.mobile,m)||(n.pagination.mobile=m),e.Njj(m)}),e.k0s()()(),e.j41(18,"div",14)(19,"div",15)(20,"ng-select",20),e.mxI("ngModelChange",function(m){return e.eBV(a),e.DH7(n.pagination.userType,m)||(n.pagination.userType=m),e.Njj(m)}),e.k0s()()(),e.j41(21,"div",14)(22,"div",15)(23,"ng-select",21),e.mxI("ngModelChange",function(m){return e.eBV(a),e.DH7(n.pagination.employeeCode,m)||(n.pagination.employeeCode=m),e.Njj(m)}),e.k0s()()(),e.bVm(),e.k0s(),e.j41(24,"div",22),e.nrm(25,"ngx-ui-loader",23),e.j41(26,"ul",24,0),e.mxI("activeIdChange",function(m){return e.eBV(a),e.DH7(n.active,m)||(n.active=m),e.Njj(m)}),e.bIt("navChange",function(m){return e.eBV(a),e.Njj(n.onNavChange(m))}),e.j41(28,"li",25)(29,"a",26),e.EFF(30," All "),e.j41(31,"span",27),e.EFF(32),e.k0s()(),e.DNE(33,Re,7,6,"ng-template",28),e.k0s(),e.j41(34,"li",25)(35,"a",26),e.EFF(36," Draft "),e.k0s(),e.DNE(37,Se,7,0,"ng-template",28),e.k0s()(),e.nrm(38,"div",29),e.k0s()()()(),e.DNE(39,Te,25,8,"ng-template",null,1,e.C5r)(41,Fe,1,0,"ng-template",null,2,e.C5r)}if(2&i){const a=e.sdS(27);e.FS9("title",e.bMT(1,26,n.title)),e.Y8G("breadcrumbItems",n.breadCrumbItems),e.R7$(5),e.Y8G("exportPermission",e.lJ4(30,le))("addPermission",n.addPermission)("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(4),e.FS9("placeholder",e.bMT(10,28,"task.tasklist.subject")),e.R50("ngModel",n.pagination.filterValue),e.R7$(5),e.Y8G("items",n.roles)("multiple",!1),e.R50("ngModel",n.pagination.roleId),e.R7$(3),e.R50("ngModel",n.pagination.mobile),e.R7$(3),e.Y8G("items",n.userTypes)("multiple",!1),e.R50("ngModel",n.pagination.userType),e.R7$(3),e.Y8G("items",n.employees)("multiple",!1),e.R50("ngModel",n.pagination.employeeCode),e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderSearchShap)("loaderId",n.searchLoader),e.R7$(),e.R50("activeId",n.active),e.R7$(2),e.Y8G("ngbNavItem",1),e.R7$(4),e.JRh(n.pagination.totalItems),e.R7$(2),e.Y8G("ngbNavItem",2),e.R7$(4),e.Y8G("ngbNavOutlet",a)}},dependencies:[r.bT,h.qT,h.me,h.BC,h.cb,h.YS,h.vS,h.cV,d.s5,B.m,Q.b,J.w,Z.p,q.g,b.Mm,f.XI,ee.Ei,f.Tg,E.Cv,U.vr,d.Um,d.X9,d.sy,d.Gx,d.Ri,d.WA,d.m_,K.m,te.p,r.vh,b.D9],encapsulation:2})}}return s})();var ne=l(21413),P=l(37021),G=l(35335),O=l(45236),V=l(70980),W=l(99437),ie=l(18810);function ke(s,c){1&s&&(e.j41(0,"div",45),e.EFF(1," general.message.filedIdRequired"),e.k0s())}function Ue(s,c){1&s&&(e.j41(0,"div",45),e.EFF(1," general.message.filedIdRequired"),e.k0s())}function De(s,c){1&s&&(e.j41(0,"div",45),e.EFF(1," general.message.filedIdRequired"),e.k0s())}function Ne(s,c){if(1&s){const t=e.RV6();e.j41(0,"div",28)(1,"label",46),e.EFF(2,"securityManagement.user.password"),e.k0s(),e.j41(3,"input",47,7),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG(2);return e.DH7(a.form.password,n)||(a.form.password=n),e.Njj(n)}),e.k0s(),e.DNE(5,De,2,0,"div",31),e.k0s()}if(2&s){const t=e.sdS(4),i=e.XpG(2);e.R7$(3),e.R50("ngModel",i.form.password),e.R7$(2),e.Y8G("ngIf",t.invalid&&t.touched)}}function we(s,c){1&s&&(e.j41(0,"div",45),e.EFF(1," general.message.filedIdRequired"),e.k0s())}function Be(s,c){1&s&&(e.j41(0,"div",45),e.EFF(1," general.message.filedIdRequired"),e.k0s())}function Pe(s,c){if(1&s){const t=e.RV6();e.j41(0,"div",27)(1,"div",28)(2,"label",29),e.EFF(3,"securityManagement.user.name"),e.k0s(),e.j41(4,"input",30,2),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.name,n)||(a.form.name=n),e.Njj(n)}),e.k0s(),e.DNE(6,ke,2,0,"div",31),e.k0s(),e.j41(7,"div",28)(8,"label",32),e.EFF(9,"securityManagement.user.mobile"),e.k0s(),e.j41(10,"input",33,3),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.mobile,n)||(a.form.mobile=n),e.Njj(n)}),e.k0s()(),e.j41(12,"div",28)(13,"label",34),e.EFF(14,"securityManagement.user.userName"),e.k0s(),e.j41(15,"input",35,4),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.userName,n)||(a.form.userName=n),e.Njj(n)}),e.k0s(),e.DNE(17,Ue,2,0,"div",31),e.k0s(),e.DNE(18,Ne,6,2,"div",36),e.j41(19,"div",28)(20,"label",37),e.EFF(21,"securityManagement.user.employeeName"),e.k0s(),e.j41(22,"ng-select",38),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.employeeCode,n)||(a.form.employeeCode=n),e.Njj(n)}),e.k0s()(),e.j41(23,"div",28)(24,"label",39),e.EFF(25,"securityManagement.user.userType"),e.k0s(),e.j41(26,"ng-select",40,5),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.userType,n)||(a.form.userType=n),e.Njj(n)}),e.k0s(),e.DNE(28,we,2,0,"div",31),e.k0s(),e.j41(29,"div",28)(30,"label",39),e.EFF(31,"securityManagement.user.roleName"),e.k0s(),e.j41(32,"ng-select",41,6),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.roleId,n)||(a.form.roleId=n),e.Njj(n)}),e.k0s(),e.DNE(34,Be,2,0,"div",31),e.k0s(),e.j41(35,"div",42)(36,"label",43),e.EFF(37,"general.table.isActive"),e.k0s(),e.j41(38,"p-inputSwitch",44),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.isActive,n)||(a.form.isActive=n),e.Njj(n)}),e.k0s()()()}if(2&s){const t=e.sdS(5),i=e.sdS(27),n=e.sdS(33),a=e.XpG();e.R7$(4),e.R50("ngModel",a.form.name),e.R7$(2),e.Y8G("ngIf",t.invalid&&t.touched),e.R7$(4),e.R50("ngModel",a.form.mobile),e.R7$(5),e.R50("ngModel",a.form.userName),e.R7$(2),e.Y8G("ngIf",t.invalid&&t.touched),e.R7$(),e.Y8G("ngIf",!a.isEditForm),e.R7$(4),e.Y8G("items",a.employees)("multiple",!1),e.R50("ngModel",a.form.employeeCode),e.R7$(4),e.Y8G("items",a.userTypes)("multiple",!1),e.R50("ngModel",a.form.userType),e.R7$(2),e.Y8G("ngIf",i.invalid&&i.touched),e.R7$(4),e.Y8G("items",a.roles)("multiple",!1),e.R50("ngModel",a.form.roleId),e.R7$(2),e.Y8G("ngIf",n.invalid&&n.touched),e.R7$(4),e.R50("ngModel",a.form.isActive)}}let se=(()=>{class s{constructor(t,i,n,a,g,m,D,A){this.routerActive=t,this.translateService=i,this.baseService=n,this.authService=a,this.alertService=g,this.modalService=m,this.ngxLoader=D,this.router=A,this.editEmployee="securityManagement.user.editUser",this.addEmployee="securityManagement.user.addUser",this.titleOperation="securityManagement.user.titleOperation",this.keySelected="",this.assignUsers=[],this.times=[],this.shifts=[],this.searchForm="",this.jobTypes=[],this.weekDays=[],this.breadCrumbItems=[],this.form={},this.idForm=0,this.isResolveList=!0,this.employeeGroups=[],this.notifier=new ne.B,this.mainDelay=100,this.loaderSearchShap=o.cX,this.loaderOperationShap=o.$$,this.operationLoader=o.ZW,this.isEditForm=!1,this.userTypes=[],this.roles=[],this.employees=[]}ngOnDestroy(){this.notifier.next(),this.notifier.complete()}ngOnInit(){this.configRoute(),this.breadCrumbItems=[{label:"layout.sidebar.security",active:!1},{label:"securityManagement.user.title",active:!1,url:"/managment/users"},{label:this.isEditForm?"general.action.edit":"general.action.register",active:!0}],this.GetUserLookup()}configRoute(){this.routerActive.data.pipe((0,u.Q)(this.notifier)).subscribe(t=>{let i=t.data.data;i&&(this.isEditForm=!0,this.form=i)},()=>{this.alertService.error()})}OnSubmit(){this.validForm()&&(this.ngxLoader.startLoader(this.operationLoader),!0===this.isEditForm?this.editEntity():this.registerEntity())}validForm(){return!this.form.userName.includes(" ")||(this.alertService.error("securityManagement.user.userNameContainSpace"),!1)}mapForm(t){let i={...t};return i.id=i.userCode,i}mapRegisterForm(t){let i={...t};return i.userCode=0,i}registerEntity(){this.ngxLoader.startLoader(o.ZW);let t=this.mapRegisterForm(this.form);this.authService.register(t).pipe((0,P.O)(),(0,G.c)(this.mainDelay),(0,O.Z)(),(0,u.Q)(this.notifier),(0,V.j)(()=>this.ngxLoader.stopLoader(o.ZW)),(0,W.W)(i=>(0,ie.$)(i))).subscribe(i=>{i.success?(this.alertService.success(),this.router.navigateByUrl("/managment/users")):this.alertService.error("general.message."+i.message)},i=>{this.alertService.error("general.message."+i)})}editEntity(){this.ngxLoader.startLoader(o.ZW);let t=this.mapForm(this.form);this.baseService.edit(t.userCode,t).pipe((0,P.O)(),(0,G.c)(this.mainDelay),(0,O.Z)(),(0,u.Q)(this.notifier),(0,V.j)(()=>this.ngxLoader.stopLoader(o.ZW))).subscribe(i=>{i.success?this.alertService.success():this.alertService.error("general.message."+i.message)},i=>{this.alertService.error("general.message."+i)})}getTranslationText(t){let i="";return this.translateService.get(t).pipe((0,u.Q)(this.notifier)).subscribe(n=>{i=n}),i}GetUserLookup(){this.baseService.GetUserLookup().subscribe(t=>{this.roles=t.data.roles,this.employees=t.data.employees;let i=t.data.userTypes;i.forEach(n=>{n.name=this.getTranslationText("securityManagement.user."+n.name)}),this.userTypes=i},t=>{console.log(t)})}goBack(){this.router.navigateByUrl("/managment/users")}static{this.\u0275fac=function(i){return new(i||s)(e.rXU(x.nX),e.rXU(b.c$),e.rXU(w),e.rXU(T.J),e.rXU(_.u),e.rXU(d.Bq),e.rXU(E.eD),e.rXU(x.Ix))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-user-operation"]],decls:22,vars:10,consts:[["formEntity","ngForm"],["ModifierCustom","ngbNav"],["name","ngModel"],["mobile","ngModel"],["userName","ngModel"],["userType","ngModel"],["roleId","ngModel"],["password","ngModel"],[3,"title","breadcrumbItems"],[1,"col-12"],[1,"card"],[3,"hasProgressBar","fgsType","loaderId"],[3,"ngSubmit"],[1,"card-body"],["ngbNav","",1,"nav","nav-pills","nav-customs","nav-danger","mb-3",3,"activeId"],[3,"ngbNavItem"],["type","button",1,"btn","btn-primary",3,"click"],[1,"ri-arrow-left-line","align-bottom","me-2"],["translate","general.action.back"],["ngbNavContent",""],[1,"tab-content","text-muted"],[3,"ngbNavOutlet"],[1,"card-footer"],[1,"text-center"],["type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],[1,"row"],[1,"col-12","col-md-6"],["for","employeeName","translate","",1,"required","fw-bold","form-label"],["InputTirmFilter","","name","name","type","text","id","name","required","",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],["for","mobile","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","mobile","type","text","id","mobile",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["for","userName","translate","",1,"required","fw-bold","form-label"],["InputTirmFilter","","name","userName","type","text","id","userName","required","",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","col-12 col-md-6",4,"ngIf"],["translate","",1,"fw-bold","form-label","w-100"],["name","employeeCode","bindValue","employeeCode","bindLabel","employeeName",3,"ngModelChange","items","multiple","ngModel"],["translate","",1,"required","fw-bold","form-label","w-100"],["name","userType","bindValue","id","bindLabel","name","required","",3,"ngModelChange","items","multiple","ngModel"],["name","roleId","bindValue","id","bindLabel","name","required","",3,"ngModelChange","items","multiple","ngModel"],[1,"col-12","form-check"],["for","isActive","translate","",1,"fw-bold","form-label","w-100"],["name","isActive","inputId","isActive",3,"ngModelChange","ngModel"],["translate","",1,"text-danger","text-center"],["for","password","translate","",1,"required","fw-bold","form-label"],["InputTirmFilter","","name","password","type","text","id","password","required","",1,"form-control","fs-6",3,"ngModelChange","ngModel"]],template:function(i,n){if(1&i){const a=e.RV6();e.nrm(0,"app-breadcrumbs",8),e.nI1(1,"translate"),e.j41(2,"div",9)(3,"div",10),e.nrm(4,"ngx-ui-loader",11),e.j41(5,"form",12,0),e.bIt("ngSubmit",function(){return e.eBV(a),e.Njj(n.OnSubmit())}),e.j41(7,"div",13)(8,"ul",14,1)(10,"li",15)(11,"button",16),e.bIt("click",function(){return e.eBV(a),e.Njj(n.goBack())}),e.nrm(12,"i",17)(13,"span",18),e.k0s(),e.DNE(14,Pe,39,18,"ng-template",19),e.k0s()(),e.j41(15,"div",20),e.nrm(16,"div",21),e.k0s()(),e.j41(17,"div",22)(18,"div",23)(19,"button",24),e.nrm(20,"i",25)(21,"span",26),e.k0s()()()()()()}if(2&i){const a=e.sdS(9);e.FS9("title",0==n.isEditForm?n.addEmployee:e.bMT(1,8,n.editEmployee)),e.Y8G("breadcrumbItems",n.breadCrumbItems),e.R7$(4),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderOperationShap)("loaderId",n.operationLoader),e.R7$(4),e.Y8G("activeId",1),e.R7$(2),e.Y8G("ngbNavItem",1),e.R7$(6),e.Y8G("ngbNavOutlet",a)}},dependencies:[r.bT,h.qT,h.me,h.BC,h.cb,h.YS,h.vS,h.cV,B.m,b.Mm,k.HW,E.Cv,U.vr,d.Um,d.X9,d.sy,d.Gx,d.m_,K.m,b.D9],encapsulation:2})}}return s})();var re=l(7673);let Ge=(()=>{class s{constructor(t,i,n){this.router=t,this.userService=i,this.alertService=n}resolve(t,i){const a=this.router.getCurrentNavigation()?.extras?.state?.id;return""===a||null==a?(this.alertService.error(),this.router.navigateByUrl("/managment/users"),(0,re.of)(null)):this.userService.getById(a)}static{this.\u0275fac=function(i){return new(i||s)(e.KVO(x.Ix),e.KVO(w),e.KVO(_.u))}}static{this.\u0275prov=e.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})(),z=(()=>{class s extends p.d{constructor(t){super(t,j.c.apiUrl+"Roles/")}updatePermissions(t){return this.http.post(this.baseUrl+"UpdatePermissions",t)}static{this.\u0275fac=function(i){return new(i||s)(e.KVO(F.Qq))}}static{this.\u0275prov=e.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();var ae=l(90094);const Oe=()=>["role.export"],Ve=()=>["role.view"],Ae=()=>["role.assignPermission"],Xe=()=>["role.edit"],$e=()=>["role.delete"];function Ye(s,c){1&s&&(e.j41(0,"tr",24)(1,"th",25),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",26),e.nrm(4,"i",27),e.EFF(5," general.table.name "),e.k0s(),e.nrm(6,"th",28),e.k0s())}function Ke(s,c){if(1&s&&(e.nrm(0,"i",34),e.EFF(1),e.nI1(2,"date"),e.nrm(3,"br")(4,"i",35),e.EFF(5),e.nI1(6,"date"),e.nrm(7,"br")(8,"i",36),e.EFF(9)),2&s){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.i5U(2,3,t.creationTime,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",e.i5U(6,6,t.lastModificationTime,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",t.creatorName," ")}}function We(s,c){if(1&s){const t=e.RV6();e.j41(0,"button",37),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,a=e.XpG();return e.Njj(a.goPermission(n.id))}),e.nrm(1,"i",38),e.k0s()}}function ze(s,c){if(1&s){const t=e.RV6();e.j41(0,"button",39),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,a=e.XpG(),g=e.sdS(21);return e.Njj(a.EditModel(n,g))}),e.nrm(1,"i",40),e.k0s()}}function He(s,c){if(1&s){const t=e.RV6();e.j41(0,"button",41),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,a=e.XpG(),g=e.sdS(23);return e.Njj(a.openModal(n.id,g))}),e.nrm(1,"i",42),e.k0s()}}function Qe(s,c){if(1&s&&(e.j41(0,"tr",29)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.DNE(6,Ke,10,9,"ng-template",null,3,e.C5r),e.nrm(8,"i",30),e.DNE(9,We,2,0,"button",31)(10,ze,2,0,"button",32)(11,He,2,0,"button",33),e.k0s()()),2&s){const t=c.$implicit,i=c.rowIndex,n=e.sdS(7);e.R7$(2),e.JRh(i+1),e.R7$(2),e.JRh(t.nameAr),e.R7$(4),e.Y8G("ngbTooltip",n),e.R7$(),e.Y8G("hasPermission",e.lJ4(6,Ae)),e.R7$(),e.Y8G("hasPermission",e.lJ4(7,Xe)),e.R7$(),e.Y8G("hasPermission",e.lJ4(8,$e))}}function Je(s,c){1&s&&(e.j41(0,"div",43),e.EFF(1," general.table.noData"),e.k0s())}function Ze(s,c){if(1&s){const t=e.RV6();e.j41(0,"div",44)(1,"div",45),e.nrm(2,"ngb-pagination-info",46),e.j41(3,"table-length",47),e.bIt("lengthChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",48)(5,"ngb-pagination",49),e.bIt("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.pagination.pageNumber,n)||(a.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&s){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function qe(s,c){1&s&&(e.j41(0,"span",69),e.EFF(1,"general.action.register "),e.k0s())}function et(s,c){1&s&&(e.j41(0,"span",69),e.EFF(1,"general.action.edit "),e.k0s())}function tt(s,c){1&s&&(e.j41(0,"div",70),e.EFF(1," general.message.filedIdRequired"),e.k0s())}function nt(s,c){1&s&&(e.j41(0,"div",70),e.EFF(1," general.message.filedIdRequired"),e.k0s())}function it(s,c){if(1&s){const t=e.RV6();e.j41(0,"div",50)(1,"div",51)(2,"h4",52),e.DNE(3,qe,2,0,"span",53)(4,et,2,0,"span",53),e.j41(5,"span",54),e.EFF(6),e.k0s()(),e.j41(7,"button",55),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss("Cross click"))}),e.k0s()(),e.j41(8,"div",56),e.nrm(9,"ngx-ui-loader",57),e.j41(10,"form",58,4),e.bIt("submit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.OnSubmit())}),e.j41(12,"div",59)(13,"label",60),e.EFF(14,"general.table.name"),e.k0s(),e.j41(15,"input",61,5),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.nameAr,n)||(a.form.nameAr=n),e.Njj(n)}),e.k0s(),e.DNE(17,tt,2,0,"div",62),e.k0s(),e.j41(18,"div",59)(19,"label",63),e.EFF(20,"securityManagement.role.nameDb"),e.k0s(),e.j41(21,"input",64,6),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.name,n)||(a.form.name=n),e.Njj(n)}),e.k0s(),e.DNE(23,nt,2,0,"div",62),e.k0s(),e.j41(24,"div",65)(25,"button",66),e.nrm(26,"i",67)(27,"span",68),e.k0s()()()()()}if(2&s){const t=e.sdS(11),i=e.sdS(16),n=e.sdS(22),a=e.XpG();e.R7$(3),e.Y8G("ngIf",!a.isEditForm),e.R7$(),e.Y8G("ngIf",a.isEditForm),e.R7$(2),e.JRh(a.titleOperation),e.R7$(3),e.Y8G("hasProgressBar",!1)("fgsType",a.loaderOperationShap)("loaderId",a.operationLoader),e.R7$(6),e.R50("ngModel",a.form.nameAr),e.R7$(2),e.Y8G("ngIf",i.invalid&&i.touched),e.R7$(4),e.R50("ngModel",a.form.name),e.R7$(2),e.Y8G("ngIf",n.invalid&&n.touched),e.R7$(2),e.Y8G("disabled",!t.valid)}}function st(s,c){if(1&s){const t=e.RV6();e.j41(0,"delete-modal",71),e.bIt("deleteConfirm",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.DeleteConfirm())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}}let rt=(()=>{class s extends N.w{constructor(t,i,n,a,g,m,D,A,$,H,vt){super(t,i,D,n,a,g,m),this.baseService=n,this.excelService=$,this.router=H,this.encrptAervice=vt,this.title="securityManagement.role.title",this.titleOperation="securityManagement.role.titleOperation",this.keySelected="",this.assignUsers=[],this.times=[],this.employees=[],this.searchForm={},this.isResolveList=!0,this.employeeGroups=[],this.configRoute()}onUpdateIsActive(t){this.baseService.updateActive(t).pipe((0,u.Q)(this.notifier)).subscribe(i=>{i?this.alertService.success():this.alertService.error("general.message."+i)},i=>{this.alertService.error()})}ngOnInitMore(){}mapForm(t){let i={...t};return i.nameEn=i.nameAr,i}mapRegisterForm(t){let i={...t};return i.id=0,i.nameEn=i.nameAr,i}OnSearch(t){this.ngxLoader.startLoader(o.a7),this.loadentities()}onSearch(){this.ngxLoader.startLoader(o.a7),this.loadentities()}configRoute(){this.routerActive.data.pipe((0,u.Q)(this.notifier)).subscribe(t=>{this.entities=t.data.data,this.pagination.totalItems=t.data.totalItems},()=>{this.alertService.error()})}mapExcel(){let t=[];return this.entities?.forEach(i=>{t.push({id:i.id,name:i.nameAr})}),t}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,"Role",[])}EditModel(t,i,n="md"){this.isEditForm=!0,this.form={nameAr:t.nameAr,name:t.name,id:t.id,notes:t.notes},this.modalService.open(i,{centered:!0,size:n})}editEntity(){let t=this.mapForm(this.form);this.baseService.editPut(t.id,t).pipe((0,P.O)(),(0,G.c)(this.mainDelay),(0,O.Z)(),(0,u.Q)(this.notifier),(0,V.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(i=>{i.success?this.submitFunished():this.alertService.error("general.message."+i.message)},i=>{this.alertService.error("general.message."+i)})}goPermission(t){let i=this.encrptAervice.encode(t.toString());this.router.navigateByUrl("/managment/roles/permissions/"+i,{state:{id:t}})}static{this.\u0275fac=function(i){return new(i||s)(e.rXU(x.nX),e.rXU(b.c$),e.rXU(z),e.rXU(_.u),e.rXU(r.vh),e.rXU(E.eD),e.rXU(d.Bq),e.rXU(e.gRc),e.rXU(Y.V),e.rXU(x.Ix),e.rXU(ae._))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-role"]],features:[e.Vt3],decls:24,vars:20,consts:[["tableMaster",""],["operation",""],["deleteModal",""],["tooltipContent",""],["formEntity","ngForm"],["nameAr","ngModel"],["name","ngModel"],[3,"title","breadcrumbItems"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],[3,"reset","search","exportXlsx","addNew","exportPermission","addPermission","totalItems","title"],["control",""],[1,"col-md-3","mb-2"],[1,"search-box"],["type","search","id","filterValue","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["translate","",2,"width",".5%"],["pSortableColumn","employeeCode","translate","",2,"width","10%"],[1,"ri-expand-up-down-line"],["translate","",2,"width","10%"],[1,"fs-5"],["tooltipPosition","top",1,"mdi","mdi-cog-outline","text-muted","fs-16","align-middle","me-1",3,"ngbTooltip"],["class","btn btn-sm btn-soft-success remove-list",3,"click",4,"hasPermission"],["class","btn btn-sm btn-soft-info edit-list mx-2",3,"click",4,"hasPermission"],["class","btn btn-sm btn-soft-danger remove-list",3,"click",4,"hasPermission"],[1,"ri-history-fill","text-warning"],[1,"ri-history-fill","text-danger"],[1,"ri-user-location-fill","text-primary"],[1,"btn","btn-sm","btn-soft-success","remove-list",3,"click"],[1,"ri-secure-payment-line","align-bottom"],[1,"btn","btn-sm","btn-soft-info","edit-list","mx-2",3,"click"],[1,"ri-pencil-fill","align-bottom","mx-1"],[1,"btn","btn-sm","btn-soft-danger","remove-list",3,"click"],[1,"ri-delete-bin-5-fill","align-bottom"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["class","fw-bold fs-4","translate","",4,"ngIf"],["translate",""],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"hasProgressBar","fgsType","loaderId"],[3,"submit"],[1,"mb-3"],["for","nameAr","translate","",1,"required","fw-bold","form-label"],["InputTirmFilter","","name","nameAr","type","text","id","nameAr","required","",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],["for","name","translate","",1,"required","fw-bold","form-label"],["InputTirmFilter","","name","name","type","text","id","name","required","",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,"text-center"],["type","submit","type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],["translate","",1,"fw-bold","fs-4"],["translate","",1,"text-danger","text-center"],[3,"deleteConfirm","dismiss"]],template:function(i,n){if(1&i){const a=e.RV6();e.nrm(0,"app-breadcrumbs",7),e.nI1(1,"translate"),e.j41(2,"div",8)(3,"div",9)(4,"div",10)(5,"base-filter",11),e.bIt("reset",function(){return e.eBV(a),e.Njj(n.onReset())})("search",function(){return e.eBV(a),e.Njj(n.onSearch())})("exportXlsx",function(){return e.eBV(a),e.Njj(n.onExportXlsx())})("addNew",function(){e.eBV(a);const m=e.sdS(21);return e.Njj(n.openModalTitle(m,"md"))}),e.qex(6,12),e.j41(7,"div",13)(8,"div",14)(9,"input",15),e.nI1(10,"translate"),e.mxI("ngModelChange",function(m){return e.eBV(a),e.DH7(n.pagination.filterValue,m)||(n.pagination.filterValue=m),e.Njj(m)}),e.k0s(),e.nrm(11,"i",16),e.k0s()(),e.bVm(),e.k0s(),e.j41(12,"div",17)(13,"div",18)(14,"p-table",19,0),e.bIt("onLazyLoad",function(m){return e.eBV(a),e.Njj(n.tableChange(m))})("selectionChange",function(m){return e.eBV(a),e.Njj(n.onSelectionChange(m))}),e.DNE(16,Ye,7,0,"ng-template",20)(17,Qe,12,9,"ng-template",21),e.k0s()(),e.DNE(18,Je,2,0,"div",22)(19,Ze,6,8,"div",23),e.k0s()()()(),e.DNE(20,it,28,11,"ng-template",null,1,e.C5r)(22,st,1,0,"ng-template",null,2,e.C5r)}2&i&&(e.FS9("title",e.bMT(1,14,n.title)),e.Y8G("breadcrumbItems",n.breadCrumbItems),e.R7$(5),e.Y8G("exportPermission",e.lJ4(18,Oe))("addPermission",e.lJ4(19,Ve))("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(4),e.FS9("placeholder",e.bMT(10,16,"task.tasklist.subject")),e.R50("ngModel",n.pagination.filterValue),e.R7$(5),e.Y8G("value",n.entities)("rows",n.pagination.pageSize)("lazy",!0)("totalRecords",n.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",n.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems>0))},dependencies:[r.bT,h.qT,h.me,h.BC,h.cb,h.YS,h.vS,h.cV,d.s5,B.m,Q.b,J.w,Z.p,q.g,b.Mm,f.XI,ee.Ei,f.Tg,E.Cv,d.md,K.m,te.p,r.vh,b.D9],encapsulation:2})}}return s})();var oe=l(56131);let at=(()=>{class s extends oe.E{constructor(t,i,n){super(t,i,n)}static{this.\u0275fac=function(i){return new(i||s)(e.KVO(x.Ix),e.KVO(z),e.KVO(_.u))}}static{this.\u0275prov=e.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})(),ot=(()=>{class s extends oe.E{constructor(t,i,n){super(t,i,n)}static{this.\u0275fac=function(i){return new(i||s)(e.KVO(x.Ix),e.KVO(w),e.KVO(_.u))}}static{this.\u0275prov=e.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})(),lt=(()=>{class s extends p.d{constructor(t){super(t,j.c.apiUrl+"ClaimApp/")}GetClaimsOrg(t){return this.http.get(this.baseUrl+"GetClaimsOrg?roleId="+t)}GetUserClaimsForRoleOrg(t){return this.http.get(this.baseUrl+"GetUserClaimsForRoleOrg/"+t)}static{this.\u0275fac=function(i){return new(i||s)(e.KVO(F.Qq))}}static{this.\u0275prov=e.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})(),mt=(()=>{class s{constructor(t,i,n){this.router=t,this.baseService=i,this.alertService=n}resolve(t){const n=this.router.getCurrentNavigation()?.extras?.state?.id;return this.baseService.GetClaimsOrg(n).pipe((0,W.W)(a=>(this.router.navigate(["/management/roles"]),this.alertService.error(),(0,re.of)(null))))}static{this.\u0275fac=function(i){return new(i||s)(e.KVO(x.Ix),e.KVO(lt),e.KVO(_.u))}}static{this.\u0275prov=e.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();const ct=s=>({"bg-light":s});function dt(s,c){if(1&s){const t=e.RV6();e.qex(0),e.j41(1,"div",32)(2,"div",33)(3,"label",34),e.EFF(4),e.k0s()(),e.j41(5,"div",29)(6,"p-checkbox",35),e.mxI("ngModelChange",function(n){const a=e.eBV(t).$implicit;return e.DH7(a.isSelected,n)||(a.isSelected=n),e.Njj(n)}),e.k0s()()(),e.bVm()}if(2&s){const t=c.$implicit;e.R7$(3),e.FS9("for",t.claimValue),e.R7$(),e.SpI("general.permission.",t.key,""),e.R7$(2),e.FS9("name",t.claimValue),e.FS9("inputId",t.claimValue),e.R50("ngModel",t.isSelected),e.Y8G("binary",!0)}}function pt(s,c){if(1&s){const t=e.RV6();e.qex(0),e.j41(1,"div",24)(2,"div",25)(3,"div",26)(4,"div",27)(5,"h6",28),e.EFF(6),e.nI1(7,"translate"),e.k0s()(),e.j41(8,"div",29)(9,"p-checkbox",30),e.bIt("onChange",function(n){const a=e.eBV(t).$implicit,g=e.XpG().$implicit,m=e.XpG();return e.Njj(m.selectAll(n.checked,g.moduleAppId,a.screenAppId))}),e.k0s()()(),e.j41(10,"div",31,0),e.DNE(12,dt,7,6,"ng-container",16),e.k0s()()(),e.bVm()}if(2&s){const t=c.$implicit,i=c.index;e.R7$(2),e.Y8G("ngClass",e.eq3(7,ct,i%2==0)),e.R7$(4),e.SpI("",e.bMT(7,5,t.screenAppNameEn)," "),e.R7$(3),e.Y8G("binary",!0)("inputId",t.screenAppId),e.R7$(3),e.Y8G("ngForOf",t.claims)}}function gt(s,c){if(1&s){const t=e.RV6();e.qex(0),e.j41(1,"div",17)(2,"div",18)(3,"div",19)(4,"button",20),e.bIt("click",function(n){return e.eBV(t),e.Njj(n.stopPropagation())}),e.j41(5,"p-checkbox",21),e.bIt("onChange",function(n){const a=e.eBV(t).$implicit,g=e.XpG();return e.Njj(g.selectAllModule(n.checked,a.moduleAppId))}),e.k0s(),e.j41(6,"span",22),e.EFF(7),e.nI1(8,"translate"),e.k0s()()(),e.j41(9,"div",23)(10,"div",2),e.DNE(11,pt,13,9,"ng-container",16),e.k0s()()()(),e.bVm()}if(2&s){const t=c.$implicit;e.R7$(),e.Y8G("closeOthers",!1),e.R7$(),e.FS9("id",t.id),e.R7$(3),e.Y8G("binary",!0),e.R7$(2),e.JRh(e.bMT(8,5,"layout.sidebar."+t.moduleAppNameEn)),e.R7$(4),e.Y8G("ngForOf",t.screenClaims)}}const ht=[{path:"users",component:Le,resolve:{data:ot},canActivate:[S],data:{roles:["admin"]}},{path:"users/edit",component:se,resolve:{data:Ge},canActivate:[S],data:{roles:["admin"]}},{path:"users/register",component:se,canActivate:[S],data:{roles:["admin"]}},{path:"roles",component:rt,resolve:{data:at},canActivate:[S],data:{roles:["admin"]}},{path:"roles/permissions/:id",component:(()=>{class s{constructor(t,i,n,a,g,m,D,A,$){this.routerActive=t,this.translateService=i,this.baseService=n,this.authService=a,this.alertService=g,this.modalService=m,this.ngxLoader=D,this.router=A,this.encrptAervice=$,this.updatePermission="securityManagement.permission.updatePermission",this.titleOperation="securityManagement.user.titleOperation",this.keySelected="",this.assignUsers=[],this.times=[],this.shifts=[],this.searchForm="",this.jobTypes=[],this.weekDays=[],this.breadCrumbItems=[],this.form={},this.idForm=0,this.isResolveList=!0,this.employeeGroups=[],this.notifier=new ne.B,this.mainDelay=100,this.loaderSearchShap=o.cX,this.loaderOperationShap=o.$$,this.operationLoader=o.ZW,this.isEditForm=!1,this.userTypes=[],this.roles=[],this.permissions=[],this.searchLoader=o.a7}ngOnDestroy(){this.notifier.next(),this.notifier.complete()}ngOnInit(){this.configRoute(),this.breadCrumbItems=[{label:"layout.sidebar.security",active:!1},{label:"securityManagement.role.title",active:!1,url:"/managment/roles"},{label:this.updatePermission,active:!0}],console.log(this.routerActive.snapshot.paramMap.get("id")),this.roleId=this.encrptAervice.decode(this.routerActive.snapshot.paramMap.get("id"))}configRoute(){this.routerActive.data.pipe((0,u.Q)(this.notifier)).subscribe(t=>{this.permissions=t.data.data},()=>{this.alertService.error()})}OnSubmit(){this.ngxLoader.startLoader(this.operationLoader),!0===this.isEditForm?this.editEntity():this.registerEntity()}mapForm(t){let i={...t};return i.id=i.userCode,i}mapRegisterForm(t){let i={...t};return i.userCode=0,i}registerEntity(){this.ngxLoader.startLoader(o.ZW);let t=this.mapRegisterForm(this.form);this.authService.register(t).pipe((0,P.O)(),(0,G.c)(this.mainDelay),(0,O.Z)(),(0,u.Q)(this.notifier),(0,V.j)(()=>this.ngxLoader.stopLoader(o.ZW)),(0,W.W)(i=>(0,ie.$)(i))).subscribe(i=>{i.success?(this.alertService.success(),this.router.navigateByUrl("/managment/users")):this.alertService.error("general.message."+i.message)},i=>{this.alertService.error("general.message."+i)})}editEntity(){this.ngxLoader.startLoader(o.ZW);let t=this.mapForm(this.form);this.baseService.edit(t.userCode,t).pipe((0,P.O)(),(0,G.c)(this.mainDelay),(0,O.Z)(),(0,u.Q)(this.notifier),(0,V.j)(()=>this.ngxLoader.stopLoader(o.ZW))).subscribe(i=>{i.success?this.alertService.success():this.alertService.error("general.message."+i.message)},i=>{this.alertService.error("general.message."+i)})}getTranslationText(t){let i="";return this.translateService.get(t).pipe((0,u.Q)(this.notifier)).subscribe(n=>{i=n}),i}selectAllModule(t,i){this.permissions.find(a=>a.moduleAppId==i).screenClaims.forEach(a=>{a.claims.forEach(g=>{g.isSelected=t})})}goBack(){this.router.navigateByUrl("/managment/roles")}selectAll(t,i,n){this.permissions.find(m=>m.moduleAppId==i).screenClaims.find(m=>m.screenAppId==n).claims.forEach(m=>{m.isSelected=t})}updatetPermission(){let t={};t.roleId=this.roleId,t.permisions=[],this.permissions.forEach(i=>{i.screenClaims.forEach(n=>{let a=n.claims.filter(g=>!0===g.isSelected).map(g=>({value:g.claimValue,type:g.claimType}));a.length>0&&t.permisions.push(...a)})}),this.ngxLoader.startLoader(this.searchLoader),this.baseService.updatePermissions(t).pipe((0,P.O)(),(0,G.c)(this.mainDelay),(0,O.Z)(),(0,u.Q)(this.notifier),(0,V.j)(()=>this.ngxLoader.stopLoader(this.searchLoader))).subscribe(()=>{this.alertService.success()},i=>{this.alertService.error(i)})}static{this.\u0275fac=function(i){return new(i||s)(e.rXU(x.nX),e.rXU(b.c$),e.rXU(z),e.rXU(T.J),e.rXU(_.u),e.rXU(d.Bq),e.rXU(E.eD),e.rXU(x.Ix),e.rXU(ae._))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-role-permission"]],decls:17,vars:8,consts:[["containerRef",""],[3,"title","breadcrumbItems"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],[1,"card-body","p-1"],[1,"card-header","border-0"],[1,"d-flex","align-items-center","mb-2"],[1,"card-title","mb-0","flex-grow-1","text-center"],["type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"click"],[1,"ri-arrow-left-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.back"],["type","submit",1,"btn","btn-success","btn-label","waves-effect","waves-light","rounded-pill","mx-3",3,"click"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],[3,"hasProgressBar","fgsType","loaderId"],[4,"ngFor","ngForOf"],["ngbAccordion","",1,"custom-accordionwithicon","accordion-border-box",3,"closeOthers"],["ngbAccordionItem","",3,"id"],["ngbAccordionHeader","",1,"accordion-header","border-0","bg-transparent"],["ngbAccordionButton","",3,"click"],["inputId","89",3,"onChange","binary"],[1,"mx-1"],["ngbAccordionCollapse",""],[1,"col-12","col-md-3","my-2"],[1,"card",3,"ngClass"],[1,"row","m-0","py-2","header-permission","align-items-center","text-left"],[1,"col-10"],["translate","",1,"card-title","fs-4","fw-bold","m-0"],[1,"col-2","text-right"],[3,"onChange","binary","inputId"],[1,"card-body",2,"display","block"],[1,"row","justify-content-between"],[1,"col-10","text-left"],["translate","",1,"form-label","fs-6",3,"for"],[3,"ngModelChange","ngModel","name","binary","inputId"]],template:function(i,n){1&i&&(e.nrm(0,"app-breadcrumbs",1),e.nI1(1,"translate"),e.j41(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"button",9),e.bIt("click",function(){return n.goBack()}),e.nrm(10,"i",10)(11,"span",11),e.k0s(),e.j41(12,"button",12),e.bIt("click",function(){return n.updatetPermission()}),e.nrm(13,"i",13)(14,"span",14),e.k0s()()()(),e.nrm(15,"ngx-ui-loader",15),e.DNE(16,gt,12,7,"ng-container",16),e.k0s()()()()),2&i&&(e.FS9("title",e.bMT(1,6,n.updatePermission)),e.Y8G("breadcrumbItems",n.breadCrumbItems),e.R7$(15),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderOperationShap)("loaderId",n.searchLoader),e.R7$(),e.Y8G("ngForOf",n.permissions))},dependencies:[r.YU,r.Sq,h.BC,h.vS,B.m,b.Mm,I.Sc,E.Cv,d.WP,d.r6,d.tW,d.x7,d.$R,b.D9],encapsulation:2})}}return s})(),resolve:{data:mt},canActivate:[S],data:{roles:["admin"]}}];let ut=(()=>{class s{static{this.\u0275fac=function(i){return new(i||s)}}static{this.\u0275mod=e.$C({type:s})}static{this.\u0275inj=e.G2t({imports:[x.iI.forChild(ht),x.iI]})}}return s})();var _t=l(71144),ft=l(38542);let bt=(()=>{class s{static{this.\u0275fac=function(i){return new(i||s)}}static{this.\u0275mod=e.$C({type:s})}static{this.\u0275inj=e.G2t({imports:[r.MD,h.YN,h.X1,d.zH,d.Gk,d.h_,d.c9,C.A,M.JG,v.ND,R.r,ut,y.G,b.h,f.bG,I.q4,k.H_,d.c9,E.th,U.MQ,d.n8,d.Pv,_t.j,d._f,d.HC,ft.S]})}}return s})()},40724:(X,L,l)=>{l.d(L,{b:()=>x});var r=l(54438),h=l(8147),d=l(60177),C=l(69005),M=l(94575);const v=[[["","menuBtn",""]],[["","control",""]]],R=["[menuBtn]","[control]"];function y(e,T){1&e&&(r.j41(0,"span"),r.EFF(1),r.nI1(2,"translate"),r.k0s()),2&e&&(r.R7$(),r.JRh(r.bMT(2,1,"general.table.all")))}function b(e,T){if(1&e){const _=r.RV6();r.j41(0,"a",17),r.bIt("click",function(){r.eBV(_),r.XpG(2);const u=r.sdS(11);return r.Njj(u.toggle())}),r.nrm(1,"i",18)(2,"span",19),r.k0s()}if(2&e){const _=r.XpG(2);r.BMQ("aria-expanded",!_.isCollapsed)}}function f(e,T){if(1&e){const _=r.RV6();r.j41(0,"div",21)(1,"button",22),r.nrm(2,"i",23)(3,"span",24),r.k0s(),r.j41(4,"ul",25)(5,"li",26),r.bIt("click",function(){r.eBV(_);const u=r.XpG(3);return r.Njj(u.onExportXlsx())}),r.j41(6,"a",27),r.nrm(7,"span",28),r.k0s()(),r.j41(8,"li",26),r.bIt("click",function(){r.eBV(_);const u=r.XpG(3);return r.Njj(u.onExportPDF())}),r.j41(9,"a",27),r.nrm(10,"span",29),r.k0s()()()()}if(2&e){const _=r.XpG(3);r.FS9("placement","en"===_.lang?"bottom-start":"bottom-end"),r.R7$(),r.Y8G("disabled",_.totalItems<=0)}}function I(e,T){if(1&e&&(r.qex(0),r.DNE(1,f,11,2,"div",20),r.bVm()),2&e){const _=r.XpG(2);r.R7$(),r.Y8G("hasPermission",_.exportPermission)}}function k(e,T){if(1&e){const _=r.RV6();r.j41(0,"a",31),r.bIt("click",function(){r.eBV(_);const u=r.XpG(3);return r.Njj(u.onAddNew())}),r.nrm(1,"i",32),r.j41(2,"span"),r.EFF(3),r.nI1(4,"translate"),r.k0s()()}if(2&e){const _=r.XpG(3);r.R7$(3),r.JRh(r.bMT(4,1,_.newLocal))}}function E(e,T){if(1&e&&(r.qex(0),r.DNE(1,k,5,3,"a",30),r.bVm()),2&e){const _=r.XpG(2);r.R7$(),r.Y8G("hasPermission",_.addPermission)}}function U(e,T){if(1&e&&(r.j41(0,"div",15),r.DNE(1,b,3,1,"a",16)(2,I,2,1,"ng-container",4)(3,E,2,1,"ng-container",4),r.k0s()),2&e){const _=r.XpG();r.R7$(),r.Y8G("ngIf",_.showSearch),r.R7$(),r.Y8G("ngIf",_.showExport),r.R7$(),r.Y8G("ngIf",_.showAdd)}}let x=(()=>{class e{constructor(_){this.translateService=_,this.totalItems=0,this.title="",this.titleMore="",this.newLocal="general.action.addNew",this.data=[],this.addPermission=[],this.exportPermission=[],this.showSearch=!0,this.showExport=!0,this.showAdd=!0,this.showAllStr=!0,this.addNew=new r.bkB,this.exportXlsx=new r.bkB,this.exportPDF=new r.bkB,this.search=new r.bkB,this.reset=new r.bkB,this.showAction=!0,this.isCollapsed=!0,this.lang=this.translateService.currentLang}ngOnInit(){}onAddNew(){this.addNew.emit(!0)}onSearch(){this.search.emit(!0)}onExportXlsx(){this.exportXlsx.emit(!0)}onExportPDF(){this.exportPDF.emit(!0)}onReset(){this.reset.emit(!0)}static{this.\u0275fac=function(S){return new(S||e)(r.rXU(h.c$))}}static{this.\u0275cmp=r.VBU({type:e,selectors:[["base-filter"]],inputs:{totalItems:"totalItems",title:"title",titleMore:"titleMore",newLocal:"newLocal",data:"data",addPermission:"addPermission",exportPermission:"exportPermission",showSearch:"showSearch",showExport:"showExport",showAdd:"showAdd",showAllStr:"showAllStr",showAction:"showAction"},outputs:{addNew:"addNew",exportXlsx:"exportXlsx",exportPDF:"exportPDF",search:"search",reset:"reset"},ngContentSelectors:R,decls:21,vars:7,consts:[["collapse","ngbCollapse"],[1,"card-header","border-0"],[1,"row","align-items-center","mb-2","justify-content-between"],[1,"col-12","col-md-3","card-title","mb-0","flex-grow-1"],[4,"ngIf"],["class","col-12 col-md-6 text-right",4,"ngIf"],["id","collapseExample",1,"collaps","show",3,"ngbCollapseChange","ngbCollapse"],[1,"row"],[1,"col-12","col-md-2","text-center","mb-2","d-flex","text-sm-center","text-md-left"],["type","button",1,"btn","w-sm-100","w-md-auto","btn-primary","btn-sm",3,"click"],[1,"ri-file-search-fill","me-1","align-bottom"],["translate","general.action.search"],["type","button",1,"btn","btn-danger","w-sm-100","w-md-auto","mx-1","btn-sm",3,"click"],[1,"ri-equalizer-fill","me-1","align-bottom"],["translate","general.action.clear"],[1,"col-12","col-md-6","text-right"],["class","btn btn-success  mx-1","data-bs-toggle","collapse","href","javascript:void(0);",3,"click",4,"ngIf"],["data-bs-toggle","collapse","href","javascript:void(0);",1,"btn","btn-success","mx-1",3,"click"],[1,"ri-filter-2-line","align-bottom"],["translate","general.action.filter"],["class","dropdown d-inline","ngbDropdown","",3,"placement",4,"hasPermission"],["ngbDropdown","",1,"dropdown","d-inline",3,"placement"],["ngbDropdownToggle","","type","button",1,"btn","btn-info","mx-2","me-4",3,"disabled"],[1,"ri-chat-download-line","me-1","align-bottom"],["translate","general.action.export"],["aria-labelledby","dropdownMenuButton1","ngbDropdownMenu","",1,"dropdown-menu"],[3,"click"],["href","javascript:void(0);",1,"dropdown-item"],["translate","general.action.xlxs"],["translate","general.action.pdf"],["class","btn btn-danger","href","javascript:void(0);",3,"click",4,"hasPermission"],["href","javascript:void(0);",1,"btn","btn-danger",3,"click"],[1,"ri-add-line","align-bottom"]],template:function(S,u){if(1&S){const N=r.RV6();r.NAR(v),r.j41(0,"div",1)(1,"div",2)(2,"h5",3)(3,"span"),r.SdG(4),r.k0s(),r.j41(5,"span"),r.DNE(6,y,3,3,"span",4),r.EFF(7),r.nI1(8,"translate"),r.k0s()(),r.DNE(9,U,4,3,"div",5),r.k0s(),r.j41(10,"div",6,0),r.mxI("ngbCollapseChange",function(p){return r.eBV(N),r.DH7(u.isCollapsed,p)||(u.isCollapsed=p),r.Njj(p)}),r.j41(12,"div",7),r.SdG(13,1),r.j41(14,"div",8)(15,"button",9),r.bIt("click",function(){return r.eBV(N),r.Njj(u.onSearch())}),r.nrm(16,"i",10)(17,"span",11),r.k0s(),r.j41(18,"button",12),r.bIt("click",function(){return r.eBV(N),r.Njj(u.onReset())}),r.nrm(19,"i",13)(20,"span",14),r.k0s()()()()()}2&S&&(r.R7$(6),r.Y8G("ngIf",u.showAllStr),r.R7$(),r.Lme(" ",r.bMT(8,5,u.title)," ",u.titleMore,""),r.R7$(2),r.Y8G("ngIf",u.showAction),r.R7$(),r.R50("ngbCollapse",u.isCollapsed))},dependencies:[d.bT,C.tg,C.do,C.U0,h.Mm,C.$G,M.p,h.D9],encapsulation:2})}}return e})()},75622:(X,L,l)=>{l.d(L,{w:()=>S});var r=l(21413),h=l(56977),d=l(37021),C=l(35335),M=l(45236),v=l(70980),R=l(99437),y=l(18810),b=l(45286),f=l(36158),I=l(54438),k=l(51188),E=l(8147),U=l(69005),x=l(67569),e=l(3888),T=l(60177),_=l(1530);let S=(()=>{class u{constructor(o,p,j,F,w,Y,B){this.routerActive=o,this.translateService=p,this.modalService=j,this.baseService=F,this.alertService=w,this.datePipe=Y,this.ngxLoader=B,this.title="",this.mainDelay=50,this.operationId=0,this.entities=[],this.selectedRow=[],this.pagination={pageNumber:1,pageSize:10},this.notifier=new r.B,this.checkAll=!1,this.checkOne=!1,this.checkMore=!1,this.loader=!1,this.form={},this.isEditForm=!1,this.draw=1,this.index=0,this.lengthSelect=0,this.screenName="",this.filterToggle=!0,this.start=1,this.startFirstLoad=!0,this.btnDisabled=!0,this.loaderSearchShap=f.cX,this.loaderOperationShap=f.$$,this.operationLoader=f.ZW,this.loaderDeleteShap=f.jg,this.mainTable=f.uG,this.searchLoader=f.a7,this.deleteLoader=f.Fq,this.langArabic="ar",this.paymentTypes=[],this.tableLengthSelect=[10,20,30,50,100,500,1e3],this.maxSizePagination=10,this.isResolveList=!1,this.countLoad=0,this.activeList=[{id:1,name:"active"},{id:2,name:"noActive"}],this.pagination.pageSize=10,this.pagination.pageNumber=1}ngOnInit(){this.activeList.forEach(o=>{o.name=this.getTranslationText("general.table."+o.name)}),this.lang=this.translateService.currentLang,this.translateConfig(),this.ngOnInitMore()}ngOnInitMore(){}routeDataConfig(){this.routerActive.data.pipe((0,h.Q)(this.notifier)).subscribe(o=>{this.entities=o.data.result,this.pagination=o.data.pagination,this.pagination.pageNumber=1,this.pagination.pageSize=10,this.ngxLoader.stopLoader(f.a7)},o=>{this.alertService.error()})}translateConfig(){this.translateService.onLangChange.pipe((0,h.Q)(this.notifier)).subscribe(o=>{this.lang=o.lang})}getTranslationText(o){let p="";return this.translateService.get(o).pipe((0,h.Q)(this.notifier)).subscribe(j=>{p=j}),p}ngAfterViewInit(){this.ngAfterViewInitMore()}ngAfterViewInitMore(){}getRenderString(o){return null!=o?o.substring(0,10)+"...":""}getRenderIndex(o){return this.index++,this.index}successDataTable(o){this.ngxLoader.stopLoader(f.a7),this.pagination.totalItems=o.data.pagination.totalItems,this.startFirstLoad=!1}errorDataTable(){this.ngxLoader.stopLoader(f.a7),this.alertService.error()}openModalTitle(o,p="md"){this.isEditForm=!1,this.form={},this.modalService.open(o,{centered:!0,size:p})}openModal(o,p,j="md"){this.isEditForm=!1,this.form={},this.selectedRow=[{id:o}],this.operationId=o,this.modalService.open(p,{centered:!0,size:j})}openModalMoreOperation(o){this.isEditForm=!1,this.moreIdSelected=this.selectedRow.map(p=>p.id)}closeModelDeleted(){this.modalRef?.hide(),this.loader=!1,this.btnDisabled=!0}OnSearch(o){this.ngxLoader.startLoader("allLoader"),this.loadentities()}OnSubmit(){this.ngxLoader.startLoader(this.operationLoader),!0===this.isEditForm?this.editEntity():this.registerEntity()}loadentities(){this.baseService.get(this.pagination).pipe((0,h.Q)(this.notifier)).subscribe(o=>{this.ngxLoader.stopLoader(f.a7),this.entities=o.data,this.pagination.totalItems=o.totalItems,this.LoadSuccess()},o=>{this.ngxLoader.stopLoader(f.a7),this.alertService.error(o)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[]}LoadSuccess(){}tableChange(o){this.pagination.filterType=o.sortField,this.pagination.sortType=1==o.sortOrder?"asc":"desc",this.loadentities()}registerEntity(){let o=this.mapRegisterForm(this.form);this.baseService.register(o).pipe((0,d.O)(),(0,C.c)(this.mainDelay),(0,M.Z)(),(0,h.Q)(this.notifier),(0,v.j)(()=>this.ngxLoader.stopLoader(this.operationLoader)),(0,R.W)(p=>(0,y.$)(p))).subscribe(p=>{p.success?this.submitFunished():this.alertService.error("general.message."+p.message)},p=>{this.alertService.error("general.message."+p)})}editEntity(){let o=this.mapForm(this.form);this.baseService.edit(o.id,o).pipe((0,d.O)(),(0,C.c)(this.mainDelay),(0,M.Z)(),(0,h.Q)(this.notifier),(0,v.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(p=>{p.success?this.submitFunished():this.alertService.error("general.message."+p.message)},p=>{this.alertService.error("general.message."+p)})}mapForm(o){return o}mapRegisterForm(o){return o.id=0,o}submitFunished(){this.loadentities(),this.alertService.success(),this.modalService?.dismissAll(),this.ngxLoader.stop(f.a7),this.btnDisabled=!0}EditModel(o,p,j="md"){this.isEditForm=!0,this.baseService.getById(o).pipe((0,h.Q)(this.notifier)).subscribe(F=>{F.success?this.form=F.data:this.alertService.error("general.message."+F.message),this.modalService.open(p,{centered:!0,size:j})},F=>{this.alertService.error()})}EditModelTilte(o){this.isEditForm=!0,this.baseService.getById(this.selectedRow[0].id).pipe((0,h.Q)(this.notifier)).subscribe(j=>{j?this.form=j:this.alertService.error("general.message."+j)},j=>{this.alertService.error()})}onSelectionChange(o){this.selectedRow=o,this.lengthSelect=o.length}resetSelected(){this.selectedRow=[],this.lengthSelect=0}pageChanged(o){this.pagination.pageNumber=o,this.loadentities()}ListItemChange(o){this.pagination.pageSize=o.target.value,this.loadentities()}searchChange(o){this.pagination.filterValue=o,this.loadentities()}DeleteConfirm(){this.ngxLoader.startLoader(f.Fq);let o=this.selectedRow.map(p=>p.id);this.baseService.deleteRange(o).pipe((0,d.O)(),(0,C.c)(this.mainDelay),(0,M.Z)(),(0,h.Q)(this.notifier),(0,v.j)(()=>this.ngxLoader.stopLoader(f.Fq))).subscribe(p=>{p.success?(this.alertService.success(),this.loadentities(),this.modalService.dismissAll(),this.resetSelected()):this.alertService.error("general.message."+p)},()=>{this.alertService.error()})}DeleteConfirmSoft(){console.log(this.selectedRow,"selectedRow"),this.ngxLoader.startLoader(f.Fq),this.baseService.softDelete(this.selectedRow[0].id).pipe((0,d.O)(),(0,C.c)(this.mainDelay),(0,M.Z)(),(0,h.Q)(this.notifier),(0,v.j)(()=>this.ngxLoader.stopLoader(f.Fq))).subscribe(o=>{o.success?(this.alertService.success(),this.loadentities(),this.modalService.dismissAll(),this.resetSelected()):this.alertService.error("general.message."+o)},()=>{this.alertService.error()})}getIds(){return this.selectedRow.map(o=>o.id)}isEmpty(o){return(void 0===o||null==o||o.length)<=0}OnReset(o){this.form={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems}}onReset(){this.form={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems}}closeModel(o){this.modalRef?.hide()}ngOnDestroy(){this.notifier.next(),this.notifier.complete(),this.OnDestroyMore()}OnDestroyMore(){}static{this.\u0275fac=function(p){return new(p||u)(I.rXU(k.nX),I.rXU(E.c$),I.rXU(U.Bq),I.rXU(x.d),I.rXU(e.u),I.rXU(T.vh),I.rXU(_.eD))}}static{this.\u0275cmp=I.VBU({type:u,selectors:[["app-base"]],viewQuery:function(p,j){if(1&p&&I.GBs(b.XI,5),2&p){let F;I.mGM(F=I.lsd())&&(j.tableMaster=F.first)}},decls:0,vars:0,template:function(p,j){},encapsulation:2})}}return u})()},88148:(X,L,l)=>{l.d(L,{p:()=>d});var r=l(54438),h=l(8147);let d=(()=>{class C{static{this.\u0275fac=function(R){return new(R||C)}}static{this.\u0275cmp=r.VBU({type:C,selectors:[["ngb-pagination-info"]],inputs:{pagination:"pagination"},decls:6,vars:2,consts:[[1,"d-inline-block","mx-1","text-pInfo"],["translate","general.table.pFrom",1,"text-pInfo"],["translate","general.table.item",1,"text-pInfo"]],template:function(R,y){1&R&&(r.j41(0,"span",0),r.EFF(1),r.k0s(),r.nrm(2,"span",1),r.j41(3,"span",0),r.EFF(4),r.k0s(),r.nrm(5,"span",2)),2&R&&(r.R7$(),r.JRh(y.pagination.totalItems>y.pagination.pageNumber*y.pagination.pageSize?y.pagination.pageNumber*y.pagination.pageSize:y.pagination.totalItems),r.R7$(3),r.JRh(y.pagination.totalItems))},dependencies:[h.Mm],styles:[".text-pInfo[_ngcontent-%COMP%]{font-size:.7rem;color:#8a96a0}"]})}}return C})()},91580:(X,L,l)=>{l.d(L,{g:()=>M});var r=l(54438),h=l(60177),d=l(89417);function C(v,R){if(1&v&&(r.j41(0,"option"),r.EFF(1),r.k0s()),2&v){const y=R.$implicit;r.R7$(),r.JRh(y)}}let M=(()=>{class v{constructor(){this.lengthChange=new r.bkB}ListItemChange(y){this.lengthChange.emit(y)}static{this.\u0275fac=function(b){return new(b||v)}}static{this.\u0275cmp=r.VBU({type:v,selectors:[["table-length"]],inputs:{lengthTable:"lengthTable"},outputs:{lengthChange:"lengthChange"},decls:4,vars:1,consts:[[1,"card-toolbar","mx-2"],[1,"fs-2","text-primary"],[1,"form-select","mx-2","d-inline","form-select-sm","w-auto",3,"change"],[4,"ngFor","ngForOf"]],template:function(b,f){1&b&&(r.j41(0,"div",0),r.nrm(1,"span",1),r.j41(2,"select",2),r.bIt("change",function(k){return f.ListItemChange(k)}),r.DNE(3,C,2,1,"option",3),r.k0s()()),2&b&&(r.R7$(3),r.Y8G("ngForOf",f.lengthTable))},dependencies:[h.Sq,d.xH,d.y7],encapsulation:2})}}return v})()}}]);
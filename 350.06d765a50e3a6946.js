"use strict";(self.webpackChunkvelzon=self.webpackChunkvelzon||[]).push([[350],{56701:(M,g,s)=>{s.d(g,{g:()=>m});var e=s(54438),l=s(62984),_=s(51188),h=s(3888);let m=(()=>{class n{constructor(a,p,c){this.authservice=a,this.router=p,this.alertService=c}canActivate(a){return!!this.authservice.permissionMatch(a.data.permission)||(this.alertService.error("general.notAllow.notAllowPageMessage"),this.router.navigate(["/"]),!1)}static{this.\u0275fac=function(p){return new(p||n)(e.KVO(l.J),e.KVO(_.Ix),e.KVO(h.u))}}static{this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})()},70053:(M,g,s)=>{s.d(g,{n:()=>m});var e=s(67569),l=s(45312),_=s(54438),h=s(21626);let m=(()=>{class n extends e.d{constructor(a){super(a,l.c.apiUrl+"Team/")}GetTeamLookUp(){return this.http.get(this.baseUrl+"TeamLookUp")}getAllDropDown(){return this.http.get(this.baseUrl+"GetAllDropDown")}static{this.\u0275fac=function(p){return new(p||n)(_.KVO(h.Qq))}}static{this.\u0275prov=_.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})()},79284:(M,g,s)=>{s.d(g,{G:()=>m});var e=s(67569),l=s(45312),_=s(54438),h=s(21626);let m=(()=>{class n extends e.d{constructor(a){super(a,l.c.apiUrl+"WorkTime/")}static{this.\u0275fac=function(p){return new(p||n)(_.KVO(h.Qq))}}static{this.\u0275prov=_.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})()},56131:(M,g,s)=>{s.d(g,{E:()=>_});var e=s(7673),l=s(99437);class _{constructor(m,n,v){this.router=m,this.BaseService=n,this.alertService=v,this.pagination={pageNumber:1,pageSize:10}}resolve(m,n){return this.BaseService.get(this.pagination).pipe((0,l.W)(v=>(this.router.navigate([""]),this.alertService.error(v),(0,e.of)(null))))}}},40724:(M,g,s)=>{s.d(g,{b:()=>L});var e=s(54438),l=s(8147),_=s(60177),h=s(69005),m=s(94575);const n=[[["","menuBtn",""]],[["","control",""]]],v=["[menuBtn]","[control]"];function a(r,b){1&r&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&r&&(e.R7$(),e.JRh(e.bMT(2,1,"general.table.all")))}function p(r,b){if(1&r){const o=e.RV6();e.j41(0,"a",17),e.bIt("click",function(){e.eBV(o),e.XpG(2);const d=e.sdS(11);return e.Njj(d.toggle())}),e.nrm(1,"i",18)(2,"span",19),e.k0s()}if(2&r){const o=e.XpG(2);e.BMQ("aria-expanded",!o.isCollapsed)}}function c(r,b){if(1&r){const o=e.RV6();e.j41(0,"div",21)(1,"button",22),e.nrm(2,"i",23)(3,"span",24),e.k0s(),e.j41(4,"ul",25)(5,"li",26),e.bIt("click",function(){e.eBV(o);const d=e.XpG(3);return e.Njj(d.onExportXlsx())}),e.j41(6,"a",27),e.nrm(7,"span",28),e.k0s()(),e.j41(8,"li",26),e.bIt("click",function(){e.eBV(o);const d=e.XpG(3);return e.Njj(d.onExportPDF())}),e.j41(9,"a",27),e.nrm(10,"span",29),e.k0s()()()()}if(2&r){const o=e.XpG(3);e.FS9("placement","en"===o.lang?"bottom-start":"bottom-end"),e.R7$(),e.Y8G("disabled",o.totalItems<=0)}}function E(r,b){if(1&r&&(e.qex(0),e.DNE(1,c,11,2,"div",20),e.bVm()),2&r){const o=e.XpG(2);e.R7$(),e.Y8G("hasPermission",o.exportPermission)}}function O(r,b){if(1&r){const o=e.RV6();e.j41(0,"a",31),e.bIt("click",function(){e.eBV(o);const d=e.XpG(3);return e.Njj(d.onAddNew())}),e.nrm(1,"i",32),e.j41(2,"span"),e.EFF(3),e.nI1(4,"translate"),e.k0s()()}if(2&r){const o=e.XpG(3);e.R7$(3),e.JRh(e.bMT(4,1,o.newLocal))}}function P(r,b){if(1&r&&(e.qex(0),e.DNE(1,O,5,3,"a",30),e.bVm()),2&r){const o=e.XpG(2);e.R7$(),e.Y8G("hasPermission",o.addPermission)}}function I(r,b){if(1&r&&(e.j41(0,"div",15),e.DNE(1,p,3,1,"a",16)(2,E,2,1,"ng-container",4)(3,P,2,1,"ng-container",4),e.k0s()),2&r){const o=e.XpG();e.R7$(),e.Y8G("ngIf",o.showSearch),e.R7$(),e.Y8G("ngIf",o.showExport),e.R7$(),e.Y8G("ngIf",o.showAdd)}}let L=(()=>{class r{constructor(o){this.translateService=o,this.totalItems=0,this.title="",this.titleMore="",this.newLocal="general.action.addNew",this.data=[],this.addPermission=[],this.exportPermission=[],this.showSearch=!0,this.showExport=!0,this.showAdd=!0,this.showAllStr=!0,this.addNew=new e.bkB,this.exportXlsx=new e.bkB,this.exportPDF=new e.bkB,this.search=new e.bkB,this.reset=new e.bkB,this.showAction=!0,this.isCollapsed=!0,this.lang=this.translateService.currentLang}ngOnInit(){}onAddNew(){this.addNew.emit(!0)}onSearch(){this.search.emit(!0)}onExportXlsx(){this.exportXlsx.emit(!0)}onExportPDF(){this.exportPDF.emit(!0)}onReset(){this.reset.emit(!0)}static{this.\u0275fac=function(f){return new(f||r)(e.rXU(l.c$))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["base-filter"]],inputs:{totalItems:"totalItems",title:"title",titleMore:"titleMore",newLocal:"newLocal",data:"data",addPermission:"addPermission",exportPermission:"exportPermission",showSearch:"showSearch",showExport:"showExport",showAdd:"showAdd",showAllStr:"showAllStr",showAction:"showAction"},outputs:{addNew:"addNew",exportXlsx:"exportXlsx",exportPDF:"exportPDF",search:"search",reset:"reset"},ngContentSelectors:v,decls:21,vars:7,consts:[["collapse","ngbCollapse"],[1,"card-header","border-0"],[1,"row","align-items-center","mb-2","justify-content-between"],[1,"col-12","col-md-3","card-title","mb-0","flex-grow-1"],[4,"ngIf"],["class","col-12 col-md-6 text-right",4,"ngIf"],["id","collapseExample",1,"collaps","show",3,"ngbCollapseChange","ngbCollapse"],[1,"row"],[1,"col-12","col-md-2","text-center","mb-2","d-flex","text-sm-center","text-md-left"],["type","button",1,"btn","w-sm-100","w-md-auto","btn-primary","btn-sm",3,"click"],[1,"ri-file-search-fill","me-1","align-bottom"],["translate","general.action.search"],["type","button",1,"btn","btn-danger","w-sm-100","w-md-auto","mx-1","btn-sm",3,"click"],[1,"ri-equalizer-fill","me-1","align-bottom"],["translate","general.action.clear"],[1,"col-12","col-md-6","text-right"],["class","btn btn-success  mx-1","data-bs-toggle","collapse","href","javascript:void(0);",3,"click",4,"ngIf"],["data-bs-toggle","collapse","href","javascript:void(0);",1,"btn","btn-success","mx-1",3,"click"],[1,"ri-filter-2-line","align-bottom"],["translate","general.action.filter"],["class","dropdown d-inline","ngbDropdown","",3,"placement",4,"hasPermission"],["ngbDropdown","",1,"dropdown","d-inline",3,"placement"],["ngbDropdownToggle","","type","button",1,"btn","btn-info","mx-2","me-4",3,"disabled"],[1,"ri-chat-download-line","me-1","align-bottom"],["translate","general.action.export"],["aria-labelledby","dropdownMenuButton1","ngbDropdownMenu","",1,"dropdown-menu"],[3,"click"],["href","javascript:void(0);",1,"dropdown-item"],["translate","general.action.xlxs"],["translate","general.action.pdf"],["class","btn btn-danger","href","javascript:void(0);",3,"click",4,"hasPermission"],["href","javascript:void(0);",1,"btn","btn-danger",3,"click"],[1,"ri-add-line","align-bottom"]],template:function(f,d){if(1&f){const C=e.RV6();e.NAR(n),e.j41(0,"div",1)(1,"div",2)(2,"h5",3)(3,"span"),e.SdG(4),e.k0s(),e.j41(5,"span"),e.DNE(6,a,3,3,"span",4),e.EFF(7),e.nI1(8,"translate"),e.k0s()(),e.DNE(9,I,4,3,"div",5),e.k0s(),e.j41(10,"div",6,0),e.mxI("ngbCollapseChange",function(i){return e.eBV(C),e.DH7(d.isCollapsed,i)||(d.isCollapsed=i),e.Njj(i)}),e.j41(12,"div",7),e.SdG(13,1),e.j41(14,"div",8)(15,"button",9),e.bIt("click",function(){return e.eBV(C),e.Njj(d.onSearch())}),e.nrm(16,"i",10)(17,"span",11),e.k0s(),e.j41(18,"button",12),e.bIt("click",function(){return e.eBV(C),e.Njj(d.onReset())}),e.nrm(19,"i",13)(20,"span",14),e.k0s()()()()()}2&f&&(e.R7$(6),e.Y8G("ngIf",d.showAllStr),e.R7$(),e.Lme(" ",e.bMT(8,5,d.title)," ",d.titleMore,""),e.R7$(2),e.Y8G("ngIf",d.showAction),e.R7$(),e.R50("ngbCollapse",d.isCollapsed))},dependencies:[_.bT,h.tg,h.do,h.U0,l.Mm,h.$G,m.p,l.D9],encapsulation:2})}}return r})()},75622:(M,g,s)=>{s.d(g,{w:()=>f});var e=s(21413),l=s(56977),_=s(37021),h=s(35335),m=s(45236),n=s(70980),v=s(99437),a=s(18810),p=s(45286),c=s(36158),E=s(54438),O=s(51188),P=s(8147),I=s(69005),L=s(67569),r=s(3888),b=s(60177),o=s(1530);let f=(()=>{class d{constructor(t,i,u,D,x,R,S){this.routerActive=t,this.translateService=i,this.modalService=u,this.baseService=D,this.alertService=x,this.datePipe=R,this.ngxLoader=S,this.title="",this.mainDelay=50,this.operationId=0,this.entities=[],this.selectedRow=[],this.pagination={pageNumber:1,pageSize:10},this.notifier=new e.B,this.checkAll=!1,this.checkOne=!1,this.checkMore=!1,this.loader=!1,this.form={},this.isEditForm=!1,this.draw=1,this.index=0,this.lengthSelect=0,this.screenName="",this.filterToggle=!0,this.start=1,this.startFirstLoad=!0,this.btnDisabled=!0,this.loaderSearchShap=c.cX,this.loaderOperationShap=c.$$,this.operationLoader=c.ZW,this.loaderDeleteShap=c.jg,this.mainTable=c.uG,this.searchLoader=c.a7,this.deleteLoader=c.Fq,this.langArabic="ar",this.paymentTypes=[],this.tableLengthSelect=[10,20,30,50,100,500,1e3],this.maxSizePagination=10,this.isResolveList=!1,this.countLoad=0,this.activeList=[{id:1,name:"active"},{id:2,name:"noActive"}],this.pagination.pageSize=10,this.pagination.pageNumber=1}ngOnInit(){this.activeList.forEach(t=>{t.name=this.getTranslationText("general.table."+t.name)}),this.lang=this.translateService.currentLang,this.translateConfig(),this.ngOnInitMore()}ngOnInitMore(){}routeDataConfig(){this.routerActive.data.pipe((0,l.Q)(this.notifier)).subscribe(t=>{this.entities=t.data.result,this.pagination=t.data.pagination,this.pagination.pageNumber=1,this.pagination.pageSize=10,this.ngxLoader.stopLoader(c.a7)},t=>{this.alertService.error()})}translateConfig(){this.translateService.onLangChange.pipe((0,l.Q)(this.notifier)).subscribe(t=>{this.lang=t.lang})}getTranslationText(t){let i="";return this.translateService.get(t).pipe((0,l.Q)(this.notifier)).subscribe(u=>{i=u}),i}ngAfterViewInit(){this.ngAfterViewInitMore()}ngAfterViewInitMore(){}getRenderString(t){return null!=t?t.substring(0,10)+"...":""}getRenderIndex(t){return this.index++,this.index}successDataTable(t){this.ngxLoader.stopLoader(c.a7),this.pagination.totalItems=t.data.pagination.totalItems,this.startFirstLoad=!1}errorDataTable(){this.ngxLoader.stopLoader(c.a7),this.alertService.error()}openModalTitle(t,i="md"){this.isEditForm=!1,this.form={},this.modalService.open(t,{centered:!0,size:i})}openModal(t,i,u="md"){this.isEditForm=!1,this.form={},this.selectedRow=[{id:t}],this.operationId=t,this.modalService.open(i,{centered:!0,size:u})}openModalMoreOperation(t){this.isEditForm=!1,this.moreIdSelected=this.selectedRow.map(i=>i.id)}closeModelDeleted(){this.modalRef?.hide(),this.loader=!1,this.btnDisabled=!0}OnSearch(t){this.ngxLoader.startLoader("allLoader"),this.loadentities()}OnSubmit(){this.ngxLoader.startLoader(this.operationLoader),!0===this.isEditForm?this.editEntity():this.registerEntity()}loadentities(){this.baseService.get(this.pagination).pipe((0,l.Q)(this.notifier)).subscribe(t=>{this.ngxLoader.stopLoader(c.a7),this.entities=t.data,this.pagination.totalItems=t.totalItems,this.LoadSuccess()},t=>{this.ngxLoader.stopLoader(c.a7),this.alertService.error(t)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[]}LoadSuccess(){}tableChange(t){this.pagination.filterType=t.sortField,this.pagination.sortType=1==t.sortOrder?"asc":"desc",this.loadentities()}registerEntity(){let t=this.mapRegisterForm(this.form);this.baseService.register(t).pipe((0,_.O)(),(0,h.c)(this.mainDelay),(0,m.Z)(),(0,l.Q)(this.notifier),(0,n.j)(()=>this.ngxLoader.stopLoader(this.operationLoader)),(0,v.W)(i=>(0,a.$)(i))).subscribe(i=>{i.success?this.submitFunished():this.alertService.error("general.message."+i.message)},i=>{this.alertService.error("general.message."+i)})}editEntity(){let t=this.mapForm(this.form);this.baseService.edit(t.id,t).pipe((0,_.O)(),(0,h.c)(this.mainDelay),(0,m.Z)(),(0,l.Q)(this.notifier),(0,n.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(i=>{i.success?this.submitFunished():this.alertService.error("general.message."+i.message)},i=>{this.alertService.error("general.message."+i)})}mapForm(t){return t}mapRegisterForm(t){return t.id=0,t}submitFunished(){this.loadentities(),this.alertService.success(),this.modalService?.dismissAll(),this.ngxLoader.stop(c.a7),this.btnDisabled=!0}EditModel(t,i,u="md"){this.isEditForm=!0,this.baseService.getById(t).pipe((0,l.Q)(this.notifier)).subscribe(D=>{D.success?this.form=D.data:this.alertService.error("general.message."+D.message),this.modalService.open(i,{centered:!0,size:u})},D=>{this.alertService.error()})}EditModelTilte(t){this.isEditForm=!0,this.baseService.getById(this.selectedRow[0].id).pipe((0,l.Q)(this.notifier)).subscribe(u=>{u?this.form=u:this.alertService.error("general.message."+u)},u=>{this.alertService.error()})}onSelectionChange(t){this.selectedRow=t,this.lengthSelect=t.length}resetSelected(){this.selectedRow=[],this.lengthSelect=0}pageChanged(t){this.pagination.pageNumber=t,this.loadentities()}ListItemChange(t){this.pagination.pageSize=t.target.value,this.loadentities()}searchChange(t){this.pagination.filterValue=t,this.loadentities()}DeleteConfirm(){console.log(this.selectedRow),this.ngxLoader.startLoader(c.Fq);let t=this.selectedRow.map(i=>i.id);this.baseService.deleteRange(t).pipe((0,_.O)(),(0,h.c)(this.mainDelay),(0,m.Z)(),(0,l.Q)(this.notifier),(0,n.j)(()=>this.ngxLoader.stopLoader(c.Fq))).subscribe(i=>{i.success?(this.alertService.success(),this.loadentities(),this.modalService.dismissAll(),this.resetSelected()):this.alertService.error("general.message."+i)},()=>{this.alertService.error()})}DeleteConfirmSoft(){console.log(this.selectedRow,"selectedRow"),this.ngxLoader.startLoader(c.Fq),this.baseService.softDelete(this.selectedRow[0].id).pipe((0,_.O)(),(0,h.c)(this.mainDelay),(0,m.Z)(),(0,l.Q)(this.notifier),(0,n.j)(()=>this.ngxLoader.stopLoader(c.Fq))).subscribe(t=>{t.success?(this.alertService.success(),this.loadentities(),this.modalService.dismissAll(),this.resetSelected()):this.alertService.error("general.message."+t)},()=>{this.alertService.error()})}getIds(){return this.selectedRow.map(t=>t.id)}isEmpty(t){return(void 0===t||null==t||t.length)<=0}OnReset(t){this.form={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems}}onReset(){this.form={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems}}closeModel(t){this.modalRef?.hide()}ngOnDestroy(){this.notifier.next(),this.notifier.complete(),this.OnDestroyMore()}OnDestroyMore(){}static{this.\u0275fac=function(i){return new(i||d)(E.rXU(O.nX),E.rXU(P.c$),E.rXU(I.Bq),E.rXU(L.d),E.rXU(r.u),E.rXU(b.vh),E.rXU(o.eD))}}static{this.\u0275cmp=E.VBU({type:d,selectors:[["app-base"]],viewQuery:function(i,u){if(1&i&&E.GBs(p.XI,5),2&i){let D;E.mGM(D=E.lsd())&&(u.tableMaster=D.first)}},decls:0,vars:0,template:function(i,u){},encapsulation:2})}}return d})()},88148:(M,g,s)=>{s.d(g,{p:()=>_});var e=s(54438),l=s(8147);let _=(()=>{class h{static{this.\u0275fac=function(v){return new(v||h)}}static{this.\u0275cmp=e.VBU({type:h,selectors:[["ngb-pagination-info"]],inputs:{pagination:"pagination"},decls:6,vars:2,consts:[[1,"d-inline-block","mx-1","text-pInfo"],["translate","general.table.pFrom",1,"text-pInfo"],["translate","general.table.item",1,"text-pInfo"]],template:function(v,a){1&v&&(e.j41(0,"span",0),e.EFF(1),e.k0s(),e.nrm(2,"span",1),e.j41(3,"span",0),e.EFF(4),e.k0s(),e.nrm(5,"span",2)),2&v&&(e.R7$(),e.JRh(a.pagination.totalItems>a.pagination.pageNumber*a.pagination.pageSize?a.pagination.pageNumber*a.pagination.pageSize:a.pagination.totalItems),e.R7$(3),e.JRh(a.pagination.totalItems))},dependencies:[l.Mm],styles:[".text-pInfo[_ngcontent-%COMP%]{font-size:.7rem;color:#8a96a0}"]})}}return h})()},91580:(M,g,s)=>{s.d(g,{g:()=>m});var e=s(54438),l=s(60177),_=s(89417);function h(n,v){if(1&n&&(e.j41(0,"option"),e.EFF(1),e.k0s()),2&n){const a=v.$implicit;e.R7$(),e.JRh(a)}}let m=(()=>{class n{constructor(){this.lengthChange=new e.bkB}ListItemChange(a){this.lengthChange.emit(a)}static{this.\u0275fac=function(p){return new(p||n)}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["table-length"]],inputs:{lengthTable:"lengthTable"},outputs:{lengthChange:"lengthChange"},decls:4,vars:1,consts:[[1,"card-toolbar","mx-2"],[1,"fs-2","text-primary"],[1,"form-select","mx-2","d-inline","form-select-sm","w-auto",3,"change"],[4,"ngFor","ngForOf"]],template:function(p,c){1&p&&(e.j41(0,"div",0),e.nrm(1,"span",1),e.j41(2,"select",2),e.bIt("change",function(O){return c.ListItemChange(O)}),e.DNE(3,h,2,1,"option",3),e.k0s()()),2&p&&(e.R7$(3),e.Y8G("ngForOf",c.lengthTable))},dependencies:[l.Sq,_.xH,_.y7],encapsulation:2})}}return n})()}}]);